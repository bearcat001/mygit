cscope 15 /var/www/wlinke               0001040993
	@application/config/autoload.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

40 
	g$autŞßd
['·ckages'] = 
¬¿y
();

55 
	g$autŞßd
['lib¿r›s'] = 
¬¿y
('database');

67 
	g$autŞßd
['h–³r'] = 
¬¿y
('url');

83 
	g$autŞßd
['cÚfig'] = 
¬¿y
();

99 
	g$autŞßd
['Ïnguage'] = 
¬¿y
();

112 
	g$autŞßd
['mod–'] = 
¬¿y
('m_create_table');

	@application/config/config.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

17 
	g$cÚfig
['base_url'] = 'http://localhost/wlinke/';

29 
	g$cÚfig
['index_page'] = '';

47 
	g$cÚfig
['uri_protocol'] = 'AUTO';

60 
	g$cÚfig
['url_suffix'] = '';

72 
	g$cÚfig
['language'] = 'english';

83 
	g$cÚfig
['charset'] = 'UTF-8';

94 
	g$cÚfig
['’abË_hooks'] = 
FALSE
;

109 
	g$cÚfig
['subclass_prefix'] = 'WE_';

129 
	g$cÚfig
['permitted_uri_chars'] = 'a-z 0-9~%.:_\-+=@.';

157 
	g$cÚfig
['®low_g‘_¬¿y'] = 
TRUE
;

158 
	g$cÚfig
['’abË_qu”y_¡ršgs'] = 
FALSE
;

159 
	g$cÚfig
['controller_trigger'] = 'c';

160 
	g$cÚfig
['function_trigger'] = 'm';

161 
	g$cÚfig
['directory_trigger'] = 'd';

183 
	g$cÚfig
['log_threshold'] = 1;

194 
	g$cÚfig
['log_path'] = '';

205 
	g$cÚfig
['log_date_format'] = 'Y-m-d H:i:s';

216 
	g$cÚfig
['cache_path'] = 'application/cache/';

227 
	g$cÚfig
['encryption_key'] = 'we_';

247 
	g$cÚfig
['sess_cookie_name'] = 'we_session';

248 
	g$cÚfig
['sess_expiration'] = 300000;

249 
	g$cÚfig
['£ss_expœe_Ú_şo£'] = 
FALSE
;

250 
	g$cÚfig
['£ss_’üy±_cook›'] = 
TRUE
;

251 
	g$cÚfig
['£ss_u£_d©aba£'] = 
TRUE
;

252 
	g$cÚfig
['sess_table_name'] = 'we_session';

253 
	g$cÚfig
['£ss_m©ch_'] = 
FALSE
;

254 
	g$cÚfig
['£ss_m©ch_u£¿g’t'] = 
TRUE
;

255 
	g$cÚfig
['sess_time_to_update'] = 300000;

268 
	g$cÚfig
['cookie_prefix'] = "";

269 
	g$cÚfig
['cookie_domain'] = "";

270 
	g$cÚfig
['cookie_path'] = "/";

271 
	g$cÚfig
['cook›_£cu»'] = 
FALSE
;

282 
	g$cÚfig
['glob®_xss_f‹ršg'] = 
FALSE
;

296 
	g$cÚfig
['c¤f_´ÙeùiÚ'] = 
FALSE
;

297 
	g$cÚfig
['csrf_token_name'] = 'csrf_test_name';

298 
	g$cÚfig
['csrf_cookie_name'] = 'csrf_cookie_name';

299 
	g$cÚfig
['csrf_expire'] = 7200;

318 
	g$cÚfig
['com´ess_ouut'] = 
FALSE
;

331 
	g$cÚfig
['time_reference'] = 'local';

344 
	g$cÚfig
['»wr™e_shÜt_gs'] = 
FALSE
;

358 
	g$cÚfig
['proxy_ips'] = '';

	@application/config/constants.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

16 
defše
('FILE_READ_MODE', 0644);

17 
defše
('FILE_WRITE_MODE', 0666);

18 
defše
('DIR_READ_MODE', 0755);

19 
defše
('DIR_WRITE_MODE', 0777);

30 
defše
('FOPEN_READ', 'rb');

31 
defše
('FOPEN_READ_WRITE', 'r+b');

32 
defše
('FOPEN_WRITE_CREATE_DESTRUCTIVE', 'wb');

33 
defše
('FOPEN_READ_WRITE_CREATE_DESTRUCTIVE', 'w+b');

34 
defše
('FOPEN_WRITE_CREATE', 'ab');

35 
defše
('FOPEN_READ_WRITE_CREATE', 'a+b');

36 
defše
('FOPEN_WRITE_CREATE_STRICT', 'xb');

37 
defše
('FOPEN_READ_WRITE_CREATE_STRICT', 'x+b');

	@application/config/database.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

48 
	g$aùive_group
 = 'default';

49 
	g$aùive_»cÜd
 = 
TRUE
;

51 
	g$db
['default']['hostname'] = 'localhost';

52 
	g$db
['default']['username'] = 'root';

53 
	g$db
['default']['password'] = '19900711';

54 
	g$db
['default']['database'] = 'wlinke';

55 
	g$db
['default']['dbdriver'] = 'mysql';

56 
	g$db
['default']['dbprefix'] = 'we_';

57 
	g$db
['deçuÉ']['pcÚÃù'] = 
TRUE
;

58 
	g$db
['deçuÉ']['db_debug'] = 
TRUE
;

59 
	g$db
['deçuÉ']['ÿche_Ú'] = 
FALSE
;

60 
	g$db
['default']['cachedir'] = '';

61 
	g$db
['default']['char_set'] = 'utf8';

62 
	g$db
['default']['dbcollat'] = 'utf8_general_ci';

63 
	g$db
['default']['swap_pre'] = '';

64 
	g$db
['deçuÉ']['autoš™'] = 
TRUE
;

65 
	g$db
['deçuÉ']['¡riùÚ'] = 
FALSE
;

	@application/config/doctypes.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

3 
	g$_doùy³s
 = 
¬¿y
(

	@application/config/foreign_chars.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

10 
	g$fÜeign_ch¬aù”s
 = 
¬¿y
(

	@application/config/hooks.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

	@application/config/migration.php

1 <?
php
 
defšed
('BASEPATH'è
OR
 
ex™
('No direct script‡ccess‡llowed');

11 
	g$cÚfig
['mig¿tiÚ_’abËd'] = 
FALSE
;

24 
	g$cÚfig
['migration_version'] = 0;

37 
	g$cÚfig
['mig¿tiÚ_·th'] = 
APPPATH
 . 'migrations/';

	@application/config/mimes.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

11 
	g$mimes
 = 
¬¿y
( 'hqx' => 'application/mac-binhex40',

13 'csv' => 
¬¿y
('text/x-comma-separated-values', 'text/comma-separated-values', 'application/octet-stream', 'application/vnd.ms-excel', 'application/x-csv', 'text/x-csv', 'text/csv', 'application/csv', 'application/excel', 'application/vnd.msexcel'),

18 'exe' => 
¬¿y
('application/octet-stream', 'application/x-msdownload'),

25 'pdf' => 
¬¿y
('application/pdf', 'application/x-download'),

32 'xls' => 
¬¿y
('application/excel', 'application/vnd.ms-excel', 'application/msexcel'),

33 'µt' => 
¬¿y
('application/powerpoint', 'application/vnd.ms-powerpoint'),

51 'tgz' => 
¬¿y
('application/x-tar', 'application/x-gzip-compressed'),

54 'z' => 
¬¿y
('application/x-zip', 'application/zip', 'application/x-zip-compressed'),

59 'mp3' => 
¬¿y
('audio/mpeg', 'audio/mpg', 'audio/mpeg3', 'audio/mp3'),

68 'wav' => 
¬¿y
('audio/x-wav', 'audio/wave', 'audio/wav'),

69 'bmp' => 
¬¿y
('image/bmp', 'image/x-windows-bmp'),

71 'j³g' => 
¬¿y
('image/jpeg', 'image/pjpeg'),

72 'jpg' => 
¬¿y
('image/jpeg', 'image/pjpeg'),

73 'j³' => 
¬¿y
('image/jpeg', 'image/pjpeg'),

74 '²g' => 
¬¿y
('image/png', 'image/x-png'),

83 'log' => 
¬¿y
('text/plain', 'text/x-log'),

98 'wÜd' => 
¬¿y
('application/msword', 'application/octet-stream'),

101 'jsÚ' => 
¬¿y
('application/json', 'text/json')

	@application/config/profiler.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

	@application/config/routes.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

41 
	g$rou‹
['default_controller'] = "c_login";

42 
	g$rou‹
['404_override'] = '';

	@application/config/smileys.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

15 
	g$smeys
 = 
¬¿y
(

19 ':-)' => 
¬¿y
('grin.gif', '19', '19', 'grin'),

20 ':lŞ:' => 
¬¿y
('lol.gif', '19', '19', 'LOL'),

21 ':ch“£:' => 
¬¿y
('cheese.gif', '19', '19', 'cheese'),

22 ':)' => 
¬¿y
('smile.gif', '19', '19', 'smile'),

23 ';-)' => 
¬¿y
('wink.gif', '19', '19', 'wink'),

24 ';)' => 
¬¿y
('wink.gif', '19', '19', 'wink'),

25 ':smœk:' => 
¬¿y
('smirk.gif', '19', '19', 'smirk'),

26 ':rŞl:' => 
¬¿y
('rolleyes.gif', '19', '19', 'rolleyes'),

27 ':-S' => 
¬¿y
('confused.gif', '19', '19', 'confused'),

28 ':wow:' => 
¬¿y
('surprise.gif', '19', '19', 'surprised'),

29 ':bug:' => 
¬¿y
('bigsurprise.gif', '19', '19', 'big surprise'),

30 ':-P' => 
¬¿y
('tongue_laugh.gif', '19', '19', 'tongue†augh'),

31 '%-P' => 
¬¿y
('tongue_rolleye.gif', '19', '19', 'tongue„olleye'),

32 ';-P' => 
¬¿y
('tongue_wink.gif', '19', '19', 'tongue wink'),

33 ':P' => 
¬¿y
('raspberry.gif', '19', '19', 'raspberry'),

34 ':bÏnk:' => 
¬¿y
('blank.gif', '19', '19', 'blank stare'),

35 ':lÚg:' => 
¬¿y
('longface.gif', '19', '19', 'long face'),

36 ':ohh:' => 
¬¿y
('ohh.gif', '19', '19', 'ohh'),

37 ':g¼r:' => 
¬¿y
('grrr.gif', '19', '19', 'grrr'),

38 ':guÍ:' => 
¬¿y
('gulp.gif', '19', '19', 'gulp'),

39 '8-/' => 
¬¿y
('ohoh.gif', '19', '19', 'oh oh'),

40 ':down:' => 
¬¿y
('downer.gif', '19', '19', 'downer'),

41 ':»d:' => 
¬¿y
('embarrassed.gif', '19', '19', 'red face'),

42 ':sick:' => 
¬¿y
('sick.gif', '19', '19', 'sick'),

43 ':shut:' => 
¬¿y
('shuteye.gif', '19', '19', 'shutƒye'),

44 ':-/' => 
¬¿y
('hmm.gif', '19', '19', 'hmmm'),

45 '>:(' => 
¬¿y
('mad.gif', '19', '19', 'mad'),

46 ':mad:' => 
¬¿y
('mad.gif', '19', '19', 'mad'),

47 '>:-(' => 
¬¿y
('angry.gif', '19', '19', 'angry'),

48 ':ªgry:' => 
¬¿y
('angry.gif', '19', '19', 'angry'),

49 ':z:' => 
¬¿y
('zip.gif', '19', '19', 'zipper'),

50 ':kiss:' => 
¬¿y
('kiss.gif', '19', '19', 'kiss'),

51 ':ahhh:' => 
¬¿y
('shock.gif', '19', '19', 'shock'),

52 ':coŞsme:' => 
¬¿y
('shade_smile.gif', '19', '19', 'cool smile'),

53 ':coŞsmœk:' => 
¬¿y
('shade_smirk.gif', '19', '19', 'cool smirk'),

54 ':coŞgrš:' => 
¬¿y
('shade_grin.gif', '19', '19', 'cool grin'),

55 ':coŞhmm:' => 
¬¿y
('shade_hmm.gif', '19', '19', 'cool hmm'),

56 ':coŞmad:' => 
¬¿y
('shade_mad.gif', '19', '19', 'cool mad'),

57 ':coŞch“£:' => 
¬¿y
('shade_cheese.gif', '19', '19', 'cool cheese'),

58 ':vampœe:' => 
¬¿y
('vampire.gif', '19', '19', 'vampire'),

59 ':¢ake:' => 
¬¿y
('snake.gif', '19', '19', 'snake'),

60 ':exşaim:' => 
¬¿y
('exclaim.gif', '19', '19', 'excaim'),

61 ':que¡iÚ:' => 
¬¿y
('question.gif', '19', '19', 'question')

	@application/config/testing/database.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

48 
	g$aùive_group
 = 'default';

49 
	g$aùive_»cÜd
 = 
TRUE
;

51 
	g$db
['default']['hostname'] = 'localhost';

52 
	g$db
['default']['username'] = 'root';

53 
	g$db
['default']['password'] = '19900711';

54 
	g$db
['default']['database'] = 'wlinke_test';

55 
	g$db
['default']['dbdriver'] = 'mysql';

56 
	g$db
['default']['dbprefix'] = 'we_';

57 
	g$db
['deçuÉ']['pcÚÃù'] = 
TRUE
;

58 
	g$db
['deçuÉ']['db_debug'] = 
TRUE
;

59 
	g$db
['deçuÉ']['ÿche_Ú'] = 
FALSE
;

60 
	g$db
['default']['cachedir'] = '';

61 
	g$db
['default']['char_set'] = 'utf8';

62 
	g$db
['default']['dbcollat'] = 'utf8_general_ci';

63 
	g$db
['default']['swap_pre'] = '';

64 
	g$db
['deçuÉ']['autoš™'] = 
TRUE
;

65 
	g$db
['deçuÉ']['¡riùÚ'] = 
FALSE
;

	@application/config/user_agents.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

13 
	g$¶©fÜms
 = 
¬¿y
 (

50 
	g$brow£rs
 = 
¬¿y
(

75 
	g$mobes
 = 
¬¿y
(

166 
	g$robÙs
 = 
¬¿y
(

	@application/controllers/c_ajax.php

1 <?
php


2 şas 
	cc_ajax
 
ex‹nds
 
	mCI_CÚŒŞËr
 {

3 
´iv©e
 
	m$½c_u¾
;

4 
´iv©e
 
	m$ba£_u¾
;

5 
´iv©e
 
	m$u£r_d©a
;

7 
funùiÚ
 
	$__cÚ¡ruù
() {

8 
·»Á
::
	`__cÚ¡ruù
 ();

9 
$this
->
lßd
->
	`lib¿ry
 ( 'session' );

10 
$this
->
½c_u¾
 = 
	`ba£_u¾
 ( 'xmlrpc' );

11 
$this
->
ba£_u¾
 = 
	`ba£_u¾
 ();

12 
$this
->
lßd
->
	`h–³r
 ( 'date' );

13 
$this
->
u£r_d©a
 = 
	`un£rŸlize
 ( $this->
£ssiÚ
->
	`u£rd©a
 ( 'user_data' ) );

16 
funùiÚ
 
	$šdex
() {

17 
$aùiÚ
 = 
$this
->
šput
->
	`po¡
 ( 'action' );

18 
$aùiÚ
) {

20 
$logš_ema
=
$this
->
šput
->
	`po¡
('login_email');

21 
$logš_·sswÜd
=
$this
->
šput
->
	`po¡
('login_password');

22 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

23 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

24 
$¡©us
 = 
$½c
->
	`qu”y
(

26 
$logš_ema
,

27 
$logš_·sswÜd


29 
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
();

30 if(
	`¬¿y_key_exi¡s
('u£r_id',
$u£r_d©a
)){

31 
echo
 "yes";

33 
echo
 "no";

37 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

38 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

39 
$¡©us
 = 
$½c
->
	`qu”y
(

41 
$this
->
u£r_d©a
['token'],

42 
$this
->
šput
->
	`po¡
('filter'),

43 
$this
->
šput
->
	`po¡
('last_feed_id')

45 
$»suÉ
=
$½c
->
	`g‘Re¥Ú£
();

46 if(!
	`¬¿y_key_exi¡s
("”rÜ",
$»suÉ
[0])){

47 
$»t
="";

48 
	`fÜ—ch
(
$»suÉ
 
as
 
$key
=>
$v®ue
){

49 
$»t
.=<<<
EOD


50 <
div
 
şass
="span1">

51 <
img
 
width
="50" 
¤c
="{$value['user_avatar']}" />

52 </
div
>

53 <
div
 
şass
="span6">

54 <
div
 
şass
="row">

55 <
div
 
şass
="span6">

56 <
a
 
h»f
="javasüt:void(0);">{
$v®ue
['display_name']}</a>:{$value['feed_content']}

57 </
div
>

58 <
div
 
şass
="span6"></div>

59 <
div
 
şass
="¥ª6"><
br
></div>

60 
EOD
;

61 if(
	`is£t
(
$v®ue
['source_feed'])){

62 
$Œª¥Úd_u¾
="Œª¥Úd_".
$v®ue
['feed_id']."_".$value['source_feed']['feed_id'];

63 
$comm’t_u¾
="comm’t_".
$v®ue
['feed_id']."_".$value['source_feed']['feed_id'];

65 
$Œª¥Úd_u¾
="Œª¥Úd_".
$v®ue
['feed_id'];

66 
$comm’t_u¾
="comm’t_".
$v®ue
['feed_id'];

68 if(
	`is£t
(
$v®ue
['source_feed'])){

69 
$time
=
	`time¥ª
(
$v®ue
['sourû_ãed']['ü—‹_time'],
	`now
());

71 
$»t
.=<<<
EOD


72 <
div
 
şass
="span5 well">

73 <
div
 
şass
="row">

74 <
div
 
şass
="span5">

75 <
a
 
h»f
="javasüt:void(0);">{
$v®ue
['source_feed']['display_name']}</a>:{$value['source_feed']['feed_content']}

76 </
div
>

77 <
div
 
şass
="¥ª5"><
br
></div>

78 <
div
 
şass
="span5">

79 <
div
 
¡yË
="float:left;">

80 <
a
 
h»f
="javasüt:void(0);">{
$time
}å‰</a>

81 </
div
>

82 <
div
 
¡yË
="float:right;">

83 <
a
 
d©a
-
toggË
="mod®" 
h»f
="#{$Œª¥Úd_u¾}">è½¬å‘({
$v®ue
['source_feed']['transpond_count']})</a> |

84 <
a
 
h»f
="javasüt:void(0);" 
d©a
-
toggË
="cŞÏp£" d©a-
rg‘
="#{$comm’t_u¾}">è¯„è®º({
$v®ue
['source_feed']['comment_count']})</a>

85 </
div
>

86 </
div
>

88 <
div
 
şass
="span6">

89 <
div
 
id
="{$comm’t_u¾}" 
şass
="collapse">æš‚æ—¶ä¸èƒ½è¯„è®ºå“¦~ï¼</div>

90 </
div
>

91 </
div
>

92 </
div
>

93 <
div
 
şass
="mod® fade" 
id
="{$transpond_url}">

94 <
div
 
şass
="modal-header">

95 <
a
 
şass
="şo£" 
d©a
-
dismiss
="modal">Ã—</a>

96 <
h3
>è½¬å‘å¾®åš</h3>

97 </
div
>

98 <
div
 
şass
="modal-body">

99 <
fÜm
 
aùiÚ
="<?ph°echØba£_u¾('c_·ge_weibo/Œª¥Úd_weibo_subm™');?>" 
m‘hod
="post">

100 <
‹x»a
 
¡yË
="width: 98%" 
şass
="input-xlarge"

101 
Çme
="Œª¥Úd_weibo_cÚ‹Á" 
rows
="3">

102 <
šput
 
ty³
="hidd’" 
Çme
="transpond_weibo_id"

103 
v®ue
="{$value['source_feed']['feed_id']}" />

104 <
div
 
¡yË
="text-align:„ight;">

105 <
bu‰Ú
 
ty³
="subm™" 
şass
="btn">è½¬å‘</button>

106 </
div
>

107 </
fÜm
>

108 </
div
>

109 </
div
>

110 
EOD
;

112 
$time
=
	`time¥ª
(
$v®ue
['ü—‹_time'],
	`now
());

113 
$»t
.=<<<
EOD


114 <
div
 
şass
="span6">

115 <
div
 
¡yË
="float:left;">

116 <
a
 
h»f
="javasüt:void(0);">{
$time
}å‰</a>

117 </
div
>

118 <
div
 
¡yË
="float:right;">

119 <
a
 
d©a
-
toggË
="mod®" 
h»f
="#{$Œª¥Úd_u¾}">è½¬å‘({
$v®ue
['transpond_count']})</a> |

120 <
a
 
h»f
="javasüt:void(0);" 
d©a
-
toggË
="cŞÏp£" d©a-
rg‘
="#comm’t{$v®ue['ãed_id']}">è¯„è®º({
$v®ue
['comment_count']})</a>

121 </
div
>

122 </
div
>

124 <
div
 
şass
="span6">

125 <
div
 
id
="comm’t{$v®ue['ãed_id']}" 
şass
="collapse">æš‚æ—¶ä¸èƒ½è¯„è®ºå“¦~ï¼</div>

126 </
div
>

128 <
div
 
şass
="mod® fade" 
id
="{$transpond_url}">

129 <
div
 
şass
="modal-header">

130 <
a
 
şass
="şo£" 
d©a
-
dismiss
="modal">Ã—</a>

131 <
h3
>è½¬å‘å¾®åš</h3>

132 </
div
>

133 <
div
 
şass
="modal-body">

134 <
fÜm
 
aùiÚ
="<?ph°echØba£_u¾('c_·ge_weibo/Œª¥Úd_weibo_subm™');?>" 
m‘hod
="post">

135 <
‹x»a
 
¡yË
="width: 98%" 
şass
="input-xlarge"

136 
Çme
="Œª¥Úd_weibo_cÚ‹Á" 
rows
="3" 
¶aûhŞd”
="è½¬å‘å¾®åš"></
‹x»a
>

137 <
šput
 
ty³
="hidd’" 
Çme
="transpond_weibo_id"

138 
v®ue
="{$value['feed_id']}" />

139 <
div
 
¡yË
="text-align:„ight;">

140 <
bu‰Ú
 
ty³
="subm™" 
şass
="btn">è½¬å‘</button>

141 </
div
>

142 </
fÜm
>

143 </
div
>

144 </
div
>

145 </
div
>

146 </
div
>

147 <
div
 
şass
="¥ª7"><
hr
 
size
="1" 
¡yË
="border:1px solid #bbb;"></div>

148 <
div
 
id
="ãed_id{$v®ue['ãed_id']}" 
¡yË
="visib™y:hidd’; di¥Ïy:nÚe;">{
$v®ue
['feed_id']}</div>

149 
EOD
;

151 
echo
 
$»t
;

154 
echo
 "no";

157 
	}
}

159 
funùiÚ
 
	$is_u£r_logš
(
$tok’
){

160 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

161 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

162 
$¡©us
 = 
$½c
->
	`qu”y
(

164 
$tok’


166 
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
();

167 if(
$u£r_d©a
){

168 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

169 
$this
->
u£r_d©a
=
$u£r_d©a
;

170  
TRUE
;

172  
FALSE
;

173 
	}
}

	@application/controllers/c_login.php

1 <?
php


2 şas 
	cc_logš
 
ex‹nds
 
	mCI_CÚŒŞËr
{

4 
´iv©e
 
	m$½c_u¾
;

5 
´iv©e
 
	m$ba£_u¾
;

6 
´iv©e
 
	m$u£r_d©a
;

8 
funùiÚ
 
	$__cÚ¡ruù
(){

9 
·»Á
::
	`__cÚ¡ruù
();

10 
$this
->
lßd
->
	`lib¿ry
('session');

11 
$this
->
½c_u¾
=
	`ba£_u¾
('xmlrpc');

12 
$this
->
ba£_u¾
=
	`ba£_u¾
();

13 
$this
->
lßd
->
	`h–³r
('date');

14 
$this
->
u£r_d©a
=
	`un£rŸlize
($this->
£ssiÚ
->
	`u£rd©a
('user_data'));

17 
funùiÚ
 
	`šdex
(
$”rÜ
=""){

18 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

19 
	`»dœeù
('c_page_weibo');

21 
$this
->
lßd
->
	`mod–
('m_user');

22 
$u£r_ids
=
$this
->
m_u£r
->
	`g‘_®l_u£r_id
(1,6);

23 
$d©a
['Ï‹¡_u£r_d©a']=
$this
->
m_u£r
->
	`g‘_u£r_d©as_by_u£r_ids
(
$u£r_ids
);

24 if(
$”rÜ
)

25 
$d©a
['”rÜ']=
$”rÜ
;

26 
$this
->
lßd
->
	`v›w
('v_header');

27 
$this
->
lßd
->
	`v›w
('v_logš',
$d©a
);

28 
$this
->
lßd
->
	`v›w
('v_footer');

30 
	}
}

32 
funùiÚ
 
	$logš_subm™
(){

33 
$logš_ema
=
$this
->
šput
->
	`po¡
('login_email');

34 
$logš_·sswÜd
=
$this
->
šput
->
	`po¡
('login_password');

35 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

36 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

37 
$¡©us
 = 
$½c
->
	`qu”y
(

39 
$logš_ema
,

40 
$logš_·sswÜd


42 
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
();

43 if(!
	`¬¿y_key_exi¡s
('”rÜ',
$u£r_d©a
)){

44 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

45 
	`»dœeù
('c_page_weibo');

48 
$this
->
	`šdex
("è´¦å·æˆ–å¯†ç é”™è¯¯");

50 
	}
}

52 
funùiÚ
 
	$logš_çd
(
$”rÜ
){

53 
$d©a
['error_title']="ç™»é™†å¤±è´¥";

54 
$d©a
['error_message']="ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯";

55 
$this
->
lßd
->
	`v›w
('mobile/v_header');

56 
$this
->
lßd
->
	`v›w
('mobe/v_”rÜ_dŸlog',
$d©a
);

57 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

58 
	}
}

60 
funùiÚ
 
	$logš_out
(){

61 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

62 
$this
->
£ssiÚ
->
	`£ss_de¡roy
();

63 
	`»dœeù
('c_login');

65 
$this
->
	`šdex
();

67 
	}
}

69 
funùiÚ
 
	$is_u£r_logš
(
$tok’
){

70 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

71 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

72 
$¡©us
 = 
$½c
->
	`qu”y
(

74 
$tok’


76 
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
();

77 if(
$u£r_d©a
){

78 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

79 
$this
->
u£r_d©a
=
$u£r_d©a
;

80  
TRUE
;

82  
FALSE
;

83 
	}
}

	@application/controllers/c_page_group.php

1 <?
php


2 şas 
	cc_·ge_group
 
ex‹nds
 
	mCI_CÚŒŞËr
{

3 
´iv©e
 
	m$½c_u¾
;

4 
´iv©e
 
	m$ba£_u¾
;

5 
´iv©e
 
	m$u£r_d©a
;

7 
funùiÚ
 
	$__cÚ¡ruù
(){

8 
·»Á
::
	`__cÚ¡ruù
();

9 
$this
->
lßd
->
	`lib¿ry
('session');

10 
$this
->
½c_u¾
=
	`ba£_u¾
('xmlrpc');

11 
$this
->
ba£_u¾
=
	`ba£_u¾
();

12 
$this
->
lßd
->
	`h–³r
('date');

13 
$this
->
u£r_d©a
=
	`un£rŸlize
($this->
£ssiÚ
->
	`u£rd©a
('user_data'));

16 
funùiÚ
 
	$šdex
(){

17 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

18 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

19 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

21 
$¡©us
 = 
$½c
->
	`qu”y
(

23 
$this
->
u£r_d©a
['token'],

28 
$£¬ch_u£r_d©as
=
$½c
->
	`g‘Re¥Ú£
();

29 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$£¬ch_u£r_d©as
[0])){

30 
$this
->
u£r_d©a
['£¬ch_u£r_d©as']=
$£¬ch_u£r_d©as
;

33 
$¡©us
 = 
$½c
->
	`qu”y
(

35 
$this
->
u£r_d©a
['token'],

40 
$group_d©as
=
$½c
->
	`g‘Re¥Ú£
();

41 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$group_d©as
[0])){

42 
$this
->
u£r_d©a
['group_d©as']=
$group_d©as
;

44 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

45 
$this
->
lßd
->
	`v›w
('v_header');

46 
$this
->
lßd
->
	`v›w
('v_·ge_group',
$d©a
);

47 
$this
->
lßd
->
	`v›w
('v_footer');

49 
	`»dœeù
('c_login');

51 
	}
}

53 
funùiÚ
 
	$is_u£r_logš
(
$tok’
){

54 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

55 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

56 
$¡©us
 = 
$½c
->
	`qu”y
(

58 
$tok’


60 
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
();

61 if(
$u£r_d©a
){

62 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

63 
$this
->
u£r_d©a
=
$u£r_d©a
;

64  
TRUE
;

66  
FALSE
;

67 
	}
}

	@application/controllers/c_page_weibo.php

1 <?
php


2 şas 
	cc_·ge_weibo
 
ex‹nds
 
	mCI_CÚŒŞËr
{

4 
´iv©e
 
	m$½c_u¾
;

5 
´iv©e
 
	m$ba£_u¾
;

6 
´iv©e
 
	m$u£r_d©a
;

8 
funùiÚ
 
	$__cÚ¡ruù
(){

9 
·»Á
::
	`__cÚ¡ruù
();

10 
$this
->
lßd
->
	`lib¿ry
('session');

11 
$this
->
½c_u¾
=
	`ba£_u¾
('xmlrpc');

12 
$this
->
ba£_u¾
=
	`ba£_u¾
();

13 
$this
->
lßd
->
	`h–³r
('date');

14 
$this
->
u£r_d©a
=
	`un£rŸlize
($this->
£ssiÚ
->
	`u£rd©a
('user_data'));

17 
funùiÚ
 
	$šdex
(){

18 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

19 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

20 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

23 
$¡©us
 = 
$½c
->
	`qu”y
(

25 
$this
->
u£r_d©a
['token'],

28 
$ãeds
=
$½c
->
	`g‘Re¥Ú£
();

29 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$ãeds
[0])){

30 
$this
->
u£r_d©a
['ãeds']=
$ãeds
;

34 
$¡©us
 = 
$½c
->
	`qu”y
(

36 
$this
->
u£r_d©a
['token'],

41 
$£¬ch_u£r_d©as
=
$½c
->
	`g‘Re¥Ú£
();

42 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$£¬ch_u£r_d©as
[0])){

43 
$this
->
u£r_d©a
['£¬ch_u£r_d©as']=
$£¬ch_u£r_d©as
;

46 
$¡©us
 = 
$½c
->
	`qu”y
(

48 
$this
->
u£r_d©a
['token'],

53 
$group_d©as
=
$½c
->
	`g‘Re¥Ú£
();

54 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$group_d©as
[0])){

55 
$this
->
u£r_d©a
['group_d©as']=
$group_d©as
;

58 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

59 
$this
->
lßd
->
	`v›w
('v_header');

60 
$this
->
lßd
->
	`v›w
('v_·ge_weibo',
$d©a
);

61 
$this
->
lßd
->
	`v›w
('v_footer');

63 
	`»dœeù
('c_login');

65 
	}
}

67 
funùiÚ
 
	$po¡_weibo
(){

68 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

69 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

70 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

71 
$¡©us
 = 
$½c
->
	`qu”y
(

73 
$this
->
u£r_d©a
['token'],

74 
$this
->
šput
->
	`po¡
('weibo_content'),

77 
$»suÉ
=
$½c
->
	`g‘Re¥Ú£
();

78 if(!
	`¬¿y_key_exi¡s
('”rÜ',
$»suÉ
)){

79 
	`»dœeù
('c_page_weibo');

82 
	`»dœeù
('c_login');

84 
	}
}

86 
funùiÚ
 
	$Œª¥Úd_weibo_subm™
(){

87 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

88 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

89 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

90 
$¡©us
 = 
$½c
->
	`qu”y
(

92 
$this
->
u£r_d©a
['token'],

93 
$this
->
šput
->
	`po¡
('transpond_weibo_id'),

94 
$this
->
šput
->
	`po¡
('transpond_weibo_content'),

97 if(
	`is_¬¿y
(
$½c
->
	`g‘Re¥Ú£
())){

98 
	`»dœeù
('c_page_weibo');

101 
	`»dœeù
('c_login');

103 
	}
}

105 
funùiÚ
 
	$još_group_subm™
(){

106 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

107 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

108 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

109 
$¡©us
 = 
$½c
->
	`qu”y
(

111 
$this
->
u£r_d©a
['token'],

112 
$this
->
šput
->
	`po¡
('join_group_id')

114 
$»suÉ
=
$½c
->
	`g‘Re¥Ú£
();

115 if(!
	`¬¿y_key_exi¡s
('”rÜ',
$»suÉ
)){

116 
	`»dœeù
('c_page_weibo');

119 
	`»dœeù
('c_login');

121 
	}
}

123 
funùiÚ
 
	$u¶ßd_av©¬
() {

124 
$cÚfig
['u¶ßd_·th'] = 
	`g‘cwd
()."/u¶ßd/".
$this
->
u£r_d©a
['user_id']."/";

125 
$cÚfig
['allowed_types'] = 'gif|jpg|png';

126 
$cÚfig
['max_size'] = '1000';

127 
$cÚfig
['max_width'] = '1024';

128 
$cÚfig
['max_height'] = '768';

129 
$cÚfig
['fe_Çme'] = 
$this
->
u£r_d©a
['u£r_id'].'_'.
	`time
();

130 
$this
->
lßd
->
	`lib¿ry
('u¶ßd', 
$cÚfig
);

132 ià(! 
$this
->
u¶ßd
->
	`do_u¶ßd
 ()) {

133 
echo
 '<script>alert("ä¸Šä¼ å¤±è´¥");</script>';

134 
	`»dœeù
("c_page_weibo");

136 
$this
->
lßd
->
	`mod–
('m_album');

137 
$u¶ßd_d©a
=
$this
->
u¶ßd
->
	`d©a
();

138 
$piùu»_d©a
['®bum_id']=
$this
->
m_®bum
->
	`g‘_u£r_®bum_id
($this->
u£r_d©a
['user_id']);

139 
$piùu»_d©a
['u£r_id']=
$this
->
u£r_d©a
['user_id'];

140 
$piùu»_d©a
['picture_name']="å¤´åƒ";

141 
$piùu»_d©a
['picture_destription']="ä¸ªäººå¤´åƒ";

142 
$piùu»_d©a
['fe_size']=
$u¶ßd_d©a
['file_size']*1000;

143 
$u¶ßd_d©a
['file_ext']){

144 ".gif":
$piùu»_d©a
['file_type']=1;;

145 ".jpg":
$piùu»_d©a
['file_type']=2;;

146 ".²g":
$piùu»_d©a
['file_type']=3;;

148 
$piùu»_d©a
['ü—‹_time']=
	`time
();

149 
$piùu»_d©a
['fe_Çme']=
$u¶ßd_d©a
['file_name'];

150 
$piùu»_id
=
$this
->
m_®bum
->
	`add_piùu»
(
$piùu»_d©a
);

152 
$av©¬_d©a
=
	`¬¿y
(

153 'u£r_id'=>
$this
->
u£r_d©a
['user_id'],

155 'm‘a_v®ue'=>
	`ba£_u¾
('u¶ßd')."/".
$this
->
u£r_d©a
['u£r_id']."/".
$piùu»_d©a
['file_name']

157 
$this
->
lßd
->
	`mod–
('m_user');

158 
$this
->
m_u£r
->
	`add_u£r_m‘a
(
$av©¬_d©a
);

159 
$cÚfig
=
	`¬¿y
();

160 
$cÚfig
['image_library'] = 'gd2';

161 
$cÚfig
['sourû_image'] = 
	`g‘cwd
()."/u¶ßd/".
$this
->
u£r_d©a
['u£r_id']."/".
$piùu»_d©a
['file_name'];

162 
$cÚfig
['mašš_¿tio'] = 
FALSE
;

163 
$cÚfig
['width'] = 140;

164 
$cÚfig
['height'] = 140;

165 
$this
->
lßd
->
	`lib¿ry
('image_lib', 
$cÚfig
);

166 
$this
->
image_lib
->
	`»size
();

167 
echo
 '<script>alert("ä¸Šä¼ æˆåŠŸ");</script>';

168 
	`»dœeù
("c_page_weibo");

170 
	}
}

172 
funùiÚ
 
	$is_u£r_logš
(
$tok’
){

173 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

174 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

175 
$¡©us
 = 
$½c
->
	`qu”y
(

177 
$tok’


179 
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
();

180 if(
$u£r_d©a
){

181 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

182 
$this
->
u£r_d©a
=
$u£r_d©a
;

183  
TRUE
;

185  
FALSE
;

186 
	}
}

	@application/controllers/c_register.php

1 <?
php


2 şas 
	cc_»gi¡”
 
ex‹nds
 
	mCI_CÚŒŞËr
{

4 
´iv©e
 
	m$½c_u¾
;

5 
´iv©e
 
	m$ba£_u¾
;

6 
´iv©e
 
	m$u£r_d©a
;

8 
funùiÚ
 
	$__cÚ¡ruù
(){

9 
·»Á
::
	`__cÚ¡ruù
();

10 
$this
->
lßd
->
	`lib¿ry
('session');

11 
$this
->
½c_u¾
=
	`ba£_u¾
('xmlrpc');

12 
$this
->
ba£_u¾
=
	`ba£_u¾
();

13 
$this
->
lßd
->
	`h–³r
('date');

14 
$this
->
u£r_d©a
=
	`un£rŸlize
($this->
£ssiÚ
->
	`u£rd©a
('user_data'));

17 
funùiÚ
 
	`šdex
(
$”rÜ
=""){

18 
$d©a
=
	`¬¿y
();

19 if(
$”rÜ
)

20 
$d©a
['”rÜ']=
$”rÜ
;

21 
$this
->
lßd
->
	`v›w
('v_header');

22 
$this
->
lßd
->
	`v›w
('v_»gi¡”',
$d©a
);

23 
$this
->
lßd
->
	`v›w
('v_footer');

24 
	}
}

26 
funùiÚ
 
	$»gi¡”_subm™
(){

27 if(
$this
->
šput
->
	`po¡
('register_password')!=$this->input->post('register_password_again'))

29 
$this
->
	`»gi¡”_çd
("password_not_yes");

32 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

33 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

34 
$¡©us
 = 
$½c
->
	`qu”y
(

36 
$this
->
šput
->
	`po¡
('register_email'),

37 
$this
->
šput
->
	`po¡
('register_password'),

38 
$this
->
šput
->
	`po¡
('register_real_name'),

39 
$this
->
šput
->
	`po¡
('register_bluetooth_mac')

41 
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
();

42 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$u£r_d©a
)){

43 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

44 
	`»dœeù
('c_page_weibo');

46 
$this
->
	`»gi¡”_çd
(
$u£r_d©a
['error']);

48 
	}
}

50 
funùiÚ
 
	$»gi¡”_çd
(
$”rÜ
){

51 
$d©a
['error_title']="æ³¨å†Œå¤±è´¥";

52 
$”rÜ
){

54 
$d©a
['error_message']="ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´";

57 
$d©a
['error_message']="é‚®ç®±æ ¼å¼é”™è¯¯";

60 
$d©a
['error_message']="é‚®ç®±å·²å­˜åœ¨";

63 
$d©a
['error_message']="å¯†ç æ ¼å¼é”™è¯¯";

66 
$d©a
['error_message']="è¯·è¾“å‡ºçœŸå®å§“å";

69 
$d©a
['error_message']="è“ç‰™åœ°å€æ ¼å¼é”™è¯¯";

72 
$d©a
['error_message']="è“ç‰™åœ°å€å·²è¢«æ³¨å†Œ";

75 
$this
->
	`šdex
(
$d©a
['error_message']);

76 
	}
}

78 
funùiÚ
 
	$is_u£r_logš
(
$tok’
){

79 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

80 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

81 
$¡©us
 = 
$½c
->
	`qu”y
(

83 
$tok’


85 
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
();

86 if(
$u£r_d©a
){

87 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

88 
$this
->
u£r_d©a
=
$u£r_d©a
;

89  
TRUE
;

91  
FALSE
;

92 
	}
}

	@application/controllers/c_single_group_page.php

1 <?
php


2 şas 
	cc_sšgË_group_·ge
 
ex‹nds
 
	mCI_CÚŒŞËr
{

3 
´iv©e
 
	m$½c_u¾
;

4 
´iv©e
 
	m$ba£_u¾
;

5 
´iv©e
 
	m$u£r_d©a
;

7 
funùiÚ
 
	$__cÚ¡ruù
(){

8 
·»Á
::
	`__cÚ¡ruù
();

9 
$this
->
lßd
->
	`lib¿ry
('session');

10 
$this
->
½c_u¾
=
	`ba£_u¾
('xmlrpc');

11 
$this
->
ba£_u¾
=
	`ba£_u¾
();

12 
$this
->
lßd
->
	`h–³r
('date');

13 
$this
->
u£r_d©a
=
	`un£rŸlize
($this->
£ssiÚ
->
	`u£rd©a
('user_data'));

16 
funùiÚ
 
	$šdex
(){

17 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

18 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

19 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

21 
$¡©us
 = 
$½c
->
	`qu”y
(

23 
$this
->
u£r_d©a
['token'],

28 
$£¬ch_u£r_d©as
=
$½c
->
	`g‘Re¥Ú£
();

29 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$£¬ch_u£r_d©as
[0])){

30 
$this
->
u£r_d©a
['£¬ch_u£r_d©as']=
$£¬ch_u£r_d©as
;

33 
$¡©us
 = 
$½c
->
	`qu”y
(

35 
$this
->
u£r_d©a
['token'],

40 
$group_d©as
=
$½c
->
	`g‘Re¥Ú£
();

41 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$group_d©as
[0])){

42 
$this
->
u£r_d©a
['group_d©as']=
$group_d©as
;

44 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

45 
$this
->
lßd
->
	`v›w
('v_header');

46 
$this
->
lßd
->
	`v›w
('v_·ge_group',
$d©a
);

47 
$this
->
lßd
->
	`v›w
('v_footer');

49 
	`»dœeù
('c_login');

51 
	}
}

53 
funùiÚ
 
	$group
(
$group_id
){

54 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

55 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

56 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

58 
$¡©us
 = 
$½c
->
	`qu”y
(

60 
$this
->
u£r_d©a
['token'],

65 
$group_d©as
=
$½c
->
	`g‘Re¥Ú£
();

66 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$group_d©as
[0])){

67 
$this
->
u£r_d©a
['group_d©as']=
$group_d©as
;

69 
$¡©us
 = 
$½c
->
	`qu”y
(

71 
$this
->
u£r_d©a
['token'],

72 
$group_id


74 
$this_group_d©a
=
$½c
->
	`g‘Re¥Ú£
();

75 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$this_group_d©a
)){

76 
$this
->
u£r_d©a
['this_group_d©a']=
$this_group_d©a
;

78 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

79 
$this
->
lßd
->
	`v›w
('v_header');

80 
$this
->
lßd
->
	`v›w
('v_sšgË_group_·ge',
$d©a
);

81 
$this
->
lßd
->
	`v›w
('v_footer');

83 
	`»dœeù
('c_login');

85 
	}
}

87 
funùiÚ
 
	$is_u£r_logš
(
$tok’
){

88 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

89 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

90 
$¡©us
 = 
$½c
->
	`qu”y
(

92 
$tok’


94 
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
();

95 if(
$u£r_d©a
){

96 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

97 
$this
->
u£r_d©a
=
$u£r_d©a
;

98  
TRUE
;

100  
FALSE
;

101 
	}
}

	@application/controllers/c_test.php

1 <?
php


2 şas 
	cc_‹¡
 
ex‹nds
 
	mCI_CÚŒŞËr
 {

4 
funùiÚ
 
	$__cÚ¡ruù
() {

5 
·»Á
::
	`__cÚ¡ruù
 ();

8 
funùiÚ
 
	`šdex
(
$¬gs
="") {

9 
	`v¬_dump
(
	`func_g‘_¬gs
());

10 
	}
}

12 
funùiÚ
 
addU£r
(
$ema
="",
$·sswÜd
="",
$»®_Çme
="",
$blu‘oÙh_mac
="",
$blu‘oÙh_Çme
=""){

13 
$this
->
lßd
->
mod–
('m_wlinke');

14 
v¬_dump
Ğ
$this
->
m_wlške
->
add_u£r
(
$ema
,
$·sswÜd
,
$»®_Çme
,
$blu‘oÙh_mac
,
$blu‘oÙh_Çme
));

17 
funùiÚ
 
	$g‘U£rR—lNamebyDi¥ÏyName
(
$di¥Ïy_Çme
){

18 
$this
->
lßd
->
	`mod–
('m_user');

19 
	`v¬_dump
Ğ
$this
->
m_u£r
->
	`g‘_u£r_»®_Çme_by_di¥Ïy_Çme
(
$di¥Ïy_Çme
));

20 
	}
}

	@application/controllers/mobile/c_ajax.php

1 <?
php


2 şas 
	cc_ajax
 
ex‹nds
 
	mCI_CÚŒŞËr
{

3 
´iv©e
 
	m$½c_u¾
;

4 
´iv©e
 
	m$ba£_u¾
;

5 
´iv©e
 
	m$ajax_u¾
;

6 
´iv©e
 
	m$u£r_d©a
;

8 
funùiÚ
 
	$__cÚ¡ruù
(){

9 
·»Á
::
	`__cÚ¡ruù
();

10 
$this
->
lßd
->
	`lib¿ry
('session');

11 
$this
->
½c_u¾
=
	`ba£_u¾
('xmlrpc');

12 
$this
->
ba£_u¾
=
	`ba£_u¾
();

13 
$this
->
ajax_u¾
=
	`ba£_u¾
("mobile/c_wlinke/wlinke_ajax/");

14 
$this
->
lßd
->
	`h–³r
('date');

15 
$this
->
u£r_d©a
=
	`un£rŸlize
($this->
£ssiÚ
->
	`u£rd©a
('user_data'));

19 
funùiÚ
 
	$šdex
(){

20 
$aùiÚ
=
$this
->
šput
->
	`po¡
('action');

21 
$aùiÚ
){

23 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

24 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

25 
$¡©us
 = 
$½c
->
	`qu”y
(

27 
$this
->
šput
->
	`po¡
('token'),

28 
$this
->
šput
->
	`po¡
('filter'),

29 
$this
->
šput
->
	`po¡
('last_feed_id')

31 if(
	`is_¬¿y
(
$ãeds
=
$½c
->
	`g‘Re¥Ú£
())){

32 
$»suÉ
="";

33 
	`fÜ—ch
(
$ãeds
 
as
 
$ãed
){

34 
$ü—‹_time
=
	`time¥ª
(
$ãed
['ü—‹_time'],
	`now
()).'å‰';

35 
$zhuªç
="è½¬å‘ï¼š ".
$ãed
['transpond_count']."è¯„è®º ï¼š".$feed['comment_count'];

36 
$»suÉ
.=<<<
EOD


37 <
li
 
d©a
-
rŞe
="li¡-divid”" d©a-
theme
="c" 
id
="public_feed_{$feed['feed_id']}">

38 <
div
 
şass
="ui-grid-a">

39 <
div
 
şass
="ui-block-a" 
¡yË
="width:20%;">

40 <
img
 
height
="36" 
¤c
="{$feed['user_avatar']}">

41 </
div
>

42 <
div
 
şass
="ui-block-b" 
¡yË
="width:80%;">

43 {
$ãed
['display_name']}

44 <
div
 
¡yË
="‹xt-®ign:right;"><
p
>{
$ü—‹_time
}</p></div>

45 </
div
>

46 <
div
 
şass
="ui-block-a" 
¡yË
="width:20%;">

47 </
div
>

48 <
div
 
şass
="ui-block-b" 
¡yË
="width:80%;">

49 {
$ãed
['feed_content']}

50 </
div
>

51 <
div
 
şass
="ui-block-a" 
¡yË
="width:20%;">

52 </
div
>

53 <
div
 
şass
="ui-block-b" 
¡yË
="width:80%;text-align:right;">

54 <
br
/>

55 <
div
><
p
>{
$zhuªç
}</p></div>

56 </
div
>

57 </
div
>

58 </
li
>

59 
EOD
;

61 
echo
 
$»suÉ
;

63 
echo
 
$ãeds
;

67 
	}
}

	@application/controllers/mobile/c_login.php

1 <?
php


2 şas 
	cc_logš
 
ex‹nds
 
	mCI_CÚŒŞËr
{

4 
´iv©e
 
	m$½c_u¾
;

5 
´iv©e
 
	m$ba£_u¾
;

6 
´iv©e
 
	m$ajax_u¾
;

7 
´iv©e
 
	m$u£r_d©a
;

9 
funùiÚ
 
	$__cÚ¡ruù
(){

10 
·»Á
::
	`__cÚ¡ruù
();

11 
$this
->
lßd
->
	`lib¿ry
('session');

12 
$this
->
½c_u¾
=
	`ba£_u¾
('xmlrpc');

13 
$this
->
ba£_u¾
=
	`ba£_u¾
();

14 
$this
->
ajax_u¾
=
	`ba£_u¾
("mobile/c_wlinke/wlinke_ajax/");

15 
$this
->
lßd
->
	`h–³r
('date');

16 
$this
->
u£r_d©a
=
	`un£rŸlize
($this->
£ssiÚ
->
	`u£rd©a
('user_data'));

19 
funùiÚ
 
	$šdex
(){

20 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

21 
	`»dœeù
('mobile/c_page');

23 
$this
->
lßd
->
	`mod–
('m_user');

24 
$d©a
['u£r_ids']=
$this
->
m_u£r
->
	`g‘_®l_u£r_id
(1,5);

25 
$d©a
['Ï‹¡_u£r_d©a']=
$this
->
m_u£r
->
	`g‘_u£r_d©as_by_u£r_ids
($data['user_ids']);

26 
$this
->
lßd
->
	`v›w
('mobile/v_header');

27 
$this
->
lßd
->
	`v›w
('mobe/v_logš',
$d©a
);

28 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

30 
	}
}

32 
funùiÚ
 
	$logš_subm™
(){

33 
$logš_ema
=
$this
->
šput
->
	`po¡
('login_email');

34 
$logš_·sswÜd
=
$this
->
šput
->
	`po¡
('login_password');

35 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

36 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

37 
$¡©us
 = 
$½c
->
	`qu”y
(

39 
$logš_ema
,

40 
$logš_·sswÜd


42 
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
();

43 if(!
	`¬¿y_key_exi¡s
('”rÜ',
$u£r_d©a
)){

44 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

45 
	`»dœeù
('mobile/c_page');

47 
$this
->
	`logš_çd
(
$u£r_d©a
['error']);

49 
	}
}

51 
funùiÚ
 
	$logš_çd
(
$”rÜ
){

52 
$d©a
['error_title']="ç™»é™†å¤±è´¥";

53 
$d©a
['error_message']="ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯";

54 
$this
->
lßd
->
	`v›w
('mobile/v_header');

55 
$this
->
lßd
->
	`v›w
('mobe/v_”rÜ_dŸlog',
$d©a
);

56 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

57 
	}
}

59 
funùiÚ
 
	$logš_out
(){

60 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

61 
$this
->
£ssiÚ
->
	`£ss_de¡roy
();

62 
	`»dœeù
('mobile/c_login');

64 
$this
->
	`šdex
();

66 
	}
}

68 
funùiÚ
 
	$is_u£r_logš
(
$tok’
){

69 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

70 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

71 
$¡©us
 = 
$½c
->
	`qu”y
(

73 
$tok’


75 if(
$½c
->
	`g‘Re¥Ú£
())

76  
TRUE
;

78  
FALSE
;

79 
	}
}

	@application/controllers/mobile/c_page.php

1 <?
php


2 şas 
	cc_·ge
 
ex‹nds
 
	mCI_CÚŒŞËr
{

4 
´iv©e
 
	m$½c_u¾
;

5 
´iv©e
 
	m$ba£_u¾
;

6 
´iv©e
 
	m$ajax_u¾
;

7 
´iv©e
 
	m$u£r_d©a
;

9 
funùiÚ
 
	$__cÚ¡ruù
(){

10 
·»Á
::
	`__cÚ¡ruù
();

11 
$this
->
lßd
->
	`lib¿ry
('session');

12 
$this
->
½c_u¾
=
	`ba£_u¾
('xmlrpc');

13 
$this
->
ba£_u¾
=
	`ba£_u¾
();

14 
$this
->
ajax_u¾
=
	`ba£_u¾
("mobile/c_wlinke/wlinke_ajax/");

15 
$this
->
lßd
->
	`h–³r
('date');

16 
$this
->
u£r_d©a
=
	`un£rŸlize
($this->
£ssiÚ
->
	`u£rd©a
('user_data'));

19 
funùiÚ
 
	$šdex
(){

20 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

21 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

22 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

23 
$¡©us
 = 
$½c
->
	`qu”y
(

25 
$this
->
u£r_d©a
['token'],

28 
$ãeds
=
$½c
->
	`g‘Re¥Ú£
();

29 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$ãeds
[0])){

30 
$this
->
u£r_d©a
['ãeds']=
$ãeds
;

32 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

33 
$this
->
lßd
->
	`v›w
('mobile/v_header');

34 
$this
->
lßd
->
	`v›w
('mobe/v_·ge_weibo',
$d©a
);

35 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

37 
	`»dœeù
('mobile/c_login');

39 
	}
}

41 
funùiÚ
 
	$gÙo_µt
(){

42 
$this
->
lßd
->
	`v›w
('mobile/v_page_ppt');

43 
	}
}

45 
funùiÚ
 
	$·ge_´iv©e
(){

46 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

47 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

48 
$this
->
lßd
->
	`v›w
('mobile/v_header');

49 
$this
->
lßd
->
	`v›w
('mobe/v_·ge_´iv©e',
$d©a
);

50 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

52 
	`»dœeù
('mobile/c_login');

54 
	}
}

56 
funùiÚ
 
	$·ge_ä›nd
(){

57 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

58 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

59 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

60 
$¡©us
 = 
$½c
->
	`qu”y
(

62 
$this
->
u£r_d©a
['token'],

65 
$u£r_d©as
=
$½c
->
	`g‘Re¥Ú£
();

66 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$u£r_d©as
[0])){

67 
$this
->
u£r_d©a
['®l_u£r_d©as']=
$u£r_d©as
;

69 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

70 
$this
->
lßd
->
	`v›w
('mobile/v_header');

71 
$this
->
lßd
->
	`v›w
('mobe/v_·ge_ä›nd',
$d©a
);

72 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

74 
	`»dœeù
('mobile/c_login');

76 
	}
}

78 
funùiÚ
 
	$·ge_group
(){

79 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

80 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

81 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

82 
$¡©us
 = 
$½c
->
	`qu”y
(

84 
$this
->
u£r_d©a
['token'],

87 
$group_d©a
=
$½c
->
	`g‘Re¥Ú£
();

88 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$group_d©a
[0])){

89 
$this
->
u£r_d©a
['group_d©a']=
$group_d©a
;

91 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

92 
$this
->
lßd
->
	`v›w
('mobile/v_header');

93 
$this
->
lßd
->
	`v›w
('mobe/v_·ge_group',
$d©a
);

94 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

96 
	`»dœeù
('mobile/c_login');

98 
	}
}

100 
funùiÚ
 
	$·ge_¶aû
(){

101 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

102 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

103 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

104 
$¡©us
 = 
$½c
->
	`qu”y
(

106 
$this
->
u£r_d©a
['token'],

109 
$¶aû_d©a
=
$½c
->
	`g‘Re¥Ú£
();

110 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$¶aû_d©a
[0])){

111 
$this
->
u£r_d©a
['¶aû_d©a']=
$¶aû_d©a
;

113 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

114 
$this
->
lßd
->
	`v›w
('mobile/v_header');

115 
$this
->
lßd
->
	`v›w
('mobe/v_·ge_¶aû',
$d©a
);

116 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

118 
	`»dœeù
('mobile/c_login');

120 
	}
}

122 
funùiÚ
 
	$·ge_Ã¬
(){

123 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

124 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

125 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

126 
$¡©us
 = 
$½c
->
	`qu”y
(

128 
$this
->
u£r_d©a
['token'],

131 
$u£r_d©as
=
$½c
->
	`g‘Re¥Ú£
();

132 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$u£r_d©as
[0])){

133 
$this
->
u£r_d©a
['Ã¬_u£r_d©a']=
$u£r_d©as
;

136 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

137 
$this
->
lßd
->
	`v›w
('mobile/v_header');

138 
$this
->
lßd
->
	`v›w
('mobe/v_·ge_Ã¬',
$d©a
);

139 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

141 
	`»dœeù
('mobile/c_login');

143 
	}
}

145 
funùiÚ
 
	$add_group
(){

146 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

147 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

148 
$this
->
lßd
->
	`v›w
('mobile/v_header');

149 
$this
->
lßd
->
	`v›w
('mobe/v_add_group',
$d©a
);

150 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

152 
	`»dœeù
('mobile/c_login');

154 
	}
}

156 
funùiÚ
 
	$add_gou½_subm™
(){

157 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

158 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

159 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

160 
$¡©us
 = 
$½c
->
	`qu”y
(

162 
$this
->
u£r_d©a
['token'],

163 
$this
->
šput
->
	`po¡
('group_name'),

164 
$this
->
šput
->
	`po¡
('group_destription'),

165 
$this
->
šput
->
	`po¡
('group_category')

167 if(
	`is_¬¿y
(
$½c
->
	`g‘Re¥Ú£
())){

168 
	`»dœeù
('mobile/c_page/page_group');

171 
	`»dœeù
('mobile/c_login');

173 
	}
}

175 
funùiÚ
 
	$add_¶aû
(){

176 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

177 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

178 
$this
->
lßd
->
	`v›w
('mobile/v_header');

179 
$this
->
lßd
->
	`v›w
('mobe/v_add_¶aû',
$d©a
);

180 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

182 
	`»dœeù
('mobile/c_login');

184 
	}
}

186 
funùiÚ
 
	$add_¶aû_subm™
(){

187 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

188 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

189 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

190 
$¡©us
 = 
$½c
->
	`qu”y
(

192 
$this
->
u£r_d©a
['token'],

193 
$this
->
šput
->
	`po¡
('place_name'),

194 
$this
->
šput
->
	`po¡
('place_destription'),

195 
$this
->
šput
->
	`po¡
('place_category'),

198 if(
	`is_¬¿y
(
$½c
->
	`g‘Re¥Ú£
())){

199 
	`»dœeù
('mobile/c_page/page_place');

202 
	`»dœeù
('mobile/c_login');

204 
	}
}

206 
funùiÚ
 
	$sšgË_weibo
(
$ãed
){

207 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

208 
$d©a
['ãed']=
	`un£rŸlize
(
	`ba£64_decode
(
	`¡r_»¶aû
(
	`¬¿y
('-','_'),¬¿y('+','/'),
$ãed
)));

209 
$this
->
lßd
->
	`v›w
('mobile/v_header');

210 
$this
->
lßd
->
	`v›w
('mobe/v_sšgË_weibo',
$d©a
);

211 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

213 
	`»dœeù
('mobile/c_login');

215 
	}
}

217 
funùiÚ
 
	$sšgË_u£r
(
$ãed
){

218 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

219 
$d©a
['ãed']=
	`un£rŸlize
(
	`ba£64_decode
(
	`¡r_»¶aû
(
	`¬¿y
('-','_'),¬¿y('+','/'),
$ãed
)));

220 
$this
->
lßd
->
	`v›w
('mobile/v_header');

221 
$this
->
lßd
->
	`v›w
('mobe/v_sšgË_u£r',
$d©a
);

222 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

224 
	`»dœeù
('mobile/c_login');

226 
	}
}

228 
funùiÚ
 
	$sšgË_group
(
$group
){

229 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

230 
$d©a
['group']=
	`un£rŸlize
(
	`ba£64_decode
(
	`¡r_»¶aû
(
	`¬¿y
('-','_'),¬¿y('+','/'),
$group
)));

231 
$this
->
lßd
->
	`v›w
('mobile/v_header');

232 
$this
->
lßd
->
	`v›w
('mobe/v_sšgË_group',
$d©a
);

233 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

235 
	`»dœeù
('mobile/c_login');

237 
	}
}

239 
funùiÚ
 
	$sšgË_¶aû
(
$¶aû
){

241 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

242 
$d©a
['¶aû']=
	`un£rŸlize
(
	`ba£64_decode
(
	`¡r_»¶aû
(
	`¬¿y
('-','_'),¬¿y('+','/'),
$¶aû
)));

243 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

244 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

245 
$¡©us
 = 
$½c
->
	`qu”y
(

247 
$this
->
u£r_d©a
['token'],

248 
$d©a
['place']['place_id']

250 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

251 
$¡©us
 = 
$½c
->
	`qu”y
(

253 
$this
->
u£r_d©a
['token'],

254 
$d©a
['place']['place_id']

256 
$d©a
['¶aû']['¶aû_»ûÁ_memb”']=
$½c
->
	`g‘Re¥Ú£
();

257 
$this
->
lßd
->
	`v›w
('mobile/v_header');

258 
$this
->
lßd
->
	`v›w
('mobe/v_sšgË_¶aû',
$d©a
);

259 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

261 
	`»dœeù
('mobile/c_login');

264 
	}
}

266 
funùiÚ
 
	$comm’t_weibo
(
$weibo_id
){

267 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

268 
$d©a
['input_title']="å‘è¡¨è¯„è®º";

269 
$d©a
['šput_aùiÚ_u¾']=
	`ba£_u¾
("mobe/c_·ge/comm’t_weibo_subm™/".
$weibo_id
);

270 
$d©a
['input_prompt']="è¯·è¾“å…¥è¯„è®ºå†…å®¹";

271 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

272 
$this
->
lßd
->
	`v›w
('mobile/v_header');

273 
$this
->
lßd
->
	`v›w
('mobe/v_šput_dŸlog',
$d©a
);

274 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

276 
	`»dœeù
('mobile/c_login');

278 
	}
}

280 
funùiÚ
 
	$comm’t_weibo_subm™
(
$weibo_id
){

281 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

282 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

283 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

284 
$¡©us
 = 
$½c
->
	`qu”y
(

286 
$this
->
u£r_d©a
['token'],

287 
$weibo_id
,

288 
$this
->
šput
->
	`po¡
('input_content')

290 if(
	`is_¬¿y
(
$½c
->
	`g‘Re¥Ú£
())){

291 
	`»dœeù
('mobile/c_page');

294 
	`»dœeù
('mobile/c_login');

296 
	}
}

298 
funùiÚ
 
	$Œª¥Úd_weibo
(
$weibo_id
){

299 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

300 
$d©a
['input_title']="è½¬å‘å¾®åš";

301 
$d©a
['šput_aùiÚ_u¾']=
	`ba£_u¾
("mobe/c_·ge/Œª¥Úd_weibo_subm™/".
$weibo_id
);

302 
$d©a
['input_prompt']="è¯·è¾“å…¥é™„åŠ å†…å®¹";

303 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

304 
$this
->
lßd
->
	`v›w
('mobile/v_header');

305 
$this
->
lßd
->
	`v›w
('mobe/v_šput_dŸlog',
$d©a
);

306 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

308 
	`»dœeù
('mobile/c_login');

310 
	}
}

312 
funùiÚ
 
	$Œª¥Úd_weibo_subm™
(
$weibo_id
){

313 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

314 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

315 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

316 
$¡©us
 = 
$½c
->
	`qu”y
(

318 
$this
->
u£r_d©a
['token'],

319 
$weibo_id
,

320 
$this
->
šput
->
	`po¡
('input_content'),

323 if(
	`is_¬¿y
(
$½c
->
	`g‘Re¥Ú£
())){

324 
	`»dœeù
('mobile/c_page');

327 
	`»dœeù
('mobile/c_login');

329 
	}
}

331 
funùiÚ
 
	$po¡_weibo
(){

332 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

333 
$d©a
['input_title']="å‘å¸ƒå¾®åš";

334 
$d©a
['šput_aùiÚ_u¾']=
	`ba£_u¾
("mobile/c_page/post_weibo_submit");

335 
$d©a
['input_prompt']="è¯·è¾“å…¥å¾®åšå†…å®¹";

336 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

337 
$this
->
lßd
->
	`v›w
('mobile/v_header');

338 
$this
->
lßd
->
	`v›w
('mobe/v_šput_dŸlog',
$d©a
);

339 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

341 
	`»dœeù
('mobile/c_login');

343 
	}
}

345 
funùiÚ
 
	$po¡_weibo_subm™
(){

346 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

347 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

348 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

349 
$¡©us
 = 
$½c
->
	`qu”y
(

351 
$this
->
u£r_d©a
['token'],

352 
$this
->
šput
->
	`po¡
('input_content'),

355 if(
	`is_¬¿y
(
$½c
->
	`g‘Re¥Ú£
())){

356 
	`»dœeù
('mobile/c_page');

359 
	`»dœeù
('mobile/c_login');

361 
	}
}

363 
funùiÚ
 
	$is_u£r_logš
(
$tok’
){

364 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

365 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

366 
$¡©us
 = 
$½c
->
	`qu”y
(

368 
$tok’


370 if(
$½c
->
	`g‘Re¥Ú£
())

371  
TRUE
;

373  
FALSE
;

374 
	}
}

	@application/controllers/mobile/c_register.php

1 <?
php


2 şas 
	cc_»gi¡”
 
ex‹nds
 
	mCI_CÚŒŞËr
{

4 
´iv©e
 
	m$½c_u¾
;

5 
´iv©e
 
	m$ba£_u¾
;

6 
´iv©e
 
	m$ajax_u¾
;

7 
´iv©e
 
	m$u£r_d©a
;

9 
funùiÚ
 
	$__cÚ¡ruù
(){

10 
·»Á
::
	`__cÚ¡ruù
();

11 
$this
->
lßd
->
	`lib¿ry
('session');

12 
$this
->
½c_u¾
=
	`ba£_u¾
('xmlrpc');

13 
$this
->
ba£_u¾
=
	`ba£_u¾
();

14 
$this
->
ajax_u¾
=
	`ba£_u¾
("mobile/c_wlinke/wlinke_ajax/");

15 
$this
->
lßd
->
	`h–³r
('date');

16 
$this
->
u£r_d©a
=
	`un£rŸlize
($this->
£ssiÚ
->
	`u£rd©a
('user_data'));

19 
funùiÚ
 
	$šdex
(){

20 
$this
->
lßd
->
	`v›w
('mobile/v_header');

21 
$this
->
lßd
->
	`v›w
('mobile/v_register');

22 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

23 
	}
}

25 
funùiÚ
 
	$»gi¡”_subm™
(){

26 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

27 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

28 
$¡©us
 = 
$½c
->
	`qu”y
(

30 
$this
->
šput
->
	`po¡
('register_email'),

31 
$this
->
šput
->
	`po¡
('register_password'),

32 
$this
->
šput
->
	`po¡
('register_real_name'),

33 
$this
->
šput
->
	`po¡
('register_bluetooth_mac')

35 
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
();

36 if(!
	`¬¿y_key_exi¡s
('”rÜ', 
$u£r_d©a
)){

37 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

38 
	`»dœeù
('mobile/c_page');

40 
$this
->
	`»gi¡”_çd
(
$u£r_d©a
['error']);

42 
	}
}

44 
funùiÚ
 
	$»gi¡”_çd
(
$”rÜ
){

45 
$d©a
['error_title']="æ³¨å†Œå¤±è´¥";

46 
$”rÜ
){

48 
$d©a
['error_message']="é‚®ç®±æ ¼å¼é”™è¯¯";

51 
$d©a
['error_message']="é‚®ç®±å·²å­˜åœ¨";

54 
$d©a
['error_message']="å¯†ç æ ¼å¼é”™è¯¯";

57 
$d©a
['error_message']="è¯·è¾“å‡ºçœŸå®å§“å";

60 
$d©a
['error_message']="è“ç‰™åœ°å€æ ¼å¼é”™è¯¯";

63 
$d©a
['error_message']="è“ç‰™åœ°å€å·²è¢«æ³¨å†Œ";

66 
$this
->
lßd
->
	`v›w
('mobile/v_header');

67 
$this
->
lßd
->
	`v›w
('mobe/v_”rÜ_dŸlog',
$d©a
);

68 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

69 
	}
}

71 
funùiÚ
 
	$is_u£r_logš
(
$tok’
){

72 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

73 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

74 
$¡©us
 = 
$½c
->
	`qu”y
(

76 
$tok’


78 if(
$½c
->
	`g‘Re¥Ú£
())

79  
TRUE
;

81  
FALSE
;

82 
	}
}

	@application/controllers/mobile/c_wlinke.php

1 <?
php


2 şas 
	cc_wlške
 
ex‹nds
 
	mCI_CÚŒŞËr
{

3 
´iv©e
 
	m$½c_u¾
;

4 
´iv©e
 
	m$ba£_u¾
;

5 
´iv©e
 
	m$ajax_u¾
;

6 
´iv©e
 
	m$u£r_d©a
;

8 
funùiÚ
 
	$__cÚ¡ruù
(){

9 
·»Á
::
	`__cÚ¡ruù
();

10 
$this
->
lßd
->
	`lib¿ry
('session');

11 
$this
->
½c_u¾
=
	`ba£_u¾
('xmlrpc');

12 
$this
->
ba£_u¾
=
	`ba£_u¾
();

13 
$this
->
ajax_u¾
=
	`ba£_u¾
("mobile/c_wlinke/wlinke_ajax/");

14 
$this
->
lßd
->
	`h–³r
('date');

15 
$this
->
u£r_d©a
=
	`un£rŸlize
($this->
£ssiÚ
->
	`u£rd©a
('user_data'));

19 
funùiÚ
 
	$šdex
(){

20 if(
$this
->
u£r_d©a
&&$this->
	`is_u£r_logš
($this->user_data['token'])){

21 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

22 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

23 
$¡©us
 = 
$½c
->
	`qu”y
(

25 
$this
->
u£r_d©a
['token'],

28 if(
	`is_¬¿y
(
$ãeds
=
$½c
->
	`g‘Re¥Ú£
())){

29 
$this
->
u£r_d©a
['ãeds']=
$ãeds
;

31 
$¡©us
 = 
$½c
->
	`qu”y
(

33 
$this
->
u£r_d©a
['token'],

36 if(
	`is_¬¿y
(
$u£r_d©as
=
$½c
->
	`g‘Re¥Ú£
())){

37 
$this
->
u£r_d©a
['®l_u£r_d©as']=
$u£r_d©as
;

39 
$¡©us
 = 
$½c
->
	`qu”y
(

41 
$this
->
u£r_d©a
['token'],

44 if(
	`is_¬¿y
(
$group_d©a
=
$½c
->
	`g‘Re¥Ú£
())){

45 
$this
->
u£r_d©a
['group_d©a']=
$group_d©a
;

47 
$this
->
	`·ge
();

49 
$this
->
	`logš
();

51 
	}
}

53 
funùiÚ
 
	$logš
(){

54 
$this
->
lßd
->
	`v›w
('mobile/v_header');

55 
$this
->
lßd
->
	`v›w
('mobile/v_login');

56 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

57 
	}
}

60 
funùiÚ
 
	$·ge
(){

61 
$d©a
['u£r_d©a']=
$this
->
u£r_d©a
;

62 
$this
->
lßd
->
	`v›w
('mobile/v_header');

63 
$this
->
lßd
->
	`v›w
('mobe/v_·ge',
$d©a
);

64 
$this
->
lßd
->
	`v›w
('mobile/v_footer');

65 
	}
}

67 
funùiÚ
 
	$is_u£r_logš
(
$tok’
){

68 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

69 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

70 
$¡©us
 = 
$½c
->
	`qu”y
(

72 
$tok’


74 if(
$½c
->
	`g‘Re¥Ú£
())

75  
TRUE
;

77  
FALSE
;

78 
	}
}

80 
funùiÚ
 
	$wlške_ajax
(){

81 
$aùiÚ
=
$this
->
šput
->
	`po¡
('action');

82 
$aùiÚ
){

84 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

85 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

86 
$¡©us
 = 
$½c
->
	`qu”y
(

88 
$this
->
šput
->
	`po¡
('email'),

89 
$this
->
šput
->
	`po¡
('password')

91 if(
	`is_¬¿y
(
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
())){

92 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

93 
echo
 "success";

96 
echo
 
$u£r_d©a
;

99 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

100 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

101 
$¡©us
 = 
$½c
->
	`qu”y
(

103 
$this
->
šput
->
	`po¡
('email'),

104 
$this
->
šput
->
	`po¡
('password'),

105 
$this
->
šput
->
	`po¡
('real_name'),

106 
$this
->
šput
->
	`po¡
('bluetooth_mac')

108 if(
	`is_¬¿y
(
$u£r_d©a
=
$½c
->
	`g‘Re¥Ú£
())){

109 
$this
->
£ssiÚ
->
	`£t_u£rd©a
('u£r_d©a',
	`£rŸlize
(
$u£r_d©a
));

110 
echo
 "success";

113 
echo
 
$u£r_d©a
;

116 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

117 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

118 
$¡©us
 = 
$½c
->
	`qu”y
(

120 
$this
->
šput
->
	`po¡
('token'),

121 
$this
->
šput
->
	`po¡
('weibo_content'),

124 if(
	`¡rchr
(
$½c
->
	`g‘Re¥Ú£
(),'success')){

125 
echo
 "success";

128 
echo
 "false";

131 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

132 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

133 
$¡©us
 = 
$½c
->
	`qu”y
(

135 
$this
->
šput
->
	`po¡
('token'),

138 if(
	`is_¬¿y
(
$ãeds
=
$½c
->
	`g‘Re¥Ú£
())){

139 
echo
 
	`£rŸlize
(
$ãeds
);

142 
echo
 
$ãeds
;

145 
$this
->
lßd
->
	`h–³r
('ixr_xmlrpc');

146 
$½c
 = 
Ãw
 
	`IXR_Cl›Á
Ğ
$this
->
½c_u¾
 );

147 
$¡©us
 = 
$½c
->
	`qu”y
(

149 
$this
->
šput
->
	`po¡
('token'),

150 
$this
->
šput
->
	`po¡
('filter'),

151 
$this
->
šput
->
	`po¡
('last_feed_id')

153 if(
	`is_¬¿y
(
$ãeds
=
$½c
->
	`g‘Re¥Ú£
())){

154 
$»suÉ
="";

155 
	`fÜ—ch
(
$ãeds
 
as
 
$ãed
){

156 
$ü—‹_time
=
	`time¥ª
(
$ãed
['ü—‹_time'],
	`now
()).'å‰';

157 
$zhuªç
="è½¬å‘ï¼š ".
$ãed
['transpond_count']."è¯„è®º ï¼š".$feed['comment_count'];

158 
$»suÉ
.=<<<
EOD


159 <
li
 
d©a
-
rŞe
="li¡-divid”" d©a-
theme
="c" 
id
="public_feed_{$feed['feed_id']}">

160 <
div
 
şass
="ui-grid-a">

161 <
div
 
şass
="ui-block-a" 
¡yË
="width:20%;">

162 <
img
 
height
="36" 
¤c
="{$feed['user_avatar']}">

163 </
div
>

164 <
div
 
şass
="ui-block-b" 
¡yË
="width:80%;">

165 {
$ãed
['display_name']}

166 <
div
 
¡yË
="‹xt-®ign:right;"><
p
>{
$ü—‹_time
}</p></div>

167 </
div
>

168 <
div
 
şass
="ui-block-a" 
¡yË
="width:20%;">

169 </
div
>

170 <
div
 
şass
="ui-block-b" 
¡yË
="width:80%;">

171 {
$ãed
['feed_content']}

172 </
div
>

173 <
div
 
şass
="ui-block-a" 
¡yË
="width:20%;">

174 </
div
>

175 <
div
 
şass
="ui-block-b" 
¡yË
="width:80%;text-align:right;">

176 <
br
/>

177 <
div
><
p
>{
$zhuªç
}</p></div>

178 </
div
>

179 </
div
>

180 </
li
>

181 
EOD
;

183 
echo
 
$»suÉ
;

185 
echo
 
$ãeds
;

189 
	}
}

	@application/controllers/welcome.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

3 şas 
	cW–come
 
ex‹nds
 
	mCI_CÚŒŞËr
 {

20 
public
 
funùiÚ
 
	$šdex
()

22 
$this
->
lßd
->
	`v›w
('welcome_message');

24 
	}
}

	@application/controllers/xmlrpc.php

1 <?
php


3 şas 
	cXmÌpc
 
ex‹nds
 
	mWE_CÚŒŞËr
 {

9 
v¬
 
	m$m‘hods
;

15 
v¬
 
	m$cu¼’t
;

22 
funùiÚ
 
	$__cÚ¡ruù
() {

23 
$this
->
cu¼’t
=
	`time
();

24 
$this
->
m‘hods
 = 
	`¬¿y
 (

56 
·»Á
::
	`__cÚ¡ruù
 ( 
$this
->
m‘hods
 );

81 
funùiÚ
 
	$add_u£r
(
$¬gs
){

82 
$this
->
lßd
->
	`mod–
('m_user');

83 
$this
->
lßd
->
	`h–³r
('album');

85 
$d©a
['ema']=
$¬gs
[0];

87 if(!
	`v®id_ema
(
$d©a
['email']))

88  
	`¬¿y
("error"=>"invalid_email");

90 if(
$this
->
m_u£r
->
	`check_exi¡
('ema',
$d©a
['email']))

91  
	`¬¿y
("error"=>"existing_email");

93 
$d©a
['·sswÜd']=
$¬gs
[1];

95 if(!
	`v®id_·sswÜd
(
$d©a
['password']))

96  
	`¬¿y
("error"=>"invalid_password");

98 
$d©a
['»®_Çme']=
$¬gs
[2];

100 if(!
	`v®id_»®_Çme
(
$d©a
['real_name']))

101  
	`¬¿y
("error"=>"invalid_real_name");

103 if(
	`is£t
(
$¬gs
[3]))

104 
$blu‘oÙh_mac
=
$¬gs
[3];

105  
	`¬¿y
("error"=>"invalid_bluetooth_mac");

107 if(!
	`v®id_blu‘oÙh_mac
(
$blu‘oÙh_mac
))

108  
	`¬¿y
("error"=>"invalid_bluetooth_mac");

110 
$blu‘oÙh_mac
=
	`¡¹ouµ”
($bluetooth_mac);

112 if(
	`is£t
(
$¬gs
[4]))

113 
$blu‘oÙh_Çme
=
$¬gs
[4];

115 
$blu‘oÙh_Çme
="";

117 
$d©a
['blu‘oÙh_id']=
$this
->
m_u£r
->
	`g‘_u£r_id_by_blu‘oÙh_mac
(
$blu‘oÙh_mac
);

119 if(
$d©a
['bluetooth_id']){

120  
	`¬¿y
("error"=>"existing_bluetooth_mac");

122 
$d©a
['blu‘oÙh_id']=
$this
->
m_u£r
->
	`add_blu‘oÙh
(
	`¬¿y
(

123 'blu‘oÙh_mac'=>
$blu‘oÙh_mac
,

124 'blu‘oÙh_Çme'=>
$blu‘oÙh_Çme
,

125 'ü—‹_time'=>
$this
->
cu¼’t


129 
$d©a
['·sswÜd'] = 
	`md5
($data['password']);

131 
$d©a
['display_name']=$data['real_name'];

133 
$num
=
$this
->
m_u£r
->
	`check_exi¡
('»®_Çme',
$d©a
['real_name']);

134 
$d©a
['»®_Çme']=$d©a['»®_Çme'].'('.(
$num
+1).')';

135 
$d©a
['ü—‹_time']=
	`time
();

136 
$d©a
['user_type']='user';

138 
$»suÉ
=
$this
->
m_u£r
->
	`add_u£r
(
$d©a
);

140 if(
$»suÉ
){

142 
$this
->
m_u£r
->
	`add_blu‘oÙh
(

143 
	`¬¿y
(

144 'u£r_id'=>
$»suÉ
,

145 'blu‘oÙh_mac'=>
$blu‘oÙh_mac
,

146 'blu‘oÙh_Çme'=>
$blu‘oÙh_Çme
,

147 'ü—‹_time'=>
$this
->
cu¼’t


151 
$this
->
	`ü—‹_®bum
(
$»suÉ
,'default','default‡lbum');

152 
	`ü—‹_u£r_dœ
(
$»suÉ
);

155 
$this
->
m_u£r
->
	`add_u£r_m‘a
(
	`¬¿y
(

156 'u£r_id'=>
$»suÉ
,

158 'm‘a_v®ue'=>
	`ba£_u¾
().'upload/default.jpg'

162 
$this
->
m_u£r
->
	`add_u£r_m‘a
(
	`¬¿y
(

163 'u£r_id'=>
$»suÉ
,

169 
$this
->
m_u£r
->
	`add_u£r_m‘a
(
	`¬¿y
(

170 'u£r_id'=>
$»suÉ
,

176 
$this
->
m_u£r
->
	`add_u£r_m‘a
(
	`¬¿y
(

177 'u£r_id'=>
$»suÉ
,

184 
$this
->
	`£nd_nÙify
(0, 
$»suÉ
, 'welcome','0','æ¬¢è¿åŠ å…¥èœ—ä¸´å®¢å¤§å®¶åº­ï¼');

187 
$u£r_d©a
=
$this
->
	`u£r_logš
(
$¬gs
);

189  
$u£r_d©a
;

191  
	`¬¿y
("error"=>"unknown_error");

192 
	}
}

201 
funùiÚ
 
	$u£r_logš
(
$¬gs
){

203 
$this
->
lßd
->
	`mod–
('m_user');

204 
$this
->
lßd
->
	`mod–
('m_online');

208 
$this
->
lßd
->
	`driv”
('ÿche',
	`¬¿y
('adapter'=>'file'));

210 
$d©a
['ema']=
$¬gs
[0];

211 
$d©a
['·sswÜd']=
$¬gs
[1];

213 
$u£r_d©a
=
$this
->
m_u£r
->
	`v®id©e_u£r
(
$d©a
);

215 if(
$u£r_d©a
)

216 
$tok’
=
	`md5
(
$d©a
['email']);

217  
	`¬¿y
("error"=>"invalid_user_data");

219 
$u£r_d©a
['tok’']=
$tok’
;

221 
$this
->
ÿche
->
	`§ve
(
$tok’
,
	`£rŸlize
(
$u£r_d©a
),300);

223 
$d©a
=
	`¬¿y
(

224 'u£r_id'=>
$u£r_d©a
['user_id'],

225 'di¥Ïy_Çme'=>
$u£r_d©a
['display_name'],

226 'ü—‹_time'=>
	`time
(),

229 
$this
->
m_Úlše
->
	`add_Úlše
(
$d©a
);

231 
	`un£t
(
$u£r_d©a
['password']);

232 if(!
	`is£t
(
$u£r_d©a
['latest_update'])){

233 
$u£r_d©a
['latest_update']="";

235 
$u£r_d©a
['relationship']="self";

236  
$u£r_d©a
;

237 
	}
}

243 
funùiÚ
 
	$add_ä›nd
(
$¬gs
){

246 
$tok’
=
$¬gs
[0];

249 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

251 if(!
$u£r_d©a
)

252  
	`¬¿y
('error'=>"not_login");

254 if(
	`is£t
(
$¬gs
[1])&&$args[1]){

255 
$ä›nd_id
=
$¬gs
[1];

256 
$this
->
lßd
->
	`mod–
('m_user');

257 
$ä›nd_d©a
=
$this
->
m_u£r
->
	`g‘_u£r_d©a_by_u£r_id
(
$ä›nd_id
);

258 if(!
$ä›nd_d©a
)

259  
	`¬¿y
('error'=>"not_user");

262 if(
	`is£t
(
$¬gs
[2]))

263 
$cÚ‹Á
=
$¬gs
[2];

265 
$cÚ‹Á
="";

267 
$nÙify_cÚ‹Á
['di¥Ïy_Çme']=
$u£r_d©a
['display_name'];

268 
$nÙify_cÚ‹Á
['cÚ‹Á']=
$cÚ‹Á
;

269 
$nÙify_cÚ‹Á
=
	`£rŸlize
($notify_content);

271 
$num
=
$this
->
	`£nd_nÙify
(
$u£r_d©a
['u£r_id'], 
$ä›nd_id
, 'ä›nd_­¶iÿtiÚ','0', 
$nÙify_cÚ‹Á
);

273 if(
$num
)

274  
$ä›nd_d©a
;

276  
	`¬¿y
("error"=>"unknown_error");

277 
	}
}

283 
funùiÚ
 
	$hªdË_nÙify
(
$¬gs
){

286 
$tok’
=
$¬gs
[0];

289 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

291 if(!
$u£r_d©a
)

292  
	`¬¿y
("error"=>"not_login");

294 if(
	`is£t
(
$¬gs
[1])&&$args[1]){

295 
$nÙify_id
=
$¬gs
[1];

297  
	`¬¿y
("error"=>"no_notify");

300 if(
	`is£t
(
$¬gs
[2])){

301 
$choiû
=
$¬gs
[2];

303 
$choiû
=0;

306 
$this
->
lßd
->
	`mod–
('m_notify');

308 
$nÙify_d©a
=
$this
->
m_nÙify
->
	`g‘_nÙify_d©a_by_nÙify_id
(
$nÙify_id
);

310 if(
$nÙify_d©a
){

311 if(
$nÙify_d©a
['notify_type']=="welcome"){

312 
$this
->
	`igniÜe_nÙify
(
$nÙify_id
);

313  
$nÙify_d©a
;

314 }if(
$nÙify_d©a
['notify_type']=="friend_application"){

315 if(
$choiû
){

318 
$this
->
lßd
->
	`mod–
('m_friend');

319 
$ä›nd_d©a
=
	`¬¿y
();

320 
$ä›nd_d©a
['u£r_id']=
$nÙify_d©a
['from_id'];

321 
$ä›nd_d©a
['ä›nd_id']=
$nÙify_d©a
['to_id'];

322 
$ä›nd_d©a
['ü—‹_time']=
$this
->
cu¼’t
;

323 
$this
->
m_ä›nd
->
	`add_ä›nd
(
$ä›nd_d©a
);

324 
$ä›nd_d©a
=
	`¬¿y
();

325 
$ä›nd_d©a
['u£r_id']=
$nÙify_d©a
['to_id'];

326 
$ä›nd_d©a
['ä›nd_id']=
$nÙify_d©a
['from_id'];

327 
$ä›nd_d©a
['ü—‹_time']=
$this
->
cu¼’t
;

328 
$this
->
m_ä›nd
->
	`add_ä›nd
(
$ä›nd_d©a
);

330 
$this
->
	`igniÜe_nÙify
(
$nÙify_id
);

331  
$nÙify_d©a
;

333 
$this
->
	`igniÜe_nÙify
(
$nÙify_id
);

334  
$nÙify_d©a
;

338  
	`¬¿y
("error"=>'no_notify');

342 
	}
}

349 
funùiÚ
 
	$add_group
(
$¬gs
){

352 
$tok’
=
$¬gs
[0];

355 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

357 if(!
$u£r_d©a
)

358  
	`¬¿y
("error"=>"not_login");

360 
$this
->
lßd
->
	`mod–
('m_group');

362 
$group
['u£r_id']=
$u£r_d©a
['user_id'];

364 
$group
['group_Çme']=
$¬gs
[1];

366 
$group
['group_de¡rtiÚ']=
$¬gs
[2];

368 
$group
['group_ÿ‹gÜy']=
$¬gs
[3];

370 
$group
['group_states']=1;

372 
$group
['member_count']=1;

374 
$group
['ü—‹_time']=
$this
->
cu¼’t
;

376 
$»suÉ
=
$this
->
m_group
->
	`add_group
(
$group
);

378 if(
$»suÉ
){

379 
$group_memb”
=
	`¬¿y
();

380 
$group_memb”
['group_id']=
$»suÉ
;

381 
$group_memb”
['u£r_id']=
$u£r_d©a
['user_id'];

382 
$group_memb”
['inviter_id']=0;

383 
$group_memb”
['is_admin']=1;

384 
$group_memb”
['is_confirmed']=1;

385 
$group_memb”
['ü—‹_time']=
$this
->
cu¼’t
;

386 
$this
->
m_group
->
	`add_group_memb”
(
$group_memb”
);

387 
$group
['group_id']=
$»suÉ
;

388  
$group
;

390  
	`¬¿y
("error"=>"unknown_error");

391 
	}
}

398 
funùiÚ
 
	$još_group
(
$¬gs
){

401 
$tok’
=
$¬gs
[0];

404 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

406 if(!
$u£r_d©a
)

407  
	`¬¿y
("error"=>"not_login");

409 
$this
->
lßd
->
	`mod–
('m_group');

410 
$d©a
=
	`¬¿y
();

412 
$d©a
['group_id']=
$¬gs
[1];

414 
$group_d©a
=
$this
->
m_group
->
	`g‘_group_d©a_by_group_id
(
$d©a
['group_id']);

415 if(!
$group_d©a
)

416  
	`¬¿y
('error',"no_group");

418 
$d©a
['u£r_id']=
$u£r_d©a
['user_id'];

420 
$row
=
$this
->
m_group
->
	`g‘_group_memb”_id_by_u£r_id
(
$d©a
['user_id'],$data['group_id']);

422 if(
$row
){

423  
$row
['is_cÚfœmed']?
	`¬¿y
('error'=>"be_in"):array('error'=>"wait_verify");

426 
$d©a
['inviter_id']=0;

428 
$d©a
['is_admin']=0;

430 
$d©a
['is_confirmed']=1;

432 
$d©a
['ü—‹_time']=
$this
->
cu¼’t
;

434 
$»suÉ
=
$this
->
m_group
->
	`add_group_memb”
(
$d©a
);

436 if(
$»suÉ
){

437 
$this
->
m_group
->
	`šü—£_group_memb”_couÁ
(
$¬gs
[1]);

439 
$ü—‹_u£r_id
=
$this
->
m_group
->
	`g‘_group_ü—‹_u£r_id_by_group_id
(
$¬gs
[1]);

441 
$this
->
	`£nd_nÙify
(
$u£r_d©a
['u£r_id'], 
$ü—‹_u£r_id
, 'group_­¶iÿtiÚ','0', 
$¬gs
[2]);

443  
$group_d©a
;

445  
	`¬¿y
("error"=>"unknown_error");

447 
	}
}

453 
funùiÚ
 
	$group_check_š_by_blu‘oÙh_d©as
(
$¬gs
){

456 
$tok’
=
$¬gs
[0];

459 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

461 if(!
$u£r_d©a
)

462  
	`¬¿y
(array("error"=>"not_login"));

464 
$group_id
=
$¬gs
[1];

466 
$this
->
lßd
->
	`mod–
('m_user');

467 
$this
->
lßd
->
	`mod–
('m_group');

469 if(
	`is£t
(
$¬gs
[2])&&!
	`em±y
($args[2])){

470 
	`fÜ—ch
(
$¬gs
[2] 
as
 
$key
=>
$v®ue
){

471 
$¬gs
[2][
$key
]=
	`¬¿y
(
$v®ue
,"","0");

473 
$this
->
m_u£r
->
	`add_blu‘oÙh_£¬chs_by_blu‘oÙh_d©as
(
$u£r_d©a
['blu‘oÙh_id'],
$¬gs
[2]);

476 
$blu‘oÙh_d©as
=
$this
->
m_u£r
->
	`g‘_doubË_blu‘oÙh_£¬ch_d©as_by_£¬ch_time
(
$u£r_d©a
['blu‘oÙh_id'],$this->
cu¼’t
);

479 
$u£r_d©as
=
$this
->
m_u£r
->
	`g‘_u£r_d©as_by_blu‘oÙh_£¬ch_d©as
(
$blu‘oÙh_d©as
);

482 
$ab£Á_memb”_d©as
=
$this
->
m_group
->
	`g‘_ab£Á_memb”_d©as_by_u£r_d©as
(
$group_id
,
$u£r_d©as
,
$u£r_d©a
['user_id']);

484 if(
$group_id
==1){

486 
$ú‘
=
	`¬¿y
();

487 
	`fÜ—ch
(
$u£r_d©as
 
as
 
$key
=>
$v®ue
){

488 
$ú‘
[]=
$v®ue
['display_name'];

491 
$»®_ú‘
=
	`¬¿y
(

499 
$»®_ab£Á
=
	`¬¿y_diff
(
$»®_ú‘
,
$ú‘
);

501 
$ú‘
=
	`¬¿y
();

502 
	`fÜ—ch
(
$ab£Á_memb”_d©as
 
as
 
$key
=>
$v®ue
){

503 
$ú‘
[]=
$v®ue
['display_name'];

505 
$ú‘
=
	`¬¿y_æ
($cnet);

507 
	`fÜ—ch
(
$»®_ab£Á
 
as
 
$v®ue
){

508 if(
	`¬¿y_key_exi¡s
(
$v®ue
, 
$ú‘
)){

511 
$ab£Á_memb”_d©as
[]=
	`¬¿y
(

513 '»®_Çme'=>
$v®ue
,

514 'di¥Ïy_Çme'=>
$v®ue
,

515 'Ï¡_aùiv™y'=>
$this
->
cu¼’t
,

516 'ü—‹_time'=>
$this
->
cu¼’t
,

517 'u£r_av©¬'=>
	`ba£_u¾
()."upload/default.jpg",

527 if(
$ab£Á_memb”_d©as
){

528 
$»suÉ
=
	`¬¿y
();

530 
$group_d©a
=
$this
->
m_group
->
	`g‘_group_d©a_by_group_id
(
$group_id
);

531 
$ãed_cÚ‹Á
="æˆ‘ç»™#".
$group_d©a
['group_name']."#è¿›è¡Œç‚¹åï¼Œæ²¡åˆ°çš„æˆå‘˜æœ‰ï¼š";

532 
	`fÜ—ch
(
$ab£Á_memb”_d©as
 
as
 
$key
=>
$v®ue
){

533 
$ãed_cÚ‹Á
.="@".
$v®ue
['display_name'];

534 
$v®ue
['»ÏtiÚsh']=
$this
->
	`g‘_u£rs_»ÏtiÚsh
(
$u£r_d©a
['user_id'], $value['user_id']);

535 
$»suÉ
[]=(
¬¿y
)
$v®ue
;

537 if(
$group_id
==1)

538 
$group_d©a
['member_count']=53;

539 
$ab£Á_¿‹
=
	`štv®
((štv®(
$group_d©a
['memb”_couÁ'])-
	`couÁ
(
$ab£Á_memb”_d©as
))/intval($group_data['member_count'])*100);

540 
$ãed_cÚ‹Á
.="ã€‚å‡ºå‹¤ç‡ä¸º".
$ab£Á_¿‹
."%ã€‚";

541 
$this
->
lßd
->
	`mod–
("m_feed");

542 
$ãed_d©a
=
	`¬¿y
(

543 'u£r_id'=>
$u£r_d©a
['user_id'],

545 'ãed_cÚ‹Á'=>
$ãed_cÚ‹Á
,

547 'ü—‹_time'=>
$this
->
cu¼’t
,

553 
$ãed_id
=
$this
->
m_ãed
->
	`add_ãed
(
$ãed_d©a
);

554 if(
$ãed_id
){

555 
$this
->
	`upd©e_Ï¡_aùiv™y
(
$u£r_d©a
['u£r_id'], $this->
cu¼’t
,
$ãed_cÚ‹Á
);

556 
$this
->
m_u£r
->
	`šü—£_u£r_m‘a
(
$ãed_d©a
['user_id'], 'weibo_count');

558  
$»suÉ
;

561 
$this
->
lßd
->
	`mod–
("m_feed");

562 
$group_d©a
=
$this
->
m_group
->
	`g‘_group_d©a_by_group_id
(
$group_id
);

563 
$ãed_cÚ‹Á
="æˆ‘ç»™#".
$group_d©a
['group_name']."#è¿›è¡Œç‚¹åï¼Œæˆå‘˜å…¨åˆ°ï¼Œå‡ºå‹¤ç‡ä¸º100%ï¼";

564 
$ãed_d©a
=
	`¬¿y
(

565 'u£r_id'=>
$u£r_d©a
['user_id'],

567 'ãed_cÚ‹Á'=>
$ãed_cÚ‹Á
,

569 'ü—‹_time'=>
$this
->
cu¼’t
,

575 
$ãed_id
=
$this
->
m_ãed
->
	`add_ãed
(
$ãed_d©a
);

576 if(
$ãed_id
){

577 
$this
->
	`upd©e_Ï¡_aùiv™y
(
$u£r_d©a
['u£r_id'], $this->
cu¼’t
,
$ãed_cÚ‹Á
);

578 
$this
->
m_u£r
->
	`šü—£_u£r_m‘a
(
$ãed_d©a
['user_id'], 'weibo_count');

580  
	`¬¿y
(array("error"=>"no_absent"));

583 
	}
}

589 
funùiÚ
 
	$group_sign_š_by_blu‘oÙh_d©as
(
$¬gs
){

592 
$tok’
=
$¬gs
[0];

595 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

597 if(!
$u£r_d©a
)

598  
	`¬¿y
(array("error"=>"not_login"));

600 
$group_id
=
$¬gs
[1];

602 
$this
->
lßd
->
	`mod–
('m_user');

603 
$this
->
lßd
->
	`mod–
('m_group');

605 if(
	`is£t
(
$¬gs
[2])&&!
	`em±y
($args[2])){

606 
	`fÜ—ch
(
$¬gs
[2] 
as
 
$key
=>
$v®ue
){

607 
$¬gs
[2][
$key
]=
	`¬¿y
(
$v®ue
,"","0");

609 
$this
->
m_u£r
->
	`add_blu‘oÙh_£¬chs_by_blu‘oÙh_d©as
(
$u£r_d©a
['blu‘oÙh_id'],
$¬gs
[2]);

612 
$blu‘oÙh_d©as
=
$this
->
m_u£r
->
	`g‘_doubË_blu‘oÙh_£¬ch_d©as_by_£¬ch_time
(
$u£r_d©a
['blu‘oÙh_id'],$this->
cu¼’t
);

614 
	}
}

621 
funùiÚ
 
	$g‘_®l_u£r_d©a
(
$¬gs
){

624 
$tok’
=
$¬gs
[0];

627 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

629 if(!
$u£r_d©a
)

630  
	`¬¿y
(array('error'=>"not_login"));

632 
$this
->
lßd
->
	`mod–
('m_user');

634 if(
	`is£t
(
$¬gs
[1])&&$args[1]){

635 if(
	`is£t
(
$¬gs
[2])&&$args[2]){

636 
$u£r_ids
=
$this
->
m_u£r
->
	`g‘_®l_u£r_id
(
$¬gs
[1],$args[2]);

638 
$u£r_ids
=
$this
->
m_u£r
->
	`g‘_®l_u£r_id
(
$¬gs
[1]);

641 
$u£r_ids
=
$this
->
m_u£r
->
	`g‘_®l_u£r_id
();

644 
$u£r_d©as
=
$this
->
m_u£r
->
	`g‘_u£r_d©as_by_u£r_ids
(
$u£r_ids
);

645 if(
$u£r_d©as
)

646  
$u£r_d©as
;

648  
	`¬¿y
(array('error',"not_user"));

650 
	}
}

652 
funùiÚ
 
	$g‘_u£r_d©a_by_di¥Ïy_Çme
(
$¬gs
){

654 
$tok’
=
$¬gs
[0];

657 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

659 if(!
$u£r_d©a
)

660  
	`¬¿y
(array('error'=>"not_login"));

662 
$this
->
lßd
->
	`mod–
('m_user');

664 
$di¥Ïy_Çme
=
$¬gs
[1];

666 
$u£r_d©as
=
$this
->
m_u£r
->
	`g‘_u£r_d©a_by_di¥Ïy_Çme
(
$di¥Ïy_Çme
);

668 if(
$u£r_d©as
){

669 
	`fÜ—ch
(
$u£r_d©as
 
as
 
$key
=>
$v®ue
){

670 
$v®ue
['»ÏtiÚsh']=
$this
->
	`g‘_u£rs_»ÏtiÚsh
(
$u£r_d©a
['user_id'], $value['user_id']);

671 
$u£r_d©as
[
$key
]=
$v®ue
;

673  
$u£r_d©as
;

675  
	`¬¿y
(array('error'=>"no_user"));

677 
	}
}

684 
funùiÚ
 
	$po¡_weibo
(
$¬gs
){

685 
$this
->
lßd
->
	`mod–
('m_feed');

688 
$tok’
=
$¬gs
[0];

691 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

693 if(!
$u£r_d©a
)

694  
	`¬¿y
("error"=>"not_login");

697 
$cÚ‹Á
=
$¬gs
[1];

699 
$visib™y
=
$¬gs
[2];

701 
$d©a
=
	`¬¿y
(

702 'u£r_id'=>
$u£r_d©a
['user_id'],

704 'ãed_cÚ‹Á'=>
$cÚ‹Á
,

706 'ü—‹_time'=>
$this
->
cu¼’t
,

710 'visib™y'=>
$visib™y


713 
$ãed_id
=
$this
->
m_ãed
->
	`add_ãed
(
$d©a
);

714 if(
$ãed_id
){

715 
$this
->
	`upd©e_Ï¡_aùiv™y
(
$u£r_d©a
['u£r_id'], $this->
cu¼’t
,
$cÚ‹Á
);

716 
$d©a
=
	`¬¿y_m”ge
(
	`¬¿y
('ãed_id'=>
$ãed_id
),$data);

717 
$d©a
=
	`¬¿y_m”ge
($d©a,
$this
->
m_u£r
->
	`g‘_u£r_d©a_by_u£r_id
($data['user_id']));

718 
$this
->
lßd
->
	`mod–
('m_user');

719 
$this
->
m_u£r
->
	`šü—£_u£r_m‘a
(
$d©a
['user_id'], 'weibo_count');

720  
$d©a
;

723  
	`¬¿y
('error'=>"unknown_error");

724 
	}
}

731 
funùiÚ
 
	$Œª¥Úd_weibo
(
$¬gs
){

734 
$tok’
=
$¬gs
[0];

737 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

739 if(!
$u£r_d©a
)

740  
	`¬¿y
("error"=>"not_login");

742 
$this
->
lßd
->
	`mod–
('m_feed');

745 
$Œª¥Úd_id
=
$¬gs
[1];

748 
$cÚ‹Á
=
$¬gs
[2];

750 
$visib™y
=
$¬gs
[3];

752 
$d©a
=
	`¬¿y
(

753 'u£r_id'=>
$u£r_d©a
['user_id'],

755 'ãed_cÚ‹Á'=>
$cÚ‹Á
,

757 'ü—‹_time'=>
$this
->
cu¼’t
,

758 'Œª¥Úd_id'=>
$Œª¥Úd_id
,

761 'visib™y'=>
$visib™y


764 
$ãed_id
=
$this
->
m_ãed
->
	`add_ãed
(
$d©a
);

766 if(
$ãed_id
){

767 
$this
->
	`upd©e_Ï¡_aùiv™y
(
$u£r_d©a
['u£r_id'], $this->
cu¼’t
);

768 
$this
->
m_ãed
->
	`šü—£_Œª¥Úd_couÁ
(
$Œª¥Úd_id
);

769 
$d©a
=
	`¬¿y_m”ge
(
	`¬¿y
('ãed_id'=>
$ãed_id
),$data);

770 
$d©a
['sourû_ãed']=
$this
->
m_ãed
->
	`g‘_ãed_by_ãed_id
(
$ãed_id
);

771 
$this
->
m_u£r
->
	`šü—£_u£r_m‘a
(
$u£r_d©a
['user_id'], 'weibo_count');

772  
$d©a
;

775  
	`¬¿y
("error"=>"unknown_error");

776 
	}
}

783 
funùiÚ
 
	$g‘_®l_public_weibo
(
$¬gs
){

786 
$tok’
=
$¬gs
[0];

789 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

791 if(!
$u£r_d©a
)

792  
	`¬¿y
(array("error"=>"not_login"));

794 if(
	`is£t
(
$¬gs
[1])&&$args[1])

795 
$f‹r
=
$¬gs
[1];

797 
$f‹r
="old";

799 if(
	`is£t
(
$¬gs
[2])&&$args[2])

800 
$id
=
$¬gs
[2];

802 
$id
="";

804 
$this
->
lßd
->
	`mod–
('m_feed');

806 
$ãeds
=
$this
->
m_ãed
->
	`g‘_®l_public_ãeds
(
$f‹r
, 
$id
, "", "");

808 if(!
$ãeds
)

809  
	`¬¿y
(array("error"=>"no_weibo"));

811  
$ãeds
;

812 
	}
}

819 
funùiÚ
 
	$g‘_u£r_weibo
(
$¬gs
){

822 
$tok’
=
$¬gs
[0];

825 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

827 if(!
$u£r_d©a
)

828  
	`¬¿y
(array("error"=>"not_login"));

830 if(
	`is£t
(
$¬gs
[1])&&$args[1])

831 
$u£r_id
=
$¬gs
[1];

833 
$u£r_id
=
$u£r_d©a
['user_id'];

835 if(
	`is£t
(
$¬gs
[2])&&$args[2])

836 
$·ge
=
$¬gs
[2];

838 
$·ge
="";

840 if(
	`is£t
(
$¬gs
[3])&&$args[3])

841 
$·ge_couÁ
=
$¬gs
[3];

843 
$·ge_couÁ
="";

845 
$»ÏtiÚsh
=
$this
->
	`g‘_u£rs_»ÏtiÚsh
(
$u£r_d©a
['u£r_id'], 
$u£r_id
);

848 
$this
->
lßd
->
	`mod–
('m_feed');

850 
$ãeds
=
$this
->
m_ãed
->
	`g‘_ãeds_by_u£r_id
(
$u£r_id
,
$»ÏtiÚsh
,
$·ge
,
$·ge_couÁ
);

852 if(
$ãeds
){

853  
$ãeds
;

855  
	`¬¿y
(array("error"=>"no_weibo"));

858 
	}
}

865 
funùiÚ
 
	$g‘_ä›nds_weibo
(
$¬gs
){

868 
$tok’
=
$¬gs
[0];

871 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

873 if(!
$u£r_d©a
)

874  
	`¬¿y
(array("error"=>"not_login"));

876 if(
	`is£t
(
$¬gs
[1]))

877 
$·ge
=
$¬gs
[1];

879 
$·ge
="";

881 if(
	`is£t
(
$¬gs
[2]))

882 
$·ge_couÁ
=
$¬gs
[2];

884 
$·ge_couÁ
="";

886 
$this
->
lßd
->
	`mod–
('m_friend');

888 
$ä›nd_ids
=
$this
->
m_ä›nd
->
	`g‘_u£r_ä›nd_ids
(
$u£r_d©a
['user_id']);

890 if(
	`em±y
(
$ä›nd_ids
))

891  
	`¬¿y
(array("error"=>"no_friend"));

893 
$this
->
lßd
->
	`mod–
('m_feed');

895 
$ãeds
=
$this
->
m_ãed
->
	`g‘_ãeds_by_ä›nds_ids
(
$ä›nd_ids
,
$·ge
,
$·ge_couÁ
);

897 if(
	`em±y
(
$ãeds
))

898  
	`¬¿y
(array("error"=>"no_weibo"));

899  
$ãeds
;

902 
	}
}

909 
funùiÚ
 
	$u¶ßd_pœtu»
(
$¬gs
){

910 
$this
->
lßd
->
	`mod–
('m_album');

911 
$this
->
lßd
->
	`h–³r
('file');

913 
$tok’
=
$¬gs
[0];

916 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

918 if(!
$u£r_d©a
)

919  
	`¬¿y
("error"=>"not_login");

921 
$d©a
['®bum_id']=
$¬gs
[1];

923 if(
$u£r_d©a
['u£r_id']!=
$this
->
m_®bum
->
	`g‘_u£r_id_by_®bum_id
(
$d©a
['album_id'])){

924 
$d©a
['®bum_id']=
$this
->
m_®bum
->
	`g‘_u£r_®bum_id
(
$u£r_d©a
['user_id']);

927 
$d©a
['u£r_id']=
$u£r_d©a
['user_id'];

929 
$d©a
['piùu»_Çme']=
$¬gs
[2];

931 
$d©a
['piùu»_de¡rtiÚ']=
$¬gs
[3];

933 
$b™s
=
	`ba£64_decode
(
$¬gs
[4]);

935 
$d©a
['fe_size']=
$¬gs
[5];

937 
$d©a
['fe_ty³']=
$¬gs
[6];

939 
$d©a
['ü—‹_time']=
$this
->
cu¼’t
;

941 
$d©a
['file_type']){

942 1:
$img_ty³
="gif";;

943 2:
$img_ty³
="jpg";;

944 3:
$img_ty³
="png";;

947 
$d©a
['fe_Çme']=$d©a['u£r_id'].'_'.$d©a['ü—‹_time'].'.'.
$img_ty³
;

950 
	`wr™e_fe
('u¶ßd/'.
$d©a
['u£r_id'].'/'.$d©a['fe_Çme'], 
$b™s
);

953 
$piùu»_id
=
$this
->
m_®bum
->
	`add_piùu»
(
$d©a
);

955  
	`¬¿y
("success"=>"success");

957 
	}
}

964 
funùiÚ
 
	$u¶ßd_av©¬
(
$¬gs
){

965 
$this
->
lßd
->
	`mod–
(
	`¬¿y
('m_album','m_user'));

966 
$this
->
lßd
->
	`h–³r
('file');

968 
$tok’
=
$¬gs
[0];

971 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

973 if(!
$u£r_d©a
)

974  
	`¬¿y
("error"=>"not_login");

976 
$d©a
['®bum_id']=
$¬gs
[1];

978 if(
$u£r_d©a
['u£r_id']!=
$this
->
m_®bum
->
	`g‘_u£r_id_by_®bum_id
(
$d©a
['album_id'])){

979 
$d©a
['®bum_id']=
$this
->
m_®bum
->
	`g‘_u£r_®bum_id
(
$u£r_d©a
['user_id']);

982 
$d©a
['u£r_id']=
$u£r_d©a
['user_id'];

984 
$d©a
['piùu»_Çme']=
$¬gs
[2];

986 
$d©a
['piùu»_de¡rtiÚ']=
$¬gs
[3];

989 
$b™s
=
	`ba£64_decode
(
$¬gs
[4]);

991 
$d©a
['fe_size']=
$¬gs
[5];

993 
$d©a
['fe_ty³']=
$¬gs
[6];

995 
$d©a
['ü—‹_time']=
$this
->
cu¼’t
;

997 
$d©a
['file_type']){

998 1:
$img_ty³
="gif";;

999 2:
$img_ty³
="jpg";;

1000 3:
$img_ty³
="png";;

1003 
$d©a
['fe_Çme']=$d©a['u£r_id'].'_'.$d©a['ü—‹_time'].'.'.
$img_ty³
;

1005 
$fe_·th
='u¶ßd/'.
$d©a
['user_id'].'/'.$data['file_name'];

1008 
	`wr™e_fe
(
$fe_·th
, 
$b™s
);

1011 
$piùu»_id
=
$this
->
m_®bum
->
	`add_piùu»
(
$d©a
);

1013 
$d©a
=
	`¬¿y
(

1014 'u£r_id'=>
$u£r_d©a
['user_id'],

1016 'm‘a_v®ue'=>
	`ba£_u¾
().
$fe_·th


1019 
$this
->
m_u£r
->
	`add_u£r_m‘a
(
$d©a
);

1021  
	`¬¿y
("success"=>"success");

1022 
	}
}

1029 
funùiÚ
 
	$g‘_Ã¬_by_blu‘oÙh_d©as
(
$¬gs
){

1032 
$tok’
=
$¬gs
[0];

1035 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1037 if(!
$u£r_d©a
)

1038  
	`¬¿y
(array("error"=>"not_login"));

1040 
$this
->
lßd
->
	`mod–
('m_user');

1043 if(
	`is£t
(
$¬gs
[1])&&$args[1]){

1044 
$this
->
m_u£r
->
	`add_blu‘oÙh_£¬chs_by_blu‘oÙh_d©as
(
$u£r_d©a
['blu‘oÙh_id'],
$¬gs
[1]);

1048 
$blu‘oÙh_d©as
=
$this
->
m_u£r
->
	`g‘_blu‘oÙh_£¬ch_d©as_by_£¬ch_time
(
$u£r_d©a
['blu‘oÙh_id'],$this->
cu¼’t
);

1051 
$u£r_d©as
=
$this
->
m_u£r
->
	`g‘_u£r_d©as_by_blu‘oÙh_£¬ch_d©as
(
$blu‘oÙh_d©as
);

1054 
$this
->
lßd
->
	`mod–
('m_place');

1055 
$this
->
lßd
->
	`mod–
('m_event');

1056 
	`fÜ—ch
(
$u£r_d©as
 
as
 
$key
=>
$v®ue
){

1057 if(
$v®ue
['user_id']==0){

1058 
$¶aû
=
$this
->
m_¶aû
->
	`g‘_¶aû_d©a_by_blu‘oÙh_id
(
$v®ue
['bluetooth_id']);

1059 if(
$¶aû
){

1060 
$»ûÁ_ev’t
=
$this
->
m_ev’t
->
	`g‘_¶aû_»ûÁ_ev’t
(
$¶aû
['¶aû_id'], $this->
cu¼’t
);

1061 if(
$»ûÁ_ev’t
){

1062 
$¶aû
['»ûÁ_ev’t']=
$»ûÁ_ev’t
['event_name'];

1064 
$¶aû
['recent_event']="ç©ºé—²çŠ¶æ€";

1066 
$¶aû
['¶aû_av©¬']=
	`ba£_u¾
().'upload/place_default.jpg';

1067 
$¶aû
['Ï¡_£¬ch_time']=
$v®ue
['last_search_time'];

1068 
$¶aû
['£¬ch_couÁ']=
$v®ue
['search_count'];

1069 
$v®ue
=
$¶aû
;

1070 
$v®ue
['type']='place';

1072 
$v®ue
['type']='user';

1075 
$v®ue
['»ÏtiÚsh']=
$this
->
	`g‘_u£rs_»ÏtiÚsh
(
$u£r_d©a
['user_id'], $value['user_id']);

1076 
$v®ue
['type']='user';

1078 
$u£r_d©as
[
$key
]=
$v®ue
;

1081 if(
$u£r_d©as
)

1082  
$u£r_d©as
;

1084  
	`¬¿y
(array("error"=>"no_user"));

1085 
	}
}

1092 
funùiÚ
 
	$g‘_group_d©as_by_ÿ‹gÜy
(
$¬gs
){

1095 
$tok’
=
$¬gs
[0];

1098 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1100 if(!
$u£r_d©a
)

1101  
	`¬¿y
(array("error"=>"not_login"));

1103 
$this
->
lßd
->
	`mod–
('m_group');

1105 
$ÿ‹gÜy
=(
	`is£t
(
$¬gs
[1])&&$args[1])?$args[1]:0;

1107 
$·ge
=
	`is£t
(
$¬gs
[2])?$args[2]:0;

1109 
$·ge_couÁ
=
	`is£t
(
$¬gs
[3])?$args[3]:0;

1111 
$group_d©as
=
$this
->
m_group
->
	`g‘_group_d©as_by_ÿ‹gÜy
(
$ÿ‹gÜy
,
$·ge
,
$·ge_couÁ
);

1113 if(
$group_d©as
){

1114 
	`fÜ—ch
(
$group_d©as
 
as
 
$key
=>
$v®ue
){

1115 
$u£r_¡©us
=
$this
->
m_group
->
	`g‘_u£r_¡©us_by_u£r_id_ªd_group_id
(
$u£r_d©a
['u£r_id'], 
$v®ue
['group_id']);

1116 if(
$u£r_¡©us
){

1117 
$v®ue
['is_in']=1;

1118 
$v®ue
['is_cÚfœmed']=
$u£r_¡©us
['is_confirmed'];

1121 
$v®ue
['is_in']=0;

1123 
$group_d©as
[
$key
]=
$v®ue
;

1125  
$group_d©as
;

1128  
	`¬¿y
(array("error"=>"no_group"));

1130 
	}
}

1137 
funùiÚ
 
	$g‘_group_d©as_by_u£r_id
(
$¬gs
){

1140 
$tok’
=
$¬gs
[0];

1143 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1145 if(!
$u£r_d©a
)

1146  
	`¬¿y
(array("error"=>"not_login"));

1147 
$this
->
lßd
->
	`mod–
('m_group');

1149 
$u£r_id
=
$u£r_d©a
['user_id'];

1151 
$is_admš
=
	`is£t
(
$¬gs
[1])?$args[1]:'';

1153 
$·ge
=
	`is£t
(
$¬gs
[2])?$args[2]:'';

1155 
$·ge_couÁ
=
	`is£t
(
$¬gs
[3])?$args[3]:'';

1157 
$group_d©as
=
	`¬¿y
();

1159 
$group_d©as
=
$this
->
m_group
->
	`g‘_group_d©as_by_u£r_id
(
$u£r_id
, 
$is_admš
,
$·ge
,
$·ge_couÁ
);

1161 if(
$group_d©as
)

1162  
$group_d©as
;

1164  
	`¬¿y
(array("error"=>"no_group"));

1165 
	}
}

1167 
funùiÚ
 
	$g‘_hi¡Üy_Ã¬_u£r_d©as
(
$¬gs
){

1169 
$tok’
=
$¬gs
[0];

1172 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1174 if(!
$u£r_d©a
)

1175  
	`¬¿y
(array("error"=>"not_login"));

1177 if(
	`is£t
(
$¬gs
[1])&&$args[1])

1178 
$sÜt
=
$¬gs
[1];

1180 
$sÜt
="search_count";

1182 if(
	`is£t
(
$¬gs
[2])&&$args[2])

1183 
$·ge
=
$¬gs
[2];

1185 
$·ge
=1;

1187 if(
	`is£t
(
$¬gs
[3])&&$args[3])

1188 
$·ge_couÁ
=
$¬gs
[3];

1190 
$·ge_couÁ
=20;

1192 
$this
->
lßd
->
	`mod–
('m_user');

1195 
$blu‘oÙh_d©as
=
$this
->
m_u£r
->
	`g‘_blu‘oÙh_£¬ch_d©as_by_blu‘oÙh_id
(
$u£r_d©a
['blu‘oÙh_id'],
$sÜt
,
$·ge
,
$·ge_couÁ
);

1198 
$u£r_d©as
=
$this
->
m_u£r
->
	`g‘_u£r_d©as_by_blu‘oÙh_£¬ch_d©as
(
$blu‘oÙh_d©as
);

1201 
$this
->
lßd
->
	`mod–
('m_place');

1202 
$this
->
lßd
->
	`mod–
('m_event');

1203 
	`fÜ—ch
(
$u£r_d©as
 
as
 
$key
=>
$u£r_d©a
){

1204 if(
$u£r_d©a
['user_id']==0){

1205 
$¶aû
=
$this
->
m_¶aû
->
	`g‘_¶aû_d©a_by_blu‘oÙh_id
(
$u£r_d©a
['bluetooth_id']);

1206 if(
$¶aû
){

1207 
$»ûÁ_ev’t
=
$this
->
m_ev’t
->
	`g‘_¶aû_»ûÁ_ev’t
(
$¶aû
['¶aû_id'], $this->
cu¼’t
);

1208 if(
$»ûÁ_ev’t
){

1209 
$¶aû
['»ûÁ_ev’t']=
$»ûÁ_ev’t
;

1211 
$¶aû
['Ï¡_£¬ch_time']=
$u£r_d©a
['last_search_time'];

1212 
$¶aû
['£¬ch_couÁ']=
$u£r_d©a
['search_count'];

1213 
$u£r_d©a
=
$¶aû
;

1214 
$u£r_d©a
['type']='place';

1216 
$u£r_d©a
['type']='user';

1219 
$u£r_d©a
['type']='user';

1221 
$u£r_d©as
[
$key
]=
$u£r_d©a
;

1224 if(
$u£r_d©as
)

1225  
$u£r_d©as
;

1227  
	`¬¿y
(array("error"=>"no_user"));

1228 
	}
}

1235 
funùiÚ
 
	$add_ev’t
(
$¬gs
){

1238 
$tok’
=
$¬gs
[0];

1241 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1243 if(!
$u£r_d©a
)

1244  
	`¬¿y
("error"=>"not_login");

1247 
$d©a
['ev’t_Çme']=
$¬gs
[1];

1249 
$d©a
['ev’t_de¡rtiÚ']=
$¬gs
[2];

1251 
$d©a
['¡¬t_time']=
$¬gs
[3];

1253 
$d©a
['’d_time']=
$¬gs
[4];

1255 
$d©a
['u£r_id']=
$u£r_d©a
['user_id'];

1257 if(
	`is£t
(
$¬gs
[5])&&$args[5])

1258 
$d©a
['¶aû_id']=
$¬gs
[5];

1259 
$d©a
['status_count']=0;

1261 
$d©a
['member_count']=1;

1263 
$this
->
lßd
->
	`mod–
('m_event');

1264 
$num
=
$this
->
m_ev’t
->
	`add_ev’t
(
$d©a
);

1265 if(
$num
){

1266 
$ev’t_memb”
['ev’t_id']=
$num
;

1267 
$ev’t_memb”
['u£r_id']=
$u£r_d©a
['user_id'];

1268 
$ev’t_memb”
['is_admin']=1;

1269 
$ev’t_memb”
['is_confirmed']=1;

1270 
$this
->
m_ev’t
->
	`add_ev’t_memb”
(
$ev’t_memb”
);

1271 
$d©a
['ev’t_id']=
$num
;

1272  
$d©a
;

1274  
	`¬¿y
("error"=>"unknown_error");

1277 
	}
}

1279 
funùiÚ
 
	$add_¶aû
(
$¬gs
){

1282 
$tok’
=
$¬gs
[0];

1285 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1287 if(!
$u£r_d©a
)

1288  
	`¬¿y
("error"=>"not_login");

1290 
$¶aû
['¶aû_Çme']=
$¬gs
[1];

1291 
$¶aû
['¶aû_de¡rtiÚ']=
$¬gs
[2];

1292 
$¶aû
['¶aû_ÿ‹gÜy']=
$¬gs
[3];

1293 
$¶aû
['place_states']=1;

1294 
$¶aû
['member_count']=1;

1296 if(
	`is£t
(
$¬gs
[4])&&$args[4]){

1297 
$wifi_mac
=
$¬gs
[4];

1298 if(!
	`v®id_blu‘oÙh_mac
(
$wifi_mac
))

1299  
	`¬¿y
("error"=>"invalid_wifi_mac");

1300 
$wifi_mac
=
	`¡¹ouµ”
($wifi_mac);

1303 if(
	`is£t
(
$¬gs
[5])&&$args[5]){

1304 
$blu‘oÙh_mac
=
$¬gs
[5];

1305 if(!
	`v®id_blu‘oÙh_mac
(
$blu‘oÙh_mac
))

1306  
	`¬¿y
("error"=>"invalid_bluetooth_mac");

1307 
$blu‘oÙh_mac
=
	`¡¹ouµ”
($bluetooth_mac);

1309 
$this
->
lßd
->
	`mod–
('m_user');

1310 
$blu‘oÙh_id
=
$this
->
m_u£r
->
	`g‘_u£r_id_by_blu‘oÙh_mac
(
$blu‘oÙh_mac
);

1312 if(
$blu‘oÙh_id
){

1313  
	`¬¿y
("error"=>"existing_bluetooth_mac");

1315 
$blu‘oÙh_id
=
$this
->
m_u£r
->
	`add_blu‘oÙh
(
	`¬¿y
(

1317 'blu‘oÙh_mac'=>
$blu‘oÙh_mac
,

1319 'ü—‹_time'=>
$this
->
cu¼’t


1322 
$¶aû
['blu‘oÙh_id']=
$blu‘oÙh_id
;

1324 
$¶aû
['ü—‹_time']=
$this
->
cu¼’t
;

1326 
$this
->
lßd
->
	`mod–
('m_place');

1327 
$num
=
$this
->
m_¶aû
->
	`add_¶aû
(
$¶aû
);

1328 if(
$num
){

1329 
$¶aû_memb”
['¶aû_id']=
$num
;

1330 
$¶aû_memb”
['u£r_id']=
$u£r_d©a
['user_id'];

1331 
$¶aû_memb”
['is_admin']=1;

1332 
$¶aû_memb”
['is_confirmed']=1;

1333 
$¶aû_memb”
['ü—‹_time']=
$this
->
cu¼’t
;

1334 
$this
->
m_¶aû
->
	`add_¶aû_memb”
(
$¶aû_memb”
);

1335 
$¶aû
['¶aû_id']=
$num
;

1336  
$¶aû
;

1338 
	`¬¿y
("error"=>"unknown_error");

1340 
	}
}

1342 
funùiÚ
 
	$add_¶aû_memb”
(
$¬gs
){

1344 
$tok’
=
$¬gs
[0];

1347 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1349 if(!
$u£r_d©a
)

1350  
	`¬¿y
("error"=>"not_login");

1351 
$d©a
['¶aû_id']=
$¬gs
[1];

1352 
$d©a
['u£r_id']=
$u£r_d©a
['user_id'];

1353 
$d©a
['is_admin']=0;

1354 
$d©a
['is_confirmed']=0;

1355 
$d©a
['ü—‹_time']=
$this
->
cu¼’t
;

1357 
$this
->
lßd
->
	`mod–
('m_place');

1358 
$num
=
$this
->
m_¶aû
->
	`add_¶aû_memb”
(
$d©a
);

1360 if(
$num
){

1361 
$d©a
['¶aû_memb”_id']=
$num
;

1362 
$this
->
m_¶aû
->
	`šü—£_¶aû_memb”_couÁ
(
$d©a
['place_id']);

1363  
	`¬¿y
("success"=>"success");

1365  
	`¬¿y
("error"=>"unknown_error");

1367 
	}
}

1369 
funùiÚ
 
	$g‘_¶aû_d©as_by_ÿ‹gÜy
(
$¬gs
){

1371 
$tok’
=
$¬gs
[0];

1374 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1376 if(!
$u£r_d©a
)

1377  
	`¬¿y
(array("error"=>"not_login"));

1379 
$this
->
lßd
->
	`mod–
('m_place');

1381 
$ÿ‹gÜy
=(
	`is£t
(
$¬gs
[1])&&$args[1])?$args[1]:0;

1383 
$·ge
=(
	`is£t
(
$¬gs
[2])&&$args[2])?$args[2]:0;

1385 
$·ge_couÁ
=(
	`is£t
(
$¬gs
[3])&&$args[3])?$args[3]:0;

1387 
$¶aû_d©as
=
$this
->
m_¶aû
->
	`g‘_¶aû_d©as_by_ÿ‹gÜy
(
$ÿ‹gÜy
,
$·ge
,
$·ge_couÁ
);

1390 if(
$¶aû_d©as
){

1391 
$this
->
lßd
->
	`mod–
('m_event');

1392 
	`fÜ—ch
(
$¶aû_d©as
 
as
 
$key
=>
$v®ue
){

1393 
$»ûÁ_ev’t
=
$this
->
m_ev’t
->
	`g‘_¶aû_»ûÁ_ev’t
(
$v®ue
['¶aû_id'], $this->
cu¼’t
);

1394 if(
$»ûÁ_ev’t
){

1395 
$v®ue
['»ûÁ_ev’t']=
$»ûÁ_ev’t
;

1396 
$¶aû_d©as
[
$key
]=
$v®ue
;

1399  
$¶aû_d©as
;

1401  
	`¬¿y
(array("error"=>"no_place"));

1402 
	}
}

1404 
funùiÚ
 
	$g‘_¶aû_»ûÁ_memb”s
(
$¬gs
){

1406 
$tok’
=
$¬gs
[0];

1409 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1411 if(!
$u£r_d©a
)

1412  
	`¬¿y
(array("error"=>"not_login"));

1414 
$this
->
lßd
->
	`mod–
('m_place');

1416 
$¶aû_id
=
$¬gs
[1];

1418 
$memb”s
=
$this
->
m_¶aû
->
	`g‘_»ûÁ_¶aû_memb”s
(
$¶aû_id
);

1420 if(
$memb”s
){

1421 
$this
->
lßd
->
	`mod–
('m_user');

1422 
$memb”s
=
$this
->
m_u£r
->
	`g‘_u£r_d©as_by_u£r_ids
($members);

1423  
$memb”s
;

1425  
	`¬¿y
(array("error"=>"no_member"));

1426 
	}
}

1428 
funùiÚ
 
	$g‘_group_memb”s_by_group_id
(
$¬gs
){

1430 
$tok’
=
$¬gs
[0];

1433 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1435 if(!
$u£r_d©a
)

1436  
	`¬¿y
(array("error"=>"not_login"));

1438 
$this
->
lßd
->
	`mod–
('m_group');

1440 
$group_id
=
$¬gs
[1];

1442 
$memb”s
=
$this
->
m_group
->
	`g‘_group_memb”_d©as_by_group_id
(
$group_id
,
$u£r_d©a
['user_id']);

1444 if(
$memb”s
){

1445  
$memb”s
;

1447  
	`¬¿y
(array("error"=>"no_member"));

1448 
	}
}

1450 
funùiÚ
 
	$g‘_group_d©a_by_group_id
(
$¬gs
){

1452 
$tok’
=
$¬gs
[0];

1455 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1457 if(!
$u£r_d©a
)

1458  
	`¬¿y
(array("error"=>"not_login"));

1459 
$this
->
lßd
->
	`mod–
('m_group');

1461 
$group_id
=
$¬gs
[1];

1463 
$group_d©a
=
$this
->
m_group
->
	`g‘_group_d©a_by_group_id
(
$group_id
);

1465 if(
$group_d©a
){

1466 
$memb”s
=
$this
->
m_group
->
	`g‘_group_memb”_d©as_by_group_id
(
$group_id
,
$u£r_d©a
['user_id']);

1467 if(
$memb”s
)

1468 
$group_d©a
['group_memb”s']=
$memb”s
;

1469  
$group_d©a
;

1472  
	`¬¿y
("error"=>"no_group");

1474 
	}
}

1476 
funùiÚ
 
	$comm’t_weibo
(
$¬gs
){

1479 
$tok’
=
$¬gs
[0];

1482 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1484 if(!
$u£r_d©a
)

1485  
	`¬¿y
("error"=>"not_login");

1487 
$comm’t
['u£r_id']=
$u£r_d©a
['user_id'];

1488 
$comm’t
['comment_type']='weibo';

1489 
$comm’t
['comm’t_ty³_id']=
$¬gs
[1];

1490 
$comm’t
['comm’t_cÚ‹Á']=
$¬gs
[2];

1491 
$comm’t
['ü—‹_time']=
$this
->
cu¼’t
;

1493 
$this
->
lßd
->
	`mod–
('m_comment');

1495 
$num
=
$this
->
m_comm’t
->
	`add_comm’t
(
$comm’t
);

1497 if(
$num
){

1500 
$this
->
lßd
->
	`mod–
('m_feed');

1501 
$ãed
=
$this
->
m_ãed
->
	`g‘_ãed_by_ãed_id
(
$comm’t
['comment_type_id']);

1502 
$this
->
m_ãed
->
	`šü—£_comm’t_couÁ
(
$ãed
['feed_id']);

1505 
$this
->
	`£nd_nÙify
(
$u£r_d©a
['u£r_id'], 
$ãed
['user_id'], 'comment_weibo',$feed['feed_id'],$user_data['display_name'].'è¯„è®ºäº†æ‚¨çš„å¾®åš');

1507 
$comm’t
['comm’t_id']=
$num
;

1509  
$comm’t
;

1511  
	`¬¿y
("error"=>"unknown_error");

1513 
	}
}

1515 
funùiÚ
 
	$§y_h–lo
(
$¬gs
){

1516 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$¬gs
);

1517  
$u£r_d©a
;

1518 
	}
}

1521 
funùiÚ
 
	$u£r_k“p_®ive
(
$¬gs
){

1523 
$tok’
=
$¬gs
[0];

1526 
$u£r_d©a
=
$this
->
	`g‘_u£r_by_tok’
(
$tok’
);

1528 if(!
$u£r_d©a
)

1529  
	`¬¿y
(array("error"=>"not_login"));

1532 
$this
->
lßd
->
	`mod–
('m_notify');

1534 
	}
}

1541 
funùiÚ
 
	$g‘_u£r_by_tok’
(
$tok’
){

1543 
$this
->
lßd
->
	`driv”
('ÿche',
	`¬¿y
('adapter' => 'file'));

1544 
$this
->
lßd
->
	`mod–
('m_online');

1546 
$u£r_d©a
=
$this
->
ÿche
->
	`g‘
(
$tok’
);

1547 if(
$u£r_d©a
){

1550 
$u£r_d©a
=
	`un£rŸlize
($user_data);

1552 
$this
->
lßd
->
	`mod–
('m_user');

1554 
$Ãw_u£r_d©a
=
$this
->
m_u£r
->
	`g‘_u£r_d©a_by_u£r_id
(
$u£r_d©a
['user_id']);

1555 
$u£r_d©a
=
	`¬¿y_m”ge
($u£r_d©a,
$Ãw_u£r_d©a
);

1558 
$this
->
	`upd©e_Ï¡_aùiv™y
(
$u£r_d©a
['u£r_id'], $this->
cu¼’t
);

1561 
$d©a
=
	`¬¿y
(

1562 'u£r_id'=>
$u£r_d©a
['user_id'],

1563 'di¥Ïy_Çme'=>
$u£r_d©a
['display_name'],

1564 'ü—‹_time'=>
$this
->
cu¼’t
,

1567 
$this
->
m_Úlše
->
	`add_Úlše
(
$d©a
);

1569 
$u£r_d©a
=
	`£rŸlize
($user_data);

1571 
$this
->
ÿche
->
	`§ve
(
$tok’
,
$u£r_d©a
,3000000);

1572  
	`un£rŸlize
(
$u£r_d©a
);

1575  
FALSE
;

1576 
	}
}

1583 
funùiÚ
 
upd©e_Ï¡_aùiv™y
(
$u£r_id
,
$Ï¡_aùiv™y
,
$Ï‹¡_upd©e
=""){

1584 
$this
->
lßd
->
mod–
('m_user');

1585 
	g$this
->
	gm_u£r
->
upd©e_Ï¡_aùiv™y
(
$u£r_id
,
$Ï¡_aùiv™y
);

1586 if(!
em±y
(
$Ï‹¡_upd©e
)){

1587 
	g$d©a
['u£r_id']=
$u£r_id
;

1588 
	g$d©a
['meta_key']='latest_update';

1589 
	g$d©a
['m‘a_v®ue']=
$Ï‹¡_upd©e
;

1590 
	g$this
->
	gm_u£r
->
add_u£r_m‘a
(
$d©a
);

1602 
funùiÚ
 
	$ü—‹_®bum
(
$u£r_id
,
$®bum_Çme
,
$®bum_de¡rtiÚ
,
$®bum_·sswÜd
=
NULL
){

1603 
$this
->
lßd
->
	`mod–
('m_album');

1604 
$d©a
['®bum_Çme']=
$®bum_Çme
;

1605 
$d©a
['u£r_id']=
$u£r_id
;

1606 
$d©a
['®bum_de¡rtiÚ']=
$®bum_de¡rtiÚ
;

1607 
$d©a
['ü—‹_time']=
	`time
();

1608 
$d©a
['picture_count']=0;

1609 
$d©a
['album_visible']=0;

1610 if(!
	`is_nuÎ
(
$®bum_·sswÜd
))

1611 
$d©a
['®bum_·sswÜd']=
	`md5
(
$®bum_·sswÜd
);

1613 
$num
=
$this
->
m_®bum
->
	`add_®bum
(
$d©a
);

1614  
$num
;

1615 
	}
}

1624 
funùiÚ
 
	$£nd_nÙify
(
$äom_id
,
$to_id
,
$nÙify_ty³
,
$nÙify_ty³_id
,
$nÙify_cÚ‹Á
){

1625 
$this
->
lßd
->
	`mod–
('m_notify');

1626 
$d©a
['äom_id']=
$äom_id
;

1627 
$d©a
['to_id']=
$to_id
;

1628 
$d©a
['nÙify_ty³']=
$nÙify_ty³
;

1629 
$d©a
['nÙify_ty³_id']=
$nÙify_ty³_id
;

1630 
$d©a
['nÙify_cÚ‹Á']=
$nÙify_cÚ‹Á
;

1631 
$d©a
['is_read']=0;

1632 
$d©a
['ü—‹_time']=
$this
->
cu¼’t
;

1634 
$num
=
$this
->
m_nÙify
->
	`add_nÙify
(
$d©a
);

1635  
$num
;

1636 
	}
}

1642 
funùiÚ
 
	$igniÜe_nÙify
(
$nÙify_id
){

1643 
$this
->
lßd
->
	`mod–
('m_notify');

1644  
$this
->
m_nÙify
->
	`ignÜe_nÙify
(
$nÙify_id
);

1645 
	}
}

1652 
funùiÚ
 
	$g‘_u£rs_»ÏtiÚsh
(
$äom_id
,
$to_id
){

1653 if(
$äom_id
==
$to_id
)

1655 
$this
->
lßd
->
	`mod–
('m_friend');

1656 if(
$this
->
m_ä›nd
->
	`g‘_ä›ndsh_id_by_u£r_id
(
$äom_id
, 
$to_id
))

1660 
	}
}

	@application/core/WE_Controller.php

1 <?
php


9 şas 
	cWE_CÚŒŞËr
 
ex‹nds
 
	mCI_CÚŒŞËr


11 
v¬
 
	m$d©a
;

12 
v¬
 
	m$ÿÎbacks
 = 
¬¿y
();

13 
v¬
 
	m$mes§ge
;

14 
v¬
 
	m$ÿ·b™›s
;

22 
funùiÚ
 
	$__cÚ¡ruù
(
$ÿÎbacks
 = 
çl£
, 
$d©a
 = f®£, 
$wa™
 = false)

24 
·»Á
::
	`__cÚ¡ruù
();

25 
$this
->
lßd
->
	`h–³r
(
	`¬¿y
('check','email','ixr_xmlrpc'));

27 
$this
->
	`£tC­ab™›s
();

30 ià(
$ÿÎbacks
) {

31 
$this
->
ÿÎbacks
 = 
$ÿÎbacks
;

35 
$this
->
	`£tC®lbacks
();

38 ià(!
$wa™
) {

39 
$this
->
	`£rve
(
$d©a
);

43 
funùiÚ
 
	$£rve
(
$d©a
 = 
çl£
)

46 ià(!
$d©a
) {

49 ià(
	`is£t
(
$_SERVER
['REQUEST_METHOD']) && $_SERVER['REQUEST_METHOD'] !== 'POST') {

50 
	`h—d”
('Content-Type:ext/plain');

51 
	`d›
('XML-RPC server‡ccepts POST„equests only.');

55 
glob®
 
$HTTP_RAW_POST_DATA
;

57 ià(
	`em±y
(
$HTTP_RAW_POST_DATA
)) {

59 
$d©a
 = 
	`fe_g‘_cÚ‹Ás
('php://input');

61 
$d©a
 =& 
$HTTP_RAW_POST_DATA
;

66 
$this
->
mes§ge
 = 
Ãw
 
	`IXR_Mes§ge
(
$d©a
);

72 ià(!
$this
->
mes§ge
->
	`·r£
()) {

74 
	`log_mes§ge
("”rÜ","»que¡_ç:".
$this
->
mes§ge
);

75 
$this
->
	`”rÜ
(-32700, 'parseƒrror.‚ot well formed');

77 
	`log_mes§ge
("”rÜ","»que¡_sucûss:".
$this
->
mes§ge
->
m‘hodName
);

78 
	`log_mes§ge
("”rÜ",
	`£rŸlize
(
$this
->
mes§ge
->
·¿ms
));

81 ià(
$this
->
mes§ge
->
mes§geTy³
 != 'methodCall') {

82 
$this
->
	`”rÜ
(-32600, 'serverƒrror. invalid xml-rpc.‚ot conformingo spec. Request must be‡ methodCall');

85 
$»suÉ
 = 
$this
->
	`ÿÎ
($this->
mes§ge
->
m‘hodName
, $this->mes§ge->
·¿ms
);

88 ià(
	`is_a
(
$»suÉ
, 'IXR_Error')) {

89 
$this
->
	`”rÜ
(
$»suÉ
);

93 
$r
 = 
Ãw
 
	`IXR_V®ue
(
$»suÉ
);

94 
$»suÉxml
 = 
$r
->
	`g‘Xml
();

97 
$xml
 = <<<
EOD


98 <
m‘hodRe¥Ú£
>

99 <
·¿ms
>

100 <
·¿m
>

101 <
v®ue
>

102 
$»suÉxml


103 </
v®ue
>

104 </
·¿m
>

105 </
·¿ms
>

106 </
m‘hodRe¥Ú£
>

108 
EOD
;

110 
$this
->
	`ouut
(
$xml
);

111 
	}
}

114 
funùiÚ
 
	$ÿÎ
(
$m‘hodÇme
, 
$¬gs
)

117 ià(!
$this
->
	`hasM‘hod
(
$m‘hodÇme
)) {

118  
Ãw
 
	`IXR_E¼Ü
(-32601, '£rv”ƒ¼Ü.„eque¡ed m‘hod '.
$m‘hodÇme
.' does‚otƒxist.');

121 
$m‘hod
 = 
$this
->
ÿÎbacks
[
$m‘hodÇme
];

125 ià(
	`couÁ
(
$¬gs
) == 1) {

127 
$¬gs
 = $args[0];

132 ià(
	`is_¡ršg
(
$m‘hod
è&& 
	`sub¡r
($method, 0, 5) == 'this:') {

135 
$m‘hod
 = 
	`sub¡r
($method, 5);

138 ià(!
	`m‘hod_exi¡s
(
$this
, 
$m‘hod
)) {

139  
Ãw
 
	`IXR_E¼Ü
(-32601, '£rv”ƒ¼Ü.„eque¡ed cÏs m‘hod "'.
$m‘hod
.'" does‚otƒxist.');

144 
$»suÉ
 = 
$this
->
	`$m‘hod
(
$¬gs
);

147 ià(
	`is_¬¿y
(
$m‘hod
)) {

148 ià(!
	`is_ÿÎabË
(
	`¬¿y
(
$m‘hod
[0], $method[1]))) {

149  
Ãw
 
	`IXR_E¼Ü
(-32601, '£rv”ƒ¼Ü.„eque¡ed objeù m‘hod "'.
$m‘hod
[1].'" does‚otƒxist.');

151 } ià(!
	`funùiÚ_exi¡s
(
$m‘hod
)) {

152  
Ãw
 
	`IXR_E¼Ü
(-32601, '£rv”ƒ¼Ü.„eque¡ed funùiÚ "'.
$m‘hod
.'" does‚otƒxist.');

156 
$»suÉ
 = 
	`ÿÎ_u£r_func
(
$m‘hod
, 
$¬gs
);

159  
$»suÉ
;

160 
	}
}

162 
funùiÚ
 
	$”rÜ
(
$”rÜ
, 
$mes§ge
 = 
çl£
)

165 ià(
$mes§ge
 && !
	`is_objeù
(
$”rÜ
)) {

166 
$”rÜ
 = 
Ãw
 
	`IXR_E¼Ü
($”rÜ, 
$mes§ge
);

168 
$this
->
	`ouut
(
$”rÜ
->
	`g‘Xml
());

169 
	}
}

171 
funùiÚ
 
	$ouut
(
$xml
)

173 
$xml
 = '<?xml version="1.0"?>'."\n".$xml;

174 
$Ëngth
 = 
	`¡¾’
(
$xml
);

175 
	`h—d”
('Connection: close');

176 
	`h—d”
('CÚ‹Á-L’gth: '.
$Ëngth
);

177 
	`h—d”
('Content-Type:ext/xml');

178 
	`h—d”
('D©e: '.
	`d©e
('r'));

179 
echo
 
$xml
;

180 
ex™
;

181 
	}
}

183 
funùiÚ
 
	$hasM‘hod
(
$m‘hod
)

185  
	`š_¬¿y
(
$m‘hod
, 
	`¬¿y_keys
(
$this
->
ÿÎbacks
));

186 
	}
}

191 
funùiÚ
 
	$£tC­ab™›s
()

194 
$this
->
ÿ·b™›s
 = 
	`¬¿y
(

195 'xmÌpc' => 
	`¬¿y
(

199 'çuÉs_š‹rİ' => 
	`¬¿y
(

203 'sy¡em.muÉiÿÎ' => 
	`¬¿y
(

208 
	}
}

215 
funùiÚ
 
	$g‘C­ab™›s
(
$¬gs
)

217  
$this
->
ÿ·b™›s
;

218 
	}
}

223 
funùiÚ
 
	$£tC®lbacks
()

227 
$this
->
ÿÎbacks
['system.getCapabilities'] = 'this:getCapabilities';

229 
$this
->
ÿÎbacks
['system.listMethods'] = 'this:listMethods';

231 
$this
->
ÿÎbacks
['system.multicall'] = 'this:multiCall';

232 
	}
}

239 
funùiÚ
 
	$li¡M‘hods
(
$¬gs
)

244  
	`¬¿y_»v”£
(
	`¬¿y_keys
(
$this
->
ÿÎbacks
));

245 
	}
}

252 
funùiÚ
 
	$muÉiC®l
(
$m‘hodÿÎs
)

255 
$»tuº
 = 
	`¬¿y
();

256 
	`fÜ—ch
 (
$m‘hodÿÎs
 
as
 
$ÿÎ
) {

257 
$m‘hod
 = 
$ÿÎ
['methodName'];

258 
$·¿ms
 = 
$ÿÎ
['params'];

259 ià(
$m‘hod
 == 'system.multicall') {

260 
$»suÉ
 = 
Ãw
 
	`IXR_E¼Ü
(-32600, 'Recursive callso system.multicall‡re forbidden');

262 
$»suÉ
 = 
$this
->
	`ÿÎ
(
$m‘hod
, 
$·¿ms
);

264 ià(
	`is_a
(
$»suÉ
, 'IXR_Error')) {

265 
$»tuº
[] = 
	`¬¿y
(

266 'çuÉCode' => 
$»suÉ
->
code
,

267 'çuÉSŒšg' => 
$»suÉ
->
mes§ge


270 
$»tuº
[] = 
	`¬¿y
(
$»suÉ
);

273  
$»tuº
;

274 
	}
}

	@application/errors/error_404.php

1 <!
DOCTYPE
 
	ghtml
>

2 <
html
 
	gÏng
="en">

3 <
h—d
>

4 <
t™Ë
>404 
Page
 
NÙ
 
Found
</title>

5 <
¡yË
 
ty³
="text/css">

7 ::
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

8 ::
moz
-
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

9 ::
webk™
-
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

11 
	gbody
 {

12 
	gbackground
-
	gcŞÜ
: #fff;

13 
	gm¬gš
: 40
px
;

14 
	gfÚt
: 13
px
/20px 
nÜm®
 
H–v‘iÿ
, 
	gArŸl
, 
	g§ns
-
	g£rif
;

15 
	gcŞÜ
: #4
F5155
;

18 
	ga
 {

19 
	gcŞÜ
: #003399;

20 
	gbackground
-
	gcŞÜ
: 
Œª¥¬’t
;

21 
	gfÚt
-
	gweight
: 
nÜm®
;

24 
	gh1
 {

25 
	gcŞÜ
: #444;

26 
	gbackground
-
	gcŞÜ
: 
Œª¥¬’t
;

27 
	gbÜd”
-
	gbÙtom
: 1
px
 
sŞid
 #D0D0D0;

28 
	gfÚt
-
	gsize
: 19
px
;

29 
	gfÚt
-
	gweight
: 
nÜm®
;

30 
	gm¬gš
: 0 0 14
px
 0;

31 
	g·ddšg
: 14
px
 15px 10px 15px;

34 
	gcode
 {

35 
	gfÚt
-
	gçmy
: 
CÚsŞas
, 
	gMÚaco
, 
Cour›r
 
	gNew
, 
	gCour›r
, 
	gmÚo¥aû
;

36 
	gfÚt
-
	gsize
: 12
px
;

37 
	gbackground
-
	gcŞÜ
: #f9f9f9;

38 
	gbÜd”
: 1
px
 
sŞid
 #D0D0D0;

39 
	gcŞÜ
: #002166;

40 
	gdi¥Ïy
: 
block
;

41 
	gm¬gš
: 14
px
 0 14px 0;

42 
	g·ddšg
: 12
px
 10px 12px 10px;

46 
	gm¬gš
: 10
px
;

47 
	gbÜd”
: 1
px
 
sŞid
 #D0D0D0;

48 -
	gwebk™
-
	gbox
-
	gshadow
: 0 0 8
px
 #D0D0D0;

51 
	gp
 {

52 
	gm¬gš
: 12
px
 15px 12px 15px;

54 </
	g¡yË
>

55 </
	gh—d
>

56 <
	gbody
>

57 <
div
 
	gid
="container">

58 <
h1
><?
php
 
echo
 
$h—dšg
; ?></
	gh1
>

59 <?
php
 
echo
 
	g$mes§ge
; ?>

60 </
	gdiv
>

61 </
	gbody
>

62 </
	ghtml
>

	@application/errors/error_db.php

1 <!
DOCTYPE
 
	ghtml
>

2 <
html
 
	gÏng
="en">

3 <
h—d
>

4 <
t™Ë
>
D©aba£
 
E¼Ü
</title>

5 <
¡yË
 
ty³
="text/css">

7 ::
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

8 ::
moz
-
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

9 ::
webk™
-
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

11 
	gbody
 {

12 
	gbackground
-
	gcŞÜ
: #fff;

13 
	gm¬gš
: 40
px
;

14 
	gfÚt
: 13
px
/20px 
nÜm®
 
H–v‘iÿ
, 
	gArŸl
, 
	g§ns
-
	g£rif
;

15 
	gcŞÜ
: #4
F5155
;

18 
	ga
 {

19 
	gcŞÜ
: #003399;

20 
	gbackground
-
	gcŞÜ
: 
Œª¥¬’t
;

21 
	gfÚt
-
	gweight
: 
nÜm®
;

24 
	gh1
 {

25 
	gcŞÜ
: #444;

26 
	gbackground
-
	gcŞÜ
: 
Œª¥¬’t
;

27 
	gbÜd”
-
	gbÙtom
: 1
px
 
sŞid
 #D0D0D0;

28 
	gfÚt
-
	gsize
: 19
px
;

29 
	gfÚt
-
	gweight
: 
nÜm®
;

30 
	gm¬gš
: 0 0 14
px
 0;

31 
	g·ddšg
: 14
px
 15px 10px 15px;

34 
	gcode
 {

35 
	gfÚt
-
	gçmy
: 
CÚsŞas
, 
	gMÚaco
, 
Cour›r
 
	gNew
, 
	gCour›r
, 
	gmÚo¥aû
;

36 
	gfÚt
-
	gsize
: 12
px
;

37 
	gbackground
-
	gcŞÜ
: #f9f9f9;

38 
	gbÜd”
: 1
px
 
sŞid
 #D0D0D0;

39 
	gcŞÜ
: #002166;

40 
	gdi¥Ïy
: 
block
;

41 
	gm¬gš
: 14
px
 0 14px 0;

42 
	g·ddšg
: 12
px
 10px 12px 10px;

46 
	gm¬gš
: 10
px
;

47 
	gbÜd”
: 1
px
 
sŞid
 #D0D0D0;

48 -
	gwebk™
-
	gbox
-
	gshadow
: 0 0 8
px
 #D0D0D0;

51 
	gp
 {

52 
	gm¬gš
: 12
px
 15px 12px 15px;

54 </
	g¡yË
>

55 </
	gh—d
>

56 <
	gbody
>

57 <
div
 
	gid
="container">

58 <
h1
><?
php
 
echo
 
$h—dšg
; ?></
	gh1
>

59 <?
php
 
echo
 
	g$mes§ge
; ?>

60 </
	gdiv
>

61 </
	gbody
>

62 </
	ghtml
>

	@application/errors/error_general.php

1 <!
DOCTYPE
 
	ghtml
>

2 <
html
 
	gÏng
="en">

3 <
h—d
>

4 <
t™Ë
>
E¼Ü
</title>

5 <
¡yË
 
ty³
="text/css">

7 ::
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

8 ::
moz
-
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

9 ::
webk™
-
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

11 
	gbody
 {

12 
	gbackground
-
	gcŞÜ
: #fff;

13 
	gm¬gš
: 40
px
;

14 
	gfÚt
: 13
px
/20px 
nÜm®
 
H–v‘iÿ
, 
	gArŸl
, 
	g§ns
-
	g£rif
;

15 
	gcŞÜ
: #4
F5155
;

18 
	ga
 {

19 
	gcŞÜ
: #003399;

20 
	gbackground
-
	gcŞÜ
: 
Œª¥¬’t
;

21 
	gfÚt
-
	gweight
: 
nÜm®
;

24 
	gh1
 {

25 
	gcŞÜ
: #444;

26 
	gbackground
-
	gcŞÜ
: 
Œª¥¬’t
;

27 
	gbÜd”
-
	gbÙtom
: 1
px
 
sŞid
 #D0D0D0;

28 
	gfÚt
-
	gsize
: 19
px
;

29 
	gfÚt
-
	gweight
: 
nÜm®
;

30 
	gm¬gš
: 0 0 14
px
 0;

31 
	g·ddšg
: 14
px
 15px 10px 15px;

34 
	gcode
 {

35 
	gfÚt
-
	gçmy
: 
CÚsŞas
, 
	gMÚaco
, 
Cour›r
 
	gNew
, 
	gCour›r
, 
	gmÚo¥aû
;

36 
	gfÚt
-
	gsize
: 12
px
;

37 
	gbackground
-
	gcŞÜ
: #f9f9f9;

38 
	gbÜd”
: 1
px
 
sŞid
 #D0D0D0;

39 
	gcŞÜ
: #002166;

40 
	gdi¥Ïy
: 
block
;

41 
	gm¬gš
: 14
px
 0 14px 0;

42 
	g·ddšg
: 12
px
 10px 12px 10px;

46 
	gm¬gš
: 10
px
;

47 
	gbÜd”
: 1
px
 
sŞid
 #D0D0D0;

48 -
	gwebk™
-
	gbox
-
	gshadow
: 0 0 8
px
 #D0D0D0;

51 
	gp
 {

52 
	gm¬gš
: 12
px
 15px 12px 15px;

54 </
	g¡yË
>

55 </
	gh—d
>

56 <
	gbody
>

57 <
div
 
	gid
="container">

58 <
h1
><?
php
 
echo
 
$h—dšg
; ?></
	gh1
>

59 <?
php
 
echo
 
	g$mes§ge
; ?>

60 </
	gdiv
>

61 </
	gbody
>

62 </
	ghtml
>

	@application/errors/error_php.php

1 <
div
 
	g¡yË
="border:1px solid #990000;padding-left:20px;margin:0 0 10px 0;">

3 <
h4
>
A
 
PHP
 
E¼Ü
 
was
 
’couÁ”ed
</h4>

5 <
p
>
Sev”™y
: <?
php
 
echo
 
$£v”™y
; ?></
	gp
>

6 <
	gp
>
	gMes§ge
: <?
php
 
echo
 
$mes§ge
; ?></p>

7 <
	gp
>
	gF’ame
: <?
php
 
echo
 
$f•©h
; ?></p>

8 <
	gp
>
Lše
 
	gNumb”
: <?
php
 
echo
 
$lše
; ?></p>

10 </
	gdiv
>

	@application/helpers/album_helper.php

1 <?
php


7 
funùiÚ
 
	$ü—‹_u£r_dœ
(
$u£r_id
){

8 if(!
	`fe_exi¡s
('u¶ßd/'.
$u£r_id
))

9 
	`mkdœ
('u¶ßd/'.
$u£r_id
);

10 
	}
}

	@application/helpers/check_helper.php

1 <?
php


6 
funùiÚ
 
	$v®id_·sswÜd
(
$·sswÜd
){

7 if(
	`is_¡ršg
(
$·sswÜd
)){

8  
	`´eg_m©ch
("|^[a-zA-Z0-9]{6,20}$|", 
$·sswÜd
);

10  
FALSE
;

11 
	}
}

13 
funùiÚ
 
	$v®id_»®_Çme
(
$»®_Çme
){

14 if(
	`is_¡ršg
(
$»®_Çme
)){

15  
	`´eg_m©ch
("/^[\x{4e00}-\x{9ç5}‡-zA-Z0-9]{2,10}+$/u", 
$»®_Çme
);

17  
FALSE
;

18 
	}
}

20 
funùiÚ
 
	$v®id_blu‘oÙh_Çme
(
$blu‘oÙh_Çme
){

21 if(
	`is_¡ršg
(
$blu‘oÙh_Çme
)){

22  
	`´eg_m©ch
("/^[\x{4e00}-\x{9ç5}‡-zA-Z0-9]{2,10}+$/u", 
$blu‘oÙh_Çme
);

24  
FALSE
;

25 
	}
}

27 
funùiÚ
 
	$v®id_blu‘oÙh_mac
(
$blu‘oÙh_mac
){

28 if(
	`is_¡ršg
(
$blu‘oÙh_mac
)){

29  
	`´eg_m©ch
("|^[a-zA-Z0-9]{12}$|", 
$blu‘oÙh_mac
);

31  
FALSE
;

32 
	}
}

	@application/helpers/ixr_xmlrpc_helper.php

1 <?
php


48 şas 
	cIXR_V®ue
 {

49 
v¬
 
	m$d©a
;

50 
v¬
 
	m$ty³
;

52 
funùiÚ
 
	$IXR_V®ue
(
$d©a
, 
$ty³
 = 
çl£
)

54 
$this
->
d©a
 = 
$d©a
;

55 ià(!
$ty³
) {

56 
$ty³
 = 
$this
->
	`ÿlcuÏ‹Ty³
();

58 
$this
->
ty³
 = 
$ty³
;

59 ià(
$ty³
 == 'struct') {

61 
	`fÜ—ch
 (
$this
->
d©a
 
as
 
$key
 => 
$v®ue
) {

62 
$this
->
d©a
[
$key
] = 
Ãw
 
	`IXR_V®ue
(
$v®ue
);

65 ià(
$ty³
 == 'array') {

66 
$i
 = 0, 
$j
 = 
	`couÁ
(
$this
->
d©a
); $i < $j; $i++) {

67 
$this
->
d©a
[
$i
] = 
Ãw
 
	`IXR_V®ue
($this->data[$i]);

72 
funùiÚ
 
	$ÿlcuÏ‹Ty³
()

74 ià(
$this
->
d©a
 ==ğ
Œue
 || $this->d©¨==ğ
çl£
) {

77 ià(
	`is_š‹g”
(
$this
->
d©a
)) {

80 ià(
	`is_doubË
(
$this
->
d©a
)) {

85 ià(
	`is_objeù
(
$this
->
d©a
è&& 
	`is_a
($this->data, 'IXR_Date')) {

88 ià(
	`is_objeù
(
$this
->
d©a
è&& 
	`is_a
($this->data, 'IXR_Base64')) {

93 ià(
	`is_objeù
(
$this
->
d©a
)) {

94 
$this
->
d©a
 = 
	`g‘_objeù_v¬s
($this->data);

97 ià(!
	`is_¬¿y
(
$this
->
d©a
)) {

102 ià(
$this
->
	`isSŒuù
($this->
d©a
)) {

107 
	}
}

109 
funùiÚ
 
	$g‘Xml
()

112 
$this
->
ty³
) {

114  '<boŞ—n>'.((
$this
->
d©a
) ? '1' : '0').'</boolean>';

117  '<št>'.
$this
->
d©a
.'</int>';

120  '<doubË>'.
$this
->
d©a
.'</double>';

123  '<¡ršg>'.
	`html¥ecŸlch¬s
(
$this
->
d©a
).'</string>';

126 
$»tuº
 = '<array><data>'."\n";

127 
	`fÜ—ch
 (
$this
->
d©a
 
as
 
$™em
) {

128 
$»tuº
 .ğ' <v®ue>'.
$™em
->
	`g‘Xml
()."</value>\n";

130 
$»tuº
 .= '</data></array>';

131  
$»tuº
;

134 
$»tuº
 = '<struct>'."\n";

135 
	`fÜ—ch
 (
$this
->
d©a
 
as
 
$Çme
 => 
$v®ue
) {

136 
$Çme
 = 
	`html¥ecŸlch¬s
($name);

137 
$»tuº
 .= " <member><name>$name</name><value>";

138 
$»tuº
 .ğ
$v®ue
->
	`g‘Xml
()."</value></member>\n";

140 
$»tuº
 .= '</struct>';

141  
$»tuº
;

145  
$this
->
d©a
->
	`g‘Xml
();

148  
çl£
;

149 
	}
}

157 
funùiÚ
 
	$isSŒuù
(
$¬¿y
)

159 
$ex³ùed
 = 0;

160 
	`fÜ—ch
 (
$¬¿y
 
as
 
$key
 => 
$v®ue
) {

161 ià((
¡ršg
)
$key
 !ğ(¡ršg)
$ex³ùed
) {

162  
Œue
;

164 
$ex³ùed
++;

166  
çl£
;

167 
	}
}

177 şas 
	cIXR_Mes§ge


179 
v¬
 
	m$mes§ge
;

180 
v¬
 
	m$mes§geTy³
;

181 
v¬
 
	m$çuÉCode
;

182 
v¬
 
	m$çuÉSŒšg
;

183 
v¬
 
	m$m‘hodName
;

184 
v¬
 
	m$·¿ms
;

187 
v¬
 
	m$_¬¿y¡ruùs
 = 
¬¿y
();

188 
v¬
 
	m$_¬¿y¡ruù¡y³s
 = 
¬¿y
();

189 
v¬
 
	m$_cu¼’tSŒuùName
 = 
¬¿y
();

190 
v¬
 
	m$_·¿m
;

191 
v¬
 
	m$_v®ue
;

192 
v¬
 
	m$_cu¼’tTag
;

193 
v¬
 
	m$_cu¼’tTagCÚ‹Ás
;

195 
v¬
 
	m$_·r£r
;

197 
funùiÚ
 
	$IXR_Mes§ge
(
$mes§ge
)

200 
$this
->
mes§ge
 =& 
$mes§ge
;

204 
funùiÚ
 
	$·r£
()

209 
$h—d”
 = 
	`´eg_»¶aû
Ğ'/<\?xml.*?\?'.'>/', '', 
	`sub¡r
(
$this
->
mes§ge
, 0, 100), 1);

211 
$this
->
mes§ge
 = 
	`sub¡r_»¶aû
($this->mes§ge, 
$h—d”
, 0, 100);

213 ià(
	`Œim
(
$this
->
mes§ge
) == '') {

214  
çl£
;

218 
$this
->
_·r£r
 = 
	`xml_·r£r_ü—‹
();

221 
	`xml_·r£r_£t_İtiÚ
(
$this
->
_·r£r
, 
XML_OPTION_CASE_FOLDING
, 
çl£
);

224 
	`xml_£t_objeù
(
$this
->
_·r£r
, $this);

226 
	`xml_£t_–em’t_hªdËr
(
$this
->
_·r£r
, 'tag_open', 'tag_close');

228 
	`xml_£t_ch¬aù”_d©a_hªdËr
(
$this
->
_·r£r
, 'cdata');

230 
$chunk_size
 = 262144;

231 
$fš®
 = 
çl£
;

234 ià(
	`¡¾’
(
$this
->
mes§ge
è<ğ
$chunk_size
) {

235 
$fš®
 = 
Œue
;

238 
$·¹
 = 
	`sub¡r
(
$this
->
mes§ge
, 0, 
$chunk_size
);

240 
$this
->
mes§ge
 = 
	`sub¡r
($this->mes§ge, 
$chunk_size
);

242 ià(!
	`xml_·r£
(
$this
->
_·r£r
, 
$·¹
, 
$fš®
)) {

243  
çl£
;

245 ià(
$fš®
) {

248 } 
Œue
);

250 
	`xml_·r£r_ä“
(
$this
->
_·r£r
);

253 ià(
$this
->
mes§geTy³
 == 'fault') {

254 
$this
->
çuÉCode
 = $this->
·¿ms
[0]['faultCode'];

255 
$this
->
çuÉSŒšg
 = $this->
·¿ms
[0]['faultString'];

257  
Œue
;

258 
	}
}

261 
funùiÚ
 
	$g_İ’
(
$·r£r
, 
$g
, 
$©Œ
)

263 
$this
->
_cu¼’tTagCÚ‹Ás
 = '';

264 
$this
->
cu¼’tTag
 = 
$g
;

265 
$g
) {

269 
$this
->
mes§geTy³
 = 
$g
;

273 
$this
->
_¬¿y¡ruù¡y³s
[] = 'array';

274 
$this
->
_¬¿y¡ruùs
[] = 
	`¬¿y
();

277 
$this
->
_¬¿y¡ruù¡y³s
[] = 'struct';

278 
$this
->
_¬¿y¡ruùs
[] = 
	`¬¿y
();

281 
	}
}

283 
funùiÚ
 
	$cd©a
(
$·r£r
, 
$cd©a
)

285 
$this
->
_cu¼’tTagCÚ‹Ás
 .ğ
$cd©a
;

286 
	}
}

289 
funùiÚ
 
	$g_şo£
(
$·r£r
, 
$g
)

291 
$v®ueFÏg
 = 
çl£
;

292 
$g
) {

295 
$v®ue
 = ()
	`Œim
(
$this
->
_cu¼’tTagCÚ‹Ás
);

296 
$v®ueFÏg
 = 
Œue
;

299 
$v®ue
 = ()
	`Œim
(
$this
->
_cu¼’tTagCÚ‹Ás
);

300 
$v®ueFÏg
 = 
Œue
;

303 
$v®ue
 = (
¡ršg
)
	`Œim
(
$this
->
_cu¼’tTagCÚ‹Ás
);

304 
$v®ueFÏg
 = 
Œue
;

307 
$v®ue
 = 
Ãw
 
	`IXR_D©e
(
	`Œim
(
$this
->
_cu¼’tTagCÚ‹Ás
));

308 
$v®ueFÏg
 = 
Œue
;

312 ià(
	`Œim
(
$this
->
_cu¼’tTagCÚ‹Ás
) != '') {

313 
$v®ue
 = (
¡ršg
)
$this
->
_cu¼’tTagCÚ‹Ás
;

314 
$v®ueFÏg
 = 
Œue
;

318 
$v®ue
 = (
boŞ—n
)
	`Œim
(
$this
->
_cu¼’tTagCÚ‹Ás
);

319 
$v®ueFÏg
 = 
Œue
;

322 
$v®ue
 = 
	`ba£64_decode
(
$this
->
_cu¼’tTagCÚ‹Ás
);

323 
$v®ueFÏg
 = 
Œue
;

328 
$v®ue
 = 
	`¬¿y_pİ
(
$this
->
_¬¿y¡ruùs
);

329 
	`¬¿y_pİ
(
$this
->
_¬¿y¡ruù¡y³s
);

330 
$v®ueFÏg
 = 
Œue
;

333 
	`¬¿y_pİ
(
$this
->
_cu¼’tSŒuùName
);

336 
$this
->
_cu¼’tSŒuùName
[] = 
	`Œim
($this->
_cu¼’tTagCÚ‹Ás
);

339 
$this
->
m‘hodName
 = 
	`Œim
($this->
_cu¼’tTagCÚ‹Ás
);

343 ià(
$v®ueFÏg
) {

344 ià(
	`couÁ
(
$this
->
_¬¿y¡ruùs
) > 0) {

346 ià(
$this
->
_¬¿y¡ruù¡y³s
[
	`couÁ
($this->_arraystructstypes)-1] == 'struct') {

348 
$this
->
_¬¿y¡ruùs
[
	`couÁ
($this->_¬¿y¡ruùs)-1][$this->
_cu¼’tSŒuùName
[couÁ($this->_cu¼’tSŒuùName)-1]] = 
$v®ue
;

351 
$this
->
_¬¿y¡ruùs
[
	`couÁ
($this->_¬¿y¡ruùs)-1][] = 
$v®ue
;

355 
$this
->
·¿ms
[] = 
$v®ue
;

358 
$this
->
_cu¼’tTagCÚ‹Ás
 = '';

359 
	}
}

368 şas 
	cIXR_S”v”


370 
v¬
 
	m$d©a
;

371 
v¬
 
	m$ÿÎbacks
 = 
¬¿y
();

372 
v¬
 
	m$mes§ge
;

373 
v¬
 
	m$ÿ·b™›s
;

375 
funùiÚ
 
	$IXR_S”v”
(
$ÿÎbacks
 = 
çl£
, 
$d©a
 = f®£, 
$wa™
 = false)

377 
$this
->
	`£tC­ab™›s
();

378 ià(
$ÿÎbacks
) {

379 
$this
->
ÿÎbacks
 = 
$ÿÎbacks
;

381 
$this
->
	`£tC®lbacks
();

382 ià(!
$wa™
) {

383 
$this
->
	`£rve
(
$d©a
);

387 
funùiÚ
 
	$£rve
(
$d©a
 = 
çl£
)

389 ià(!
$d©a
) {

390 ià(
	`is£t
(
$_SERVER
['REQUEST_METHOD']) && $_SERVER['REQUEST_METHOD'] !== 'POST') {

391 
	`h—d”
('Content-Type:ext/plain');

392 
	`d›
('XML-RPC server‡ccepts POST„equests only.');

395 
glob®
 
$HTTP_RAW_POST_DATA
;

396 ià(
	`em±y
(
$HTTP_RAW_POST_DATA
)) {

398 
$d©a
 = 
	`fe_g‘_cÚ‹Ás
('php://input');

400 
$d©a
 =& 
$HTTP_RAW_POST_DATA
;

403 
$this
->
mes§ge
 = 
Ãw
 
	`IXR_Mes§ge
(
$d©a
);

404 ià(!
$this
->
mes§ge
->
	`·r£
()) {

405 
$this
->
	`”rÜ
(-32700, 'parseƒrror.‚ot well formed');

407 ià(
$this
->
mes§ge
->
mes§geTy³
 != 'methodCall') {

408 
$this
->
	`”rÜ
(-32600, 'serverƒrror. invalid xml-rpc.‚ot conformingo spec. Request must be‡ methodCall');

410 
$»suÉ
 = 
$this
->
	`ÿÎ
($this->
mes§ge
->
m‘hodName
, $this->mes§ge->
·¿ms
);

413 ià(
	`is_a
(
$»suÉ
, 'IXR_Error')) {

414 
$this
->
	`”rÜ
(
$»suÉ
);

418 
$r
 = 
Ãw
 
	`IXR_V®ue
(
$»suÉ
);

419 
$»suÉxml
 = 
$r
->
	`g‘Xml
();

422 
$xml
 = <<<
EOD


423 <
m‘hodRe¥Ú£
>

424 <
·¿ms
>

425 <
·¿m
>

426 <
v®ue
>

427 
$»suÉxml


428 </
v®ue
>

429 </
·¿m
>

430 </
·¿ms
>

431 </
m‘hodRe¥Ú£
>

433 
EOD
;

435 
$this
->
	`ouut
(
$xml
);

436 
	}
}

438 
funùiÚ
 
	$ÿÎ
(
$m‘hodÇme
, 
$¬gs
)

440 ià(!
$this
->
	`hasM‘hod
(
$m‘hodÇme
)) {

441  
Ãw
 
	`IXR_E¼Ü
(-32601, '£rv”ƒ¼Ü.„eque¡ed m‘hod '.
$m‘hodÇme
.' does‚otƒxist.');

443 
$m‘hod
 = 
$this
->
ÿÎbacks
[
$m‘hodÇme
];

446 ià(
	`couÁ
(
$¬gs
) == 1) {

448 
$¬gs
 = $args[0];

452 ià(
	`is_¡ršg
(
$m‘hod
è&& 
	`sub¡r
($method, 0, 5) == 'this:') {

454 
$m‘hod
 = 
	`sub¡r
($method, 5);

455 ià(!
	`m‘hod_exi¡s
(
$this
, 
$m‘hod
)) {

456  
Ãw
 
	`IXR_E¼Ü
(-32601, '£rv”ƒ¼Ü.„eque¡ed cÏs m‘hod "'.
$m‘hod
.'" does‚otƒxist.');

460 
$»suÉ
 = 
$this
->
	`$m‘hod
(
$¬gs
);

463 ià(
	`is_¬¿y
(
$m‘hod
)) {

464 ià(!
	`is_ÿÎabË
(
	`¬¿y
(
$m‘hod
[0], $method[1]))) {

465  
Ãw
 
	`IXR_E¼Ü
(-32601, '£rv”ƒ¼Ü.„eque¡ed objeù m‘hod "'.
$m‘hod
[1].'" does‚otƒxist.');

467 } ià(!
	`funùiÚ_exi¡s
(
$m‘hod
)) {

468  
Ãw
 
	`IXR_E¼Ü
(-32601, '£rv”ƒ¼Ü.„eque¡ed funùiÚ "'.
$m‘hod
.'" does‚otƒxist.');

472 
$»suÉ
 = 
	`ÿÎ_u£r_func
(
$m‘hod
, 
$¬gs
);

474  
$»suÉ
;

475 
	}
}

477 
funùiÚ
 
	$”rÜ
(
$”rÜ
, 
$mes§ge
 = 
çl£
)

480 ià(
$mes§ge
 && !
	`is_objeù
(
$”rÜ
)) {

481 
$”rÜ
 = 
Ãw
 
	`IXR_E¼Ü
($”rÜ, 
$mes§ge
);

483 
$this
->
	`ouut
(
$”rÜ
->
	`g‘Xml
());

484 
	}
}

486 
funùiÚ
 
	$ouut
(
$xml
)

488 
$xml
 = '<?xml version="1.0"?>'."\n".$xml;

489 
$Ëngth
 = 
	`¡¾’
(
$xml
);

490 
	`h—d”
('Connection: close');

491 
	`h—d”
('CÚ‹Á-L’gth: '.
$Ëngth
);

492 
	`h—d”
('Content-Type:ext/xml');

493 
	`h—d”
('D©e: '.
	`d©e
('r'));

494 
echo
 
$xml
;

495 
ex™
;

496 
	}
}

498 
funùiÚ
 
	$hasM‘hod
(
$m‘hod
)

500  
	`š_¬¿y
(
$m‘hod
, 
	`¬¿y_keys
(
$this
->
ÿÎbacks
));

501 
	}
}

503 
funùiÚ
 
	$£tC­ab™›s
()

506 
$this
->
ÿ·b™›s
 = 
	`¬¿y
(

507 'xmÌpc' => 
	`¬¿y
(

511 'çuÉs_š‹rİ' => 
	`¬¿y
(

515 'sy¡em.muÉiÿÎ' => 
	`¬¿y
(

520 
	}
}

522 
funùiÚ
 
	$g‘C­ab™›s
(
$¬gs
)

524  
$this
->
ÿ·b™›s
;

525 
	}
}

527 
funùiÚ
 
	$£tC®lbacks
()

529 
$this
->
ÿÎbacks
['system.getCapabilities'] = 'this:getCapabilities';

530 
$this
->
ÿÎbacks
['system.listMethods'] = 'this:listMethods';

531 
$this
->
ÿÎbacks
['system.multicall'] = 'this:multiCall';

532 
	}
}

534 
funùiÚ
 
	$li¡M‘hods
(
$¬gs
)

538  
	`¬¿y_»v”£
(
	`¬¿y_keys
(
$this
->
ÿÎbacks
));

539 
	}
}

541 
funùiÚ
 
	$muÉiC®l
(
$m‘hodÿÎs
)

544 
$»tuº
 = 
	`¬¿y
();

545 
	`fÜ—ch
 (
$m‘hodÿÎs
 
as
 
$ÿÎ
) {

546 
$m‘hod
 = 
$ÿÎ
['methodName'];

547 
$·¿ms
 = 
$ÿÎ
['params'];

548 ià(
$m‘hod
 == 'system.multicall') {

549 
$»suÉ
 = 
Ãw
 
	`IXR_E¼Ü
(-32600, 'Recursive callso system.multicall‡re forbidden');

551 
$»suÉ
 = 
$this
->
	`ÿÎ
(
$m‘hod
, 
$·¿ms
);

553 ià(
	`is_a
(
$»suÉ
, 'IXR_Error')) {

554 
$»tuº
[] = 
	`¬¿y
(

555 'çuÉCode' => 
$»suÉ
->
code
,

556 'çuÉSŒšg' => 
$»suÉ
->
mes§ge


559 
$»tuº
[] = 
	`¬¿y
(
$»suÉ
);

562  
$»tuº
;

563 
	}
}

572 şas 
	cIXR_Reque¡


574 
v¬
 
	m$m‘hod
;

575 
v¬
 
	m$¬gs
;

576 
v¬
 
	m$xml
;

578 
funùiÚ
 
	$IXR_Reque¡
(
$m‘hod
, 
$¬gs
)

580 
$this
->
m‘hod
 = 
$m‘hod
;

581 
$this
->
¬gs
 = 
$¬gs
;

582 
$this
->
xml
 = <<<
EOD


583 <?
xml
 
v”siÚ
="1.0"?>

584 <
m‘hodC®l
>

585 <
m‘hodName
>{
$this
->
m‘hod
}</methodName>

586 <
·¿ms
>

588 
EOD
;

589 
	`fÜ—ch
 (
$this
->
¬gs
 
as
 
$¬g
) {

590 
$this
->
xml
 .= '<param><value>';

591 
$v
 = 
Ãw
 
	`IXR_V®ue
(
$¬g
);

592 
$this
->
xml
 .ğ
$v
->
	`g‘Xml
();

593 
$this
->
xml
 .= "</value></param>\n";

595 
$this
->
xml
 .= '</params></methodCall>';

598 
funùiÚ
 
	$g‘L’gth
()

600  
	`¡¾’
(
$this
->
xml
);

601 
	}
}

603 
funùiÚ
 
	$g‘Xml
()

605  
$this
->
xml
;

606 
	}
}

616 şas 
	cIXR_Cl›Á


618 
v¬
 
	m$£rv”
;

619 
v¬
 
	m$pÜt
;

620 
v¬
 
	m$·th
;

621 
v¬
 
	m$u£¿g’t
;

622 
v¬
 
	m$»que¡
;

623 
v¬
 
	m$»¥Ú£
;

624 
v¬
 
	m$mes§ge
 = 
çl£
;

625 
v¬
 
	m$debug
 = 
çl£
;

626 
v¬
 
	m$timeout
;

627 
v¬
 
	m$h—d”s
 = 
¬¿y
();

630 
v¬
 
	m$”rÜ
 = 
çl£
;

632 
funùiÚ
 
	$IXR_Cl›Á
(
$£rv”
, 
$·th
 = 
çl£
, 
$pÜt
 = 80, 
$timeout
 = 15)

634 ià(!
$·th
) {

636 
$b™s
 = 
	`·r£_u¾
(
$£rv”
);

637 
$this
->
£rv”
 = 
$b™s
['host'];

638 
$this
->
pÜt
 = 
	`is£t
(
$b™s
['port']) ? $bits['port'] : 80;

639 
$this
->
·th
 = 
	`is£t
(
$b™s
['path']) ? $bits['path'] : '/';

642 ià(!
$this
->
·th
) {

643 
$this
->
·th
 = '/';

646 
$this
->
£rv”
 = 
$£rv”
;

647 
$this
->
·th
 = 
$·th
;

648 
$this
->
pÜt
 = 
$pÜt
;

650 
$this
->
u£¿g’t
 = 'The Incutio XML-RPC PHP Library';

651 
$this
->
timeout
 = 
$timeout
;

654 
funùiÚ
 
	$qu”y
()

656 
$¬gs
 = 
	`func_g‘_¬gs
();

657 
$m‘hod
 = 
	`¬¿y_shiá
(
$¬gs
);

658 
$»que¡
 = 
Ãw
 
	`IXR_Reque¡
(
$m‘hod
, 
$¬gs
);

659 
$Ëngth
 = 
$»que¡
->
	`g‘L’gth
();

660 
$xml
 = 
$»que¡
->
	`g‘Xml
();

662 
$r
 = "\r\n";

663 
$»que¡
 = "POST {$this->path} HTTP/1.0$r";

666 
$this
->
h—d”s
['Ho¡'] = $this->
£rv”
;

667 
$this
->
h—d”s
['Content-Type'] = 'text/xml';

668 
$this
->
h—d”s
['U£r-Ag’t'] = $this->
u£¿g’t
;

669 
$this
->
h—d”s
['CÚ‹Á-L’gth']ğ
$Ëngth
;

672 
	`fÜ—ch
Ğ
$this
->
h—d”s
 
as
 
$h—d”
 => 
$v®ue
 ) {

673 
$»que¡
 .= "{$header}: {$value}{$r}";

675 
$»que¡
 .ğ
$r
;

677 
$»que¡
 .ğ
$xml
;

680 ià(
$this
->
debug
) {

681 
echo
 '<´şass="ixr_»que¡">'.
	`html¥ecŸlch¬s
(
$»que¡
)."\n</pre>\n\n";

684 ià(
$this
->
timeout
) {

685 
$å
 = @
	`fsockİ’
(
$this
->
£rv”
, $this->
pÜt
, 
$”ºo
, 
$”r¡r
, $this->
timeout
);

687 
$å
 = @
	`fsockİ’
(
$this
->
£rv”
, $this->
pÜt
, 
$”ºo
, 
$”r¡r
);

689 ià(!
$å
) {

690 
$this
->
”rÜ
 = 
Ãw
 
	`IXR_E¼Ü
(-32300, 'transportƒrror - could‚ot open socket');

691  
çl£
;

694 
$this
->
»que¡
 = 
$»que¡
;

696 
	`åuts
(
$å
, 
$»que¡
);

697 
$cÚ‹Ás
 = '';

698 
$debugCÚ‹Ás
 = '';

699 
$gÙFœ¡Lše
 = 
çl£
;

700 
$g‘tšgH—d”s
 = 
Œue
;

701 !
	`ãof
(
$å
)) {

702 
$lše
 = 
	`fg‘s
(
$å
, 4096);

703 ià(!
$gÙFœ¡Lše
) {

705 ià(
	`¡r¡r
(
$lše
, '200'è==ğ
çl£
) {

706 
$this
->
”rÜ
 = 
Ãw
 
	`IXR_E¼Ü
(-32300, 'transportƒrror - HTTP status code was‚ot 200');

707  
çl£
;

709 
$gÙFœ¡Lše
 = 
Œue
;

711 ià(
	`Œim
(
$lše
) == '') {

712 
$g‘tšgH—d”s
 = 
çl£
;

714 ià(!
$g‘tšgH—d”s
) {

716 
$cÚ‹Ás
 .ğ
$lše
;

718 ià(
$this
->
debug
) {

719 
$debugCÚ‹Ás
 .ğ
$lše
;

722 ià(
$this
->
debug
) {

723 
echo
 '<´şass="ixr_»¥Ú£">'.
	`html¥ecŸlch¬s
(
$debugCÚ‹Ás
)."\n</pre>\n\n";

727 
$this
->
»¥Ú£
 = 
$cÚ‹Ás
;

730 
$this
->
mes§ge
 = 
Ãw
 
	`IXR_Mes§ge
(
$cÚ‹Ás
);

731 ià(!
$this
->
mes§ge
->
	`·r£
()) {

733 
$this
->
”rÜ
 = 
Ãw
 
	`IXR_E¼Ü
(-32700, 'parseƒrror.‚ot well formed');

734  
çl£
;

738 ià(
$this
->
mes§ge
->
mes§geTy³
 == 'fault') {

739 
$this
->
”rÜ
 = 
Ãw
 
	`IXR_E¼Ü
($this->
mes§ge
->
çuÉCode
, $this->mes§ge->
çuÉSŒšg
);

740  
çl£
;

744  
Œue
;

745 
	}
}

747 
funùiÚ
 
	$g‘Reque¡Raw
()

750  
$this
->
»que¡
;

751 
	}
}

753 
funùiÚ
 
	$g‘Re¥Ú£Raw
()

756  
$this
->
»¥Ú£
;

757 
	}
}

759 
funùiÚ
 
	$g‘Re¥Ú£
()

762  
$this
->
mes§ge
->
·¿ms
[0];

763 
	}
}

765 
funùiÚ
 
	$isE¼Ü
()

767  (
	`is_objeù
(
$this
->
”rÜ
));

768 
	}
}

770 
funùiÚ
 
	$g‘E¼ÜCode
()

772  
$this
->
”rÜ
->
code
;

773 
	}
}

775 
funùiÚ
 
	$g‘E¼ÜMes§ge
()

777  
$this
->
”rÜ
->
mes§ge
;

778 
	}
}

788 şas 
	cIXR_E¼Ü


790 
v¬
 
	m$code
;

791 
v¬
 
	m$mes§ge
;

793 
funùiÚ
 
	$IXR_E¼Ü
(
$code
, 
$mes§ge
)

795 
$this
->
code
 = 
$code
;

796 
$this
->
mes§ge
 = 
	`html¥ecŸlch¬s
(
$mes§ge
);

799 
funùiÚ
 
	$g‘Xml
()

801 
$xml
 = <<<
EOD


802 <
m‘hodRe¥Ú£
>

803 <
çuÉ
>

804 <
v®ue
>

806 <
memb”
>

807 <
Çme
>
çuÉCode
</name>

808 <
v®ue
><>{
$this
->
code
}</></value>

809 </
memb”
>

810 <
memb”
>

811 <
Çme
>
çuÉSŒšg
</name>

812 <
v®ue
><
¡ršg
>{
$this
->
mes§ge
}</string></value>

813 </
memb”
>

815 </
v®ue
>

816 </
çuÉ
>

817 </
m‘hodRe¥Ú£
>

819 
EOD
;

820  
$xml
;

821 
	}
}

830 şas 
	cIXR_D©e
 {

831 
v¬
 
	m$y—r
;

832 
v¬
 
	m$mÚth
;

833 
v¬
 
	m$day
;

834 
v¬
 
	m$hour
;

835 
v¬
 
	m$mšu‹
;

836 
v¬
 
	m$£cÚd
;

837 
v¬
 
	m$timezÚe
;

839 
funùiÚ
 
	$IXR_D©e
(
$time
)

842 ià(
	`is_num”ic
(
$time
)) {

843 
$this
->
	`·r£Time¡amp
(
$time
);

845 
$this
->
	`·r£Iso
(
$time
);

849 
funùiÚ
 
	$·r£Time¡amp
(
$time¡amp
)

851 
$this
->
y—r
 = 
	`d©e
('Y', 
$time¡amp
);

852 
$this
->
mÚth
 = 
	`d©e
('m', 
$time¡amp
);

853 
$this
->
day
 = 
	`d©e
('d', 
$time¡amp
);

854 
$this
->
hour
 = 
	`d©e
('H', 
$time¡amp
);

855 
$this
->
mšu‹
 = 
	`d©e
('i', 
$time¡amp
);

856 
$this
->
£cÚd
 = 
	`d©e
('s', 
$time¡amp
);

857 
$this
->
timezÚe
 = '';

858 
	}
}

860 
funùiÚ
 
	$·r£Iso
(
$iso
)

862 
$this
->
y—r
 = 
	`sub¡r
(
$iso
, 0, 4);

863 
$this
->
mÚth
 = 
	`sub¡r
(
$iso
, 4, 2);

864 
$this
->
day
 = 
	`sub¡r
(
$iso
, 6, 2);

865 
$this
->
hour
 = 
	`sub¡r
(
$iso
, 9, 2);

866 
$this
->
mšu‹
 = 
	`sub¡r
(
$iso
, 12, 2);

867 
$this
->
£cÚd
 = 
	`sub¡r
(
$iso
, 15, 2);

868 
$this
->
timezÚe
 = 
	`sub¡r
(
$iso
, 17);

869 
	}
}

871 
funùiÚ
 
	$g‘Iso
()

873  
$this
->
y—r
.$this->
mÚth
.$this->
day
.'T'.$this->
hour
.':'.$this->
mšu‹
.':'.$this->
£cÚd
.$this->
timezÚe
;

874 
	}
}

876 
funùiÚ
 
	$g‘Xml
()

878  '<d©eTime.iso8601>'.
$this
->
	`g‘Iso
().'</dateTime.iso8601>';

879 
	}
}

881 
funùiÚ
 
	$g‘Time¡amp
()

883  
	`mktime
(
$this
->
hour
, $this->
mšu‹
, $this->
£cÚd
, $this->
mÚth
, $this->
day
, $this->
y—r
);

884 
	}
}

893 şas 
	cIXR_Ba£64


895 
v¬
 
	m$d©a
;

897 
funùiÚ
 
	$IXR_Ba£64
(
$d©a
)

899 
$this
->
d©a
 = 
$d©a
;

902 
funùiÚ
 
	$g‘Xml
()

904  '<ba£64>'.
	`ba£64_’code
(
$this
->
d©a
).'</base64>';

905 
	}
}

914 şas 
	cIXR_IÁro¥eùiÚS”v”
 
ex‹nds
 
	mIXR_S”v”


916 
v¬
 
	m$sigÇtu»s
;

917 
v¬
 
	m$h–p
;

919 
funùiÚ
 
	$IXR_IÁro¥eùiÚS”v”
()

921 
$this
->
	`£tC®lbacks
();

922 
$this
->
	`£tC­ab™›s
();

923 
$this
->
ÿ·b™›s
['šŒo¥eùiÚ'] = 
	`¬¿y
(

927 
$this
->
	`addC®lback
(

930 
	`¬¿y
('array', 'string'),

933 
$this
->
	`addC®lback
(

936 
	`¬¿y
('struct'),

939 
$this
->
	`addC®lback
(

942 
	`¬¿y
('array'),

945 
$this
->
	`addC®lback
(

948 
	`¬¿y
('string', 'string'),

953 
funùiÚ
 
	$addC®lback
(
$m‘hod
, 
$ÿÎback
, 
$¬gs
, 
$h–p
)

955 
$this
->
ÿÎbacks
[
$m‘hod
] = 
$ÿÎback
;

956 
$this
->
sigÇtu»s
[
$m‘hod
] = 
$¬gs
;

957 
$this
->
h–p
[
$m‘hod
] = 
$h–p
;

958 
	}
}

960 
funùiÚ
 
	$ÿÎ
(
$m‘hodÇme
, 
$¬gs
)

963 ià(
$¬gs
 && !
	`is_¬¿y
($args)) {

964 
$¬gs
 = 
	`¬¿y
($args);

968 ià(!
$this
->
	`hasM‘hod
(
$m‘hodÇme
)) {

969  
Ãw
 
	`IXR_E¼Ü
(-32601, '£rv”ƒ¼Ü.„eque¡ed m‘hod "'.
$this
->
mes§ge
->
m‘hodName
.'"‚ot specified.');

971 
$m‘hod
 = 
$this
->
ÿÎbacks
[
$m‘hodÇme
];

972 
$sigÇtu»
 = 
$this
->
sigÇtu»s
[
$m‘hodÇme
];

973 
$»tuºTy³
 = 
	`¬¿y_shiá
(
$sigÇtu»
);

976 ià(
	`couÁ
(
$¬gs
è!ğcouÁ(
$sigÇtu»
)) {

977  
Ãw
 
	`IXR_E¼Ü
(-32602, 'serverƒrror. wrong‚umber of method…arameters');

981 
$ok
 = 
Œue
;

982 
$¬gsbackup
 = 
$¬gs
;

983 
$i
 = 0, 
$j
 = 
	`couÁ
(
$¬gs
); $i < $j; $i++) {

984 
$¬g
 = 
	`¬¿y_shiá
(
$¬gs
);

985 
$ty³
 = 
	`¬¿y_shiá
(
$sigÇtu»
);

986 
$ty³
) {

989 ià(
	`is_¬¿y
(
$¬g
è|| !
	`is_št
($arg)) {

990 
$ok
 = 
çl£
;

995 ià(!
	`is_¡ršg
(
$¬g
)) {

996 
$ok
 = 
çl£
;

1000 ià(
$¬g
 !=ğ
çl£
 && $¬g !=ğ
Œue
) {

1001 
$ok
 = 
çl£
;

1006 ià(!
	`is_æßt
(
$¬g
)) {

1007 
$ok
 = 
çl£
;

1012 ià(!
	`is_a
(
$¬g
, 'IXR_Date')) {

1013 
$ok
 = 
çl£
;

1017 ià(!
$ok
) {

1018  
Ãw
 
	`IXR_E¼Ü
(-32602, 'serverƒrror. invalid method…arameters');

1022  
·»Á
::
	`ÿÎ
(
$m‘hodÇme
, 
$¬gsbackup
);

1023 
	}
}

1025 
funùiÚ
 
	$m‘hodSigÇtu»
(
$m‘hod
)

1027 ià(!
$this
->
	`hasM‘hod
(
$m‘hod
)) {

1028  
Ãw
 
	`IXR_E¼Ü
(-32601, '£rv”ƒ¼Ü.„eque¡ed m‘hod "'.
$m‘hod
.'"‚ot specified.');

1031 
$ty³s
 = 
$this
->
sigÇtu»s
[
$m‘hod
];

1032 
$»tuº
 = 
	`¬¿y
();

1033 
	`fÜ—ch
 (
$ty³s
 
as
 
$ty³
) {

1034 
$ty³
) {

1036 
$»tuº
[] = 'string';

1040 
$»tuº
[] = 42;

1043 
$»tuº
[] = 3.1415;

1046 
$»tuº
[] = 
Ãw
 
	`IXR_D©e
(
	`time
());

1049 
$»tuº
[] = 
Œue
;

1052 
$»tuº
[] = 
Ãw
 
	`IXR_Ba£64
('base64');

1055 
$»tuº
[] = 
	`¬¿y
('array');

1058 
$»tuº
[] = 
	`¬¿y
('struct' => 'struct');

1062  
$»tuº
;

1063 
	}
}

1065 
funùiÚ
 
	$m‘hodH–p
(
$m‘hod
)

1067  
$this
->
h–p
[
$m‘hod
];

1068 
	}
}

1077 şas 
	cIXR_Cl›ÁMuÉiÿÎ
 
ex‹nds
 
	mIXR_Cl›Á


1079 
v¬
 
	m$ÿÎs
 = 
¬¿y
();

1081 
funùiÚ
 
	$IXR_Cl›ÁMuÉiÿÎ
(
$£rv”
, 
$·th
 = 
çl£
, 
$pÜt
 = 80)

1083 
·»Á
::
	`IXR_Cl›Á
(
$£rv”
, 
$·th
, 
$pÜt
);

1084 
$this
->
u£¿g’t
 = 'The Incutio XML-RPC PHP Library (multicall client)';

1087 
funùiÚ
 
	$addC®l
()

1089 
$¬gs
 = 
	`func_g‘_¬gs
();

1090 
$m‘hodName
 = 
	`¬¿y_shiá
(
$¬gs
);

1091 
$¡ruù
 = 
	`¬¿y
(

1092 'm‘hodName' => 
$m‘hodName
,

1093 '·¿ms' => 
$¬gs


1095 
$this
->
ÿÎs
[] = 
$¡ruù
;

1096 
	}
}

1098 
funùiÚ
 
	$qu”y
()

1101  
·»Á
::
	`qu”y
('sy¡em.muÉiÿÎ', 
$this
->
ÿÎs
);

1102 
	}
}

	@application/helpers/saetv2.ex.class_helper.php

1 <?
php


11 şas 
	cOAuthExû±iÚ
 
ex‹nds
 
	mExû±iÚ
 {

25 şas 
	cS«TOAuthV2
 {

29 
public
 
	m$ş›Á_id
;

33 
public
 
	m$ş›Á_£ü‘
;

37 
public
 
	m$acûss_tok’
;

41 
public
 
	m$»äesh_tok’
;

47 
public
 
	m$h‰p_code
;

53 
public
 
	m$u¾
;

59 
public
 
	m$ho¡
 = "https://api.weibo.com/2/";

65 
public
 
	m$timeout
 = 30;

71 
public
 
	m$cÚÃùtimeout
 = 30;

77 
public
 
	m$s¦_v”ify³”
 = 
FALSE
;

83 
public
 
	m$fÜm©
 = 'json';

89 
public
 
	m$decode_jsÚ
 = 
TRUE
;

95 
public
 
	m$h‰p_šfo
;

101 
public
 
	m$u£¿g’t
 = 'Sae T OAuth2 v0.1';

108 
public
 
	m$debug
 = 
FALSE
;

114 
public
 
	m$bound¬y
 = '';

122 
funùiÚ
 
	$acûssTok’URL
() {  'https://api.weibo.com/oauth2/access_token'; }

126 
funùiÚ
 
	$authÜizeURL
(è{  'h‰ps://­i.weibo.com/ßuth2/authÜize'; 
	}
}

131 
funùiÚ
 
	$__cÚ¡ruù
(
$ş›Á_id
, 
$ş›Á_£ü‘
, 
$acûss_tok’
 = 
NULL
, 
$»äesh_tok’
 = NULL) {

132 
$this
->
ş›Á_id
 = 
$ş›Á_id
;

133 
$this
->
ş›Á_£ü‘
 = 
$ş›Á_£ü‘
;

134 
$this
->
acûss_tok’
 = 
$acûss_tok’
;

135 
$this
->
»äesh_tok’
 = 
$»äesh_tok’
;

136 
	}
}

156 
funùiÚ
 
g‘AuthÜizeURL
Ğ
$u¾
, 
$»¥Ú£_ty³
 = 'code', 
$¡©e
 = 
NULL
, 
$di¥Ïy
 = NULL ) {

157 
$·¿ms
 = 
¬¿y
();

158 
	g$·¿ms
['ş›Á_id'] = 
$this
->
ş›Á_id
;

159 
	g$·¿ms
['»dœeù_uri'] = 
$u¾
;

160 
	g$·¿ms
['»¥Ú£_ty³'] = 
$»¥Ú£_ty³
;

161 
	g$·¿ms
['¡©e'] = 
$¡©e
;

162 
	g$·¿ms
['di¥Ïy'] = 
$di¥Ïy
;

163  
	g$this
->
authÜizeURL
(è. "?" . 
h‰p_bud_qu”y
(
$·¿ms
);

178 
funùiÚ
 
g‘AcûssTok’
Ğ
$ty³
 = 'code', 
$keys
 ) {

179 
	g$·¿ms
 = 
¬¿y
();

180 
	g$·¿ms
['ş›Á_id'] = 
$this
->
ş›Á_id
;

181 
	g$·¿ms
['ş›Á_£ü‘'] = 
$this
->
ş›Á_£ü‘
;

182 iàĞ
	g$ty³
 === 'token' ) {

183 
$·¿ms
['grant_type'] = 'refresh_token';

184 
	g$·¿ms
['»äesh_tok’'] = 
$keys
['refresh_token'];

185 } 
–£if
 ( 
$ty³
 === 'code' ) {

186 
$·¿ms
['grant_type'] = 'authorization_code';

187 
	g$·¿ms
['code'] = 
$keys
['code'];

188 
	g$·¿ms
['»dœeù_uri'] = 
$keys
['redirect_uri'];

189 } 
–£if
 ( 
$ty³
 === 'password' ) {

190 
$·¿ms
['grant_type'] = 'password';

191 
	g$·¿ms
['u£ºame'] = 
$keys
['username'];

192 
	g$·¿ms
['·sswÜd'] = 
$keys
['password'];

194 
throw
 
Ãw
 
OAuthExû±iÚ
("wrong‡uthype");

197 
	g$»¥Ú£
 = 
$this
->
oAuthReque¡
($this->
acûssTok’URL
(), 'POST', 
$·¿ms
);

198 
	g$tok’
 = 
jsÚ_decode
(
$»¥Ú£
, 
Œue
);

199 iàĞ
is_¬¿y
(
$tok’
è&& !
is£t
($token['error']) ) {

200 
	g$this
->
	gacûss_tok’
 = 
$tok’
['access_token'];

201 
	g$this
->
	g»äesh_tok’
 = 
$tok’
['refresh_token'];

203 
throw
 
Ãw
 
OAuthExû±iÚ
("g‘‡cûs tok’ faed." . 
$tok’
['error']);

205  
	g$tok’
;

215 
funùiÚ
 
	$·r£SigÃdReque¡
(
$sigÃd_»que¡
) {

216 
	`li¡
(
$’coded_sig
, 
$·ylßd
èğ
	`ex¶ode
('.', 
$sigÃd_»que¡
, 2);

217 
$sig
 = 
£lf
::
	`ba£64decode
(
$’coded_sig
) ;

218 
$d©a
 = 
	`jsÚ_decode
(
£lf
::
	`ba£64decode
(
$·ylßd
), 
Œue
);

219 ià(
	`¡¹ouµ”
(
$d©a
['algorithm']) !== 'HMAC-SHA256')  '-1';

220 
$ex³ùed_sig
 = 
	`hash_hmac
('sha256', 
$·ylßd
, 
$this
->
ş›Á_£ü‘
, 
Œue
);

221  (
$sig
 !=ğ
$ex³ùed_sig
)? '-2':
$d©a
;

222 
	}
}

227 
funùiÚ
 
	$ba£64decode
(
$¡r
) {

228  
	`ba£64_decode
(
	`¡¹r
(
$¡r
.
	`¡r_»³©
('=', (4 - 
	`¡¾’
($str) % 4)), '-_', '+/'));

229 
	}
}

236 
funùiÚ
 
	$g‘Tok’FromJSSDK
() {

237 
$key
 = "weibojs_" . 
$this
->
ş›Á_id
;

238 iàĞ
	`is£t
(
$_COOKIE
[
$key
]è&& 
$cook›
 = $_COOKIE[$key] ) {

239 
	`·r£_¡r
(
$cook›
, 
$tok’
);

240 iàĞ
	`is£t
(
$tok’
['access_token']) && isset($token['refresh_token']) ) {

241 
$this
->
acûss_tok’
 = 
$tok’
['access_token'];

242 
$this
->
»äesh_tok’
 = 
$tok’
['refresh_token'];

243  
$tok’
;

245  
çl£
;

248  
çl£
;

250 
	}
}

259 
funùiÚ
 
	$g‘Tok’FromA¼ay
Ğ
$¬r
 ) {

260 ià(
	`is£t
(
$¬r
['access_token']) && $arr['access_token']) {

261 
$tok’
 = 
	`¬¿y
();

262 
$this
->
acûss_tok’
 = 
$tok’
['acûss_tok’'] = 
$¬r
['access_token'];

263 ià(
	`is£t
(
$¬r
['refresh_token']) && $arr['refresh_token']) {

264 
$this
->
»äesh_tok’
 = 
$tok’
['»äesh_tok’'] = 
$¬r
['refresh_token'];

267  
$tok’
;

269  
çl£
;

271 
	}
}

278 
funùiÚ
 
g‘
(
$u¾
, 
$·¿m‘”s
 = 
	$¬¿y
()) {

279 
$»¥Ú£
 = 
$this
->
	`oAuthReque¡
(
$u¾
, 'GET', 
$·¿m‘”s
);

280 ià(
$this
->
fÜm©
 ==ğ'jsÚ' && $this->
decode_jsÚ
) {

281  
	`jsÚ_decode
(
$»¥Ú£
, 
Œue
);

283  
$»¥Ú£
;

284 
	}
}

291 
funùiÚ
 
po¡
(
$u¾
, 
$·¿m‘”s
 = 
¬¿y
(), 
$muÉi
 = 
çl£
) {

292 
$»¥Ú£
 = 
$this
->
oAuthReque¡
(
$u¾
, 'POST', 
$·¿m‘”s
, 
$muÉi
 );

293 ià(
	g$this
->
	gfÜm©
 ==ğ'jsÚ' && 
$this
->
decode_jsÚ
) {

294  
jsÚ_decode
(
$»¥Ú£
, 
Œue
);

296  
	g$»¥Ú£
;

304 
funùiÚ
 
d–‘e
(
$u¾
, 
$·¿m‘”s
 = 
	$¬¿y
()) {

305 
$»¥Ú£
 = 
$this
->
	`oAuthReque¡
(
$u¾
, 'DELETE', 
$·¿m‘”s
);

306 ià(
$this
->
fÜm©
 ==ğ'jsÚ' && $this->
decode_jsÚ
) {

307  
	`jsÚ_decode
(
$»¥Ú£
, 
Œue
);

309  
$»¥Ú£
;

310 
	}
}

318 
funùiÚ
 
	$oAuthReque¡
(
$u¾
, 
$m‘hod
, 
$·¿m‘”s
, 
$muÉi
 = 
çl£
) {

320 ià(
	`¡¼pos
(
$u¾
, 'http://') !== 0 && strrpos($url, 'https://') !== 0) {

321 
$u¾
 = "{$this->host}{$url}.{$this->format}";

324 
$m‘hod
) {

326 
$u¾
 = $u¾ . '?' . 
	`h‰p_bud_qu”y
(
$·¿m‘”s
);

327  
$this
->
	`h‰p
(
$u¾
, 'GET');

329 
$h—d”s
 = 
	`¬¿y
();

330 ià(!
$muÉi
 && (
	`is_¬¿y
(
$·¿m‘”s
è|| 
	`is_objeù
($parameters)) ) {

331 
$body
 = 
	`h‰p_bud_qu”y
(
$·¿m‘”s
);

333 
$body
 = 
£lf
::
	`bud_h‰p_qu”y_muÉi
(
$·¿m‘”s
);

334 
$h—d”s
[] = "CÚ‹Á-Ty³: muÉ¬t/fÜm-d©a; bound¬y=" . 
£lf
::
$bound¬y
;

336  
$this
->
	`h‰p
(
$u¾
, 
$m‘hod
, 
$body
, 
$h—d”s
);

338 
	}
}

346 
funùiÚ
 
h‰p
(
$u¾
, 
$m‘hod
, 
$po¡f›lds
 = 
NULL
, 
$h—d”s
 = 
	$¬¿y
()) {

347 
$this
->
h‰p_šfo
 = 
	`¬¿y
();

348 
$ci
 = 
	`cu¾_š™
();

350 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_HTTP_VERSION
, 
CURL_HTTP_VERSION_1_0
);

351 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_USERAGENT
, 
$this
->
u£¿g’t
);

352 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_CONNECTTIMEOUT
, 
$this
->
cÚÃùtimeout
);

353 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_TIMEOUT
, 
$this
->
timeout
);

354 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_RETURNTRANSFER
, 
TRUE
);

355 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_ENCODING
, "");

356 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_SSL_VERIFYPEER
, 
$this
->
s¦_v”ify³”
);

357 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_HEADERFUNCTION
, 
	`¬¿y
(
$this
, 'getHeader'));

358 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_HEADER
, 
FALSE
);

360 
$m‘hod
) {

362 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_POST
, 
TRUE
);

363 ià(!
	`em±y
(
$po¡f›lds
)) {

364 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_POSTFIELDS
, 
$po¡f›lds
);

365 
$this
->
po¡d©a
 = 
$po¡f›lds
;

369 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_CUSTOMREQUEST
, 'DELETE');

370 ià(!
	`em±y
(
$po¡f›lds
)) {

371 
$u¾
 = "{$url}?{$postfields}";

375 iàĞ
	`is£t
(
$this
->
acûss_tok’
) && $this->access_token )

376 
$h—d”s
[] = "AuthÜiz©iÚ: OAuth2 ".
$this
->
acûss_tok’
;

378 
$h—d”s
[] = "API-RemÙeIP: " . 
$_SERVER
['REMOTE_ADDR'];

379 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_URL
, 
$u¾
 );

380 
	`cu¾_£tİt
(
$ci
, 
CURLOPT_HTTPHEADER
, 
$h—d”s
 );

381 
	`cu¾_£tİt
(
$ci
, 
CURLINFO_HEADER_OUT
, 
TRUE
 );

383 
$»¥Ú£
 = 
	`cu¾_exec
(
$ci
);

384 
$this
->
h‰p_code
 = 
	`cu¾_g‘šfo
(
$ci
, 
CURLINFO_HTTP_CODE
);

385 
$this
->
h‰p_šfo
 = 
	`¬¿y_m”ge
($this->h‰p_šfo, 
	`cu¾_g‘šfo
(
$ci
));

386 
$this
->
u¾
 = 
$u¾
;

388 ià(
$this
->
debug
) {

389 
echo
 "=====post data======\r\n";

390 
	`v¬_dump
(
$po¡f›lds
);

392 
echo
 '=====info====='."\r\n";

393 
	`´št_r
Ğ
	`cu¾_g‘šfo
(
$ci
) );

395 
echo
 '=====$response====='."\r\n";

396 
	`´št_r
Ğ
$»¥Ú£
 );

398 
	`cu¾_şo£
 (
$ci
);

399  
$»¥Ú£
;

400 
	}
}

408 
funùiÚ
 
	$g‘H—d”
(
$ch
, 
$h—d”
) {

409 
$i
 = 
	`¡½os
(
$h—d”
, ':');

410 ià(!
	`em±y
(
$i
)) {

411 
$key
 = 
	`¡r_»¶aû
('-', '_', 
	`¡¹Şow”
(
	`sub¡r
(
$h—d”
, 0, 
$i
)));

412 
$v®ue
 = 
	`Œim
(
	`sub¡r
(
$h—d”
, 
$i
 + 2));

413 
$this
->
h‰p_h—d”
[
$key
] = 
$v®ue
;

415  
	`¡¾’
(
$h—d”
);

416 
	}
}

421 
public
 
funùiÚ
 
	$bud_h‰p_qu”y_muÉi
(
$·¿ms
) {

422 ià(!
$·¿ms
)  '';

424 
	`uksÜt
(
$·¿ms
, 'strcmp');

426 
$·œs
 = 
	`¬¿y
();

428 
£lf
::
$bound¬y
 = $bound¬y = 
	`uniqid
('------------------');

429 
$MPbound¬y
 = '--'.
$bound¬y
;

430 
$’dMPbound¬y
 = 
$MPbound¬y
. '--';

431 
$muÉ¬tbody
 = '';

433 
	`fÜ—ch
 (
$·¿ms
 
as
 
$·¿m‘”
 => 
$v®ue
) {

435 ifĞ
	`š_¬¿y
(
$·¿m‘”
, 
	`¬¿y
('pic', 'image')è&& 
$v®ue
{0} == '@' ) {

436 
$u¾
 = 
	`Érim
Ğ
$v®ue
, '@' );

437 
$cÚ‹Á
 = 
	`fe_g‘_cÚ‹Ás
Ğ
$u¾
 );

438 
$¬¿y
 = 
	`ex¶ode
Ğ'?', 
	`ba£Çme
Ğ
$u¾
 ) );

439 
$f’ame
 = 
$¬¿y
[0];

441 
$muÉ¬tbody
 .ğ
$MPbound¬y
 . "\r\n";

442 
$muÉ¬tbody
 .ğ'CÚ‹Á-Di¥os™iÚ: fÜm-d©a;‚ame="' . 
$·¿m‘”
 . '"; f’ame="' . 
$f’ame
 . '"'. "\r\n";

443 
$muÉ¬tbody
 .= "Content-Type: image/unknown\r\n\r\n";

444 
$muÉ¬tbody
 .ğ
$cÚ‹Á
. "\r\n";

446 
$muÉ¬tbody
 .ğ
$MPbound¬y
 . "\r\n";

447 
$muÉ¬tbody
 .ğ'cÚ‹Á-di¥os™iÚ: fÜm-d©a;‚ame="' . 
$·¿m‘”
 . "\"\r\n\r\n";

448 
$muÉ¬tbody
 .ğ
$v®ue
."\r\n";

453 
$muÉ¬tbody
 .ğ
$’dMPbound¬y
;

454  
$muÉ¬tbody
;

455 
	}
}

468 şas 
	cS«TCl›ÁV2


480 
funùiÚ
 
	$__cÚ¡ruù
Ğ
$akey
, 
$skey
, 
$acûss_tok’
, 
$»äesh_tok’
 = 
NULL
)

482 
$this
->
ßuth
 = 
Ãw
 
	`S«TOAuthV2
Ğ
$akey
, 
$skey
, 
$acûss_tok’
, 
$»äesh_tok’
 );

496 
funùiÚ
 
	$public_tim–še
Ğ
$·ge
 = 1, 
$couÁ
 = 50, 
$ba£_­p
 = 0 )

498 
$·¿ms
 = 
	`¬¿y
();

499 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

500 
$·¿ms
['·ge'] = 
	`štv®
(
$·ge
);

501 
$·¿ms
['ba£_­p'] = 
	`štv®
(
$ba£_­p
);

502  
$this
->
ßuth
->
	`g‘
('¡©u£s/public_tim–še', 
$·¿ms
);

503 
	}
}

520 
funùiÚ
 
	$home_tim–še
Ğ
$·ge
 = 1, 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0, 
$ba£_­p
 = 0, 
$ã©u»
 = 0 )

522 
$·¿ms
 = 
	`¬¿y
();

523 ià(
$sšû_id
) {

524 
$this
->
	`id_fÜm©
(
$sšû_id
);

525 
$·¿ms
['sšû_id'] = 
$sšû_id
;

527 ià(
$max_id
) {

528 
$this
->
	`id_fÜm©
(
$max_id
);

529 
$·¿ms
['max_id'] = 
$max_id
;

531 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

532 
$·¿ms
['·ge'] = 
	`štv®
(
$·ge
);

533 
$·¿ms
['ba£_­p'] = 
	`štv®
(
$ba£_­p
);

534 
$·¿ms
['ã©u»'] = 
	`štv®
(
$ã©u»
);

536  
$this
->
ßuth
->
	`g‘
('¡©u£s/home_tim–še', 
$·¿ms
);

537 
	}
}

554 
funùiÚ
 
	$ä›nds_tim–še
Ğ
$·ge
 = 1, 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0, 
$ba£_­p
 = 0, 
$ã©u»
 = 0 )

556  
$this
->
	`home_tim–še
Ğ
$sšû_id
, 
$max_id
, 
$couÁ
, 
$·ge
, 
$ba£_­p
, 
$ã©u»
);

557 
	}
}

576 
funùiÚ
 
	$u£r_tim–še_by_id
Ğ
$uid
 = 
NULL
 , 
$·ge
 = 1 , 
$couÁ
 = 50 , 
$sšû_id
 = 0, 
$max_id
 = 0, 
$ã©u»
 = 0, 
$Œim_u£r
 = 0, 
$ba£_­p
 = 0)

578 
$·¿ms
 = 
	`¬¿y
();

579 
$·¿ms
['uid']=
$uid
;

580 ià(
$sšû_id
) {

581 
$this
->
	`id_fÜm©
(
$sšû_id
);

582 
$·¿ms
['sšû_id'] = 
$sšû_id
;

584 ià(
$max_id
) {

585 
$this
->
	`id_fÜm©
(
$max_id
);

586 
$·¿ms
['max_id'] = 
$max_id
;

588 
$·¿ms
['ba£_­p'] = 
	`štv®
(
$ba£_­p
);

589 
$·¿ms
['ã©u»'] = 
	`štv®
(
$ã©u»
);

590 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

591 
$·¿ms
['·ge'] = 
	`štv®
(
$·ge
);

592 
$·¿ms
['Œim_u£r'] = 
	`štv®
(
$Œim_u£r
);

594  
$this
->
ßuth
->
	`g‘
Ğ'¡©u£s/u£r_tim–še', 
$·¿ms
 );

595 
	}
}

615 
funùiÚ
 
	$u£r_tim–še_by_Çme
Ğ
$sü“n_Çme
 = 
NULL
 , 
$·ge
 = 1 , 
$couÁ
 = 50 , 
$sšû_id
 = 0, 
$max_id
 = 0, 
$ã©u»
 = 0, 
$Œim_u£r
 = 0, 
$ba£_­p
 = 0 )

617 
$·¿ms
 = 
	`¬¿y
();

618 
$·¿ms
['sü“n_Çme'] = 
$sü“n_Çme
;

619 ià(
$sšû_id
) {

620 
$this
->
	`id_fÜm©
(
$sšû_id
);

621 
$·¿ms
['sšû_id'] = 
$sšû_id
;

623 ià(
$max_id
) {

624 
$this
->
	`id_fÜm©
(
$max_id
);

625 
$·¿ms
['max_id'] = 
$max_id
;

627 
$·¿ms
['ba£_­p'] = 
	`štv®
(
$ba£_­p
);

628 
$·¿ms
['ã©u»'] = 
	`štv®
(
$ã©u»
);

629 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

630 
$·¿ms
['·ge'] = 
	`štv®
(
$·ge
);

631 
$·¿ms
['Œim_u£r'] = 
	`štv®
(
$Œim_u£r
);

633  
$this
->
ßuth
->
	`g‘
Ğ'¡©u£s/u£r_tim–še', 
$·¿ms
 );

634 
	}
}

650 
funùiÚ
 
	$tim–še_b©ch_by_Çme
Ğ
$sü“n_Çme
, 
$·ge
 = 1, 
$couÁ
 = 50, 
$ã©u»
 = 0, 
$ba£_­p
 = 0)

652 
$·¿ms
 = 
	`¬¿y
();

653 ià(
	`is_¬¿y
(
$sü“n_Çme
è&& !
	`em±y
($screen_name)) {

654 
$·¿ms
['sü“n_Çme'] = 
	`još
(',', 
$sü“n_Çme
);

656 
$·¿ms
['sü“n_Çme'] = 
$sü“n_Çme
;

658 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

659 
$·¿ms
['·ge'] = 
	`štv®
(
$·ge
);

660 
$·¿ms
['ba£_­p'] = 
	`štv®
(
$ba£_­p
);

661 
$·¿ms
['ã©u»'] = 
	`štv®
(
$ã©u»
);

662  
$this
->
ßuth
->
	`g‘
('¡©u£s/tim–še_b©ch', 
$·¿ms
);

663 
	}
}

677 
funùiÚ
 
	$tim–še_b©ch_by_id
Ğ
$uids
, 
$·ge
 = 1, 
$couÁ
 = 50, 
$ã©u»
 = 0, 
$ba£_­p
 = 0)

679 
$·¿ms
 = 
	`¬¿y
();

680 ià(
	`is_¬¿y
(
$uids
è&& !
	`em±y
($uids)) {

681 
	`fÜ—ch
(
$uids
 
as
 
$k
 => 
$v
) {

682 
$this
->
	`id_fÜm©
(
$uids
[
$k
]);

684 
$·¿ms
['uids'] = 
	`još
(',', 
$uids
);

686 
$·¿ms
['uids'] = 
$uids
;

688 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

689 
$·¿ms
['·ge'] = 
	`štv®
(
$·ge
);

690 
$·¿ms
['ba£_­p'] = 
	`štv®
(
$ba£_­p
);

691 
$·¿ms
['ã©u»'] = 
	`štv®
(
$ã©u»
);

692  
$this
->
ßuth
->
	`g‘
('¡©u£s/tim–še_b©ch', 
$·¿ms
);

693 
	}
}

710 
funùiÚ
 
	$»po¡_tim–še
Ğ
$sid
, 
$·ge
 = 1, 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0, 
$f‹r_by_authÜ
 = 0 )

712 
$this
->
	`id_fÜm©
(
$sid
);

714 
$·¿ms
 = 
	`¬¿y
();

715 
$·¿ms
['id'] = 
$sid
;

716 ià(
$sšû_id
) {

717 
$this
->
	`id_fÜm©
(
$sšû_id
);

718 
$·¿ms
['sšû_id'] = 
$sšû_id
;

720 ià(
$max_id
) {

721 
$this
->
	`id_fÜm©
(
$max_id
);

722 
$·¿ms
['max_id'] = 
$max_id
;

724 
$·¿ms
['f‹r_by_authÜ'] = 
	`štv®
(
$f‹r_by_authÜ
);

726  
$this
->
	`»que¡_w™h_·g”
Ğ'¡©u£s/»po¡_tim–še', 
$·ge
, 
$couÁ
, 
$·¿ms
 );

727 
	}
}

741 
funùiÚ
 
	$»po¡_by_me
Ğ
$·ge
 = 1, 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0 )

743 
$·¿ms
 = 
	`¬¿y
();

744 ià(
$sšû_id
) {

745 
$this
->
	`id_fÜm©
(
$sšû_id
);

746 
$·¿ms
['sšû_id'] = 
$sšû_id
;

748 ià(
$max_id
) {

749 
$this
->
	`id_fÜm©
(
$max_id
);

750 
$·¿ms
['max_id'] = 
$max_id
;

753  
$this
->
	`»que¡_w™h_·g”
('¡©u£s/»po¡_by_me', 
$·ge
, 
$couÁ
, 
$·¿ms
 );

754 
	}
}

772 
funùiÚ
 
	$m’tiÚs
Ğ
$·ge
 = 1, 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0, 
$f‹r_by_authÜ
 = 0, 
$f‹r_by_sourû
 = 0, 
$f‹r_by_ty³
 = 0 )

774 
$·¿ms
 = 
	`¬¿y
();

775 ià(
$sšû_id
) {

776 
$this
->
	`id_fÜm©
(
$sšû_id
);

777 
$·¿ms
['sšû_id'] = 
$sšû_id
;

779 ià(
$max_id
) {

780 
$this
->
	`id_fÜm©
(
$max_id
);

781 
$·¿ms
['max_id'] = 
$max_id
;

783 
$·¿ms
['f‹r_by_authÜ'] = 
$f‹r_by_authÜ
;

784 
$·¿ms
['f‹r_by_sourû'] = 
$f‹r_by_sourû
;

785 
$·¿ms
['f‹r_by_ty³'] = 
$f‹r_by_ty³
;

787  
$this
->
	`»que¡_w™h_·g”
Ğ'¡©u£s/m’tiÚs', 
$·ge
, 
$couÁ
, 
$·¿ms
 );

788 
	}
}

801 
funùiÚ
 
	$show_¡©us
Ğ
$id
 )

803 
$this
->
	`id_fÜm©
(
$id
);

804 
$·¿ms
 = 
	`¬¿y
();

805 
$·¿ms
['id'] = 
$id
;

806  
$this
->
ßuth
->
	`g‘
('¡©u£s/show', 
$·¿ms
);

807 
	}
}

817 
funùiÚ
 
	$show_b©ch
Ğ
$ids
 )

819 
$·¿ms
=
	`¬¿y
();

820 ià(
	`is_¬¿y
(
$ids
è&& !
	`em±y
($ids)) {

821 
	`fÜ—ch
(
$ids
 
as
 
$k
 => 
$v
) {

822 
$this
->
	`id_fÜm©
(
$ids
[
$k
]);

824 
$·¿ms
['ids'] = 
	`još
(',', 
$ids
);

826 
$·¿ms
['ids'] = 
$ids
;

828  
$this
->
ßuth
->
	`g‘
('¡©u£s/show_b©ch', 
$·¿ms
);

829 
	}
}

841 
funùiÚ
 
	$qu”ymid
Ğ
$id
, 
$ty³
 = 1, 
$is_b©ch
 = 0 )

843 
$·¿ms
 = 
	`¬¿y
();

844 
$·¿ms
['id'] = 
$id
;

845 
$·¿ms
['ty³'] = 
	`štv®
(
$ty³
);

846 
$·¿ms
['is_b©ch'] = 
	`štv®
(
$is_b©ch
);

847  
$this
->
ßuth
->
	`g‘
Ğ'¡©u£s/qu”ymid', 
$·¿ms
);

848 
	}
}

862 
funùiÚ
 
	$qu”yid
Ğ
$mid
, 
$ty³
 = 1, 
$is_b©ch
 = 0, 
$šbox
 = 0, 
$isBa£62
 = 0)

864 
$·¿ms
 = 
	`¬¿y
();

865 
$·¿ms
['mid'] = 
$mid
;

866 
$·¿ms
['ty³'] = 
	`štv®
(
$ty³
);

867 
$·¿ms
['is_b©ch'] = 
	`štv®
(
$is_b©ch
);

868 
$·¿ms
['šbox'] = 
	`štv®
(
$šbox
);

869 
$·¿ms
['isBa£62'] = 
	`štv®
(
$isBa£62
);

870  
$this
->
ßuth
->
	`g‘
('¡©u£s/qu”yid', 
$·¿ms
);

871 
	}
}

882 
funùiÚ
 
	$»po¡_day
Ğ
$couÁ
 = 20, 
$ba£_­p
 = 0)

884 
$·¿ms
 = 
	`¬¿y
();

885 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

886 
$·¿ms
['ba£_­p'] = 
	`štv®
(
$ba£_­p
);

887  
$this
->
ßuth
->
	`g‘
('¡©u£s/hÙ/»po¡_day', 
$·¿ms
);

888 
	}
}

899 
funùiÚ
 
	$»po¡_w“kly
Ğ
$couÁ
 = 20, 
$ba£_­p
 = 0)

901 
$·¿ms
 = 
	`¬¿y
();

902 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

903 
$·¿ms
['ba£_­p'] = 
	`štv®
(
$ba£_­p
);

904  
$this
->
ßuth
->
	`g‘
Ğ'¡©u£s/hÙ/»po¡_w“kly', 
$·¿ms
);

905 
	}
}

916 
funùiÚ
 
	$comm’ts_day
Ğ
$couÁ
 = 20, 
$ba£_­p
 = 0)

918 
$·¿ms
 = 
	`¬¿y
();

919 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

920 
$·¿ms
['ba£_­p'] = 
	`štv®
(
$ba£_­p
);

921  
$this
->
ßuth
->
	`g‘
Ğ'¡©u£s/hÙ/comm’ts_day', 
$·¿ms
);

922 
	}
}

933 
funùiÚ
 
	$comm’ts_w“kly
Ğ
$couÁ
 = 20, 
$ba£_­p
 = 0)

935 
$·¿ms
 = 
	`¬¿y
();

936 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

937 
$·¿ms
['ba£_­p'] = 
	`štv®
(
$ba£_­p
);

938  
$this
->
ßuth
->
	`g‘
Ğ'¡©u£s/hÙ/comm’ts_w“kly', 
$·¿ms
);

939 
	}
}

954 
funùiÚ
 
	$»po¡
Ğ
$sid
, 
$‹xt
 = 
NULL
, 
$is_comm’t
 = 0 )

956 
$this
->
	`id_fÜm©
(
$sid
);

958 
$·¿ms
 = 
	`¬¿y
();

959 
$·¿ms
['id'] = 
$sid
;

960 
$·¿ms
['is_comm’t'] = 
$is_comm’t
;

961 ifĞ
$‹xt
 ) 
$·¿ms
['status'] = $text;

963  
$this
->
ßuth
->
	`po¡
Ğ'¡©u£s/»po¡', 
$·¿ms
 );

964 
	}
}

976 
funùiÚ
 
	$d–‘e
Ğ
$id
 )

978  
$this
->
	`de¡roy
Ğ
$id
 );

979 
	}
}

991 
funùiÚ
 
	$de¡roy
Ğ
$id
 )

993 
$this
->
	`id_fÜm©
(
$id
);

994 
$·¿ms
 = 
	`¬¿y
();

995 
$·¿ms
['id'] = 
$id
;

996  
$this
->
ßuth
->
	`po¡
Ğ'¡©u£s/de¡roy', 
$·¿ms
 );

997 
	}
}

1015 
funùiÚ
 
	$upd©e
Ğ
$¡©us
, 
$Ït
 = 
NULL
, 
$lÚg
 = NULL, 
$ªnÙ©iÚs
 = NULL )

1017 
$·¿ms
 = 
	`¬¿y
();

1018 
$·¿ms
['¡©us'] = 
$¡©us
;

1019 ià(
$Ït
) {

1020 
$·¿ms
['Ït'] = 
	`æßtv®
(
$Ït
);

1022 ià(
$lÚg
) {

1023 
$·¿ms
['lÚg'] = 
	`æßtv®
(
$lÚg
);

1025 ià(
	`is_¡ršg
(
$ªnÙ©iÚs
)) {

1026 
$·¿ms
['ªnÙ©iÚs'] = 
$ªnÙ©iÚs
;

1027 } 
	`–£if
 (
	`is_¬¿y
(
$ªnÙ©iÚs
)) {

1028 
$·¿ms
['ªnÙ©iÚs'] = 
	`jsÚ_’code
(
$ªnÙ©iÚs
);

1031  
$this
->
ßuth
->
	`po¡
Ğ'¡©u£s/upd©e', 
$·¿ms
 );

1032 
	}
}

1048 
funùiÚ
 
	$u¶ßd
Ğ
$¡©us
, 
$pic_·th
, 
$Ït
 = 
NULL
, 
$lÚg
 = NULL )

1050 
$·¿ms
 = 
	`¬¿y
();

1051 
$·¿ms
['¡©us'] = 
$¡©us
;

1052 
$·¿ms
['pic'] = '@'.
$pic_·th
;

1053 ià(
$Ït
) {

1054 
$·¿ms
['Ït'] = 
	`æßtv®
(
$Ït
);

1056 ià(
$lÚg
) {

1057 
$·¿ms
['lÚg'] = 
	`æßtv®
(
$lÚg
);

1060  
$this
->
ßuth
->
	`po¡
Ğ'¡©u£s/u¶ßd', 
$·¿ms
, 
Œue
 );

1061 
	}
}

1073 
funùiÚ
 
	$u¶ßd_u¾_‹xt
Ğ
$¡©us
, 
$u¾
 )

1075 
$·¿ms
 = 
	`¬¿y
();

1076 
$·¿ms
['¡©us'] = 
$¡©us
;

1077 
$·¿ms
['u¾'] = 
$u¾
;

1078  
$this
->
ßuth
->
	`po¡
Ğ'¡©u£s/u¶ßd', 
$·¿ms
, 
Œue
 );

1079 
	}
}

1093 
funùiÚ
 
emÙiÚs
Ğ
$ty³
 = "çû", 
$Ïnguage
 = "cnname" )

1095 
$·¿ms
 = 
¬¿y
();

1096 
	g$·¿ms
['ty³'] = 
$ty³
;

1097 
	g$·¿ms
['Ïnguage'] = 
$Ïnguage
;

1098  
	g$this
->
	gßuth
->
g‘
Ğ'emÙiÚs', 
$·¿ms
 );

1115 
funùiÚ
 
	$g‘_comm’ts_by_sid
Ğ
$sid
, 
$·ge
 = 1, 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0, 
$f‹r_by_authÜ
 = 0 )

1117 
$·¿ms
 = 
	`¬¿y
();

1118 
$this
->
	`id_fÜm©
(
$sid
);

1119 
$·¿ms
['id'] = 
$sid
;

1120 ià(
$sšû_id
) {

1121 
$this
->
	`id_fÜm©
(
$sšû_id
);

1122 
$·¿ms
['sšû_id'] = 
$sšû_id
;

1124 ià(
$max_id
) {

1125 
$this
->
	`id_fÜm©
(
$max_id
);

1126 
$·¿ms
['max_id'] = 
$max_id
;

1128 
$·¿ms
['couÁ'] = 
$couÁ
;

1129 
$·¿ms
['·ge'] = 
$·ge
;

1130 
$·¿ms
['f‹r_by_authÜ'] = 
$f‹r_by_authÜ
;

1131  
$this
->
ßuth
->
	`g‘
Ğ'comm’ts/show', 
$·¿ms
 );

1132 
	}
}

1147 
funùiÚ
 
	$comm’ts_by_me
Ğ
$·ge
 = 1 , 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0, 
$f‹r_by_sourû
 = 0 )

1149 
$·¿ms
 = 
	`¬¿y
();

1150 ià(
$sšû_id
) {

1151 
$this
->
	`id_fÜm©
(
$sšû_id
);

1152 
$·¿ms
['sšû_id'] = 
$sšû_id
;

1154 ià(
$max_id
) {

1155 
$this
->
	`id_fÜm©
(
$max_id
);

1156 
$·¿ms
['max_id'] = 
$max_id
;

1158 
$·¿ms
['couÁ'] = 
$couÁ
;

1159 
$·¿ms
['·ge'] = 
$·ge
;

1160 
$·¿ms
['f‹r_by_sourû'] = 
$f‹r_by_sourû
;

1161  
$this
->
ßuth
->
	`g‘
Ğ'comm’ts/by_me', 
$·¿ms
 );

1162 
	}
}

1177 
funùiÚ
 
	$comm’ts_to_me
Ğ
$·ge
 = 1 , 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0, 
$f‹r_by_authÜ
 = 0, 
$f‹r_by_sourû
 = 0)

1179 
$·¿ms
 = 
	`¬¿y
();

1180 ià(
$sšû_id
) {

1181 
$this
->
	`id_fÜm©
(
$sšû_id
);

1182 
$·¿ms
['sšû_id'] = 
$sšû_id
;

1184 ià(
$max_id
) {

1185 
$this
->
	`id_fÜm©
(
$max_id
);

1186 
$·¿ms
['max_id'] = 
$max_id
;

1188 
$·¿ms
['couÁ'] = 
$couÁ
;

1189 
$·¿ms
['·ge'] = 
$·ge
;

1190 
$·¿ms
['f‹r_by_authÜ'] = 
$f‹r_by_authÜ
;

1191 
$·¿ms
['f‹r_by_sourû'] = 
$f‹r_by_sourû
;

1192  
$this
->
ßuth
->
	`g‘
Ğ'comm’ts/to_me', 
$·¿ms
 );

1193 
	}
}

1208 
funùiÚ
 
	$comm’ts_tim–še
Ğ
$·ge
 = 1, 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0 )

1210 
$·¿ms
 = 
	`¬¿y
();

1211 ià(
$sšû_id
) {

1212 
$this
->
	`id_fÜm©
(
$sšû_id
);

1213 
$·¿ms
['sšû_id'] = 
$sšû_id
;

1215 ià(
$max_id
) {

1216 
$this
->
	`id_fÜm©
(
$max_id
);

1217 
$·¿ms
['max_id'] = 
$max_id
;

1220  
$this
->
	`»que¡_w™h_·g”
Ğ'comm’ts/tim–še', 
$·ge
, 
$couÁ
, 
$·¿ms
 );

1221 
	}
}

1237 
funùiÚ
 
	$comm’ts_m’tiÚs
Ğ
$·ge
 = 1, 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0, 
$f‹r_by_authÜ
 = 0, 
$f‹r_by_sourû
 = 0)

1239 
$·¿ms
 = 
	`¬¿y
();

1240 
$·¿ms
['sšû_id'] = 
$sšû_id
;

1241 
$·¿ms
['max_id'] = 
$max_id
;

1242 
$·¿ms
['couÁ'] = 
$couÁ
;

1243 
$·¿ms
['·ge'] = 
$·ge
;

1244 
$·¿ms
['f‹r_by_authÜ'] = 
$f‹r_by_authÜ
;

1245 
$·¿ms
['f‹r_by_sourû'] = 
$f‹r_by_sourû
;

1246  
$this
->
ßuth
->
	`g‘
Ğ'comm’ts/m’tiÚs', 
$·¿ms
 );

1247 
	}
}

1258 
funùiÚ
 
	$comm’ts_show_b©ch
Ğ
$cids
 )

1260 
$·¿ms
 = 
	`¬¿y
();

1261 ià(
	`is_¬¿y
Ğ
$cids
è&& !
	`em±y
( $cids)) {

1262 
	`fÜ—ch
(
$cids
 
as
 
$k
 => 
$v
) {

1263 
$this
->
	`id_fÜm©
(
$cids
[
$k
]);

1265 
$·¿ms
['cids'] = 
	`još
(',', 
$cids
);

1267 
$·¿ms
['cids'] = 
$cids
;

1269  
$this
->
ßuth
->
	`g‘
Ğ'comm’ts/show_b©ch', 
$·¿ms
 );

1270 
	}
}

1283 
funùiÚ
 
	$£nd_comm’t
Ğ
$id
 , 
$comm’t
 , 
$comm’t_Üi
 = 0)

1285 
$·¿ms
 = 
	`¬¿y
();

1286 
$·¿ms
['comm’t'] = 
$comm’t
;

1287 
$this
->
	`id_fÜm©
(
$id
);

1288 
$·¿ms
['id'] = 
$id
;

1289 
$·¿ms
['comm’t_Üi'] = 
$comm’t_Üi
;

1290  
$this
->
ßuth
->
	`po¡
Ğ'comm’ts/ü—‹', 
$·¿ms
 );

1291 
	}
}

1303 
funùiÚ
 
	$comm’t_de¡roy
Ğ
$cid
 )

1305 
$·¿ms
 = 
	`¬¿y
();

1306 
$·¿ms
['cid'] = 
$cid
;

1307  
$this
->
ßuth
->
	`po¡
Ğ'comm’ts/de¡roy', 
$·¿ms
);

1308 
	}
}

1321 
funùiÚ
 
	$comm’t_de¡roy_b©ch
Ğ
$ids
 )

1323 
$·¿ms
 = 
	`¬¿y
();

1324 ià(
	`is_¬¿y
(
$ids
è&& !
	`em±y
($ids)) {

1325 
	`fÜ—ch
(
$ids
 
as
 
$k
 => 
$v
) {

1326 
$this
->
	`id_fÜm©
(
$ids
[
$k
]);

1328 
$·¿ms
['cids'] = 
	`još
(',', 
$ids
);

1330 
$·¿ms
['cids'] = 
$ids
;

1332  
$this
->
ßuth
->
	`po¡
Ğ'comm’ts/de¡roy_b©ch', 
$·¿ms
);

1333 
	}
}

1350 
funùiÚ
 
	$»¶y
Ğ
$sid
, 
$‹xt
, 
$cid
, 
$w™hout_m’tiÚ
 = 0, 
$comm’t_Üi
 = 0 )

1352 
$this
->
	`id_fÜm©
Ğ
$sid
 );

1353 
$this
->
	`id_fÜm©
Ğ
$cid
 );

1354 
$·¿ms
 = 
	`¬¿y
();

1355 
$·¿ms
['id'] = 
$sid
;

1356 
$·¿ms
['comm’t'] = 
$‹xt
;

1357 
$·¿ms
['cid'] = 
$cid
;

1358 
$·¿ms
['w™hout_m’tiÚ'] = 
$w™hout_m’tiÚ
;

1359 
$·¿ms
['comm’t_Üi'] = 
$comm’t_Üi
;

1361  
$this
->
ßuth
->
	`po¡
Ğ'comm’ts/»¶y', 
$·¿ms
 );

1363 
	}
}

1375 
funùiÚ
 
	$show_u£r_by_id
Ğ
$uid
 )

1377 
$·¿ms
=
	`¬¿y
();

1378 iàĞ
$uid
 !=ğ
NULL
 ) {

1379 
$this
->
	`id_fÜm©
(
$uid
);

1380 
$·¿ms
['uid'] = 
$uid
;

1383  
$this
->
ßuth
->
	`g‘
('u£rs/show', 
$·¿ms
 );

1384 
	}
}

1396 
funùiÚ
 
	$show_u£r_by_Çme
Ğ
$sü“n_Çme
 )

1398 
$·¿ms
 = 
	`¬¿y
();

1399 
$·¿ms
['sü“n_Çme'] = 
$sü“n_Çme
;

1401  
$this
->
ßuth
->
	`g‘
Ğ'u£rs/show', 
$·¿ms
 );

1402 
	}
}

1413 
funùiÚ
 
	$domaš_show
Ğ
$domaš
 )

1415 
$·¿ms
 = 
	`¬¿y
();

1416 
$·¿ms
['domaš'] = 
$domaš
;

1417  
$this
->
ßuth
->
	`g‘
Ğ'u£rs/domaš_show', 
$·¿ms
 );

1418 
	}
}

1428 
funùiÚ
 
	$u£rs_show_b©ch_by_id
Ğ
$uids
 )

1430 
$·¿ms
 = 
	`¬¿y
();

1431 ià(
	`is_¬¿y
Ğ
$uids
 ) && !
	`em±y
( $uids )) {

1432 
	`fÜ—ch
Ğ
$uids
 
as
 
$k
 => 
$v
 ) {

1433 
$this
->
	`id_fÜm©
Ğ
$uids
[
$k
] );

1435 
$·¿ms
['uids'] = 
	`još
(',', 
$uids
);

1437 
$·¿ms
['uids'] = 
$uids
;

1439  
$this
->
ßuth
->
	`g‘
Ğ'u£rs/show_b©ch', 
$·¿ms
 );

1440 
	}
}

1450 
funùiÚ
 
	$u£rs_show_b©ch_by_Çme
Ğ
$sü“n_Çme
 )

1452 
$·¿ms
 = 
	`¬¿y
();

1453 ià(
	`is_¬¿y
Ğ
$sü“n_Çme
 ) && !
	`em±y
( $screen_name )) {

1454 
$·¿ms
['sü“n_Çme'] = 
	`još
(',', 
$sü“n_Çme
);

1456 
$·¿ms
['sü“n_Çme'] = 
$sü“n_Çme
;

1458  
$this
->
ßuth
->
	`g‘
Ğ'u£rs/show_b©ch', 
$·¿ms
 );

1459 
	}
}

1474 
funùiÚ
 
	$ä›nds_by_id
Ğ
$uid
, 
$cursÜ
 = 0, 
$couÁ
 = 50 )

1476 
$·¿ms
 = 
	`¬¿y
();

1477 
$·¿ms
['cursÜ'] = 
$cursÜ
;

1478 
$·¿ms
['couÁ'] = 
$couÁ
;

1479 
$·¿ms
['uid'] = 
$uid
;

1481  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/ä›nds', 
$·¿ms
 );

1482 
	}
}

1497 
funùiÚ
 
	$ä›nds_by_Çme
Ğ
$sü“n_Çme
, 
$cursÜ
 = 0, 
$couÁ
 = 50 )

1499 
$·¿ms
 = 
	`¬¿y
();

1500 
$·¿ms
['cursÜ'] = 
$cursÜ
;

1501 
$·¿ms
['couÁ'] = 
$couÁ
;

1502 
$·¿ms
['sü“n_Çme'] = 
$sü“n_Çme
;

1503  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/ä›nds', 
$·¿ms
 );

1504 
	}
}

1518 
funùiÚ
 
	$ä›nds_š_commÚ
Ğ
$uid
, 
$suid
 = 
NULL
, 
$·ge
 = 1, 
$couÁ
 = 50 )

1520 
$·¿ms
 = 
	`¬¿y
();

1521 
$·¿ms
['uid'] = 
$uid
;

1522 
$·¿ms
['suid'] = 
$suid
;

1523 
$·¿ms
['couÁ'] = 
$couÁ
;

1524 
$·¿ms
['·ge'] = 
$·ge
;

1525  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/ä›nds/š_commÚ', 
$·¿ms
 );

1526 
	}
}

1539 
funùiÚ
 
	$b©”®
Ğ
$uid
, 
$·ge
 = 1, 
$couÁ
 = 50, 
$sÜt
 = 0 )

1541 
$·¿ms
 = 
	`¬¿y
();

1542 
$·¿ms
['uid'] = 
$uid
;

1543 
$·¿ms
['couÁ'] = 
$couÁ
;

1544 
$·¿ms
['·ge'] = 
$·ge
;

1545 
$·¿ms
['sÜt'] = 
$sÜt
;

1546  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/ä›nds/b©”®', 
$·¿ms
 );

1547 
	}
}

1560 
funùiÚ
 
	$b©”®_ids
Ğ
$uid
, 
$·ge
 = 1, 
$couÁ
 = 50, 
$sÜt
 = 0)

1562 
$·¿ms
 = 
	`¬¿y
();

1563 
$·¿ms
['uid'] = 
$uid
;

1564 
$·¿ms
['couÁ'] = 
$couÁ
;

1565 
$·¿ms
['·ge'] = 
$·ge
;

1566 
$·¿ms
['sÜt'] = 
$sÜt
;

1567  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/ä›nds/b©”®/ids', 
$·¿ms
 );

1568 
	}
}

1582 
funùiÚ
 
	$ä›nds_ids_by_id
Ğ
$uid
, 
$cursÜ
 = 0, 
$couÁ
 = 500 )

1584 
$·¿ms
 = 
	`¬¿y
();

1585 
$this
->
	`id_fÜm©
(
$uid
);

1586 
$·¿ms
['uid'] = 
$uid
;

1587 
$·¿ms
['cursÜ'] = 
$cursÜ
;

1588 
$·¿ms
['couÁ'] = 
$couÁ
;

1589  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/ä›nds/ids', 
$·¿ms
 );

1590 
	}
}

1604 
funùiÚ
 
	$ä›nds_ids_by_Çme
Ğ
$sü“n_Çme
, 
$cursÜ
 = 0, 
$couÁ
 = 500 )

1606 
$·¿ms
 = 
	`¬¿y
();

1607 
$·¿ms
['cursÜ'] = 
$cursÜ
;

1608 
$·¿ms
['couÁ'] = 
$couÁ
;

1609 
$·¿ms
['sü“n_Çme'] = 
$sü“n_Çme
;

1610  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/ä›nds/ids', 
$·¿ms
 );

1611 
	}
}

1622 
funùiÚ
 
	$ä›nds_»m¬k_b©ch
Ğ
$uids
 )

1624 
$·¿ms
 = 
	`¬¿y
();

1625 ià(
	`is_¬¿y
Ğ
$uids
 ) && !
	`em±y
( $uids )) {

1626 
	`fÜ—ch
Ğ
$uids
 
as
 
$k
 => 
$v
) {

1627 
$this
->
	`id_fÜm©
Ğ
$uids
[
$k
] );

1629 
$·¿ms
['uids'] = 
	`još
(',', 
$uids
);

1631 
$·¿ms
['uids'] = 
$uids
;

1633  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/ä›nds/»m¬k_b©ch', 
$·¿ms
 );

1634 
	}
}

1646 
funùiÚ
 
	$fŞlow”s_by_id
Ğ
$uid
 , 
$cursÜ
 = 0 , 
$couÁ
 = 50)

1648 
$·¿ms
 = 
	`¬¿y
();

1649 
$this
->
	`id_fÜm©
(
$uid
);

1650 
$·¿ms
['uid'] = 
$uid
;

1651 
$·¿ms
['couÁ'] = 
$couÁ
;

1652 
$·¿ms
['cursÜ'] = 
$cursÜ
;

1653  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/fŞlow”s', 
$·¿ms
 );

1654 
	}
}

1666 
funùiÚ
 
	$fŞlow”s_by_Çme
Ğ
$sü“n_Çme
, 
$cursÜ
 = 0 , 
$couÁ
 = 50 )

1668 
$·¿ms
 = 
	`¬¿y
();

1669 
$·¿ms
['sü“n_Çme'] = 
$sü“n_Çme
;

1670 
$·¿ms
['couÁ'] = 
$couÁ
;

1671 
$·¿ms
['cursÜ'] = 
$cursÜ
;

1672  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/fŞlow”s', 
$·¿ms
 );

1673 
	}
}

1685 
funùiÚ
 
	$fŞlow”s_ids_by_id
Ğ
$uid
, 
$cursÜ
 = 0 , 
$couÁ
 = 50 )

1687 
$·¿ms
 = 
	`¬¿y
();

1688 
$this
->
	`id_fÜm©
(
$uid
);

1689 
$·¿ms
['uid'] = 
$uid
;

1690 
$·¿ms
['couÁ'] = 
$couÁ
;

1691 
$·¿ms
['cursÜ'] = 
$cursÜ
;

1692  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/fŞlow”s/ids', 
$·¿ms
 );

1693 
	}
}

1705 
funùiÚ
 
	$fŞlow”s_ids_by_Çme
Ğ
$sü“n_Çme
, 
$cursÜ
 = 0 , 
$couÁ
 = 50 )

1707 
$·¿ms
 = 
	`¬¿y
();

1708 
$·¿ms
['sü“n_Çme'] = 
$sü“n_Çme
;

1709 
$·¿ms
['couÁ'] = 
$couÁ
;

1710 
$·¿ms
['cursÜ'] = 
$cursÜ
;

1711  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/fŞlow”s/ids', 
$·¿ms
 );

1712 
	}
}

1723 
funùiÚ
 
	$fŞlow”s_aùive
Ğ
$uid
, 
$couÁ
 = 20)

1725 
$·¿m
 = 
	`¬¿y
();

1726 
$this
->
	`id_fÜm©
(
$uid
);

1727 
$·¿m
['uid'] = 
$uid
;

1728 
$·¿m
['couÁ'] = 
$couÁ
;

1729  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/fŞlow”s/aùive', 
$·¿m
);

1730 
	}
}

1743 
funùiÚ
 
	$ä›nds_chaš_fŞlow”s
Ğ
$uid
, 
$·ge
 = 1, 
$couÁ
 = 50 )

1745 
$·¿ms
 = 
	`¬¿y
();

1746 
$this
->
	`id_fÜm©
(
$uid
);

1747 
$·¿ms
['uid'] = 
$uid
;

1748 
$·¿ms
['couÁ'] = 
$couÁ
;

1749 
$·¿ms
['·ge'] = 
$·ge
;

1750  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/ä›nds_chaš/fŞlow”s', 
$·¿ms
 );

1751 
	}
}

1764 
funùiÚ
 
	$is_fŞlowed_by_id
Ğ
$rg‘_id
, 
$sourû_id
 = 
NULL
 )

1766 
$·¿ms
 = 
	`¬¿y
();

1767 
$this
->
	`id_fÜm©
(
$rg‘_id
);

1768 
$·¿ms
['rg‘_id'] = 
$rg‘_id
;

1770 iàĞ
$sourû_id
 !ğ
NULL
 ) {

1771 
$this
->
	`id_fÜm©
(
$sourû_id
);

1772 
$·¿ms
['sourû_id'] = 
$sourû_id
;

1775  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/show', 
$·¿ms
 );

1776 
	}
}

1789 
funùiÚ
 
	$is_fŞlowed_by_Çme
Ğ
$rg‘_Çme
, 
$sourû_Çme
 = 
NULL
 )

1791 
$·¿ms
 = 
	`¬¿y
();

1792 
$·¿ms
['rg‘_sü“n_Çme'] = 
$rg‘_Çme
;

1794 iàĞ
$sourû_Çme
 !ğ
NULL
 ) {

1795 
$·¿ms
['sourû_sü“n_Çme'] = 
$sourû_Çme
;

1798  
$this
->
ßuth
->
	`g‘
Ğ'ä›ndshs/show', 
$·¿ms
 );

1799 
	}
}

1811 
funùiÚ
 
	$fŞlow_by_id
Ğ
$uid
 )

1813 
$·¿ms
 = 
	`¬¿y
();

1814 
$this
->
	`id_fÜm©
(
$uid
);

1815 
$·¿ms
['uid'] = 
$uid
;

1816  
$this
->
ßuth
->
	`po¡
Ğ'ä›ndshs/ü—‹', 
$·¿ms
 );

1817 
	}
}

1829 
funùiÚ
 
	$fŞlow_by_Çme
Ğ
$sü“n_Çme
 )

1831 
$·¿ms
 = 
	`¬¿y
();

1832 
$·¿ms
['sü“n_Çme'] = 
$sü“n_Çme
;

1833  
$this
->
ßuth
->
	`po¡
Ğ'ä›ndshs/ü—‹', 
$·¿ms
);

1834 
	}
}

1845 
funùiÚ
 
	$fŞlow_ü—‹_b©ch
Ğ
$uids
 )

1847 
$·¿ms
 = 
	`¬¿y
();

1848 ià(
	`is_¬¿y
(
$uids
è&& !
	`em±y
($uids)) {

1849 
	`fÜ—ch
(
$uids
 
as
 
$k
 => 
$v
) {

1850 
$this
->
	`id_fÜm©
(
$uids
[
$k
]);

1852 
$·¿ms
['uids'] = 
	`još
(',', 
$uids
);

1854 
$·¿ms
['uids'] = 
$uids
;

1856  
$this
->
ßuth
->
	`po¡
Ğ'ä›ndshs/ü—‹_b©ch', 
$·¿ms
);

1857 
	}
}

1869 
funùiÚ
 
	$unfŞlow_by_id
Ğ
$uid
 )

1871 
$·¿ms
 = 
	`¬¿y
();

1872 
$this
->
	`id_fÜm©
(
$uid
);

1873 
$·¿ms
['uid'] = 
$uid
;

1874  
$this
->
ßuth
->
	`po¡
Ğ'ä›ndshs/de¡roy', 
$·¿ms
);

1875 
	}
}

1887 
funùiÚ
 
	$unfŞlow_by_Çme
Ğ
$sü“n_Çme
 )

1889 
$·¿ms
 = 
	`¬¿y
();

1890 
$·¿ms
['sü“n_Çme'] = 
$sü“n_Çme
;

1891  
$this
->
ßuth
->
	`po¡
Ğ'ä›ndshs/de¡roy', 
$·¿ms
);

1892 
	}
}

1905 
funùiÚ
 
	$upd©e_»m¬k
Ğ
$uid
, 
$»m¬k
 )

1907 
$·¿ms
 = 
	`¬¿y
();

1908 
$this
->
	`id_fÜm©
(
$uid
);

1909 
$·¿ms
['uid'] = 
$uid
;

1910 
$·¿ms
['»m¬k'] = 
$»m¬k
;

1911  
$this
->
ßuth
->
	`po¡
Ğ'ä›ndshs/»m¬k/upd©e', 
$·¿ms
);

1912 
	}
}

1927 
funùiÚ
 
	$li¡_dm
Ğ
$·ge
 = 1, 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0 )

1929 
$·¿ms
 = 
	`¬¿y
();

1930 ià(
$sšû_id
) {

1931 
$this
->
	`id_fÜm©
(
$sšû_id
);

1932 
$·¿ms
['sšû_id'] = 
$sšû_id
;

1934 ià(
$max_id
) {

1935 
$this
->
	`id_fÜm©
(
$max_id
);

1936 
$·¿ms
['max_id'] = 
$max_id
;

1939  
$this
->
	`»que¡_w™h_·g”
Ğ'dœeù_mes§ges', 
$·ge
, 
$couÁ
, 
$·¿ms
 );

1940 
	}
}

1955 
funùiÚ
 
	$li¡_dm_£Á
Ğ
$·ge
 = 1, 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0 )

1957 
$·¿ms
 = 
	`¬¿y
();

1958 ià(
$sšû_id
) {

1959 
$this
->
	`id_fÜm©
(
$sšû_id
);

1960 
$·¿ms
['sšû_id'] = 
$sšû_id
;

1962 ià(
$max_id
) {

1963 
$this
->
	`id_fÜm©
(
$max_id
);

1964 
$·¿ms
['max_id'] = 
$max_id
;

1967  
$this
->
	`»que¡_w™h_·g”
Ğ'dœeù_mes§ges/£Á', 
$·ge
, 
$couÁ
, 
$·¿ms
 );

1968 
	}
}

1980 
funùiÚ
 
	$dm_u£r_li¡
Ğ
$couÁ
 = 20, 
$cursÜ
 = 0)

1982 
$·¿ms
 = 
	`¬¿y
();

1983 
$·¿ms
['couÁ'] = 
$couÁ
;

1984 
$·¿ms
['cursÜ'] = 
$cursÜ
;

1985  
$this
->
ßuth
->
	`g‘
Ğ'dœeù_mes§ges/u£r_li¡', 
$·¿ms
 );

1986 
	}
}

2000 
funùiÚ
 
	$dm_cÚv”§tiÚ
Ğ
$uid
, 
$·ge
 = 1, 
$couÁ
 = 50, 
$sšû_id
 = 0, 
$max_id
 = 0)

2002 
$·¿ms
 = 
	`¬¿y
();

2003 
$this
->
	`id_fÜm©
(
$uid
);

2004 
$·¿ms
['uid'] = 
$uid
;

2005 ià(
$sšû_id
) {

2006 
$this
->
	`id_fÜm©
(
$sšû_id
);

2007 
$·¿ms
['sšû_id'] = 
$sšû_id
;

2009 ià(
$max_id
) {

2010 
$this
->
	`id_fÜm©
(
$max_id
);

2011 
$·¿ms
['max_id'] = 
$max_id
;

2013 
$·¿ms
['couÁ'] = 
$couÁ
;

2014 
$·¿ms
['·ge'] = 
$·ge
;

2015  
$this
->
ßuth
->
	`g‘
Ğ'dœeù_mes§ges/cÚv”§tiÚ', 
$·¿ms
 );

2016 
	}
}

2026 
funùiÚ
 
	$dm_show_b©ch
Ğ
$dmids
 )

2028 
$·¿ms
 = 
	`¬¿y
();

2029 ià(
	`is_¬¿y
(
$dmids
è&& !
	`em±y
($dmids)) {

2030 
	`fÜ—ch
(
$dmids
 
as
 
$k
 => 
$v
) {

2031 
$this
->
	`id_fÜm©
(
$dmids
[
$k
]);

2033 
$·¿ms
['dmids'] = 
	`još
(',', 
$dmids
);

2035 
$·¿ms
['dmids'] = 
$dmids
;

2037  
$this
->
ßuth
->
	`g‘
Ğ'dœeù_mes§ges/show_b©ch', 
$·¿ms
 );

2038 
	}
}

2052 
funùiÚ
 
	$£nd_dm_by_id
Ğ
$uid
, 
$‹xt
, 
$id
 = 
NULL
 )

2054 
$·¿ms
 = 
	`¬¿y
();

2055 
$this
->
	`id_fÜm©
Ğ
$uid
 );

2056 
$·¿ms
['‹xt'] = 
$‹xt
;

2057 
$·¿ms
['uid'] = 
$uid
;

2058 ià(
$id
) {

2059 
$this
->
	`id_fÜm©
Ğ
$id
 );

2060 
$·¿ms
['id'] = 
$id
;

2062  
$this
->
ßuth
->
	`po¡
Ğ'dœeù_mes§ges/Ãw', 
$·¿ms
 );

2063 
	}
}

2077 
funùiÚ
 
	$£nd_dm_by_Çme
Ğ
$sü“n_Çme
, 
$‹xt
, 
$id
 = 
NULL
 )

2079 
$·¿ms
 = 
	`¬¿y
();

2080 
$·¿ms
['‹xt'] = 
$‹xt
;

2081 
$·¿ms
['sü“n_Çme'] = 
$sü“n_Çme
;

2082 ià(
$id
) {

2083 
$this
->
	`id_fÜm©
Ğ
$id
 );

2084 
$·¿ms
['id'] = 
$id
;

2086  
$this
->
ßuth
->
	`po¡
Ğ'dœeù_mes§ges/Ãw', 
$·¿ms
);

2087 
	}
}

2099 
funùiÚ
 
	$d–‘e_dm
Ğ
$did
 )

2101 
$this
->
	`id_fÜm©
(
$did
);

2102 
$·¿ms
 = 
	`¬¿y
();

2103 
$·¿ms
['id'] = 
$did
;

2104  
$this
->
ßuth
->
	`po¡
('dœeù_mes§ges/de¡roy', 
$·¿ms
);

2105 
	}
}

2117 
funùiÚ
 
	$d–‘e_dms
Ğ
$dids
 )

2119 
$·¿ms
 = 
	`¬¿y
();

2120 ià(
	`is_¬¿y
(
$dids
è&& !
	`em±y
($dids)) {

2121 
	`fÜ—ch
(
$dids
 
as
 
$k
 => 
$v
) {

2122 
$this
->
	`id_fÜm©
(
$dids
[
$k
]);

2124 
$·¿ms
['ids'] = 
	`još
(',', 
$dids
);

2126 
$·¿ms
['ids'] = 
$dids
;

2129  
$this
->
ßuth
->
	`po¡
Ğ'dœeù_mes§ges/de¡roy_b©ch', 
$·¿ms
);

2130 
	}
}

2142 
funùiÚ
 
	$accouÁ_´ofe_basic
Ğ
$uid
 = 
NULL
 )

2144 
$·¿ms
 = 
	`¬¿y
();

2145 ià(
$uid
) {

2146 
$this
->
	`id_fÜm©
(
$uid
);

2147 
$·¿ms
['uid'] = 
$uid
;

2149  
$this
->
ßuth
->
	`g‘
Ğ'accouÁ/´ofe/basic', 
$·¿ms
 );

2150 
	}
}

2160 
funùiÚ
 
	$accouÁ_eduÿtiÚ
Ğ
$uid
 = 
NULL
 )

2162 
$·¿ms
 = 
	`¬¿y
();

2163 ià(
$uid
) {

2164 
$this
->
	`id_fÜm©
(
$uid
);

2165 
$·¿ms
['uid'] = 
$uid
;

2167  
$this
->
ßuth
->
	`g‘
Ğ'accouÁ/´ofe/eduÿtiÚ', 
$·¿ms
 );

2168 
	}
}

2178 
funùiÚ
 
	$accouÁ_eduÿtiÚ_b©ch
Ğ
$uids
 )

2180 
$·¿ms
 = 
	`¬¿y
();

2181 ià(
	`is_¬¿y
(
$uids
è&& !
	`em±y
($uids)) {

2182 
	`fÜ—ch
(
$uids
 
as
 
$k
 => 
$v
) {

2183 
$this
->
	`id_fÜm©
(
$uids
[
$k
]);

2185 
$·¿ms
['uids'] = 
	`još
(',', 
$uids
);

2187 
$·¿ms
['uids'] = 
$uids
;

2190  
$this
->
ßuth
->
	`g‘
Ğ'accouÁ/´ofe/eduÿtiÚ_b©ch', 
$·¿ms
 );

2191 
	}
}

2202 
funùiÚ
 
	$accouÁ_ÿ»”
Ğ
$uid
 = 
NULL
 )

2204 
$·¿ms
 = 
	`¬¿y
();

2205 ià(
$uid
) {

2206 
$this
->
	`id_fÜm©
(
$uid
);

2207 
$·¿ms
['uid'] = 
$uid
;

2209  
$this
->
ßuth
->
	`g‘
Ğ'accouÁ/´ofe/ÿ»”', 
$·¿ms
 );

2210 
	}
}

2220 
funùiÚ
 
	$accouÁ_ÿ»”_b©ch
Ğ
$uids
 )

2222 
$·¿ms
 = 
	`¬¿y
();

2223 ià(
	`is_¬¿y
(
$uids
è&& !
	`em±y
($uids)) {

2224 
	`fÜ—ch
(
$uids
 
as
 
$k
 => 
$v
) {

2225 
$this
->
	`id_fÜm©
(
$uids
[
$k
]);

2227 
$·¿ms
['uids'] = 
	`još
(',', 
$uids
);

2229 
$·¿ms
['uids'] = 
$uids
;

2232  
$this
->
ßuth
->
	`g‘
Ğ'accouÁ/´ofe/ÿ»”_b©ch', 
$·¿ms
 );

2233 
	}
}

2243 
funùiÚ
 
	$g‘_´ivacy
()

2245  
$this
->
ßuth
->
	`g‘
('account/get_privacy');

2246 
	}
}

2265 
funùiÚ
 
	$schoŞ_li¡
Ğ
$qu”y
 )

2267 
$·¿ms
 = 
$qu”y
;

2269  
$this
->
ßuth
->
	`g‘
Ğ'accouÁ/´ofe/schoŞ_li¡', 
$·¿ms
 );

2270 
	}
}

2280 
funùiÚ
 
	$¿‹_lim™_¡©us
()

2282  
$this
->
ßuth
->
	`g‘
( 'account/rate_limit_status' );

2283 
	}
}

2293 
funùiÚ
 
	$g‘_uid
()

2295  
$this
->
ßuth
->
	`g‘
( 'account/get_uid' );

2296 
	}
}

2333 
funùiÚ
 
	$upd©e_´ofe
Ğ
$´ofe
 )

2335  
$this
->
ßuth
->
	`po¡
Ğ'accouÁ/´ofe/basic_upd©e', 
$´ofe
);

2336 
	}
}

2355 
funùiÚ
 
	$edu_upd©e
Ğ
$edu_upd©e
 )

2357  
$this
->
ßuth
->
	`po¡
Ğ'accouÁ/´ofe/edu_upd©e', 
$edu_upd©e
);

2358 
	}
}

2368 
funùiÚ
 
	$edu_de¡roy
Ğ
$id
 )

2370 
$this
->
	`id_fÜm©
Ğ
$id
 );

2371 
$·¿ms
 = 
	`¬¿y
();

2372 
$·¿ms
['id'] = 
$id
;

2373  
$this
->
ßuth
->
	`po¡
Ğ'accouÁ/´ofe/edu_de¡roy', 
$·¿ms
);

2374 
	}
}

2395 
funùiÚ
 
	$ÿr_upd©e
Ğ
$ÿr_upd©e
 )

2397  
$this
->
ßuth
->
	`po¡
Ğ'accouÁ/´ofe/ÿr_upd©e', 
$ÿr_upd©e
);

2398 
	}
}

2409 
funùiÚ
 
	$ÿr_de¡roy
Ğ
$id
 )

2411 
$this
->
	`id_fÜm©
(
$id
);

2412 
$·¿ms
 = 
	`¬¿y
();

2413 
$·¿ms
['id'] = 
$id
;

2414  
$this
->
ßuth
->
	`po¡
Ğ'accouÁ/´ofe/ÿr_de¡roy', 
$·¿ms
);

2415 
	}
}

2425 
funùiÚ
 
	$upd©e_´ofe_image
Ğ
$image_·th
 )

2427 
$·¿ms
 = 
	`¬¿y
();

2428 
$·¿ms
['image'] = "@{$image_path}";

2430  
$this
->
ßuth
->
	`po¡
('accouÁ/av©¬/u¶ßd', 
$·¿ms
);

2431 
	}
}

2449 
funùiÚ
 
	$upd©e_´ivacy
Ğ
$´ivacy_£‰šgs
 )

2451  
$this
->
ßuth
->
	`po¡
Ğ'accouÁ/upd©e_´ivacy', 
$´ivacy_£‰šgs
);

2452 
	}
}

2466 
funùiÚ
 
	$g‘_çvÜ™es
Ğ
$·ge
 = 1, 
$couÁ
 = 50 )

2468 
$·¿ms
 = 
	`¬¿y
();

2469 
$·¿ms
['·ge'] = 
	`štv®
(
$·ge
);

2470 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

2472  
$this
->
ßuth
->
	`g‘
Ğ'çvÜ™es', 
$·¿ms
 );

2473 
	}
}

2486 
funùiÚ
 
	$çvÜ™es_show
Ğ
$id
 )

2488 
$·¿ms
 = 
	`¬¿y
();

2489 
$this
->
	`id_fÜm©
(
$id
);

2490 
$·¿ms
['id'] = 
$id
;

2491  
$this
->
ßuth
->
	`g‘
Ğ'çvÜ™es/show', 
$·¿ms
 );

2492 
	}
}

2506 
funùiÚ
 
	$çvÜ™es_by_gs
Ğ
$tid
, 
$·ge
 = 1, 
$couÁ
 = 50)

2508 
$·¿ms
 = 
	`¬¿y
();

2509 
$·¿ms
['tid'] = 
$tid
;

2510 
$·¿ms
['couÁ'] = 
$couÁ
;

2511 
$·¿ms
['·ge'] = 
$·ge
;

2512  
$this
->
ßuth
->
	`g‘
Ğ'çvÜ™es/by_gs', 
$·¿ms
 );

2513 
	}
}

2526 
funùiÚ
 
	$çvÜ™es_gs
Ğ
$·ge
 = 1, 
$couÁ
 = 50)

2528 
$·¿ms
 = 
	`¬¿y
();

2529 
$·¿ms
['couÁ'] = 
$couÁ
;

2530 
$·¿ms
['·ge'] = 
$·ge
;

2531  
$this
->
ßuth
->
	`g‘
Ğ'çvÜ™es/gs', 
$·¿ms
 );

2532 
	}
}

2544 
funùiÚ
 
	$add_to_çvÜ™es
Ğ
$sid
 )

2546 
$this
->
	`id_fÜm©
(
$sid
);

2547 
$·¿ms
 = 
	`¬¿y
();

2548 
$·¿ms
['id'] = 
$sid
;

2550  
$this
->
ßuth
->
	`po¡
Ğ'çvÜ™es/ü—‹', 
$·¿ms
 );

2551 
	}
}

2562 
funùiÚ
 
	$»move_äom_çvÜ™es
Ğ
$id
 )

2564 
$this
->
	`id_fÜm©
(
$id
);

2565 
$·¿ms
 = 
	`¬¿y
();

2566 
$·¿ms
['id'] = 
$id
;

2567  
$this
->
ßuth
->
	`po¡
Ğ'çvÜ™es/de¡roy', 
$·¿ms
);

2568 
	}
}

2581 
funùiÚ
 
	$»move_äom_çvÜ™es_b©ch
Ğ
$fids
 )

2583 
$·¿ms
 = 
	`¬¿y
();

2584 ià(
	`is_¬¿y
(
$fids
è&& !
	`em±y
($fids)) {

2585 
	`fÜ—ch
 (
$fids
 
as
 
$k
 => 
$v
) {

2586 
$this
->
	`id_fÜm©
(
$fids
[
$k
]);

2588 
$·¿ms
['ids'] = 
	`još
(',', 
$fids
);

2590 
$·¿ms
['ids'] = 
$fids
;

2593  
$this
->
ßuth
->
	`po¡
Ğ'çvÜ™es/de¡roy_b©ch', 
$·¿ms
);

2594 
	}
}

2607 
funùiÚ
 
	$çvÜ™es_gs_upd©e
Ğ
$id
, 
$gs
 )

2609 
$·¿ms
 = 
	`¬¿y
();

2610 
$·¿ms
['id'] = 
$id
;

2611 ià(
	`is_¬¿y
(
$gs
è&& !
	`em±y
($tags)) {

2612 
	`fÜ—ch
 (
$gs
 
as
 
$k
 => 
$v
) {

2613 
$this
->
	`id_fÜm©
(
$gs
[
$k
]);

2615 
$·¿ms
['gs'] = 
	`još
(',', 
$gs
);

2617 
$·¿ms
['gs'] = 
$gs
;

2619  
$this
->
ßuth
->
	`po¡
Ğ'çvÜ™es/gs/upd©e', 
$·¿ms
 );

2620 
	}
}

2631 
funùiÚ
 
	$çvÜ™es_upd©e_b©ch
Ğ
$tid
, 
$g
 )

2633 
$·¿ms
 = 
	`¬¿y
();

2634 
$·¿ms
['tid'] = 
$tid
;

2635 
$·¿ms
['g'] = 
$g
;

2636  
$this
->
ßuth
->
	`po¡
Ğ'çvÜ™es/gs/upd©e_b©ch', 
$·¿ms
);

2637 
	}
}

2648 
funùiÚ
 
	$çvÜ™es_gs_de¡roy_b©ch
Ğ
$tid
 )

2650 
$·¿ms
 = 
	`¬¿y
();

2651 
$·¿ms
['tid'] = 
$tid
;

2652  
$this
->
ßuth
->
	`po¡
Ğ'çvÜ™es/gs/de¡roy_b©ch', 
$·¿ms
);

2653 
	}
}

2665 
funùiÚ
 
	$g‘_Œ’ds
Ğ
$uid
 = 
NULL
, 
$·ge
 = 1, 
$couÁ
 = 10 )

2667 
$·¿ms
 = 
	`¬¿y
();

2668 ià(
$uid
) {

2669 
$·¿ms
['uid'] = 
$uid
;

2671 
$u£r_šfo
 = 
$this
->
	`g‘_uid
();

2672 
$·¿ms
['uid'] = 
$u£r_šfo
['uid'];

2674 
$this
->
	`id_fÜm©
Ğ
$·¿ms
['uid'] );

2675 
$·¿ms
['·ge'] = 
$·ge
;

2676 
$·¿ms
['couÁ'] = 
$couÁ
;

2677  
$this
->
ßuth
->
	`g‘
Ğ'Œ’ds', 
$·¿ms
 );

2678 
	}
}

2690 
funùiÚ
 
	$Œ’ds_is_fŞlow
Ğ
$Œ’d_Çme
 )

2692 
$·¿ms
 = 
	`¬¿y
();

2693 
$·¿ms
['Œ’d_Çme'] = 
$Œ’d_Çme
;

2694  
$this
->
ßuth
->
	`g‘
Ğ'Œ’ds/is_fŞlow', 
$·¿ms
 );

2695 
	}
}

2705 
funùiÚ
 
	$hou¾y_Œ’ds
Ğ
$ba£_­p
 = 0 )

2707 
$·¿ms
 = 
	`¬¿y
();

2708 
$·¿ms
['ba£_­p'] = 
$ba£_­p
;

2710  
$this
->
ßuth
->
	`g‘
Ğ'Œ’ds/hou¾y', 
$·¿ms
 );

2711 
	}
}

2721 
funùiÚ
 
	$day_Œ’ds
Ğ
$ba£_­p
 = 0 )

2723 
$·¿ms
 = 
	`¬¿y
();

2724 
$·¿ms
['ba£_­p'] = 
$ba£_­p
;

2726  
$this
->
ßuth
->
	`g‘
Ğ'Œ’ds/day', 
$·¿ms
 );

2727 
	}
}

2738 
funùiÚ
 
	$w“kly_Œ’ds
Ğ
$ba£_­p
 = 0 )

2740 
$·¿ms
 = 
	`¬¿y
();

2741 
$·¿ms
['ba£_­p'] = 
$ba£_­p
;

2743  
$this
->
ßuth
->
	`g‘
Ğ'Œ’ds/w“kly', 
$·¿ms
 );

2744 
	}
}

2755 
funùiÚ
 
	$fŞlow_Œ’ds
Ğ
$Œ’d_Çme
 )

2757 
$·¿ms
 = 
	`¬¿y
();

2758 
$·¿ms
['Œ’d_Çme'] = 
$Œ’d_Çme
;

2759  
$this
->
ßuth
->
	`po¡
Ğ'Œ’ds/fŞlow', 
$·¿ms
 );

2760 
	}
}

2771 
funùiÚ
 
	$unfŞlow_Œ’ds
Ğ
$tid
 )

2773 
$this
->
	`id_fÜm©
(
$tid
);

2775 
$·¿ms
 = 
	`¬¿y
();

2776 
$·¿ms
['Œ’d_id'] = 
$tid
;

2778  
$this
->
ßuth
->
	`po¡
Ğ'Œ’ds/de¡roy', 
$·¿ms
 );

2779 
	}
}

2791 
funùiÚ
 
	$g‘_gs
Ğ
$uid
 = 
NULL
, 
$·ge
 = 1, 
$couÁ
 = 20 )

2793 
$·¿ms
 = 
	`¬¿y
();

2794 iàĞ
$uid
 ) {

2795 
$·¿ms
['uid'] = 
$uid
;

2797 
$u£r_šfo
 = 
$this
->
	`g‘_uid
();

2798 
$·¿ms
['uid'] = 
$u£r_šfo
['uid'];

2800 
$this
->
	`id_fÜm©
Ğ
$·¿ms
['uid'] );

2801 
$·¿ms
['·ge'] = 
$·ge
;

2802 
$·¿ms
['couÁ'] = 
$couÁ
;

2803  
$this
->
ßuth
->
	`g‘
Ğ'gs', 
$·¿ms
 );

2804 
	}
}

2814 
funùiÚ
 
	$g‘_gs_b©ch
Ğ
$uids
 )

2816 
$·¿ms
 = 
	`¬¿y
();

2817 ià(
	`is_¬¿y
Ğ
$uids
 ) && !
	`em±y
( $uids )) {

2818 
	`fÜ—ch
 (
$uids
 
as
 
$k
 => 
$v
) {

2819 
$this
->
	`id_fÜm©
Ğ
$uids
[
$k
] );

2821 
$·¿ms
['uids'] = 
	`još
(',', 
$uids
);

2823 
$·¿ms
['uids'] = 
$uids
;

2825  
$this
->
ßuth
->
	`g‘
Ğ'gs/gs_b©ch', 
$·¿ms
 );

2826 
	}
}

2837 
funùiÚ
 
	$g‘_sugge¡_gs
Ğ
$couÁ
 = 10)

2839 
$·¿ms
 = 
	`¬¿y
();

2840 
$·¿ms
['couÁ'] = 
	`štv®
(
$couÁ
);

2841  
$this
->
ßuth
->
	`g‘
Ğ'gs/sugge¡iÚs', 
$·¿ms
 );

2842 
	}
}

2853 
funùiÚ
 
	$add_gs
Ğ
$gs
 )

2855 
$·¿ms
 = 
	`¬¿y
();

2856 ià(
	`is_¬¿y
(
$gs
è&& !
	`em±y
($tags)) {

2857 
$·¿ms
['gs'] = 
	`još
(',', 
$gs
);

2859 
$·¿ms
['gs'] = 
$gs
;

2861  
$this
->
ßuth
->
	`po¡
Ğ'gs/ü—‹', 
$·¿ms
);

2862 
	}
}

2873 
funùiÚ
 
	$d–‘e_g
Ğ
$g_id
 )

2875 
$·¿ms
 = 
	`¬¿y
();

2876 
$·¿ms
['g_id'] = 
$g_id
;

2877  
$this
->
ßuth
->
	`po¡
Ğ'gs/de¡roy', 
$·¿ms
 );

2878 
	}
}

2889 
funùiÚ
 
	$d–‘e_gs
Ğ
$ids
 )

2891 
$·¿ms
 = 
	`¬¿y
();

2892 ià(
	`is_¬¿y
(
$ids
è&& !
	`em±y
($ids)) {

2893 
$·¿ms
['ids'] = 
	`još
(',', 
$ids
);

2895 
$·¿ms
['ids'] = 
$ids
;

2897  
$this
->
ßuth
->
	`po¡
Ğ'gs/de¡roy_b©ch', 
$·¿ms
 );

2898 
	}
}

2909 
funùiÚ
 
	$v”ify_nickÇme
Ğ
$nickÇme
 )

2911 
$·¿ms
 = 
	`¬¿y
();

2912 
$·¿ms
['nickÇme'] = 
$nickÇme
;

2913  
$this
->
ßuth
->
	`g‘
Ğ'»gi¡”/v”ify_nickÇme', 
$·¿ms
 );

2914 
	}
}

2927 
funùiÚ
 
	$£¬ch_u£rs
Ğ
$q
, 
$couÁ
 = 10 )

2929 
$·¿ms
 = 
	`¬¿y
();

2930 
$·¿ms
['q'] = 
$q
;

2931 
$·¿ms
['couÁ'] = 
$couÁ
;

2932  
$this
->
ßuth
->
	`g‘
Ğ'£¬ch/sugge¡iÚs/u£rs', 
$·¿ms
 );

2933 
	}
}

2945 
funùiÚ
 
	$£¬ch_¡©u£s
Ğ
$q
, 
$couÁ
 = 10)

2947 
$·¿ms
 = 
	`¬¿y
();

2948 
$·¿ms
['q'] = 
$q
;

2949 
$·¿ms
['couÁ'] = 
$couÁ
;

2950  
$this
->
ßuth
->
	`g‘
Ğ'£¬ch/sugge¡iÚs/¡©u£s', 
$·¿ms
 );

2951 
	}
}

2964 
funùiÚ
 
	$£¬ch_schoŞs
Ğ
$q
, 
$couÁ
 = 10, 
$ty³
 = 1)

2966 
$·¿ms
 = 
	`¬¿y
();

2967 
$·¿ms
['q'] = 
$q
;

2968 
$·¿ms
['couÁ'] = 
$couÁ
;

2969 
$·¿ms
['ty³'] = 
$ty³
;

2970  
$this
->
ßuth
->
	`g‘
Ğ'£¬ch/sugge¡iÚs/schoŞs', 
$·¿ms
 );

2971 
	}
}

2982 
funùiÚ
 
	$£¬ch_com·n›s
Ğ
$q
, 
$couÁ
 = 10)

2984 
$·¿ms
 = 
	`¬¿y
();

2985 
$·¿ms
['q'] = 
$q
;

2986 
$·¿ms
['couÁ'] = 
$couÁ
;

2987  
$this
->
ßuth
->
	`g‘
Ğ'£¬ch/sugge¡iÚs/com·n›s', 
$·¿ms
 );

2988 
	}
}

3002 
funùiÚ
 
	$£¬ch_©_u£rs
Ğ
$q
, 
$couÁ
 = 10, 
$ty³
=0, 
$¿nge
 = 2)

3004 
$·¿ms
 = 
	`¬¿y
();

3005 
$·¿ms
['q'] = 
$q
;

3006 
$·¿ms
['couÁ'] = 
$couÁ
;

3007 
$·¿ms
['ty³'] = 
$ty³
;

3008 
$·¿ms
['¿nge'] = 
$¿nge
;

3009  
$this
->
ßuth
->
	`g‘
Ğ'£¬ch/sugge¡iÚs/©_u£rs', 
$·¿ms
 );

3010 
	}
}

3038 
funùiÚ
 
	$£¬ch_¡©u£s_high
Ğ
$qu”y
 )

3040  
$this
->
ßuth
->
	`g‘
Ğ'£¬ch/¡©u£s', 
$qu”y
 );

3041 
	}
}

3067 
funùiÚ
 
	$£¬ch_u£rs_keywÜds
Ğ
$qu”y
 )

3069  
$this
->
ßuth
->
	`g‘
Ğ'£¬ch/u£rs', 
$qu”y
 );

3070 
	}
}

3097 
funùiÚ
 
hÙ_u£rs
Ğ
$ÿ‹gÜy
 = "default" )

3099 
$·¿ms
 = 
¬¿y
();

3100 
	g$·¿ms
['ÿ‹gÜy'] = 
$ÿ‹gÜy
;

3102  
	g$this
->
	gßuth
->
g‘
Ğ'sugge¡iÚs/u£rs/hÙ', 
$·¿ms
 );

3116 
funùiÚ
 
	$sugge¡iÚs_may_š‹»¡ed
Ğ
$·ge
 = 1, 
$couÁ
 = 10 )

3118 
$·¿ms
 = 
	`¬¿y
();

3119 
$·¿ms
['·ge'] = 
$·ge
;

3120 
$·¿ms
['couÁ'] = 
$couÁ
;

3121  
$this
->
ßuth
->
	`g‘
Ğ'sugge¡iÚs/u£rs/may_š‹»¡ed', 
$·¿ms
);

3122 
	}
}

3134 
funùiÚ
 
	$sugge¡iÚs_u£rs_by_¡©us
Ğ
$cÚ‹Á
, 
$num
 = 10 )

3136 
$·¿ms
 = 
	`¬¿y
();

3137 
$·¿ms
['cÚ‹Á'] = 
$cÚ‹Á
;

3138 
$·¿ms
['num'] = 
$num
;

3139  
$this
->
ßuth
->
	`g‘
Ğ'sugge¡iÚs/u£rs/by_¡©us', 
$·¿ms
);

3140 
	}
}

3151 
funùiÚ
 
	$hÙ_çvÜ™es
Ğ
$·ge
 = 1, 
$couÁ
 = 20 )

3153 
$·¿ms
 = 
	`¬¿y
();

3154 
$·¿ms
['couÁ'] = 
$couÁ
;

3155 
$·¿ms
['·ge'] = 
$·ge
;

3156  
$this
->
ßuth
->
	`g‘
Ğ'sugge¡iÚs/çvÜ™es/hÙ', 
$·¿ms
);

3157 
	}
}

3167 
funùiÚ
 
	$put_u£rs_nÙ_š‹»¡ed
Ğ
$uid
 )

3169 
$·¿ms
 = 
	`¬¿y
();

3170 
$·¿ms
['uid'] = 
$uid
;

3171  
$this
->
ßuth
->
	`po¡
Ğ'sugge¡iÚs/u£rs/nÙ_š‹»¡ed', 
$·¿ms
);

3172 
	}
}

3181 
´Ùeùed
 
funùiÚ
 
»que¡_w™h_·g”
Ğ
$u¾
, 
$·ge
 = 
çl£
, 
$couÁ
 = f®£, 
$·¿ms
 = 
	$¬¿y
() )

3183 ifĞ
$·ge
 ) 
$·¿ms
['page'] = $page;

3184 ifĞ
$couÁ
 ) 
$·¿ms
['count'] = $count;

3186  
$this
->
ßuth
->
	`g‘
(
$u¾
, 
$·¿ms
 );

3187 
	}
}

3192 
´Ùeùed
 
funùiÚ
 
»que¡_w™h_uid
Ğ
$u¾
, 
$uid_Ü_Çme
, 
$·ge
 = 
çl£
, 
$couÁ
 = f®£, 
$cursÜ
 = f®£, 
$po¡
 = f®£, 
$·¿ms
 = 
	$¬¿y
())

3194 ifĞ
$·ge
 ) 
$·¿ms
['page'] = $page;

3195 ifĞ
$couÁ
 ) 
$·¿ms
['count'] = $count;

3196 ifĞ
$cursÜ
 )
$·¿ms
['cursor'] = $cursor;

3198 ifĞ
$po¡
 ) 
$m‘hod
 = 'post';

3199 
$m‘hod
 = 'get';

3201 iàĞ
$uid_Ü_Çme
 !=ğ
NULL
 ) {

3202 
$this
->
	`id_fÜm©
(
$uid_Ü_Çme
);

3203 
$·¿ms
['id'] = 
$uid_Ü_Çme
;

3206  
$this
->
ßuth
->
	`$m‘hod
(
$u¾
, 
$·¿ms
 );

3208 
	}
}

3213 
´Ùeùed
 
funùiÚ
 
	$id_fÜm©
(&
$id
) {

3214 iàĞ
	`is_æßt
(
$id
) ) {

3215 
$id
 = 
	`numb”_fÜm©
($id, 0, '', '');

3216 } 
	`–£if
 ( 
	`is_¡ršg
(
$id
) ) {

3217 
$id
 = 
	`Œim
($id);

3219 
	}
}

	@application/helpers/we_error_helper.php

1 <?
php


2 
funùiÚ
 
	$we_sšgË_”rÜ
(
$mes§ge
){

3  
	`¬¿y
('”rÜ'=>
$mes§ge
);

4 
	}
}

6 
funùiÚ
 
	$we_doubË_”rÜ
(
$mes§ge
){

7  
	`¬¿y
×¼ay('”rÜ'=>
$mes§ge
));

8 
	}
}

	@application/language/english/error_lang.php

1 <?
	gphp


	@application/logs/log-2012-05-01.php

1 
	gERROR
 - 2012-05-01 12:33:29 --> 
»que¡_sucûss
:
s
:12:"we.userLogin";

2 
	gERROR
 - 2012-05-01 12:33:29 --> 
a
:2:{
i
:0;
	gs
:13:"‹¡1@163.com";
	gi
:1;s:6:"111111";}

3 
	gERROR
 - 2012-05-01 12:34:00 --> 
»que¡_sucûss
:
we
.
u£rLogš


4 
ERROR
 - 2012-05-01 12:34:00 --> 
a
:2:{
i
:0;
	gs
:13:"‹¡1@163.com";
	gi
:1;s:6:"111111";}

5 
	gERROR
 - 2012-05-01 12:42:15 --> 
»que¡_sucûss
:
we
.
u£rLogš


6 
ERROR
 - 2012-05-01 12:42:15 --> 
a
:2:{
i
:0;
	gs
:13:"‹¡1@163.com";
	gi
:1;s:6:"111111";}

	@application/logs/log-2012-05-04.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed'); ?>

3 
	gERROR
 - 2012-05-04 23:53:37 --> 
»que¡_sucûss
:
we
.
addU£r


4 
ERROR
 - 2012-05-04 23:53:37 --> 
a
:4:{
i
:0;
	gs
:13:"‹¡1@163.com";
	gi
:1;s:6:"111111";i:2;s:5:"test1";i:3;s:12:"111111111111";}

5 
	gERROR
 - 2012-05-04 23:53:37 --> 
a
:3:{
s
:13:"blu‘oÙh_mac";
	gs
:12:"111111111111";s:14:"blu‘oÙh_Çme";s:0:"";s:11:"ü—‹_time";
	gi
:1336146817;}

6 
	gERROR
 - 2012-05-04 23:53:37 -->

7 
ERROR
 - 2012-05-04 23:53:37 --> 
a
:4:{
s
:7:"u£r_id";
	gi
:1;
	gs
:13:"bluetooth_mac";s:12:"111111111111";s:14:"bluetooth_name";s:0:"";s:11:"create_time";i:1336146817;}

8 
	gERROR
 - 2012-05-04 23:53:37 --> 1

9 
ERROR
 - 2012-05-04 23:53:37 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

10 
ERROR
 - 2012-05-04 23:53:37 --> 
»que¡_sucûss
:
we
.
§yH–lo


11 
ERROR
 - 2012-05-04 23:53:37 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

12 
	gERROR
 - 2012-05-04 23:53:37 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

13 
ERROR
 - 2012-05-04 23:53:37 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


14 
ERROR
 - 2012-05-04 23:53:37 --> 
a
:2:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";
	}
}

15 
	gERROR
 - 2012-05-04 23:53:37 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

16 
ERROR
 - 2012-05-04 23:53:37 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


17 
ERROR
 - 2012-05-04 23:53:37 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

18 
	gERROR
 - 2012-05-04 23:53:37 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

19 
ERROR
 - 2012-05-04 23:53:37 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


20 
ERROR
 - 2012-05-04 23:53:37 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

21 
	gERROR
 - 2012-05-04 23:53:37 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

22 
ERROR
 - 2012-05-04 23:53:56 --> 
»que¡_sucûss
:
we
.
§yH–lo


23 
ERROR
 - 2012-05-04 23:53:56 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

24 
	gERROR
 - 2012-05-04 23:53:56 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

25 
ERROR
 - 2012-05-04 23:53:56 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


26 
ERROR
 - 2012-05-04 23:53:56 --> 
a
:2:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";
	}
}

27 
	gERROR
 - 2012-05-04 23:53:56 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

28 
ERROR
 - 2012-05-04 23:53:56 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


29 
ERROR
 - 2012-05-04 23:53:56 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

30 
	gERROR
 - 2012-05-04 23:53:56 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

31 
ERROR
 - 2012-05-04 23:53:56 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


32 
ERROR
 - 2012-05-04 23:53:56 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

33 
	gERROR
 - 2012-05-04 23:53:56 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

34 
ERROR
 - 2012-05-04 23:53:58 --> 
»que¡_sucûss
:
we
.
§yH–lo


35 
ERROR
 - 2012-05-04 23:53:58 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

36 
	gERROR
 - 2012-05-04 23:53:58 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

37 
ERROR
 - 2012-05-04 23:53:58 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


38 
ERROR
 - 2012-05-04 23:53:58 --> 
a
:2:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";
	}
}

39 
	gERROR
 - 2012-05-04 23:53:58 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

40 
ERROR
 - 2012-05-04 23:53:58 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


41 
ERROR
 - 2012-05-04 23:53:58 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

42 
	gERROR
 - 2012-05-04 23:53:58 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

43 
ERROR
 - 2012-05-04 23:53:58 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


44 
ERROR
 - 2012-05-04 23:53:58 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

45 
	gERROR
 - 2012-05-04 23:53:58 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

46 
ERROR
 - 2012-05-04 23:54:02 --> 
»que¡_sucûss
:
we
.
§yH–lo


47 
ERROR
 - 2012-05-04 23:54:02 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

48 
	gERROR
 - 2012-05-04 23:54:02 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

49 
ERROR
 - 2012-05-04 23:54:03 --> 
»que¡_sucûss
:
we
.
po¡Weibo


50 
ERROR
 - 2012-05-04 23:54:03 --> 
a
:3:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:5:"h–lo";i:2;s:6:"public";
	}
}

51 
	gERROR
 - 2012-05-04 23:54:03 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

52 
ERROR
 - 2012-05-04 23:54:03 --> 
»que¡_sucûss
:
we
.
§yH–lo


53 
ERROR
 - 2012-05-04 23:54:03 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

54 
	gERROR
 - 2012-05-04 23:54:03 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

55 
ERROR
 - 2012-05-04 23:54:03 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


56 
ERROR
 - 2012-05-04 23:54:03 --> 
a
:2:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";
	}
}

57 
	gERROR
 - 2012-05-04 23:54:03 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

58 
ERROR
 - 2012-05-04 23:54:03 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


59 
ERROR
 - 2012-05-04 23:54:03 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

60 
	gERROR
 - 2012-05-04 23:54:03 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

61 
ERROR
 - 2012-05-04 23:54:03 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


62 
ERROR
 - 2012-05-04 23:54:03 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

63 
	gERROR
 - 2012-05-04 23:54:03 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

	@application/logs/log-2012-05-05.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed'); ?>

3 
	gERROR
 - 2012-05-05 00:28:32 --> 
»que¡_sucûss
:
we
.
§yH–lo


4 
ERROR
 - 2012-05-05 00:28:32 --> 
a
:1:{
i
:0;
	gs
:32:"87d810ae21b2b62fe44725d1a84c6687";}

5 
	gERROR
 - 2012-05-05 00:28:32 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

6 
ERROR
 - 2012-05-05 00:28:32 --> 
»que¡_sucûss
:
we
.
§yH–lo


7 
ERROR
 - 2012-05-05 00:28:32 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

8 
	gERROR
 - 2012-05-05 00:28:32 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

9 
ERROR
 - 2012-05-05 00:28:32 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


10 
ERROR
 - 2012-05-05 00:28:32 --> 
a
:2:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";
	}
}

11 
	gERROR
 - 2012-05-05 00:28:32 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

12 
ERROR
 - 2012-05-05 00:28:32 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


13 
ERROR
 - 2012-05-05 00:28:32 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

14 
	gERROR
 - 2012-05-05 00:28:32 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

15 
ERROR
 - 2012-05-05 00:28:32 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


16 
ERROR
 - 2012-05-05 00:28:32 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

17 
	gERROR
 - 2012-05-05 00:28:32 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

18 
ERROR
 - 2012-05-05 00:28:45 --> 
»que¡_sucûss
:
we
.
§yH–lo


19 
ERROR
 - 2012-05-05 00:28:45 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

20 
	gERROR
 - 2012-05-05 00:28:45 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

21 
ERROR
 - 2012-05-05 00:28:45 --> 
»que¡_sucûss
:
we
.
po¡Weibo


22 
ERROR
 - 2012-05-05 00:28:45 --> 
a
:3:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:21:"ç°åœ¨æ„Ÿè§‰è¿˜ä¸é”™";i:2;s:6:"public";
	}
}

23 
	gERROR
 - 2012-05-05 00:28:45 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

24 
ERROR
 - 2012-05-05 00:28:45 --> 
»que¡_sucûss
:
we
.
§yH–lo


25 
ERROR
 - 2012-05-05 00:28:45 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

26 
	gERROR
 - 2012-05-05 00:28:45 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

27 
ERROR
 - 2012-05-05 00:28:45 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


28 
ERROR
 - 2012-05-05 00:28:45 --> 
a
:2:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";
	}
}

29 
	gERROR
 - 2012-05-05 00:28:45 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

30 
ERROR
 - 2012-05-05 00:28:45 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


31 
ERROR
 - 2012-05-05 00:28:45 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

32 
	gERROR
 - 2012-05-05 00:28:45 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

33 
ERROR
 - 2012-05-05 00:28:45 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


34 
ERROR
 - 2012-05-05 00:28:45 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

35 
	gERROR
 - 2012-05-05 00:28:45 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

36 
ERROR
 - 2012-05-05 00:28:56 --> 
»que¡_sucûss
:
we
.
§yH–lo


37 
ERROR
 - 2012-05-05 00:28:56 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

38 
	gERROR
 - 2012-05-05 00:28:56 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

39 
ERROR
 - 2012-05-05 00:28:56 --> 
»que¡_sucûss
:
we
.
po¡Weibo


40 
ERROR
 - 2012-05-05 00:28:56 --> 
a
:3:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:15:"å°¤å…¶æ˜¯é€Ÿåº¦";i:2;s:6:"public";
	}
}

41 
	gERROR
 - 2012-05-05 00:28:56 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

42 
ERROR
 - 2012-05-05 00:28:56 --> 
»que¡_sucûss
:
we
.
§yH–lo


43 
ERROR
 - 2012-05-05 00:28:56 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

44 
	gERROR
 - 2012-05-05 00:28:56 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

45 
ERROR
 - 2012-05-05 00:28:56 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


46 
ERROR
 - 2012-05-05 00:28:56 --> 
a
:2:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";
	}
}

47 
	gERROR
 - 2012-05-05 00:28:56 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

48 
ERROR
 - 2012-05-05 00:28:56 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


49 
ERROR
 - 2012-05-05 00:28:56 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

50 
	gERROR
 - 2012-05-05 00:28:56 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

51 
ERROR
 - 2012-05-05 00:28:56 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


52 
ERROR
 - 2012-05-05 00:28:56 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

53 
	gERROR
 - 2012-05-05 00:28:56 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

54 
ERROR
 - 2012-05-05 00:28:58 --> 
»que¡_sucûss
:
we
.
§yH–lo


55 
ERROR
 - 2012-05-05 00:28:58 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

56 
	gERROR
 - 2012-05-05 00:28:58 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

57 
ERROR
 - 2012-05-05 00:28:58 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


58 
ERROR
 - 2012-05-05 00:28:58 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

59 
	gERROR
 - 2012-05-05 00:28:58 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

60 
ERROR
 - 2012-05-05 00:28:58 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


61 
ERROR
 - 2012-05-05 00:28:58 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:2:"10";
	}
}

62 
	gERROR
 - 2012-05-05 00:28:58 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

63 
ERROR
 - 2012-05-05 00:36:40 --> 
»que¡_sucûss
:
we
.
§yH–lo


64 
ERROR
 - 2012-05-05 00:36:40 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

65 
	gERROR
 - 2012-05-05 00:36:40 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

66 
ERROR
 - 2012-05-05 00:36:40 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


67 
ERROR
 - 2012-05-05 00:36:40 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

68 
	gERROR
 - 2012-05-05 00:36:40 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

69 
ERROR
 - 2012-05-05 00:36:40 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


70 
ERROR
 - 2012-05-05 00:36:40 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:2:"10";
	}
}

71 
	gERROR
 - 2012-05-05 00:36:40 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

72 
ERROR
 - 2012-05-05 00:36:48 --> 
»que¡_sucûss
:
we
.
§yH–lo


73 
ERROR
 - 2012-05-05 00:36:48 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

74 
	gERROR
 - 2012-05-05 00:36:48 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

75 
ERROR
 - 2012-05-05 00:36:49 --> 
»que¡_sucûss
:
we
.
§yH–lo


76 
ERROR
 - 2012-05-05 00:36:49 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

77 
	gERROR
 - 2012-05-05 00:36:49 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

78 
ERROR
 - 2012-05-05 00:36:49 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


79 
ERROR
 - 2012-05-05 00:36:49 --> 
a
:2:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";
	}
}

80 
	gERROR
 - 2012-05-05 00:36:49 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

81 
ERROR
 - 2012-05-05 00:36:49 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


82 
ERROR
 - 2012-05-05 00:36:49 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

83 
	gERROR
 - 2012-05-05 00:36:49 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

84 
ERROR
 - 2012-05-05 00:36:49 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


85 
ERROR
 - 2012-05-05 00:36:49 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

86 
	gERROR
 - 2012-05-05 00:36:49 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

87 
ERROR
 - 2012-05-05 12:09:54 --> 
»que¡_sucûss
:
we
.
§yH–lo


88 
ERROR
 - 2012-05-05 12:09:54 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

89 
	gERROR
 - 2012-05-05 12:09:54 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

90 
ERROR
 - 2012-05-05 12:09:54 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


91 
ERROR
 - 2012-05-05 12:09:54 --> 
a
:2:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";
	}
}

92 
	gERROR
 - 2012-05-05 12:09:54 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

93 
ERROR
 - 2012-05-05 12:09:54 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


94 
ERROR
 - 2012-05-05 12:09:54 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

95 
	gERROR
 - 2012-05-05 12:09:54 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

96 
ERROR
 - 2012-05-05 12:09:55 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


97 
ERROR
 - 2012-05-05 12:09:55 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

98 
	gERROR
 - 2012-05-05 12:09:55 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

99 
ERROR
 - 2012-05-05 12:10:12 --> 
»que¡_sucûss
:
we
.
§yH–lo


100 
ERROR
 - 2012-05-05 12:10:12 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

101 
	gERROR
 - 2012-05-05 12:10:12 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

102 
ERROR
 - 2012-05-05 12:10:12 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


103 
ERROR
 - 2012-05-05 12:10:12 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

104 
	gERROR
 - 2012-05-05 12:10:12 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

105 
ERROR
 - 2012-05-05 12:10:12 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


106 
ERROR
 - 2012-05-05 12:10:12 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:2:"10";
	}
}

107 
	gERROR
 - 2012-05-05 12:10:12 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

108 
ERROR
 - 2012-05-05 12:10:13 --> 
»que¡_sucûss
:
we
.
§yH–lo


109 
ERROR
 - 2012-05-05 12:10:13 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

110 
	gERROR
 - 2012-05-05 12:10:13 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

111 
ERROR
 - 2012-05-05 12:10:13 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


112 
ERROR
 - 2012-05-05 12:10:13 --> 
a
:2:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";
	}
}

113 
	gERROR
 - 2012-05-05 12:10:13 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

114 
ERROR
 - 2012-05-05 12:10:14 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


115 
ERROR
 - 2012-05-05 12:10:14 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

116 
	gERROR
 - 2012-05-05 12:10:14 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

117 
ERROR
 - 2012-05-05 12:10:14 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


118 
ERROR
 - 2012-05-05 12:10:14 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

119 
	gERROR
 - 2012-05-05 12:10:14 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

120 
ERROR
 - 2012-05-05 12:36:06 --> 
»que¡_sucûss
:
we
.
§yH–lo


121 
ERROR
 - 2012-05-05 12:36:06 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

122 
	gERROR
 - 2012-05-05 12:36:06 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

123 
ERROR
 - 2012-05-05 12:36:06 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


124 
ERROR
 - 2012-05-05 12:36:06 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

125 
	gERROR
 - 2012-05-05 12:36:06 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

126 
ERROR
 - 2012-05-05 12:36:06 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


127 
ERROR
 - 2012-05-05 12:36:06 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:2:"10";
	}
}

128 
	gERROR
 - 2012-05-05 12:36:06 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

129 
ERROR
 - 2012-05-05 12:36:08 --> 
»que¡_sucûss
:
we
.
§yH–lo


130 
ERROR
 - 2012-05-05 12:36:08 --> 
a
:1:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";
	}
}

131 
	gERROR
 - 2012-05-05 12:36:08 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

132 
ERROR
 - 2012-05-05 12:36:08 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


133 
ERROR
 - 2012-05-05 12:36:08 --> 
a
:2:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";
	}
}

134 
	gERROR
 - 2012-05-05 12:36:08 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

135 
ERROR
 - 2012-05-05 12:36:08 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


136 
ERROR
 - 2012-05-05 12:36:08 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

137 
	gERROR
 - 2012-05-05 12:36:08 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

138 
ERROR
 - 2012-05-05 12:36:08 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


139 
ERROR
 - 2012-05-05 12:36:08 --> 
a
:4:{
i
:0;
s
:32:"87d810«21b2b62ã44725d1a84c6687";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

140 
	gERROR
 - 2012-05-05 12:36:08 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

	@application/logs/log-2012-05-11.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed'); ?>

3 
	gERROR
 - 2012-05-11 23:56:00 --> 
»que¡_sucûss
:
we
.
addU£r


4 
ERROR
 - 2012-05-11 23:56:00 --> 
a
:4:{
i
:0;
	gs
:13:"‹¡2@163.com";
	gi
:1;s:6:"222222";i:2;s:5:"test2";i:3;s:12:"222222222222";}

5 
	gERROR
 - 2012-05-11 23:56:00 --> 
a
:3:{
s
:13:"blu‘oÙh_mac";
	gs
:12:"222222222222";s:14:"blu‘oÙh_Çme";s:0:"";s:11:"ü—‹_time";
	gi
:1336751760;}

6 
	gERROR
 - 2012-05-11 23:56:00 -->

7 
ERROR
 - 2012-05-11 23:56:00 --> 
a
:4:{
s
:7:"u£r_id";
	gi
:2;
	gs
:13:"bluetooth_mac";s:12:"222222222222";s:14:"bluetooth_name";s:0:"";s:11:"create_time";i:1336751760;}

8 
	gERROR
 - 2012-05-11 23:56:00 --> 2

9 
ERROR
 - 2012-05-11 23:56:00 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

10 
ERROR
 - 2012-05-11 23:56:00 --> 
»que¡_sucûss
:
we
.
§yH–lo


11 
ERROR
 - 2012-05-11 23:56:00 --> 
a
:1:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";
	}
}

12 
	gERROR
 - 2012-05-11 23:56:00 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

13 
ERROR
 - 2012-05-11 23:56:00 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


14 
ERROR
 - 2012-05-11 23:56:00 --> 
a
:2:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";
	}
}

15 
	gERROR
 - 2012-05-11 23:56:00 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

16 
ERROR
 - 2012-05-11 23:56:00 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


17 
ERROR
 - 2012-05-11 23:56:00 --> 
a
:4:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

18 
	gERROR
 - 2012-05-11 23:56:00 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

19 
ERROR
 - 2012-05-11 23:56:00 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


20 
ERROR
 - 2012-05-11 23:56:00 --> 
a
:4:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

21 
	gERROR
 - 2012-05-11 23:56:00 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

22 
ERROR
 - 2012-05-11 23:56:10 --> 
»que¡_sucûss
:
we
.
§yH–lo


23 
ERROR
 - 2012-05-11 23:56:10 --> 
a
:1:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";
	}
}

24 
	gERROR
 - 2012-05-11 23:56:11 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

25 
ERROR
 - 2012-05-11 23:56:11 --> 
»que¡_sucûss
:
we
.
po¡Weibo


26 
ERROR
 - 2012-05-11 23:56:11 --> 
a
:3:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:27:"ä¸ºå•¥è¿™ä¸ªå¯ä»¥ç”¨å‘¢ï¼Ÿ";i:2;s:6:"public";
	}
}

27 
	gERROR
 - 2012-05-11 23:56:11 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

28 
ERROR
 - 2012-05-11 23:56:11 --> 
»que¡_sucûss
:
we
.
§yH–lo


29 
ERROR
 - 2012-05-11 23:56:11 --> 
a
:1:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";
	}
}

30 
	gERROR
 - 2012-05-11 23:56:11 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

31 
ERROR
 - 2012-05-11 23:56:11 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


32 
ERROR
 - 2012-05-11 23:56:11 --> 
a
:2:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";
	}
}

33 
	gERROR
 - 2012-05-11 23:56:11 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

34 
ERROR
 - 2012-05-11 23:56:11 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


35 
ERROR
 - 2012-05-11 23:56:11 --> 
a
:4:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

36 
	gERROR
 - 2012-05-11 23:56:11 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

37 
ERROR
 - 2012-05-11 23:56:11 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


38 
ERROR
 - 2012-05-11 23:56:11 --> 
a
:4:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

39 
	gERROR
 - 2012-05-11 23:56:11 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

40 
ERROR
 - 2012-05-11 23:56:22 --> 
»que¡_sucûss
:
we
.
§yH–lo


41 
ERROR
 - 2012-05-11 23:56:22 --> 
a
:1:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";
	}
}

42 
	gERROR
 - 2012-05-11 23:56:22 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

43 
ERROR
 - 2012-05-11 23:56:22 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


44 
ERROR
 - 2012-05-11 23:56:22 --> 
a
:2:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";
	}
}

45 
	gERROR
 - 2012-05-11 23:56:22 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

46 
ERROR
 - 2012-05-11 23:56:22 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


47 
ERROR
 - 2012-05-11 23:56:22 --> 
a
:4:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

48 
	gERROR
 - 2012-05-11 23:56:22 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

49 
ERROR
 - 2012-05-11 23:56:22 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


50 
ERROR
 - 2012-05-11 23:56:22 --> 
a
:4:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

51 
	gERROR
 - 2012-05-11 23:56:22 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

52 
ERROR
 - 2012-05-11 23:56:30 --> 
»que¡_sucûss
:
we
.
§yH–lo


53 
ERROR
 - 2012-05-11 23:56:30 --> 
a
:1:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";
	}
}

54 
	gERROR
 - 2012-05-11 23:56:30 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

55 
ERROR
 - 2012-05-11 23:56:30 --> 
»que¡_sucûss
:
we
.
po¡Weibo


56 
ERROR
 - 2012-05-11 23:56:30 --> 
a
:3:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:21:"è¿™æˆ‘äº†ä¸ªå»åˆ—ï½";i:2;s:6:"public";
	}
}

57 
	gERROR
 - 2012-05-11 23:56:30 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

58 
ERROR
 - 2012-05-11 23:56:30 --> 
»que¡_sucûss
:
we
.
§yH–lo


59 
ERROR
 - 2012-05-11 23:56:30 --> 
a
:1:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";
	}
}

60 
	gERROR
 - 2012-05-11 23:56:30 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

61 
ERROR
 - 2012-05-11 23:56:30 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


62 
ERROR
 - 2012-05-11 23:56:30 --> 
a
:2:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";
	}
}

63 
	gERROR
 - 2012-05-11 23:56:30 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

64 
ERROR
 - 2012-05-11 23:56:30 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


65 
ERROR
 - 2012-05-11 23:56:30 --> 
a
:4:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

66 
	gERROR
 - 2012-05-11 23:56:30 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

67 
ERROR
 - 2012-05-11 23:56:30 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


68 
ERROR
 - 2012-05-11 23:56:30 --> 
a
:4:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

69 
	gERROR
 - 2012-05-11 23:56:30 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

	@application/logs/log-2012-05-12.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed'); ?>

3 
	gERROR
 - 2012-05-12 00:02:41 --> 
Sev”™y
: 
NÙiû
 --> 
U£
 
of
 
undefšed
 
cÚ¡ªt
 
mes§ge
 - 
assumed
 'mes§ge' /
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
h–³rs
/
we_”rÜ_h–³r
.
php
 3

	@application/logs/log-2012-05-13.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed'); ?>

3 
	gERROR
 - 2012-05-13 13:24:48 --> 
Sev”™y
: 
NÙiû
 --> 
Undefšed
 
šdex
: 
blu‘oÙh_d©a
 /
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
mod–s
/
m_wlške
.
php
 57

4 
ERROR
 - 2012-05-13 13:24:48 --> 
a
:3:{
s
:13:"blu‘oÙh_mac";
	gN
;
	gs
:14:"blu‘oÙh_Çme";s:5:"‹¡3";s:11:"ü—‹_time";
	gi
:1336886688;}

5 
	gERROR
 - 2012-05-13 13:24:48 -->

6 
ERROR
 - 2012-05-13 13:24:48 --> 
Qu”y
 
”rÜ
: 
CŞumn
 'blu‘oÙh_mac' 
ÿÂÙ
 
be
 
nuÎ


7 
ERROR
 - 2012-05-13 13:24:48 --> 
Sev”™y
: 
W¬nšg
 --> 
CªnÙ
 
modify
 
h—d”
 
šfÜm©iÚ
 - 
h—d”s
 
®»ady
 
£Á
 
by
 (
ouut
 
¡¬‹d
 
©
 /
v¬
/
www
/
wlške
/
sy¡em
/
cÜe
/
Exû±iÚs
.
php
:185è/v¬/www/wlške/sy¡em/cÜe/
CommÚ
.php 446

8 
ERROR
 - 2012-05-13 13:25:54 --> 
a
:3:{
s
:13:"blu‘oÙh_mac";
	gs
:12:"333333333333";s:14:"blu‘oÙh_Çme";s:5:"‹¡3";s:11:"ü—‹_time";
	gi
:1336886754;}

9 
	gERROR
 - 2012-05-13 13:25:54 -->

10 
ERROR
 - 2012-05-13 13:26:16 --> 
a
:3:{
s
:13:"blu‘oÙh_mac";
	gs
:12:"333333333333";s:14:"blu‘oÙh_Çme";s:5:"‹¡3";s:11:"ü—‹_time";
	gi
:1336886776;}

11 
	gERROR
 - 2012-05-13 13:26:16 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

12 
ERROR
 - 2012-05-13 13:26:16 --> 3

13 
ERROR
 - 2012-05-13 13:26:16 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

14 
ERROR
 - 2012-05-13 13:26:43 --> 
a
:3:{
s
:13:"blu‘oÙh_mac";s:12:"333333333333";s:14:"blu‘oÙh_Çme";s:5:"‹¡3";s:11:"ü—‹_time";
i
:1336886803;
	}
}

15 
	gERROR
 - 2012-05-13 13:26:43 --> 3

16 
ERROR
 - 2012-05-13 13:32:13 --> 
Sev”™y
: 
W¬nšg
 --> 
Missšg
 
¬gum’t
 1 
c_‹¡
::
addU£r
(è/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/c_‹¡.
php
 11

17 
ERROR
 - 2012-05-13 13:32:13 --> 
Sev”™y
: 
W¬nšg
 --> 
Missšg
 
¬gum’t
 2 
c_‹¡
::
addU£r
(è/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/c_‹¡.
php
 11

18 
ERROR
 - 2012-05-13 13:32:13 --> 
Sev”™y
: 
W¬nšg
 --> 
Missšg
 
¬gum’t
 3 
c_‹¡
::
addU£r
(è/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/c_‹¡.
php
 11

19 
ERROR
 - 2012-05-13 13:32:13 --> 
Sev”™y
: 
W¬nšg
 --> 
Missšg
 
¬gum’t
 4 
c_‹¡
::
addU£r
(è/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/c_‹¡.
php
 11

20 
ERROR
 - 2012-05-13 13:32:13 --> 
Sev”™y
: 
W¬nšg
 --> 
Missšg
 
¬gum’t
 5 
c_‹¡
::
addU£r
(è/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/c_‹¡.
php
 11

21 
ERROR
 - 2012-05-13 13:32:13 --> 
Sev”™y
: 
NÙiû
 --> 
Undefšed
 
v¬ŸbË
: 
ema
 /
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/
c_‹¡
.
php
 13

22 
ERROR
 - 2012-05-13 13:32:13 --> 
Sev”™y
: 
NÙiû
 --> 
Undefšed
 
v¬ŸbË
: 
·sswÜd
 /
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/
c_‹¡
.
php
 13

23 
ERROR
 - 2012-05-13 13:32:13 --> 
Sev”™y
: 
NÙiû
 --> 
Undefšed
 
v¬ŸbË
: 
»®_Çme
 /
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/
c_‹¡
.
php
 13

24 
ERROR
 - 2012-05-13 13:32:13 --> 
Sev”™y
: 
NÙiû
 --> 
Undefšed
 
v¬ŸbË
: 
blu‘oÙh_mac
 /
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/
c_‹¡
.
php
 13

25 
ERROR
 - 2012-05-13 13:32:13 --> 
Sev”™y
: 
NÙiû
 --> 
Undefšed
 
v¬ŸbË
: 
blu‘oÙh_Çme
 /
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/
c_‹¡
.
php
 13

26 
ERROR
 - 2012-05-13 13:40:11 --> 
a
:3:{
s
:13:"blu‘oÙh_mac";
	gs
:12:"333333333333";s:14:"blu‘oÙh_Çme";s:5:"‹¡3";s:11:"ü—‹_time";
	gi
:1336887611;}

27 
	gERROR
 - 2012-05-13 13:40:11 --> 3

28 
ERROR
 - 2012-05-13 13:53:44 --> 
Sev”™y
: 
W¬nšg
 --> 
Missšg
 
¬gum’t
 1 
c_‹¡
::
šdex
(è/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/c_‹¡.
php
 8

29 
ERROR
 - 2012-05-13 13:53:44 --> 
Sev”™y
: 
NÙiû
 --> 
Undefšed
 
v¬ŸbË
: 
¬gs
 /
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/
c_‹¡
.
php
 9

30 
ERROR
 - 2012-05-13 13:54:10 --> 404 
Page
 
NÙ
 
Found
 --> 
c_‹¡
/
a1


31 
ERROR
 - 2012-05-13 20:19:00 --> 
»que¡_sucûss
:
we
.
§yH–lo


32 
ERROR
 - 2012-05-13 20:19:00 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

33 
ERROR
 - 2012-05-13 20:19:00 --> 
a
:1:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";
	}
}

34 
	gERROR
 - 2012-05-13 20:19:00 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

35 
ERROR
 - 2012-05-13 20:19:00 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

36 
ERROR
 - 2012-05-13 20:19:01 --> 
»que¡_sucûss
:
we
.
§yH–lo


37 
ERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

38 
ERROR
 - 2012-05-13 20:19:01 --> 
a
:1:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";
	}
}

39 
	gERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

40 
ERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

41 
ERROR
 - 2012-05-13 20:19:01 --> 
»que¡_sucûss
:
we
.
g‘AÎPublicWeibo


42 
ERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

43 
ERROR
 - 2012-05-13 20:19:01 --> 
a
:2:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";
	}
}

44 
	gERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

45 
ERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

46 
ERROR
 - 2012-05-13 20:19:01 --> 
»que¡_sucûss
:
we
.
g‘Hi¡ÜyN—rU£rD©as


47 
ERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

48 
ERROR
 - 2012-05-13 20:19:01 --> 
a
:4:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

49 
	gERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

50 
ERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

51 
ERROR
 - 2012-05-13 20:19:01 --> 
»que¡_sucûss
:
we
.
g‘GroupD©asbyC©egÜy


52 
ERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

53 
ERROR
 - 2012-05-13 20:19:01 --> 
a
:4:{
i
:0;
s
:32:"85e71a8bd643e635dcã7df0b26b22f6";i:1;s:0:"";i:2;s:1:"1";i:3;s:1:"3";
	}
}

54 
	gERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Log
.
php
 106

55 
ERROR
 - 2012-05-13 20:19:01 --> 
Sev”™y
: 
W¬nšg
 --> 
	$chmod
(): 
O³¿tiÚ
 
nÙ
 
³rm™‹d
 /
v¬
/
www
/
wlške
/
sy¡em
/
lib¿r›s
/
Cache
/
driv”s
/
Cache_fe
.
php
 93

56 
ERROR
 - 2012-05-13 21:59:30 --> 
Sev”™y
: 
NÙiû
 --> 
Undefšed
 
off£t
: 0 /
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
mod–s
/
m_u£r
.
php
 659

57 
ERROR
 - 2012-05-13 22:10:51 --> 
a
:3:{
s
:13:"blu‘oÙh_mac";s:12:"333333333333";s:14:"blu‘oÙh_Çme";s:5:"‹¡3";s:11:"ü—‹_time";
i
:1336918251;
	}
}

58 
	gERROR
 - 2012-05-13 22:10:51 --> 3

59 
ERROR
 - 2012-05-13 22:10:51 --> 
Sev”™y
: 
NÙiû
 --> 
Undefšed
 
v¬ŸbË
: 
»®Çme
 /
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
mod–s
/
m_wlške
.
php
 64

60 
ERROR
 - 2012-05-13 22:12:20 --> 
a
:3:{
s
:13:"blu‘oÙh_mac";
	gs
:12:"333333333333";s:14:"blu‘oÙh_Çme";s:5:"‹¡3";s:11:"ü—‹_time";
	gi
:1336918340;}

61 
	gERROR
 - 2012-05-13 22:12:20 --> 3

62 
ERROR
 - 2012-05-13 22:12:20 --> 
Sev”™y
: 
NÙiû
 --> 
Undefšed
 
v¬ŸbË
: 
»®Çme
 /
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
mod–s
/
m_wlške
.
php
 64

63 
ERROR
 - 2012-05-13 22:13:21 --> 
a
:3:{
s
:13:"blu‘oÙh_mac";
	gs
:12:"333333333333";s:14:"blu‘oÙh_Çme";s:5:"‹¡3";s:11:"ü—‹_time";
	gi
:1336918401;}

64 
	gERROR
 - 2012-05-13 22:13:21 --> 3

65 
ERROR
 - 2012-05-13 22:24:59 --> 
a
:3:{
s
:13:"blu‘oÙh_mac";
	gs
:12:"333333333333";s:14:"blu‘oÙh_Çme";s:5:"‹¡3";s:11:"ü—‹_time";
	gi
:1336919099;}

66 
	gERROR
 - 2012-05-13 22:24:59 --> 3

	@application/logs/log-2012-05-14.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed'); ?>

3 
	gERROR
 - 2012-05-14 15:04:27 --> 
Sev”™y
: 
W¬nšg
 --> 
šşude_Úû
(/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/
w–come
.
php
): 
çed
 
to
 
İ’
 
¡»am
: 
No
 
such
 
fe
 
Ü
 
dœeùÜy
 /v¬/www/wlške/­¶iÿtiÚ/
thœd_·¹y
/
CIUn™
/
lib¿r›s
/CIUnit.php 143

4 
ERROR
 - 2012-05-14 15:04:27 --> 
Sev”™y
: 
W¬nšg
 --> 
	$šşude_Úû
(): 
Faed
 
İ’šg
 '/v¬/www/wlške/­¶iÿtiÚ/cÚŒŞËrs/w–come.php' 
	`šşusiÚ
 (
šşude_·th
='.:/u¤/sh¬e/php:/u¤/sh¬e/³¬'è/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
thœd_·¹y
/
CIUn™
/
lib¿r›s
/CIUn™.
php
 143

5 
ERROR
 - 2012-05-14 15:07:30 --> 
Sev”™y
: 
W¬nšg
 --> 
	`šşude_Úû
(/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/
w–come
.
php
): 
çed
 
to
 
İ’
 
¡»am
: 
No
 
such
 
fe
 
Ü
 
dœeùÜy
 /v¬/www/wlške/­¶iÿtiÚ/
thœd_·¹y
/
CIUn™
/
lib¿r›s
/CIUnit.php 143

6 
ERROR
 - 2012-05-14 15:07:30 --> 
Sev”™y
: 
W¬nšg
 --> 
	$šşude_Úû
(): 
Faed
 
İ’šg
 '/v¬/www/wlške/­¶iÿtiÚ/cÚŒŞËrs/w–come.php' 
	`šşusiÚ
 (
šşude_·th
='.:/u¤/sh¬e/php:/u¤/sh¬e/³¬'è/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
thœd_·¹y
/
CIUn™
/
lib¿r›s
/CIUn™.
php
 143

7 
ERROR
 - 2012-05-14 15:10:08 --> 
Sev”™y
: 
W¬nšg
 --> 
	`šşude_Úû
(/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/
w–come
.
php
): 
çed
 
to
 
İ’
 
¡»am
: 
No
 
such
 
fe
 
Ü
 
dœeùÜy
 /v¬/www/wlške/­¶iÿtiÚ/
thœd_·¹y
/
CIUn™
/
lib¿r›s
/CIUnit.php 143

8 
ERROR
 - 2012-05-14 15:10:08 --> 
Sev”™y
: 
W¬nšg
 --> 
	$šşude_Úû
(): 
Faed
 
İ’šg
 '/v¬/www/wlške/­¶iÿtiÚ/cÚŒŞËrs/w–come.php' 
	`šşusiÚ
 (
šşude_·th
='.:/u¤/sh¬e/php:/u¤/sh¬e/³¬'è/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
thœd_·¹y
/
CIUn™
/
lib¿r›s
/CIUn™.
php
 143

9 
ERROR
 - 2012-05-14 15:10:41 --> 
Sev”™y
: 
W¬nšg
 --> 
	`šşude_Úû
(/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
cÚŒŞËrs
/
w–come
.
php
): 
çed
 
to
 
İ’
 
¡»am
: 
No
 
such
 
fe
 
Ü
 
dœeùÜy
 /v¬/www/wlške/­¶iÿtiÚ/
thœd_·¹y
/
CIUn™
/
lib¿r›s
/CIUnit.php 143

10 
ERROR
 - 2012-05-14 15:10:41 --> 
Sev”™y
: 
W¬nšg
 --> 
	$šşude_Úû
(): 
Faed
 
İ’šg
 '/v¬/www/wlške/­¶iÿtiÚ/cÚŒŞËrs/w–come.php' 
	`šşusiÚ
 (
šşude_·th
='.:/u¤/sh¬e/php:/u¤/sh¬e/³¬'è/
v¬
/
www
/
wlške
/
­¶iÿtiÚ
/
thœd_·¹y
/
CIUn™
/
lib¿r›s
/CIUn™.
php
 143

11 
ERROR
 - 2012-05-14 15:14:19 --> 
Qu”y
 
”rÜ
: 
TabË
 'wlške_‹¡.we_phÚe_ÿ¼›r' 
dÛ¢
'tƒxist

12 
ERROR
 - 2012-05-14 15:15:59 --> 
Qu”y
 
”rÜ
: 
TabË
 'wlške_‹¡.we_phÚe_ÿ¼›r' 
dÛ¢
'tƒxist

13 
ERROR
 - 2012-05-14 15:16:55 --> 
Qu”y
 
”rÜ
: 
TabË
 'ci_‹¡.we_phÚe_ÿ¼›r' 
dÛ¢
'tƒxist

14 
ERROR
 - 2012-05-14 15:23:03 --> 
Qu”y
 
”rÜ
: 
TabË
 'wlške_‹¡.we_phÚe_ÿ¼›r' 
dÛ¢
'tƒxist

15 
ERROR
 - 2012-05-14 19:25:44 --> 
Sev”™y
: 
NÙiû
 --> 
Undefšed
 
´İ”ty
: 
m_u£rTe¡
::
$lßd
 /
v¬
/
www
/
wlške
/
‹¡s
/
mod–s
/m_u£rTe¡.
php
 7

	@application/models/m_album.php

1 <?
php


2 şas 
	cM_®bum
 
ex‹nds
 
	mCI_Mod–
{

3 
´iv©e
 
	m$®bum_bË
;

5 
´iv©e
 
	m$piùu»_bË
;

10 
funùiÚ
 
	$__cÚ¡ruù
(){

11 
·»Á
::
	`__cÚ¡ruù
();

12 
$this
->
®bum_bË
=$this->
db
->
	`db´efix
('album');

13 
$this
->
piùu»_bË
=$this->
db
->
	`db´efix
('picture');

20 
funùiÚ
 
	$š£¹_®bum
(
$d©a
){

21 
$this
->
db
->
	`š£¹
($this->
®bum_bË
,
$d©a
);

22  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

23 
	}
}

31 
funùiÚ
 
	$add_piùu»
(
$d©a
){

32 
$this
->
db
->
	`š£¹
($this->
piùu»_bË
,
$d©a
);

33  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

34 
	}
}

41 
funùiÚ
 
g‘_u£r_®bum_id
(
$u£r_id
,
$®bum_Çme
='default'){

42 
$this
->
db
->
£Ëù
('album_id');

43 
	g$this
->
	gdb
->
äom
(
$this
->
®bum_bË
);

44 
	g$this
->
	gdb
->
wh”e
(
¬¿y
(

45 'u£r_id'=>
$u£r_id
,

46 '®bum_Çme'=>
$®bum_Çme


49 
	g$qu”y
=
$this
->
db
->
g‘
();

50 
	g$num
=
$qu”y
->
row
();

51 
	g$qu”y
->
ä“_»suÉ
();

52  
	g$num
->
	g®bum_id
;

60 
funùiÚ
 
	$g‘_u£r_id_by_®bum_id
(
$®bum_id
){

61 
$this
->
db
->
	`wh”e
('®bum_id',
$®bum_id
);

62 
$qu”y
 = 
$this
->
db
->
	`g‘
($this->
®bum_bË
);

63 
$u£r_id
=
$qu”y
->
	`row
();

64 
$qu”y
->
	`ä“_»suÉ
();

65  
$u£r_id
;

66 
	}
}

	@application/models/m_blog.php

1 <?
php


3 şas 
	cM_blog
 
ex‹nds
 
	mCI_Mod–
{

4 
´iv©e
 
	m$blog_bË
;

5 
´iv©e
 
	m$blog_ÿ‹gÜy_bË
;

6 
´iv©e
 
	m$blog_g_bË
;

11 
funùiÚ
 
	$__cÚ¡ruù
(){

12 
·»Á
::
	`__cÚ¡ruù
();

13 
$this
->
blog_bË
=$this->
db
->
	`db´efix
('blog_table');

14 
$this
->
blog_ÿ‹gÜy_bË
=$this->
db
->
	`db´efix
('blog_category_table');

15 
$this
->
blog_g_bË
=$this->
db
->
	`db´efix
('blog_tag_table');

24 
funùiÚ
 
	$add_blog
(
$d©a
){

25 
$this
->
db
->
	`š£¹
($this->
blog_bË
,
$d©a
);

26  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

27 
	}
}

	@application/models/m_comment.php

1 <?
php


2 şas 
	cM_comm’t
 
ex‹nds
 
	mCI_Mod–
{

3 
´iv©e
 
	m$ä›nd_bË
;

8 
funùiÚ
 
	$__cÚ¡ruù
(){

9 
·»Á
::
	`__cÚ¡ruù
();

10 
$this
->
comm’t_bË
=$this->
db
->
	`db´efix
('comment');

19 
funùiÚ
 
	$add_comm’t
(
$d©a
){

20 
$this
->
db
->
	`š£¹
($this->
comm’t_bË
,
$d©a
);

21  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

22 
	}
}

	@application/models/m_create_table.php

1 <?
php


2 şas 
	cM_ü—‹_bË
 
ex‹nds
 
	mCI_Mod–
{

3 
´iv©e
 
	m$bËs
;

4 
funùiÚ
 
	$__cÚ¡ruù
(){

5 
·»Á
::
	`__cÚ¡ruù
();

7 
$this
->
bËs
=
	`¬¿y
(

34 
	`fÜ—ch
(
$this
->
bËs
 
as
 
$bË
){

35 
$»®_bË
=
$this
->
db
->
	`db´efix
(
$bË
);

36 if(!
$this
->
db
->
	`bË_exi¡s
(
$»®_bË
))

37 
	`ÿÎ_u£r_func
(
	`¬¿y
("M_ü—‹_bË",
$bË
),
$»®_bË
);

42 
funùiÚ
 
	$ãed
(
$»®_bË
){

43 
$this
->
db
->
	`sim¶e_qu”y
("

44 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

45 `
ãed_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

46 `
u£r_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

47 `
ãed_ty³
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
,

48 `
ãed_cÚ‹Á
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
,

49 `
piùu»_u¾
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
,

50 `
ü—‹_time
` 
	`INT
Ğ10 ) 
NOT
 
NULL
 ,

51 `
Œª¥Úd_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

52 `
Œª¥Úd_couÁ
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

53 `
comm’t_couÁ
` 
	`INT
Ğ11 ) 
NOT
 
NULL
,

54 `
visib™y
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL


55 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;"

57 
	}
}

59 
funùiÚ
 
	$group
(
$»®_bË
){

60 
$this
->
db
->
	`sim¶e_qu”y
("

61 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

62 `
group_id
` (11è
NOT
 
NULL
 
AUTO_INCREMENT
,

63 `
u£r_id
` (11è
NOT
 
NULL
,

64 `
group_Çme
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

65 `
group_ÿ‹gÜy
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

66 `
group_de¡rtiÚ
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

67 `
group_¡©es
` (11è
NOT
 
NULL
,

68 `
memb”_couÁ
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
,

69 `
ü—‹_time
` (10è
NOT
 
NULL
,

70 
PRIMARY
 
	`KEY
 (`
group_id
`),

71 
KEY
 `
u£r_id
` (`u£r_id`,`
group_Çme
`,`
group_¡©es
`)

72 è
ENGINE
=
MyISAM
 
DEFAULT
 
CHARSET
=
utf8
 
AUTO_INCREMENT
=1 ;"

74 
	}
}

76 
funùiÚ
 
	$group_ÿ‹gÜy
(
$»®_bË
){

77 
$this
->
db
->
	`sim¶e_qu”y
("

78 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

79 `
group_ÿ‹gÜy_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

80 `
group_ÿ‹gÜy_Çme
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

81 `
group_couÁ
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL


82 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

84 
	}
}

86 
funùiÚ
 
	$group_memb”
(
$»®_bË
){

87 
$this
->
db
->
	`sim¶e_qu”y
("

88 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

89 `
group_memb”_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

90 `
group_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

91 `
u£r_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

92 `
šv™”_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

93 `
is_admš
` 
	`TINYINT
Ğ1 ) 
UNSIGNED
 
NOT
 
NULL
 ,

94 `
is_cÚfœmed
` 
	`TINYINT
Ğ1 ) 
UNSIGNED
 
NOT
 
NULL
,

95 `
ü—‹_time
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL


96 è
ENGINE
 = 
INNODB
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

98 
	}
}

100 
funùiÚ
 
	$ä›nd
(
$»®_bË
){

101 
$this
->
db
->
	`sim¶e_qu”y
("

102 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

103 `
ä›ndsh_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

104 `
u£r_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

105 `
ä›nd_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

106 `
ü—‹_time
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL
 ,

107 
	`INDEX
 ( `
u£r_id
` , `
ä›nd_id
` )

108 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;"

110 
	}
}

112 
funùiÚ
 
	$blog
(
$»®_bË
){

113 
$this
->
db
->
	`sim¶e_qu”y
("

114 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

115 `
blog_id
` (11è
NOT
 
NULL
 
AUTO_INCREMENT
,

116 `
u£r_id
` (11è
NOT
 
NULL
,

117 `
ü—‹_time
` (10è
NOT
 
NULL
,

118 `
blog_t™Ë
` 
	`v¬ch¬
(200è
NOT
 
NULL
,

119 `
blog_cÚ‹Á
` 
‹xt
 
NOT
 
NULL
,

120 `
blog_ÿ‹gÜy
` (11è
NOT
 
NULL
,

121 `
Œª¥Úd_id
` (11è
NOT
 
NULL
,

122 `
Œª¥Úd_couÁ
` (11è
NOT
 
NULL
,

123 `
comm’t_couÁ
` (11è
NOT
 
NULL
,

124 `
blog_ty³
` (2è
NOT
 
NULL
,

125 `
blog_visibË
` (11è
NOT
 
NULL
,

126 `
blog_·sswÜd
` 
	`v¬ch¬
(49è
NOT
 
NULL
,

127 
PRIMARY
 
	`KEY
 (`
blog_id
`)

128 è
ENGINE
=
MyISAM
 
DEFAULT
 
CHARSET
=
Ïtš1
 
AUTO_INCREMENT
=1 ;

130 
	}
}

132 
funùiÚ
 
	$blog_ÿ‹gÜy
(
$»®_bË
){

133 
$this
->
db
->
	`sim¶e_qu”y
("

134 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

135 `
blog_ÿ‹gÜy_id
` (11è
NOT
 
NULL
 
AUTO_INCREMENT
,

136 `
blog_ÿ‹gÜy_Çme
` 
	`v¬ch¬
(200è
NOT
 
NULL
,

137 `
blog_couÁ
` (11è
NOT
 
NULL
,

138 
PRIMARY
 
	`KEY
 (`
blog_ÿ‹gÜy_id
`)

139 è
ENGINE
=
MyISAM
 
DEFAULT
 
CHARSET
=
utf8
 
AUTO_INCREMENT
=1 ;

141 
	}
}

143 
funùiÚ
 
	$blog_g
(
$»®_bË
){

144 
$this
->
db
->
	`sim¶e_qu”y
("

145 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

146 `
blog_g_id
` (11è
NOT
 
NULL
,

147 `
blog_g_Çme
` 
	`v¬ch¬
(200è
NOT
 
NULL
,

148 `
blog_id
` (11è
NOT
 
NULL
,

149 
PRIMARY
 
	`KEY
 (`
blog_g_id
`)

150 è
ENGINE
=
MyISAM
 
DEFAULT
 
CHARSET
=
utf8
;

152 
	}
}

154 
funùiÚ
 
	$®bum
(
$»®_bË
){

155 
$this
->
db
->
	`sim¶e_qu”y
("

156 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

157 `
®bum_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

158 `
®bum_Çme
` 
	`VARCHAR
Ğ50 ) 
NOT
 
NULL
 ,

159 `
u£r_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

160 `
®bum_de¡rtiÚ
` 
	`VARCHAR
(255è
NOT
 
NULL
,

161 `
ü—‹_time
` 
	`INT
Ğ10 ) 
NOT
 
NULL
 ,

162 `
piùu»_couÁ
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

163 `
®bum_­³¬ªû
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

164 `
®bum_visibË
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

165 `
®bum_·sswÜd
` 
	`VARCHAR
Ğ49 ) 
NOT
 
NULL


166 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;"

168 
	}
}

170 
funùiÚ
 
	$piùu»
(
$»®_bË
){

171 
$this
->
db
->
	`sim¶e_qu”y
("

172 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

173 `
piùu»_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

174 `
®bum_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

175 `
u£r_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

176 `
piùu»_Çme
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

177 `
piùu»_de¡rtiÚ
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

178 `
fe_Çme
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

179 `
fe_size
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

180 `
fe_ty³
` 
	`INT
Ğ1 ) 
NOT
 
NULL
 ,

181 `
ü—‹_time
` 
	`INT
Ğ10 ) 
NOT
 
NULL


182 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

184 
	}
}

186 
funùiÚ
 
	$ev’t
(
$»®_bË
){

187 
$this
->
db
->
	`sim¶e_qu”y
("

188 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

189 `
ev’t_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

190 `
ev’t_Çme
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

191 `
ev’t_de¡rtiÚ
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

192 `
¡¬t_time
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL
 ,

193 `
’d_time
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL
 ,

194 `
u£r_id
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL
 ,

195 `
¶aû_id
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL
 ,

196 `
¡©us_couÁ
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL
 ,

197 `
memb”_couÁ
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL


198 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

200 
	}
}

202 
funùiÚ
 
	$ev’t_memb”
(
$»®_bË
){

203 
$this
->
db
->
	`sim¶e_qu”y
("

204 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

205 `
ev’t_memb”_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

206 `
ev’t_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

207 `
u£r_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

208 `
is_admš
` 
	`TINYINT
Ğ1 ) 
UNSIGNED
 
NOT
 
NULL
 ,

209 `
is_cÚfœmed
` 
	`TINYINT
Ğ1 ) 
UNSIGNED
 
NOT
 
NULL


210 è
ENGINE
 = 
INNODB
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

212 
	}
}

214 
funùiÚ
 
	$mes§ge
(
$»®_bË
){

215 
$¶aû
ğ
$this
->
db
->
	`sim¶e_qu”y
("

216 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

217 `
mes§ge_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

218 `
äom_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

219 `
to_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

220 `
mes§ge_cÚ‹Á
` 
TEXT
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

221 `
is_»ad
` 
	`TINYINT
Ğ1 ) 
UNSIGNED
 
NOT
 
NULL
 ,

222 `
ü—‹_time
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL


223 è
ENGINE
 = 
INNODB
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

225 
	}
}

227 
funùiÚ
 
	$nÙify
(
$»®_bË
){

228 
$this
->
db
->
	`sim¶e_qu”y
("

229 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

230 `
nÙify_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

231 `
äom_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

232 `
to_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

233 `
nÙify_ty³
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

234 `
nÙify_ty³_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
,

235 `
nÙify_cÚ‹Á
` 
TEXT
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

236 `
is_»ad
` 
	`TINYINT
Ğ1 ) 
NOT
 
NULL
 ,

237 `
ü—‹_time
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL


238 è
ENGINE
 = 
INNODB
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

240 
	}
}

242 
funùiÚ
 
	$Úlše
(
$»®_bË
){

243 
$this
->
db
->
	`sim¶e_qu”y
("

244 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

245 `
u£r_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

246 `
di¥Ïy_Çme
` 
	`VARCHAR
Ğ32 ) 
NOT
 
NULL
 ,

247 `
Úlše_ty³
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
,

248 `
ü—‹_time
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL
 ,

249 
PRIMARY
 
	`KEY
 ( `
u£r_id
` )

250 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;"

252 
	}
}

254 
funùiÚ
 
	$¶aû
(
$»®_bË
){

255 
$this
->
db
->
	`sim¶e_qu”y
("

256 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

257 `
¶aû_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

258 `
¶aû_Çme
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

259 `
¶aû_de¡rtiÚ
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

260 `
¶aû_ÿ‹gÜy
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

261 `
¶aû_¡©es
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

262 `
memb”_couÁ
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

263 `
wifi_mac
` 
	`v¬ch¬
(12) ,

264 `
blu‘oÙh_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
,

265 `
ü—‹_time
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL


266 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

268 
	}
}

270 
funùiÚ
 
	$¶aû_ÿ‹gÜy
(
$»®_bË
){

271 
$this
->
db
->
	`sim¶e_qu”y
("

272 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

273 `
¶aû_ÿ‹gÜy_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

274 `
¶aû_ÿ‹gÜy_Çme
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

275 `
¶aû_couÁ
` 
	`INT
Ğ11 ) 
NOT
 
NULL


276 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

278 
	}
}

280 
funùiÚ
 
	$¶aû_memb”
(
$»®_bË
){

281 
$this
->
db
->
	`sim¶e_qu”y
("

282 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

283 `
¶aû_memb”_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

284 `
¶aû_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

285 `
u£r_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

286 `
is_admš
` 
	`TINYINT
Ğ1 ) 
UNSIGNED
 
NOT
 
NULL
 ,

287 `
is_cÚfœmed
` 
	`TINYINT
Ğ1 ) 
UNSIGNED
 
NOT
 
NULL
,

288 `
ü—‹_time
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL


289 è
ENGINE
 = 
INNODB
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

291 
	}
}

293 
funùiÚ
 
	$u£r
(
$»®_bË
){

294 
$this
->
db
->
	`sim¶e_qu”y
("

295 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

296 `
u£r_id
` (10è
NOT
 
NULL
 
AUTO_INCREMENT
,

297 `
ema
` 
	`v¬ch¬
(200è
NOT
 
NULL
 
UNIQUE
,

298 `
·sswÜd
` 
	`v¬ch¬
(49è
DEFAULT
 
NULL
,

299 `
»®_Çme
` 
	`v¬ch¬
(32è
NOT
 
NULL
,

300 `
di¥Ïy_Çme
` 
	`v¬ch¬
(32è
DEFAULT
 
NULL
,

301 `
ü—‹_time
` (10è
NOT
 
NULL
,

302 `
blu‘oÙh_id
` (10è
NOT
 
NULL
,

303 `
Ï¡_aùiv™y
` (10è
NOT
 
NULL
,

304 `
u£r_ty³
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
,

305 
PRIMARY
 
	`KEY
 (`
u£r_id
`)

306 è
ENGINE
=
MyISAM
 
DEFAULT
 
CHARSET
=
utf8
;"

308 
	}
}

310 
funùiÚ
 
	$£ssiÚ
(
$»®_bË
){

311 
$this
->
db
->
	`sim¶e_qu”y
("

312 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

313 `
£ssiÚ_id
` 
	`v¬ch¬
(40è
DEFAULT
 '0' 
NOT
 
NULL
,

314 `
_add»ss
` 
	`v¬ch¬
(16è
DEFAULT
 '0' 
NOT
 
NULL
,

315 `
u£r_ag’t
` 
	`v¬ch¬
(120è
NOT
 
NULL
,

316 `
Ï¡_aùiv™y
` (10è
DEFAULT
 0 
NOT
 
NULL
,

317 `
u£r_d©a
` 
TEXT
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
,

318 
PRIMARY
 
	`KEY
 (
£ssiÚ_id
)

320 
	}
}

322 
funùiÚ
 
	$u£r_m‘a
(
$»®_bË
){

323 
$this
->
db
->
	`sim¶e_qu”y
("

324 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

325 `
u£r_m‘a_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

326 `
u£r_id
` 
	`INT
Ğ11 ) 
NOT
 
NULL
 ,

327 `
m‘a_key
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

328 `
m‘a_v®ue
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL


329 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

331 
	}
}

333 
funùiÚ
 
	$blu‘oÙh
(
$»®_bË
){

334 
$this
->
db
->
	`sim¶e_qu”y
("

335 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

336 `
blu‘oÙh_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

337 `
u£r_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

338 `
blu‘oÙh_mac
` 
	`VARCHAR
Ğ12 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

339 `
blu‘oÙh_Çme
` 
	`VARCHAR
Ğ30 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

340 `
ü—‹_time
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL


341 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

343 
	}
}

345 
funùiÚ
 
	$blu‘oÙh_£¬ch
(
$»®_bË
){

346 
$this
->
db
->
	`sim¶e_qu”y
("

347 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

348 `
blu‘oÙh_£¬ch_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

349 `
äom_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

350 `
to_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

351 `
rssi
` 
	`INT
Ğ6 ) 
NOT
 
NULL
 ,

352 `
ü—‹_time
` 
	`INT
Ğ10 ) 
UNSIGNED
 
NOT
 
NULL


353 è
ENGINE
 = 
INNODB
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

355 
	}
}

357 
funùiÚ
 
	$comm’t
(
$»®_bË
){

358 
$this
->
db
->
	`sim¶e_qu”y
("

359 
CREATE
 
TABLE
 
IF
 
NOT
 
EXISTS
 `{
$»®_bË
}` (

360 `
comm’t_id
` (11è
NOT
 
NULL
 
AUTO_INCREMENT
,

361 `
u£r_id
` (11è
NOT
 
NULL
,

362 `
comm’t_ty³_id
` (11è
NOT
 
NULL
,

363 `
comm’t_ty³
` 
	`v¬ch¬
(255è
NOT
 
NULL
,

364 `
comm’t_cÚ‹Á
` 
	`v¬ch¬
(255è
NOT
 
NULL
,

365 `
ü—‹_time
` (11è
NOT
 
NULL
,

366 
PRIMARY
 
	`KEY
 (`
comm’t_id
`)

367 è
ENGINE
=
MyISAM
 
DEFAULT
 
CHARSET
=
utf8
 
AUTO_INCREMENT
=1 ;

370 
	}
}

372 
funùiÚ
 
	$¶aû_m‘a
(
$»®_bË
){

373 
$this
->
db
->
	`sim¶e_qu”y
("

374 
CREATE
 
TABLE
 `{
$»®_bË
}` (

375 `
¶aû_m‘a_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 
AUTO_INCREMENT
 
PRIMARY
 
KEY
 ,

376 `
¶aû_id
` 
	`INT
Ğ11 ) 
UNSIGNED
 
NOT
 
NULL
 ,

377 `
m‘a_key
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL
 ,

378 `
m‘a_v®ue
` 
	`VARCHAR
Ğ255 ) 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
 
NOT
 
NULL


379 è
ENGINE
 = 
MYISAM
 
CHARACTER
 
SET
 
utf8
 
COLLATE
 
utf8_g’”®_ci
;

381 
	}
}

	@application/models/m_event.php

1 <?
php


2 şas 
	cM_ev’t
 
ex‹nds
 
	mCI_Mod–
{

3 
´iv©e
 
	m$ev’t_bË
;

5 
´iv©e
 
	m$ev’t_memb”_bË
;

10 
funùiÚ
 
	$__cÚ¡ruù
(){

11 
·»Á
::
	`__cÚ¡ruù
();

12 
$this
->
ev’t_bË
=$this->
db
->
	`db´efix
('event');

13 
$this
->
ev’t_memb”_bË
=$this->
db
->
	`db´efix
('event_member');

22 
funùiÚ
 
	$add_ev’t
(
$d©a
){

23 
$this
->
db
->
	`š£¹
($this->
ev’t_bË
,
$d©a
);

24  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

26 
	}
}

28 
funùiÚ
 
	$g‘_¶aû_»ûÁ_ev’ts
(
$¶aû_id
,
$now
){

29 
$this
->
db
->
	`£Ëù
("ev’t_id,ev’t_Çme,ev’t_de¡rtiÚ,¡¬t_time,’d_time,¶aû_id,memb”_couÁ")->
	`äom
($this->
ev’t_bË
);

30 
$this
->
db
->
	`wh”e
('¡¬t_tim<',
$now
);

31 
$this
->
db
->
	`wh”e
('’d_tim>',
$now
);

32 
$this
->
db
->
	`Üd”_by
('start_time','desc');

33 
$qu”y
=
$this
->
db
->
	`g‘
();

34 
$ev’ts
=
$qu”y
->
	`»suÉ_¬¿y
();

35 if(
$ev’ts
)

36  
$ev’ts
;

38  
FALSE
;

39 
	}
}

41 
funùiÚ
 
	$g‘_¶aû_»ûÁ_ev’t
(
$¶aû_id
,
$now
){

42 
$this
->
db
->
	`£Ëù
("ev’t_id,ev’t_Çme,ev’t_de¡rtiÚ,¡¬t_time,’d_time,¶aû_id,memb”_couÁ")->
	`äom
($this->
ev’t_bË
);

43 
$this
->
db
->
	`wh”e
('¡¬t_tim<',
$now
);

44 
$this
->
db
->
	`wh”e
('’d_tim>',
$now
);

45 
$this
->
db
->
	`Üd”_by
('start_time','desc');

46 
$qu”y
=
$this
->
db
->
	`g‘
();

47 
$ev’ts
=
$qu”y
->
	`row_¬¿y
();

48 if(
$ev’ts
)

49  
$ev’ts
;

51  
FALSE
;

52 
	}
}

59 
funùiÚ
 
	$add_ev’t_memb”
(
$d©a
){

60 
$this
->
db
->
	`š£¹
($this->
ev’t_memb”_bË
,
$d©a
);

61  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

62 
	}
}

69 
funùiÚ
 
	$šü—£_ev’t_memb”_couÁ
(
$¶aû_id
){

70 
$this
->
db
->
	`£t
('memb”_couÁ',"memb”_couÁ+1",
FALSE
);

71 
$this
->
db
->
	`wh”e
(
	`¬¿y
('¶aû_id'=>
$¶aû_id
));

72 
$this
->
db
->
	`upd©e
($this->
ev’t_bË
);

73 
	}
}

	@application/models/m_feed.php

1 <?
php


15 şas 
	cM_ãed
 
ex‹nds
 
	mCI_Mod–
{

20 
´iv©e
 
	m$ãed_bË
;

27 
funùiÚ
 
	$__cÚ¡ruù
(){

28 
·»Á
::
	`__cÚ¡ruù
();

29 
$this
->
ãed_bË
=$this->
db
->
	`db´efix
('feed');

50 
funùiÚ
 
	$add_ãed
(
$d©a
){

51 
$this
->
db
->
	`š£¹
($this->
ãed_bË
,
$d©a
);

52  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

53 
	}
}

59 
funùiÚ
 
	$šü—£_Œª¥Úd_couÁ
(
$ãed_id
){

60 
$this
->
db
->
	`£t
('Œª¥Úd_couÁ',"Œª¥Úd_couÁ+1",
FALSE
);

61 
$this
->
db
->
	`wh”e
(
	`¬¿y
('ãed_id'=>
$ãed_id
));

62 
$this
->
db
->
	`upd©e
($this->
ãed_bË
);

63 
	}
}

65 
funùiÚ
 
	$šü—£_comm’t_couÁ
(
$ãed_id
){

66 
$this
->
db
->
	`£t
('comm’t_couÁ',"comm’t_couÁ+1",
FALSE
);

67 
$this
->
db
->
	`wh”e
(
	`¬¿y
('ãed_id'=>
$ãed_id
));

68 
$this
->
db
->
	`upd©e
($this->
ãed_bË
);

69 
	}
}

71 
funùiÚ
 
	$g‘_ãed_by_ãed_id
(
$ãed_id
){

72 
$this
->
db
->
	`£Ëù
("*");

73 
$this
->
db
->
	`äom
($this->
ãed_bË
);

74 
$this
->
db
->
	`wh”e
('ãed_id',
$ãed_id
);

75 
$qu”y
=
$this
->
db
->
	`g‘
();

76 if(
$qu”y
->
	`num_rows
()>0){

77 
$ãed
=
$qu”y
->
	`row_¬¿y
();

78 
$qu”y
->
	`ä“_»suÉ
();

79 
$ãed
=
	`¬¿y_m”ge
($ãed,
$this
->
m_u£r
->
	`g‘_u£r_d©a_by_u£r_id
($feed['user_id']));

80  
$ãed
;

82  
FALSE
;

84 
	}
}

93 
funùiÚ
 
	$g‘_ãeds_by_u£r_id
(
$u£r_id
,
$»ÏtiÚsh
,
$·ge
,
$·ge_couÁ
){

95 if(!
$·ge
)

96 
$·ge
=1;

98 if(!
$·ge_couÁ
)

99 
$·ge_couÁ
=20;

101 
$this
->
db
->
	`£Ëù
('*');

102 
$this
->
db
->
	`wh”e
('u£r_id',
$u£r_id
);

103 
$»ÏtiÚsh
){

107 
$this
->
db
->
	`wh”e_š
('visib™y',
	`¬¿y
('friend','public'));

110 
$this
->
db
->
	`wh”e
('visibility','public');

113 
$this
->
db
->
	`Üd”_by
("feed_id", "desc");

114 
$qu”y
=
$this
->
db
->
	`g‘
($this->
ãed_bË
,
$·ge_couÁ
,(
$·ge
-1)*$page_count);

115 if(
$qu”y
->
	`num_rows
()>0){

116 
$ãeds
=
$qu”y
->
	`»suÉ_¬¿y
();

117 
$qu”y
->
	`ä“_»suÉ
();

119  
FALSE
;

121 
	`fÜ—ch
(
$ãeds
 
as
 
$key
=>
$v®ue
){

122 if(
$v®ue
['transpond_id']){

123 
$this
->
db
->
	`£Ëù
('*')->
	`äom
($this->
ãed_bË
)->
	`wh”e
('ãed_id',
$v®ue
['transpond_id']);

124 
$qu”y
=
$this
->
db
->
	`g‘
();

125 if(
$qu”y
->
	`num_rows
()>0){

126 
$v®ue
['sourû_ãed']=
$qu”y
->
	`row_¬¿y
();

127 
$v®ue
['sourû_ãed']=
	`¬¿y_m”ge
($v®ue['sourû_ãed'],
$this
->
m_u£r
->
	`g‘_u£r_d©a_by_u£r_id
($value['source_feed']['user_id']));

128 
$qu”y
->
	`ä“_»suÉ
();

130  
FALSE
;

132 
$ãeds
[
$key
]=
$v®ue
;

135  
$ãeds
;

136 
	}
}

145 
funùiÚ
 
	$g‘_ãeds_by_ä›nds_ids
(
$ä›nd_ids
,
$·ge
,
$·ge_couÁ
){

146 if(!
$·ge
)

147 
$·ge
=1;

149 if(!
$·ge_couÁ
)

150 
$·ge_couÁ
=20;

152 
$this
->
db
->
	`£Ëù
('*');

153 
$this
->
db
->
	`wh”e_š
('visib™y',
	`¬¿y
('friend','public'));

154 
$this
->
db
->
	`wh”e_š
('u£r_id',
$ä›nd_ids
);

155 
$this
->
db
->
	`Üd”_by
('feed_id','desc');

156 
$qu”y
=
$this
->
db
->
	`g‘
($this->
ãed_bË
,
$·ge_couÁ
,(
$·ge
-1)*$page_count);

157 if(
$qu”y
->
	`num_rows
()>0){

158 
$ãeds
=
$qu”y
->
	`»suÉ_¬¿y
();

159 
$qu”y
->
	`ä“_»suÉ
();

161  
FALSE
;

164 
	`fÜ—ch
(
$ãeds
 
as
 
$key
=>
$v®ue
){

165 
$v®ue
=
	`¬¿y_m”ge
($v®ue,
$this
->
m_u£r
->
	`g‘_u£r_d©a_by_u£r_id
($value['user_id']));

166 if(
$v®ue
['transpond_id']){

167 
$this
->
db
->
	`£Ëù
('*')->
	`äom
($this->
ãed_bË
)->
	`wh”e
('ãed_id',
$v®ue
['transpond_id']);

168 
$qu”y
=
$this
->
db
->
	`g‘
();

169 if(
$qu”y
->
	`num_rows
()>0){

170 
$v®ue
['sourû_ãed']=
$qu”y
->
	`row_¬¿y
();

171 
$v®ue
['sourû_ãed']=
	`¬¿y_m”ge
($v®ue['sourû_ãed'],
$this
->
m_u£r
->
	`g‘_u£r_d©a_by_u£r_id
($value['source_feed']['user_id']));

172 
$qu”y
->
	`ä“_»suÉ
();

174  
FALSE
;

177 
$ãeds
[
$key
]=
$v®ue
;

179  
$ãeds
;

180 
	}
}

190 
funùiÚ
 
	$g‘_®l_public_ãeds
(
$f‹r
,
$id
,
$·ge
,
$·ge_couÁ
){

192 if(!
$·ge
)

193 
$·ge
=1;

195 if(!
$·ge_couÁ
)

196 
$·ge_couÁ
=20;

198 if(!
$id
){

199 
$this
->
db
->
	`£Ëù_max
('feed_id');

200 
$qu”y
 = 
$this
->
db
->
	`g‘
($this->
ãed_bË
);

201 
$row
=
$qu”y
->
	`row
();

202 
$id
=
$row
->
ãed_id
;

203 
$qu”y
->
	`ä“_»suÉ
();

204 
$id
++;

207 
$this
->
db
->
	`£Ëù
('*');

209 if(
$f‹r
=='old')

210 
$this
->
db
->
	`wh”e
('ãed_id <',
$id
);

212 
$this
->
db
->
	`wh”e
('ãed_id >',
$id
);

214 
$this
->
db
->
	`Üd”_by
("feed_id", "desc");

216 
$qu”y
=
$this
->
db
->
	`g‘
($this->
ãed_bË
,
$·ge_couÁ
,(
$·ge
-1)*$page_count);

218 if(
$qu”y
->
	`num_rows
()>0){

219 
$ãeds
=
$qu”y
->
	`»suÉ_¬¿y
();

220 
$qu”y
->
	`ä“_»suÉ
();

222  
FALSE
;

225 
$this
->
lßd
->
	`mod–
('m_user');

226 
	`fÜ—ch
(
$ãeds
 
as
 
$key
=>
$v®ue
){

227 
$v®ue
=
	`¬¿y_m”ge
(
$this
->
m_u£r
->
	`g‘_u£r_d©a_by_u£r_id
($value['user_id']),$value);

228 if(
$v®ue
['transpond_id']){

229 
$this
->
db
->
	`£Ëù
('*')->
	`äom
($this->
ãed_bË
)->
	`wh”e
('ãed_id',
$v®ue
['transpond_id']);

230 
$qu”y
=
$this
->
db
->
	`g‘
();

231 if(
$qu”y
->
	`num_rows
()>0){

232 
$v®ue
['sourû_ãed']=
$qu”y
->
	`row_¬¿y
();

233 
$v®ue
['sourû_ãed']=
	`¬¿y_m”ge
(
$this
->
m_u£r
->
	`g‘_u£r_d©a_by_u£r_id
($value['source_feed']['user_id']),$value['source_feed']);

234 
$qu”y
->
	`ä“_»suÉ
();

236  
FALSE
;

239 
$ãeds
[
$key
]=
$v®ue
;

241  
$ãeds
;

243 
	}
}

	@application/models/m_friend.php

1 <?
php


2 şas 
	cM_ä›nd
 
ex‹nds
 
	mCI_Mod–
{

3 
´iv©e
 
	m$ä›nd_bË
;

8 
funùiÚ
 
	$__cÚ¡ruù
(){

9 
·»Á
::
	`__cÚ¡ruù
();

10 
$this
->
ä›nd_bË
=$this->
db
->
	`db´efix
('friend');

19 
funùiÚ
 
	$add_ä›nd
(
$d©a
){

20 
$this
->
db
->
	`š£¹
($this->
ä›nd_bË
,
$d©a
);

21  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

22 
	}
}

29 
funùiÚ
 
	$g‘_u£r_ä›nd_ids
(
$u£r_id
){

30 
$this
->
db
->
	`£Ëù
('friend_id');

31 
$this
->
db
->
	`äom
($this->
ä›nd_bË
);

32 
$this
->
db
->
	`wh”e
('u£r_id',
$u£r_id
);

33 
$qu”y
=
$this
->
db
->
	`g‘
();

34 if(
$qu”y
->
	`num_rows
()>0){

35 
$ids
=
$qu”y
->
	`»suÉ_¬¿y
();

36 
$qu”y
->
	`ä“_»suÉ
();

37 
	`fÜ—ch
(
$ids
 
as
 
$key
=>
$v®ue
){

38 
$ids
[
$key
]=
$v®ue
['friend_id'];

41  
FALSE
;

43  
$ids
;

44 
	}
}

52 
funùiÚ
 
	$g‘_ä›ndsh_id_by_u£r_id
(
$äom_id
,
$to_id
){

53 
$this
->
db
->
	`£Ëù
('friendship_id');

54 
$this
->
db
->
	`äom
($this->
ä›nd_bË
);

55 
$this
->
db
->
	`wh”e
('u£r_id',
$äom_id
);

56 
$this
->
db
->
	`wh”e
('ä›nd_id',
$to_id
);

57 
$qu”y
=
$this
->
db
->
	`g‘
();

58 if(
$qu”y
->
	`num_rows
()>0){

59 
$num
=
$qu”y
->
	`row_¬¿y
();

60  
$num
['friendship_id'];

62  
FALSE
;

65 
	}
}

	@application/models/m_group.php

1 <?
php


2 şas 
	cM_group
 
ex‹nds
 
	mCI_Mod–
{

3 
´iv©e
 
	m$group_bË
;

5 
´iv©e
 
	m$group_ÿ‹gÜy_bË
;

7 
´iv©e
 
	m$group_memb”_bË
;

11 
funùiÚ
 
	$__cÚ¡ruù
(){

12 
·»Á
::
	`__cÚ¡ruù
();

13 
$this
->
group_bË
=$this->
db
->
	`db´efix
('group');

14 
$this
->
group_ÿ‹gÜy_bË
=$this->
db
->
	`db´efix
('group_category');

15 
$this
->
group_memb”_bË
=$this->
db
->
	`db´efix
('group_member');

23 
funùiÚ
 
	$add_group
(
$d©a
){

24 
$this
->
db
->
	`š£¹
($this->
group_bË
,
$d©a
);

25  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

26 
	}
}

33 
funùiÚ
 
	$add_group_ÿ‹gÜy
(
$d©a
){

34 
$group_ÿ‹gÜy_id
=
$this
->
	`g‘_group_ÿ‹gÜy_id_by_Çme
(
$d©a
['group_category_name']);

35 if(
$group_ÿ‹gÜy_id
){

36 
$this
->
db
->
	`£t
('group_couÁ',"group_couÁ+1",
FALSE
);

37 
$this
->
db
->
	`wh”e
(
	`¬¿y
('group_ÿ‹gÜy_id'=>
$group_ÿ‹gÜy_id
));

38 
$this
->
db
->
	`upd©e
($this->
group_ÿ‹gÜy_bË
);

39  
$group_ÿ‹gÜy_id
;

41 
$this
->
db
->
	`š£¹
($this->
group_ÿ‹gÜy_bË
,
$d©a
);

42  
$this
->
db
->
	`š£¹_id
();

44 
	}
}

51 
funùiÚ
 
	$add_group_memb”
(
$d©a
){

52 
$this
->
db
->
	`š£¹
($this->
group_memb”_bË
,
$d©a
);

53  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

54 
	}
}

61 
funùiÚ
 
	$g‘_group_ü—‹_u£r_id_by_group_id
(
$group_id
){

63 
$this
->
db
->
	`£Ëù
('u£r_id')->
	`äom
($this->
group_bË
);

64 
$this
->
db
->
	`wh”e
('group_id',
$group_id
);

65 
$qu”y
=
$this
->
db
->
	`g‘
();

66 
$row
=
$qu”y
->
	`row_¬¿y
();

67 
$qu”y
->
	`ä“_»suÉ
();

69 if(
$row
)

70  
$row
['user_id'];

72  
FALSE
;

73 
	}
}

80 
funùiÚ
 
	$g‘_group_memb”_d©as_by_group_id
(
$group_id
,
$exşude_u£r_id
=0){

82 
$this
->
lßd
->
	`mod–
('m_user');

84 
$group_memb”_d©as
=
	`¬¿y
();

86 
$this
->
db
->
	`£Ëù
('u£r_id')->
	`äom
($this->
group_memb”_bË
);

88 
$this
->
db
->
	`wh”e
('group_id',
$group_id
);

90 
$this
->
db
->
	`wh”e
('is_confirmed',1);

92 
$this
->
db
->
	`wh”e
('u£r_id <>',
$exşude_u£r_id
);

94 
$qu”y
=
$this
->
db
->
	`g‘
();

96 
$row
=
$qu”y
->
	`»suÉ_¬¿y
();

98 
$qu”y
->
	`ä“_»suÉ
();

100 if(
$row
){

101 
	`fÜ—ch
(
$row
 
as
 
$v®ue
){

102 
$u£r_d©as
[]=
$this
->
m_u£r
->
	`g‘_u£r_d©a_by_u£r_id
(
$v®ue
['user_id']);

104  
$u£r_d©as
;

108  
FALSE
;

110 
	}
}

118 
funùiÚ
 
	$g‘_group_memb”_id_by_u£r_id
(
$u£r_id
,
$group_id
){

119 
$this
->
db
->
	`£Ëù
('group_memb”_id,is_cÚfœmed')->
	`äom
($this->
group_memb”_bË
);

120 
$this
->
db
->
	`wh”e
(

121 
	`¬¿y
(

122 'group_id'=>
$group_id
,

123 'u£r_id'=>
$u£r_id


125 
$qu”y
=
$this
->
db
->
	`g‘
();

126 
$row
=
$qu”y
->
	`row_¬¿y
();

127 
$qu”y
->
	`ä“_»suÉ
();

129 if(
$row
)

130  
$row
;

132  
FALSE
;

133 
	}
}

141 
funùiÚ
 
g‘_ab£Á_memb”_d©as_by_u£r_d©as
(
$group_id
,
$u£r_d©as
=
¬¿y
(),
$exşude_u£r_id
=0){

143 
$ab£Á_memb”_d©as
=
¬¿y
();

145 
	g$group_memb”_d©as
=
$this
->
g‘_group_memb”_d©as_by_group_id
(
$group_id
,
$exşude_u£r_id
);

147 if(
	g$group_memb”_d©as
){

148 
	g$ab£Á_memb”_d©as
=
¬¿y_udiff
(

149 
$group_memb”_d©as
, 
$u£r_d©as
,

150 
¬¿y
('M_group','group_member_user_datas_compare')

153  
	g$ab£Á_memb”_d©as
;

155  
	gFALSE
;

167 
funùiÚ
 
	$group_memb”_u£r_d©as_com·»
(
$u£r_d©as1
,
$u£r_d©as2
){

168 ià(
$u£r_d©as1
['u£r_id']===
$u£r_d©as2
['user_id'])

172  (
$u£r_d©as1
['u£r_id'] > 
$u£r_d©as2
['user_id'])? 1:-1;

173 
	}
}

182 
funùiÚ
 
	$g‘_group_d©as_by_ÿ‹gÜy
(
$ÿ‹gÜy
,
$·ge
=0,
$·ge_couÁ
=0){

184 
$group_d©as
=
	`¬¿y
();

186 if(!
$·ge
)

187 
$·ge
=1;

189 if(!
$·ge_couÁ
)

190 
$·ge_couÁ
=20;

192 if(
$ÿ‹gÜy
){

193 
$this
->
db
->
	`wh”e
('group_ÿ‹gÜy',
$ÿ‹gÜy
);

196 
$qu”y
 = 
$this
->
db
->
	`g‘
($this->
group_bË
,
$·ge_couÁ
,(
$·ge
-1)*$page_count);

198 
$group_d©as
=
$qu”y
->
	`»suÉ_¬¿y
();

200 
$qu”y
->
	`ä“_»suÉ
();

202 if(
$group_d©as
)

203  
$group_d©as
;

205  
FALSE
;

206 
	}
}

208 
funùiÚ
 
	$g‘_group_d©as_by_u£r_id
(
$u£r_id
,
$is_admš
,
$·ge
=0,
$·ge_couÁ
=0){

209 
$group_d©as
=
	`¬¿y
();

211 if(!
$·ge
)

212 
$·ge
=1;

214 if(!
$·ge_couÁ
)

215 
$·ge_couÁ
=20;

217 
$this
->
db
->
	`£Ëù
('group_id,is_admš')->
	`äom
($this->
group_memb”_bË
);

218 
$this
->
db
->
	`wh”e
('u£r_id',
$u£r_id
);

219 if(
$is_admš
)

220 
$this
->
db
->
	`wh”e
('is_admin',1);

221 
$qu”y
=
$this
->
db
->
	`g‘
();

222 
$row
=
$qu”y
->
	`»suÉ_¬¿y
();

223 
$qu”y
->
	`ä“_»suÉ
();

224 if(
$row
){

225 
	`fÜ—ch
(
$row
 
as
 
$key
=>
$v®ue
){

226 
$group_d©a
=
$this
->
	`g‘_group_d©a_by_group_id
(
$v®ue
['group_id']);

227 
$group_d©a
['is_admš']=
$v®ue
['is_admin'];

228 
$group_d©as
[]=
$group_d©a
;

230  
$group_d©as
;

232  
FALSE
;

235 
	}
}

241 
funùiÚ
 
	$g‘_group_ÿ‹gÜy_id_by_Çme
(
$group_ÿ‹gÜy_Çme
){

242 
$this
->
db
->
	`£Ëù
('group_category_id');

243 
$this
->
db
->
	`äom
($this->
group_ÿ‹gÜy_bË
);

244 
$this
->
db
->
	`wh”e
('group_ÿ‹gÜy_Çme',
$group_ÿ‹gÜy_Çme
);

245 
$qu”y
 = 
$this
->
db
->
	`g‘
();

246 
$row
 = 
$qu”y
->
	`row
();

247 
$qu”y
->
	`ä“_»suÉ
();

248 if(
$row
)

249  
$row
->
group_ÿ‹gÜy_id
;

250  
FALSE
;

251 
	}
}

253 
funùiÚ
 
	$g‘_u£r_¡©us_by_u£r_id_ªd_group_id
(
$u£r_id
,
$group_id
){

254 
$this
->
db
->
	`£Ëù
('is_admin,is_confirmed');

255 
$this
->
db
->
	`äom
($this->
group_memb”_bË
);

256 
$this
->
db
->
	`wh”e
('u£r_id',
$u£r_id
);

257 
$this
->
db
->
	`wh”e
('group_id',
$group_id
);

258 
$qu”y
=
$this
->
db
->
	`g‘
();

259 
$row
=
$qu”y
->
	`row_¬¿y
();

260 
$qu”y
->
	`ä“_»suÉ
();

262 if(
$row
)

263  
$row
;

265  
FALSE
;

266 
	}
}

273 
funùiÚ
 
	$g‘_group_d©a_by_group_id
(
$group_id
){

274 
$this
->
db
->
	`£Ëù
("*")->
	`äom
($this->
group_bË
);

275 
$this
->
db
->
	`wh”e
('group_id',
$group_id
);

276 
$qu”y
=
$this
->
db
->
	`g‘
();

277 
$row
=
$qu”y
->
	`row_¬¿y
();

278 
$qu”y
->
	`ä“_»suÉ
();

279 if(
$row
){

280  
$row
;

282  
FALSE
;

283 
	}
}

289 
funùiÚ
 
	$šü—£_group_memb”_couÁ
(
$group_id
){

290 
$this
->
db
->
	`£t
('memb”_couÁ',"memb”_couÁ+1",
FALSE
);

291 
$this
->
db
->
	`wh”e
(
	`¬¿y
('group_id'=>
$group_id
));

292 
$this
->
db
->
	`upd©e
($this->
group_bË
);

293 
	}
}

	@application/models/m_message.php

1 <?
php


2 şas 
	cM_mes§ge
 
ex‹nds
 
	mCI_Mod–
{

3 
´iv©e
 
	m$mes§ge_bË
;

9 
funùiÚ
 
	$__cÚ¡ruù
(){

10 
·»Á
::
	`__cÚ¡ruù
();

11 
$this
->
mes§ge_bË
=$this->
db
->
	`db´efix
('message');

21 
funùiÚ
 
	$add_mes§ge
(
$d©a
){

22 
$this
->
db
->
	`š£¹
($this->
mes§ge_bË
,
$d©a
);

23  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

24 
	}
}

	@application/models/m_notify.php

1 <?
php


2 şas 
	cM_nÙify
 
ex‹nds
 
	mCI_Mod–
{

3 
´iv©e
 
	m$nÙify_bË
;

9 
funùiÚ
 
	$__cÚ¡ruù
(){

10 
·»Á
::
	`__cÚ¡ruù
();

11 
$this
->
nÙify_bË
=$this->
db
->
	`db´efix
('notify');

19 
funùiÚ
 
	$add_nÙify
(
$d©a
){

20 
$this
->
db
->
	`š£¹
($this->
nÙify_bË
,
$d©a
);

21  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

22 
	}
}

29 
funùiÚ
 
	$ignÜe_nÙify
(
$nÙify_id
){

30 
$this
->
db
->
	`£t
('is_read','1');

31 
$this
->
db
->
	`wh”e
('nÙify_id',
$nÙify_id
);

32 
$this
->
db
->
	`upd©e
($this->
nÙify_bË
);

33  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

34 
	}
}

36 
funùiÚ
 
	$g‘_®l_u£r_nÙ_»ad_nÙify_num
(
$u£r_id
){

37 
$this
->
db
->
	`£Ëù
("nÙify_ty³,COUNTÒÙify_ty³èa nÙify_couÁ",
FALSE
);

38 
$this
->
db
->
	`äom
($this->
nÙify_bË
);

39 
$this
->
db
->
	`wh”e
('to_id',
$u£r_id
);

40 
$this
->
db
->
	`wh”e
('is_read',0);

41 
$qu”y
=
$this
->
db
->
	`g‘
();

42 
$row
=
$qu”y
->
	`»suÉ_¬¿y
();

43 
$qu”y
->
	`ä“_»suÉ
();

44 if(
$row
)

45  
$row
;

47  
FALSE
;

48 
	}
}

55 
funùiÚ
 
	$g‘_nÙify_d©a_by_nÙify_id
(
$nÙify_id
){

56 
$this
->
db
->
	`£Ëù
('*');

57 
$this
->
db
->
	`äom
($this->
nÙify_bË
);

58 
$this
->
db
->
	`wh”e
('nÙify_id',
$nÙify_id
);

59 
$qu”y
=
$this
->
db
->
	`g‘
();

60 
$row
=
$qu”y
->
	`row_¬¿y
();

61 
$qu”y
->
	`ä“_»suÉ
();

62 if(
$row
)

63  
$row
;

65  
FALSE
;

66 
	}
}

	@application/models/m_online.php

1 <?
php


2 şas 
	cM_Úlše
 
ex‹nds
 
	mCI_Mod–
{

3 
´iv©e
 
	m$Úlše_bË
;

8 
funùiÚ
 
	$__cÚ¡ruù
(){

9 
·»Á
::
	`__cÚ¡ruù
();

10 
$this
->
Úlše_bË
=$this->
db
->
	`db´efix
('online');

19 
funùiÚ
 
	$add_Úlše
(
$d©a
){

20 
$this
->
db
->
	`£Ëù
('u£r_id')->
	`äom
($this->
Úlše_bË
)->
	`wh”e
('u£r_id',
$d©a
['user_id']);

21 
$qu”y
 = 
$this
->
db
->
	`g‘
();

22 
$num
 = 
$qu”y
->
	`num_rows
();

23 if(
$num
>0)

24 
$this
->
db
->
	`upd©e
($this->
Úlše_bË
,
	`¬¿y
('ü—‹_time'=>
$d©a
['create_time']),

25 
	`¬¿y
('u£r_id'=>
$d©a
['user_id']));

26 
$this
->
db
->
	`š£¹
($this->
Úlše_bË
,
$d©a
);

29 if(
	`¿nd
(1,100)==1)

30 
$this
->
	`upd©a_Úlše
();

32  
TRUE
;

33 
	}
}

35 
funùiÚ
 
	$d–‘e_Úlše
(
$d©a
){

36 
$this
->
db
->
	`wh”e
('u£r_id',
$d©a
['user_id']);

37 
$this
->
db
->
	`d–‘e
($this->
Úlše_bË
);

38 
	}
}

41 
funùiÚ
 
	$upd©a_Úlše
(){

42 
$expœ©iÚ
=
	`time
()-300;

43 
$this
->
db
->
	`wh”e
('ü—‹_tim<',
$expœ©iÚ
);

44 
$this
->
db
->
	`d–‘e
($this->
Úlše_bË
);

45 
	}
}

	@application/models/m_place.php

1 <?
php


2 şas 
	cM_¶aû
 
ex‹nds
 
	mCI_Mod–
{

3 
´iv©e
 
	m$¶aû_bË
;

5 
´iv©e
 
	m$¶aû_ÿ‹gÜy_bË
;

7 
´iv©e
 
	m$¶aû_memb”_bË
;

9 
´iv©e
 
	m$¶aû_m‘a_bË
;

14 
funùiÚ
 
	$__cÚ¡ruù
(){

15 
·»Á
::
	`__cÚ¡ruù
();

16 
$this
->
¶aû_bË
=$this->
db
->
	`db´efix
('place');

17 
$this
->
¶aû_ÿ‹gÜy_bË
=$this->
db
->
	`db´efix
('place_category');

18 
$this
->
¶aû_memb”_bË
=$this->
db
->
	`db´efix
('place_member');

19 
$this
->
¶aû_m‘a_bË
=$this->
db
->
	`db´efix
('place_meta');

27 
funùiÚ
 
	$add_¶aû
(
$d©a
){

28 
$this
->
db
->
	`š£¹
($this->
¶aû_bË
,
$d©a
);

29  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

30 
	}
}

32 
funùiÚ
 
	$add_¶aû_m‘a
(
$d©a
){

33 
$¶aû_m‘a_id
=
$this
->
	`g‘_¶aû_m‘a_id_by_key
(
$d©a
['place_id'],$data['meta_key']);

35 if(
$¶aû_m‘a_id
){

36 
$this
->
db
->
	`upd©e
(

37 
$this
->
¶aû_m‘a_bË
,

38 
	`¬¿y
('m‘a_v®ue'=>
$d©a
['meta_value']),

39 
	`¬¿y
('¶aû_m‘a_id'=>
$¶aû_m‘a_id
)

41  
TRUE
;

43 
$this
->
db
->
	`š£¹
(

44 
$this
->
¶aû_m‘a_bË
,

45 
	`¬¿y
(

46 '¶aû_id'=>
$d©a
['place_id'],

47 'm‘a_key'=>
$d©a
['meta_key'],

48 'm‘a_v®ue'=>
$d©a
['meta_value']

50  
TRUE
;

52 
	}
}

54 
funùiÚ
 
	$g‘_¶aû_m‘a_id_by_key
(
$¶aû_id
,
$m‘a_key
){

55 
$this
->
db
->
	`£Ëù
('¶aû_m‘a_id')->
	`äom
($this->
¶aû_m‘a_bË
);

56 
$this
->
db
->
	`wh”e
(
	`¬¿y
(

57 '¶aû_id'=>
$¶aû_id
,

58 'm‘a_key'=>
$m‘a_key


60 
$qu”y
 = 
$this
->
db
->
	`g‘
();

61 
$num
 = 
$qu”y
->
	`row
();

62 
$qu”y
->
	`ä“_»suÉ
();

63 if(
$num
)

64  
	`štv®
(
$num
->
¶aû_m‘a_id
);

66  
FALSE
;

67 
	}
}

70 
funùiÚ
 
	$g‘_¶aû_m‘a_v®ue_by_key
(
$¶aû_id
,
$m‘a_key
){

71 
$this
->
db
->
	`£Ëù
('m‘a_v®ue')->
	`äom
($this->
¶aû_m‘a_bË
);

72 
$this
->
db
->
	`wh”e
(
	`¬¿y
(

73 '¶aû_id'=>
$¶aû_id
,

74 'm‘a_key'=>
$m‘a_key


76 
$qu”y
 = 
$this
->
db
->
	`g‘
();

77 
$num
 = 
$qu”y
->
	`row
();

78 
$qu”y
->
	`ä“_»suÉ
();

79 if(
$num
)

80  
$num
->
m‘a_v®ue
;

82  
FALSE
;

83 
	}
}

86 
funùiÚ
 
	$g‘_¶aû_m‘as_by_¶aû_id
(
$¶aû_id
){

87 
$this
->
db
->
	`£Ëù
('m‘a_key,m‘a_v®ue')->
	`äom
($this->
¶aû_m‘a_bË
);

88 
$this
->
db
->
	`wh”e
('¶aû_id',
$¶aû_id
);

89 
$qu”y
 = 
$this
->
db
->
	`g‘
();

90 
$row
 = 
$qu”y
->
	`»suÉ_¬¿y
();

91 
$qu”y
->
	`ä“_»suÉ
();

92 if(
$row
)

93  
$row
;

95  
FALSE
;

96 
	}
}

104 
funùiÚ
 
	$add_¶aû_ÿ‹gÜy
(
$d©a
){

105 
$¶aû_ÿ‹gÜy_id
=
$this
->
	`g‘_¶aû_ÿ‹gÜy_id_by_Çme
(
$d©a
['place_category_name']);

106 if(
$¶aû_ÿ‹gÜy_id
){

107 
$this
->
db
->
	`£t
('¶aû_couÁ',"¶aû_couÁ+1",
FALSE
);

108 
$this
->
db
->
	`wh”e
(
	`¬¿y
('¶aû_ÿ‹gÜy_id'=>
$¶aû_ÿ‹gÜy_id
));

109 
$this
->
db
->
	`upd©e
($this->
¶aû_ÿ‹gÜy_bË
);

110  
$¶aû_ÿ‹gÜy_id
;

112 
$this
->
db
->
	`š£¹
($this->
¶aû_ÿ‹gÜy_bË
,
$d©a
);

113  
$this
->
db
->
	`š£¹_id
();

115 
	}
}

122 
funùiÚ
 
	$add_¶aû_memb”
(
$d©a
){

123 
$¶aû_memb”_id
=
$this
->
	`g‘_¶aû_memb”_id_by_¶aû_id
(
$d©a
['user_id'], $data['place_id']);

124 if(
$¶aû_memb”_id
){

125 
$this
->
db
->
	`upd©e
(

126 
$this
->
¶aû_memb”_bË
,

127 
	`¬¿y
('ü—‹_time'=>
$d©a
['create_time']),

128 
	`¬¿y
('¶aû_memb”_id'=>
$¶aû_memb”_id
)

130  
TRUE
;

132 
$this
->
db
->
	`š£¹
(

133 
$this
->
¶aû_memb”_bË
,

134 
	`¬¿y
('¶aû_id'=>
$d©a
['place_id'],

135 'u£r_id'=>
$d©a
['user_id'],

136 'is_admš'=>
$d©a
['is_admin'],

137 'is_cÚfœmed'=>
$d©a
['is_confirmed'],

138 'ü—‹_time'=>
$d©a
['create_time']

141  
TRUE
;

144 
	}
}

146 
funùiÚ
 
	$upd©a_¶aû_memb”
(){

147 
$expœ©iÚ
=
	`time
()-300;

148 
$this
->
db
->
	`wh”e
('ü—‹_tim<',
$expœ©iÚ
);

149 
$this
->
db
->
	`d–‘e
($this->
¶aû_memb”_bË
);

150 
	}
}

152 
funùiÚ
 
	$g‘_»ûÁ_¶aû_memb”s
(
$¶aû_id
){

153 
$expœ©iÚ
=
	`time
()-300;

154 
$this
->
db
->
	`£Ëù
('u£r_id')->
	`äom
($this->
¶aû_memb”_bË
);

155 
$this
->
db
->
	`wh”e
('ü—‹_tim>',
$expœ©iÚ
);

156 
$this
->
db
->
	`wh”e
('¶aû_id',
$¶aû_id
);

157 
$qu”y
=
$this
->
db
->
	`g‘
();

158 
$u£r_ids
=
$qu”y
->
	`»suÉ_¬¿y
();

159 if(
$u£r_ids
){

160 
	`fÜ—ch
(
$u£r_ids
 
as
 
$key
=>
$v®ue
){

161 
$u£r_ids
[
$key
]=
$v®ue
['user_id'];

163  
$u£r_ids
;

166  
FALSE
;

167 
	}
}

169 
funùiÚ
 
	$g‘_¶aû_memb”_id_by_¶aû_id
(
$u£r_id
,
$¶aû_id
){

170 
$this
->
db
->
	`£Ëù
('¶aû_memb”_id')->
	`äom
($this->
¶aû_memb”_bË
);

171 
$this
->
db
->
	`wh”e
('u£r_id',
$u£r_id
);

172 
$this
->
db
->
	`wh”e
('¶aû_id',
$¶aû_id
);

173 
$qu”y
=
$this
->
db
->
	`g‘
();

174 
$num
=
$qu”y
->
	`row
();

175 if(
$num
)

176  
$num
->
¶aû_memb”_id
;

178  
FAlSE
;

179 
	}
}

185 
funùiÚ
 
	$g‘_¶aû_ÿ‹gÜy_id_by_Çme
(
$¶aû_ÿ‹gÜy_Çme
){

186 
$this
->
db
->
	`£Ëù
('place_category_id');

187 
$this
->
db
->
	`äom
($this->
¶aû_ÿ‹gÜy_bË
);

188 
$this
->
db
->
	`wh”e
('¶aû_ÿ‹gÜy_Çme',
$¶aû_ÿ‹gÜy_Çme
);

189 
$qu”y
 = 
$this
->
db
->
	`g‘
();

190 
$num
 = 
$qu”y
->
	`row
();

191 
$qu”y
->
	`ä“_»suÉ
();

192  
$num
->
¶aû_ÿ‹gÜy_id
;

193 
	}
}

195 
funùiÚ
 
	$g‘_¶aû_d©a_by_blu‘oÙh_id
(
$blu‘oÙh_id
){

196 
$this
->
db
->
	`£Ëù
("place_id,place_name,place_destription,place_category,member_count,create_time");

197 
$this
->
db
->
	`äom
($this->
¶aû_bË
);

198 
$this
->
db
->
	`wh”e
('blu‘oÙh_id',
$blu‘oÙh_id
);

199 
$qu”y
=
$this
->
db
->
	`g‘
();

200 
$¶aû
=
$qu”y
->
	`row_¬¿y
();

201 if(
$¶aû
){

202 
$¶aû_m‘as
=
$this
->
	`g‘_¶aû_m‘as_by_¶aû_id
(
$¶aû
['place_id']);

203 if(
$¶aû_m‘as
){

204 
	`fÜ—ch
(
$¶aû_m‘as
 
as
 
$v®ue
){

205 
$¶aû
[
$v®ue
['meta_key']]=$value['meta_value'];

208  
$¶aû
;

211  
FALSE
;

212 
	}
}

214 
funùiÚ
 
	$g‘_¶aû_d©as_by_ÿ‹gÜy
(
$ÿ‹gÜy
,
$·ge
=0,
$·ge_couÁ
=0){

216 
$¶aû_d©as
=
	`¬¿y
();

218 if(!
$·ge
)

219 
$·ge
=1;

221 if(!
$·ge_couÁ
)

222 
$·ge_couÁ
=20;

224 if(
$ÿ‹gÜy
){

225 
$this
->
db
->
	`wh”e
('¶aû_ÿ‹gÜy',
$ÿ‹gÜy
);

228 
$qu”y
 = 
$this
->
db
->
	`g‘
($this->
¶aû_bË
,
$·ge_couÁ
,(
$·ge
-1)*$page_count);

230 
$¶aû_d©as
=
$qu”y
->
	`»suÉ_¬¿y
();

232 
$qu”y
->
	`ä“_»suÉ
();

234 if(
$¶aû_d©as
){

235 
	`fÜ—ch
(
$¶aû_d©as
 
as
 
$key
=>
$v®ue
){

236 
$¶aû_m‘as
=
$this
->
	`g‘_¶aû_m‘as_by_¶aû_id
(
$v®ue
['place_id']);

237 if(
$¶aû_m‘as
){

238 
	`fÜ—ch
(
$¶aû_m‘as
 
as
 
$m‘a
){

239 
$v®ue
[
$m‘a
['meta_key']]=$meta['meta_value'];

242 
$¶aû_d©as
[
$key
]=
$v®ue
;

244  
$¶aû_d©as
;

247  
FALSE
;

248 
	}
}

254 
funùiÚ
 
	$šü—£_¶aû_memb”_couÁ
(
$¶aû_id
){

255 
$this
->
db
->
	`£t
('memb”_couÁ',"memb”_couÁ+1",
FALSE
);

256 
$this
->
db
->
	`wh”e
(
	`¬¿y
('¶aû_id'=>
$¶aû_id
));

257 
$this
->
db
->
	`upd©e
($this->
¶aû_bË
);

258 
	}
}

	@application/models/m_user.php

1 <?
php


9 şas 
	cM_u£r
 
ex‹nds
 
	mCI_Mod–
{

11 
´iv©e
 
	m$u£r_bË
;

13 
´iv©e
 
	m$u£r_m‘a_bË
;

15 
´iv©e
 
	m$£ssiÚ_bË
;

17 
´iv©e
 
	m$blu‘oÙh_bË
;

19 
´iv©e
 
	m$blutoÙh_£¬ch_bË
;

24 
funùiÚ
 
	$__cÚ¡ruù
(){

25 
·»Á
::
	`__cÚ¡ruù
();

26 
$this
->
u£r_bË
=$this->
db
->
	`db´efix
('user');

27 
$this
->
£ssiÚ_bË
=$this->
db
->
	`db´efix
('session');

28 
$this
->
u£r_m‘a_bË
=$this->
db
->
	`db´efix
('user_meta');

29 
$this
->
blu‘oÙh_bË
=$this->
db
->
	`db´efix
('bluetooth');

30 
$this
->
blu‘oÙh_£¬ch_bË
=$this->
db
->
	`db´efix
('bluetooth_search');

38 
funùiÚ
 
	$š£¹_u£r
(
$d©a
){

39 
$this
->
db
->
	`š£¹
($this->
u£r_bË
,
$d©a
);

40  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

41 
	}
}

48 
funùiÚ
 
	$d–‘e_u£r
(
$u£r_id
){

49 
$this
->
db
->
	`d–‘e
($this->
u£r_bË
,
	`¬¿y
('u£r_id'=>
	`štv®
(
$u£r_id
)));

50  (
$this
->
db
->
	`afãùed_rows
(è> 0è? 
TRUE
 : 
FALSE
;

51 
	}
}

58 
funùiÚ
 
	$add_u£r_m‘a
(
$d©a
){

59 
$u£r_m‘a_id
=
$this
->
	`g‘_u£r_m‘a_id_by_key
(
$d©a
['user_id'],$data['meta_key']);

61 if(
$u£r_m‘a_id
){

62 
$this
->
db
->
	`upd©e
(

63 
$this
->
u£r_m‘a_bË
,

64 
	`¬¿y
('m‘a_v®ue'=>
$d©a
['meta_value']),

65 
	`¬¿y
('u£r_m‘a_id'=>
$u£r_m‘a_id
)

67  
TRUE
;

69 
$this
->
db
->
	`š£¹
(

70 
$this
->
u£r_m‘a_bË
,

71 
	`¬¿y
(

72 'u£r_id'=>
$d©a
['user_id'],

73 'm‘a_key'=>
$d©a
['meta_key'],

74 'm‘a_v®ue'=>
$d©a
['meta_value']

76  
TRUE
;

78 
	}
}

80 
funùiÚ
 
	$šü—£_u£r_m‘a
(
$u£r_id
,
$m‘a_key
){

81 
$this
->
db
->
	`£t
('m‘a_v®ue','m‘a_v®ue+1',
FALSE
);

82 
$this
->
db
->
	`wh”e
(
	`¬¿y
('u£r_id'=>
$u£r_id
,'m‘a_key'=>
$m‘a_key
));

83 
$this
->
db
->
	`upd©e
($this->
u£r_m‘a_bË
);

84 
	}
}

86 
funùiÚ
 
	$deü—£_u£r_m‘a
(
$u£r_id
,
$m‘a_key
){

87 
$this
->
db
->
	`£t
('m‘a_v®ue','m‘a_v®ue-1',
FALSE
);

88 
$this
->
db
->
	`wh”e
(
	`¬¿y
('u£r_id'=>
$u£r_id
,'m‘a_key'=>
$m‘a_key
));

89 
$this
->
db
->
	`upd©e
($this->
u£r_m‘a_bË
);

90 
	}
}

97 
funùiÚ
 
	$add_blu‘oÙh
(
$d©a
){

99 
$blu‘oÙh_id
=
$this
->
	`g‘_blu‘oÙh_id_by_mac
(
$d©a
['bluetooth_mac']);

100 
	`log_mes§ge
("”rÜ",
	`£rŸlize
(
$d©a
));

101 
	`log_mes§ge
("”rÜ",
$blu‘oÙh_id
);

103 if(
$blu‘oÙh_id
&&
	`is£t
(
$d©a
['user_id'])){

104 
$this
->
db
->
	`upd©e
(

105 
$this
->
blu‘oÙh_bË
,

106 
	`¬¿y
('u£r_id'=>
$d©a
['user_id'],'bluetooth_name'=>$data['bluetooth_name']),

107 
	`¬¿y
('blu‘oÙh_id'=>
$blu‘oÙh_id
)

109  
$blu‘oÙh_id
;

110 }if(
$blu‘oÙh_id
&&
	`is£t
(
$d©a
['bluetooth_name'])&&$data['bluetooth_name']){

111 
$this
->
db
->
	`upd©e
(

112 
$this
->
blu‘oÙh_bË
,

113 
	`¬¿y
('blu‘oÙh_Çme'=>
$d©a
['bluetooth_name']),

114 
	`¬¿y
('blu‘oÙh_id'=>
$blu‘oÙh_id
)

116  
$blu‘oÙh_id
;

117 }if(
$blu‘oÙh_id
) {

118  
$blu‘oÙh_id
;

120 
$this
->
db
->
	`š£¹
($this->
blu‘oÙh_bË
,
$d©a
);

121  (
$this
->
db
->
	`afãùed_rows
(è> 0è? $this->db->
	`š£¹_id
(è: 
FALSE
;

124 
	}
}

131 
funùiÚ
 
	$add_blu‘oÙh_£¬ch
(
$d©a
){

132 
$this
->
db
->
	`š£¹
(

133 
$this
->
blu‘oÙh_£¬ch_bË
,

134 
	`¬¿y
(

135 'äom_id'=>
$d©a
['from_id'],

136 'to_id'=>
$d©a
['to_id'],

137 'rssi'=>
$d©a
['rssi'],

138 'ü—‹_time'=>
$d©a
['create_time']

140 
$this
->
db
->
	`š£¹
(

141 
$this
->
blu‘oÙh_£¬ch_bË
,

142 
	`¬¿y
(

143 'äom_id'=>
$d©a
['to_id'],

144 'to_id'=>
$d©a
['from_id'],

145 'rssi'=>
$d©a
['rssi'],

146 'ü—‹_time'=>
$d©a
['create_time']

148  
TRUE
;

149 
	}
}

157 
funùiÚ
 
	$add_blu‘oÙh_£¬chs_by_blu‘oÙh_d©as
(
$blu‘oÙh_id
,
$blu‘oÙh_d©as
){

159 
$blu‘oÙh_ids
=
$this
->
	`g‘_blu‘oÙh_ids_by_blu‘oÙh_d©as
(
$blu‘oÙh_d©as
);

161 
$Ëngth
=
	`couÁ
(
$blu‘oÙh_ids
);

162 
$i
=0;$i<
$Ëngth
;$i++){

163 
$this
->
	`add_blu‘oÙh_£¬ch
(
	`¬¿y
(

164 'äom_id'=>
$blu‘oÙh_id
,

165 'to_id'=>
$blu‘oÙh_ids
[
$i
],

166 'rssi'=>
$blu‘oÙh_d©as
[
$i
][2],

167 'ü—‹_time'=>
	`time
()

170  
TRUE
;

171 
	}
}

179 
funùiÚ
 
	$g‘_blu‘oÙh_ids_by_£¬ch_time
(
$blu‘oÙh_id
,
$cu¼’t_time
){

181 
$blu‘oÙh_ids
=
	`¬¿y
();

183 
$ü—‹_time
=
$cu¼’t_time
-300;

185 
$this
->
db
->
	`£Ëù
('di¡šùo_id',
FALSE
)->
	`äom
($this->
blu‘oÙh_£¬ch_bË
);

187 
$this
->
db
->
	`wh”e
(
	`¬¿y
(

188 'äom_id'=>
$blu‘oÙh_id
,

189 'ü—‹_tim>' =>
$ü—‹_time


192 
$qu”y
=
$this
->
db
->
	`g‘
();

194 
$blu‘oÙh_ids
=
$qu”y
->
	`»suÉ_¬¿y
();

196 
	`fÜ—ch
(
$blu‘oÙh_ids
 
as
 
$key
 => 
$v®ue
){

197 
$blu‘oÙh_ids
[
$key
]=
$v®ue
['to_id'];

200 
$qu”y
->
	`ä“_»suÉ
();

202  
$blu‘oÙh_ids
;

204 
	}
}

212 
funùiÚ
 
	$g‘_blu‘oÙh_£¬ch_d©as_by_£¬ch_time
(
$blu‘oÙh_id
,
$cu¼’t_time
){

213 
$blu‘oÙh_d©as
=
	`¬¿y
();

215 
$ü—‹_time
=
$cu¼’t_time
-300;

217 
$this
->
db
->
	`£Ëù
('to_id, MAXĞü—‹_timèAS c»©e_time, COUNTĞto_id ) AS s—rch_couÁ',
FALSE
);

219 
$this
->
db
->
	`äom
($this->
blu‘oÙh_£¬ch_bË
);

221 
$this
->
db
->
	`wh”e
(
	`¬¿y
(

222 'äom_id'=>
$blu‘oÙh_id
,

223 'ü—‹_tim>' =>
$ü—‹_time


226 
$this
->
db
->
	`group_by
('to_id');

228 
$this
->
db
->
	`Üd”_by
('create_time','desc');

230 
$qu”y
=
$this
->
db
->
	`g‘
();

232 
$blu‘oÙh_d©as
=
$qu”y
->
	`»suÉ_¬¿y
();

234 
$qu”y
->
	`ä“_»suÉ
();

236  
$blu‘oÙh_d©as
;

237 
	}
}

239 
funùiÚ
 
	$g‘_doubË_blu‘oÙh_£¬ch_d©as_by_£¬ch_time
(
$blu‘oÙh_id
,
$cu¼’t_time
){

240 
$blu‘oÙh_d©as
=
	`¬¿y
();

242 
$ü—‹_time
=
$cu¼’t_time
-300;

244 
$qu”y
=
$this
->
db
->
	`qu”y
("

245 
SELECT
 
to_id
, 
	`MAX
Ğ
ü—‹_time
 ) 
AS
 c»©e_time, 
	`COUNT
Ğto_id ) AS 
£¬ch_couÁ


246 
FROM
 
$this
->
blu‘oÙh_£¬ch_bË


247 
WHERE
 
to_id
 <> 
$blu‘oÙh_id


248 
AND
 `
ü—‹_time
` > 
$ü—‹_time


249 
AND
 
äom_id


250 
	`IN
 (

251 
SELECT
 `
to_id
`

252 
FROM
 
$this
->
blu‘oÙh_£¬ch_bË


253 
WHERE
 `
äom_id
` =
$blu‘oÙh_id


254 
AND
 `
ü—‹_time
` > 
$ü—‹_time


256 
GROUP
 
BY
 `
to_id
`

257 
UNION


258 
SELECT
 
to_id
, 
	`MAX
Ğ
ü—‹_time
 ) 
AS
 c»©e_time, 
	`COUNT
Ğto_id ) AS 
£¬ch_couÁ


259 
FROM
 
$this
->
blu‘oÙh_£¬ch_bË


260 
WHERE
 
äom_id
 = 
$blu‘oÙh_id


261 
AND
 `
ü—‹_time
` > 
$ü—‹_time


262 
GROUP
 
BY
 `
to_id
`

263 
ORDER
 
BY
 
ü—‹_time
 
DESC


267 
$blu‘oÙh_d©as
=
$qu”y
->
	`»suÉ_¬¿y
();

269 
$qu”y
->
	`ä“_»suÉ
();

271  
$blu‘oÙh_d©as
;

272 
	}
}

274 
funùiÚ
 
	$g‘_blu‘oÙh_£¬ch_d©as_by_blu‘oÙh_id
(
$blu‘oÙh_id
,
$sÜt
,
$·ge
,
$·ge_couÁ
){

275 
$blu‘oÙh_d©as
=
	`¬¿y
();

277 
$this
->
db
->
	`£Ëù
('to_id, MAXĞü—‹_timèAS c»©e_time, COUNTĞto_id ) AS s—rch_couÁ',
FALSE
);

279 
$this
->
db
->
	`wh”e
('äom_id',
$blu‘oÙh_id
);

281 
$this
->
db
->
	`group_by
('to_id');

283 
$this
->
db
->
	`Üd”_by
(
$sÜt
,'desc');

285 
$qu”y
=
$this
->
db
->
	`g‘
($this->
blu‘oÙh_£¬ch_bË
,
$·ge_couÁ
,(
$·ge
-1)*$page_count);

287 
$blu‘oÙh_d©as
=
$qu”y
->
	`»suÉ_¬¿y
();

289 
$qu”y
->
	`ä“_»suÉ
();

291  
$blu‘oÙh_d©as
;

292 
	}
}

294 
funùiÚ
 
	$g‘_u£r_d©as_by_blu‘oÙh_£¬ch_d©as
(
$blu‘oÙh_d©as
){

296 
$u£r_d©as
=
	`¬¿y
();

298 
	`fÜ—ch
(
$blu‘oÙh_d©as
 
as
 
$v®ue
){

299 
$u£r_d©a
=
$this
->
	`g‘_u£r_d©a_by_blu‘oÙh_id
(
$v®ue
['to_id']);

300 if(!
$u£r_d©a
){

301 
$u£r_d©a
['user_id']=0;

302 
$u£r_d©a
['blu‘oÙh_id']=
$v®ue
['to_id'];

303 
$u£r_d©a
['di¥Ïy_Çme']=
$this
->
	`g‘_blu‘oÙh_Çme_by_blu‘oÙh_id
(
$v®ue
['to_id']);

304 
$u£r_d©a
['real_name']=$user_data['display_name'];

305 
$u£r_d©a
['Ï¡_aùiv™y']=
	`time
();

306 
$u£r_d©a
['u£r_av©¬']=
	`ba£_u¾
('upload/default.jpg');

307 
$u£r_d©a
['friend_count']=0;

308 
$u£r_d©a
['weibo_count']=0;

309 
$u£r_d©a
['latest_update']="taè¿˜æ²¡æœ‰æ³¨å†Œèœ—é‚»å®¢";

311 
$u£r_d©a
['Ï¡_£¬ch_time']=
$v®ue
['create_time'];

312 
$u£r_d©a
['£¬ch_couÁ']=
$v®ue
['search_count'];

313 
$u£r_d©as
[]=
$u£r_d©a
;

315  
$u£r_d©as
;

317 
	}
}

324 
funùiÚ
 
	$g‘_u£r_d©as_by_blu‘oÙh_ids
(
$blu‘oÙh_ids
){

326 
$u£r_d©as
=
	`¬¿y
();

328 
	`fÜ—ch
(
$blu‘oÙh_ids
 
as
 
$v®ue
){

329 
$u£r_d©a
=
$this
->
	`g‘_u£r_d©a_by_blu‘oÙh_id
(
$v®ue
);

330 if(!
$u£r_d©a
){

331 
$u£r_d©a
['user_id']=0;

332 
$u£r_d©a
['blu‘oÙh_id']=
$v®ue
;

333 
$u£r_d©a
['di¥Ïy_Çme']=
$this
->
	`g‘_blu‘oÙh_Çme_by_blu‘oÙh_id
(
$v®ue
);

334 
$u£r_d©a
['real_name']=$user_data['display_name'];

335 
$u£r_d©a
['Ï¡_aùiv™y']=
	`time
();

336 
$u£r_d©a
['u£r_av©¬']=
	`ba£_u¾
('upload/default.jpg');

337 
$u£r_d©a
['friend_count']=0;

338 
$u£r_d©a
['weibo_count']=0;

339 
$u£r_d©a
['latest_update']="æˆ‘è¿˜æ²¡æœ‰æ³¨å†Œèœ—é‚»å®¢ï¼Œå¿«æ¥é‚€è¯·æˆ‘å§ï¼";

341 
$u£r_d©as
[]=
$u£r_d©a
;

343  
$u£r_d©as
;

345 
	}
}

352 
funùiÚ
 
	$g‘_u£r_m‘a_id_by_key
(
$u£r_id
,
$m‘a_key
){

353 
$this
->
db
->
	`£Ëù
('u£r_m‘a_id')->
	`äom
($this->
u£r_m‘a_bË
);

354 
$this
->
db
->
	`wh”e
(
	`¬¿y
(

355 'u£r_id'=>
$u£r_id
,

356 'm‘a_key'=>
$m‘a_key


358 
$qu”y
 = 
$this
->
db
->
	`g‘
();

359 
$num
 = 
$qu”y
->
	`row
();

360 
$qu”y
->
	`ä“_»suÉ
();

361 if(
$num
)

362  
	`štv®
(
$num
->
u£r_m‘a_id
);

364  
FALSE
;

365 
	}
}

373 
funùiÚ
 
	$g‘_u£r_m‘a_v®ue_by_key
(
$u£r_id
,
$m‘a_key
){

374 
$this
->
db
->
	`£Ëù
('m‘a_v®ue')->
	`äom
($this->
u£r_m‘a_bË
);

375 
$this
->
db
->
	`wh”e
(
	`¬¿y
(

376 'u£r_id'=>
$u£r_id
,

377 'm‘a_key'=>
$m‘a_key


379 
$qu”y
 = 
$this
->
db
->
	`g‘
();

380 
$num
 = 
$qu”y
->
	`row
();

381 
$qu”y
->
	`ä“_»suÉ
();

382 if(
$num
)

383  
$num
->
m‘a_v®ue
;

385  
FALSE
;

386 
	}
}

393 
funùiÚ
 
	$g‘_u£r_m‘as_by_u£r_id
(
$u£r_id
){

394 
$this
->
db
->
	`£Ëù
('m‘a_key,m‘a_v®ue')->
	`äom
($this->
u£r_m‘a_bË
);

395 
$this
->
db
->
	`wh”e
('u£r_id',
$u£r_id
);

396 
$qu”y
 = 
$this
->
db
->
	`g‘
();

397 
$row
 = 
$qu”y
->
	`»suÉ_¬¿y
();

398 
$qu”y
->
	`ä“_»suÉ
();

399 if(
$row
)

400  
$row
;

402  
FALSE
;

403 
	}
}

409 
funùiÚ
 
	$g‘_blu‘oÙh_id_by_mac
(
$blu‘oÙh_mac
){

410 
$this
->
db
->
	`£Ëù
('blu‘oÙh_id')->
	`äom
($this->
blu‘oÙh_bË
);

411 
$this
->
db
->
	`wh”e
('blu‘oÙh_mac',
$blu‘oÙh_mac
);

412 
$qu”y
 = 
$this
->
db
->
	`g‘
();

413 
$num
 = 
$qu”y
->
	`row
();

414 
$qu”y
->
	`ä“_»suÉ
();

415 if(
$num
)

416  
	`štv®
(
$num
->
blu‘oÙh_id
);

418  
FALSE
;

419 
	}
}

427 
funùiÚ
 
	$g‘_blu‘oÙh_id_by_mac_ªd_u£r_id
(
$blu‘oÙh_mac
,
$u£r_id
){

428 
$this
->
db
->
	`£Ëù
('blu‘oÙh_id')->
	`äom
($this->
blu‘oÙh_bË
);

429 
$this
->
db
->
	`wh”e
('blu‘oÙh_mac',
$blu‘oÙh_mac
);

430 
$this
->
db
->
	`wh”e
('u£r_id',
$u£r_id
);

431 
$qu”y
 = 
$this
->
db
->
	`g‘
();

432 
$num
 = 
$qu”y
->
	`row
();

433 
$qu”y
->
	`ä“_»suÉ
();

435 if(
$num
)

436  
	`štv®
(
$num
->
blu‘oÙh_id
);

438  
FALSE
;

439 
	}
}

449 
funùiÚ
 
	$g‘_blu‘oÙh_ids_by_blu‘oÙh_d©as
(
$blu‘oÙh_d©as
){

451 
$blu‘oÙh_ids
=
	`¬¿y
();

453 
$blu‘oÙh_d©as
){

454 
$blu‘oÙh_d©a
=
	`¬¿y_shiá
(
$blu‘oÙh_d©as
);

455 
$blu‘oÙh_id
=
$this
->
	`add_blu‘oÙh
(
	`¬¿y
(

456 'blu‘oÙh_mac'=>
$blu‘oÙh_d©a
[0],

457 'blu‘oÙh_Çme'=>
$blu‘oÙh_d©a
[1],

458 'ü—‹_time'=>
	`time
()

461 
$blu‘oÙh_ids
[]=
$blu‘oÙh_id
;

464  
$blu‘oÙh_ids
;

465 
	}
}

473 
funùiÚ
 
	$g‘_blu‘oÙh_£¬ch_id_by_blu‘oÙh_id
(
$äom_id
,
$to_id
){

475 
$this
->
db
->
	`£Ëù
('blu‘oÙh_£¬ch_id')->
	`äom
($this->
blu‘oÙh_£¬ch_bË
);

477 
$this
->
db
->
	`wh”e
(
	`¬¿y
('äom_id'=>
$äom_id
,'to_id'=>
$to_id
));

479 
$qu”y
 = 
$this
->
db
->
	`g‘
();

480 
$num
 = 
$qu”y
->
	`row
();

481 
$qu”y
->
	`ä“_»suÉ
();

483 if(
$num
)

484  
	`štv®
(
$num
->
blu‘oÙh_£¬ch_id
);

486  
FALSE
;

487 
	}
}

494 
funùiÚ
 
	$g‘_u£r_id_by_blu‘oÙh_mac
(
$blu‘oÙh_mac
){

495 
$this
->
db
->
	`£Ëù
('u£r_id')->
	`äom
($this->
u£r_bË
);

496 
$this
->
db
->
	`wh”e
('bluetooth_id',

497 '(SELECT blu‘oÙh_id FROM '.
$this
->
blu‘oÙh_bË
.' WHERE blu‘oÙh_mac="'.
$blu‘oÙh_mac
.'")',

498 
FALSE
);

499 
$qu”y
=
$this
->
db
->
	`g‘
();

500 
$num
=
$qu”y
->
	`row
();

501 
$qu”y
->
	`ä“_»suÉ
();

503 if(
$num
)

504  
$num
->
u£r_id
;

506  
FALSE
;

507 
	}
}

514 
funùiÚ
 
	$g‘_u£r_d©a_by_u£r_id
(
$u£r_id
){

516 
$u£r_d©a
=
	`¬¿y
();

518 
$this
->
db
->
	`£Ëù
('di¥Ïy_Çme,»®_Çme,Ï¡_aùiv™y,ü—‹_time')->
	`äom
($this->
u£r_bË
);

519 
$this
->
db
->
	`wh”e
('u£r_id',
$u£r_id
);

520 
$qu”y
 = 
$this
->
db
->
	`g‘
();

521 
$row
 = 
$qu”y
->
	`row_¬¿y
();

522 
$qu”y
->
	`ä“_»suÉ
();

524 if(!
$row
)

525  
FALSE
;

526 
$u£r_d©a
['u£r_id']=
$u£r_id
;

527 
$u£r_d©a
['»®_Çme']=
$row
['real_name'];

528 
$u£r_d©a
['di¥Ïy_Çme']=
$row
['display_name'];

529 
$u£r_d©a
['Ï¡_aùiv™y']=
$row
['last_activity'];

530 
$u£r_d©a
['ü—‹_time']=
$row
['create_time'];

531 
$u£r_m‘as
=
$this
->
	`g‘_u£r_m‘as_by_u£r_id
(
$u£r_id
);

532 if(
$u£r_m‘as
){

533 
	`fÜ—ch
(
$u£r_m‘as
 
as
 
$v®ue
){

534 
$u£r_d©a
[
$v®ue
['meta_key']]=$value['meta_value'];

537  
$u£r_d©a
;

538 
	}
}

540 
funùiÚ
 
	$g‘_u£r_d©a_by_di¥Ïy_Çme
(
$di¥Ïy_Çme
){

542 
$u£r_d©a
=
	`¬¿y
();

544 
$this
->
db
->
	`£Ëù
('u£r_id,di¥Ïy_Çme,»®_Çme,Ï¡_aùiv™y,ü—‹_time')->
	`äom
($this->
u£r_bË
);

545 
$this
->
db
->
	`like
('di¥Ïy_Çme', 
$di¥Ïy_Çme
);

546 
$qu”y
 = 
$this
->
db
->
	`g‘
();

547 
$row
 = 
$qu”y
->
	`»suÉ_¬¿y
();

548 
$qu”y
->
	`ä“_»suÉ
();

550 if(!
$row
)

551  
FALSE
;

552 
	`fÜ—ch
(
$row
 
as
 
$key
=>
$v®ue
){

553 
$u£r_d©a
=
	`¬¿y
();

554 
$u£r_d©a
['u£r_id']=
$v®ue
['user_id'];

555 
$u£r_d©a
['»®_Çme']=
$v®ue
['real_name'];

556 
$u£r_d©a
['di¥Ïy_Çme']=
$v®ue
['display_name'];

557 
$u£r_d©a
['Ï¡_aùiv™y']=
$v®ue
['last_activity'];

558 
$u£r_d©a
['ü—‹_time']=
$v®ue
['create_time'];

559 
$u£r_m‘as
=
$this
->
	`g‘_u£r_m‘as_by_u£r_id
(
$u£r_d©a
['user_id']);

560 if(
$u£r_m‘as
){

561 
	`fÜ—ch
(
$u£r_m‘as
 
as
 
$m‘a_v®ue
){

562 
$u£r_d©a
[
$m‘a_v®ue
['meta_key']]=$meta_value['meta_value'];

565 
$row
[
$key
]=
$u£r_d©a
;

567  
$row
;

568 
	}
}

575 
funùiÚ
 
	$g‘_u£r_d©as_by_u£r_ids
(
$u£r_ids
){

576 
$u£r_d©as
=
	`¬¿y
();

577 if(
$u£r_ids
){

578 
	`fÜ—ch
(
$u£r_ids
 
as
 
$v®ue
){

579 
$u£r_d©a
=
$this
->
	`g‘_u£r_d©a_by_u£r_id
(
$v®ue
);

580 
$u£r_d©as
[]=
$u£r_d©a
;

583  
$u£r_d©as
;

585 
	}
}

591 
funùiÚ
 
	$g‘_®l_u£r_id
(
$·ge
=1,
$·ge_couÁ
=20){

592 
$this
->
db
->
	`£Ëù
('user_id');

593 
$this
->
db
->
	`Üd”_by
("user_id", "desc");

594 
$qu”y
=
$this
->
db
->
	`g‘
($this->
u£r_bË
,
$·ge_couÁ
,(
$·ge
-1)*$page_count);

595 if(
$qu”y
->
	`num_rows
()>0){

596 
$u£r_ids
=
$qu”y
->
	`»suÉ_¬¿y
();

597 
$qu”y
->
	`ä“_»suÉ
();

598 
	`fÜ—ch
 (
$u£r_ids
 
as
 
$key
=>
$v®ue
){

599 
$u£r_ids
[
$key
]=
$v®ue
['user_id'];

601  
$u£r_ids
;

603  
FALSE
;

605 
	}
}

612 
funùiÚ
 
	$g‘_u£r_d©a_by_blu‘oÙh_id
(
$blu‘oÙh_id
){

614 
$u£r_d©a
=
	`¬¿y
();

616 
$this
->
db
->
	`£Ëù
('u£r_id,blu‘oÙh_id,di¥Ïy_Çme,»®_Çme,Ï¡_aùiv™y')->
	`äom
($this->
u£r_bË
);

617 
$this
->
db
->
	`wh”e
('blu‘oÙh_id',
$blu‘oÙh_id
);

618 
$qu”y
 = 
$this
->
db
->
	`g‘
();

619 
$row
 = 
$qu”y
->
	`row_¬¿y
();

620 
$qu”y
->
	`ä“_»suÉ
();

622 if(
$row
){

623 
$u£r_d©a
['u£r_id']=
$row
['user_id'];

624 
$u£r_d©a
['blu‘oÙh_id']=
$row
['bluetooth_id'];

625 
$u£r_d©a
['»®_Çme']=
$row
['real_name'];

626 
$u£r_d©a
['di¥Ïy_Çme']=
$row
['display_name'];

627 
$u£r_d©a
['Ï¡_aùiv™y']=
$row
['last_activity'];

628 
$u£r_m‘as
=
$this
->
	`g‘_u£r_m‘as_by_u£r_id
(
$row
['user_id']);

629 if(
$u£r_m‘as
){

630 
	`fÜ—ch
(
$u£r_m‘as
 
as
 
$v®ue
){

631 
$u£r_d©a
[
$v®ue
['meta_key']]=$value['meta_value'];

634  
$u£r_d©a
;

637  
FALSE
;

640 
	}
}

647 
funùiÚ
 
	$g‘_blu‘oÙh_Çme_by_blu‘oÙh_id
(
$blu‘oÙh_id
){

648 
$this
->
db
->
	`£Ëù
('blu‘oÙh_Çme')->
	`äom
($this->
blu‘oÙh_bË
);

649 
$this
->
db
->
	`wh”e
('blu‘oÙh_id',
$blu‘oÙh_id
);

650 
$qu”y
=
$this
->
db
->
	`g‘
();

651 
$row
=
$qu”y
->
	`row
();

652 
$qu”y
->
	`ä“_»suÉ
();

654 if(
$row
)

655  
$row
->
blu‘oÙh_Çme
;

657  
FLASE
;

658 
	}
}

665 
funùiÚ
 
	$g‘_u£r_»®_Çme_by_di¥Ïy_Çme
(
$di¥Ïy_Çme
){

667 
$this
->
db
->
	`£Ëù
("max(u£r_id)+1‡ max_u£r_id",
çl£
);

668 
$qu”y
=
$this
->
db
->
	`g‘
($this->
u£r_bË
);

669 
$u£r_id
=
$qu”y
->
	`row_¬¿y
();

670 if(
$u£r_id
){

671  
$di¥Ïy_Çme
."(".
$u£r_id
['max_user_id'].")";

673  
çl£
;

675 
	}
}

677 
funùiÚ
 
	$¯
(){

679 
	}
}

687 
funùiÚ
 
check_exi¡
(
$key
 = 'ema',
$v®ue
 = '', 
$exşude_u£r_id
 = 0)

689 if(!
em±y
(
$v®ue
))

692 if(
$key
=='real_name'){

693 
$this
->
db
->
£Ëù
('u£r_id')->
äom
($this->
u£r_bË
)->
like
(
$key
,
$v®ue
.'(','after');

695 
	g$this
->
	gdb
->
£Ëù
('u£r_id')->
äom
(
$this
->
u£r_bË
)->
wh”e
(
$key
,
$v®ue
);

698 if(!
em±y
(
$exşude_u£r_id
è&& 
is_num”ic
($exclude_user_id))

700 
	g$this
->
	gdb
->
wh”e
('uid <>', 
$exşude_u£r_id
);

703 
	g$qu”y
 = 
$this
->
db
->
g‘
();

704 
	g$num
 = 
$qu”y
->
num_rows
();

705 
	g$qu”y
->
ä“_»suÉ
();

707 if(
	g$num
)

708  
	g$num
;

710  
	gFALSE
;

712  
	gFALSE
;

720 
funùiÚ
 
	$upd©e_Ï¡_aùiv™y
(
$u£r_id
,
$Ï¡_aùiv™y
){

721 if(
$u£r_id
){

722 
$this
->
db
->
	`upd©e
(

723 
$this
->
u£r_bË
,

724 
	`¬¿y
('Ï¡_aùiv™y'=>
$Ï¡_aùiv™y
),

725 
	`¬¿y
('u£r_id'=>
$u£r_id
)

728 
	}
}

736 
funùiÚ
 
	$v®id©e_u£r
(
$d©a
)

738 
$u£r_d©a
 = 
FALSE
;

740 
$this
->
db
->
	`£Ëù
('*')->
	`äom
($this->
u£r_bË
);

741 
$this
->
db
->
	`wh”e
('ema', 
$d©a
['email']);

742 
$qu”y
 = 
$this
->
db
->
	`g‘
();

744 if(
$qu”y
->
	`num_rows
() == 0)

745  
FALSE
;

747 
$u£r_d©a
 = 
$qu”y
->
	`row_¬¿y
();

749 
$u£r_d©a
 = ($u£r_d©a['·sswÜd']===
	`md5
(
$d©a
['·sswÜd'])è? $u£r_d©¨: 
FALSE
;

751 
$qu”y
->
	`ä“_»suÉ
();

753 
$u£r_m‘as
=
$this
->
	`g‘_u£r_m‘as_by_u£r_id
(
$u£r_d©a
['user_id']);

754 if(
$u£r_m‘as
){

755 
	`fÜ—ch
(
$u£r_m‘as
 
as
 
$v®ue
){

756 
$u£r_d©a
[
$v®ue
['meta_key']]=$value['meta_value'];

760  
$u£r_d©a
;

761 
	}
}

	@application/models/m_wlinke.php

1 <?
php


3 şas 
	cM_Wlške
 
ex‹nds
 
	mCI_Mod–
{

5 
v¬
 
	m$u£rd©a
;

6 
v¬
 
	m$cu¼’t_time
;

8 
funùiÚ
 
	$__cÚ¡ruù
(){

9 
·»Á
::
	`__cÚ¡ruù
();

10 
$this
->
cu¼’t_time
=
	`time
();

11 
$this
->
lßd
->
	`mod–
('m_user');

12 
$this
->
lßd
->
	`h–³r
(
	`¬¿y
('we_error','email','check'));

23 
funùiÚ
 
	`add_u£r
(
$ema
,
$·sswÜd
,
$»®_Çme
,
$blu‘oÙh_mac
="",
$blu‘oÙh_Çme
=""){

25 if(!
	`v®id_ema
(
$ema
)){

26 
$this
->
lßd
->
	`lib¿ry
('we_”rÜ',
	`¬¿y
(0,'invalid_email'));

27  
$this
->
we_”rÜ
;

30 if(
$this
->
m_u£r
->
	`check_exi¡
('ema',
$ema
)){

31 
$this
->
lßd
->
	`lib¿ry
('we_”rÜ',
	`¬¿y
(0,'existing_email'));

32  
$this
->
we_”rÜ
;

34 
$this
->
u£rd©a
['ema']=
$ema
;

36 if(!
	`v®id_·sswÜd
(
$·sswÜd
)){

37 
$this
->
lßd
->
	`lib¿ry
('we_”rÜ',
	`¬¿y
(0,'invalid_password'));

38  
$this
->
we_”rÜ
;

40 
$this
->
u£rd©a
['·sswÜd']=
$·sswÜd
;

43 if(!
	`v®id_»®_Çme
(
$»®_Çme
)){

44 
$this
->
lßd
->
	`lib¿ry
('we_”rÜ',
	`¬¿y
(0,'invalid_real_name'));

45  
$this
->
we_”rÜ
;

47 
$this
->
u£rd©a
['di¥Ïy_Çme']=
$»®_Çme
;

49 if(!
$blu‘oÙh_mac
||!
	`v®id_blu‘oÙh_mac
($bluetooth_mac)){

50 
$this
->
lßd
->
	`lib¿ry
('we_”rÜ',
	`¬¿y
(0,'invalid_bluetooth_mac'));

51  
$this
->
we_”rÜ
;

53 
$blu‘oÙh_mac
=
	`¡¹ouµ”
($bluetooth_mac);

57 
$blu‘oÙh_id
=
$this
->
m_u£r
->
	`g‘_u£r_id_by_blu‘oÙh_mac
(
$blu‘oÙh_mac
);

58 if(
$blu‘oÙh_id
){

59 
$this
->
lßd
->
	`lib¿ry
('we_”rÜ',
	`¬¿y
(0,'existing_bluetooth_mac'));

60  
$this
->
we_”rÜ
;

62 
$blu‘oÙh_d©a
=
	`¬¿y
(

63 'blu‘oÙh_mac'=>
$blu‘oÙh_mac
,

64 'blu‘oÙh_Çme'=>
$blu‘oÙh_Çme
,

65 'ü—‹_time'=>
$this
->
cu¼’t_time


67 
$this
->
u£rd©a
['blu‘oÙh_id']=$this->
m_u£r
->
	`add_blu‘oÙh
(
$blu‘oÙh_d©a
);

70 
$this
->
u£rd©a
['·sswÜd']=
	`md5
(
$·sswÜd
);

72 
$this
->
u£rd©a
['»®_Çme']=$this->
m_u£r
->
	`g‘_u£r_»®_Çme_by_di¥Ïy_Çme
(
$»®_Çme
);

73 
$this
->
u£rd©a
['ü—‹_time']=$this->
cu¼’t_time
;

74 
$this
->
u£rd©a
['user_type']='user';

76 
$this
->
u£rd©a
['u£r_id']=$this->
m_u£r
->
	`š£¹_u£r
($this->userdata);

78 if(!
$this
->
u£rd©a
['user_id']){

79 
$this
->
lßd
->
	`lib¿ry
('we_”rÜ',
	`¬¿y
(0,'insert_user_error'));

80  
$this
->
we_”rÜ
;

81 }if(
	`štv®
(
$this
->
u£rd©a
['real_name'])!=$this->userdata['user_id']){

82 
$this
->
m_u£r
->
	`d–‘e_u£r
($this->
u£rd©a
['user_id']);

83  
$this
->
u£rd©a
['user_id'];

84 
$this
->
lßd
->
	`lib¿ry
('we_”rÜ',
	`¬¿y
(0,'insert_user_sequence_error'));

85  
$this
->
we_”rÜ
;

87 
$blu‘oÙh_d©a
=
	`¬¿y
(

88 'u£r_id'=>
$this
->
u£rd©a
['user_id'],

89 'blu‘oÙh_mac'=>
$blu‘oÙh_mac
,

90 'blu‘oÙh_Çme'=>
$blu‘oÙh_Çme
,

91 'ü—‹_time'=>
$this
->
cu¼’t_time


95 
$®bum_d©a
=
$this
->
	`add_®bum
($this->
u£r_d©a
,"é»˜è®¤","ç”¨æˆ·çš„é»˜è®¤ç›¸å†Œ");

96  
$®bum_d©a
;

97  
$this
->
u£rd©a
;

98 
	}
}

107 
funùiÚ
 
add_®bum
(
$u£r_id
,
$®bum_Çme
,
$®bum_de¡rtiÚ
="",
$®bum_·sswÜd
=""){

109 if(
$®bum_Çme
=='é»˜è®¤'){

110 
$this
->
lßd
->
h–³r
('album');

111 
ü—‹_u£r_dœ
(
$u£r_id
);

113 
	g$this
->
	glßd
->
mod–
('m_album');

114 
	g$®bum_d©a
=
¬¿y
(

115 'u£r_id'=>
$u£r_id
,

116 '®bum_Çme'=>
$®bum_Çme
,

117 '®bum_de¡rtiÚ'=>
$®bum_de¡rtiÚ
,

118 'ü—‹_time'=>
$this
->
cu¼’t_time
,

121 '®bum_·sswÜd'=>(
$®bum_·sswÜd
?
md5
($album_password):"")

123 
	g$®bum_d©a
['®bum_id']=
$this
->
m_®bum
->
š£¹_®bum
(
$®bum_d©a
);

124 if(
	g$®bum_d©a
['album_id'])

125  
	g$®bum_d©a
;

127 
	g$this
->
	glßd
->
lib¿ry
('we_”rÜ',
¬¿y
(0,'add_album_error'));

128  
	g$this
->
	gwe_”rÜ
;

	@application/models/phone_carrier_model.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

3 şas 
	cPhÚe_ÿ¼›r_mod–
 
ex‹nds
 
	mCI_Mod–
 {

5 
funùiÚ
 
	$__cÚ¡ruù
()

7 
·»Á
::
	`__cÚ¡ruù
();

8 
$this
->
lßd
->
	`d©aba£
();

11 
funùiÚ
 
	$g‘C¬r›rs
(
¬¿y
 
$©Œibu‹s
)

13 
	`fÜ—ch
 (
$©Œibu‹s
 
as
 
$f›ld
)

15 
$this
->
db
->
	`£Ëù
(
$f›ld
)->
	`äom
('phone_carrier');

16 
$qu”y
 = 
$this
->
db
->
	`g‘
();

17 
	`fÜ—ch
 (
$qu”y
->
	`»suÉ_¬¿y
(è
as
 
$row
)

19 
$d©a
[] = 
	`¬¿y
(
$f›ld
, 
$row
[$field]);

23  
$d©a
;

24 
	}
}

	@application/third_party/CIUnit/bootstrap_phpunit.php

1 <?
php


15 
defše
('CIUnit_Version', '0.18-dev_for_CI2.1.0');

35 
defše
('ENVIRONMENT', 'testing');

45 
”rÜ_»pÜtšg
(-1);

62 
	g$sy¡em_·th
 = 
dœÇme
(
__FILE__
) . '/../../../system';

81 
	g$­¶iÿtiÚ_fŞd”
 = 
dœÇme
(
__FILE__
) . '/../..';

97 
	g$v›w_fŞd”
 = '';

130 
	g$ciun™_fŞd”
 = 
dœÇme
(
__FILE__
);

139 
	g$‹¡s_fŞd”
 = 
dœÇme
(
__FILE__
) . "/../../../tests";

161 ià(
»®·th
(
$sy¡em_·th
è!=ğ
FALSE
)

163 
$sy¡em_·th
 = 
»®·th
($system_path).'/';

167 
	g$sy¡em_·th
 = 
¹rim
(
$sy¡em_·th
, '/').'/';

170 iàĞ! 
	$is_dœ
(
$sy¡em_·th
))

172 
	`ex™
("You¸sy¡em fŞd”…©h dÛ nÙ‡µ—¸tØb£ˆcÜ»ùly. PËa£ o³ÀthfŞlowšg fªd cÜ»ùhis: ".
	`·thšfo
(
__FILE__
, 
PATHINFO_BASENAME
));

173 
	}
}

181 
defše
('SELF', 
·thšfo
(
__FILE__
, 
PATHINFO_BASENAME
));

185 
defše
('EXT', '.php');

188 
defše
('BASEPATH', 
¡r_»¶aû
("\\", "/", 
$sy¡em_·th
));

191 
defše
('FCPATH', 
¡r_»¶aû
(
SELF
, '', 
__FILE__
));

194 
defše
('SYSDIR', 
Œim
(
¡¼chr
Ñrim(
BASEPATH
, '/'), '/'), '/'));

198 ià(
	$is_dœ
(
$­¶iÿtiÚ_fŞd”
))

200 
	`defše
('APPPATH', 
	`»®·th
(
$­¶iÿtiÚ_fŞd”
) . '/');

201 
	}
}

204 iàĞ! 
is_dœ
(
BASEPATH
.
$­¶iÿtiÚ_fŞd”
.'/'))

206 
ex™
("You¸­¶iÿtiÚ fŞd”…©h dÛ nÙ‡µ—¸tØb£ˆcÜ»ùly. PËa£ o³ÀthfŞlowšg fªd cÜ»ùhis: ".
SELF
);

209 
defše
('APPPATH', 
»®·th
(
BASEPATH
.
$­¶iÿtiÚ_fŞd”
) . '/');

213 ià(
	$is_dœ
(
$v›w_fŞd”
))

215 
	`defše
 ('VIEWPATH', 
$v›w_fŞd”
 .'/');

216 
	}
}

219 iàĞ! 
is_dœ
(
APPPATH
.'views/'))

221 
ex™
("You¸v›w fŞd”…©h dÛ nÙ‡µ—¸tØb£ˆcÜ»ùly. PËa£ o³ÀthfŞlowšg fªd cÜ»ùhis: ".
SELF
);

224 
defše
 ('VIEWPATH', 
APPPATH
.'views/' );

228 ià(
	$is_dœ
(
$ciun™_fŞd”
))

230 
	`defše
('CIUPATH', 
$ciun™_fŞd”
 . '/');

231 
	}
}

234 iàĞ! 
is_dœ
(
APPPATH
 . 'thœd_·¹y/' . 
$ciun™_fŞd”
))

236 
ex™
("You¸CIUn™ fŞd”…©h dÛ nÙ‡µ—¸tØb£ˆcÜ»ùly. PËa£ o³ÀthfŞlowšg fªd cÜ»ùhis: ".
SELF
);

239 
defše
 ('CIUPATH', 
APPPATH
 . 'thœd_·¹y/' . 
$ciun™_fŞd”
);

244 
defše
('TESTSPATH', 
»®·th
(
$‹¡s_fŞd”
) . '/');

256 
»quœe_Úû
 
	gCIUPATH
 . 'core/CodeIgniter.php';

259 
»quœe_Úû
 ('PHPUnit/Autoload.php');

262 
»quœe_Úû
 
	gCIUPATH
. 'libraries/CIUnit.php';

265 
	g$CI
 =& 
£t_cÚŒŞËr
('CIU_CÚŒŞËr', 
CIUPATH
 . 'core/');

266 
	g$CI
->
	glßd
->
add_·ckage_·th
(
CIUPATH
);

268 
»quœe_Úû
(
CIUPATH
 . 'libraries/spyc/spyc.php');

270 
	gCIUn™
::
$¥yc
 = 
Ãw
 
Spyc
();

272 
»quœe_Úû
(
CIUPATH
 . 'libraries/Fixture.php');

274 
	g$CI
->
	gfixtu»
 = 
Ãw
 
Fixtu»
();

275 
	gCIUn™
::
$fixtu»
 =& 
$CI
->
fixtu»
;

	@application/third_party/CIUnit/config/config.php

1 <?
php


10 
	g$cÚfig
['ciu_subclass_prefix'] = 'CIU_';

	@application/third_party/CIUnit/core/CIU_Controller.php

1 <?
php


3 ià(! 
defšed
('BASEPATH')) {

4 
ex™
('No direct script‡ccess');

7 şas 
	cCIU_CÚŒŞËr
 
ex‹nds
 
	mCI_CÚŒŞËr
 {

9 
public
 
funùiÚ
 
	$šdex
()

14 
	}
}

	@application/third_party/CIUnit/core/CIU_Exceptions.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCIU_Exû±iÚs
 
ex‹nds
 
	mCI_Exû±iÚs
 {

41 
funùiÚ
 
	$log_exû±iÚ
(
$£v”™y
, 
$mes§ge
, 
$f•©h
, 
$lše
)

43 
$£v”™y
 = ( ! 
	`is£t
(
$this
->
Ëv–s
[$severity])) ? $severity : $this->levels[$severity];

45 
	`log_mes§ge
('”rÜ', 'Sev”™y: '.
$£v”™y
.' --> '.
$mes§ge
. ' '.
$f•©h
.' '.
$lše
, 
TRUE
);

57 
funùiÚ
 
	`show_404
(
$·ge
 = '', 
$log_”rÜ
 = 
TRUE
)

59 
$h—dšg
 = "404 Page Not Found";

60 
$mes§ge
 = "The…age you„equested was‚ot found.";

63 ià(
$log_”rÜ
)

65 
	`log_mes§ge
('”rÜ', '404 PagNÙ Found --> '.
$·ge
);

68 
echo
 
$this
->
	`show_”rÜ
(
$h—dšg
, 
$mes§ge
, 'error_404', 404);

69 
ex™
;

70 
	}
}

87 
funùiÚ
 
show_”rÜ
(
$h—dšg
, 
$mes§ge
, 
$‹m¶©e
 = '”rÜ_g’”®', 
$¡©us_code
 = 500)

89 
$mes§ge
 = 
im¶ode
(' ', ( ! 
is_¬¿y
($mes§ge)è? 
¬¿y
($message) : $message);

91 ià(
ob_g‘_Ëv–
(è> 
	g$this
->
	gob_Ëv–
 + 1)

93 
ob_’d_æush
();

96 
	gecho
 "[CIUnit] Error: $status_code Message: $message\n";

112 
funùiÚ
 
	$show_php_”rÜ
(
$£v”™y
, 
$mes§ge
, 
$f•©h
, 
$lše
)

114 
$£v”™y
 = ( ! 
	`is£t
(
$this
->
Ëv–s
[$severity])) ? $severity : $this->levels[$severity];

116 
$f•©h
 = 
	`¡r_»¶aû
("\\", "/", $filepath);

119 ià(
FALSE
 !=ğ
	`¡½os
(
$f•©h
, '/'))

121 
$x
 = 
	`ex¶ode
('/', 
$f•©h
);

122 
$f•©h
 = 
$x
[
	`couÁ
($x)-2].'/'.
	`’d
($x);

125 ià(
	`ob_g‘_Ëv–
(è> 
$this
->
ob_Ëv–
 + 1)

127 
	`ob_’d_æush
();

130 
echo
 "[CIUnit] PHP Error: $severity - $message File Path: $filepath (line: $line)\n";

131 
	}
}

	@application/third_party/CIUnit/core/CIU_Loader.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

16 şas 
	cCIU_Lßd”
 
ex‹nds
 
	mCI_Lßd”
 {

28 
´Ùeùed
 
funùiÚ
 
	$_ci_lßd_şass
(
$şass
, 
$·¿ms
 = 
NULL
, 
$objeù_Çme
 = NULL)

33 
$şass
 = 
	`¡r_»¶aû
('.php', '', 
	`Œim
($class, '/'));

37 
$subdœ
 = '';

38 ià((
$Ï¡_¦ash
 = 
	`¡¼pos
(
$şass
, '/')è!=ğ
FALSE
)

41 
$subdœ
 = 
	`sub¡r
(
$şass
, 0, 
$Ï¡_¦ash
 + 1);

44 
$şass
 = 
	`sub¡r
($şass, 
$Ï¡_¦ash
 + 1);

48 
	`fÜ—ch
 (
	`¬¿y
(
	`ucfœ¡
(
$şass
), 
	`¡¹Şow”
($şass)è
as
 $class)

50 
$subşass
 = 
APPPATH
.'lib¿r›s/'.
$subdœ
.
	`cÚfig_™em
('subşass_´efix').
$şass
.'.php';

51 
$ciu_subşass
 = 
CIUPATH
.'lib¿r›s/'.
$subdœ
.
	`cÚfig_™em
('ciu_subşass_´efix').
$şass
.'.php';

54 ià(
	`fe_exi¡s
(
$ciu_subşass
))

56 
$ba£şass
 = 
BASEPATH
.'lib¿r›s/'.
	`ucfœ¡
(
$şass
).'.php';

58 iàĞ! 
	`fe_exi¡s
(
$ba£şass
))

60 
	`log_mes§ge
('”rÜ', "UÇbËØlßdh»que¡ed cÏss: ".
$şass
);

61 
	`show_”rÜ
("UÇbËØlßdh»que¡ed cÏss: ".
$şass
);

65 ià(
	`š_¬¿y
(
$ciu_subşass
, 
$this
->
_ci_lßded_fes
))

70 iàĞ! 
	`is_nuÎ
(
$objeù_Çme
))

72 
$CI
 =& 
	`g‘_š¡ªû
();

73 iàĞ! 
	`is£t
(
$CI
->
$objeù_Çme
))

75  
$this
->
	`_ci_š™_şass
(
$şass
, 
	`cÚfig_™em
('ciu_subşass_´efix'), 
$·¿ms
, 
$objeù_Çme
);

79 
$is_du¶iÿ‹
 = 
TRUE
;

80 
	`log_mes§ge
('debug', 
$şass
." class‡lready†oaded. Second‡ttempt ignored.");

84 
	`šşude_Úû
(
$ba£şass
);

86 ià(
	`fe_exi¡s
(
$subşass
))

88 
	`šşude_Úû
(
$subşass
);

91 
	`šşude_Úû
(
$ciu_subşass
);

92 
$this
->
_ci_lßded_fes
[] = 
$ciu_subşass
;

94  
$this
->
	`_ci_š™_şass
(
$şass
, 
	`cÚfig_™em
('ciu_subşass_´efix'), 
$·¿ms
, 
$objeù_Çme
);

98 ià(
	`fe_exi¡s
(
$subşass
))

100 
$ba£şass
 = 
BASEPATH
.'lib¿r›s/'.
	`ucfœ¡
(
$şass
).'.php';

102 iàĞ! 
	`fe_exi¡s
(
$ba£şass
))

104 
	`log_mes§ge
('”rÜ', "UÇbËØlßdh»que¡ed cÏss: ".
$şass
);

105 
	`show_”rÜ
("UÇbËØlßdh»que¡ed cÏss: ".
$şass
);

109 ià(
	`š_¬¿y
(
$subşass
, 
$this
->
_ci_lßded_fes
))

114 iàĞ! 
	`is_nuÎ
(
$objeù_Çme
))

116 
$CI
 =& 
	`g‘_š¡ªû
();

117 iàĞ! 
	`is£t
(
$CI
->
$objeù_Çme
))

119  
$this
->
	`_ci_š™_şass
(
$şass
, 
	`cÚfig_™em
('subşass_´efix'), 
$·¿ms
, 
$objeù_Çme
);

123 
$is_du¶iÿ‹
 = 
TRUE
;

124 
	`log_mes§ge
('debug', 
$şass
." class‡lready†oaded. Second‡ttempt ignored.");

128 
	`šşude_Úû
(
$ba£şass
);

129 
	`šşude_Úû
(
$subşass
);

130 
$this
->
_ci_lßded_fes
[] = 
$subşass
;

132  
$this
->
	`_ci_š™_şass
(
$şass
, 
	`cÚfig_™em
('subşass_´efix'), 
$·¿ms
, 
$objeù_Çme
);

136 
$is_du¶iÿ‹
 = 
FALSE
;

137 
	`fÜ—ch
 (
$this
->
_ci_lib¿ry_·ths
 
as
 
$·th
)

139 
$f•©h
 = 
$·th
.'lib¿r›s/'.
$subdœ
.
$şass
.'.php';

142 iàĞ! 
	`fe_exi¡s
(
$f•©h
))

148 ià(
	`š_¬¿y
(
$f•©h
, 
$this
->
_ci_lßded_fes
))

153 iàĞ! 
	`is_nuÎ
(
$objeù_Çme
))

155 
$CI
 =& 
	`g‘_š¡ªû
();

156 iàĞ! 
	`is£t
(
$CI
->
$objeù_Çme
))

158  
$this
->
	`_ci_š™_şass
(
$şass
, '', 
$·¿ms
, 
$objeù_Çme
);

162 
$is_du¶iÿ‹
 = 
TRUE
;

163 
	`log_mes§ge
('debug', 
$şass
." class‡lready†oaded. Second‡ttempt ignored.");

167 
	`šşude_Úû
(
$f•©h
);

168 
$this
->
_ci_lßded_fes
[] = 
$f•©h
;

169  
$this
->
	`_ci_š™_şass
(
$şass
, '', 
$·¿ms
, 
$objeù_Çme
);

175 ià(
$subdœ
 == '')

177 
$·th
 = 
	`¡¹Şow”
(
$şass
).'/'.$class;

178  
$this
->
	`_ci_lßd_şass
(
$·th
, 
$·¿ms
);

183 ià(
$is_du¶iÿ‹
 =ğ
FALSE
)

185 
	`log_mes§ge
('”rÜ', "UÇbËØlßdh»que¡ed cÏss: ".
$şass
);

186 
	`show_”rÜ
("UÇbËØlßdh»que¡ed cÏss: ".
$şass
);

200 
´Ùeùed
 
funùiÚ
 
	`_ci_š™_şass
(
$şass
, 
$´efix
 = '', 
$cÚfig
 = 
FALSE
, 
$objeù_Çme
 = 
NULL
)

203 ià(
$cÚfig
 ==ğ
NULL
)

206 
$cÚfig_compÚ’t
 = 
$this
->
	`_ci_g‘_compÚ’t
('config');

208 ià(
	`is_¬¿y
(
$cÚfig_compÚ’t
->
_cÚfig_·ths
))

212 
	`fÜ—ch
 (
$cÚfig_compÚ’t
->
_cÚfig_·ths
 
as
 
$·th
)

217 ià(
	`defšed
('ENVIRONMENT'è
AND
 
	`fe_exi¡s
(
$·th
 .'cÚfig/'.
ENVIRONMENT
.'/'.
	`¡¹Şow”
(
$şass
).'.php'))

219 
	`šşude
(
$·th
 .'cÚfig/'.
ENVIRONMENT
.'/'.
	`¡¹Şow”
(
$şass
).'.php');

222 
	`–£if
 (
	`defšed
('ENVIRONMENT'è
AND
 
	`fe_exi¡s
(
$·th
 .'cÚfig/'.
ENVIRONMENT
.'/'.
	`ucfœ¡
(
	`¡¹Şow”
(
$şass
)).'.php'))

224 
	`šşude
(
$·th
 .'cÚfig/'.
ENVIRONMENT
.'/'.
	`ucfœ¡
(
	`¡¹Şow”
(
$şass
)).'.php');

227 
	`–£if
 (
	`fe_exi¡s
(
$·th
 .'cÚfig/'.
	`¡¹Şow”
(
$şass
).'.php'))

229 
	`šşude
(
$·th
 .'cÚfig/'.
	`¡¹Şow”
(
$şass
).'.php');

232 
	`–£if
 (
	`fe_exi¡s
(
$·th
 .'cÚfig/'.
	`ucfœ¡
(
	`¡¹Şow”
(
$şass
)).'.php'))

234 
	`šşude
(
$·th
 .'cÚfig/'.
	`ucfœ¡
(
	`¡¹Şow”
(
$şass
)).'.php');

241 ià(
$´efix
 == '')

243 ià(
	`şass_exi¡s
('CI_'.
$şass
))

245 
$Çme
 = 'CI_'.
$şass
;

247 
	`–£if
 (
	`şass_exi¡s
(
	`cÚfig_™em
('subşass_´efix').
$şass
))

249 
$Çme
 = 
	`cÚfig_™em
('subşass_´efix').
$şass
;

253 
$Çme
 = 
$şass
;

258 
$Çme
 = 
$´efix
.
$şass
;

262 iàĞ! 
	`şass_exi¡s
(
$Çme
))

264 
	`log_mes§ge
('”rÜ', "NÚ-exi¡’ˆşass: ".
$Çme
);

265 
	`show_”rÜ
("NÚ-exi¡’ˆşass: ".
$şass
);

270 
$şass
 = 
	`¡¹Şow”
($class);

272 ià(
	`is_nuÎ
(
$objeù_Çme
))

274 
$şassv¬
 = ( ! 
	`is£t
(
$this
->
_ci_v¬m­
[
$şass
])) ? $class : $this->_ci_varmap[$class];

278 
$şassv¬
 = 
$objeù_Çme
;

282 
$this
->
_ci_şas£s
[
$şass
] = 
$şassv¬
;

284 
$CI
 =& 
	`g‘_š¡ªû
();

285 ià(
$cÚfig
 !=ğ
NULL
)

287 iàĞ! 
	`defšed
('CIUnit_Version'))

289 
$CI
->
$şassv¬
 = 
Ãw
 
	`$Çme
(
$cÚfig
);

291 
	`–£if
 ( ! 
	`is£t
(
$CI
->
$şassv¬
))

294 
$CI
->
$şassv¬
 = 
Ãw
 
	`$Çme
(
$cÚfig
);

299 iàĞ! 
	`defšed
('CIUnit_Version'))

301 
$CI
->
$şassv¬
 = 
Ãw
 
$Çme
;

303 
	`–£if
 ( ! 
	`is£t
(
$CI
->
$şassv¬
))

306 
$CI
->
$şassv¬
 = 
Ãw
 
$Çme
;

309 
	}
}

329 
public
 
funùiÚ
 
v›w
(
$v›w
, 
$v¬s
 = 
¬¿y
(), 
$»tuº
 = 
FALSE
)

331 ià(
$»tuº
 ==ğ
TRUE
)

333  
·»Á
::
v›w
(
$v›w
, 
$v¬s
, 
$»tuº
);

336 
	g$ouut
 = 
$this
->
_ci_lßd
(
¬¿y
('_ci_v›w' => 
$v›w
, '_ci_v¬s' => $this->
_ci_objeù_to_¬¿y
(
$v¬s
), '_ci_»tuº' => 
TRUE
));

337 
	g$CI
 =& 
g‘_š¡ªû
();

338 
	g$CI
->
	gouut
->
add_ouut
(
$ouut
);

351 
public
 
funùiÚ
 
h–³r
(
$h–³rs
 = 
	$¬¿y
())

353 
	`fÜ—ch
 (
$this
->
	`_ci_´•_f’ame
(
$h–³rs
, '_h–³r'è
as
 
$h–³r
)

355 ià(
	`is£t
(
$this
->
_ci_h–³rs
[
$h–³r
]))

360 
$ciu_h–³r
 = 
CIUPATH
.'h–³rs/'.
	`cÚfig_™em
('ciu_subşass_´efix').
$h–³r
.'.php';

362 ià(
	`fe_exi¡s
(
$ciu_h–³r
))

364 
	`šşude_Úû
(
$ciu_h–³r
);

367 
$ext_h–³r
 = 
APPPATH
.'h–³rs/'.
	`cÚfig_™em
('subşass_´efix').
$h–³r
.'.php';

370 ià(
	`fe_exi¡s
(
$ext_h–³r
))

372 
$ba£_h–³r
 = 
BASEPATH
.'h–³rs/'.
$h–³r
.'.php';

374 iàĞ! 
	`fe_exi¡s
(
$ba£_h–³r
))

376 
	`show_”rÜ
('UÇbËØlßdh»que¡ed fe: h–³rs/'.
$h–³r
.'.php');

379 
	`šşude_Úû
(
$ext_h–³r
);

380 
	`šşude_Úû
(
$ba£_h–³r
);

382 
$this
->
_ci_h–³rs
[
$h–³r
] = 
TRUE
;

383 
	`log_mes§ge
('debug', 'H–³¸lßded: '.
$h–³r
);

388 
	`fÜ—ch
 (
$this
->
_ci_h–³r_·ths
 
as
 
$·th
)

390 ià(
	`fe_exi¡s
(
$·th
.'h–³rs/'.
$h–³r
.'.php'))

392 
	`šşude_Úû
(
$·th
.'h–³rs/'.
$h–³r
.'.php');

394 
$this
->
_ci_h–³rs
[
$h–³r
] = 
TRUE
;

395 
	`log_mes§ge
('debug', 'H–³¸lßded: '.
$h–³r
);

401 iàĞ! 
	`is£t
(
$this
->
_ci_h–³rs
[
$h–³r
]))

403 
	`show_”rÜ
('UÇbËØlßdh»que¡ed fe: h–³rs/'.
$h–³r
.'.php');

406 
	}
}

415 
funùiÚ
 
v›wfe
(
$v›wfe
, 
$v¬s
 = 
¬¿y
(), 
$»tuº
 = 
FALSE
)

417  
$this
->
_ci_lßd
(

418 
¬¿y
('_ci_·th' => 
$v›wfe
,

419 '_ci_v¬s' => 
$this
->
_ci_objeù_to_¬¿y
(
$v¬s
),

420 '_ci_»tuº' => 
$»tuº
)

426 
funùiÚ
 
	$»£t
()

428 
$this
->
_ci_ÿched_v¬s
 = 
	`¬¿y
();

429 
$this
->
_ci_şas£s
 = 
	`¬¿y
();

430 
$this
->
_ci_lßded_fes
 = 
	`¬¿y
();

431 
$this
->
_ci_mod–s
 = 
	`¬¿y
();

432 
$this
->
_ci_h–³rs
 = 
	`¬¿y
();

433 
	}
}

	@application/third_party/CIUnit/core/CIU_Output.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

16 şas 
	cCIU_Ouut
 
ex‹nds
 
	mCI_Ouut
 {

18 
funùiÚ
 
	$__cÚ¡ruù
()

20 
·»Á
::
	`__cÚ¡ruù
();

21 
$this
->
fš®_ouut
 = '';

22 
$this
->
_ci_ob_Ëv–
 = 
	`ob_g‘_Ëv–
();

23 
$this
->
cook›s
 = 
	`¬¿y
();

29 
funùiÚ
 
	$£t_cook›
(
$¬r
)

31 iàĞ! 
	`is_¬¿y
(
$¬r
))

33 
$¬r
 = 
	`func_g‘_¬gs
();

35 
$this
->
cook›s
[] = 
$¬r
;

36 
	}
}

41 
funùiÚ
 
	$add_ouut
(
$¡r
)

43 
$this
->
fš®_ouut
 .ğ
$¡r
;

44 
	}
}

52 
funùiÚ
 
	$pİ_ouut
()

54 
$ouut
 = 
$this
->
fš®_ouut
;

55 
$this
->
fš®_ouut
 = "";

56  
$ouut
;

57 
	}
}

64 
funùiÚ
 
	$£t_no_ÿche_h—d”s
()

67 
$CI
 =& 
	`g‘_š¡ªû
();

68 
$CI
->
ouut
->
	`soá_£t_h—d”
('Content-type:ext/html; charset=utf-8');

69 
$CI
->
ouut
->
	`soá_£t_h—d”
('Cache-Control:‚o-cache');

70 
	`log_mes§ge
('debug', 'no cache headers set in output class');

71 
	}
}

78 
funùiÚ
 
	$soá_£t_h—d”
(
$h—d”
)

80 
$key
 = 
	`¡¹Şow”
(
	`¬¿y_shiá
(
	`¥l™
(':', 
$h—d”
)));

81 
$add
 = 
Œue
;

82 
	`fÜ—ch
(
$this
->
h—d”s
 
as
 
$hdr
)

84 
$h
 = 
	`¥l™
(':', 
$hdr
);

85 if(
	`¡¹Şow”
(
	`¬¿y_shiá
(
$h
)è=ğ
$key
)

87 
$add
 = 
çl£
;

90 
$add
 ? (
$this
->
h—d”s
[] = 
$h—d”
) : '';

91 
	}
}

96 
funùiÚ
 
	$g‘_h—d”s
()

98  
$this
->
h—d”s
;

99 
	}
}

106 
funùiÚ
 
	$§y
(
$¡r
)

108 
	`ob_¡¬t
();

109 
echo
 
$¡r
;

110 
$this
->
	`ob_æush_ş—n
();

111 
	}
}

117 
funùiÚ
 
	$ob_æush_ş—n
()

119 
$CI
 =& 
	`g‘_š¡ªû
();

120 ià(
	`ob_g‘_Ëv–
(è> 
$this
->
_ci_ob_Ëv–
 + 1)

122 
	`ob_’d_æush
();

126 
$this
->
	`add_ouut
(
	`ob_g‘_cÚ‹Ás
());

127 @
	`ob_’d_ş—n
();

129 
	}
}

145 
funùiÚ
 
_di¥Ïy
(
$ouut
 = '')

150 
glob®
 
$BM
, 
$CFG
;

153 ià(
şass_exi¡s
('CI_Controller'))

155 
	g$CI
 =& 
g‘_š¡ªû
();

161 ià(
	g$ouut
 == '')

163 
$ouut
 =& 
$this
->
fš®_ouut
;

171 ià(
	g$this
->
	gÿche_expœ©iÚ
 > 0 && 
is£t
(
$CI
è&& ! 
m‘hod_exi¡s
($CI, '_output'))

173 
	g$this
->
_wr™e_ÿche
(
$ouut
);

181 
	g$–­£d
 = 
$BM
->
–­£d_time
('total_execution_time_start', 'total_execution_time_end');

183 ià(
	g$this
->
	g·r£_exec_v¬s
 ==ğ
TRUE
)

185 
$memÜy
 = ( ! 
funùiÚ_exi¡s
('memÜy_g‘_u§ge')è? '0' : 
round
(
memÜy_g‘_u§ge
()/1024/1024, 2).'MB';

187 
	g$ouut
 = 
¡r_»¶aû
('{–­£d_time}', 
$–­£d
, 
$ouut
);

188 
	g$ouut
 = 
¡r_»¶aû
('{memÜy_u§ge}', 
$memÜy
, 
$ouut
);

194 ià(
	g$CFG
->
™em
('com´ess_ouut'è==ğ
TRUE
 && 
$this
->
_zlib_oc
 =ğ
FALSE
)

196 ià(
ex‹nsiÚ_lßded
('zlib'))

198 ià(
is£t
(
$_SERVER
['HTTP_ACCEPT_ENCODING']è
AND
 
¡½os
($_SERVER['HTTP_ACCEPT_ENCODING'], 'gz'è!=ğ
FALSE
)

200 
ob_¡¬t
('ob_gzhandler');

208 ià(
couÁ
(
$this
->
h—d”s
) > 0)

210 
fÜ—ch
 (
$this
->
h—d”s
 
as
 
$h—d”
)

212 @
h—d”
(
$h—d”
[0], $header[1]);

213 
log_mes§ge
('debug', "header '$header[0], $header[1]' set.");

220 ià(
couÁ
(
$this
->
cook›s
) > 0)

222 
fÜ—ch
 (
$this
->
cook›s
 
as
 
$cook›
)

224 
ÿÎ_u£r_func_¬¿y
 ( '£tcook›' , 
$cook›
 );

225 
log_mes§ge
('debug', "cook› '".
još
(', ', 
$cook›
)."' set.");

234 iàĞ! 
is£t
(
$CI
))

236 
echo
 
	g$ouut
;

237 
log_mes§ge
('debug', "Final output sento browser");

238 
log_mes§ge
('debug', "TÙ®ƒxecutiÚime: ".
$–­£d
);

239  
	gTRUE
;

246 ià(
	g$this
->
	g’abË_´of”
 =ğ
TRUE
)

248 
$CI
->
lßd
->
lib¿ry
('profiler');

250 iàĞ! 
em±y
(
$this
->
_´of”_£ùiÚs
))

252 
	g$CI
->
	g´of”
->
£t_£ùiÚs
(
$this
->
_´of”_£ùiÚs
);

257 ià(
´eg_m©ch
("|</body>.*?</html>|is", 
$ouut
))

259 
	g$ouut
 = 
´eg_»¶aû
("|</body>.*?</html>|is", '', 
$ouut
);

260 
	g$ouut
 .ğ
$CI
->
´of”
->
run
();

261 
	g$ouut
 .= '</body></html>';

265 
	g$ouut
 .ğ
$CI
->
´of”
->
run
();

273 ià(
m‘hod_exi¡s
(
$CI
, '_output'))

275 
	g$CI
->
_ouut
(
$ouut
);

279 
echo
 
	g$ouut
;

282 
log_mes§ge
('debug', "Final output sento browser");

283 
log_mes§ge
('debug', "TÙ®ƒxecutiÚime: ".
$–­£d
);

	@application/third_party/CIUnit/core/CodeIgniter.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

36 
defše
('CI_VERSION', '2.1.0');

44 
defše
('CI_CORE', 
FALSE
);

51 
»quœe
(
CIUPATH
.'core/Common.php');

52 
»quœe
(
BASEPATH
.'core/Common.php');

59 ià(
defšed
('ENVIRONMENT'è
AND
 
fe_exi¡s
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/constants.php'))

61 
»quœe
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/constants.php');

65 
»quœe
(
APPPATH
.'config/constants.php');

73 
£t_”rÜ_hªdËr
('_exception_handler');

75 iàĞ! 
is_php
('5.3'))

77 @
£t_magic_quÙes_ruÁime
(0);

96 ià(
is£t
(
$assign_to_cÚfig
['subşass_´efix']è
AND
 
	g$assign_to_cÚfig
['subclass_prefix'] != '')

98 
g‘_cÚfig
(
¬¿y
('subşass_´efix' => 
$assign_to_cÚfig
['subclass_prefix']));

106 ià(
funùiÚ_exi¡s
("£t_time_lim™"è=ğ
TRUE
 
AND
 @
ši_g‘
("safe_mode") == 0)

108 @
£t_time_lim™
(300);

116 
	g$BM
 =& 
lßd_şass
('Benchmark', 'core');

117 
	g$GLOBALS
['BM'] =& 
$BM
;

119 
	g$BM
->
m¬k
('total_execution_time_start');

120 
	g$BM
->
m¬k
('loading_time:_base_classes_start');

127 
	g$EXT
 =& 
lßd_şass
('Hooks', 'core');

128 
	g$GLOBALS
['EXT'] =& 
$EXT
;

135 
	g$EXT
->
_ÿÎ_hook
('pre_system');

142 
	g$CFG
 =& 
lßd_şass
('Config', 'core');

143 
	g$GLOBALS
['CFG'] =& 
$CFG
;

146 ià(
	$is£t
(
$assign_to_cÚfig
))

148 
$CFG
->
	`_assign_to_cÚfig
(
$assign_to_cÚfig
);

149 
	}
}

163 
	g$UNI
 =& 
lßd_şass
('Utf8', 'core');

164 
	g$GLOBALS
['UNI'] =& 
$UNI
;

171 
	g$URI
 =& 
lßd_şass
('URI', 'core');

172 
	g$GLOBALS
['URI'] =& 
$URI
;

179 
	g$RTR
 =& 
lßd_şass
('Router', 'core');

180 
	g$GLOBALS
['RTR'] =& 
$RTR
;

184 ià(
	$is£t
(
$routšg
))

186 
$RTR
->
	`_£t_ov”rides
(
$routšg
);

187 
	}
}

194 
	g$OUT
 =& 
lßd_şass
('Output', 'core');

195 
	g$GLOBALS
['OUT'] =& 
$OUT
;

218 
	g$SEC
 =& 
lßd_şass
('Security', 'core');

219 
	g$GLOBALS
['SEC'] =& 
$SEC
;

226 
	g$IN
 =& 
lßd_şass
('Input', 'core');

227 
	g$GLOBALS
['IN'] =& 
$IN
;

234 
	g$LANG
 =& 
lßd_şass
('Lang', 'core');

243 
»quœe
 
	gBASEPATH
.'core/Controller.php';

245 
	gfunùiÚ
 &
	$g‘_š¡ªû
()

247  
CI_CÚŒŞËr
::
	`g‘_š¡ªû
();

248 
	}
}

251 ià(
fe_exi¡s
(
APPPATH
.'cÜe/'.
$CFG
->
cÚfig
['subclass_prefix'].'Controller.php'))

253 
»quœe
 
	gAPPPATH
.'cÜe/'.
	g$CFG
->
	gcÚfig
['subclass_prefix'].'Controller.php';

256 ià(
defšed
('CIUn™_V”siÚ'è==ğ
FALSE
)

261 iàĞ! 
fe_exi¡s
(
APPPATH
.'cÚŒŞËrs/'.
$RTR
->
ãtch_dœeùÜy
().$RTR->
ãtch_şass
().'.php'))

263 
show_”rÜ
('Unableo†oad your default controller. Please make surehe controller specified in your Routes.php file is valid.');

266 
šşude
(
APPPATH
.'cÚŒŞËrs/'.
$RTR
->
ãtch_dœeùÜy
().$RTR->
ãtch_şass
().'.php');

269 
	g$BM
->
m¬k
('loading_time:_base_classes_end');

280 
	g$şass
 = 
$RTR
->
ãtch_şass
();

281 
	g$m‘hod
 = 
$RTR
->
ãtch_m‘hod
();

283 iàĞ! 
şass_exi¡s
(
$şass
)

284 
OR
 
¡ºcmp
(
$m‘hod
, '_', 1) == 0

285 
OR
 
š_¬¿y
(
¡¹Şow”
(
$m‘hod
), 
¬¿y_m­
('¡¹Şow”', 
g‘_şass_m‘hods
('CI_Controller')))

288 iàĞ! 
em±y
(
$RTR
->
rou‹s
['404_override']))

290 
	g$x
 = 
ex¶ode
('/', 
$RTR
->
rou‹s
['404_override']);

291 
	g$şass
 = 
$x
[0];

292 
	g$m‘hod
 = (
is£t
(
$x
[1]) ? $x[1] : 'index');

293 iàĞ! 
şass_exi¡s
(
$şass
))

295 iàĞ! 
fe_exi¡s
(
APPPATH
.'cÚŒŞËrs/'.
$şass
.'.php'))

297 
show_404
("{$class}/{$method}");

300 
šşude_Úû
(
APPPATH
.'cÚŒŞËrs/'.
$şass
.'.php');

305 
show_404
("{$class}/{$method}");

314 
	g$EXT
->
_ÿÎ_hook
('pre_controller');

322 
	g$BM
->
m¬k
('cÚŒŞËr_executiÚ_time_Ğ'.
$şass
.' / '.
$m‘hod
.' )_start');

324 
	g$CI
 = 
Ãw
 
$şass
();

331 
	g$EXT
->
_ÿÎ_hook
('post_controller_constructor');

339 ià(
m‘hod_exi¡s
(
$CI
, '_remap'))

341 
	g$CI
->
_»m­
(
$m‘hod
, 
¬¿y_¦iû
(
$URI
->
r£gm’ts
, 2));

347 iàĞ! 
š_¬¿y
(
¡¹Şow”
(
$m‘hod
), 
¬¿y_m­
('¡¹Şow”', 
g‘_şass_m‘hods
(
$CI
))))

350 iàĞ! 
em±y
(
$RTR
->
rou‹s
['404_override']))

352 
	g$x
 = 
ex¶ode
('/', 
$RTR
->
rou‹s
['404_override']);

353 
	g$şass
 = 
$x
[0];

354 
	g$m‘hod
 = (
is£t
(
$x
[1]) ? $x[1] : 'index');

355 iàĞ! 
şass_exi¡s
(
$şass
))

357 iàĞ! 
fe_exi¡s
(
APPPATH
.'cÚŒŞËrs/'.
$şass
.'.php'))

359 
show_404
("{$class}/{$method}");

362 
šşude_Úû
(
APPPATH
.'cÚŒŞËrs/'.
$şass
.'.php');

363 
un£t
(
$CI
);

364 
	g$CI
 = 
Ãw
 
$şass
();

369 
show_404
("{$class}/{$method}");

375 
ÿÎ_u£r_func_¬¿y
(
¬¿y
(&
$CI
, 
$m‘hod
), 
¬¿y_¦iû
(
$URI
->
r£gm’ts
, 2));

380 
	g$BM
->
m¬k
('cÚŒŞËr_executiÚ_time_Ğ'.
$şass
.' / '.
$m‘hod
.' )_end');

387 
	g$EXT
->
_ÿÎ_hook
('post_controller');

394 ià(
	g$EXT
->
_ÿÎ_hook
('di¥Ïy_ov”ride'è==ğ
FALSE
)

396 
$OUT
->
_di¥Ïy
();

404 
	g$EXT
->
_ÿÎ_hook
('post_system');

411 ià(
şass_exi¡s
('CI_DB'è
AND
 
is£t
(
$CI
->
db
))

413 
	g$CI
->
	gdb
->
şo£
();

	@application/third_party/CIUnit/core/Common.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

51 iàĞ! 
funùiÚ_exi¡s
('load_class'))

53 
	gfunùiÚ
 &
lßd_şass
(
$şass
, 
$dœeùÜy
 = 'lib¿r›s', 
$´efix
 = 'CI_')

55 
$_şas£s
 = 
¬¿y
();

58 ià(
is£t
(
$_şas£s
[
$şass
]))

60  
	g$_şas£s
[
$şass
];

63 
	g$Çme
 = 
FALSE
;

68 
fÜ—ch
 (
¬¿y
(
BASEPATH
, 
APPPATH
, 
CIUPATH
è
as
 
$·th
)

70 ià(
fe_exi¡s
(
$·th
.
$dœeùÜy
.'/'.
$şass
.'.php'))

72 
	g$Çme
 = 
$´efix
.
$şass
;

74 ià(
şass_exi¡s
(
$Çme
è==ğ
FALSE
)

76 
»quœe
(
$·th
.
$dœeùÜy
.'/'.
$şass
.'.php');

84 ià(
fe_exi¡s
(
APPPATH
.
$dœeùÜy
.'/'.
cÚfig_™em
('subşass_´efix').
$şass
.'.php'))

86 
	g$Çme
 = 
cÚfig_™em
('subşass_´efix').
$şass
;

88 ià(
şass_exi¡s
(
$Çme
è==ğ
FALSE
)

90 
»quœe
(
APPPATH
.
$dœeùÜy
.'/'.
cÚfig_™em
('subşass_´efix').
$şass
.'.php');

95 ià(
fe_exi¡s
(
CIUPATH
.'/cÜe/'.
cÚfig_™em
('ciu_subşass_´efix').
$şass
.'.php'))

97 
	g$Çme
 = 
cÚfig_™em
('ciu_subşass_´efix').
$şass
;

99 ià(
şass_exi¡s
(
$Çme
è==ğ
FALSE
)

101 
»quœe
(
CIUPATH
.'/cÜe/'.
cÚfig_™em
('ciu_subşass_´efix').
$şass
.'.php');

106 ià(
	g$Çme
 ==ğ
FALSE
)

110 
ex™
('UÇbËØloÿ‹h¥ecif›d cÏss: '.
$şass
.'.php');

114 
is_lßded
(
$şass
);

116 
	g$_şas£s
[
$şass
] = 
Ãw
 
$Çme
();

117  
	g$_şas£s
[
$şass
];

132 iàĞ! 
funùiÚ_exi¡s
('get_config'))

134 
	gfunùiÚ
 &
g‘_cÚfig
(
$»¶aû
 = 
¬¿y
())

136 
$_cÚfig
;

138 ià(
is£t
(
$_cÚfig
))

140  
	g$_cÚfig
[0];

144 iàĞ! 
defšed
('ENVIRONMENT'è
	gOR
 ! 
fe_exi¡s
(
$fe_·th
 = 
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/config.php'))

146 
$fe_·th
 = 
APPPATH
.'config/config.php';

150 iàĞ! 
fe_exi¡s
(
$fe_·th
))

152 
ex™
('The configuration file does‚otƒxist.');

155 
»quœe
(
$fe_·th
);

158 iàĞ! 
fe_exi¡s
(
CIUPATH
 .'config/config.php'))

160 
ex™
('The configuration file does‚otƒxist.');

163 
»quœe
(
CIUPATH
.'config/config.php');

166 iàĞ! 
is£t
(
$cÚfig
è
	gOR
 ! 
is_¬¿y
($config))

168 
ex™
('Your config file does‚ot‡ppearo be formatted correctly.');

172 ià(
couÁ
(
$»¶aû
) > 0)

174 
fÜ—ch
 (
$»¶aû
 
as
 
$key
 => 
$v®
)

176 ià(
is£t
(
$cÚfig
[
$key
]))

178 
$cÚfig
[
$key
] = 
$v®
;

183  
	g$_cÚfig
[0] =& 
$cÚfig
;

	@application/third_party/CIUnit/helpers/CIU_url_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

42 iàĞ! 
funùiÚ_exi¡s
('redirect'))

44 
funùiÚ
 
»dœeù
(
$uri
 = '', 
$m‘hod
 = 'loÿtiÚ', 
$h‰p_»¥Ú£_code
 = 302)

46 iàĞ! 
´eg_m©ch
('#^h‰ps?://#i', 
$uri
))

48 
$uri
 = 
s™e_u¾
($uri);

51 
	g$m‘hod
)

53 '»äesh' : 
$GLOBALS
['OUT']->
£t_h—d”
("Reäesh:0;u¾=".
$uri
);

55  : 
$GLOBALS
['OUT']->
£t_h—d”
("LoÿtiÚ: ".
$uri
, 
TRUE
, 
$h‰p_»¥Ú£_code
);

	@application/third_party/CIUnit/libraries/CIU_Session.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

9 şas 
	cCIU_SessiÚ
 
ex‹nds
 
	mCI_SessiÚ
 {

17 
funùiÚ
 
	$£ss_de¡roy
()

20 ià(
$this
->
£ss_u£_d©aba£
 ==ğ
TRUE
 
AND
 
	`is£t
($this->
u£rd©a
['session_id']))

22 
$this
->
CI
->
db
->
	`wh”e
('£ssiÚ_id', $this->
u£rd©a
['session_id']);

23 
$this
->
CI
->
db
->
	`d–‘e
($this->
£ss_bË_Çme
);

27 
$¬¿y
 = 
	`¬¿y
(

28 
$this
->
£ss_cook›_Çme
,

29 
	`add¦ashes
(
	`£rŸlize
(
	`¬¿y
())),

30 (
$this
->
now
 - 31500000),

31 
$this
->
cook›_·th
,

32 
$this
->
cook›_domaš
,

35 
$this
->
CI
->
ouut
->
	`£t_cook›
(
$¬¿y
);

46 
funùiÚ
 
	$_£t_cook›
(
$cook›_d©a
 = 
NULL
)

48 ià(
	`is_nuÎ
(
$cook›_d©a
))

50 
$cook›_d©a
 = 
$this
->
u£rd©a
;

54 
$cook›_d©a
 = 
$this
->
	`_£rŸlize
($cookie_data);

56 ià(
$this
->
£ss_’üy±_cook›
 =ğ
TRUE
)

58 
$cook›_d©a
 = 
$this
->
CI
->
’üy±
->
	`’code
($cookie_data);

63 
$cook›_d©a
 = $cook›_d©a.
	`md5
($cook›_d©a.
$this
->
’üy±iÚ_key
);

66 
$expœe
 = (
$this
->
£ss_expœe_Ú_şo£
 ==ğ
TRUE
è? 0 : $this->
£ss_expœ©iÚ
 + 
	`time
();

69 
$¬¿y
 = 
	`¬¿y
(

70 
$this
->
£ss_cook›_Çme
,

71 
$cook›_d©a
,

72 
$expœe
,

73 
$this
->
cook›_·th
,

74 
$this
->
cook›_domaš
,

75 
$this
->
cook›_£cu»


77 
$this
->
CI
->
ouut
->
	`£t_cook›
(
$¬¿y
);

78 
	}
}

	@application/third_party/CIUnit/libraries/CIUnit.php

1 <?
php


11 
»quœe_Úû
 
	gCIUPATH
 . 'libraries/CIUnitTestCase.php';

34 şas 
	cCIUn™
 {

36 
´iv©e
 
	m$š¡ªû
;

38 
public
 
	m$cÚŒŞËr
;

39 
public
 
	m$cu¼’t
;

40 
public
 
	m$cÚŒŞËrs
 = 
¬¿y
();

42 
public
 
	m$¥yc
;

43 
public
 
	m$fixtu»
;

49 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

51 
£lf
::
$š¡ªû
 =& 
$this
;

54 
public
 
funùiÚ
 &
	$g‘_CIU
()

56  
£lf
::
$š¡ªû
;

57 
	}
}

59 
public
 
	gfunùiÚ
 &
£t_cÚŒŞËr
(
$cÚŒŞËr
 = 'CI_CÚŒŞËr', 
$·th
 = 
FALSE
)

61 
$cÚŒŞËr_Çme
 = 
¬¿y_pİ
(
ex¶ode
('/', 
$cÚŒŞËr
));

64 ià(
	g$cÚŒŞËr_Çme
 =ğ
£lf
::
$cu¼’t
)

68 
ouut
();

69 
v›wv¬s
();

70  
	g£lf
::
$cÚŒŞËr
;

74 
	g$lßd”
 =& 
lßd_şass
('Loader', 'core');

77 
	g$lßd”
->
»£t
();

113 ià(
is£t
(
£lf
::
$cÚŒŞËr
->
ouut
))

115 
ouut
();

116 
v›wv¬s
();

120 ià(
is£t
(
£lf
::
$cÚŒŞËrs
[
$cÚŒŞËr_Çme
]))

124 
$Şd
 =& 
£lf
::
$cÚŒŞËrs
[
$cÚŒŞËr_Çme
];

125 
	g£lf
::
$cÚŒŞËr
 =& 
$Şd
['address'];

126 
	g£lf
::
$cu¼’t
 = 
$cÚŒŞËr_Çme
;

135 iàĞ! 
şass_exi¡s
(
$cÚŒŞËr_Çme
))

137 ià(
	g$·th
 && 
fe_exi¡s
(
$·th
 . 
$cÚŒŞËr
 . 
EXT
))

139 
šşude_Úû
(
$·th
 . 
$cÚŒŞËr
 . 
EXT
);

143 
šşude_Úû
(
APPPATH
 . 'cÚŒŞËrs/' . 
$cÚŒŞËr
 . 
EXT
);

147 
	g£lf
::
$cu¼’t
 = 
$cÚŒŞËr_Çme
;

148 
	g£lf
::
$cÚŒŞËrs
[
$cÚŒŞËr_Çme
] = 
¬¿y
(

149 'add»ss' => 
Ãw
 
$cÚŒŞËr_Çme
(),

150 'mod–s' => 
¬¿y
()

152 
	g£lf
::
$cÚŒŞËr
 =& 
£lf
::
$cÚŒŞËrs
[
$cÚŒŞËr_Çme
]['address'];

161  
	g£lf
::
$cÚŒŞËr
;

165 
public
 
	gfunùiÚ
 &
	$g‘_cÚŒŞËr
()

167  
£lf
::
$cÚŒŞËr
;

168 
	}
}

174 
public
 
funùiÚ
 
fes
(
$·‰”n
, 
$·th
 = ".", 
$add·th
 = 
FALSE
)

177 
$·th
 = 
¡r_»¶aû
("\\", "/", $path);

179 ià(
sub¡r
(
$·th
, -1) !== "/")

181 
$·th
 .= "/";

184 
	g$dœ_hªdË
 = @
İ’dœ
(
$·th
è
Ü
 
d›
("Unableo open $path");

185 
	g$ou¼
 = 
¬¿y
();

187  
	gçl£
 !ğ(
$fe
 = 
»addœ
(
$dœ_hªdË
)) )

189 ià(
´eg_m©ch
(
$·‰”n
, 
$fe
))

191 ià(
$add·th
)

193 
$fe
 = 
$·th
 . $file;

195 
	g$ou¼
[] = 
$fe
;

199 
şo£dœ
(
$dœ_hªdË
);

200  
	g$ou¼
;

210 
	gfunùiÚ
 &
	$g‘_CIU
()

212  
CIUn™
::
	`g‘_CIU
();

213 
	}
}

218 
	gfunùiÚ
 &
£t_cÚŒŞËr
(
$cÚŒŞËr
 = 'CI_CÚŒŞËr', 
$·th
 = 
FALSE
)

220  
CIUn™
::
£t_cÚŒŞËr
(
$cÚŒŞËr
, 
$·th
);

226 
	gfunùiÚ
 &
	$g‘_cÚŒŞËr
()

228  
CIUn™
::
	`g‘_cÚŒŞËr
();

229 
	}
}

235 
funùiÚ
 
	$ouut
()

237  
CIUn™
::
$cÚŒŞËr
->
ouut
->
	`pİ_ouut
();

238 
	}
}

244 
funùiÚ
 
	$v›wv¬s
()

246 ifĞ
	`is£t
(
CIUn™
::
$cÚŒŞËr
->
lßd
->
_ci_ÿched_v¬s
) )

248 
$out
 = 
CIUn™
::
$cÚŒŞËr
->
lßd
->
_ci_ÿched_v¬s
;

249 
CIUn™
::
$cÚŒŞËr
->
lßd
->
_ci_ÿched_v¬s
 = 
	`¬¿y
();

250  
$out
;

252  
	`¬¿y
();

253 
	}
}

	@application/third_party/CIUnit/libraries/CIUnitTestCase.php

1 <?
php


14 şas 
	cCIUn™_Te¡Ca£
 
ex‹nds
 
	mPHPUn™_F¿mewÜk_Te¡Ca£


41 
´Ùeùed
 
	m$bËs
 = 
¬¿y
();

50 
public
 
	m$CI
;

61 
public
 
funùiÚ
 
__cÚ¡ruù
(
$Çme
 = 
NULL
, 
¬¿y
 
$d©a
 =‡¼ay(), 
$d©aName
 = '')

63 
·»Á
::
__cÚ¡ruù
(
$Çme
, 
$d©a
, 
$d©aName
);

64 
	m$this
->
	mCI
 =& 
g‘_š¡ªû
();

66 
log_mes§ge
('debug', 
g‘_şass
(
$this
).' CIUnit_TestCase initialized');

78 
´Ùeùed
 
funùiÚ
 
	$£tUp
()

81 iàĞ! 
	`em±y
(
$this
->
bËs
))

83 
$this
->
	`dbfixt
($this->
bËs
);

85 
	}
}

96 
´Ùeùed
 
funùiÚ
 
	$‹¬Down
()

99 iàĞ! 
	`em±y
(
$this
->
bËs
))

101 
$this
->
	`dbfixt_uÆßd
($this->
bËs
);

103 
	}
}

114 
´Ùeùed
 
funùiÚ
 
	$dbfixt
(
$bË_fixtu»s
)

116 ià(
	`is_¬¿y
(
$bË_fixtu»s
))

118 
$this
->
	`lßd_fixt
(
$bË_fixtu»s
);

122 
$bË_fixtu»s
 = 
	`func_g‘_¬gs
();

123 
$this
->
	`lßd_fixt
(
$bË_fixtu»s
);

133 
	`fÜ—ch
(
$bË_fixtu»s
 
as
 
$bË
 => 
$fixt
 )

135 
$fixt_Çme
 = 
$fixt
 . '_fixt';

136 
$bË
 = 
	`is_št
($bËè? 
$fixt
 : $table;

138 ià(!
	`em±y
(
$this
->
$fixt_Çme
))

140 
CIUn™
::
$fixtu»
->
	`lßd
(
$bË
, 
$this
->
$fixt_Çme
);

144 
	`d›
("The fixture {$fixt_name} failedo†oad…roperly\n");

149 
	`log_mes§ge
('debug', 'TabË fixtu» "' . 
	`još
('", "', 
$bË_fixtu»s
) . '"†oaded');

150 
	}
}

172 
´Ùeùed
 
funùiÚ
 
	$dbfixt_uÆßd
(
¬¿y
 
$bË_fixtu»s
, 
$»v”£
 = 
Œue
)

176 ià(
$»v”£
)

181 
$bË_fixtu»s
 = 
	`¬¿y_»v”£
($bË_fixtu»s, 
Œue
);

185 
	`fÜ—ch
 (
$bË_fixtu»s
 
as
 
$bË
 => 
$fixtu»
)

187 
CIUn™
::
$fixtu»
->
	`uÆßd
(
$bË
);

188 
	`log_mes§ge
('debug', 'TabË fixtu» "' . 
$fixtu»
 . '" unloaded');

190 
	}
}

195 
funùiÚ
 
	$fixt
()

197 
$fixts
 = 
	`func_g‘_¬gs
();

198 
$this
->
	`lßd_fixt
(
$fixts
);

199 
	}
}

204 
´Ùeùed
 
funùiÚ
 
	$lßd_fixt
(
$fixts
)

206 
	`fÜ—ch
 ( 
$fixts
 
as
 
$fixt
 )

208 
$fixt_Çme
 = 
$fixt
 . '_fixt';

210 ià(
	`fe_exi¡s
(
TESTSPATH
 . 'fixtu»s/' . 
$fixt
 . '_fixt.yml')) {

211 
$this
->
$fixt_Çme
 = 
CIUn™
::
$¥yc
->
	`lßdFe
(
TESTSPATH
 . 'fixtu»s/' . 
$fixt
 . '_fixt.yml');

215 
	`d›
('Thf'. 
TESTSPATH
 . 'fixtu»s/' . 
$fixt
 . '_fixt.yml doesn\'tƒxist.');

218 
	}
}

	@application/third_party/CIUnit/libraries/Fixture.php

1 <?
php


14 şas 
	cFixtu»
 {

16 
funùiÚ
 
	$__cÚ¡ruù
()

19 iàĞ! 
	`defšed
('CIUnit_Version') )

21 
	`ex™
('can\'t†oad fixture†ibrary class when‚ot inest mode!');

28 
funùiÚ
 
	$lßd
(
$bË
, 
$fixt
)

30 
$this
->
	`_assign_db
();

34 
$this
->
CI
->
db
->
	`sim¶e_qu”y
('Œunÿ‹abË ' . 
$bË
 . ';');

36 
	`fÜ—ch
 ( 
$fixt
 
as
 
$id
 => 
$row
 )

38 
	`fÜ—ch
 (
$row
 
as
 
$key
=>
$v®
)

40 ià(
$v®
 !== '')

42 
$row
["`$key`"] = 
$v®
;

45 
	`un£t
(
$row
[
$key
]);

48 
$this
->
CI
->
db
->
	`š£¹
(
$bË
, 
$row
);

51 
$nbr_of_rows
 = (
$fixt
);

52 
	`log_mes§ge
('debug',

54 
	}
}

56 
public
 
funùiÚ
 
	$uÆßd
(
$bË
)

58 
$this
->
	`_assign_db
();

60 
$Q
 = 
$this
->
CI
->
db
->
	`sim¶e_qu”y
('Œunÿ‹abË ' . 
$bË
 . ';');

62 ià(!
$Q
) {

63 
echo
 
$this
->
CI
->
db
->
	`ÿÎ_funùiÚ
('”rÜ', $this->CI->db->
cÚn_id
);

64 
echo
 "\n";

65 
echo
 "FaedØŒunÿ‹hbË ".
$bË
."\n\n";

67 
	}
}

70 
´iv©e
 
funùiÚ
 
	$_assign_db
()

72 iàĞ! 
	`is£t
(
$this
->
CI
->
db
è
OR


73 ! 
	`is£t
(
$this
->
CI
->
db
->
d©aba£
) )

75 
$this
->
CI
 =& 
	`g‘_š¡ªû
();

76 
$this
->
CI
->
lßd
->
	`d©aba£
();

80 
$Ën
 = 
	`¡¾’
(
$this
->
CI
->
db
->
d©aba£
);

82 iàĞ
	`sub¡r
(
$this
->
CI
->
db
->
d©aba£
, 
$Ën
-5, $len) != '_test' )

84 
	`d›
("\nSorry,he‚ame of yourest database mustƒnd on '_test'.\n".

87 
	}
}

	@application/third_party/CIUnit/libraries/Unit_test.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_Un™_‹¡
 {

31 
v¬
 
	m$aùive
 = 
TRUE
;

32 
v¬
 
	m$»suÉs
 = 
¬¿y
();

33 
v¬
 
	m$¡riù
 = 
FALSE
;

34 
v¬
 
	m$_‹m¶©e
 = 
NULL
;

35 
v¬
 
	m$_‹m¶©e_rows
 = 
NULL
;

36 
v¬
 
	m$_‹¡_™ems_visibË
 = 
¬¿y
();

38 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

41 
$this
->
_‹¡_™ems_visibË
 = 
	`¬¿y
 (

51 
	`log_mes§ge
('debug', "Unit Testing Class Initialized");

65 
funùiÚ
 
	`£t_‹¡_™ems
(
$™ems
 = 
	$¬¿y
())

67 iàĞ! 
	`em±y
(
$™ems
è
AND
 
	`is_¬¿y
($items))

69 
$this
->
_‹¡_™ems_visibË
 = 
$™ems
;

71 
	}
}

86 
funùiÚ
 
run
(
$‹¡
, 
$ex³ùed
 = 
TRUE
, 
$‹¡_Çme
 = 'undefšed', 
$nÙes
 = '')

88 ià(
$this
->
aùive
 =ğ
FALSE
)

90  
FALSE
;

93 ià(
š_¬¿y
(
$ex³ùed
, 
¬¿y
('is_objeù', 'is_¡ršg', 'is_boŞ', 'is_Œue', 'is_çl£', 'is_št', 'is_num”ic', 'is_æßt', 'is_doubË', 'is_¬¿y', 'is_nuÎ'), 
TRUE
))

95 
	g$ex³ùed
 = 
¡r_»¶aû
('is_æßt', 'is_doubË', 
$ex³ùed
);

96 
	g$»suÉ
 = (
$ex³ùed
(
$‹¡
)è? 
TRUE
 : 
FALSE
;

97 
	g$exty³
 = 
¡r_»¶aû
(
¬¿y
('Œue', 'çl£'), 'boŞ', sŒ_»¶aû('is_', '', 
$ex³ùed
));

101 ià(
	g$this
->
	g¡riù
 =ğ
TRUE
)

102 
$»suÉ
 = (
$‹¡
 ==ğ
$ex³ùed
è? 
TRUE
 : 
FALSE
;

104 
	g$»suÉ
 = (
$‹¡
 =ğ
$ex³ùed
è? 
TRUE
 : 
FALSE
;

106 
	g$exty³
 = 
g‘ty³
(
$ex³ùed
);

109 
	g$back
 = 
$this
->
_backŒaû
();

111 
	g$»pÜt
[] = 
¬¿y
 (

112 '‹¡_Çme' => 
$‹¡_Çme
,

113 '‹¡_d©©y³' => 
g‘ty³
(
$‹¡
),

114 '»s_d©©y³' => 
$exty³
,

115 '»suÉ' => (
$»suÉ
 ==ğ
TRUE
) ? 'passed' : 'failed',

116 'fe' => 
$back
['file'],

117 'lše' => 
$back
['line'],

118 'nÙes' => 
$nÙes


121 
	g$this
->
	g»suÉs
[] = 
$»pÜt
;

123 (
	g$this
->
»pÜt
(
$this
->
»suÉ
(
$»pÜt
)));

136 
funùiÚ
 
»pÜt
(
$»suÉ
 = 
	$¬¿y
())

138 ià(
	`couÁ
(
$»suÉ
) == 0)

140 
$»suÉ
 = 
$this
->
	`»suÉ
();

143 
$CI
 =& 
	`g‘_š¡ªû
();

146 
$this
->
	`_·r£_‹m¶©e
();

148 
$r
 = '';

150 ià(
	`php_§pi_Çme
() !== 'cli')

152 
$CI
->
lßd
->
	`Ïnguage
('unit_test');

154 
	`fÜ—ch
 (
$»suÉ
 
as
 
$»s
)

156 
$bË
 = '';

158 
	`fÜ—ch
 (
$»s
 
as
 
$key
 => 
$v®
)

160 ià(
$key
 =ğ
$CI
->
Ïng
->
	`lše
('ut_result'))

162 ià(
$v®
 =ğ
$CI
->
Ïng
->
	`lše
('ut_passed'))

164 
$v®
 = '<span style="color: #0C0;">'.$val.'</span>';

166 
	`–£if
 (
$v®
 =ğ
$CI
->
Ïng
->
	`lše
('ut_failed'))

168 
$v®
 = '<span style="color: #C00;">'.$val.'</span>';

172 
$‹mp
 = 
$this
->
_‹m¶©e_rows
;

173 
$‹mp
 = 
	`¡r_»¶aû
('{™em}', 
$key
, $temp);

174 
$‹mp
 = 
	`¡r_»¶aû
('{»suÉ}', 
$v®
, $temp);

175 
$bË
 .ğ
$‹mp
;

178 
$r
 .ğ
	`¡r_»¶aû
('{rows}', 
$bË
, 
$this
->
_‹m¶©e
);

181  
$r
;

185 
$CI
->
lßd
->
	`Ïnguage
('unit_test', 'english');

187 
$·s£d
 = 0;

188 
$çed
 = 0;

189 
$çed_‹¡
 = 
	`¬¿y
();

190 
$couÁ
 = 0;

192 
	`fÜ—ch
 (
$»suÉ
 
as
 
$»s
)

194 ià(
$»s
['Result'] == 'Passed')

196 
$·s£d
 += 1;

197 
$couÁ
 += 1;

199 
	`–£if
 (
$»s
['Result'] == 'Failed')

201 
$çed
 += 1;

202 
$çed_‹¡
[] = 
$»s
['Test Name'];

203 
$couÁ
 += 1;

207 
$r1
 = "Execute Unit Test!! \n\n";

208 
$r2
 = 
	`¥rštf
("AÎ:% Pas£d:% Faed:%s\n", 
$couÁ
, 
$·s£d
, 
$çed
);

210 ià(
	`couÁ
(
$çed_‹¡
) > 0)

212 
$r
 = 
$r1
 . "\x1b[31m" . 
$r2
 . "\x1b[0m" . 
	`¥rštf
("Faed Te¡: \À% \n", 
	`im¶ode
("\À", 
$çed_‹¡
));

216 
$r
 = 
$r1
 . "\x1b[32m" . 
$r2
 . "\x1b[0m";

218  
$r
;

220 
	}
}

233 
funùiÚ
 
	$u£_¡riù
(
$¡©e
 = 
TRUE
)

235 
$this
->
¡riù
 = (
$¡©e
 =ğ
FALSE
è? FALSE : 
TRUE
;

236 
	}
}

249 
funùiÚ
 
	$aùive
(
$¡©e
 = 
TRUE
)

251 
$this
->
aùive
 = (
$¡©e
 =ğ
FALSE
è? FALSE : 
TRUE
;

252 
	}
}

264 
funùiÚ
 
»suÉ
(
$»suÉs
 = 
	$¬¿y
())

266 
$CI
 =& 
	`g‘_š¡ªû
();

268 ià(
	`php_§pi_Çme
() === 'cli')

270 
$CI
->
lßd
->
	`Ïnguage
('unit_test', 'english');

274 
$CI
->
lßd
->
	`Ïnguage
('unit_test');

277 ià(
	`couÁ
(
$»suÉs
) == 0)

279 
$»suÉs
 = 
$this
->
»suÉs
;

282 
$»tv®
 = 
	`¬¿y
();

283 
	`fÜ—ch
 (
$»suÉs
 
as
 
$»suÉ
)

285 
$‹mp
 = 
	`¬¿y
();

286 
	`fÜ—ch
 (
$»suÉ
 
as
 
$key
 => 
$v®
)

288 iàĞ! 
	`š_¬¿y
(
$key
, 
$this
->
_‹¡_™ems_visibË
))

293 ià(
	`is_¬¿y
(
$v®
))

295 
	`fÜ—ch
 (
$v®
 
as
 
$k
 => 
$v
)

297 ià(
FALSE
 !=ğ(
$lše
 = 
$CI
->
Ïng
->
	`lše
(
	`¡¹Şow”
('ut_'.
$v
))))

299 
$v
 = 
$lše
;

301 
$‹mp
[
$CI
->
Ïng
->
	`lše
('ut_'.
$k
)] = 
$v
;

306 ià(
FALSE
 !=ğ(
$lše
 = 
$CI
->
Ïng
->
	`lše
(
	`¡¹Şow”
('ut_'.
$v®
))))

308 
$v®
 = 
$lše
;

310 
$‹mp
[
$CI
->
Ïng
->
	`lše
('ut_'.
$key
)] = 
$v®
;

314 
$»tv®
[] = 
$‹mp
;

317  
$»tv®
;

318 
	}
}

331 
funùiÚ
 
	$£t_‹m¶©e
(
$‹m¶©e
)

333 
$this
->
_‹m¶©e
 = 
$‹m¶©e
;

334 
	}
}

346 
funùiÚ
 
	$_backŒaû
()

348 ià(
	`funùiÚ_exi¡s
('debug_backtrace'))

350 
$back
 = 
	`debug_backŒaû
();

352 
$fe
 = ( ! 
	`is£t
(
$back
['1']['file'])) ? '' : $back['1']['file'];

353 
$lše
 = ( ! 
	`is£t
(
$back
['1']['line'])) ? '' : $back['1']['line'];

355  
	`¬¿y
('fe' => 
$fe
, 'lše' => 
$lše
);

357  
	`¬¿y
('file' => 'Unknown', 'line' => 'Unknown');

358 
	}
}

368 
funùiÚ
 
	$_deçuÉ_‹m¶©e
()

370 
$this
->
_‹m¶©e
 = "\n".'<table style="width:100%; font-size:small; margin:10px 0; border-collapse:collapse; border:1px solid #CCC;">';

371 
$this
->
_‹m¶©e
 .= '{rows}';

372 
$this
->
_‹m¶©e
 .= "\n".'</table>';

374 
$this
->
_‹m¶©e_rows
 = "\n\t".'<tr>';

375 
$this
->
_‹m¶©e_rows
 .= "\n\t\t".'<th style="text-align:†eft; border-bottom:1px solid #CCC;">{item}</th>';

376 
$this
->
_‹m¶©e_rows
 .= "\n\t\t".'<td style="border-bottom:1px solid #CCC;">{result}</td>';

377 
$this
->
_‹m¶©e_rows
 .= "\n\t".'</tr>';

378 
	}
}

390 
funùiÚ
 
	$_·r£_‹m¶©e
()

392 iàĞ! 
	`is_nuÎ
(
$this
->
_‹m¶©e_rows
))

397 ià(
	`is_nuÎ
(
$this
->
_‹m¶©e
))

399 
$this
->
	`_deçuÉ_‹m¶©e
();

403 iàĞ! 
	`´eg_m©ch
("/\{rows\}(.*?)\{\/rows\}/si", 
$this
->
_‹m¶©e
, 
$m©ch
))

405 
$this
->
	`_deçuÉ_‹m¶©e
();

409 
$this
->
_‹m¶©e_rows
 = 
$m©ch
['1'];

410 
$this
->
_‹m¶©e
 = 
	`¡r_»¶aû
(
$m©ch
['0'], '{rows}', $this->_template);

411 
	}
}

423 
funùiÚ
 
	$is_Œue
(
$‹¡
)

425  (
	`is_boŞ
(
$‹¡
è
AND
 $‹¡ ==ğ
TRUE
è? TRUE : 
FALSE
;

426 
	}
}

427 
funùiÚ
 
	$is_çl£
(
$‹¡
)

429  (
	`is_boŞ
(
$‹¡
è
AND
 $‹¡ ==ğ
FALSE
è? 
TRUE
 : FALSE;

430 
	}
}

	@application/third_party/CIUnit/libraries/spyc/examples/yaml-dump.php

1 <?
	gphp


3 #
#S 
P
 
Y
 
C


4 #¨
sim¶e
 
php
 
yaml
 
şass


5 #
#F“È
ä“
 
to
 
dump
 
ª
 
¬¿y
Ø
YAML
, 
ªd
 
th’
Ø
lßd
 
th©
 YAML 
back
 
što
‡n

6 #¬¿y. 
This
 
is
 
a
 
good
 
way
 
to
 
‹¡
 
the
 
lim™©iÚs
 
of
h
·r£r
 
ªd
 
maybe


7 #Ë¬À
some
 
basic
 
YAML
.

9 
šşude
('../spyc.php');

11 
	g$¬¿y
[] = 'Sequence item';

12 
	g$¬¿y
['The Key'] = 'Mapped value';

13 
	g$¬¿y
[] = 
¬¿y
('A sequence','of‡ sequence');

14 
	g$¬¿y
[] = 
¬¿y
('first' => 'A sequence','second' => 'of mapped values');

15 
	g$¬¿y
['M­³d'] = 
¬¿y
('A sequence','which is mapped');

16 
	g$¬¿y
['A Note'] = 'What if yourext isoo†ong?';

17 
	g$¬¿y
['Another Note'] = 'Ifhat ishe case,he dumper will…robably fold yourext by using‡ block. Kinda†ikehis.';

18 
	g$¬¿y
['Therick?'] = 'Therick ishat we overrodehe default indent, 2,o 4‡ndhe default wordwrap, 40,o 60.';

19 
	g$¬¿y
['Old Dog'] = "And if you want\no…reserve†ine breaks, \ngo‡head!";

20 
	g$¬¿y
['key:withcolon'] = "Should supporthiso";

22 
	g$yaml
 = 
Spyc
::
YAMLDump
(
$¬¿y
,4,60);

	@application/third_party/CIUnit/libraries/spyc/examples/yaml-load.php

1 <?
	gphp


3 #
#S 
P
 
Y
 
C


4 #¨
sim¶e
 
php
 
yaml
 
şass


6 #
#authÜ: [
chris
 
wª¡¿th
, chris@
ozmm
.
Üg
]

7 #webs™es: [
h‰p
:

8 #liûn£: [
MIT
 
Liûn£
, 
h‰p
:

9 #cİyright: (
c
è2005-2006 
Chris
 
Wª¡¿th


11 
šşude
('../spyc.php');

13 
$¬¿y
 = 
Spyc
::
YAMLLßd
('../spyc.yaml');

15 
echo
 '<pre><a href="spyc.yaml">spyc.yaml</a>†oaded into PHP:<br/>';

16 
´št_r
(
$¬¿y
);

17 
echo
 '</pre>';

20 
echo
 '<pre>YAML Data dumped back:<br/>';

21 
echo
 
Spyc
::
YAMLDump
(
$¬¿y
);

22 
echo
 '</pre>';

	@application/third_party/CIUnit/libraries/spyc/php4/5to4.php

1 <?
php


3 
php5to4
 ("../spyc.php", 'spyc-latest.php4');

5 
funùiÚ
 
	$php5to4
 (
$¤c
, 
$de¡
) {

6 
$code
 = 
	`fe_g‘_cÚ‹Ás
 (
$¤c
);

7 
$code
 = 
	`´eg_»¶aû
 ('#(public|private|protected)\s+\$#i', 'var \$', $code);

8 
$code
 = 
	`´eg_»¶aû
 ('#(public|private|protected)\s+static\s+\$#i', 'var \$', $code);

9 
$code
 = 
	`´eg_»¶aû
 ('#(public|private|protected)\s+function#i', 'function', $code);

10 
$code
 = 
	`´eg_»¶aû
 ('#(public|private|protected)\s+static\s+function#i', 'function', $code);

11 
$code
 = 
	`¡r_»¶aû
 ('self::', '$this->', $code);

12 
$f
 = 
	`fİ’
 (
$de¡
, 'w');

13 
	`fwr™e
(
$f
, 
$code
);

14 
	`fşo£
 (
$f
);

15 
´št
 "Writteno $dest.\n";

16 
	}
}

	@application/third_party/CIUnit/libraries/spyc/spyc.php

1 <?
php


13 ià(!
funùiÚ_exi¡s
('spyc_load')) {

19 
funùiÚ
 
¥yc_lßd
 (
$¡ršg
) {

20  
	gSpyc
::
YAMLLßdSŒšg
(
$¡ršg
);

24 ià(!
funùiÚ_exi¡s
('spyc_load_file')) {

30 
funùiÚ
 
¥yc_lßd_fe
 (
$fe
) {

31  
	gSpyc
::
YAMLLßd
(
$fe
);

57 şas 
	cSpyc
 {

67 
public
 
	m$£‰šg_dump_fÜû_quÙes
 = 
çl£
;

74 
public
 
	m$£‰šg_u£_syck_is_possibË
 = 
çl£
;

82 
´iv©e
 
	m$_dumpInd’t
;

83 
´iv©e
 
	m$_dumpWÜdW¿p
;

84 
´iv©e
 
	m$_cÚšsGroupAnchÜ
 = 
çl£
;

85 
´iv©e
 
	m$_cÚšsGroupAlŸs
 = 
çl£
;

86 
´iv©e
 
	m$·th
;

87 
´iv©e
 
	m$»suÉ
;

88 
´iv©e
 
	m$L™”®PÏûHŞd”
 = '___YAML_Literal_Block___';

89 
´iv©e
 
	m$SavedGroups
 = 
¬¿y
();

90 
´iv©e
 
	m$šd’t
;

95 
´iv©e
 
	m$d–ayedP©h
 = 
¬¿y
();

101 
public
 
	m$_nodeId
;

108 
public
 
funùiÚ
 
	$lßd
 (
$šput
) {

109  
$this
->
	`__lßdSŒšg
(
$šput
);

117 
public
 
funùiÚ
 
	$lßdFe
 (
$fe
) {

118  
$this
->
	`__lßd
(
$fe
);

119 
	}
}

136 
public
 
funùiÚ
 
	$YAMLLßd
(
$šput
) {

137 
$Spyc
 = 
Ãw
 
Spyc
;

138  
$Spyc
->
	`__lßd
(
$šput
);

139 
	}
}

160 
public
 
funùiÚ
 
	$YAMLLßdSŒšg
(
$šput
) {

161 
$Spyc
 = 
Ãw
 
Spyc
;

162  
$Spyc
->
	`__lßdSŒšg
(
$šput
);

163 
	}
}

185 
public
 
funùiÚ
 
	$YAMLDump
(
$¬¿y
,
$šd’t
 = 
çl£
,
$wÜdw¿p
 = false) {

186 
$¥yc
 = 
Ãw
 
Spyc
;

187  
$¥yc
->
	`dump
(
$¬¿y
,
$šd’t
,
$wÜdw¿p
);

188 
	}
}

211 
public
 
funùiÚ
 
	$dump
(
$¬¿y
,
$šd’t
 = 
çl£
,
$wÜdw¿p
 = false) {

216 ià(
$šd’t
 ==ğ
çl£
 
Ü
 !
	`is_num”ic
($indent)) {

217 
$this
->
_dumpInd’t
 = 2;

219 
$this
->
_dumpInd’t
 = 
$šd’t
;

222 ià(
$wÜdw¿p
 ==ğ
çl£
 
Ü
 !
	`is_num”ic
($wordwrap)) {

223 
$this
->
_dumpWÜdW¿p
 = 40;

225 
$this
->
_dumpWÜdW¿p
 = 
$wÜdw¿p
;

229 
$¡ršg
 = "---\n";

232 ià(
$¬¿y
) {

233 
$¬¿y
 = (
¬¿y
)$array;

234 
$fœ¡_key
 = 
	`key
(
$¬¿y
);

236 
$´evious_key
 = -1;

237 
	`fÜ—ch
 (
$¬¿y
 
as
 
$key
 => 
$v®ue
) {

238 
$¡ršg
 .ğ
$this
->
	`_yamlize
(
$key
,
$v®ue
,0,
$´evious_key
, 
$fœ¡_key
);

239 
$´evious_key
 = 
$key
;

242  
$¡ršg
;

243 
	}
}

253 
´iv©e
 
funùiÚ
 
_yamlize
(
$key
,
$v®ue
,
$šd’t
, 
$´evious_key
 = -1, 
$fœ¡_key
 = 0) {

254 ià(
is_¬¿y
(
$v®ue
)) {

255 ià(
em±y
 (
$v®ue
))

256  
$this
->
_dumpNode
(
$key
, 
¬¿y
(), 
$šd’t
, 
$´evious_key
, 
$fœ¡_key
);

259 
	g$¡ršg
 = 
$this
->
_dumpNode
(
$key
, 
NULL
, 
$šd’t
, 
$´evious_key
, 
$fœ¡_key
);

261 
	g$šd’t
 +ğ
$this
->
_dumpInd’t
;

263 
	g$¡ršg
 .ğ
$this
->
_yamlizeA¼ay
(
$v®ue
,
$šd’t
);

264 } 
–£if
 (!
is_¬¿y
(
$v®ue
)) {

266 
	g$¡ršg
 = 
$this
->
_dumpNode
(
$key
, 
$v®ue
, 
$šd’t
, 
$´evious_key
, 
$fœ¡_key
);

268  
	g$¡ršg
;

278 
´iv©e
 
funùiÚ
 
	$_yamlizeA¼ay
(
$¬¿y
,
$šd’t
) {

279 ià(
	`is_¬¿y
(
$¬¿y
)) {

280 
$¡ršg
 = '';

281 
$´evious_key
 = -1;

282 
$fœ¡_key
 = 
	`key
(
$¬¿y
);

283 
	`fÜ—ch
 (
$¬¿y
 
as
 
$key
 => 
$v®ue
) {

284 
$¡ršg
 .ğ
$this
->
	`_yamlize
(
$key
, 
$v®ue
, 
$šd’t
, 
$´evious_key
, 
$fœ¡_key
);

285 
$´evious_key
 = 
$key
;

287  
$¡ršg
;

289  
çl£
;

291 
	}
}

301 
´iv©e
 
funùiÚ
 
_dumpNode
(
$key
, 
$v®ue
, 
$šd’t
, 
$´evious_key
 = -1, 
$fœ¡_key
 = 0) {

303 ià(
is_¡ršg
 (
$v®ue
è&& ((
¡½os
($v®ue,"\n"è!=ğ
çl£
 || strpos($value,": ") !== false || strpos($value,"- ") !== false ||

304 
¡½os
(
$v®ue
,"*"è!=ğ
çl£
 || strpos($value,"#") !== false || strpos($value,"<") !== false || strpos($value,">") !== false ||

305 
¡½os
(
$v®ue
,"["è!=ğ
çl£
 || sŒpos($v®ue,"]"è!=ğçl£ || sŒpos($v®ue,"{"è!=ğçl£ || sŒpos($v®ue,"}"è!=ğçl£è|| 
sub¡r
 ($value, -1, 1) == ':')) {

306 
$v®ue
 = 
$this
->
_doL™”®Block
($v®ue,
$šd’t
);

308 
	g$v®ue
 = 
$this
->
_doFŞdšg
(
$v®ue
,
$šd’t
);

309 ià(
is_boŞ
(
$v®ue
)) {

310 
	g$v®ue
 = (
$v®ue
) ? "true" : "false";

314 ià(
	g$v®ue
 ==ğ
¬¿y
()è
$v®ue
 = '[ ]';

316 
	g$¥aûs
 = 
¡r_»³©
(' ',
$šd’t
);

318 ià(
is_št
(
$key
è&& 
	g$key
 - 1 =ğ
$´evious_key
 && 
$fœ¡_key
===0) {

320 
$¡ršg
 = 
$¥aûs
.'- '.
$v®ue
."\n";

322 ià(
	g$fœ¡_key
===0è
throw
 
Ãw
 
Exû±iÚ
('Key ¬®Èsüewy. Thfœ¡ oÃ wa z”o,‚ow it\' "'. 
$key
 .'"');

324 ià(
¡½os
(
$key
, ":"è!=ğ
çl£
) { $key = '"' . $key . '"'; }

325 
	g$¡ršg
 = 
$¥aûs
.
$key
.': '.
$v®ue
."\n";

327  
	g$¡ršg
;

337 
´iv©e
 
funùiÚ
 
	$_doL™”®Block
(
$v®ue
,
$šd’t
) {

338 ià(
	`¡½os
(
$v®ue
, "\n"è==ğ
çl£
 && strpos($value, "'") === false) {

339  
	`¥rštf
 ("'%s'", 
$v®ue
);

341 ià(
	`¡½os
(
$v®ue
, "\n"è==ğ
çl£
 && strpos($value, '"') === false) {

342  
	`¥rštf
 ('"%s"', 
$v®ue
);

344 
$ex¶oded
 = 
	`ex¶ode
("\n",
$v®ue
);

345 
$ÃwV®ue
 = '|';

346 
$šd’t
 +ğ
$this
->
_dumpInd’t
;

347 
$¥aûs
 = 
	`¡r_»³©
(' ',
$šd’t
);

348 
	`fÜ—ch
 (
$ex¶oded
 
as
 
$lše
) {

349 
$ÃwV®ue
 .ğ"\n" . 
$¥aûs
 . 
	`Œim
(
$lše
);

351  
$ÃwV®ue
;

352 
	}
}

360 
´iv©e
 
funùiÚ
 
	$_doFŞdšg
(
$v®ue
,
$šd’t
) {

363 ià(
$this
->
_dumpWÜdW¿p
 !=ğ0 && 
	`is_¡ršg
 (
$v®ue
è&& 
	`¡¾’
($value) > $this->_dumpWordWrap) {

364 
$šd’t
 +ğ
$this
->
_dumpInd’t
;

365 
$šd’t
 = 
	`¡r_»³©
(' ',$indent);

366 
$w¿µed
 = 
	`wÜdw¿p
(
$v®ue
,
$this
->
_dumpWÜdW¿p
,"\n$indent");

367 
$v®ue
 = ">\n".
$šd’t
.
$w¿µed
;

369 ià(
$this
->
£‰šg_dump_fÜû_quÙes
 && 
	`is_¡ršg
 (
$v®ue
))

370 
$v®ue
 = '"' . $value . '"';

374  
$v®ue
;

375 
	}
}

379 
´iv©e
 
funùiÚ
 
	$__lßd
(
$šput
) {

380 
$Sourû
 = 
$this
->
	`lßdFromSourû
(
$šput
);

381  
$this
->
	`lßdW™hSourû
(
$Sourû
);

382 
	}
}

384 
´iv©e
 
funùiÚ
 
	$__lßdSŒšg
(
$šput
) {

385 
$Sourû
 = 
$this
->
	`lßdFromSŒšg
(
$šput
);

386  
$this
->
	`lßdW™hSourû
(
$Sourû
);

387 
	}
}

389 
´iv©e
 
funùiÚ
 
	$lßdW™hSourû
(
$Sourû
) {

390 ià(
	`em±y
 (
$Sourû
)è 
	`¬¿y
();

391 ià(
$this
->
£‰šg_u£_syck_is_possibË
 && 
	`funùiÚ_exi¡s
 ('syck_load')) {

392 
$¬¿y
 = 
	`syck_lßd
 (
	`im¶ode
 ('', 
$Sourû
));

393  
	`is_¬¿y
(
$¬¿y
è? $¬¿y : 
	`¬¿y
();

396 
$this
->
·th
 = 
	`¬¿y
();

397 
$this
->
»suÉ
 = 
	`¬¿y
();

399 
$út
 = 
	`couÁ
(
$Sourû
);

400 
$i
 = 0; $˜< 
$út
; $i++) {

401 
$lše
 = 
$Sourû
[
$i
];

403 
$this
->
šd’t
 = 
	`¡¾’
(
$lše
è- sŒËn(
	`Érim
($line));

404 
$‹mpP©h
 = 
$this
->
	`g‘P¬’tP©hByInd’t
($this->
šd’t
);

405 
$lše
 = 
£lf
::
	`¡rInd’t
($lše, 
$this
->
šd’t
);

406 ià(
£lf
::
	`isComm’t
(
$lše
)) ;

407 ià(
£lf
::
	`isEm±y
(
$lše
)) ;

408 
$this
->
·th
 = 
$‹mpP©h
;

410 
$l™”®BlockStyË
 = 
£lf
::
	`¡¬tsL™”®Block
(
$lše
);

411 ià(
$l™”®BlockStyË
) {

412 
$lše
 = 
	`¹rim
 ($lše, 
$l™”®BlockStyË
 . " \n");

413 
$l™”®Block
 = '';

414 
$lše
 .ğ
$this
->
L™”®PÏûHŞd”
;

416 ++
$i
 < 
$út
 && 
$this
->
	`l™”®BlockCÚtšues
(
$Sourû
[$i], $this->
šd’t
)) {

417 
$l™”®Block
 = 
$this
->
	`addL™”®Lše
($l™”®Block, 
$Sourû
[
$i
], 
$l™”®BlockStyË
);

419 
$i
--;

422 ++
$i
 < 
$út
 && 
£lf
::
	`g»edyN“dNextLše
(
$lše
)) {

423 
$lše
 = 
	`¹rim
 ($lše, " \n\t\r"è. ' ' . 
	`Érim
 (
$Sourû
[
$i
], " \t");

425 
$i
--;

429 ià(
	`¡½os
 (
$lše
, '#')) {

430 ià(
	`¡½os
 (
$lše
, '"'è==ğ
çl£
 && strpos ($line, "'") === false)

431 
$lše
 = 
	`´eg_»¶aû
('/\s+#(.+)$/','',$line);

434 
$lšeA¼ay
 = 
$this
->
	`_·r£Lše
(
$lše
);

436 ià(
$l™”®BlockStyË
)

437 
$lšeA¼ay
 = 
$this
->
	`»v”tL™”®PÏûHŞd”
 ($lšeA¼ay, 
$l™”®Block
);

439 
$this
->
	`addA¼ay
(
$lšeA¼ay
, $this->
šd’t
);

441 
	`fÜ—ch
 (
$this
->
d–ayedP©h
 
as
 
$šd’t
 => 
$d–ayedP©h
)

442 
$this
->
·th
[
$šd’t
] = 
$d–ayedP©h
;

444 
$this
->
d–ayedP©h
 = 
	`¬¿y
();

447  
$this
->
»suÉ
;

448 
	}
}

450 
´iv©e
 
funùiÚ
 
	$lßdFromSourû
 (
$šput
) {

451 ià(!
	`em±y
(
$šput
è&& 
	`¡½os
($šput, "\n"è==ğ
çl£
 && 
	`fe_exi¡s
($input))

452  
	`fe
(
$šput
);

454  
$this
->
	`lßdFromSŒšg
(
$šput
);

455 
	}
}

457 
´iv©e
 
funùiÚ
 
	$lßdFromSŒšg
 (
$šput
) {

458 
$lšes
 = 
	`ex¶ode
("\n",
$šput
);

459 
	`fÜ—ch
 (
$lšes
 
as
 
$k
 => 
$_
) {

460 
$lšes
[
$k
] = 
	`¹rim
 (
$_
, "\r");

462  
$lšes
;

463 
	}
}

471 
´iv©e
 
funùiÚ
 
	$_·r£Lše
(
$lše
) {

472 ià(!
$lše
è 
	`¬¿y
();

473 
$lše
 = 
	`Œim
($line);

475 ià(!
$lše
è 
	`¬¿y
();

476 
$¬¿y
 = 
	`¬¿y
();

478 
$group
 = 
$this
->
	`nodeCÚšsGroup
(
$lše
);

479 ià(
$group
) {

480 
$this
->
	`addGroup
(
$lše
, 
$group
);

481 
$lše
 = 
$this
->
	`¡rGroup
 ($lše, 
$group
);

484 ià(
$this
->
	`¡¬tsM­³dSequ’û
(
$lše
))

485  
$this
->
	`»tuºM­³dSequ’û
(
$lše
);

487 ià(
$this
->
	`¡¬tsM­³dV®ue
(
$lše
))

488  
$this
->
	`»tuºM­³dV®ue
(
$lše
);

490 ià(
$this
->
	`isA¼ayEËm’t
(
$lše
))

491  
$this
->
	`»tuºA¼ayEËm’t
(
$lše
);

493 ià(
$this
->
	`isPÏšA¼ay
(
$lše
))

494  
$this
->
	`»tuºPÏšA¼ay
(
$lše
);

497  
$this
->
	`»tuºKeyV®uePaœ
(
$lše
);

499 
	}
}

507 
´iv©e
 
funùiÚ
 
	$_toTy³
(
$v®ue
) {

508 ià(
$v®ue
 ==ğ''è 
nuÎ
;

509 
$fœ¡_ch¬aù”
 = 
$v®ue
[0];

510 
$Ï¡_ch¬aù”
 = 
	`sub¡r
(
$v®ue
, -1, 1);

512 
$is_quÙed
 = 
çl£
;

514 ià(!
$v®ue
) ;

515 ià(
$fœ¡_ch¬aù”
 != '"' && $first_character != "'") ;

516 ià(
$Ï¡_ch¬aù”
 != '"' && $last_character != "'") ;

517 
$is_quÙed
 = 
Œue
;

520 ià(
$is_quÙed
)

521  
	`¡¹r
(
	`sub¡r
 (
$v®ue
, 1, -1), 
	`¬¿y
 ('\\"' => '"', '\'\'' => '\'', '\\\'' => '\''));

523 ià(
	`¡½os
(
$v®ue
, ' #'è!=ğ
çl£
)

524 
$v®ue
 = 
	`´eg_»¶aû
('/\s+#(.+)$/','',$value);

526 ià(
$fœ¡_ch¬aù”
 =ğ'[' && 
$Ï¡_ch¬aù”
 == ']') {

528 
$šÃrV®ue
 = 
	`Œim
(
	`sub¡r
 (
$v®ue
, 1, -1));

529 ià(
$šÃrV®ue
 ==ğ''è 
	`¬¿y
();

530 
$ex¶ode
 = 
$this
->
	`_šlšeEsÿ³
(
$šÃrV®ue
);

532 
$v®ue
 = 
	`¬¿y
();

533 
	`fÜ—ch
 (
$ex¶ode
 
as
 
$v
) {

534 
$v®ue
[] = 
$this
->
	`_toTy³
(
$v
);

536  
$v®ue
;

539 ià(
	`¡½os
(
$v®ue
,': ')!==
çl£
 && 
$fœ¡_ch¬aù”
 != '{') {

540 
$¬¿y
 = 
	`ex¶ode
(': ',
$v®ue
);

541 
$key
 = 
	`Œim
(
$¬¿y
[0]);

542 
	`¬¿y_shiá
(
$¬¿y
);

543 
$v®ue
 = 
	`Œim
(
	`im¶ode
(': ',
$¬¿y
));

544 
$v®ue
 = 
$this
->
	`_toTy³
($value);

545  
	`¬¿y
(
$key
 => 
$v®ue
);

548 ià(
$fœ¡_ch¬aù”
 =ğ'{' && 
$Ï¡_ch¬aù”
 == '}') {

549 
$šÃrV®ue
 = 
	`Œim
(
	`sub¡r
 (
$v®ue
, 1, -1));

550 ià(
$šÃrV®ue
 ==ğ''è 
	`¬¿y
();

553 
$ex¶ode
 = 
$this
->
	`_šlšeEsÿ³
(
$šÃrV®ue
);

555 
$¬¿y
 = 
	`¬¿y
();

556 
	`fÜ—ch
 (
$ex¶ode
 
as
 
$v
) {

557 
$SubA¼
 = 
$this
->
	`_toTy³
(
$v
);

558 ià(
	`em±y
(
$SubA¼
)) ;

559 ià(
	`is_¬¿y
 (
$SubA¼
)) {

560 
$¬¿y
[
	`key
(
$SubA¼
)] = $SubArr[key($SubArr)]; ;

562 
$¬¿y
[] = 
$SubA¼
;

564  
$¬¿y
;

567 ià(
$v®ue
 == 'null' || $value == 'NULL' || $value == 'Null' || $value == '' || $value == '~') {

568  
nuÎ
;

571 ià(
	`štv®
(
$fœ¡_ch¬aù”
è> 0 && 
	`´eg_m©ch
 ('/^[1-9]+[0-9]*$/', 
$v®ue
)) {

572 
$štv®ue
 = ()
$v®ue
;

573 ià(
$štv®ue
 !ğ
PHP_INT_MAX
)

574 
$v®ue
 = 
$štv®ue
;

575  
$v®ue
;

578 ià(
	`š_¬¿y
(
$v®ue
,

579 
	`¬¿y
('true', 'on', '+', 'yes', 'y', 'True', 'TRUE', 'On', 'ON', 'YES', 'Yes', 'Y'))) {

580  
Œue
;

583 ià(
	`š_¬¿y
(
	`¡¹Şow”
(
$v®ue
),

584 
	`¬¿y
('false', 'off', '-', 'no', 'n'))) {

585  
çl£
;

588 ià(
	`is_num”ic
(
$v®ue
)) {

589 ià(
$v®ue
 === '0')  0;

590 ià(
	`Œim
 (
$v®ue
, 0) === $value)

591 
$v®ue
 = ()$value;

592  
$v®ue
;

595  
$v®ue
;

596 
	}
}

603 
´iv©e
 
funùiÚ
 
	$_šlšeEsÿ³
(
$šlše
) {

609 
$£qs
 = 
	`¬¿y
();

610 
$m­s
 = 
	`¬¿y
();

611 
$§ved_¡ršgs
 = 
	`¬¿y
();

614 
$»gex
 = '/(?:(")|(?:\'))((?(1)[^"]+|[^\']+))(?(1)"|\')/';

615 ià(
	`´eg_m©ch_®l
(
$»gex
,
$šlše
,
$¡ršgs
)) {

616 
$§ved_¡ršgs
 = 
$¡ršgs
[0];

617 
$šlše
 = 
	`´eg_»¶aû
(
$»gex
,'YAMLString',$inline);

619 
	`un£t
(
$»gex
);

621 
$i
 = 0;

625 
	`´eg_m©ch
('/\[([^{}\[\]]+)\]/U',
$šlše
,
$m©ch£qs
)) {

626 
$£qs
[] = 
$m©ch£qs
[0];

627 
$šlše
 = 
	`´eg_»¶aû
('/\[([^{}\[\]]+)\]/U', ('YAMLSeq' . (
	`couÁ
(
$£qs
) - 1) . 's'), $inline, 1);

631 
	`´eg_m©ch
('/{([^\[\]{}]+)}/U',
$šlše
,
$m©chm­s
)) {

632 
$m­s
[] = 
$m©chm­s
[0];

633 
$šlše
 = 
	`´eg_»¶aû
('/{([^\[\]{}]+)}/U', ('YAMLM­' . (
	`couÁ
(
$m­s
) - 1) . 's'), $inline, 1);

636 ià(
$i
++ >= 10) ;

638 } 
	`¡½os
 (
$šlše
, '['è!=ğ
çl£
 || strpos ($inline, '{') !== false);

640 
$ex¶ode
 = 
	`ex¶ode
(', ',
$šlše
);

641 
$¡ršgi
 = 0; 
$i
 = 0;

646 ià(!
	`em±y
(
$£qs
)) {

647 
	`fÜ—ch
 (
$ex¶ode
 
as
 
$key
 => 
$v®ue
) {

648 ià(
	`¡½os
(
$v®ue
,'YAMLSeq'è!=ğ
çl£
) {

649 
	`fÜ—ch
 (
$£qs
 
as
 
$£qk
 => 
$£q
) {

650 
$ex¶ode
[
$key
] = 
	`¡r_»¶aû
(('YAMLSeq'.
$£qk
.'s'),
$£q
,
$v®ue
);

651 
$v®ue
 = 
$ex¶ode
[
$key
];

658 ià(!
	`em±y
(
$m­s
)) {

659 
	`fÜ—ch
 (
$ex¶ode
 
as
 
$key
 => 
$v®ue
) {

660 ià(
	`¡½os
(
$v®ue
,'YAMLM­'è!=ğ
çl£
) {

661 
	`fÜ—ch
 (
$m­s
 
as
 
$m­k
 => 
$m­
) {

662 
$ex¶ode
[
$key
] = 
	`¡r_»¶aû
(('YAMLM­'.
$m­k
.'s'), 
$m­
, 
$v®ue
);

663 
$v®ue
 = 
$ex¶ode
[
$key
];

671 ià(!
	`em±y
(
$§ved_¡ršgs
)) {

672 
	`fÜ—ch
 (
$ex¶ode
 
as
 
$key
 => 
$v®ue
) {

673 
	`¡½os
(
$v®ue
,'YAMLSŒšg'è!=ğ
çl£
) {

674 
$ex¶ode
[
$key
] = 
	`´eg_»¶aû
('/YAMLSŒšg/',
$§ved_¡ršgs
[
$¡ršgi
],
$v®ue
, 1);

675 
	`un£t
(
$§ved_¡ršgs
[
$¡ršgi
]);

676 ++
$¡ršgi
;

677 
$v®ue
 = 
$ex¶ode
[
$key
];

682 
$fšished
 = 
Œue
;

683 
	`fÜ—ch
 (
$ex¶ode
 
as
 
$key
 => 
$v®ue
) {

684 ià(
	`¡½os
(
$v®ue
,'YAMLSeq'è!=ğ
çl£
) {

685 
$fšished
 = 
çl£
; ;

687 ià(
	`¡½os
(
$v®ue
,'YAMLM­'è!=ğ
çl£
) {

688 
$fšished
 = 
çl£
; ;

690 ià(
	`¡½os
(
$v®ue
,'YAMLSŒšg'è!=ğ
çl£
) {

691 
$fšished
 = 
çl£
; ;

694 ià(
$fšished
) ;

696 
$i
++;

697 ià(
$i
 > 10)

701  
$ex¶ode
;

702 
	}
}

704 
´iv©e
 
funùiÚ
 
	$l™”®BlockCÚtšues
 (
$lše
, 
$lšeInd’t
) {

705 ià(!
	`Œim
(
$lše
)è 
Œue
;

706 ià(
	`¡¾’
(
$lše
è- sŒËn(
	`Érim
($lše)è> 
$lšeInd’t
è 
Œue
;

707  
çl£
;

708 
	}
}

710 
´iv©e
 
funùiÚ
 
	$»ã»nûCÚ‹ÁsByAlŸs
 (
$®Ÿs
) {

712 ià(!
	`is£t
(
$this
->
SavedGroups
[
$®Ÿs
])è{ 
echo
 "Bad group‚ame: $alias."; ; }

713 
$groupP©h
 = 
$this
->
SavedGroups
[
$®Ÿs
];

714 
$v®ue
 = 
$this
->
»suÉ
;

715 
	`fÜ—ch
 (
$groupP©h
 
as
 
$k
) {

716 
$v®ue
 = $v®ue[
$k
];

718 } 
çl£
);

719  
$v®ue
;

720 
	}
}

722 
´iv©e
 
funùiÚ
 
	$addA¼ayIÆše
 (
$¬¿y
, 
$šd’t
) {

723 
$CommÚGroupP©h
 = 
$this
->
·th
;

724 ià(
	`em±y
 (
$¬¿y
)è 
çl£
;

726 
	`fÜ—ch
 (
$¬¿y
 
as
 
$k
 => 
$_
) {

727 
$this
->
	`addA¼ay
(
	`¬¿y
(
$k
 => 
$_
), 
$šd’t
);

728 
$this
->
·th
 = 
$CommÚGroupP©h
;

730  
Œue
;

731 
	}
}

733 
´iv©e
 
funùiÚ
 
	$addA¼ay
 (
$šcomšg_d©a
, 
$šcomšg_šd’t
) {

737 ià(
	`couÁ
 (
$šcomšg_d©a
) > 1)

738  
$this
->
	`addA¼ayIÆše
 (
$šcomšg_d©a
, 
$šcomšg_šd’t
);

740 
$key
 = 
	`key
 (
$šcomšg_d©a
);

741 
$v®ue
 = 
	`is£t
(
$šcomšg_d©a
[
$key
]è? $šcomšg_d©a[$key] : 
nuÎ
;

742 ià(
$key
 === '__!YAMLZero') $key = '0';

744 ià(
$šcomšg_šd’t
 =ğ0 && !
$this
->
_cÚšsGroupAlŸs
 && !$this->
_cÚšsGroupAnchÜ
) {

745 ià(
$key
 || $key === '' || $key === '0') {

746 
$this
->
»suÉ
[
$key
] = 
$v®ue
;

748 
$this
->
»suÉ
[] = 
$v®ue
; 
	`’d
 ($this->»suÉ); 
$key
 = 
	`key
 ($this->result);

750 
$this
->
·th
[
$šcomšg_šd’t
] = 
$key
;

756 
$hi¡Üy
 = 
	`¬¿y
();

758 
$hi¡Üy
[] = 
$_¬r
 = 
$this
->
»suÉ
;

759 
	`fÜ—ch
 (
$this
->
·th
 
as
 
$k
) {

760 
$hi¡Üy
[] = 
$_¬r
 = $_¬r[
$k
];

763 ià(
$this
->
_cÚšsGroupAlŸs
) {

764 
$v®ue
 = 
$this
->
	`»ã»nûCÚ‹ÁsByAlŸs
($this->
_cÚšsGroupAlŸs
);

765 
$this
->
_cÚšsGroupAlŸs
 = 
çl£
;

770 ià(
	`is_¡ršg
(
$key
) && $key == '<<') {

771 ià(!
	`is_¬¿y
 (
$_¬r
)è{ $_¬¸ğ
	`¬¿y
 (); }

773 
$_¬r
 = 
	`¬¿y_m”ge
 ($_¬r, 
$v®ue
);

774 } ià(
$key
 || $key === '' || $key === '0') {

775 
$_¬r
[
$key
] = 
$v®ue
;

777 ià(!
	`is_¬¿y
 (
$_¬r
)è{ $_¬¸ğ
	`¬¿y
 (
$v®ue
); 
$key
 = 0; }

778 { 
$_¬r
[] = 
$v®ue
; 
	`’d
 ($_¬r); 
$key
 = 
	`key
 ($_arr); }

781 
$»v”£_·th
 = 
	`¬¿y_»v”£
(
$this
->
·th
);

782 
$»v”£_hi¡Üy
 = 
	`¬¿y_»v”£
 (
$hi¡Üy
);

783 
$»v”£_hi¡Üy
[0] = 
$_¬r
;

784 
$út
 = 
	`couÁ
(
$»v”£_hi¡Üy
) - 1;

785 
$i
 = 0; $˜< 
$út
; $i++) {

786 
$»v”£_hi¡Üy
[
$i
+1][
$»v”£_·th
[$i]] = $reverse_history[$i];

788 
$this
->
»suÉ
 = 
$»v”£_hi¡Üy
[
$út
];

790 
$this
->
·th
[
$šcomšg_šd’t
] = 
$key
;

792 ià(
$this
->
_cÚšsGroupAnchÜ
) {

793 
$this
->
SavedGroups
[$this->
_cÚšsGroupAnchÜ
] = $this->
·th
;

794 ià(
	`is_¬¿y
 (
$v®ue
)) {

795 
$k
 = 
	`key
 (
$v®ue
);

796 ià(!
	`is_št
 (
$k
)) {

797 
$this
->
SavedGroups
[$this->
_cÚšsGroupAnchÜ
][
$šcomšg_šd’t
 + 2] = 
$k
;

800 
$this
->
_cÚšsGroupAnchÜ
 = 
çl£
;

803 
	}
}

805 
´iv©e
 
funùiÚ
 
	$¡¬tsL™”®Block
 (
$lše
) {

806 
$Ï¡Ch¬
 = 
	`sub¡r
 (
	`Œim
(
$lše
), -1);

807 ià(
$Ï¡Ch¬
 !ğ'>' && $Ï¡Ch¬ !ğ'|'è 
çl£
;

808 ià(
$Ï¡Ch¬
 == '|')  $lastChar;

810 ià(
	`´eg_m©ch
 ('#<.*?>$#', 
$lše
)è 
çl£
;

811  
$Ï¡Ch¬
;

812 
	}
}

814 
´iv©e
 
funùiÚ
 
	$g»edyN“dNextLše
(
$lše
) {

815 
$lše
 = 
	`Œim
 ($line);

816 ià(!
	`¡¾’
(
$lše
)è 
çl£
;

817 ià(
	`sub¡r
 (
$lše
, -1, 1è=ğ']'è 
çl£
;

818 ià(
$lše
[0] =ğ'['è 
Œue
;

819 ià(
	`´eg_m©ch
 ('#^[^:]+?:\s*\[#', 
$lše
)è 
Œue
;

820  
çl£
;

821 
	}
}

823 
´iv©e
 
funùiÚ
 
	$addL™”®Lše
 (
$l™”®Block
, 
$lše
, 
$l™”®BlockStyË
) {

824 
$lše
 = 
£lf
::
	`¡rInd’t
($line);

825 
$lše
 = 
	`¹rim
 ($line, "\r\n\t ") . "\n";

826 ià(
$l™”®BlockStyË
 == '|') {

827  
$l™”®Block
 . 
$lše
;

829 ià(
	`¡¾’
(
$lše
) == 0)

830  
	`¹rim
(
$l™”®Block
, ' ') . "\n";

831 ià(
$lše
 =ğ"\n" && 
$l™”®BlockStyË
 == '>') {

832  
	`¹rim
 (
$l™”®Block
, " \t") . "\n";

834 ià(
$lše
 != "\n")

835 
$lše
 = 
	`Œim
 ($line, "\r\n ") . " ";

836  
$l™”®Block
 . 
$lše
;

837 
	}
}

839 
funùiÚ
 
	$»v”tL™”®PÏûHŞd”
 (
$lšeA¼ay
, 
$l™”®Block
) {

840 
	`fÜ—ch
 (
$lšeA¼ay
 
as
 
$k
 => 
$_
) {

841 ià(
	`is_¬¿y
(
$_
))

842 
$lšeA¼ay
[
$k
] = 
$this
->
	`»v”tL™”®PÏûHŞd”
 (
$_
, 
$l™”®Block
);

843 ià(
	`sub¡r
(
$_
, -1 * 
	`¡¾’
 (
$this
->
L™”®PÏûHŞd”
)) == $this->LiteralPlaceHolder)

844 
$lšeA¼ay
[
$k
] = 
	`¹rim
 (
$l™”®Block
, " \r\n");

846  
$lšeA¼ay
;

847 
	}
}

849 
´iv©e
 
funùiÚ
 
¡rInd’t
 (
$lše
, 
$šd’t
 = -1) {

850 ià(
$šd’t
 =ğ-1è$šd’ˆğ
¡¾’
(
$lše
è- sŒËn(
Érim
($line));

851  
sub¡r
 (
$lše
, 
$šd’t
);

854 
´iv©e
 
funùiÚ
 
	$g‘P¬’tP©hByInd’t
 (
$šd’t
) {

855 ià(
$šd’t
 =ğ0è 
	`¬¿y
();

856 
$lšeP©h
 = 
$this
->
·th
;

858 
	`’d
(
$lšeP©h
); 
$Ï¡Ind’tInP¬’tP©h
 = 
	`key
($linePath);

859 ià(
$šd’t
 <ğ
$Ï¡Ind’tInP¬’tP©h
è
	`¬¿y_pİ
 (
$lšeP©h
);

860 } 
$šd’t
 <ğ
$Ï¡Ind’tInP¬’tP©h
);

861  
$lšeP©h
;

862 
	}
}

865 
´iv©e
 
funùiÚ
 
	$ş—rBigg”P©hV®ues
 (
$šd’t
) {

868 ià(
$šd’t
 =ğ0è
$this
->
·th
 = 
	`¬¿y
();

869 ià(
	`em±y
 (
$this
->
·th
)è 
Œue
;

871 
	`fÜ—ch
 (
$this
->
·th
 
as
 
$k
 => 
$_
) {

872 ià(
$k
 > 
$šd’t
è
	`un£t
 (
$this
->
·th
[$k]);

875  
Œue
;

876 
	}
}

879 
´iv©e
 
funùiÚ
 
	$isComm’t
 (
$lše
) {

880 ià(!
$lše
è 
çl£
;

881 ià(
$lše
[0] =ğ'#'è 
Œue
;

882 ià(
	`Œim
(
$lše
, " \r\n\t"è=ğ'---'è 
Œue
;

883  
çl£
;

884 
	}
}

886 
´iv©e
 
funùiÚ
 
	$isEm±y
 (
$lše
) {

887  (
	`Œim
 (
$lše
) === '');

888 
	}
}

891 
´iv©e
 
funùiÚ
 
	$isA¼ayEËm’t
 (
$lše
) {

892 ià(!
$lše
è 
çl£
;

893 ià(
$lše
[0] !ğ'-'è 
çl£
;

894 ià(
	`¡¾’
 (
$lše
) > 3)

895 ià(
	`sub¡r
(
$lše
,0,3è=ğ'---'è 
çl£
;

897  
Œue
;

898 
	}
}

900 
´iv©e
 
funùiÚ
 
	$isHashEËm’t
 (
$lše
) {

901  
	`¡½os
(
$lše
, ':');

902 
	}
}

904 
´iv©e
 
funùiÚ
 
	$isL™”®
 (
$lše
) {

905 ià(
$this
->
	`isA¼ayEËm’t
(
$lše
)è 
çl£
;

906 ià(
$this
->
	`isHashEËm’t
(
$lše
)è 
çl£
;

907  
Œue
;

908 
	}
}

911 
´iv©e
 
funùiÚ
 
	$unquÙe
 (
$v®ue
) {

912 ià(!
$v®ue
)  $value;

913 ià(!
	`is_¡ršg
(
$v®ue
))  $value;

914 ià(
$v®ue
[0] =ğ'\''è 
	`Œim
 ($value, '\'');

915 ià(
$v®ue
[0] =ğ'"'è 
	`Œim
 ($value, '"');

916  
$v®ue
;

917 
	}
}

919 
´iv©e
 
funùiÚ
 
	$¡¬tsM­³dSequ’û
 (
$lše
) {

920  (
$lše
[0] =ğ'-' && 
	`sub¡r
 ($line, -1, 1) == ':');

921 
	}
}

923 
´iv©e
 
funùiÚ
 
	$»tuºM­³dSequ’û
 (
$lše
) {

924 
$¬¿y
 = 
	`¬¿y
();

925 
$key
 = 
£lf
::
	`unquÙe
(
	`Œim
(
	`sub¡r
(
$lše
,1,-1)));

926 
$¬¿y
[
$key
] = 
	`¬¿y
();

927 
$this
->
d–ayedP©h
 = 
	`¬¿y
(
	`¡½os
 (
$lše
, 
$key
è+ $this->
šd’t
 => $key);

928  
	`¬¿y
(
$¬¿y
);

929 
	}
}

931 
´iv©e
 
funùiÚ
 
	$»tuºM­³dV®ue
 (
$lše
) {

932 
$¬¿y
 = 
	`¬¿y
();

933 
$key
 = 
£lf
::
	`unquÙe
 (
	`Œim
(
	`sub¡r
(
$lše
,0,-1)));

934 
$¬¿y
[
$key
] = '';

935  
$¬¿y
;

936 
	}
}

938 
´iv©e
 
funùiÚ
 
	$¡¬tsM­³dV®ue
 (
$lše
) {

939  (
	`sub¡r
 (
$lše
, -1, 1) == ':');

940 
	}
}

942 
´iv©e
 
funùiÚ
 
	$isPÏšA¼ay
 (
$lše
) {

943  (
$lše
[0] =ğ'[' && 
	`sub¡r
 ($line, -1, 1) == ']');

944 
	}
}

946 
´iv©e
 
funùiÚ
 
	$»tuºPÏšA¼ay
 (
$lše
) {

947  
$this
->
	`_toTy³
(
$lše
);

948 
	}
}

950 
´iv©e
 
funùiÚ
 
	$»tuºKeyV®uePaœ
 (
$lše
) {

951 
$¬¿y
 = 
	`¬¿y
();

952 
$key
 = '';

953 ià(
	`¡½os
 (
$lše
, ':')) {

956 ià((
$lše
[0] =ğ'"' || $lše[0] =ğ"'"è&& 
	`´eg_m©ch
('/^(["\'](.*)["\'](\s)*:)/',$lše,
$m©ches
)) {

957 
$v®ue
 = 
	`Œim
(
	`¡r_»¶aû
(
$m©ches
[1],'',
$lše
));

958 
$key
 = 
$m©ches
[2];

961 
$ex¶ode
 = 
	`ex¶ode
(':',
$lše
);

962 
$key
 = 
	`Œim
(
$ex¶ode
[0]);

963 
	`¬¿y_shiá
(
$ex¶ode
);

964 
$v®ue
 = 
	`Œim
(
	`im¶ode
(':',
$ex¶ode
));

967 
$v®ue
 = 
$this
->
	`_toTy³
($value);

968 ià(
$key
 === '0') $key = '__!YAMLZero';

969 
$¬¿y
[
$key
] = 
$v®ue
;

971 
$¬¿y
 = 
	`¬¿y
 (
$lše
);

973  
$¬¿y
;

975 
	}
}

978 
´iv©e
 
funùiÚ
 
	$»tuºA¼ayEËm’t
 (
$lše
) {

979 ià(
	`¡¾’
(
$lše
è<ğ1è 
	`¬¿y
(array());

980 
$¬¿y
 = 
	`¬¿y
();

981 
$v®ue
 = 
	`Œim
(
	`sub¡r
(
$lše
,1));

982 
$v®ue
 = 
$this
->
	`_toTy³
($value);

983 
$¬¿y
[] = 
$v®ue
;

984  
$¬¿y
;

985 
	}
}

988 
´iv©e
 
funùiÚ
 
	$nodeCÚšsGroup
 (
$lše
) {

989 
$symbŞsFÜReã»nû
 = 'A-z0-9_\-';

990 ià(
	`¡½os
(
$lše
, '&'è==ğ
çl£
 && strpos($line, '*') === false)  false;

991 ià(
$lše
[0] =ğ'&' && 
	`´eg_m©ch
('/^(&['.
$symbŞsFÜReã»nû
.']+)/', $lše, 
$m©ches
))  $matches[1];

992 ià(
$lše
[0] =ğ'*' && 
	`´eg_m©ch
('/^(\*['.
$symbŞsFÜReã»nû
.']+)/', $lše, 
$m©ches
))  $matches[1];

993 ià(
	`´eg_m©ch
('/(&['.
$symbŞsFÜReã»nû
.']+)$/', 
$lše
, 
$m©ches
))  $matches[1];

994 ià(
	`´eg_m©ch
('/(\*['.
$symbŞsFÜReã»nû
.']+$)/', 
$lše
, 
$m©ches
))  $matches[1];

995 ià(
	`´eg_m©ch
 ('#^\s*<<\s*:\s*(\*[^\s]+).*$#', 
$lše
, 
$m©ches
))  $matches[1];

996  
çl£
;

998 
	}
}

1000 
´iv©e
 
funùiÚ
 
	$addGroup
 (
$lše
, 
$group
) {

1001 ià(
$group
[0] =ğ'&'è
$this
->
_cÚšsGroupAnchÜ
 = 
	`sub¡r
 ($group, 1);

1002 ià(
$group
[0] =ğ'*'è
$this
->
_cÚšsGroupAlŸs
 = 
	`sub¡r
 ($group, 1);

1004 
	}
}

1006 
´iv©e
 
funùiÚ
 
	$¡rGroup
 (
$lše
, 
$group
) {

1007 
$lše
 = 
	`Œim
(
	`¡r_»¶aû
(
$group
, '', $line));

1008  
$lše
;

1009 
	}
}

1015 
defše
 ('SPYC_FROM_COMMAND_LINE', 
çl£
);

1018 ià(!
	gSPYC_FROM_COMMAND_LINE
) ;

1019 ià(
em±y
 (
$_SERVER
['¬gc']è|| 
	g$_SERVER
['argc'] < 2) ;

1020 ià(
em±y
 (
$_SERVER
['PHP_SELF']è|| 
	g$_SERVER
['PHP_SELF'] != 'spyc.php') ;

1021 
	g$fe
 = 
$¬gv
[1];

1022 
´štf
 ("Spyølßdšg fe: %s\n", 
$fe
);

1023 
´št_r
 (
¥yc_lßd_fe
 (
$fe
));

	@application/third_party/CIUnit/libraries/spyc/tests/DumpTest.php

1 <?
php


3 
»quœe_Úû
 ("../spyc.php");

5 şas 
	cDumpTe¡
 
ex‹nds
 
	mPHPUn™_F¿mewÜk_Te¡Ca£
 {

7 
´iv©e
 
	m$fes_to_‹¡
 = 
¬¿y
();

9 
public
 
funùiÚ
 
	$£tUp
() {

10 
$this
->
fes_to_‹¡
 = 
	`¬¿y
 ('../spyc.yaml', 'failing1.yaml', 'indent_1.yaml', 'quotes.yaml');

13 
public
 
funùiÚ
 
	$‹¡Dump
() {

14 
	`fÜ—ch
 (
$this
->
fes_to_‹¡
 
as
 
$fe
) {

15 
$yaml
 = 
	`¥yc_lßd
(
	`fe_g‘_cÚ‹Ás
(
$fe
));

16 
$dump
 = 
Spyc
::
	`YAMLDump
 (
$yaml
);

17 
$yaml_aá”_dump
 = 
Spyc
::
	`YAMLLßd
 (
$dump
);

18 
$this
->
	`as£¹Equ®s
 (
$yaml
, 
$yaml_aá”_dump
);

20 
	}
}

22 
public
 
funùiÚ
 
	$‹¡DumpW™hQuÙes
() {

23 
$Spyc
 = 
Ãw
 
	`Spyc
();

24 
$Spyc
->
£‰šg_dump_fÜû_quÙes
 = 
Œue
;

25 
	`fÜ—ch
 (
$this
->
fes_to_‹¡
 
as
 
$fe
) {

26 
$yaml
 = 
$Spyc
->
	`lßd
(
	`fe_g‘_cÚ‹Ás
(
$fe
));

27 
$dump
 = 
$Spyc
->
	`dump
 (
$yaml
);

28 
$yaml_aá”_dump
 = 
Spyc
::
	`YAMLLßd
 (
$dump
);

29 
$this
->
	`as£¹Equ®s
 (
$yaml
, 
$yaml_aá”_dump
);

31 
	}
}

33 
public
 
funùiÚ
 
	$‹¡DumpA¼ays
() {

34 
$dump
 = 
Spyc
::
	`YAMLDump
(
	`¬¿y
 ('item1', 'item2', 'item3'));

35 
$awa™šg
 = "---\n- item1\n- item2\n- item3\n";

36 
$this
->
	`as£¹Equ®s
 (
$awa™šg
, 
$dump
);

37 
	}
}

39 
public
 
funùiÚ
 
	$‹¡DumpNum”ics
() {

40 
$dump
 = 
Spyc
::
	`YAMLDump
(
	`¬¿y
 ('404', '405', '500'));

41 
$awa™šg
 = "---\n- 404\n- 405\n- 500\n";

42 
$this
->
	`as£¹Equ®s
 (
$awa™šg
, 
$dump
);

43 
	}
}

45 
public
 
funùiÚ
 
	$‹¡DumpA¡”isks
() {

46 
$dump
 = 
Spyc
::
	`YAMLDump
(
	`¬¿y
 ('*'));

47 
$awa™šg
 = "---\n- '*'\n";

48 
$this
->
	`as£¹Equ®s
 (
$awa™šg
, 
$dump
);

49 
	}
}

52 
public
 
funùiÚ
 
	$‹¡Em±y
() {

53 
$dump
 = 
Spyc
::
	`YAMLDump
(
	`¬¿y
("foo" =>‡rray()));

54 
$awa™šg
 = "---\nfoo: [ ]\n";

55 
$this
->
	`as£¹Equ®s
 (
$awa™šg
, 
$dump
);

56 
	}
}

	@application/third_party/CIUnit/libraries/spyc/tests/IndentTest.php

1 <?
php


3 
»quœe_Úû
 ("../spyc.php");

5 şas 
	cInd’tTe¡
 
ex‹nds
 
	mPHPUn™_F¿mewÜk_Te¡Ca£
 {

7 
´Ùeùed
 
	m$Y
;

9 
´Ùeùed
 
funùiÚ
 
	$£tUp
() {

10 
$this
->
Y
 = 
Spyc
::
	`YAMLLßd
("indent_1.yaml");

13 
public
 
funùiÚ
 
	$‹¡Ind’t_1
() {

14 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
 ('chd_1' => 2, 'chd_2' => 0, 'chd_3' => 1), $this->
Y
['root']);

15 
	}
}

17 
public
 
funùiÚ
 
	$‹¡Ind’t_2
() {

18 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
 ('chd_1' => 1, 'chd_2' => 2), $this->
Y
['root2']);

19 
	}
}

21 
public
 
funùiÚ
 
	$‹¡Ind’t_3
() {

22 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
 (¬¿y ('»sŞutiÚs' =>‡¼ay (1024 => 768, 1920 => 1200), '´oduûr' => 'Nec')), $this->
Y
['display']);

23 
	}
}

25 
public
 
funùiÚ
 
	$‹¡Ind’t_4
() {

26 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
 (

27 
	`¬¿y
 ('resolutions' =>‡rray (1024 => 768)),

28 
	`¬¿y
 ('resolutions' =>‡rray (1920 => 1200)),

29 ), 
$this
->
Y
['displays']);

30 
	}
}

32 
public
 
funùiÚ
 
	$‹¡Ind’t_5
() {

33 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
 (array (

36 'h—d£ts_afãùed' => 
	`¬¿y
 (

37 
	`¬¿y
 (

38 'pÜts' => 
	`¬¿y
 (0),

42 'sw™ch_funùiÚ' => 
	`¬¿y
 (

43 'ics_±t' => 
Œue


45 )), 
$this
->
Y
['nested_hashes_and_seqs']);

46 
	}
}

48 
public
 
funùiÚ
 
	$‹¡Ind’t_6
() {

49 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
 (

50 'h' => 
	`¬¿y
 (

51 
	`¬¿y
 ('a' => 'b', 'a1' => 'b1'),

52 
	`¬¿y
 ('c' => 'd')

54 ), 
$this
->
Y
['easier_nest']);

55 
	}
}

	@application/third_party/CIUnit/libraries/spyc/tests/ParseTest.php

1 <?
php


3 
	g»quœe_Úû
 'PHPUnit/Framework.php';

4 
»quœe_Úû
 ("../spyc.php");

6 şas 
	cP¬£Te¡
 
ex‹nds
 
	mPHPUn™_F¿mewÜk_Te¡Ca£
 {

8 
´Ùeùed
 
	m$yaml
;

10 
´Ùeùed
 
funùiÚ
 
	$£tUp
() {

11 
$this
->
yaml
 = 
	`¥yc_lßd_fe
('../spyc.yaml');

14 
public
 
funùiÚ
 
	$‹¡M”geHashKeys
() {

15 
$Ex³ùed
 = 
	`¬¿y
 (

16 
	`¬¿y
 ('step' =>‡rray('instrument' => 'Lasik 2000', 'pulseEnergy' => 5.4, 'pulseDuration' => 12, 'repetition' => 1000, 'spotSize' => '1mm')),

17 
	`¬¿y
 ('step' =>‡rray('instrument' => 'Lasik 2000', 'pulseEnergy' => 5.4, 'pulseDuration' => 12, 'repetition' => 1000, 'spotSize' => '2mm')),

19 
$Aùu®
 = 
	`¥yc_lßd_fe
 ('indent_1.yaml');

20 
$this
->
	`as£¹Equ®s
 (
$Ex³ùed
, 
$Aùu®
['steps']);

21 
	}
}

23 
public
 
funùiÚ
 
	$‹¡D—thMasks
() {

24 
$Ex³ùed
 = 
	`¬¿y
 ('sad' => 2, 'magnificent' => 4);

25 
$Aùu®
 = 
	`¥yc_lßd_fe
 ('indent_1.yaml');

26 
$this
->
	`as£¹Equ®s
 (
$Ex³ùed
, 
$Aùu®
['death masks‡re']);

27 
	}
}

29 
public
 
funùiÚ
 
	$‹¡DevDb
() {

30 
$Ex³ùed
 = 
	`¬¿y
 ('adapter' => 'mysql', 'host' => 'localhost', 'database' => 'rails_dev');

31 
$Aùu®
 = 
	`¥yc_lßd_fe
 ('indent_1.yaml');

32 
$this
->
	`as£¹Equ®s
 (
$Ex³ùed
, 
$Aùu®
['development']);

33 
	}
}

35 
public
 
funùiÚ
 
	$‹¡Num”icKey
() {

36 
$this
->
	`as£¹Equ®s
 ("Ooo,‡‚um”iøkey!", $this->
yaml
[1040]);

37 
	}
}

39 
public
 
funùiÚ
 
	$‹¡M­pšgsSŒšg
() {

40 
$this
->
	`as£¹Equ®s
 ("AnyÚe' Çme,„—Îy.", $this->
yaml
['String']);

41 
	}
}

43 
public
 
funùiÚ
 
	$‹¡M­pšgsIÁ
() {

44 
$this
->
	`as£¹Same
 (13, $this->
yaml
['Int']);

45 
	}
}

47 
public
 
funùiÚ
 
	$‹¡M­pšgsBoŞ—nTrue
() {

48 
$this
->
	`as£¹Same
 (
Œue
, $this->
yaml
['True']);

49 
	}
}

51 
public
 
funùiÚ
 
	$‹¡M­pšgsBoŞ—nF®£
() {

52 
$this
->
	`as£¹Same
 (
çl£
, $this->
yaml
['False']);

53 
	}
}

55 
public
 
funùiÚ
 
	$‹¡M­pšgsZ”o
() {

56 
$this
->
	`as£¹Same
 (0, $this->
yaml
['Zero']);

57 
	}
}

59 
public
 
funùiÚ
 
	$‹¡M­pšgsNuÎ
() {

60 
$this
->
	`as£¹Same
 (
nuÎ
, $this->
yaml
['Null']);

61 
	}
}

63 
public
 
funùiÚ
 
	$‹¡M­pšgsFlßt
() {

64 
$this
->
	`as£¹Same
 (5.34, $this->
yaml
['Float']);

65 
	}
}

67 
public
 
funùiÚ
 
	$‹¡Seq0
() {

68 
$this
->
	`as£¹Equ®s
 ("PHP CÏss", $this->
yaml
[0]);

69 
	}
}

71 
public
 
funùiÚ
 
	$‹¡Seq1
() {

72 
$this
->
	`as£¹Equ®s
 ("BasiøYAML Lßd”", $this->
yaml
[1]);

73 
	}
}

75 
public
 
funùiÚ
 
	$‹¡Seq2
() {

76 
$this
->
	`as£¹Equ®s
 ("V”y BasiøYAML Dum³r", $this->
yaml
[2]);

77 
	}
}

79 
public
 
funùiÚ
 
	$‹¡Seq3
() {

80 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
("YAML is soƒasyo†earn.",

81 "You¸cÚfig fe wÈÃv” bth§me."), 
$this
->
yaml
[3]);

82 
	}
}

84 
public
 
funùiÚ
 
	$‹¡SeqM­
() {

85 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
("cpu" => "1.5ghz", "ram" => "1 gig",

86 "os" => "o x 10.4.1"), 
$this
->
yaml
[4]);

87 
	}
}

89 
public
 
funùiÚ
 
	$‹¡M­³dSequ’û
() {

90 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
("yaml.Üg", "php.Ãt"), $this->
yaml
['domains']);

91 
	}
}

93 
public
 
funùiÚ
 
	$‹¡AnÙh”Sequ’û
() {

94 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
("program" => "Adium", "platform" => "OS X",

95 "ty³" => "Ch© Cl›Á"), 
$this
->
yaml
[5]);

96 
	}
}

98 
public
 
funùiÚ
 
	$‹¡FŞdedBlock
() {

99 
$this
->
	`as£¹Equ®s
 ("Th”i¢'ˆªyimfÜ you¸Œicks!\nDØyou und”¡ªd?", $this->
yaml
['noime']);

100 
	}
}

102 
public
 
funùiÚ
 
	$‹¡L™”®AsM­³d
() {

103 
$this
->
	`as£¹Equ®s
 ("Th”i nÙhšg buˆtime\nfÜ you¸Œicks.", $this->
yaml
['someime']);

104 
	}
}

106 
public
 
funùiÚ
 
	$‹¡C¿zy
() {

107 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
(‡rray("name" => "spartan", "notes" =>

108 
	`¬¿y
( "Needso be backed up",

110 "ty³" => "mysql" )), 
$this
->
yaml
['databases']);

111 
	}
}

113 
public
 
funùiÚ
 
	$‹¡CŞÚs
() {

114 
$this
->
	`as£¹Equ®s
 ("like", $this->
yaml
["if: you'd"]);

115 
	}
}

117 
public
 
funùiÚ
 
	$‹¡IÆše
() {

118 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
("OÃ", "Two", "Th»e", "Four"), $this->
yaml
[6]);

119 
	}
}

121 
public
 
funùiÚ
 
	$‹¡Ne¡edIÆše
() {

122 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
("OÃ",‡¼ay("Two", "And", "Th»e"), "Four", "Five"), $this->
yaml
[7]);

123 
	}
}

125 
public
 
funùiÚ
 
	$‹¡Ne¡edNe¡edIÆše
() {

126 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
( "This",‡rray("Is", "Getting",‡rray("Ridiculous", "Guys")),

127 "S”iou¦y", 
	`¬¿y
("Show", "M”cy")), 
$this
->
yaml
[8]);

128 
	}
}

130 
public
 
funùiÚ
 
	$‹¡IÆšeM­pšgs
() {

131 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
("Çme" => "chris", "age" => "young", "b¿nd" => "lucky sŒike"), $this->
yaml
[9]);

132 
	}
}

134 
public
 
funùiÚ
 
	$‹¡Ne¡edIÆšeM­pšgs
() {

135 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
("name" => "mark", "age" => "olderhan chris",

136 "b¿nd" => 
	`¬¿y
("m¬lbÜo", "lucky sŒike")), 
$this
->
yaml
[10]);

137 
	}
}

139 
public
 
funùiÚ
 
	$‹¡Reã»nûs
() {

140 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
('P”l', 'PythÚ', 'PHP', 'Ruby'), $this->
yaml
['dynamic†anguages']);

141 
	}
}

143 
public
 
funùiÚ
 
	$‹¡Reã»nûs2
() {

144 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
('C/C++', 'Java'), $this->
yaml
['compiled†anguages']);

145 
	}
}

147 
public
 
funùiÚ
 
	$‹¡Reã»nûs3
() {

148 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
(

149 
	`¬¿y
('Perl', 'Python', 'PHP', 'Ruby'),

150 
	`¬¿y
('C/C++', 'Java')

151 ), 
$this
->
yaml
['all†anguages']);

152 
	}
}

154 
public
 
funùiÚ
 
	$‹¡Esÿ³dQuÙes
() {

155 
$this
->
	`as£¹Equ®s
 ("you know,hi shouldn'ˆwÜk. buˆ™ dÛs.", $this->
yaml
[11]);

156 
	}
}

158 
public
 
funùiÚ
 
	$‹¡Esÿ³dQuÙes_2
() {

159 
$this
->
	`as£¹Equ®s
 ( "th©' my v®ue.", $this->
yaml
[12]);

160 
	}
}

162 
public
 
funùiÚ
 
	$‹¡Esÿ³dQuÙes_3
() {

163 
$this
->
	`as£¹Equ®s
 ("agaš,h©' my v®ue.", $this->
yaml
[13]);

164 
	}
}

166 
public
 
funùiÚ
 
	$‹¡QuÙes
() {

167 
$this
->
	`as£¹Equ®s
 ("h”e' tØ\"quÙes\", boss.", $this->
yaml
[14]);

168 
	}
}

170 
public
 
funùiÚ
 
	$‹¡QuÙeSequ’û
() {

171 
$this
->
	`as£¹Equ®s
 ( 
	`¬¿y
Ğ'Çme' => "Foo, B¬'s", 'age' => 20), $this->
yaml
[15]);

172 
	}
}

174 
public
 
funùiÚ
 
	$‹¡ShÜtSequ’û
() {

175 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
Ğ0 => "a", 1 =>‡¼ay (0 => 1, 1 => 2), 2 => "b"), $this->
yaml
[16]);

176 
	}
}

178 
public
 
funùiÚ
 
	$‹¡Hash_1
() {

179 
$this
->
	`as£¹Equ®s
 ("Hash", $this->
yaml
['hash_1']);

180 
	}
}

182 
public
 
funùiÚ
 
	$‹¡Hash_2
() {

183 
$this
->
	`as£¹Equ®s
 ('Hash #ªd‡ comm’t', $this->
yaml
['hash_2']);

184 
	}
}

186 
public
 
funùiÚ
 
	$‹¡Hash_3
() {

187 
$this
->
	`as£¹Equ®s
 ('Hash (#èÿÀ­³¬ iÀkeyoo', $this->
yaml
['hash#3']);

188 
	}
}

190 
public
 
funùiÚ
 
	$‹¡Endloİ
() {

191 
$this
->
	`as£¹Equ®s
 ("DÛ thi lššh’d ind“d makSpyøgØtØª infš™loİ?", $this->
yaml
['endloop']);

192 
	}
}

194 
public
 
funùiÚ
 
	$‹¡R—ÎyL¬geNumb”
() {

195 
$this
->
	`as£¹Equ®s
 ('115792089237316195423570985008687907853269984665640564039457584007913129639936', $this->
yaml
['a_really_large_number']);

196 
	}
}

198 
public
 
funùiÚ
 
	$‹¡FlßtW™hZ”os
() {

199 
$this
->
	`as£¹Same
 ('1.0', $this->
yaml
['float_test']);

200 
	}
}

202 
public
 
funùiÚ
 
	$‹¡FlßtW™hQuÙes
() {

203 
$this
->
	`as£¹Same
 ('1.0', $this->
yaml
['float_test_with_quotes']);

204 
	}
}

206 
public
 
funùiÚ
 
	$‹¡FlßtInv”£
() {

207 
$this
->
	`as£¹Equ®s
 ('001', $this->
yaml
['float_inverse_test']);

208 
	}
}

210 
public
 
funùiÚ
 
	$‹¡IÁA¼ay
() {

211 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
 (1, 2, 3), $this->
yaml
['int‡rray']);

212 
	}
}

214 
public
 
funùiÚ
 
	$‹¡A¼ayOnSev”®Lšes
() {

215 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
 (0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19), $this->
yaml
['array on several†ines']);

216 
	}
}

218 
public
 
funùiÚ
 
	$‹¡mÜeLessKey
() {

219 
$this
->
	`as£¹Equ®s
 ('<v®ue>', $this->
yaml
['morelesskey']);

220 
	}
}

222 
public
 
funùiÚ
 
	$‹¡A¼ayOfZ”o
() {

223 
$this
->
	`as£¹Same
 (
	`¬¿y
(0), $this->
yaml
['array_of_zero']);

224 
	}
}

226 
public
 
funùiÚ
 
	$‹¡Sİhi¡iÿ‹dA¼ayOfZ”o
() {

227 
$this
->
	`as£¹Same
 (
	`¬¿y
('rx' =>‡¼ay ('tx' =>‡¼ay (0))), $this->
yaml
['sophisticated_array_of_zero']);

228 
	}
}

230 
public
 
funùiÚ
 
	$‹¡Sw™ches
() {

231 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
 (¬¿y ('row' => 0, 'cŞ' => 0, 'func' =>‡¼ay ('tx' =>‡¼ay(0, 1)))), $this->
yaml
['switches']);

232 
	}
}

234 
public
 
funùiÚ
 
	$‹¡Em±ySequ’û
() {

235 
$this
->
	`as£¹Same
 (
	`¬¿y
(), $this->
yaml
['empty_sequence']);

236 
	}
}

238 
public
 
funùiÚ
 
	$‹¡Em±yHash
() {

239 
$this
->
	`as£¹Same
 (
	`¬¿y
(), $this->
yaml
['empty_hash']);

240 
	}
}

242 
public
 
funùiÚ
 
	$‹¡Em±ykey
() {

243 
$this
->
	`as£¹Same
 (
	`¬¿y
('' =>‡¼ay ('key' => 'v®ue')), $this->
yaml
['empty_key']);

244 
	}
}

246 
public
 
funùiÚ
 
	$‹¡MuÉšes
() {

247 
$this
->
	`as£¹Same
 (
	`¬¿y
×¼ay('ty³' => 'SomeI‹m', 'v®ues' =>‡¼ay ('bÏh', 'bÏh', 'bÏh', 'bÏh'), 'šts' =>‡¼ay(2, 54, 12, 2143))), $this->
yaml
['multiline_items']);

248 
	}
}

250 
public
 
funùiÚ
 
	$‹¡MªyNewlšes
() {

251 
$this
->
	`as£¹Same
 ('A quick

252 
fox


255 
jum³d


256 
ov”


262 
a
 
Ïzy


266 
dog
', $this->yaml['
mªy_lšes
']);

267 
	}
}

269 
public
 
funùiÚ
 
	$‹¡W”‹
() {

270 
$this
->
	`as£¹Same
 (
	`¬¿y
 ('1' => 'numm” 1', '0' => 'Stund0'), $this->
yaml
['werte']);

271 
	}
}

281 
public
 
funùiÚ
 
	$‹¡CŞÚsInKeys
() {

282 
$this
->
	`as£¹Same
 (
	`¬¿y
 (1000), $this->
yaml
['a:1']);

283 
	}
}

285 
public
 
funùiÚ
 
	$‹¡CŞÚsInKeys2
() {

286 
$this
->
	`as£¹Same
 (
	`¬¿y
 (2000), $this->
yaml
['a:2']);

287 
	}
}

289 
public
 
funùiÚ
 
	$‹¡S³cŸlCh¬aù”s
() {

290 
$this
->
	`as£¹Same
 ('[{]]{{]]', $this->
yaml
['special_characters']);

291 
	}
}

293 
public
 
funùiÚ
 
	$‹¡AngËQuÙes
() {

294 
$QuÙes
 = 
Spyc
::
	`YAMLLßd
('quotes.yaml');

295 
$this
->
	`as£¹Equ®s
 (
	`¬¿y
 ('html_tags' =>‡rray ('<br>', '<p>'), 'html_content' =>‡rray ('<p>hello world</p>', 'hello<br>world'), 'text_content' =>‡rray ('hello world')),

296 
$QuÙes
);

297 
	}
}

299 
public
 
funùiÚ
 
	$‹¡FašgCŞÚs
() {

300 
$Fašg
 = 
Spyc
::
	`YAMLLßd
('failing1.yaml');

301 
$this
->
	`as£¹Same
 (
	`¬¿y
 ('MyObject' =>‡rray ('Prop1' =>‡rray ('key1:val1'))),

302 
$Fašg
);

303 
	}
}

	@application/views/mobile/v_add_group.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="add_group">

3 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

4 <
h1
>èœ—ä¸´å®¢</h1>

5 <
a
 
d©a
-
»l
="back" d©a-
icÚ
="arrow-l">è¿”å›</a>

6 </
div
><!-- /
h—d”
 -->

8 <
div
 
d©a
-
rŞe
="content">

9 <
fÜm
 
aùiÚ
="<?=ba£_u¾("
mobe
/
c_·ge
/
add_gou½_subm™
"); ?>" 
m‘hod
="po¡" 
d©a
-
ajax
="false" >

10 <
h3
>èœ—ç¾¤åç§°</h3>

11 <
šput
 
id
="group_Çme" 
Çme
="group_Çme" 
ty³
="‹xt" 
v®ue
="" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨èœ—ç¾¤åç§°"/>

12 <
h3
>èœ—ç¾¤ä»‹ç»</h3>

13 <
šput
 
id
="group_de¡rtiÚ" 
Çme
="group_de¡rtiÚ" 
ty³
="‹xt" 
v®ue
="" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨èœ—ç¾¤çš„ä»‹ç»"/>

14 <
h3
>èœ—ç¾¤ç±»åˆ«</h3>

15 <
£Ëù
 
Çme
="group_ÿ‹gÜy" 
id
="group_ÿ‹gÜy" 
d©a
-
Çtive
-
m’u
="false">

16 <
İtiÚ
>é€‰æ‹©èœ—ç¾¤ç±»åˆ«</option>

17 <
İtiÚ
 
v®ue
="ç­çº§">ç­çº§</option>

18 </
£Ëù
>

19 <
šput
 
ty³
="subm™" 
v®ue
="åˆ›å»º"/>

20 </
fÜm
>

21 </
div
>

22 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_add_place.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="add_place" >

3 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

4 <
h1
>èœ—ä¸´å®¢</h1>

5 <
a
 
d©a
-
»l
="back" d©a-
icÚ
="arrow-l">è¿”å›</a>

6 </
div
><!-- /
h—d”
 -->

8 <
div
 
d©a
-
rŞe
="content">

9 <
fÜm
 
aùiÚ
="<?=ba£_u¾("
mobe
/
c_·ge
/
add_¶aû_subm™
"); ?>" 
m‘hod
="po¡" 
d©a
-
ajax
="false" >

10 <
h3
>èšç‚¹åç§°</h3>

11 <
šput
 
id
="¶aû_Çme" 
Çme
="¶aû_Çme" 
ty³
="‹xt" 
v®ue
="" 
¶aûhŞd”
="è¯·è¾“å…¥èšç‚¹åç§°"/>

12 <
h3
>èšç‚¹ä»‹ç»</h3>

13 <
šput
 
id
="¶aû_de¡rtiÚ" 
Çme
="¶aû_de¡rtiÚ" 
ty³
="‹xt" 
v®ue
="" 
¶aûhŞd”
="è¯·è¾“å…¥èšç‚¹çš„ä»‹ç»"/>

14 <
h3
>èšç‚¹ç±»åˆ«</h3>

15 <
£Ëù
 
Çme
="¶aû_ÿ‹gÜy" 
id
="¶aû_ÿ‹gÜy" 
d©a
-
Çtive
-
m’u
="false">

16 <
İtiÚ
>é€‰æ‹©ç±»åˆ«</option>

17 <
İtiÚ
 
v®ue
="æ•™å®¤">æ•™å®¤</option>

18 <
İtiÚ
 
v®ue
="å®éªŒå®¤">å®éªŒå®¤</option>

19 </
£Ëù
>

20 <
šput
 
ty³
="subm™" 
v®ue
="åˆ›å»º" />

21 </
fÜm
>

22 </
div
>

23 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_error_dialog.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="”rÜ_dŸlog" 
d©a
-
theme
="f">

2 <
div
 
d©a
-
rŞe
="h—d”" d©a-
theme
="f">

3 <
h1
><?
php
 
echo
 
$”rÜ_t™Ë
;?></
	gh1
>

4 </
	gdiv
>

6 <
div
 
	gd©a
-
	grŞe
="content">

7 <
h3
><?=
$”rÜ_mes§ge
;?></
	gh3
>

8 <
a
 
	gd©a
-
	grŞe
="bu‰Ú" 
d©a
-
»l
="back">è¿”å›</a>

9 </
div
>

10 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_footer.php

1 </
	gbody
>

2 </
	ghtml
>

	@application/views/mobile/v_header.php

1 <!
DOCTYPE
 
	ghtml
>

2 <
	ghtml
>

3 <
	gh—d
>

4 <
m‘a
 
	gch¬£t
="utf-8" />

5 <
t™Ë
>èœ—ä¸´å®¢</title>

6 <
m‘a
 
Çme
="v›wpÜt" 
cÚ‹Á
="width=device-width, initial-scale=1">

7 <
lšk
 
»l
="¡yËsh“t" 
h»f
="<?=ba£_u¾("
css
/
jqu”y
.
mobe
-1.0.1.
mš
.css");?>" />

8 <
lšk
 
»l
="¡yËsh“t" 
h»f
="<?=ba£_u¾("
css
/
jqm
-
docs
.css");?>"/>

9 <
süt
 
¤c
="<?=base_url('js/jquery.js');?>"></script>

10 <
süt
 
¤c
="<?=base_url('js/jquery.mobile.themeswitcher.js');?>"></script>

11 <
süt
 
¤c
="<?=base_url('js/jqm-docs.js');?>"></script>

12 <
süt
 
ty³
="text/javascript">

13 
$
(
docum’t
).
bšd
("mobeš™", 
	$funùiÚ
() {

14 
$
.
mobe
.
ajaxEÇbËd
=
çl£
;

15 
$
.
lškBšdšgEÇbËd
=
çl£
;

16 
$
.
mobe
.
lßdšgMes§ge
 = "æ•°æ®åŠªåŠ›åŠ è½½ä¸­â€¦â€¦";

17 
$
.
mobe
.
·geLßdE¼ÜMes§ge
 = "å¾ˆæŠ±æ­‰ï¼Œè²Œä¼¼å‡ºé”™äº†ï¼";

18 
	}
});

19 </
	gsüt
>

20 <
süt
 
	g¤c
="<?=base_url('js/jquery.mobile-1.0.1.min.js');?>"></script>

21 </
h—d
>

22 <
body
>

	@application/views/mobile/v_input_dialog.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
='post_weibo'>

3 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

4 <
h1
><?=
$šput_t™Ë
;?></
	gh1
>

5 <
a
 
	gd©a
-
	g»l
="back" 
d©a
-
icÚ
="arrow-l">è¿”å›</a>

6 </
div
><!-- /
h—d”
 -->

8 <
div
 
d©a
-
rŞe
="content">

9 <
fÜm
 
aùiÚ
="<?=$šput_aùiÚ_u¾;?>" 
m‘hod
="po¡" 
d©a
-
ajax
="false" >

10 <
‹x»a
 
rows
="15" 
Çme
="šput_cÚ‹Á" 
id
="šput_cÚ‹Á" 
¶aûhŞd”
=<?=
$šput_´om±
?> 
¡yË
="width:99%; "></textarea>

11 <
šput
 
ty³
="subm™" 
v®ue
="æäº¤"/>

12 </
fÜm
>

13 </
div
>

14 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_login.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
şass
="ty³-š‹riÜ" 
id
="logš" 
d©a
-
theme
="f">

3 <
div
 
d©a
-
rŞe
="h—d”" d©a-
theme
="f" >

4 <
h1
>èœ—ä¸´å®¢</h1>

5 </
div
><!-- /
h—d”
 -->

7 <
div
 
d©a
-
rŞe
="content" >

8 <
div
 
şass
="content-secondary" >

9 <
fÜm
 
aùiÚ
="<?=ba£_u¾("
mobe
/
c_logš
/
logš_subm™
"); ?>" 
m‘hod
="po¡" 
d©a
-
ajax
="çl£" d©a-
theme
="f">

10 <
ul
 
d©a
-
rŞe
="listview">

11 <
li
 
d©a
-
rŞe
="list-divider">ç™»é™†</li>

12 <
li
>é‚®ç®±</li>

13 <
li
><
šput
 
id
="logš_ema" 
Çme
="logš_ema" 
ty³
="ema" 
v®ue
="" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨çš„é‚®ç®±"/></li>

14 <
li
>å¯†ç </li>

15 <
li
><
šput
 
id
="logš_·sswÜd" 
Çme
="logš_·sswÜd" 
ty³
="·sswÜd" 
v®ue
="" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨çš„å¯†ç "/></li>

16 <
li
>

17 <
div
 
şass
="ui-grid-a">

18 <
div
 
şass
="ui-block-a"><
šput
 
ty³
="subm™" 
v®ue
="æäº¤"/></div>

19 <
div
 
şass
="ui-block-b"> <
a
 
h»f
="<?=ba£_u¾("
mobe
/
c_»gi¡”
"); ?>" 
d©a
-
rŞe
="button">æ³¨å†Œ</a> </div>

20 </
div
>

21 </
li
>

22 <
li
 
d©a
-
rŞe
="list-divider">æœ€è¿‘æ³¨å†Œç”¨æˆ·</li>

23 <?
php
 
	$fÜ—ch
(
$Ï‹¡_u£r_d©a
 
as
 
$u£r_d©a
):?>

24 <?
php


25 
echo
 "<li data-theme='c'>";

26 
echo
 "<img src=".
$u£r_d©a
['user_avatar']." />";

27 
echo
 "<h3>".
$u£r_d©a
['display_name']."</h3>";

28 
echo
 "<¥ª cÏss='ui-li-couÁ'>".
	`time¥ª
(
$u£r_d©a
['ü—‹_time'],
	`now
()).'å‰'."</span>";

29 
echo
 "</li>";

31 <?
php
 
’dfÜ—ch
;?>

33 </
ul
>

34 </
fÜm
>

35 </
div
>

37 <
div
 
şass
="cÚ‹Á-´im¬y" 
¡yË
="text-align:center;">

38 <
h1
>
WlškE
</h1>

39 <
p
>
WlškE
ï¼ˆèœ—ä¸´å®¢ï¼‰å¹³å°ï¼Œä»¥è¿‘è·ç¦»æ— çº¿é€šä¿¡æŠ€æœ¯ä¸ºåŸºç¡€ï¼Œä¸ºç”¨æˆ·ï¼ˆä»¥ç»å¸¸è¿›è¡Œç¾¤ä½“æ´»åŠ¨çš„äººç¾¤ä¸ºä¸»ï¼‰æ‰“é€ ä»¥ä¸ªäººä¸ºä¸­å¿ƒã€åŸºäºçœŸå®è¿‘è·ç¦»å‘ç°å’Œäº¤äº’çš„æœåŠ¡ï¼Œå¸®åŠ©ç”¨æˆ·æŒæ¡èº«è¾¹äººå’Œç‰©çš„çŠ¶æ€åŠå†…åœ¨ä¿¡æ¯ï¼Œå®ç°è¿‘è·ç¦»äººä¸äººã€äººä¸ç‰©äº¤äº’ã€‚</p>

40 <
img
 
¤c
="<?=ba£_u¾("
images
/
logš_im
.
²g
")?>" />

41 </
div
>

42 </
div
>

43 <
div
 
d©a
-
rŞe
="foÙ”" 
şass
="foÙ”-docs" d©a-
theme
="c">

44 <
p
>&
cİy
; 2011-2012 
WlškE
</p>

45 </
div
>

46 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_page_bak.php

1 <
süt
 
	gty³
="text/javascript">

2 
$
(
docum’t
).
»ady
(
	$funùiÚ
() {

4 
	`$
("#weibo_subm™").
	`bšd
("şick",
	`funùiÚ
 () {

5 if(
	`$
('#weibo_cÚ‹Á').
	`v®
()!=""){

6 
$
.
mobe
.
	`·geLßdšg
();

7 
$
.
	`po¡
("<?ph°echØba£_u¾("
mobe
/
c_wlške
/
wlške_ajax
/");?>",

9 
aùiÚ
: "post_weibo",

10 
tok’
: "<?phpƒcho $user_data['token'];?>",

11 
weibo_cÚ‹Á
: 
	`$
('#weibo_cÚ‹Á').
	`v®
()

13 
	`funùiÚ
(
d©a
){

14 if(
d©a
.
	`sub¡r
(0,2)=="no"){}

16 
$
.
mobe
.
	`chªgePage
("#post_success_dialog");

17 
	`$
('#weibo_cÚ‹Á').
	`html
("");

20 
$
.
mobe
.
	`·geLßdšg
(
Œue
);

23 
	`$
("#g‘_Şd_public_weibo").
	`bšd
("şick",
	`funùiÚ
 () {

24 
$
.
mobe
.
	`·geLßdšg
();

25 
$
.
	`po¡
("<?ph°echØba£_u¾("
mobe
/
c_wlške
/
wlške_ajax
/");?>",

27 
aùiÚ
: "get_public_weibo",

28 
tok’
: "<?phpƒcho $user_data['token'];?>",

29 
f‹r
: "old",

30 
Ï¡_ãed_id
: 
	`$
("#public_li¡_v›w†i:Ï¡-chd").
	`©Œ
("id").
	`sub¡r
(12)

32 
	`funùiÚ
(
d©a
){

33 if(
d©a
.
	`sub¡r
(0,2)=="no"){}

35 
	`$
("#public_li¡_v›w").
	`­³nd
(
d©a
);

36 
	`$
('#public_li¡_v›w').
	`li¡v›w
('refresh');

39 
$
.
mobe
.
	`·geLßdšg
(
Œue
);

41 
	`$
("#g‘_Ãw_public_weibo").
	`bšd
("şick",
	`funùiÚ
 () {

42 
$
.
mobe
.
	`·geLßdšg
();

43 
$
.
	`po¡
("<?ph°echØba£_u¾("
mobe
/
c_wlške
/
wlške_ajax
/");?>",

45 
aùiÚ
: "get_public_weibo",

46 
tok’
: "<?phpƒcho $user_data['token'];?>",

47 
f‹r
: "new",

48 
Ï¡_ãed_id
: 
	`$
("#public_li¡_v›w†i:Áh-chd(3)").
	`©Œ
("id").
	`sub¡r
(12)

50 
	`funùiÚ
(
d©a
){

51 if(
d©a
.
	`sub¡r
(0,2)=="no"){}

53 
	`$
("#tİ_of_Ãw_public").
	`aá”
(
d©a
);

54 
	`$
('#public_li¡_v›w').
	`li¡v›w
('refresh');

57 
$
.
mobe
.
	`·geLßdšg
(
Œue
);

59 
	}
});

60 </
	gsüt
>

61 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="page_weibo">

62 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed">

63 <
h1
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh1
>

64 <
a
 
	gh»f
="#po¡_weibo" 
»l
="external">å‘çŠ¶æ€</a>

65 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
();?> 
	g»l
="ex‹º®" 
d©a
-
rŞe
="bu‰Ú" d©a-
icÚ
="»äesh" d©a-
icÚpos
="notext"></a>

66 <
div
 
d©a
-
rŞe
="navbar">

67 <
ul
>

68 <
li
><
a
 
h»f
="#·ge_´iv©e" 
d©a
-
Œªs™iÚ
="fade">ä¸ªäºº</a></li>

69 <
li
><
a
 
h»f
="#·ge_weibo" 
şass
="ui-bŠ-aùivui-¡©e-³rsi¡" 
d©a
-
Œªs™iÚ
="fade">å¾®åš</a></li>

70 <
li
><
a
 
h»f
="#·ge_ä›nd" 
d©a
-
Œªs™iÚ
="fade">å¥½å‹</a></li>

71 <
li
><
a
 
h»f
="#·ge_group" 
d©a
-
Œªs™iÚ
="fade">ç¾¤ç»„</a></li>

72 </
ul
>

73 </
div
><!-- /
Çvb¬
 -->

74 </
div
><!-- /
h—d”
 -->

76 <
div
 
d©a
-
rŞe
="content">

77 <
ul
 
d©a
-
rŞe
="li¡v›w" 
id
="public_li¡_v›w" d©a-
theme
="c">

78 <
li
>

79 <
img
 
®t
="ä¸ªäººå¤´åƒ" 
¤c
=<?
php
 
echo
 
$u£r_d©a
['user_avatar'];?> />

80 <
	gh1
><?=
$u£r_d©a
['display_name'];?></h1>

81 </
	gli
>

82 <
li
 
	gd©a
-
	grŞe
="li¡-divid”" 
d©a
-
theme
="c" 
id
="tİ_of_Ãw_public"><
bu‰Ú
 id="get_new_public_weibo">æŸ¥çœ‹æœ€æ–°</button></li>

83 <?
php
 if(
is£t
(
$u£r_d©a
['feeds'])):?>

84 <?
php
 
fÜ—ch
(
$u£r_d©a
['ãeds'] 
as
 
$ãed
):?>

85 <
li
 
d©a
-
rŞe
="li¡-divid”" d©a-
theme
="c" 
id
="<?='public_feed_'.$feed['feed_id'];?>">

86 <
div
 
şass
="ui-grid-a">

87 <
div
 
şass
="ui-block-a" 
¡yË
="width:20%;">

88 <
img
 
height
="36" 
¤c
=<?
php
 
echo
 
$ãed
['user_avatar'];?>>

89 </
	gdiv
>

90 <
div
 
	gşass
="ui-block-b" 
¡yË
="width:80%;">

91 <?
php
 
echo
 
$ãed
['display_name'];?>

92 <
div
 
	g¡yË
="‹xt-®ign:right;"><
p
><?
php
 
echo
 
time¥ª
(
$ãed
['ü—‹_time'],
now
()).'å‰';?></
	gp
></
	gdiv
>

93 </
	gdiv
>

94 <
div
 
	gşass
="ui-block-a" 
¡yË
="width:20%;">

95 </
div
>

96 <
div
 
şass
="ui-block-b" 
¡yË
="width:80%;">

97 <?
php
 
echo
 
$ãed
['feed_content'];?>

98 </
	gdiv
>

99 <
div
 
	gşass
="ui-block-a" 
¡yË
="width:20%;">

100 </
div
>

101 <
div
 
şass
="ui-block-b" 
¡yË
="width:80%;text-align:right;">

102 <
br
/>

103 <
div
><
p
><?
php
 
echo
 "è½¬å‘ï¼š ".
$ãed
['Œª¥Úd_couÁ'];?> <?ph°
	gecho
 "è¯„è®º ï¼š".
	g$ãed
['comm’t_couÁ'];?></
	gp
></
	gdiv
>

104 </
	gdiv
>

105 </
	gdiv
>

106 </
	gli
>

107 <?
php
 
	g’dfÜ—ch
;?>

108 <?
php
 
	g’dif
;?>

109 </
	gul
>

110 <
ul
 
	gd©a
-
	grŞe
="li¡v›w"><
li
 
d©a
-
rŞe
="li¡-divid”" d©a-
theme
="c" ><
bu‰Ú
 
id
="get_old_public_weibo">æŸ¥çœ‹æ›´æ—©</button></li></ul>

111 </
div
>

112 </
div
><!-- /
·ge
 -->

114 <
div
 
d©a
-
rŞe
="·ge" 
id
="page_friend">

115 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed">

116 <
h1
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh1
>

117 <
a
 
	gh»f
="#po¡_weibo" 
»l
="external">å‘çŠ¶æ€</a>

118 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
();?> 
	g»l
="ex‹º®" 
d©a
-
rŞe
="bu‰Ú" d©a-
icÚ
="»äesh" d©a-
icÚpos
="notext"></a>

119 <
div
 
d©a
-
id
="foo1" d©a-
pos™iÚ
="fixed">

120 <
div
 
d©a
-
rŞe
="navbar">

121 <
ul
>

122 <
li
><
a
 
h»f
="#·ge_´iv©e" 
d©a
-
Œªs™iÚ
="fade">ä¸ªäºº</a></li>

123 <
li
><
a
 
h»f
="#·ge_weibo" 
d©a
-
Œªs™iÚ
="fade">å¾®åš</a></li>

124 <
li
><
a
 
h»f
="#·ge_ä›nd" 
şass
="ui-bŠ-aùivui-¡©e-³rsi¡" 
d©a
-
Œªs™iÚ
="fade">å¥½å‹</a></li>

125 <
li
><
a
 
h»f
="#·ge_group" 
d©a
-
Œªs™iÚ
="fade">ç¾¤ç»„</a></li>

126 </
ul
>

127 </
div
><!-- /
Çvb¬
 -->

128 </
div
><!-- /
foÙ”
 -->

129 </
div
><!-- /
h—d”
 -->

131 <
div
 
d©a
-
rŞe
="content">

132 <
div
 
şass
="content-primary">

133 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
f‹r
="true">

134 <?
php
 if(
is£t
(
$u£r_d©a
['all_user_datas'])):?>

135 <?
php
 
fÜ—ch
(
$u£r_d©a
['®l_u£r_d©as'] 
as
 
$v®ue
):?>

136 <
li
>

137 <
a
 
h»f
="#">

138 <
img
 
®t
="ä¸ªäººå¤´åƒ" 
¤c
=<?
php
 
echo
 
$v®ue
['user_avatar'];?> />

139 <
	gh2
><?=
$v®ue
['di¥Ïy_Çme']?></
h2
>

140 <
p
><?
php


141 if(
is£t
(
$v®ue
['latest_update']))

142 
echo
 
$v®ue
['latest_update'];

143 ?></
	gp
>

144 </
	ga
>

145 </
	gli
>

146 <?
php
 
	g’dfÜ—ch
;?>

147 <?
php
 
	g’dif
;?>

148 </
	gul
>

149 </
	gdiv
><!--/
	gcÚ‹Á
-
	g´im¬y
 -->

150 </
	gdiv
>

151 </
	gdiv
><!-- /
	g·ge
 -->

153 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="page_group">

154 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed">

155 <
h1
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh1
>

156 <
a
 
	gh»f
="#po¡_weibo" 
»l
="external">å‘çŠ¶æ€</a>

157 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
();?> 
	g»l
="ex‹º®" 
d©a
-
rŞe
="bu‰Ú" d©a-
icÚ
="»äesh" d©a-
icÚpos
="notext"></a>

158 <
div
 
d©a
-
id
="foo1" d©a-
pos™iÚ
="fixed">

159 <
div
 
d©a
-
rŞe
="navbar">

160 <
ul
>

161 <
li
><
a
 
h»f
="#·ge_´iv©e" 
d©a
-
Œªs™iÚ
="fade">ä¸ªäºº</a></li>

162 <
li
><
a
 
h»f
="#·ge_weibo" 
d©a
-
Œªs™iÚ
="fade">å¾®åš</a></li>

163 <
li
><
a
 
h»f
="#·ge_ä›nd" 
d©a
-
Œªs™iÚ
="fade">å¥½å‹</a></li>

164 <
li
><
a
 
h»f
="#·ge_group" 
şass
="ui-bŠ-aùivui-¡©e-³rsi¡" 
d©a
-
Œªs™iÚ
="fade">ç¾¤ç»„</a></li>

165 </
ul
>

166 </
div
><!-- /
Çvb¬
 -->

167 </
div
><!-- /
foÙ”
 -->

168 </
div
><!-- /
h—d”
 -->

170 <
div
 
d©a
-
rŞe
="content">

171 <
div
 
şass
="content-primary">

172 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
f‹r
="true">

173 <?
php
 if(
is£t
(
$u£r_d©a
['group_data'])):?>

174 <?
php
 
fÜ—ch
(
$u£r_d©a
['group_d©a'] 
as
 
$v®ue
):?>

175 <
li
>

176 <
a
 
h»f
="#">

177 <
h2
><?=
$v®ue
['group_name']?></h2>

178 <
p
><?=
$v®ue
['group_destription']?></p>

179 </
a
>

180 </
li
>

181 <?
php
 
’dfÜ—ch
;?>

182 <?
php
 
	g’dif
;?>

183 </
	gul
>

184 </
	gdiv
><!--/
	gcÚ‹Á
-
	g´im¬y
 -->

185 </
	gdiv
>

186 </
	gdiv
><!-- /
	g·ge
 -->

188 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="page_private">

189 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed">

190 <
h1
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh1
>

191 <
a
 
	gh»f
="#po¡_weibo" 
»l
="external">å‘çŠ¶æ€</a>

192 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
();?> 
	g»l
="ex‹º®" 
d©a
-
rŞe
="bu‰Ú" d©a-
icÚ
="»äesh" d©a-
icÚpos
="notext"></a>

193 <
div
 
d©a
-
id
="foo1" d©a-
pos™iÚ
="fixed">

194 <
div
 
d©a
-
rŞe
="navbar">

195 <
ul
>

196 <
li
><
a
 
h»f
="#·ge_´iv©e" 
şass
="ui-bŠ-aùivui-¡©e-³rsi¡" 
d©a
-
Œªs™iÚ
="fade">ä¸ªäºº</a></li>

197 <
li
><
a
 
h»f
="#·ge_weibo" 
d©a
-
Œªs™iÚ
="fade">å¾®åš</a></li>

198 <
li
><
a
 
h»f
="#·ge_ä›nd" 
d©a
-
Œªs™iÚ
="fade">å¥½å‹</a></li>

199 <
li
><
a
 
h»f
="#·ge_group" 
d©a
-
Œªs™iÚ
="fade">ç¾¤ç»„</a></li>

200 </
ul
>

201 </
div
><!-- /
Çvb¬
 -->

202 </
div
><!-- /
foÙ”
 -->

203 </
div
><!-- /
h—d”
 -->

205 <
div
 
d©a
-
rŞe
="content">

206 <
div
 
şass
="content-primary">

207 <
div
 
şass
="ui-grid-a">

208 <
div
 
şass
="ui-block-a" >

209 <
img
 
Çme
="Çme" 
height
="80" 
¤c
="<?phpƒcho $user_data['user_avatar'];?>">

210 </
div
>

211 <
div
 
şass
="ui-block-b" >

212 <
h3
><?
php
 
echo
 
$u£r_d©a
['display_name']?></h3>

213 </
div
>

214 </
div
>

215 <
hr
/>

216 <
div
>

217 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
š£t
="true">

218 <
li
>

219 <
ÏbË
 ="´iv©e_ema">ç™»å½•åï¼š<?
php
 
echo
 
$u£r_d©a
['ema'];?></
	gÏbË
>

220 </
	gli
>

221 <
	gli
>

222 <
ÏbË
 ="´iv©e_ema">ä¸Šæ¬¡æ´»åŠ¨æ—¶é—´ï¼š<?
php
 
echo
 
d©e
("Y-m-d G:i",
$u£r_d©a
['Ï¡_aùiv™y']+8*60*60);?></
	gÏbË
>

223 </
	gli
>

224 </
	gul
>

225 </
	gdiv
>

227 </
	gdiv
><!--/
	gcÚ‹Á
-
	g´im¬y
 -->

228 </
	gdiv
>

229 </
	gdiv
><!-- /
	g·ge
 -->

232 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
='post_weibo'>

234 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" >

235 <
h1
>å‘çŠ¶æ€</h1>

236 <
a
 
d©a
-
»l
="back" d©a-
icÚ
="arrow-l">è¿”å›</a>

237 </
div
><!-- /
h—d”
 -->

239 <
div
 
d©a
-
rŞe
="content">

240 <
fÜm
>

241 <
‹x»a
 
rows
="15" 
Çme
="weibo_cÚ‹Á" 
id
="weibo_cÚ‹Á" 
¶aûhŞd”
="è¯·è¾“å…¥å¾®åšå†…å®¹" 
¡yË
="width:99%; "></textarea>

242 </
fÜm
>

243 <
bu‰Ú
 
id
="weibo_submit">å‘å¸ƒ</button>

244 </
div
>

245 </
div
><!-- /
·ge
 -->

247 <
div
 
d©a
-
rŞe
="·ge" 
id
="po¡_sucûss_dŸlog" d©a-
theme
="a">

248 <
div
 
d©a
-
rŞe
="header">

249 <
h1
>å‘è¡¨æˆåŠŸ</h1>

250 </
div
>

252 <
div
 
d©a
-
rŞe
="content">

253 <
h1
>å‘è¡¨æˆåŠŸ</h1>

254 <
h3
>æ˜¯å¦ç»§ç»­å‘å¾®åšï¼Ÿ</h3>

255 <
a
 
d©a
-
rŞe
="bu‰Ú" d©a-
»l
="back">æ˜¯</a>

256 <
a
 
h»f
="#·ge_weibo" 
d©a
-
rŞe
="button">å¦</a>

257 </
div
>

258 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_page_friend.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="·ge_ä›nd" 
şass
="type-interior">

2 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

3 <
h1
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh1
>

4 <
a
 
	gh»f
="<?ph°echØba£_u¾("
mobe
/
c_·ge
/
po¡_weibo
");?>" 
»l
="external">å‘çŠ¶æ€</a>

5 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
("mobe/c_·ge/");?> 
	g»l
="ex‹º®" 
d©a
-
rŞe
="bu‰Ú" d©a-
icÚ
="»äesh" d©a-
icÚpos
="notext"></a>

6 <
div
 
d©a
-
id
="foo1" d©a-
pos™iÚ
="fixed">

7 <
div
 
d©a
-
rŞe
="navbar">

8 <
ul
>

9 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_´iv©e')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">èœ—å±…</a></li>

10 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_Ã¬')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">å‘¨è¾¹</a></li>

11 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">èœ—è¯­</a></li>

12 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_ä›nd')?>" 
d©a
-
theme
="b" 
şass
="ui-bŠ-aùivui-¡©e-³rsi¡" d©a-
Œªs™iÚ
="fade">èœ—å¹¿åœº</a></li>

14 </
ul
>

15 </
div
><!-- /
Çvb¬
 -->

16 </
div
><!-- /
foÙ”
 -->

17 </
div
><!-- /
h—d”
 -->

19 <
div
 
d©a
-
rŞe
="content">

20 <
div
 
şass
="content-primary">

21 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
f‹r
="Œue" d©a-f‹r-
¶aûhŞd”
="æŸ¥çœ‹èœ—å‹">

22 <?
php
 if(
is£t
(
$u£r_d©a
['all_user_datas'])):?>

23 <?
php
 
fÜ—ch
(
$u£r_d©a
['®l_u£r_d©as'] 
as
 
$v®ue
):?>

24 <
li
 
id
="<?='user_'.$value['user_id'];?>">

25 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
("mobe/c_·ge/sšgË_u£r/".
¡r_»¶aû
(
¬¿y
('+','/','='),¬¿y('-','_',''),
ba£64_’code
(
£rŸlize
(
$v®ue
))));?> 
	g¡yË
="text-decoration:‚one;">

26 <
img
 
®t
="ä¸ªäººå¤´åƒ" 
¤c
=<?
php
 
echo
 
$v®ue
['user_avatar'];?> />

27 <
	gh2
><?=
$v®ue
['di¥Ïy_Çme']?></
h2
>

28 <
p
><?
php


29 if(
is£t
(
$v®ue
['latest_update']))

30 
echo
 
$v®ue
['latest_update'];

31 ?></
	gp
>

32 </
	ga
>

33 </
	gli
>

34 <?
php
 
	g’dfÜ—ch
;?>

35 <?
php
 
	g’dif
;?>

36 </
	gul
>

37 </
	gdiv
><!--/
	gcÚ‹Á
-
	g´im¬y
 -->

38 <
div
 
	gşass
="content-secondary">

39 <
div
 
d©a
-
rŞe
="cŞÏpsibË" d©a-
cŞÏp£d
="Œue" d©a-
theme
="b" d©a-
cÚ‹Á
-theme="d">

40 <
h3
>é€‰é¡¹</h3>

41 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
theme
="c" d©a-
divid”theme
="b">

42 <
li
 
d©a
-
theme
="e"><
a
 
h»f
="<?=base_url('mobile/c_page/page_friend')?>">èœ—å‹</a></li>

43 <
li
><
a
 
h»f
="<?=base_url('mobile/c_page/page_group')?>">èœ—ç¾¤</a></li>

44 <
li
><
a
 
h»f
="<?=base_url('mobile/c_page/page_place')?>">èœ—èšç‚¹</a></li>

45 </
ul
>

46 </
div
>

47 </
div
>

48 </
div
>

49 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_page_group.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="·ge_group" 
şass
="type-interior">

2 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

3 <
h1
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh1
>

4 <
a
 
	gh»f
="<?ph°echØba£_u¾("
mobe
/
c_·ge
/
add_group
");?>" 
»l
="external">åˆ›å»ºèœ—ç¾¤</a>

5 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
();?> 
	g»l
="ex‹º®" 
d©a
-
rŞe
="bu‰Ú" d©a-
icÚ
="»äesh" d©a-
icÚpos
="notext"></a>

6 <
div
 
d©a
-
id
="foo1" d©a-
pos™iÚ
="fixed">

7 <
div
 
d©a
-
rŞe
="navbar">

8 <
ul
>

9 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_´iv©e')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">èœ—å±…</a></li>

10 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_Ã¬')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">å‘¨è¾¹</a></li>

11 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">èœ—è¯­</a></li>

12 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_group')?>" 
d©a
-
theme
="b" 
şass
="ui-bŠ-aùivui-¡©e-³rsi¡" d©a-
Œªs™iÚ
="fade">èœ—å¹¿åœº</a></li>

13 </
ul
>

14 </
div
><!-- /
Çvb¬
 -->

15 </
div
><!-- /
foÙ”
 -->

16 </
div
><!-- /
h—d”
 -->

18 <
div
 
d©a
-
rŞe
="content">

19 <
div
 
şass
="content-primary">

20 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
f‹r
="Œue" d©a-f‹r-
¶aûhŞd”
="æŸ¥çœ‹èœ—ç¾¤">

21 <?
php
 if(
is£t
(
$u£r_d©a
['group_data'])):?>

22 <?
php
 
fÜ—ch
(
$u£r_d©a
['group_d©a'] 
as
 
$v®ue
):?>

23 <
li
 
id
="<?='group_'.$value['group_id'];?>">

24 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
("mobe/c_·ge/sšgË_group/".
¡r_»¶aû
(
¬¿y
('+','/','='),¬¿y('-','_',''),
ba£64_’code
(
£rŸlize
(
$v®ue
))));?> 
	g¡yË
="text-decoration:‚one;">

25 <
h2
><?=
$v®ue
['group_name']?></h2>

26 <
p
><?=
$v®ue
['group_destription']?></p>

27 </
a
>

28 </
li
>

29 <?
php
 
’dfÜ—ch
;?>

30 <?
php
 
	g’dif
;?>

31 </
	gul
>

32 </
	gdiv
><!--/
	gcÚ‹Á
-
	g´im¬y
 -->

33 <
div
 
	gşass
="content-secondary">

34 <
div
 
d©a
-
rŞe
="cŞÏpsibË" d©a-
cŞÏp£d
="Œue" d©a-
theme
="b" d©a-
cÚ‹Á
-theme="d">

35 <
h3
>é€‰é¡¹</h3>

36 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
theme
="c" d©a-
divid”theme
="b">

37 <
li
><
a
 
h»f
="<?=base_url('mobile/c_page/page_friend')?>">èœ—å‹</a></li>

38 <
li
 
d©a
-
theme
="e"><
a
 
h»f
="<?=base_url('mobile/c_page/page_group')?>">èœ—ç¾¤</a></li>

39 <
li
><
a
 
h»f
="<?=base_url('mobile/c_page/page_place')?>">èœ—èšç‚¹</a></li>

40 </
ul
>

41 </
div
>

42 </
div
>

43 </
div
>

44 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_page_near.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="·ge_Ã¬" 
d©a
-
theme
="f" 
şass
="type-interior">

2 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

3 <
h1
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh1
>

4 <
a
 
	gh»f
="<?ph°echØba£_u¾("
mobe
/
c_·ge
/
po¡_weibo
");?>" 
»l
="external">å‘çŠ¶æ€</a>

5 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
("mobe/c_·ge/");?> 
	g»l
="ex‹º®" 
d©a
-
rŞe
="bu‰Ú" d©a-
icÚ
="»äesh" d©a-
icÚpos
="notext"></a>

6 <
div
 
d©a
-
id
="foo1" d©a-
pos™iÚ
="fixed">

7 <
div
 
d©a
-
rŞe
="navbar">

8 <
ul
>

9 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_´iv©e')?>" 
d©a
-
Œªs™iÚ
="çde" d©a-
theme
="b">èœ—å±…</a></li>

10 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_Ã¬')?>" 
şass
="ui-bŠ-aùivui-¡©e-³rsi¡" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">å‘¨è¾¹</a></li>

11 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge')?>" 
d©a
-
Œªs™iÚ
="çde" d©a-
theme
="b">èœ—è¯­</a></li>

12 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_ä›nd')?>" 
d©a
-
Œªs™iÚ
="çde" d©a-
theme
="b">èœ—å¹¿åœº</a></li>

14 </
ul
>

15 </
div
><!-- /
Çvb¬
 -->

16 </
div
><!-- /
foÙ”
 -->

17 </
div
><!-- /
h—d”
 -->

19 <
div
 
d©a
-
rŞe
="content">

20 <
div
 
şass
="content-primary">

21 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
f‹r
="Œue" d©a-f‹r-
¶aûhŞd”
="æŸ¥çœ‹å‘¨è¾¹">

22 <?
php
 if(
is£t
(
$u£r_d©a
['near_user_data'])):?>

23 <?
php
 
fÜ—ch
(
$u£r_d©a
['Ã¬_u£r_d©a'] 
as
 
$v®ue
):?>

24 <
li
 
id
="<?='user_'.$value['user_id'];?>">

25 <
a
 
h»f
="#">

26 <
img
 
®t
="ä¸ªäººå¤´åƒ" 
¤c
=<?
php
 
echo
 
$v®ue
['user_avatar'];?> />

27 <
	gh2
><?=
$v®ue
['di¥Ïy_Çme']?></
h2
>

28 <
p
><?
php


29 if(
is£t
(
$v®ue
['latest_update']))

30 
echo
 
$v®ue
['latest_update'];

31 ?></
	gp
>

32 </
	ga
>

33 </
	gli
>

34 <?
php
 
	g’dfÜ—ch
;?>

35 <?
php
 
	g’dif
;?>

36 </
	gul
>

37 </
	gdiv
><!--/
	gcÚ‹Á
-
	g´im¬y
 -->

38 </
	gdiv
>

39 </
	gdiv
><!-- /
	g·ge
 -->

	@application/views/mobile/v_page_place.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="·ge_¶aû" 
şass
="type-interior">

2 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

3 <
h1
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh1
>

4 <
a
 
	gh»f
="<?ph°echØba£_u¾("
mobe
/
c_·ge
/
add_¶aû
");?>" 
»l
="external">åˆ›å»ºèšç‚¹</a>

5 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
();?> 
	g»l
="ex‹º®" 
d©a
-
rŞe
="bu‰Ú" d©a-
icÚ
="»äesh" d©a-
icÚpos
="notext"></a>

6 <
div
 
d©a
-
id
="foo1" d©a-
pos™iÚ
="fixed">

7 <
div
 
d©a
-
rŞe
="navbar">

8 <
ul
>

9 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_´iv©e')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">èœ—å±…</a></li>

10 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_Ã¬')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">å‘¨è¾¹</a></li>

11 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">èœ—è¯­</a></li>

12 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_¶aû')?>" 
d©a
-
theme
="b" 
şass
="ui-bŠ-aùivui-¡©e-³rsi¡" d©a-
Œªs™iÚ
="fade">èœ—å¹¿åœº</a></li>

13 </
ul
>

14 </
div
><!-- /
Çvb¬
 -->

15 </
div
><!-- /
foÙ”
 -->

16 </
div
><!-- /
h—d”
 -->

18 <
div
 
d©a
-
rŞe
="content">

19 <
div
 
şass
="content-primary">

20 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
f‹r
="Œue" d©a-f‹r-
¶aûhŞd”
="æŸ¥çœ‹èšç‚¹">

21 <?
php
 if(
is£t
(
$u£r_d©a
['place_data'])):?>

22 <?
php
 
fÜ—ch
(
$u£r_d©a
['¶aû_d©a'] 
as
 
$v®ue
):?>

23 <
li
 
id
="<?='place_'.$value['place_id'];?>">

24 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
("mobe/c_·ge/sšgË_¶aû/".
¡r_»¶aû
(
¬¿y
('+','/','='),¬¿y('-','_',''),
ba£64_’code
(
£rŸlize
(
$v®ue
))));?> 
	g¡yË
="text-decoration:‚one;">

25 <
h2
><?=
$v®ue
['place_name']?></h2>

26 <
p
><?=
$v®ue
['place_destription']?></p>

27 </
a
>

28 </
li
>

29 <?
php
 
’dfÜ—ch
;?>

30 <?
php
 
	g’dif
;?>

31 </
	gul
>

32 </
	gdiv
><!--/
	gcÚ‹Á
-
	g´im¬y
 -->

33 <
div
 
	gşass
="content-secondary">

34 <
div
 
d©a
-
rŞe
="cŞÏpsibË" d©a-
cŞÏp£d
="Œue" d©a-
theme
="b" d©a-
cÚ‹Á
-theme="d">

35 <
h3
>é€‰é¡¹</h3>

36 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
theme
="c" d©a-
divid”theme
="b">

37 <
li
><
a
 
h»f
="<?=base_url('mobile/c_page/page_friend')?>">èœ—å‹</a></li>

38 <
li
><
a
 
h»f
="<?=base_url('mobile/c_page/page_group')?>">èœ—ç¾¤</a></li>

39 <
li
 
d©a
-
theme
="e"><
a
 
h»f
="<?=base_url('mobile/c_page/page_place')?>">èœ—èšç‚¹</a></li>

40 </
ul
>

41 </
div
>

42 </
div
>

43 </
div
>

44 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_page_ppt.php

1 <!
doùy³
 
	ghtml
>

2 <
	ghtml
>

3 <
	gh—d
>

4 <
m‘a
 
	gch¬£t
="utf-8" />

5 <
m‘a
 
Çme
="v›wpÜt" 
cÚ‹Á
="width=600" />

6 <
m‘a
 
Çme
="­¶e-mobe-web-­p-ÿ·bË" 
cÚ‹Á
="yes" />

7 <
t™Ë
>åä¸½çš„
PPT
</title>

8 <
lšk
 
h»f
="<?ph°echØba£_u¾("
css
/
im´ess
-
demo
.css");?>" 
»l
="stylesheet" />

9 <
lšk
 
»l
="­¶e-touch-icÚ" 
h»f
="<?ph°echØba£_u¾("
image
/
­¶e
-
touch
-
icÚ
.
²g
");?>" />

10 <
¡yË
>

12 
height
:auto;

13 
	gwidth
:100%;

14 
	g‹xt
-
	gshadow
: 0 1
px
 1px #000;

15 
	gm¬gš
:0‡uto;

16 
	gpos™iÚ
:
fixed
;

17 
	gz
-
	gšdex
:100;

18 
	gheight
: 20
px
;

19 
	g‹xt
-
	g®ign
: 
ûÁ”
;

20 
	gbackground
: #bbb;

21 
	gcŞÜ
: #000;

22 
	gfÚt
-
	gsize
: 14
px
;

23 
	gfÚt
-
	gweight
: 
bŞd
;

27 
	gheight
:auto;

28 
	gwidth
:100%;

29 
	g‹xt
-
	gshadow
: 0 1
px
 1px #000;

30 
	gm¬gš
:0‡uto;

31 
	gbÙtom
: 0;

32 
	gpos™iÚ
:
fixed
;

33 
	gz
-
	gšdex
:100;

34 
	gheight
: 20
px
;

35 
	g‹xt
-
	g®ign
: 
ûÁ”
;

36 
	gbackground
: #bbb;

37 
	gcŞÜ
: #000;

38 
	gfÚt
-
	gsize
: 14
px
;

39 
	gfÚt
-
	gweight
: 
bŞd
;

41 </
	g¡yË
>

42 </
	gh—d
>

44 <
body
 
	gşass
="impress-not-supported">

46 <
div
 
id
="impress">

48 <
div
 
id
="bÜed" 
şass
="¡• slide" 
d©a
-
x
="-1000" d©a-
y
="0">

49 <
q
>ä½ æ˜¯ä¸æ˜¯ä¹Ÿå› ä¸ºå…¶ä»–
PPT
è€Œ<
b
>çƒ¦æ¼</b>?</q>

50 </
div
>

51 <
div
 
şass
="¡• slide" 
d©a
-
x
="0" d©a-
y
="0">

52 <
q
>
DÚ
'ˆyouhškh©…»£Á©iÚ giv’ <¡rÚg>š mod”Àbrow£rs</¡rÚg> shouldn'
t
 <
¡rÚg
>
cİy
 
the
 
lim™s
</¡rÚg> 
of
 'şassic' 
¦ide
 
decks
?</q>

53 </
div
>

54 <
div
 
şass
="¡• slide" 
d©a
-
x
="1000" d©a-
y
="0">

55 <
q
>
Would
 
you
 
like
 
to
 <
¡rÚg
>
im´ess
 
your
 
aud›nû
</¡rÚg> 
w™h
 <¡rÚg>
¡uÂšg
 
visu®iz©iÚ
</¡rÚg> 
of
 you¸
lk
?</q>

56 </
div
>

57 <
div
 
şass
="¡• slide" 
d©a
-
x
="2000" d©a-
y
="0">

58 <
q
>
Would
 
you
 
like
 
to
 <
¡rÚg
>
im´ess
 
your
 
aud›nû
</¡rÚg> 
w™h
 <¡rÚg>
¡uÂšg
 
visu®iz©iÚ
</¡rÚg> 
of
 you¸
lk
?</q>

59 </
div
>

60 <
div
 
şass
="¡• slide" 
d©a
-
x
="3000" d©a-
y
="0">

61 <
q
>
Would
 
you
 
like
 
to
 <
¡rÚg
>
im´ess
 
your
 
aud›nû
</¡rÚg> 
w™h
 <¡rÚg>
¡uÂšg
 
visu®iz©iÚ
</¡rÚg> 
of
 you¸
lk
?</q>

62 </
div
>

64 </
div
>

65 <
div
 
şass
="hint">

66 <
p
>ä½¿ç”¨å·¦å³é”®æ§åˆ¶
PPT
</p>

67 </
div
>

68 <
süt
>

69 ià("Útouch¡¬t" 
š
 
docum’t
.
docum’tEËm’t
) {

70 
docum’t
.
qu”yS–eùÜ
(".hšt").
šÃrHTML
 = "<p>ä½¿ç”¨å·¦å³é”®æ§åˆ¶PPT</p>";

72 </
	gsüt
>

73 <
süt
 
	g¤c
="<?ph°echØba£_u¾("
js
/
im´ess
.js");?>"></script>

74 <
süt
>
im´ess
();</
	gsüt
>

75 <
div
 
	gid
="top_banner">è¿™é‡Œæ˜¯é¡¶éƒ¨çš„æ¨ªå¹…ï¼Œéšç€é¡µé¢æ»šåŠ¨è€Œæµ®åŠ¨</div>

76 <
div
 
id
="bottom_banner">è¿™é‡Œæ˜¯åº•éƒ¨çš„æ¨ªå¹…ï¼Œéšç€é¡µé¢æ»šåŠ¨è€Œæµ®åŠ¨</div>

77 </
body
>

78 </
html
>

	@application/views/mobile/v_page_private.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="·ge_´iv©e" 
şass
="type-interior">

2 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

3 <
h1
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh1
>

4 <
a
 
	gh»f
="<?ph°echØba£_u¾("
mobe
/
c_·ge
/
po¡_weibo
");?>" 
»l
="external">å‘çŠ¶æ€</a>

5 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
();?> 
	g»l
="ex‹º®" 
d©a
-
rŞe
="bu‰Ú" d©a-
icÚ
="»äesh" d©a-
icÚpos
="notext"></a>

6 <
div
 
d©a
-
id
="foo1" d©a-
pos™iÚ
="fixed">

7 <
div
 
d©a
-
rŞe
="navbar">

8 <
ul
>

9 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_´iv©e')?>"
d©a
-
theme
="b" 
şass
="ui-bŠ-aùivui-¡©e-³rsi¡" d©a-
Œªs™iÚ
="fade">èœ—å±…</a></li>

10 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_Ã¬')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">å‘¨è¾¹</a></li>

11 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">èœ—è¯­</a></li>

12 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_¶aû')?>" 
d©a
-
theme
="b" d©a-
Œªs™iÚ
="fade">èœ—å¹¿åœº</a></li>

13 </
ul
>

14 </
div
><!-- /
Çvb¬
 -->

15 </
div
><!-- /
foÙ”
 -->

16 </
div
><!-- /
h—d”
 -->

18 <
div
 
d©a
-
rŞe
="content">

19 <
div
 
şass
="content-primary">

20 <
div
 
şass
="ui-grid-a">

21 <
div
 
şass
="ui-block-a" >

22 <
img
 
Çme
="Çme" 
height
="80" 
¤c
="<?phpƒcho $user_data['user_avatar'];?>">

23 </
div
>

24 <
div
 
şass
="ui-block-b" >

25 <
h3
><?
php
 
echo
 
$u£r_d©a
['display_name']?></h3>

26 </
div
>

27 </
div
>

28 <
hr
/>

29 <
div
>

30 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
š£t
="true">

31 <
li
>

32 <
ÏbË
 ="´iv©e_ema">ç™»å½•åï¼š<?
php
 
echo
 
$u£r_d©a
['ema'];?></
	gÏbË
>

33 </
	gli
>

34 <
	gli
>

35 <
ÏbË
 ="´iv©e_ema">ä¸Šæ¬¡æ´»åŠ¨æ—¶é—´ï¼š<?
php
 
echo
 
d©e
("Y-m-d G:i",
$u£r_d©a
['Ï¡_aùiv™y']+8*60*60);?></
	gÏbË
>

36 </
	gli
>

37 <
	gli
>

38 <
ÏbË
 ="´iv©e_ema">å¥½å‹æ•°ï¼š<?
php
 
echo
 
$u£r_d©a
['ä›nd_couÁ'];?></
	gÏbË
>

39 </
	gli
>

40 <
	gli
>

41 <
ÏbË
 ="´iv©e_ema">å¾®åšæ•°ï¼š<?
php
 
echo
 
$u£r_d©a
['weibo_couÁ'];?></
	gÏbË
>

42 </
	gli
>

43 </
	gul
>

44 </
	gdiv
>

45 <
	ghr
/>

46 <
	gdiv
>

47 <
ul
 
	gd©a
-
	grŞe
="li¡v›w" 
d©a
-
š£t
="true">

48 <
li
 
¡yË
="text-align:center;">

49 <
a
 
h»f
="<?=ba£_u¾('mobe/c_logš/logš_out');?>" 
¡yË
="text-align:center;">æ³¨é”€ç™»é™†</a>

50 </
li
>

52 </
ul
>

53 </
div
>

55 </
div
><!--/
cÚ‹Á
-
´im¬y
 -->

56 </
div
>

57 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_page_weibo.php

1 <
süt
 
	gty³
="text/javascript">

2 
$
(
docum’t
).
»ady
(
	$funùiÚ
() {

3 
	`$
("#g‘_Şd_public_weibo").
	`bšd
("şick",
	`funùiÚ
 () {

4 
$
.
mobe
.
	`·geLßdšg
();

5 
$
.
	`po¡
("<?ph°echØba£_u¾("
mobe
/
c_ajax
/");?>",

7 
aùiÚ
: "get_public_weibo",

8 
tok’
: "<?phpƒcho $user_data['token'];?>",

9 
f‹r
: "old",

10 
Ï¡_ãed_id
: 
	`$
("#public_li¡_v›w†i").
	`eq
(-2).
	`©Œ
("id").
	`sub¡r
(12)

12 
	`funùiÚ
(
d©a
){

13 if(
d©a
.
	`sub¡r
(0,2)=="no"){}

15 
	`$
("#public_li¡_v›w†i").
	`eq
(-1).
	`befÜe
(
d©a
);

16 
	`$
('#public_li¡_v›w').
	`li¡v›w
('refresh');

19 
$
.
mobe
.
	`·geLßdšg
(
Œue
);

21 
	}
});

22 </
	gsüt
>

23 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="·ge_weibo" 
şass
="ty³-š‹riÜ" 
d©a
-
theme
="f">

24 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

25 <
h1
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh1
>

26 <
a
 
	gh»f
="<?ph°echØba£_u¾("
mobe
/
c_·ge
/
po¡_weibo
");?>" 
»l
="external">å‘çŠ¶æ€</a>

27 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
();?> 
	g»l
="ex‹º®" 
d©a
-
rŞe
="bu‰Ú" d©a-
icÚ
="»äesh" d©a-
icÚpos
="notext"></a>

28 <
div
 
d©a
-
rŞe
="navbar">

29 <
ul
>

30 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_´iv©e')?>" 
d©a
-
Œªs™iÚ
="çde" d©a-
theme
="b">èœ—å±…</a></li>

31 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_Ã¬')?>" 
d©a
-
Œªs™iÚ
="çde" d©a-
theme
="b">å‘¨è¾¹</a></li>

32 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge')?>" 
şass
="ui-bŠ-aùivui-¡©e-³rsi¡" 
d©a
-
Œªs™iÚ
="çde" d©a-
theme
="b">èœ—è¯­</a></li>

33 <
li
><
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/·ge_ä›nd')?>" 
d©a
-
Œªs™iÚ
="çde" d©a-
theme
="b">èœ—å¹¿åœº</a></li>

34 </
ul
>

35 </
div
><!-- /
Çvb¬
 -->

36 </
div
><!-- /
h—d”
 -->

38 <
div
 
d©a
-
rŞe
="content">

39 <
div
 
şass
="content-primary">

40 <
ul
 
d©a
-
rŞe
="li¡v›w" 
id
="public_li¡_v›w" d©a-
theme
="c" d©a-
divid”theme
="c">

41 <?
php
 if(
is£t
(
$u£r_d©a
['feeds'])):?>

42 <?
php
 
fÜ—ch
(
$u£r_d©a
['ãeds'] 
as
 
$ãed
):?>

43 <
li
 
d©a
-
rŞe
="li¡-divid”" d©a-
theme
="c" 
id
="<?='public_feed_'.$feed['feed_id'];?>">

44 <
div
 
şass
="ui-grid-a">

45 <
div
 
şass
="ui-block-a" 
¡yË
="width:20%;">

46 <
img
 
height
="36" 
¤c
=<?
php
 
echo
 
$ãed
['user_avatar'];?>>

47 </
	gdiv
>

48 <
div
 
	gşass
="ui-block-b" 
¡yË
="width:80%;">

49 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
("mobe/c_·ge/sšgË_u£r/".
¡r_»¶aû
(
¬¿y
('+','/','='),¬¿y('-','_',''),
ba£64_’code
(
£rŸlize
(
$ãed
))));?> 
	g¡yË
="‹xt-decÜ©iÚ:‚Úe;"><?ph°echØ$ãed['di¥Ïy_Çme'];?></
	ga
>

50 <
div
 
	g¡yË
="‹xt-®ign:right;"><
p
><?
php
 
echo
 
time¥ª
(
$ãed
['ü—‹_time'],
now
()).'å‰';?></
	gp
></
	gdiv
>

51 </
	gdiv
>

52 <
div
 
	gşass
="ui-block-a" 
¡yË
="width:20%;">

53 </
div
>

54 <
div
 
şass
="ui-block-b" 
¡yË
="width:80%;">

55 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
("mobe/c_·ge/sšgË_weibo/".
¡r_»¶aû
(
¬¿y
('+','/','='),¬¿y('-','_',''),
ba£64_’code
(
£rŸlize
(
$ãed
))));?> 
	g¡yË
="‹xt-decÜ©iÚ:‚Úe;"><?ph°echØ$ãed['ãed_cÚ‹Á'];?></
	ga
>

56 </
	gdiv
>

57 <
div
 
	gşass
="ui-block-a" 
¡yË
="width:20%;">

58 </
div
>

59 <
div
 
şass
="ui-block-b" 
¡yË
="width:80%;text-align:right;">

60 <
br
/>

61 <
div
><
p
><?
php
 
echo
 "è½¬å‘ï¼š ".
$ãed
['Œª¥Úd_couÁ'];?> <?ph°
	gecho
 "è¯„è®º ï¼š".
	g$ãed
['comm’t_couÁ'];?></
	gp
></
	gdiv
>

62 </
	gdiv
>

63 </
	gdiv
>

64 </
	gli
>

65 <?
php
 
	g’dfÜ—ch
;?>

66 <?
php
 
	g’dif
;?>

67 <
li
 
	gd©a
-
	grŞe
="li¡-divid”" 
d©a
-
theme
="c"><
a
 
id
="get_old_public_weibo">æŸ¥çœ‹æ›´æ—©</a></li>

68 </
ul
>

69 </
div
>

70 <
div
 
şass
="content-secondary">

71 <
div
 
d©a
-
rŞe
="cŞÏpsibË" d©a-
cŞÏp£d
="Œue" d©a-
theme
="b" d©a-
cÚ‹Á
-theme="d">

72 <
h3
>é€‰é¡¹</h3>

73 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
theme
="c" d©a-
divid”theme
="b">

75 <
li
><
a
 
h»f
="../../docs/about/šŒo.html">
IÁro
 
to
 
jQu”y
 
Mobe
</a></li>

76 <
li
><
a
 
h»f
="../../docs/about/g‘tšg-¡¬‹d.html">
Quick
 
¡¬t
 
guide
</a></li>

77 <
li
><
a
 
h»f
="../../docs/about/ã©u»s.html">
F—tu»s
</a></li>

78 <
li
><
a
 
h»f
="../../docs/about/acûssib™y.html">
Acûssib™y
</a></li>

79 <
li
 
d©a
-
theme
="e"><
a
 
h»f
="../../docs/about/¶©fÜms.html">
SuµÜ‹d
 
¶©fÜms
</a></li>

80 </
ul
>

81 </
div
>

82 </
div
>

83 </
div
>

84 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_register.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
şass
="ty³-š‹riÜ" 
id
="»gi¡”" 
d©a
-
theme
="f">

3 <
div
 
d©a
-
rŞe
="h—d”" d©a-
theme
="f">

4 <
h1
>èœ—ä¸´å®¢</h1>

5 <
a
 
d©a
-
»l
="back" d©a-
icÚ
="arrow-l">è¿”å›</a>

6 </
div
>

7 <!-- /
h—d”
 -->

9 <
div
 
d©a
-
rŞe
="content">

11 <
div
 
şass
="content-secondary">

12 <
fÜm
 
aùiÚ
="<?=ba£_u¾("
mobe
/
c_»gi¡”
/
»gi¡”_subm™
"); ?>"

13 
m‘hod
="po¡" 
d©a
-
ajax
="false">

14 <
ul
 
d©a
-
rŞe
="listview">

15 <
li
 
d©a
-
rŞe
="list-divider">æ³¨å†Œ</li>

16 <
li
>é‚®ç®±</li>

17 <
li
><
šput
 
id
="»gi¡”_ema" 
Çme
="»gi¡”_ema" 
ty³
="email"

18 
v®ue
="" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨çš„é‚®ç®±" /></
li
>

19 <
li
>å¯†ç ï¼ˆ6ä½åŠä»¥ä¸Šæ•°å­—æˆ–å­—æ¯ç»„åˆï¼‰</li>

20 <
li
><
šput
 
id
="»gi¡”_·sswÜd" 
Çme
="»gi¡”_·sswÜd"
ty³
="·sswÜd" 
v®ue
="" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨çš„å¯†ç " /></li>

21 <
li
>çœŸå®å§“å</li>

22 <
li
><
šput
 
id
="»gi¡”_»®_Çme" 
Çme
="»gi¡”_»®_Çme" 
ty³
="text"

23 
v®ue
="" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨çš„å§“å" /></
li
>

24 <
li
>è“ç‰™åœ°å€ï¼ˆ12ä½å­—æ¯æ•°å­—ç»„åˆï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼‰</li>

25 <
li
><
šput
 
id
="»gi¡”_blu‘oÙh_mac" 
Çme
="register_bluetooth_mac"

26 
ty³
="‹xt" 
v®ue
="" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨çš„è“ç‰™åœ°å€" /> <
šput


27 
ty³
="subm™" 
v®ue
="æäº¤" /></
li
>

28 </
ul
>

29 </
fÜm
>

30 </
div
>

32 <
div
 
şass
="content-primary">

33 <
h1
>å¦‚ä½•è·å¾—è“ç‰™åœ°å€ï¼Ÿ</h1>

34 <
ul
 
d©a
-
rŞe
="listview">

35 <
li
 
d©a
-
rŞe
="li¡-divid”">
iOS
ç³»ç»Ÿ</li>

36 <
li
>å¦‚
hÚe
</li>

37 <
li
>è®¾ç½®-&
gt
;é€šç”¨-&
	ggt
;å…³äºæœ¬æœº-&gt;è“ç‰™</
	gli
>

38 <
li
 
	gd©a
-
	grŞe
="li¡-divid”">
Android
ç³»ç»Ÿ</li>

39 <
li
>å¦‚
HTC
ã€
MÙo
ã€ä¸‰æ˜Ÿã€é­…æ—ã€å°ç±³ã€ç´¢çˆ±ã€åä¸ºã€ä¸­å…´</li>

40 <
li
>
m’u
-&
gt
;è®¾ç½®-&
	ggt
;å…³äºæ‰‹æœº-&gt;ç¡¬ä»¶ä¿¡æ¯(çŠ¶æ€ä¿¡æ¯)-&gt;è“ç‰™åœ°å€(éœ€å…ˆæ‰“å¼€è“ç‰™)</
	gli
>

41 <
li
 
	gd©a
-
	grŞe
="li¡-divid”">
SymbŸn
ç³»ç»Ÿ</li>

42 <
li
>å¦‚è¯ºåŸºäºš</li>

43 <
li
>è¾“å…¥*#2820#ï¼Œå³å¯æŸ¥çœ‹è“ç‰™åœ°å€</li>

44 <
li
 
d©a
-
rŞe
="li¡-divid”">
MTK
ç³»ç»Ÿ</li>

45 <
li
>è”æƒ³ã€å¤©è¯­ã€åº·ä½³ã€æµ·å°”ã€ä¸‡åˆ©è¾¾</li>

46 <
li
>æ‰“å¼€è“ç‰™ï¼ŒæŸ¥çœ‹é«˜çº§é€‰é¡¹ï¼Œå°±å¯è§è“ç‰™åœ°å€</li>

47 </
ul
>

48 </
div
>

49 </
div
>

50 <
div
 
d©a
-
rŞe
="foÙ”" 
şass
="foÙ”-docs" d©a-
theme
="c">

51 <
p
>&
cİy
; 2011-2012 
	gWlškE
</
	gp
>

52 </
	gdiv
>

53 </
	gdiv
>

54 <!-- /
	g·ge
 -->

	@application/views/mobile/v_single_group.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
='sšgË_group' 
şass
="type-interior">

3 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

4 <
h1
><?
php
 
echo
 
$group
['group_Çme'];?></
	gh1
>

5 <
a
 
	gd©a
-
	g»l
="back" 
d©a
-
icÚ
="arrow-l">è¿”å›</a>

6 </
div
><!-- /
h—d”
 -->

8 <
div
 
d©a
-
rŞe
="content">

9 <
div
 
şass
="content-primary">

10 <
div
 
şass
="ui-grid-a">

11 <
div
 
şass
="ui-block-a" >

13 </
div
>

14 <
div
 
şass
="ui-block-b" >

15 <
h3
><?
php
 
echo
 
$group
['group_name']?></h3>

16 </
div
>

17 </
div
>

18 <
hr
/>

19 <
div
>

20 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
š£t
="true">

21 <
li
>

22 <
ÏbË
>ç¾¤ç»„ä»‹ç»ï¼š<?
php
 
echo
 
$group
['group_de¡rtiÚ'];?></
	gÏbË
>

23 </
	gli
>

24 <
	gli
>

25 <
	gÏbË
>æˆå‘˜æ•°ï¼š<?
php
 
echo
 
	g$group
['member_count'];?></lable>

26 </
	gli
>

27 <
	gli
>

28 <
	gÏbË
>åˆ›å»ºæ—¶é—´ï¼š<?
php
 
echo
 
d©e
("Y-m-d G:i",
$group
['create_time']+8*60*60);?></lable>

29 </
	gli
>

30 </
	gul
>

31 <
	ghr
/>

32 </
	gdiv
>

33 </
	gdiv
><!--/
	gcÚ‹Á
-
	g´im¬y
 -->

34 </
	gdiv
>

35 </
	gdiv
><!-- /
	g·ge
 -->

	@application/views/mobile/v_single_place.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
='sšgË_¶aû' 
şass
="type-interior">

3 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f" >

4 <
h1
><?
php
 
echo
 
$¶aû
['¶aû_Çme'];?></
	gh1
>

5 <
a
 
	gd©a
-
	g»l
="back" 
d©a
-
icÚ
="arrow-l">è¿”å›</a>

6 </
div
><!-- /
h—d”
 -->

8 <
div
 
d©a
-
rŞe
="content">

9 <
div
 
şass
="content-primary">

10 <
div
 
şass
="ui-grid-a">

11 <
div
 
şass
="ui-block-a" >

13 </
div
>

14 <
div
 
şass
="ui-block-b" >

15 <
h3
><?
php
 
echo
 
$¶aû
['place_name']?></h3>

16 </
div
>

17 </
div
>

18 <
hr
/>

19 <
div
>

20 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
š£t
="true">

21 <
li
>

22 <
ÏbË
>ç¾¤ç»„ä»‹ç»ï¼š<?
php
 
echo
 
$¶aû
['¶aû_de¡rtiÚ'];?></
	gÏbË
>

23 </
	gli
>

24 <
	gli
>

25 <
	gÏbË
>æˆå‘˜æ•°ï¼š<?
php
 
echo
 
	g$¶aû
['member_count'];?></lable>

26 </
	gli
>

27 <
	gli
>

28 <
	gÏbË
>ç¾¤ç»„ç±»åˆ«ï¼š<?
php
 
echo
 
	g$¶aû
['place_category'];?></lable>

29 </
	gli
>

30 <
	gli
>

31 <
	gÏbË
>åˆ›å»ºæ—¶é—´ï¼š<?
php
 
echo
 
d©e
("Y-m-d G:i",
$¶aû
['create_time']+8*60*60);?></lable>

32 </
	gli
>

33 </
	gul
>

34 <
	ghr
/>

35 <
ul
 
	gd©a
-
	grŞe
="li¡v›w" 
d©a
-
f‹r
="Œue" d©a-f‹r-
¶aûhŞd”
="å½“å‰åœ¨æ­¤èšç‚¹çš„èœ—å‹">

36 <?
php
 if(
is£t
(
$¶aû
['place_recent_member'])):?>

37 <?
php
 
fÜ—ch
(
$¶aû
['¶aû_»ûÁ_memb”'] 
as
 
$v®ue
):?>

38 <
li
 
id
="<?='user_'.$value['user_id'];?>">

39 <
a
 
h»f
=<?
php
 
echo
 
ba£_u¾
("mobe/c_·ge/sšgË_u£r/".
¡r_»¶aû
(
¬¿y
('+','/','='),¬¿y('-','_',''),
ba£64_’code
(
£rŸlize
(
$v®ue
))));?> 
	g¡yË
="text-decoration:‚one;">

40 <
img
 
®t
="ä¸ªäººå¤´åƒ" 
¤c
=<?
php
 
echo
 
$v®ue
['user_avatar'];?> />

41 <
	gh2
><?=
$v®ue
['di¥Ïy_Çme']?></
h2
>

42 <
p
><?
php


43 if(
is£t
(
$v®ue
['latest_update']))

44 
echo
 
$v®ue
['latest_update'];

45 ?></
	gp
>

46 </
	ga
>

47 </
	gli
>

48 <?
php
 
	g’dfÜ—ch
;?>

49 <?
php
 
	g’dif
;?>

50 </
	gul
>

51 </
	gdiv
>

52 </
	gdiv
><!--/
	gcÚ‹Á
-
	g´im¬y
 -->

53 </
	gdiv
>

54 </
	gdiv
><!-- /
	g·ge
 -->

	@application/views/mobile/v_single_user.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
="·ge_u£r" 
şass
="type-interior">

2 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

3 <
h1
><?
php
 
echo
 
$ãed
['di¥Ïy_Çme'];?></
	gh1
>

4 <
a
 
	gd©a
-
	g»l
="back" 
d©a
-
icÚ
="arrow-l">è¿”å›</a>

5 </
div
><!-- /
h—d”
 -->

7 <
div
 
d©a
-
rŞe
="content">

8 <
div
 
şass
="content-primary">

9 <
div
 
şass
="ui-grid-a">

10 <
div
 
şass
="ui-block-a" >

11 <
img
 
Çme
="Çme" 
height
="80" 
¤c
="<?phpƒcho $feed['user_avatar'];?>">

12 </
div
>

13 <
div
 
şass
="ui-block-b" >

14 <
h3
><?
php
 
echo
 
$ãed
['display_name']?></h3>

15 </
div
>

16 </
div
>

17 <
hr
/>

18 <
div
>

19 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
š£t
="true">

20 <
li
>

21 <
ÏbË
 ="´iv©e_ema">ä¸Šæ¬¡æ´»åŠ¨æ—¶é—´ï¼š<?
php
 
echo
 
d©e
("Y-m-d G:i",
$ãed
['Ï¡_aùiv™y']+8*60*60);?></
	gÏbË
>

22 </
	gli
>

23 <
	gli
>

24 <
ÏbË
 ="´iv©e_ema">å¥½å‹æ•°ï¼š<?
php
 
echo
 
$ãed
['ä›nd_couÁ'];?></
	gÏbË
>

25 </
	gli
>

26 <
	gli
>

27 <
ÏbË
 ="´iv©e_ema">å¾®åšæ•°ï¼š<?
php
 
echo
 
$ãed
['weibo_couÁ'];?></
	gÏbË
>

28 </
	gli
>

29 </
	gul
>

30 </
	gdiv
>

31 <
	ghr
/>

32 <
	gdiv
>

33 <
ul
 
	gd©a
-
	grŞe
="li¡v›w" 
d©a
-
š£t
="true">

34 <
li
 
¡yË
="text-align:center;">

35 <
a
 
h»f
="<?=ba£_u¾('');?>" 
¡yË
="text-align:center;">åŠ ä¸ºå¥½å‹</a>

36 </
li
>

37 </
ul
>

38 </
div
>

39 </
div
><!--/
cÚ‹Á
-
´im¬y
 -->

40 </
div
>

41 </
div
><!-- /
·ge
 -->

	@application/views/mobile/v_single_weibo.php

1 <
div
 
	gd©a
-
	grŞe
="·ge" 
id
='po¡_weibo' 
şass
="type-interior">

3 <
div
 
d©a
-
rŞe
="h—d”" d©a-
pos™iÚ
="fixed" d©a-
theme
="f">

4 <
h1
>èœ—è¯­</h1>

5 <
a
 
d©a
-
»l
="back" d©a-
icÚ
="arrow-l">è¿”å›</a>

6 </
div
><!-- /
h—d”
 -->

8 <
div
 
d©a
-
rŞe
="content">

9 <
div
 
şass
="content-primary">

10 <
div
 
şass
="ui-grid-a">

11 <
div
 
şass
="ui-block-a" >

12 <
img
 
Çme
="Çme" 
height
="80" 
¤c
="<?phpƒcho $feed['user_avatar'];?>">

13 </
div
>

14 <
div
 
şass
="ui-block-b" >

15 <
h3
><?
php
 
echo
 
$ãed
['display_name']?></h3>

16 </
div
>

17 </
div
>

18 <
hr
/>

19 <
div
>

20 <
ul
 
d©a
-
rŞe
="li¡v›w" d©a-
š£t
="true">

21 <
li
>

22 <
ÏbË
>èœ—è¯­ï¼š<?
php
 
echo
 
$ãed
['ãed_cÚ‹Á'];?></
	gÏbË
>

23 </
	gli
>

24 <
	gli
>

25 <
	gÏbË
>å‘å¸ƒæ—¶é—´ï¼š<?
php
 
echo
 
d©e
("Y-m-d G:i",
$ãed
['create_time']+8*60*60);?></lable>

26 </
	gli
>

27 <
	gli
>

28 <
	gÏbË
>è¯„è®ºï¼š<?
php
 
echo
 
	g$ãed
['comment_count'];?></lable>

29 </
	gli
>

30 <
	gli
>

31 <
	gÏbË
>è½¬å‘ï¼š<?
php
 
echo
 
	g$ãed
['transpond_count'];?></lable>

32 </
	gli
>

33 <
	gli
>

34 <
	gÏbË
>ä¸Šæ¬¡æ´»åŠ¨æ—¶é—´ï¼š<?
php
 
echo
 
d©e
("Y-m-d G:i",
$ãed
['last_activity']+8*60*60);?></lable>

35 </
	gli
>

36 </
	gul
>

37 <
	ghr
/>

38 <
ul
 
	gd©a
-
	grŞe
="li¡v›w" 
d©a
-
š£t
="true">

39 <
li
 
¡yË
="text-align:center;">

40 <
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/comm’t_weibo/'.$ãed['ãed_id']);?>" 
¡yË
="text-align:center;">è¯„è®º</a>

41 </
li
>

42 <
li
 
¡yË
="text-align:center;">

43 <
a
 
h»f
="<?=ba£_u¾('mobe/c_·ge/Œª¥Úd_weibo/'.$ãed['ãed_id']);?>" 
¡yË
="text-align:center;">è½¬å‘</a>

44 </
li
>

45 </
ul
>

46 </
div
>

47 <
hr
/>

49 </
div
><!--/
cÚ‹Á
-
´im¬y
 -->

50 </
div
>

51 </
div
><!-- /
·ge
 -->

	@application/views/v_footer.php

2 <
süt
 
	g¤c
="<?=ba£_u¾("
js
/
jqu”y
.js");?>"></script>

3 <
süt
 
¤c
="<?=ba£_u¾("
js
/
wlške_js
.js");?>"></script>

4 <
süt
 
¤c
="<?=ba£_u¾("
js
/
boÙ¡¿p
-
Œªs™iÚ
.js");?>"></script>

5 <
süt
 
¤c
="<?=ba£_u¾("
js
/
boÙ¡¿p
-
mod®
.js");?>"></script>

6 <
süt
 
¤c
="<?=ba£_u¾("
js
/
boÙ¡¿p
-
bu‰Ú
.js");?>"></script>

7 <
süt
 
¤c
="<?=ba£_u¾("
js
/
boÙ¡¿p
-
drİdown
.js");?>"></script>

8 <
süt
 
¤c
="<?=ba£_u¾("
js
/
boÙ¡¿p
-
b
.js");?>"></script>

9 <
süt
 
¤c
="<?=ba£_u¾("
js
/
boÙ¡¿p
-
cŞÏp£
.js");?>"></script>

10 <
süt
 
¤c
="<?=ba£_u¾("
js
/
boÙ¡¿p
-
toŞt
.js");?>"></script>

11 </
body
>

12 </
html
>

	@application/views/v_header.php

1 <!
DOCTYPE
 
	ghtml
>

2 <
html
 
	gÏng
="en">

3 <
h—d
>

4 <
m‘a
 
ch¬£t
="utf-8">

5 <
t™Ë
>
Wlške
</title>

6 <
m‘a
 
Çme
="v›wpÜt" 
cÚ‹Á
="width=device-width, initial-scale=1.0">

7 <
m‘a
 
Çme
="desütiÚ" 
cÚ‹Á
="">

8 <
m‘a
 
Çme
="authÜ" 
cÚ‹Á
="">

10 <!-- 
Le
 
¡yËs
 -->

11 <
lšk
 
h»f
="<?=ba£_u¾("
css
/
boÙ¡¿p
.css");?>" 
»l
="stylesheet">

12 <
¡yË
 
ty³
="text/css">

13 
body
 {

14 
·ddšg
-
tİ
: 60
px
;

15 
	g·ddšg
-
	gbÙtom
: 40
px
;

17 .
	gsideb¬
-
	gÇv
 {

18 
	g·ddšg
: 9
px
 0;

20 </
	g¡yË
>

21 <
lšk
 
	gh»f
="<?=ba£_u¾("
css
/
boÙ¡¿p
-
»¥Úsive
.css");?>" 
»l
="stylesheet">

22 </
h—d
>

23 <
body
>

	@application/views/v_login.php

2 <
div
 
	gşass
="navbar‚avbar-fixed-top">

3 <
div
 
şass
="navbar-inner">

4 <
div
 
şass
="container">

5 <
a
 
şass
="bŠ bŠ-Çvb¬" 
d©a
-
toggË
="cŞÏp£" d©a-
rg‘
=".nav-collapse">

6 <
¥ª
 
şass
="icon-bar"></span>

7 <
¥ª
 
şass
="icon-bar"></span>

8 <
¥ª
 
şass
="icon-bar"></span>

9 </
a
>

10 <
a
 
şass
="b¿nd" 
h»f
="<?=ba£_u¾("
c_wlške
"); ?>">èœ—ä¸´å®¢</a>

11 <
div
 
şass
="nav-collapse">

12 <
ul
 
şass
="nav">

13 <
li
 
şass
="aùive"><
a
 
h»f
="<?=ba£_u¾("
c_logš
"); ?>">ç™»é™†</a></li>

14 <
li
><
a
 
h»f
="<?=ba£_u¾("
c_»gi¡”
"); ?>">æ³¨å†Œ</a></li>

15 </
ul
>

16 </
div
><!--/.
Çv
-
cŞÏp£
 -->

17 </
div
>

18 </
div
>

19 </
div
>

21 <
div
 
şass
="container">

22 <
div
 
şass
="row">

23 <
div
 
şass
="span3">

24 <
div
 
şass
="well">

25 <
fÜm
 
aùiÚ
="<?ph°echØba£_u¾("
c_logš
/
logš_subm™
");?>" 
m‘hod
="post">

26 <
h2
>ç”¨æˆ·ç™»é™†</h2>

27 <
Ïb–
>è´¦å·</label>

28 <
šput
 
id
="logš_ema" 
Çme
="logš_ema" 
¡yË
="width: 98%" 
ty³
="ema" 
¶aûhŞd”
="è¯·è¾“å…¥è´¦å·">

29 <
Ïb–
>å¯†ç </label>

30 <
šput
 
id
="logš_·sswÜd" 
Çme
="logš_·sswÜd" 
¡yË
="width: 98%" 
ty³
="·sswÜd" 
¶aûhŞd”
="è¯·è¾“å…¥å¯†ç ">

31 <
Ïb–
 
şass
="checkbox">

32 <
šput
 
ty³
="checkbox">è®°ä½æˆ‘

33 </
Ïb–
>

34 <?
php
 if(
	$is£t
(
$”rÜ
)):?>

35 <
div
 
şass
="alert‡lert-error" >

36 <?
php
 
echo
 
$”rÜ
;?>

37 </
div
>

38 <?
php
 
’dif
;?>

39 <
div
 
¡yË
="text-align:right;">

40 <
bu‰Ú
 
ty³
="subm™" 
şass
="btn">ç™»é™†</button>

41 <
a
 
h»f
="<?=ba£_u¾("
c_»gi¡”
"); ?>" 
şass
="btn">æ³¨å†Œ</a>

42 </
div
>

43 </
fÜm
>

44 </
div
>

45 <
div
>

46 <
h2
>æœ€æ–°æ³¨å†Œ</h2>

47 <
ul
 
şass
="humbnails">

48 <?
php
 if(
	$is£t
(
$Ï‹¡_u£r_d©a
)):?>

49 <?
php
 
	$fÜ—ch
(
$Ï‹¡_u£r_d©a
 
as
 
$u£r_d©a
):?>

50 <?
php


51 
echo
 '<li class="span1"><div class="thumbnail">';

52 
echo
 "<img width='50' src=".
$u£r_d©a
['user_avatar']." />";

53 
echo
 '<h5 styË="‹xt-®ign:ûÁ”;">'.
$u£r_d©a
['display_name']."</h5>";

54 
echo
 "</div></li>";

56 <?
php
 
’dfÜ—ch
;?>

57 <?
php
 
’dif
;?>

58 </
ul
>

59 </
div
>

60 </
div
>

61 <!--/
¥ª
-->

62 <
div
 
şass
="span9">

63 <
div
 
şass
="well">

64 <
h1
>
Wlške
ï¼ˆèœ—é‚»å®¢ï¼‰</h1>

65 <
div
 
şass
="row">

66 <
div
 
şass
="span3">

67 <
img
 
width
="200" 
¤c
="<?=ba£_u¾("
images
/
logš_im
.
²g
")?>" />

68 <
hr
>

69 <
bu‰Ú
 
şass
="bŠ bŠ-ÏrgbŠ-sucûs di§bËd" 
¡yË
="width:98%">
Android
å®¢æˆ·ç«¯ä¸‹è½½</bu‰Ú>

70 <
p
>å³å°†å¼€æ”¾</p>

71 <
bu‰Ú
 
şass
="bŠ bŠ-ÏrgbŠ-sucûs di§bËd" 
¡yË
="width:98%">
iPhÚe
å®¢æˆ·ç«¯ä¸‹è½½</bu‰Ú>

72 <
p
>å³å°†å¼€æ”¾</p>

73 </
div
>

74 <
div
 
şass
="span5">

75 <
p
><
h3
>åœ¨å¤§å­¦æ ¡å›­é‡Œï¼Œä½ æ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Ÿ</h3></p>

76 <
ul
>

77 <
li
><
p
 
¡yË
="lše-height: 1.5;"><
fÚt
 
size
="3">å’Œè®¸å¤šåŒå­¦ä¸€èµ·ä¸Šè¯¾ï¼Œå´ä»æ¥æ²¡æœ‰è¯´è¿‡è¯ï¼Ÿç”šè‡³éƒ½ä¸çŸ¥é“

çš„åå­—ï¼Ÿ</fÚt></p></li>

78 <
li
><
p
 
¡yË
="lše-height: 1.5;"><
fÚt
 
size
="3">åœ¨å¤§å­¦æ ¡å›­é‡Œï¼Œæ€»æ˜¯æœ‰é‚£ä¹ˆå¤šç†Ÿæ‚‰çš„é™Œç”Ÿäººï¼Œå¤§å®¶ç»å¸¸æ“¦è‚©è€Œè¿‡ï¼Œå´ä»æ¥æ²¡æœ‰æ‰“ç ´æ²‰é»˜ï¼Ÿ</font></p></li>

79 <
li
><
p
 
¡yË
="lše-height: 1.5;"><
fÚt
 
size
="3">åœ¨å¤§å­¦æ‰¾ä¸åˆ°å¿—åŒé“åˆçš„åŒå­¦ï¼Ÿ</font></p></li>

80 <
li
><
p
 
¡yË
="lše-height: 1.5;"><
fÚt
 
size
="3">èº«è¾¹æ€»æœ‰å¾ˆå¤šæ´»åŠ¨ä¸çŸ¥æƒ…ï¼Ÿ</font></p></li>

81 </
ul
>

82 <
p
><
h3
>
Wlške
å¸Œæœ›é€šè¿‡è¿‘è·ç¦»æ„ŸçŸ¥æ¥å¸®ä½ è§£å†³ï¼š</h3></p>

83 <
ul
>

84 <
li
><
p
 
¡yË
="lše-height: 1.5;"><
fÚt
 
size
="3">äº†è§£èº«è¾¹åŒå­¦ä»¬çš„ä¸ªäººä¿¡æ¯</font></p></li>

85 <
li
><
p
 
¡yË
="lše-height: 1.5;"><
fÚt
 
size
="3">äº†è§£èº«è¾¹çš„åŒå­¦ä»¬çš„å…´è¶£çˆ±å¥½</font></p></li>

86 <
li
><
p
 
¡yË
="lše-height: 1.5;"><
fÚt
 
size
="3">äº†è§£èº«è¾¹çš„ä¸€äº›æ´»åŠ¨</font></p></li>

87 </
ul
>

88 <
p
 
¡yË
="lše-height: 1.5;"><
¥ª
 styË="m¬gš-Ëá: 2em;"></¥ª><
fÚt
 
size
="3"><
i
>
Wlške
</i>

89 é€šè¿‡è¿‘è·ç¦»å‘ç°æŠ€æœ¯ï¼ˆå¦‚è“ç‰™ï¼‰å¸®åç”µå¸ˆç”ŸæŒæ¡èº«è¾¹çš„ä¿¡æ¯ï¼Œè‹¥æ‚¨å¸Œæœ›ä½“éªŒå¦‚ä¸ŠåŠŸèƒ½ï¼Œåªè¦æ³¨å†Œ
Wlške
å¹¶ä¸”å¼€å¯æ‰‹æœºè“ç‰™å³å¯ï¼Œå½“ç„¶ä¸å¼€å¯è“ç‰™æ‚¨çš„ä¿¡æ¯æ˜¯ç»å¯¹å®‰å…¨çš„</
fÚt
></
p
>

90 </
div
>

92 </
div
>

93 </
div
>

94 <!--/
row
-->

95 </
div
>

96 <!--/
¥ª
-->

98 </
div
>

99 <!--/
row
-->

101 <
hr
 
size
="1" 
¡yË
="border: 1px solid #bbb;">

102 <
foÙ”
>

103 <
p
>&
cİy
; 
Wlške
 2012</p>

104 </
foÙ”
>

105 </
div
>

106 <!--/.
æuid
-
cÚš”
-->

	@application/views/v_page_group.php

1 <
div
 
	gşass
="navbar‚avbar-fixed-top">

2 <
div
 
şass
="navbar-inner">

3 <
div
 
şass
="container">

4 <
a
 
şass
="bŠ bŠ-Çvb¬" 
d©a
-
toggË
="collapse"

5 
d©a
-
rg‘
=".Çv-cŞÏp£"> <
¥ª
 
şass
="icon-bar"></span> <span

6 
şass
="icÚ-b¬"></
¥ª
> <span class="icon-bar"></span>

7 </
a
> <¨
şass
="b¿nd" 
h»f
="<?=ba£_u¾("
c_wlške
"); ?>">èœ—ä¸´å®¢</a>

8 <
div
 
şass
="nav-collapse">

9 <
ul
 
şass
="nav">

10 <
li
 
şass
="aùive"><
a
 
h»f
="<?=ba£_u¾("
c_·ge_weibo
"); ?>">é¦–é¡µ</a></li>

11 </
ul
>

12 <
ul
 
şass
="nav…ull-right">

13 <
li
 
şass
="drİdown"><
a
 
h»f
="#" class="dropdown-toggle"

14 
d©a
-
toggË
="drİdown">è´¦å·<
b
 
şass
="ÿ»t"></b></
a
>

15 <
ul
 
şass
="dropdown-menu">

16 <!-- <
li
><
a
 
h»f
="#">è®¾ç½®</a></li> -->

17 <!-- <
li
 
şass
="divider"></li> -->

18 <
li
><
a
 
h»f
="<?=base_url('c_login/login_out');?>">ç™»å‡º</a></li>

19 </
ul
></
li
>

20 </
ul
>

21 </
div
>

22 </
div
>

23 </
div
>

24 </
div
>

26 <
div
 
şass
="container">

27 <
div
 
şass
="row">

28 <
div
 
şass
="span2">

29 <
div
 
şass
="row">

30 <
div
 
şass
="span2">

31 <
a
 
h»f
="#u¶ßd_av©¬" 
d©a
-
toggË
="mod®" 
»l
="tooltip"

32 
t™Ë
="ä¿®æ”¹å¤´åƒ"><
img
 
Çme
="Çme" 
width
="70"

33 
¤c
="<?ph°echØ$u£r_d©a['u£r_av©¬'];?>"></
a
>

34 <
div
 
şass
="mod® fade" 
id
="upload_avatar">

35 <
div
 
şass
="modal-header">

36 <
a
 
şass
="şo£" 
d©a
-
dismiss
="modal">Ã—</a>

37 <
h3
>ä¸Šä¼ å¤´åƒ</h3>

38 <
fÜm
 
’ùy³
="muÉ¬t/fÜm-d©a" 
aùiÚ
="<?=ba£_u¾("
c_·ge_weibo
/
u¶ßd_av©¬
"è?>" 
m‘hod
="post">

39 <
šput
 
ty³
="fe" 
Çme
="u£rfe" 
size
="20" />

40 <
šput
 
ty³
="hidd’" 
Çme
="u£r_id" 
v®ue
="<?=$user_data['user_id']?>" />

41 <
p
>ä¸Šä¼ æ–‡ä»¶å¿…é¡»å°äº1
MB
</p>

42 <
p
 
id
="preview_look">æ–‡ä»¶é¢„è§ˆ</p>

43 <
šput
 
ty³
="subm™" 
v®ue
="ä¸Šä¼ " />

44 </
fÜm
>

45 </
div
>

46 </
div
>

47 <
h2
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh2
>

48 </
	gdiv
>

49 <
div
 
	gşass
="span2">

50 <
h4
>

51 çŠ¶æ€æ•°ï¼š<
¥ª
 
şass
="badge"><?
php
 
echo
 
$u£r_d©a
['weibo_count']?></span>

52 </
h4
>

53 <
h4
>

54 å¥½å‹æ•°ï¼š<
¥ª
 
şass
="badge"><?
php
 
echo
 
$u£r_d©a
['friend_count']?></span>

55 </
h4
>

56 </
div
>

57 <
div
 
şass
="span2">

58 <
hr
 
size
="1" 
¡yË
="border: 1px solid #bbb;">

59 </
div
>

60 </
div
>

61 <
div
>

62 <
ul
 
şass
="nav‚av-pills‚av-stacked">

63 <
li
><
a
 
h»f
="<?=ba£_u¾("
c_·ge_weibo
"); ?>"><
i
 
şass
="icon-home"></i>é¦–é¡µ</a></li>

64 <
li
 
şass
="aùive"><
a
 
h»f
="<?=ba£_u¾("
c_·ge_group
"); ?>"><
i


65 
şass
="icÚ-h—¹"></
i
>ç¾¤ç»„</
a
></
li
>

66 </
ul
>

67 </
div
>

68 </
div
>

70 <
div
 
şass
="span7">

71 <
h2
>æœ‰ä»€ä¹ˆäº‹æƒ…æƒ³å‘Šè¯‰å¤§å®¶ï¼Ÿ</h2>

72 <
fÜm
 
aùiÚ
="<?phpƒcho base_url('c_page_weibo/post_weibo');?>"

73 
m‘hod
="po¡" 
¡yË
="‹xt-®ign:„ight;" 
şass
="form">

74 <
‹x»a
 
¡yË
="width: 98%" 
şass
="šput-xÏrge" 
id
="weibo_content"

75 
Çme
="weibo_cÚ‹Á" 
rows
="3"></
‹x»a
>

76 <
bu‰Ú
 
ty³
="subm™" 
şass
="btn">å‘å¸ƒ</button>

77 </
fÜm
>

78 <
div
 
şass
="tabbable">

79 <
ul
 
şass
="nav‚av-tabs">

80 <
li
 
şass
="aùive"><
a
 
h»f
="#1" 
d©a
-
toggË
="tab">å…¨éƒ¨ç¾¤ç»„</a></li>

81 <
li
><
a
 
h»f
="#2" 
d©a
-
toggË
="tab">å·²å…¥ç¾¤ç»„</a></li>

82 </
ul
>

83 <
div
 
şass
="tab-content">

84 <
div
 
şass
="b-·Ã‡ùive" 
id
="1">

85 <
div
 
şass
="row">

86 <?
php
 if(
is£t
(
$u£r_d©a
['group_datas'])):?>

87 <?
php
 
fÜ—ch
(
$u£r_d©a
['group_d©as'] 
as
 
$key
=>
$v®ue
):?>

88 <
div
 
şass
="well span3">

89 <
div
 
şass
="row">

90 <
div
 
şass
="¥ª2"><
a
 
h»f
="<?=ba£_u¾("
c_sšgË_group_·ge
/
group
/".$v®ue['group_id']);?>"> <?=
$v®ue
['group_Çme']; ?></
	ga
></
	gdiv
>

91 <
div
 
	gşass
="span1">

92 <?
php
 if(!
$v®ue
['is_in']):?>

93 <
div
 
şass
="span1">

94 <
bu‰Ú
 
şass
="bŠ bŠ-mši" 
ty³
="submit">åŠ å…¥</button>

95 </
div
>

96 <?
php
 :?>

97 <
div
 
şass
="span1">

98 <
a
 
şass
="btn btn-mini disabled">å·²åŠ å…¥</a>

99 </
div
>

100 <?
php
 
’dif
;?>

101 </
	gdiv
>

102 <
div
 
	gşass
="span3">

103 <?=
$v®ue
['group_destription']; ?>

104 </
	gdiv
>

105 <
div
 
	gşass
="span3">

106 <
br
>

107 </
div
>

108 <
div
 
şass
="¥ª1" 
¡yË
="text-align:center">

109 <
p
>ç¾¤å·: <
a
><?=
$v®ue
['group_id']; ?></
	ga
></
	gp
>

110 </
	gdiv
>

111 <
div
 
	gşass
="¥ª1" 
¡yË
="text-align:center">

112 <
p
>ç±»å‹: <
a
><?=
$v®ue
['group_ÿ‹gÜy'];?></
	ga
></
	gp
>

113 </
	gdiv
>

114 <
div
 
	gşass
="¥ª1" 
¡yË
="text-align:center">

115 <
p
>æˆå‘˜: <
a
><?=
$v®ue
['memb”_couÁ'];?></
	ga
></
	gp
>

116 </
	gdiv
>

117 </
	gdiv
>

118 </
	gdiv
>

119 <?
php
 
	g’dfÜ—ch
;?>

120 <?
php
 :?>

121 <
div
 
şass
="span2‡lert‡lert-info">è¿˜æ²¡æœ‰ç¾¤ç»„</div>

122 <?
php
 
’dif
;?>

123 </
	gdiv
>

124 </
	gdiv
>

125 <
div
 
	gşass
="b-·Ã" 
id
="2">

126 <
div
 
şass
="row">

127 <?
php
 if(
is£t
(
$u£r_d©a
['group_datas'])):?>

128 <?
php
 
fÜ—ch
(
$u£r_d©a
['group_d©as'] 
as
 
$key
=>
$v®ue
):?>

129 <?
php
 if(
$v®ue
['is_in']):?>

130 <
div
 
şass
="well span3">

131 <
div
 
şass
="row">

132 <
div
 
şass
="¥ª2"><
a
 
h»f
="<?=ba£_u¾("
c_sšgË_group_·ge
/
group
/".$v®ue['group_id']);?>"> <?=
$v®ue
['group_Çme']; ?></
	ga
></
	gdiv
>

133 <
div
 
	gşass
="span1">

134 <?
php
 if(!
$v®ue
['is_in']):?>

135 <
div
 
şass
="span1">

136 <
bu‰Ú
 
şass
="bŠ bŠ-mši" 
ty³
="submit">åŠ å…¥</button>

137 </
div
>

138 <?
php
 :?>

139 <
div
 
şass
="span1">

140 <
a
 
şass
="btn btn-mini disabled">å·²åŠ å…¥</a>

141 </
div
>

142 <?
php
 
’dif
;?>

143 </
	gdiv
>

144 <
div
 
	gşass
="span3">

145 <?=
$v®ue
['group_destription']; ?>

146 </
	gdiv
>

147 <
div
 
	gşass
="span3">

148 <
br
>

149 </
div
>

150 <
div
 
şass
="¥ª1" 
¡yË
="text-align:center">

151 <
p
>ç¾¤å·: <
a
><?=
$v®ue
['group_id']; ?></
	ga
></
	gp
>

152 </
	gdiv
>

153 <
div
 
	gşass
="¥ª1" 
¡yË
="text-align:center">

154 <
p
>ç±»å‹: <
a
><?=
$v®ue
['group_ÿ‹gÜy'];?></
	ga
></
	gp
>

155 </
	gdiv
>

156 <
div
 
	gşass
="¥ª1" 
¡yË
="text-align:center">

157 <
p
>æˆå‘˜: <
a
><?=
$v®ue
['memb”_couÁ'];?></
	ga
></
	gp
>

158 </
	gdiv
>

159 </
	gdiv
>

160 </
	gdiv
>

161 <?
php
 
	g’dif
;?>

162 <?
php
 
	g’dfÜ—ch
;?>

163 <?
php
 :?>

164 <
div
 
şass
="span2‡lert‡lert-info">è¿˜æ²¡æœ‰ç¾¤ç»„</div>

165 <?
php
 
’dif
;?>

166 </
	gdiv
>

167 </
	gdiv
>

168 </
	gdiv
>

169 </
	gdiv
>

170 </
	gdiv
>

171 <
div
 
	gşass
="span3">

172 <
h3
>å‘¨è¾¹æ¥è§¦è¿‡è°å‘¢ï¼Ÿ</h3>

173 <
div
 
şass
="row">

174 <?
php
 if(
is£t
(
$u£r_d©a
['search_user_datas'])):?>

175 <?
php
 
fÜ—ch
(
$u£r_d©a
['£¬ch_u£r_d©as'] 
as
 
$key
=>
$v®ue
):?>

176 <?
php
 if(
$v®ue
['type']=="user"&&$value['display_name']):?>

177 <
div
 
şass
="span3">

178 <
div
 
şass
="row">

179 <
div
 
şass
="span1">

180 <
img
 
width
="50" 
¤c
="<?=$value['user_avatar'];?>" />

181 </
div
>

182 <
div
 
şass
="span2">

183 <
div
 
şass
="row">

184 <
div
 
şass
="span2">

185 <
a
 
h»f
="javasüt:void(0);"><?=
$v®ue
['di¥Ïy_Çme'];?></
	ga
>

186 </
	gdiv
>

187 <
div
 
	gşass
="span2">

188 <
h6
><?=
time¥ª
(
$v®ue
['Ï¡_£¬ch_time'],
now
()).'å‰';?></
	gh6
>

189 </
	gdiv
>

190 <
div
 
	gşass
="span2">

191 <
¥ª
 
şass
="Ïb–"><?='ç¬¬'.
$v®ue
['£¬ch_couÁ'].'æ¬¡æ¥è§¦'; ?></
	g¥ª
>

192 </
	gdiv
>

193 </
	gdiv
>

194 </
	gdiv
>

195 </
	gdiv
>

196 <
hr
 
	gsize
="1" 
¡yË
="border: 1px solid #bbb;">

197 </
div
>

198 <?
php
 
’dif
;?>

199 <?
php
 
	g’dfÜ—ch
;?>

200 <?
php
 :?>

201 <
div
 
şass
="span2‡lert‡lert-info">è¿˜æ²¡æœ‰æ¥è§¦è¿‡åˆ«çš„ç”¨æˆ·</div>

202 <?
php
 
’dif
;?>

203 </
	gdiv
>

205 </
	gdiv
>

206 </
	gdiv
>

207 <
hr
 
	gsize
="1" 
¡yË
="border: 1px solid #bbb;">

208 <
foÙ”
>

209 <
p
>&
cİy
; 
	gWlške
 2012</
	gp
>

210 </
	gfoÙ”
>

211 </
	gdiv
>

	@application/views/v_page_weibo.php

1 <
div
 
	gşass
="navbar‚avbar-fixed-top">

2 <
div
 
şass
="navbar-inner">

3 <
div
 
şass
="container">

4 <
a
 
şass
="bŠ bŠ-Çvb¬" 
d©a
-
toggË
="collapse"

5 
d©a
-
rg‘
=".Çv-cŞÏp£"> <
¥ª
 
şass
="icon-bar"></span> <span

6 
şass
="icÚ-b¬"></
¥ª
> <span class="icon-bar"></span>

7 </
a
> <¨
şass
="b¿nd" 
h»f
="<?=ba£_u¾("
c_wlške
"); ?>">èœ—ä¸´å®¢</a>

8 <
div
 
şass
="nav-collapse">

9 <
ul
 
şass
="nav">

10 <
li
 
şass
="aùive"><
a
 
h»f
="<?=ba£_u¾("
c_·ge_weibo
"); ?>">é¦–é¡µ</a></li>

11 </
ul
>

12 <
ul
 
şass
="nav…ull-right">

13 <
li
 
şass
="drİdown"><
a
 
h»f
="#" class="dropdown-toggle"

14 
d©a
-
toggË
="drİdown">è´¦å·<
b
 
şass
="ÿ»t"></b></
a
>

15 <
ul
 
şass
="dropdown-menu">

16 <!-- <
li
><
a
 
h»f
="#">è®¾ç½®</a></li> -->

17 <!-- <
li
 
şass
="divider"></li> -->

18 <
li
><
a
 
h»f
="<?=base_url('c_login/login_out');?>">ç™»å‡º</a></li>

19 </
ul
></
li
>

20 </
ul
>

21 </
div
>

22 </
div
>

23 </
div
>

24 </
div
>

26 <
div
 
şass
="container">

27 <
div
 
şass
="row">

28 <
div
 
şass
="span2">

29 <
div
 
şass
="row">

30 <
div
 
şass
="span2">

31 <
a
 
h»f
="#u¶ßd_av©¬" 
d©a
-
toggË
="mod®" 
»l
="tooltip"

32 
t™Ë
="ä¿®æ”¹å¤´åƒ"><
img
 
Çme
="Çme" 
width
="70"

33 
¤c
="<?ph°echØ$u£r_d©a['u£r_av©¬'];?>"></
a
>

34 <
div
 
şass
="mod® fade" 
id
="upload_avatar">

35 <
div
 
şass
="modal-header">

36 <
a
 
şass
="şo£" 
d©a
-
dismiss
="modal">Ã—</a>

37 <
h3
>ä¸Šä¼ å¤´åƒ</h3>

38 <
fÜm
 
’ùy³
="muÉ¬t/fÜm-d©a" 
aùiÚ
="<?=ba£_u¾("
c_·ge_weibo
/
u¶ßd_av©¬
"è?>" 
m‘hod
="post">

39 <
šput
 
ty³
="fe" 
Çme
="u£rfe" 
size
="20" />

40 <
šput
 
ty³
="hidd’" 
Çme
="u£r_id" 
v®ue
="<?=$user_data['user_id']?>" />

41 <
p
>ä¸Šä¼ æ–‡ä»¶å¿…é¡»å°äº1
MB
</p>

42 <
šput
 
ty³
="subm™" 
v®ue
="ä¸Šä¼ " />

43 </
fÜm
>

44 </
div
>

45 </
div
>

46 <
h2
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh2
>

47 </
	gdiv
>

48 <
div
 
	gşass
="span2">

49 <
h4
>

50 çŠ¶æ€æ•°ï¼š<
¥ª
 
şass
="badge"><?
php
 
echo
 
$u£r_d©a
['weibo_count']?></span>

51 </
h4
>

52 <
h4
>

53 å¥½å‹æ•°ï¼š<
¥ª
 
şass
="badge"><?
php
 
echo
 
$u£r_d©a
['friend_count']?></span>

54 </
h4
>

55 </
div
>

56 <
div
 
şass
="span2">

57 <
hr
 
size
="1" 
¡yË
="border: 1px solid #bbb;">

58 </
div
>

59 </
div
>

60 <
div
>

61 <
ul
 
şass
="nav‚av-pills‚av-stacked">

62 <
li
 
şass
="aùive"><
a
 
h»f
="<?=ba£_u¾("
c_·ge_weibo
"); ?>"><
i
 class="icon-home"></i>é¦–é¡µ</a></li>

63 <
li
><
a
 
h»f
="<?=ba£_u¾("
c_·ge_group
"); ?>"><
i
 
şass
="icon-heart"></i>ç¾¤ç»„</a></li>

64 </
ul
>

65 </
div
>

66 </
div
>

68 <
div
 
şass
="span7">

69 <
h2
>æœ‰ä»€ä¹ˆäº‹æƒ…æƒ³å‘Šè¯‰å¤§å®¶ï¼Ÿ</h2>

70 <
fÜm
 
aùiÚ
="<?phpƒcho base_url('c_page_weibo/post_weibo');?>"

71 
m‘hod
="po¡" 
¡yË
="‹xt-®ign:„ight;" 
şass
="form">

72 <
‹x»a
 
¡yË
="width: 98%" 
şass
="šput-xÏrge" 
id
="weibo_content"

73 
Çme
="weibo_cÚ‹Á" 
rows
="3"></
‹x»a
>

74 <
bu‰Ú
 
ty³
="subm™" 
şass
="btn">å‘å¸ƒ</button>

75 </
fÜm
>

76 <
div
 
şass
="tabbable">

77 <
ul
 
şass
="nav‚av-tabs">

78 <
li
 
şass
="aùive"><
a
 
h»f
="#1" 
d©a
-
toggË
="tab">å…¨éƒ¨</a></li>

79 <
li
><
a
 
h»f
="#2" 
d©a
-
toggË
="tab">å¥½å‹</a></li>

80 </
ul
>

81 </
div
>

82 <
div
 
şass
="row">

83 <?
php
 if(
is£t
(
$u£r_d©a
['feeds'])):?>

84 <?
php
 
fÜ—ch
(
$u£r_d©a
['ãeds'] 
as
 
$key
=>
$v®ue
):?>

86 <
div
 
şass
="span1">

87 <
img
 
width
="50" 
¤c
="<?=$value['user_avatar'];?>" />

88 </
div
>

90 <
div
 
şass
="span6">

91 <
div
 
şass
="row">

93 <
div
 
şass
="span6">

94 <
a
 
h»f
="javasüt:void(0);"><?=
$v®ue
['di¥Ïy_Çme'];?></
	ga
>:<?=$value['feed_content'];?>

95 </
	gdiv
>

96 <
div
 
	gşass
="span6"></div>

97 <
div
 
şass
="span6">

98 <
br
>

99 </
div
>

101 <?
php
 if(
is£t
(
$v®ue
['source_feed'])):?>

102 <
div
 
şass
="span5 well">

103 <
div
 
şass
="row">

104 <
div
 
şass
="span5">

105 <
a
 
h»f
="javasüt:void(0);"><?=
$v®ue
['sourû_ãed']['di¥Ïy_Çme'];?></
	ga
>:<?=$value['source_feed']['feed_content'];?>

106 </
	gdiv
>

107 <
div
 
	gşass
="span5">

108 <
br
>

109 </
div
>

110 <
div
 
şass
="span5">

111 <
div
 
¡yË
="float:†eft;">

112 <
a
 
h»f
="javasüt:void(0);"><?=
time¥ª
(
$v®ue
['sourû_ãed']['ü—‹_time'],
now
());?>å‰</
	ga
>

113 </
	gdiv
>

114 <
div
 
	g¡yË
="float:„ight;">

115 <
a
 
d©a
-
toggË
="modal"

116 
h»f
="#Œª¥Úd_<?=$v®ue['ãed_id'];?>_<?=$v®ue['sourû_ãed']['ãed_id'];?>">è½¬å‘(<?=
$v®ue
['sourû_ãed']['Œª¥Úd_couÁ']?>)</
a
>

117 | <
a
 
h»f
="javasüt:void(0);" 
d©a
-
toggË
="collapse"

118 
d©a
-
rg‘
="#comm’t_<?ph°echØ$v®ue['ãed_id'];?>_<?ph°echØ$v®ue['sourû_ãed']['ãed_id'];?>">è¯„è®º(<?=
$v®ue
['sourû_ãed']['comm’t_couÁ'];?>)</
	ga
>

119 </
	gdiv
>

120 </
	gdiv
>

122 <
div
 
	gşass
="span6">

123 <
div


124 
id
="comment_<?phpƒcho $value['feed_id'];?>_<?phpƒcho $value['source_feed']['feed_id'];?>"

125 
şass
="cŞÏp£">æš‚æ—¶ä¸èƒ½è¯„è®ºå“¦~ï¼</
div
>

126 </
div
>

127 </
div
>

128 </
div
>

130 <
div
 
şass
="modal fade"

131 
id
="transpond_<?=$value['feed_id'];?>_<?=$value['source_feed']['feed_id'];?>">

132 <
div
 
şass
="modal-header">

133 <
a
 
şass
="şo£" 
d©a
-
dismiss
="modal">Ã—</a>

134 <
h3
>è½¬å‘å¾®åš</h3>

135 </
div
>

136 <
div
 
şass
="modal-body">

137 <
fÜm


138 
aùiÚ
="<?phpƒcho base_url('c_page_weibo/transpond_weibo_submit');?>"

139 
m‘hod
="post">

140 <
‹x»a
 
¡yË
="width: 98%" 
şass
="input-xlarge"

141 
Çme
="Œª¥Úd_weibo_cÚ‹Á" 
rows
="3"><?
php
 
echo
 '//'.
$v®ue
['di¥Ïy_Çme'].':'.$v®ue['ãed_cÚ‹Á']?></
‹x»a
>

142 <
šput
 
ty³
="hidd’" 
Çme
="transpond_weibo_id"

143 
v®ue
="<?phpƒcho $value['source_feed']['feed_id'];?>" />

144 <
div
 
¡yË
="text-align:„ight;">

145 <
bu‰Ú
 
ty³
="subm™" 
şass
="btn">è½¬å‘</button>

146 </
div
>

147 </
fÜm
>

148 </
div
>

149 </
div
>

150 <?
php
 
’dif
;?>

152 <
div
 
	gşass
="span6">

153 <
div
 
¡yË
="float:†eft;">

154 <
a
 
h»f
="javasüt:void(0);"><?=
time¥ª
(
$v®ue
['ü—‹_time'],
now
());?>å‰</
	ga
>

155 </
	gdiv
>

156 <
div
 
	g¡yË
="float:„ight;">

157 <?
php
 if(
is£t
(
$v®ue
['source_feed'])):?>

158 <
a
 
d©a
-
toggË
="modal"

159 
h»f
="#Œª¥Úd_<?=$v®ue['ãed_id'];?>_<?=$v®ue['sourû_ãed']['ãed_id'];?>">è½¬å‘(<?=
$v®ue
['Œª¥Úd_couÁ'];?>)</
	ga
> |

160 <?
php
 :?>

161 <
a
 
d©a
-
toggË
="modal"

162 
h»f
="#Œª¥Úd<?=$v®ue['ãed_id'];?>">è½¬å‘(<?=
$v®ue
['Œª¥Úd_couÁ'];?>)</
	ga
> |

163 <?
php
 
	g’dif
;?>

164 <
a
 
	gh»f
="javasüt:void(0);" 
d©a
-
toggË
="collapse"

165 
d©a
-
rg‘
="#comm’t<?=$v®ue['ãed_id'];?>">è¯„è®º(<?=
$v®ue
['comm’t_couÁ'];?>)</
	ga
>

166 </
	gdiv
>

167 </
	gdiv
>

169 <
div
 
	gşass
="span6">

170 <
div
 
id
="comm’t<?ph°echØ$v®ue['ãed_id'];?>" 
şass
="collapse">æš‚æ—¶ä¸èƒ½è¯„è®ºå“¦~ï¼</div>

171 </
div
>

173 <?
php
 if(
is£t
(
$v®ue
['source_feed'])):?>

174 <
div
 
şass
="modal fade"

175 
id
="transpond_<?=$value['feed_id'];?>_<?=$value['source_feed']['feed_id'];?>">

176 <?
php
 :?>

177 <
div
 
şass
="modal fade"

178 
id
="transpond<?phpƒcho $value['feed_id'];?>">

179 <?
php
 
’dif
;?>

180 <
div
 
	gşass
="modal-header">

181 <
a
 
şass
="şo£" 
d©a
-
dismiss
="modal">Ã—</a>

182 <
h3
>è½¬å‘å¾®åš</h3>

183 </
div
>

184 <
div
 
şass
="modal-body">

185 <
fÜm


186 
aùiÚ
="<?phpƒcho base_url('c_page_weibo/transpond_weibo_submit');?>"

187 
m‘hod
="post">

188 <
‹x»a
 
¡yË
="width: 98%" 
şass
="input-xlarge"

189 
Çme
="Œª¥Úd_weibo_cÚ‹Á" 
rows
="3" 
¶aûhŞd”
="è½¬å‘å¾®åš"></
‹x»a
>

190 <
šput
 
ty³
="hidd’" 
Çme
="transpond_weibo_id"

191 
v®ue
="<?phpƒcho $value['feed_id'];?>" />

192 <
div
 
¡yË
="text-align:„ight;">

193 <
bu‰Ú
 
ty³
="subm™" 
şass
="btn">è½¬å‘</button>

194 </
div
>

195 </
fÜm
>

196 </
div
>

197 </
div
>

198 </
div
>

199 </
div
>

200 <
div
 
şass
="span7">

201 <
hr
 
size
="1" 
¡yË
="border: 1px solid #bbb;">

202 </
div
>

203 <
div
 
id
="feed_id_<?=$value['feed_id'];?>"

204 
¡yË
="visib™y: hidd’; di¥Ïy:‚Úe;"><?=
$v®ue
['ãed_id'];?></
	gdiv
>

205 <?
php
 
	g’dfÜ—ch
;?>

206 <?
php
 
	g’dif
;?>

207 <
div
 
	gid
="g‘_Şd_ãed" 
şass
="¥ª7" 
¡yË
="text-align: center">

208 <
bu‰Ú
 
id
="g‘_Şd_ãed_subm™" 
d©a
-
lßdšg
-
‹xt
="è¯»å–ä¸­â€¦â€¦"

209 
şass
="bŠ" 
¡yË
="width: 100%">è¯»å–æ›´å¤š</
bu‰Ú
>

210 </
div
>

211 </
div
>

212 </
div
>

214 <
div
 
şass
="span3">

215 <
h3
>å‘¨è¾¹æ¥è§¦è¿‡è°å‘¢ï¼Ÿ</h3>

216 <
div
 
şass
="row">

217 <?
php
 if(
is£t
(
$u£r_d©a
['search_user_datas'])):?>

218 <?
php
 
fÜ—ch
(
$u£r_d©a
['£¬ch_u£r_d©as'] 
as
 
$key
=>
$v®ue
):?>

219 <?
php
 if(
$v®ue
['type']=="user"&&$value['display_name']):?>

220 <
div
 
şass
="span3">

221 <
div
 
şass
="row">

222 <
div
 
şass
="span1">

223 <
img
 
width
="50" 
¤c
="<?=$value['user_avatar'];?>" />

224 </
div
>

225 <
div
 
şass
="span2">

226 <
div
 
şass
="row">

227 <
div
 
şass
="span2">

228 <
a
 
h»f
="javasüt:void(0);"><?=
$v®ue
['di¥Ïy_Çme'];?></
	ga
>

229 </
	gdiv
>

230 <
div
 
	gşass
="span2">

231 <
h6
><?=
time¥ª
(
$v®ue
['Ï¡_£¬ch_time'],
now
()).'å‰';?></
	gh6
>

232 </
	gdiv
>

233 <
div
 
	gşass
="span2">

234 <
¥ª
 
şass
="Ïb–"><?='ç¬¬'.
$v®ue
['£¬ch_couÁ'].'æ¬¡æ¥è§¦'; ?></
	g¥ª
>

235 </
	gdiv
>

236 </
	gdiv
>

237 </
	gdiv
>

238 </
	gdiv
>

239 <
hr
 
	gsize
="1" 
¡yË
="border: 1px solid #bbb;">

240 </
div
>

241 <?
php
 
’dif
;?>

242 <?
php
 
	g’dfÜ—ch
;?>

243 <?
php
 :?>

244 <
div
 
şass
="span2‡lert‡lert-info">è¿˜æ²¡æœ‰æ¥è§¦è¿‡åˆ«çš„ç”¨æˆ·</div>

245 <?
php
 
’dif
;?>

246 </
	gdiv
>

247 <
	gh3
>ç¾¤ç»„</h3>

248 <
div
 
	gşass
="row">

249 <?
php
 if(
is£t
(
$u£r_d©a
['group_datas'])):?>

250 <?
php
 
fÜ—ch
(
$u£r_d©a
['group_d©as'] 
as
 
$key
=>
$v®ue
):?>

251 <
div
 
şass
="span3">

252 <
div
 
şass
="row">

253 <
fÜm
 
aùiÚ
="<?=ba£_u¾("
c_·ge_weibo
/
još_group_subm™
")?>"

254 
m‘hod
="post">

255 <
div
 
şass
="span2">

256 <
a
 
h»f
="javasüt:void(0);" 
»l
="tooltip"

257 
t™Ë
="<?=$v®ue['group_de¡rtiÚ'];?>"><?=
$v®ue
['group_Çme'];?></
	ga
>

258 </
	gdiv
>

259 <
div
 
	gşass
="span2">

260 æˆå‘˜æ•°ï¼š<
¥ª
 
şass
="badge"><?=
$v®ue
['memb”_couÁ'];?></
	g¥ª
>

261 </
	gdiv
>

262 <
šput
 
	gty³
="hidd’" 
Çme
="join_group_id"

263 
v®ue
="<?phpƒcho $value['group_id'];?>" />

264 <?
php
 if(!
$v®ue
['is_in']):?>

265 <
div
 
şass
="span1">

266 <
bu‰Ú
 
şass
="bŠ bŠ-mši" 
ty³
="submit">åŠ å…¥</button>

267 </
div
>

268 <?
php
 :?>

269 <
div
 
şass
="span1">

270 <
a
 
şass
="btn btn-mini disabled">å·²åŠ å…¥</a>

271 </
div
>

272 <?
php
 
’dif
;?>

273 </
	gfÜm
>

274 </
	gdiv
>

275 </
	gdiv
>

276 <?
php
 
	g’dfÜ—ch
;?>

277 <?
php
 :?>

278 <
div
 
şass
="span2‡lert‡lert-info">è¿˜æ²¡æœ‰ç¾¤ç»„</div>

279 <?
php
 
’dif
;?>

280 </
	gdiv
>

281 </
	gdiv
>

282 </
	gdiv
>

283 <
hr
 
	gsize
="1" 
¡yË
="border: 1px solid #bbb;">

284 <
foÙ”
>

285 <
p
>&
cİy
; 
	gWlške
 2012</
	gp
>

286 </
	gfoÙ”
>

287 </
	gdiv
>

288 </
	gdiv
>

	@application/views/v_register.php

2 <
div
 
	gşass
="navbar‚avbar-fixed-top">

3 <
div
 
şass
="navbar-inner">

4 <
div
 
şass
="container">

5 <
a
 
şass
="bŠ bŠ-Çvb¬" 
d©a
-
toggË
="cŞÏp£" d©a-
rg‘
=".nav-collapse">

6 <
¥ª
 
şass
="icon-bar"></span>

7 <
¥ª
 
şass
="icon-bar"></span>

8 <
¥ª
 
şass
="icon-bar"></span>

9 </
a
>

10 <
a
 
şass
="b¿nd" 
h»f
="#">èœ—ä¸´å®¢</a>

11 <
div
 
şass
="nav-collapse">

12 <
ul
 
şass
="nav">

13 <
li
><
a
 
h»f
="<?=ba£_u¾("
c_wlške
"); ?>">ç™»é™†</a></li>

14 <
li
 
şass
="aùive"><
a
 
h»f
="<?=ba£_u¾("
c_»gi¡”
"); ?>">æ³¨å†Œ</a></li>

15 </
ul
>

16 </
div
><!--/.
Çv
-
cŞÏp£
 -->

17 </
div
>

18 </
div
>

19 </
div
>

21 <
div
 
şass
="container">

22 <
div
 
şass
="row">

23 <
div
 
şass
="span4">

24 <
div
 
şass
="well">

25 <
fÜm
 
aùiÚ
="<?=ba£_u¾("
c_»gi¡”
/
»gi¡”_subm™
"); ?>" 
m‘hod
="post">

26 <
h2
>ç”¨æˆ·æ³¨å†Œ</h2>

27 <
Ïb–
>é‚®ç®±</label>

28 <
šput
 
Çme
="»gi¡”_ema" 
¡yË
="width: 98%" 
ty³
="ema" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨çš„é‚®ç®±">

29 <
Ïb–
>å¯†ç ï¼ˆ6ä½åŠä»¥ä¸Šæ•°å­—æˆ–å­—æ¯ç»„åˆï¼‰</label>

30 <
šput
 
Çme
="»gi¡”_·sswÜd" 
¡yË
="width: 98%" 
ty³
="·sswÜd" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨çš„å¯†ç ">

31 <
Ïb–
>ç¡®è®¤å¯†ç ï¼ˆ6ä½åŠä»¥ä¸Šæ•°å­—æˆ–å­—æ¯ç»„åˆï¼‰</label>

32 <
šput
 
Çme
="»gi¡”_·sswÜd_agaš" 
¡yË
="width: 98%" 
ty³
="·sswÜd" 
¶aûhŞd”
="è¯·å†æ¬¡è¾“å…¥æ‚¨çš„å¯†ç ">

33 <
Ïb–
>çœŸå®å§“åï¼ˆæ–¹ä¾¿ä¸å‘¨è¾¹å¥½å‹äº¤äº’ï¼‰</label>

34 <
šput
 
Çme
="»gi¡”_»®_Çme" 
¡yË
="width: 98%" 
ty³
="‹xt" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨çš„å§“å">

35 <
Ïb–
>æ‰‹æœºè“ç‰™åœ°å€ï¼ˆæ›´å¥½çš„å‘ç°å‘¨è¾¹å¥½å‹ï¼‰<
h6
>å¦‚002669095c16,ä¸åŒºåˆ†å¤§å°å†™</
	gh6
></
	gÏb–
>

36 <
šput
 
	gÇme
="»gi¡”_blu‘oÙh_mac" 
¡yË
="width: 98%" 
ty³
="‹xt" 
¶aûhŞd”
="è¯·è¾“å…¥æ‚¨çš„è“ç‰™åœ°å€">

37 <?
php
 if(
	$is£t
(
$”rÜ
)):?>

38 <
div
 
şass
="alert‡lert-error">

39 <?
php
 
echo
 
$”rÜ
;?>

40 </
div
>

41 <?
php
 
’dif
;?>

42 <
šput
 
ty³
="subm™" 
¡yË
="width: 100%" 
şass
="bŠ" 
v®ue
="æ³¨å†Œ"/>

43 </
fÜm
>

44 </
div
>

45 </
div
>

46 <!--/
¥ª
-->

47 <
div
 
şass
="span8">

48 <
div
 
şass
="well">

49 <
h1
>å¦‚ä½•è·å¾—è‡ªå·±æ‰‹æœºçš„è“ç‰™åœ°å€ï¼Ÿ</h1>

50 <
hr
>

51 <
bË
 
şass
="tableable-bordered">

52 <
th—d
>

53 <
Œ
>

54 <
th
></th>

55 <
th
>æ‰‹æœºç³»ç»Ÿ</th>

56 <
th
>æ‰‹æœºå‹å·</th>

57 <
th
>è“ç‰™è·å¾—æ–¹å¼</th>

58 </
Œ
>

59 </
th—d
>

60 <
tbody
>

61 <
Œ
>

62 <
td
>1</td>

63 <
td
>
iOS
</td>

64 <
td
>
hÚe1
ã€2ã€3ã€3
GS
ã€4ã€4
S
</td>

65 <
td
>è®¾ç½®-&
gt
;é€šç”¨-&gt;å…³äºæœ¬æœº-&gt;è“ç‰™</td>

66 </
Œ
>

67 <
Œ
>

68 <
td
>2</td>

69 <
td
>
Android
</td>

70 <
td
>
HTC
ã€ä¸‰æ˜Ÿã€å°ç±³ã€åä¸ºã€ä¸­å…´</td>

71 <
td
><
b
>éœ€è¦å…ˆæ‰“å¼€è“ç‰™æ‰å¯ä»¥æŸ¥çœ‹åœ°å€</b><
br
>

72 
m’u
-&
gt
;è®¾ç½®-&gt;æ— çº¿å’Œç½‘ç»œ-&gt;è“ç‰™è®¾ç½®-&gt;æ‰“å¼€è“ç‰™<
br
>

73 
m’u
-&
gt
;è®¾ç½®-&gt;å…³äºæœ¬æœº-&gt;çŠ¶æ€æ¶ˆæ¯-&gt;è“ç‰™åœ°å€

74 </
td
>

75 </
Œ
>

76 <
Œ
>

77 <
td
>3</td>

78 <
td
>
SymbŸn
</td>

79 <
td
>è¯ºåŸºäºš</td>

80 <
td
>è¾“å…¥*#2820#ï¼Œå³å¯æŸ¥çœ‹è“ç‰™åœ°å€</td>

81 </
Œ
>

82 <
Œ
>

83 <
td
>4</td>

84 <
td
>
MTK
</td>

85 <
td
>è”æƒ³ã€å¤©è¯­ã€åº·ä½³ç­‰</td>

86 <
td
>æ‰“å¼€è“ç‰™ï¼ŒæŸ¥çœ‹é«˜çº§é€‰é¡¹ï¼Œå°±å¯è§è“ç‰™åœ°å€</td>

87 </
Œ
>

88 </
tbody
>

89 </
bË
>

90 <
hr
>

91 <
h1
>è“ç‰™è€—ç”µå˜›ï¼Ÿ</h1>

92 <
p
><
¥ª
 
¡yË
="margin-left: 2em;"></span>

94 </
p
>

95 <
p
><
¥ª
 
¡yË
="margin-left: 2em;"></span>

98 </
p
>

99 <
div
>

100 <
img
 
width
="180" 
¤c
="<?ph°echØba£_u¾("
images
/
blu‘oÙh1
.
²g
");?>" />

101 <
img
 
width
="180" 
¤c
="<?ph°echØba£_u¾("
images
/
blu‘oÙh2
.
²g
");?>" />

102 <
img
 
width
="180" 
¤c
="<?ph°echØba£_u¾("
images
/
blu‘oÙh3
.
²g
");?>" />

103 </
div
>

104 </
div
>

105 </
div
>

106 <!--/
¥ª
-->

108 </
div
>

109 <!--/
row
-->

110 <
hr
 
size
="1" 
¡yË
="border: 1px solid #bbb;">

112 <
foÙ”
>

113 <
p
>&
cİy
; 
Wlške
 2012</p>

114 </
foÙ”
>

116 </
div
>

117 <!--/.
æuid
-
cÚš”
-->

	@application/views/v_single_group_page.php

1 <
div
 
	gşass
="navbar‚avbar-fixed-top">

2 <
div
 
şass
="navbar-inner">

3 <
div
 
şass
="container">

4 <
a
 
şass
="bŠ bŠ-Çvb¬" 
d©a
-
toggË
="collapse"

5 
d©a
-
rg‘
=".Çv-cŞÏp£"> <
¥ª
 
şass
="icon-bar"></span> <span

6 
şass
="icÚ-b¬"></
¥ª
> <span class="icon-bar"></span>

7 </
a
> <¨
şass
="b¿nd" 
h»f
="<?=ba£_u¾("
c_wlške
"); ?>">èœ—ä¸´å®¢</a>

8 <
div
 
şass
="nav-collapse">

9 <
ul
 
şass
="nav">

10 <
li
 
şass
="aùive"><
a
 
h»f
="<?=ba£_u¾("
c_·ge_weibo
"); ?>">é¦–é¡µ</a></li>

11 </
ul
>

12 <
ul
 
şass
="nav…ull-right">

13 <
li
 
şass
="drİdown"><
a
 
h»f
="#" class="dropdown-toggle"

14 
d©a
-
toggË
="drİdown">è´¦å·<
b
 
şass
="ÿ»t"></b></
a
>

15 <
ul
 
şass
="dropdown-menu">

16 <!-- <
li
><
a
 
h»f
="#">è®¾ç½®</a></li> -->

17 <!-- <
li
 
şass
="divider"></li> -->

18 <
li
><
a
 
h»f
="<?=base_url('c_login/login_out');?>">ç™»å‡º</a></li>

19 </
ul
></
li
>

20 </
ul
>

21 </
div
>

22 </
div
>

23 </
div
>

24 </
div
>

26 <
div
 
şass
="container">

27 <
div
 
şass
="row">

28 <
div
 
şass
="span2">

29 <
div
 
şass
="row">

30 <
div
 
şass
="span2">

31 <
a
 
h»f
="#u¶ßd_av©¬" 
d©a
-
toggË
="mod®" 
»l
="tooltip"

32 
t™Ë
="ä¿®æ”¹å¤´åƒ"><
img
 
Çme
="Çme" 
width
="70"

33 
¤c
="<?ph°echØ$u£r_d©a['u£r_av©¬'];?>"></
a
>

34 <
div
 
şass
="mod® fade" 
id
="upload_avatar">

35 <
div
 
şass
="modal-header">

36 <
a
 
şass
="şo£" 
d©a
-
dismiss
="modal">Ã—</a>

37 <
h3
>ä¸Šä¼ å¤´åƒ</h3>

38 <
fÜm
 
’ùy³
="muÉ¬t/fÜm-d©a" 
aùiÚ
="<?=ba£_u¾("
c_·ge_weibo
/
u¶ßd_av©¬
"è?>" 
m‘hod
="post">

39 <
šput
 
ty³
="fe" 
Çme
="u£rfe" 
size
="20" />

40 <
šput
 
ty³
="hidd’" 
Çme
="u£r_id" 
v®ue
="<?=$user_data['user_id']?>" />

41 <
p
>ä¸Šä¼ æ–‡ä»¶å¿…é¡»å°äº1
MB
</p>

42 <
p
 
id
="preview_look">æ–‡ä»¶é¢„è§ˆ</p>

43 <
šput
 
ty³
="subm™" 
v®ue
="ä¸Šä¼ " />

44 </
fÜm
>

45 </
div
>

46 </
div
>

47 <
h2
><?
php
 
echo
 
$u£r_d©a
['di¥Ïy_Çme'];?></
	gh2
>

48 </
	gdiv
>

49 <
div
 
	gşass
="span2">

50 <
h4
>

51 çŠ¶æ€æ•°ï¼š<
¥ª
 
şass
="badge"><?
php
 
echo
 
$u£r_d©a
['weibo_count']?></span>

52 </
h4
>

53 <
h4
>

54 å¥½å‹æ•°ï¼š<
¥ª
 
şass
="badge"><?
php
 
echo
 
$u£r_d©a
['friend_count']?></span>

55 </
h4
>

56 </
div
>

57 <
div
 
şass
="span2">

58 <
hr
 
size
="1" 
¡yË
="border: 1px solid #bbb;">

59 </
div
>

60 </
div
>

61 <
div
>

62 <
ul
 
şass
="nav‚av-pills‚av-stacked" >

63 <
li
 
şass
="nav-header">

65 </
li
>

66 <?
php


67 
fÜ—ch
(
$u£r_d©a
['group_d©as'] 
as
 
$key
=>
$v®ue
){

68 if(
$v®ue
['group_id']==
$u£r_d©a
['this_group_data']['group_id']){

69 
echo
 '<l˜şass="aùive"><¨h»f="'.
ba£_u¾
("c_sšgË_group_·ge/group/".
$v®ue
['group_id'])

70 .'">'.
$v®ue
['group_name'].'</a></li>';

72 
	gecho
 '<li><¨h»f="'.
ba£_u¾
("c_sšgË_group_·ge/group/".
$v®ue
['group_id'])

73 .'">'.
	g$v®ue
['group_name'].'</a></li>';

77 </
	gul
>

78 </
	gdiv
>

79 </
	gdiv
>

81 <
div
 
	gşass
="span7">

82 <
h2
>æœ‰ä»€ä¹ˆäº‹æƒ…æƒ³å‘Šè¯‰å¤§å®¶ï¼Ÿ</h2>

83 <
fÜm
 
aùiÚ
="<?phpƒcho base_url('c_page_weibo/post_weibo');?>"

84 
m‘hod
="po¡" 
¡yË
="‹xt-®ign:„ight;" 
şass
="form">

85 <
‹x»a
 
¡yË
="width: 98%" 
şass
="šput-xÏrge" 
id
="weibo_content"

86 
Çme
="weibo_cÚ‹Á" 
rows
="3"></
‹x»a
>

87 <
bu‰Ú
 
ty³
="subm™" 
şass
="btn">å‘å¸ƒ</button>

88 </
fÜm
>

89 <
h3
>ç¾¤ç»„æˆå‘˜ (<?=
$u£r_d©a
['this_group_data']['member_count']?>)</h3>

90 <?
php
 
fÜ—ch
(
$u£r_d©a
['this_group_d©a']['group_memb”s'] 
as
 
$key
=>
$v®ue
):?>

91 <
div
 
şass
="¥ª1" 
¡yË
="text-align:center">

92 <
img
 
width
="100%" 
¤c
="<?=$value['user_avatar'];?>" />

93 <
a
><?=
$v®ue
['di¥Ïy_Çme'];?></
	ga
>

94 </
	gdiv
>

95 <?
php
 
	g’dfÜ—ch
;?>

96 </
	gdiv
>

97 <
div
 
	gşass
="span3">

99 </
div
>

100 </
div
>

101 <
hr
 
size
="1" 
¡yË
="border: 1px solid #bbb;">

102 <
foÙ”
>

103 <
p
>&
cİy
; 
	gWlške
 2012</
	gp
>

104 </
	gfoÙ”
>

105 </
	gdiv
>

	@application/views/welcome_message.php

1 <!
DOCTYPE
 
	ghtml
>

2 <
html
 
	gÏng
="en">

3 <
h—d
>

4 <
m‘a
 
ch¬£t
="utf-8">

5 <
t™Ë
>
W–come
 
to
 
CodeIgn™”
</title>

7 <
¡yË
 
ty³
="text/css">

9 ::
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

10 ::
moz
-
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

11 ::
webk™
-
£ËùiÚ
{ 
background
-
cŞÜ
: #E13300; 
	gcŞÜ
: 
wh™e
; }

13 
	gbody
 {

14 
	gbackground
-
	gcŞÜ
: #fff;

15 
	gm¬gš
: 40
px
;

16 
	gfÚt
: 13
px
/20px 
nÜm®
 
H–v‘iÿ
, 
	gArŸl
, 
	g§ns
-
	g£rif
;

17 
	gcŞÜ
: #4
F5155
;

20 
	ga
 {

21 
	gcŞÜ
: #003399;

22 
	gbackground
-
	gcŞÜ
: 
Œª¥¬’t
;

23 
	gfÚt
-
	gweight
: 
nÜm®
;

26 
	gh1
 {

27 
	gcŞÜ
: #444;

28 
	gbackground
-
	gcŞÜ
: 
Œª¥¬’t
;

29 
	gbÜd”
-
	gbÙtom
: 1
px
 
sŞid
 #D0D0D0;

30 
	gfÚt
-
	gsize
: 19
px
;

31 
	gfÚt
-
	gweight
: 
nÜm®
;

32 
	gm¬gš
: 0 0 14
px
 0;

33 
	g·ddšg
: 14
px
 15px 10px 15px;

36 
	gcode
 {

37 
	gfÚt
-
	gçmy
: 
CÚsŞas
, 
	gMÚaco
, 
Cour›r
 
	gNew
, 
	gCour›r
, 
	gmÚo¥aû
;

38 
	gfÚt
-
	gsize
: 12
px
;

39 
	gbackground
-
	gcŞÜ
: #f9f9f9;

40 
	gbÜd”
: 1
px
 
sŞid
 #D0D0D0;

41 
	gcŞÜ
: #002166;

42 
	gdi¥Ïy
: 
block
;

43 
	gm¬gš
: 14
px
 0 14px 0;

44 
	g·ddšg
: 12
px
 10px 12px 10px;

48 
	gm¬gš
: 0 15
px
 0 15px;

51 
	gp
.
	gfoÙ”
{

52 
	g‹xt
-
	g®ign
: 
right
;

53 
	gfÚt
-
	gsize
: 11
px
;

54 
	gbÜd”
-
	gtİ
: 1
px
 
sŞid
 #D0D0D0;

55 
	glše
-
	gheight
: 32
px
;

56 
	g·ddšg
: 0 10
px
 0 10px;

57 
	gm¬gš
: 20
px
 0 0 0;

61 
	gm¬gš
: 10
px
;

62 
	gbÜd”
: 1
px
 
sŞid
 #D0D0D0;

63 -
	gwebk™
-
	gbox
-
	gshadow
: 0 0 8
px
 #D0D0D0;

65 </
	g¡yË
>

66 </
	gh—d
>

67 <
	gbody
>

69 <
div
 
	gid
="container">

70 <
h1
>
W–come
 
to
 
CodeIgn™”
!</h1>

72 <
div
 
id
="body">

73 <
p
>
The
 
·ge
 
you
 
¬e
 
lookšg
 
©
 
is
 
bešg
 
g’”©ed
 
dyÇmiÿÎy
 
by
 
CodeIgn™”
.</p>

75 <
p
>
If
 
you
 
would
 
like
 
to
 
ed™
 
this
 
·ge
 you'll find it†ocated‡t:</p>

76 <
code
>
­¶iÿtiÚ
/
v›ws
/
w–come_mes§ge
.
php
</code>

78 <
p
>
The
 
cÜ»¥Údšg
 
cÚŒŞËr
 
this
 
·ge
 
is
 
found
 
©
:</p>

79 <
code
>
­¶iÿtiÚ
/
cÚŒŞËrs
/
w–come
.
php
</code>

81 <
p
>
If
 
you
 
¬e
 
ex¶Üšg
 
CodeIgn™”
 
the
 
v”y
 
fœ¡
 
time
, you 
should
 
¡¬t
 
by
 
»adšg
 
	gthe
 <
a
 
	gh»f
="u£r_guide/">
U£r
 
Guide
</a>.</p>

82 </
div
>

84 <
p
 
şass
="foÙ”">
Page
 
»nd”ed
 
š
 <
¡rÚg
>{
–­£d_time
}</¡rÚg> 
£cÚds
</p>

85 </
div
>

87 </
body
>

88 </
html
>

	@index.php

1 <?
php


21 
defše
('ENVIRONMENT', 'development');

31 ià(
defšed
('ENVIRONMENT'))

33 
	gENVIRONMENT
)

36 
”rÜ_»pÜtšg
(
E_ALL
);

41 
”rÜ_»pÜtšg
(0);

45 
ex™
('The‡pplicationƒnvironment is‚ot set correctly.');

59 
	g$sy¡em_·th
 = 'system';

75 
	g$­¶iÿtiÚ_fŞd”
 = 'application';

138 ià(
defšed
('STDIN'))

140 
chdœ
(
dœÇme
(
__FILE__
));

143 ià(
»®·th
(
$sy¡em_·th
è!=ğ
FALSE
)

145 
$sy¡em_·th
 = 
»®·th
($system_path).'/';

149 
	g$sy¡em_·th
 = 
¹rim
(
$sy¡em_·th
, '/').'/';

152 iàĞ! 
	$is_dœ
(
$sy¡em_·th
))

154 
	`ex™
("You¸sy¡em fŞd”…©h dÛ nÙ‡µ—¸tØb£ˆcÜ»ùly. PËa£ o³ÀthfŞlowšg fªd cÜ»ùhis: ".
	`·thšfo
(
__FILE__
, 
PATHINFO_BASENAME
));

155 
	}
}

163 
defše
('SELF', 
·thšfo
(
__FILE__
, 
PATHINFO_BASENAME
));

167 
defše
('EXT', '.php');

170 
defše
('BASEPATH', 
¡r_»¶aû
("\\", "/", 
$sy¡em_·th
));

173 
defše
('FCPATH', 
¡r_»¶aû
(
SELF
, '', 
__FILE__
));

176 
defše
('SYSDIR', 
Œim
(
¡¼chr
Ñrim(
BASEPATH
, '/'), '/'), '/'));

180 ià(
	$is_dœ
(
$­¶iÿtiÚ_fŞd”
))

182 
	`defše
('APPPATH', 
$­¶iÿtiÚ_fŞd”
.'/');

183 
	}
}

186 iàĞ! 
is_dœ
(
BASEPATH
.
$­¶iÿtiÚ_fŞd”
.'/'))

188 
ex™
("You¸­¶iÿtiÚ fŞd”…©h dÛ nÙ‡µ—¸tØb£ˆcÜ»ùly. PËa£ o³ÀthfŞlowšg fªd cÜ»ùhis: ".
SELF
);

191 
defše
('APPPATH', 
BASEPATH
.
$­¶iÿtiÚ_fŞd”
.'/');

202 
»quœe_Úû
 
	gBASEPATH
.'core/CodeIgniter.php';

	@system/core/Benchmark.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

30 şas 
	cCI_B’chm¬k
 {

37 
v¬
 
	m$m¬k”
 = 
¬¿y
();

51 
funùiÚ
 
	$m¬k
(
$Çme
)

53 
$this
->
m¬k”
[
$Çme
] = 
	`miüÙime
();

72 
funùiÚ
 
	`–­£d_time
(
$pošt1
 = '', 
$pošt2
 = '', 
$decim®s
 = 4)

74 ià(
$pošt1
 == '')

79 iàĞ! 
	`is£t
(
$this
->
m¬k”
[
$pošt1
]))

84 iàĞ! 
	`is£t
(
$this
->
m¬k”
[
$pošt2
]))

86 
$this
->
m¬k”
[
$pošt2
] = 
	`miüÙime
();

89 
	`li¡
(
$sm
, 
$ss
èğ
	`ex¶ode
(' ', 
$this
->
m¬k”
[
$pošt1
]);

90 
	`li¡
(
$em
, 
$es
èğ
	`ex¶ode
(' ', 
$this
->
m¬k”
[
$pošt2
]);

92  
	`numb”_fÜm©
((
$em
 + 
$es
è- (
$sm
 + 
$ss
), 
$decim®s
);

93 
	}
}

108 
funùiÚ
 
	$memÜy_u§ge
()

111 
	}
}

	@system/core/CodeIgniter.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

36 
defše
('CI_VERSION', '2.1.0');

44 
defše
('CI_CORE', 
FALSE
);

51 
»quœe
(
BASEPATH
.'core/Common.php');

58 ià(
defšed
('ENVIRONMENT'è
AND
 
fe_exi¡s
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/constants.php'))

60 
»quœe
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/constants.php');

64 
»quœe
(
APPPATH
.'config/constants.php');

72 
£t_”rÜ_hªdËr
('_exception_handler');

74 iàĞ! 
is_php
('5.3'))

76 @
£t_magic_quÙes_ruÁime
(0);

95 ià(
is£t
(
$assign_to_cÚfig
['subşass_´efix']è
AND
 
	g$assign_to_cÚfig
['subclass_prefix'] != '')

97 
g‘_cÚfig
(
¬¿y
('subşass_´efix' => 
$assign_to_cÚfig
['subclass_prefix']));

105 ià(
funùiÚ_exi¡s
("£t_time_lim™"è=ğ
TRUE
 
AND
 @
ši_g‘
("safe_mode") == 0)

107 @
£t_time_lim™
(300);

115 
	g$BM
 =& 
lßd_şass
('Benchmark', 'core');

116 
	g$BM
->
m¬k
('total_execution_time_start');

117 
	g$BM
->
m¬k
('loading_time:_base_classes_start');

124 
	g$EXT
 =& 
lßd_şass
('Hooks', 'core');

131 
	g$EXT
->
_ÿÎ_hook
('pre_system');

138 
	g$CFG
 =& 
lßd_şass
('Config', 'core');

141 ià(
	$is£t
(
$assign_to_cÚfig
))

143 
$CFG
->
	`_assign_to_cÚfig
(
$assign_to_cÚfig
);

144 
	}
}

158 
	g$UNI
 =& 
lßd_şass
('Utf8', 'core');

165 
	g$URI
 =& 
lßd_şass
('URI', 'core');

172 
	g$RTR
 =& 
lßd_şass
('Router', 'core');

173 
	g$RTR
->
_£t_routšg
();

176 ià(
	$is£t
(
$routšg
))

178 
$RTR
->
	`_£t_ov”rides
(
$routšg
);

179 
	}
}

186 
	g$OUT
 =& 
lßd_şass
('Output', 'core');

193 ià(
	g$EXT
->
_ÿÎ_hook
('ÿche_ov”ride'è==ğ
FALSE
)

195 ià(
$OUT
->
_di¥Ïy_ÿche
(
$CFG
, 
$URI
è=ğ
TRUE
)

197 
ex™
;

206 
	g$SEC
 =& 
lßd_şass
('Security', 'core');

213 
	g$IN
 =& 
lßd_şass
('Input', 'core');

220 
	g$LANG
 =& 
lßd_şass
('Lang', 'core');

229 
»quœe
 
	gBASEPATH
.'core/Controller.php';

231 
	gfunùiÚ
 &
	$g‘_š¡ªû
()

233  
CI_CÚŒŞËr
::
	`g‘_š¡ªû
();

234 
	}
}

237 ià(
fe_exi¡s
(
APPPATH
.'cÜe/'.
$CFG
->
cÚfig
['subclass_prefix'].'Controller.php'))

239 
»quœe
 
	gAPPPATH
.'cÜe/'.
	g$CFG
->
	gcÚfig
['subclass_prefix'].'Controller.php';

245 iàĞ! 
fe_exi¡s
(
APPPATH
.'cÚŒŞËrs/'.
$RTR
->
ãtch_dœeùÜy
().$RTR->
ãtch_şass
().'.php'))

247 
show_”rÜ
('Unableo†oad your default controller. Please make surehe controller specified in your Routes.php file is valid.');

250 
šşude
(
APPPATH
.'cÚŒŞËrs/'.
$RTR
->
ãtch_dœeùÜy
().$RTR->
ãtch_şass
().'.php');

253 
	g$BM
->
m¬k
('loading_time:_base_classes_end');

264 
	g$şass
 = 
$RTR
->
ãtch_şass
();

265 
	g$m‘hod
 = 
$RTR
->
ãtch_m‘hod
();

267 iàĞ! 
	$şass_exi¡s
(
$şass
)

268 
OR
 
	`¡ºcmp
(
$m‘hod
, '_', 1) == 0

269 
OR
 
	`š_¬¿y
(
	`¡¹Şow”
(
$m‘hod
), 
	`¬¿y_m­
('¡¹Şow”', 
	`g‘_şass_m‘hods
('CI_Controller')))

272 iàĞ! 
	`em±y
(
$RTR
->
rou‹s
['404_override']))

274 
$x
 = 
	`ex¶ode
('/', 
$RTR
->
rou‹s
['404_override']);

275 
$şass
 = 
$x
[0];

276 
$m‘hod
 = (
	`is£t
(
$x
[1]) ? $x[1] : 'index');

277 iàĞ! 
	`şass_exi¡s
(
$şass
))

279 iàĞ! 
	`fe_exi¡s
(
APPPATH
.'cÚŒŞËrs/'.
$şass
.'.php'))

281 
	`show_404
("{$class}/{$method}");

284 
	`šşude_Úû
(
APPPATH
.'cÚŒŞËrs/'.
$şass
.'.php');

289 
	`show_404
("{$class}/{$method}");

291 
	}
}

298 
	g$EXT
->
_ÿÎ_hook
('pre_controller');

306 
	g$BM
->
m¬k
('cÚŒŞËr_executiÚ_time_Ğ'.
$şass
.' / '.
$m‘hod
.' )_start');

308 
	g$CI
 = 
Ãw
 
$şass
();

315 
	g$EXT
->
_ÿÎ_hook
('post_controller_constructor');

323 ià(
m‘hod_exi¡s
(
$CI
, '_remap'))

325 
	g$CI
->
_»m­
(
$m‘hod
, 
¬¿y_¦iû
(
$URI
->
r£gm’ts
, 2));

331 iàĞ! 
š_¬¿y
(
¡¹Şow”
(
$m‘hod
), 
¬¿y_m­
('¡¹Şow”', 
g‘_şass_m‘hods
(
$CI
))))

334 iàĞ! 
em±y
(
$RTR
->
rou‹s
['404_override']))

336 
	g$x
 = 
ex¶ode
('/', 
$RTR
->
rou‹s
['404_override']);

337 
	g$şass
 = 
$x
[0];

338 
	g$m‘hod
 = (
is£t
(
$x
[1]) ? $x[1] : 'index');

339 iàĞ! 
şass_exi¡s
(
$şass
))

341 iàĞ! 
fe_exi¡s
(
APPPATH
.'cÚŒŞËrs/'.
$şass
.'.php'))

343 
show_404
("{$class}/{$method}");

346 
šşude_Úû
(
APPPATH
.'cÚŒŞËrs/'.
$şass
.'.php');

347 
un£t
(
$CI
);

348 
	g$CI
 = 
Ãw
 
$şass
();

353 
show_404
("{$class}/{$method}");

359 
ÿÎ_u£r_func_¬¿y
(
¬¿y
(&
$CI
, 
$m‘hod
), 
¬¿y_¦iû
(
$URI
->
r£gm’ts
, 2));

364 
	g$BM
->
m¬k
('cÚŒŞËr_executiÚ_time_Ğ'.
$şass
.' / '.
$m‘hod
.' )_end');

371 
	g$EXT
->
_ÿÎ_hook
('post_controller');

378 ià(
	g$EXT
->
_ÿÎ_hook
('di¥Ïy_ov”ride'è==ğ
FALSE
)

381 
$OUT
->
_di¥Ïy
();

390 
	g$EXT
->
_ÿÎ_hook
('post_system');

397 ià(
şass_exi¡s
('CI_DB'è
AND
 
is£t
(
$CI
->
db
))

399 
	g$CI
->
	gdb
->
şo£
();

	@system/core/Common.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

42 iàĞ! 
funùiÚ_exi¡s
('is_php'))

44 
funùiÚ
 
is_php
(
$v”siÚ
 = '5.0.0')

46 
$_is_php
;

47 
	g$v”siÚ
 = (
¡ršg
)
$v”siÚ
;

49 iàĞ! 
is£t
(
$_is_php
[
$v”siÚ
]))

51 
	g$_is_php
[
$v”siÚ
] = (
v”siÚ_com·»
(
PHP_VERSION
, $v”siÚè< 0è? 
	gFALSE
 : 
TRUE
;

54  
	g$_is_php
[
$v”siÚ
];

70 iàĞ! 
funùiÚ_exi¡s
('is_really_writable'))

72 
funùiÚ
 
is_»®ly_wr™abË
(
$fe
)

75 ià(
	gDIRECTORY_SEPARATOR
 =ğ'/' 
AND
 @
ši_g‘
("§ã_mode"è=ğ
FALSE
)

77  
is_wr™abË
(
$fe
);

82 ià(
is_dœ
(
$fe
))

84 
	g$fe
 = 
¹rim
(
$fe
, '/').'/'.
md5
(
mt_¿nd
(1,100).mt_rand(1,100));

86 ià((
	g$å
 = @
fİ’
(
$fe
, 
FOPEN_WRITE_CREATE
)è==ğ
FALSE
)

88  
FALSE
;

91 
fşo£
(
$å
);

92 @
chmod
(
$fe
, 
DIR_WRITE_MODE
);

93 @
uÆšk
(
$fe
);

94  
	gTRUE
;

96 
–£if
 ( ! 
is_fe
(
$fe
è
OR
 (
$å
 = @
fİ’
($fe, 
FOPEN_WRITE_CREATE
)è==ğ
FALSE
)

98  
FALSE
;

101 
fşo£
(
$å
);

102  
	gTRUE
;

121 iàĞ! 
funùiÚ_exi¡s
('load_class'))

123 
	gfunùiÚ
 &
lßd_şass
(
$şass
, 
$dœeùÜy
 = 'lib¿r›s', 
$´efix
 = 'CI_')

125 
$_şas£s
 = 
¬¿y
();

128 ià(
is£t
(
$_şas£s
[
$şass
]))

130  
	g$_şas£s
[
$şass
];

133 
	g$Çme
 = 
FALSE
;

137 
fÜ—ch
 (
¬¿y
(
APPPATH
, 
BASEPATH
è
as
 
$·th
)

139 ià(
fe_exi¡s
(
$·th
.
$dœeùÜy
.'/'.
$şass
.'.php'))

141 
	g$Çme
 = 
$´efix
.
$şass
;

143 ià(
şass_exi¡s
(
$Çme
è==ğ
FALSE
)

145 
»quœe
(
$·th
.
$dœeùÜy
.'/'.
$şass
.'.php');

153 ià(
fe_exi¡s
(
APPPATH
.
$dœeùÜy
.'/'.
cÚfig_™em
('subşass_´efix').
$şass
.'.php'))

155 
	g$Çme
 = 
cÚfig_™em
('subşass_´efix').
$şass
;

157 ià(
şass_exi¡s
(
$Çme
è==ğ
FALSE
)

159 
»quœe
(
APPPATH
.
$dœeùÜy
.'/'.
cÚfig_™em
('subşass_´efix').
$şass
.'.php');

164 ià(
	g$Çme
 ==ğ
FALSE
)

168 
ex™
('UÇbËØloÿ‹h¥ecif›d cÏss: '.
$şass
.'.php');

172 
is_lßded
(
$şass
);

174 
	g$_şas£s
[
$şass
] = 
Ãw
 
$Çme
();

175  
	g$_şas£s
[
$şass
];

188 iàĞ! 
funùiÚ_exi¡s
('is_loaded'))

190 
funùiÚ
 
is_lßded
(
$şass
 = '')

192 
$_is_lßded
 = 
¬¿y
();

194 ià(
	g$şass
 != '')

196 
$_is_lßded
[
¡¹Şow”
(
$şass
)] = $class;

199  
	g$_is_lßded
;

214 iàĞ! 
funùiÚ_exi¡s
('get_config'))

216 
	gfunùiÚ
 &
g‘_cÚfig
(
$»¶aû
 = 
¬¿y
())

218 
$_cÚfig
;

220 ià(
is£t
(
$_cÚfig
))

222  
	g$_cÚfig
[0];

226 iàĞ! 
defšed
('ENVIRONMENT'è
	gOR
 ! 
fe_exi¡s
(
$fe_·th
 = 
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/config.php'))

228 
$fe_·th
 = 
APPPATH
.'config/config.php';

232 iàĞ! 
fe_exi¡s
(
$fe_·th
))

234 
ex™
('The configuration file does‚otƒxist.');

237 
»quœe
(
$fe_·th
);

240 iàĞ! 
is£t
(
$cÚfig
è
	gOR
 ! 
is_¬¿y
($config))

242 
ex™
('Your config file does‚ot‡ppearo be formatted correctly.');

246 ià(
couÁ
(
$»¶aû
) > 0)

248 
fÜ—ch
 (
$»¶aû
 
as
 
$key
 => 
$v®
)

250 ià(
is£t
(
$cÚfig
[
$key
]))

252 
$cÚfig
[
$key
] = 
$v®
;

257  
	g$_cÚfig
[0] =& 
$cÚfig
;

269 iàĞ! 
funùiÚ_exi¡s
('config_item'))

271 
funùiÚ
 
cÚfig_™em
(
$™em
)

273 
	g$_cÚfig_™em
 = 
¬¿y
();

275 iàĞ! 
is£t
(
$_cÚfig_™em
[
$™em
]))

277 
	g$cÚfig
 =& 
g‘_cÚfig
();

279 iàĞ! 
is£t
(
$cÚfig
[
$™em
]))

281  
	gFALSE
;

283 
	g$_cÚfig_™em
[
$™em
] = 
$cÚfig
[$item];

286  
	g$_cÚfig_™em
[
$™em
];

304 iàĞ! 
funùiÚ_exi¡s
('show_error'))

306 
funùiÚ
 
show_”rÜ
(
$mes§ge
, 
$¡©us_code
 = 500, 
$h—dšg
 = 'An Error Was Encountered')

308 
$_”rÜ
 =& 
lßd_şass
('Exceptions', 'core');

309 
echo
 
	g$_”rÜ
->
show_”rÜ
(
$h—dšg
, 
$mes§ge
, '”rÜ_g’”®', 
$¡©us_code
);

310 
	gex™
;

326 iàĞ! 
funùiÚ_exi¡s
('show_404'))

328 
funùiÚ
 
show_404
(
$·ge
 = '', 
$log_”rÜ
 = 
TRUE
)

330 
$_”rÜ
 =& 
lßd_şass
('Exceptions', 'core');

331 
	g$_”rÜ
->
show_404
(
$·ge
, 
$log_”rÜ
);

332 
	gex™
;

347 iàĞ! 
funùiÚ_exi¡s
('log_message'))

349 
funùiÚ
 
log_mes§ge
(
$Ëv–
 = '”rÜ', 
$mes§ge
, 
$php_”rÜ
 = 
FALSE
)

351 
$_log
;

353 ià(
cÚfig_™em
('log_threshold') == 0)

358 
	g$_log
 =& 
lßd_şass
('Log');

359 
	g$_log
->
wr™e_log
(
$Ëv–
, 
$mes§ge
, 
$php_”rÜ
);

373 iàĞ! 
funùiÚ_exi¡s
('set_status_header'))

375 
funùiÚ
 
£t_¡©us_h—d”
(
$code
 = 200, 
$‹xt
 = '')

377 
$¡©i
 = 
¬¿y
(

419 ià(
	g$code
 =ğ'' 
OR
 ! 
is_num”ic
(
$code
))

421 
show_”rÜ
('Status codes must be‚umeric', 500);

424 ià(
is£t
(
$¡©i
[
$code
]è
AND
 
	g$‹xt
 == '')

426 
$‹xt
 = 
$¡©i
[
$code
];

429 ià(
	g$‹xt
 == '')

431 
show_”rÜ
('No statusext‡vailable. Please check your status code‚umber or supply your own messageext.', 500);

434 
	g$£rv”_´ÙocŞ
 = (
is£t
(
$_SERVER
['SERVER_PROTOCOL'])è? $_SERVER['SERVER_PROTOCOL'] : 
FALSE
;

436 ià(
sub¡r
(
php_§pi_Çme
(), 0, 3) == 'cgi')

438 
h—d”
("Stus: {$code} {$‹xt}", 
TRUE
);

440 
–£if
 (
$£rv”_´ÙocŞ
 =ğ'HTTP/1.1' 
OR
 $server_protocol == 'HTTP/1.0')

442 
h—d”
(
$£rv”_´ÙocŞ
." {$code} {$‹xt}", 
TRUE
, 
$code
);

446 
h—d”
("HTTP/1.1 {$code} {$‹xt}", 
TRUE
, 
$code
);

467 iàĞ! 
funùiÚ_exi¡s
('_exception_handler'))

469 
funùiÚ
 
_exû±iÚ_hªdËr
(
$£v”™y
, 
$mes§ge
, 
$f•©h
, 
$lše
)

476 ià(
	g$£v”™y
 =ğ
E_STRICT
)

481 
	g$_”rÜ
 =& 
lßd_şass
('Exceptions', 'core');

485 ià((
	g$£v”™y
 & 
”rÜ_»pÜtšg
()è=ğ
$£v”™y
)

487 
$_”rÜ
->
show_php_”rÜ
(
$£v”™y
, 
$mes§ge
, 
$f•©h
, 
$lše
);

491 ià(
cÚfig_™em
('log_threshold') == 0)

496 
	g$_”rÜ
->
log_exû±iÚ
(
$£v”™y
, 
$mes§ge
, 
$f•©h
, 
$lše
);

512 iàĞ! 
funùiÚ_exi¡s
('remove_invisible_characters'))

514 
funùiÚ
 
»move_švisibË_ch¬aù”s
(
$¡r
, 
$u¾_’coded
 = 
TRUE
)

516 
$nÚ_di¥ÏyabËs
 = 
¬¿y
();

521 ià(
	g$u¾_’coded
)

523 
	g$nÚ_di¥ÏyabËs
[] = '/%0[0-8bcef]/';

524 
	g$nÚ_di¥ÏyabËs
[] = '/%1[0-9a-f]/';

527 
	g$nÚ_di¥ÏyabËs
[] = '/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]+/S';

531 
	g$¡r
 = 
´eg_»¶aû
(
$nÚ_di¥ÏyabËs
, '', 
$¡r
, -1, 
$couÁ
);

533 
	g$couÁ
);

535  
	g$¡r
;

548 iàĞ! 
funùiÚ_exi¡s
('html_escape'))

550 
funùiÚ
 
html_esÿ³
(
$v¬
)

552 ià(
is_¬¿y
(
$v¬
))

554  
¬¿y_m­
('html_esÿ³', 
$v¬
);

558  
html¥ecŸlch¬s
(
$v¬
, 
ENT_QUOTES
, 
cÚfig_™em
('charset'));

	@system/core/Config.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_CÚfig
 {

36 
v¬
 
	m$cÚfig
 = 
¬¿y
();

42 
v¬
 
	m$is_lßded
 = 
¬¿y
();

48 
v¬
 
	m$_cÚfig_·ths
 = 
¬¿y
(
APPPATH
);

61 
funùiÚ
 
	$__cÚ¡ruù
()

64 
$this
->
cÚfig
 =& 
	`g‘_cÚfig
();

66 
	`log_mes§ge
('debug', "Config Class Initialized");

69 ià(
$this
->
cÚfig
['base_url'] == '')

71 ià(
	`is£t
(
$_SERVER
['HTTP_HOST']))

73 
$ba£_u¾
 = 
	`is£t
(
$_SERVER
['HTTPS']è&& 
	`¡¹Şow”
($_SERVER['HTTPS']) !== 'off' ? 'https' : 'http';

74 
$ba£_u¾
 .ğ'://'. 
$_SERVER
['HTTP_HOST'];

75 
$ba£_u¾
 .ğ
	`¡r_»¶aû
(
	`ba£Çme
(
$_SERVER
['SCRIPT_NAME']), '', $_SERVER['SCRIPT_NAME']);

80 
$ba£_u¾
 = 'http://localhost/';

83 
$this
->
	`£t_™em
('ba£_u¾', 
$ba£_u¾
);

98 
funùiÚ
 
	`lßd
(
$fe
 = '', 
$u£_£ùiÚs
 = 
FALSE
, 
$ç_g¿ûfuÎy
 = FALSE)

100 
$fe
 = ($f=ğ''è? 'cÚfig' : 
	`¡r_»¶aû
('.php', '', $file);

101 
$found
 = 
FALSE
;

102 
$lßded
 = 
FALSE
;

104 
	`fÜ—ch
 (
$this
->
_cÚfig_·ths
 
as
 
$·th
)

106 
$check_loÿtiÚs
 = 
	`defšed
('ENVIRONMENT')

107 ? 
	`¬¿y
(
ENVIRONMENT
.'/'.
$fe
, $file)

108 : 
	`¬¿y
(
$fe
);

110 
	`fÜ—ch
 (
$check_loÿtiÚs
 
as
 
$loÿtiÚ
)

112 
$fe_·th
 = 
$·th
.'cÚfig/'.
$loÿtiÚ
.'.php';

114 ià(
	`š_¬¿y
(
$fe_·th
, 
$this
->
is_lßded
, 
TRUE
))

116 
$lßded
 = 
TRUE
;

120 ià(
	`fe_exi¡s
(
$fe_·th
))

122 
$found
 = 
TRUE
;

127 ià(
$found
 ==ğ
FALSE
)

132 
	`šşude
(
$fe_·th
);

134 iàĞ! 
	`is£t
(
$cÚfig
è
OR
 ! 
	`is_¬¿y
($config))

136 ià(
$ç_g¿ûfuÎy
 ==ğ
TRUE
)

138  
FALSE
;

140 
	`show_”rÜ
('You¸'.
$fe_·th
.' file does‚ot‡ppearo contain‡ valid configuration‡rray.');

143 ià(
$u£_£ùiÚs
 ==ğ
TRUE
)

145 ià(
	`is£t
(
$this
->
cÚfig
[
$fe
]))

147 
$this
->
cÚfig
[
$fe
] = 
	`¬¿y_m”ge
($this->cÚfig[$fe], 
$cÚfig
);

151 
$this
->
cÚfig
[
$fe
] = 
$cÚfig
;

156 
$this
->
cÚfig
 = 
	`¬¿y_m”ge
($this->cÚfig, 
$cÚfig
);

159 
$this
->
is_lßded
[] = 
$fe_·th
;

160 
	`un£t
(
$cÚfig
);

162 
$lßded
 = 
TRUE
;

163 
	`log_mes§ge
('debug', 'CÚfig flßded: '.
$fe_·th
);

167 ià(
$lßded
 ==ğ
FALSE
)

169 ià(
$ç_g¿ûfuÎy
 ==ğ
TRUE
)

171  
FALSE
;

173 
	`show_”rÜ
('ThcÚfigu¿tiÚ f'.
$fe
.'.php'.' does‚otƒxist.');

176  
TRUE
;

177 
	}
}

191 
funùiÚ
 
™em
(
$™em
, 
$šdex
 = '')

193 ià(
$šdex
 == '')

195 iàĞ! 
is£t
(
$this
->
cÚfig
[
$™em
]))

197  
FALSE
;

200 
	g$´ef
 = 
$this
->
cÚfig
[
$™em
];

204 iàĞ! 
is£t
(
$this
->
cÚfig
[
$šdex
]))

206  
	gFALSE
;

209 iàĞ! 
is£t
(
$this
->
cÚfig
[
$šdex
][
$™em
]))

211  
	gFALSE
;

214 
	g$´ef
 = 
$this
->
cÚfig
[
$šdex
][
$™em
];

217  
	g$´ef
;

230 
funùiÚ
 
	$¦ash_™em
(
$™em
)

232 iàĞ! 
	`is£t
(
$this
->
cÚfig
[
$™em
]))

234  
FALSE
;

236 ifĞ
	`Œim
(
$this
->
cÚfig
[
$™em
]) == '')

241  
	`¹rim
(
$this
->
cÚfig
[
$™em
], '/').'/';

242 
	}
}

254 
funùiÚ
 
s™e_u¾
(
$uri
 = '')

256 ià(
$uri
 == '')

258  
$this
->
¦ash_™em
('ba£_u¾').$this->
™em
('index_page');

261 ià(
	g$this
->
™em
('’abË_qu”y_¡ršgs'è=ğ
FALSE
)

263 
$suffix
 = (
$this
->
™em
('u¾_suffix'è=ğ
FALSE
) ? '' : $this->item('url_suffix');

264  
	g$this
->
¦ash_™em
('ba£_u¾').$this->¦ash_™em('šdex_·ge').$this->
_uri_¡ršg
(
$uri
).
	g$suffix
;

268  
	g$this
->
¦ash_™em
('ba£_u¾').$this->
™em
('šdex_·ge').'?'.$this->
_uri_¡ršg
(
$uri
);

282 
funùiÚ
 
ba£_u¾
(
$uri
 = '')

284  
$this
->
¦ash_™em
('ba£_u¾').
Érim
($this->
_uri_¡ršg
(
$uri
),'/');

296 
´Ùeùed
 
funùiÚ
 
	$_uri_¡ršg
(
$uri
)

298 ià(
$this
->
	`™em
('’abË_qu”y_¡ršgs'è=ğ
FALSE
)

300 ià(
	`is_¬¿y
(
$uri
))

302 
$uri
 = 
	`im¶ode
('/', $uri);

304 
$uri
 = 
	`Œim
($uri, '/');

308 ià(
	`is_¬¿y
(
$uri
))

310 
$i
 = 0;

311 
$¡r
 = '';

312 
	`fÜ—ch
 (
$uri
 
as
 
$key
 => 
$v®
)

314 
$´efix
 = (
$i
 == 0) ? '' : '&';

315 
$¡r
 .ğ
$´efix
.
$key
.'='.
$v®
;

316 
$i
++;

318 
$uri
 = 
$¡r
;

321  
$uri
;

322 
	}
}

332 
funùiÚ
 
	$sy¡em_u¾
()

334 
$x
 = 
	`ex¶ode
("/", 
	`´eg_»¶aû
("|/*(.+?)/*$|", "\\1", 
BASEPATH
));

335  
$this
->
	`¦ash_™em
('ba£_u¾').
	`’d
(
$x
).'/';

336 
	}
}

348 
funùiÚ
 
	$£t_™em
(
$™em
, 
$v®ue
)

350 
$this
->
cÚfig
[
$™em
] = 
$v®ue
;

351 
	}
}

366 
funùiÚ
 
_assign_to_cÚfig
(
$™ems
 = 
	$¬¿y
())

368 ià(
	`is_¬¿y
(
$™ems
))

370 
	`fÜ—ch
 (
$™ems
 
as
 
$key
 => 
$v®
)

372 
$this
->
	`£t_™em
(
$key
, 
$v®
);

375 
	}
}

	@system/core/Controller.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

70 şas 
	cCI_CÚŒŞËr
 {

72 
´iv©e
 
	m$š¡ªû
;

77 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

79 
£lf
::
$š¡ªû
 =& 
$this
;

84 
	`fÜ—ch
 (
	`is_lßded
(è
as
 
$v¬
 => 
$şass
)

86 
$this
->
$v¬
 =& 
	`lßd_şass
(
$şass
);

89 
$this
->
lßd
 =& 
	`lßd_şass
('Loader', 'core');

91 
$this
->
lßd
->
	`š™Ÿlize
();

93 
	`log_mes§ge
('debug', "Controller Class Initialized");

96 
public
 
funùiÚ
 &
	$g‘_š¡ªû
()

98  
£lf
::
$š¡ªû
;

99 
	}
}

	@system/core/Exceptions.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_Exû±iÚs
 {

28 
v¬
 
	m$aùiÚ
;

29 
v¬
 
	m$£v”™y
;

30 
v¬
 
	m$mes§ge
;

31 
v¬
 
	m$f’ame
;

32 
v¬
 
	m$lše
;

40 
v¬
 
	m$ob_Ëv–
;

48 
v¬
 
	m$Ëv–s
 = 
¬¿y
(

49 
E_ERROR
 => 'Error',

50 
E_WARNING
 => 'Warning',

51 
E_PARSE
 => 'Parsing Error',

52 
E_NOTICE
 => 'Notice',

53 
E_CORE_ERROR
 => 'Core Error',

54 
E_CORE_WARNING
 => 'Core Warning',

55 
E_COMPILE_ERROR
 => 'Compile Error',

56 
E_COMPILE_WARNING
 => 'Compile Warning',

57 
E_USER_ERROR
 => 'User Error',

58 
E_USER_WARNING
 => 'User Warning',

59 
E_USER_NOTICE
 => 'User Notice',

60 
E_STRICT
 => 'Runtime Notice'

67 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

69 
$this
->
ob_Ëv–
 = 
	`ob_g‘_Ëv–
();

87 
funùiÚ
 
	$log_exû±iÚ
(
$£v”™y
, 
$mes§ge
, 
$f•©h
, 
$lše
)

89 
$£v”™y
 = ( ! 
	`is£t
(
$this
->
Ëv–s
[$severity])) ? $severity : $this->levels[$severity];

91 
	`log_mes§ge
('”rÜ', 'Sev”™y: '.
$£v”™y
.' --> '.
$mes§ge
. ' '.
$f•©h
.' '.
$lše
, 
TRUE
);

92 
	}
}

104 
funùiÚ
 
show_404
(
$·ge
 = '', 
$log_”rÜ
 = 
TRUE
)

106 
$h—dšg
 = "404 Page Not Found";

107 
	g$mes§ge
 = "The…age you„equested was‚ot found.";

110 ià(
	g$log_”rÜ
)

112 
log_mes§ge
('”rÜ', '404 PagNÙ Found --> '.
$·ge
);

115 
echo
 
	g$this
->
show_”rÜ
(
$h—dšg
, 
$mes§ge
, 'error_404', 404);

116 
	gex™
;

135 
funùiÚ
 
show_”rÜ
(
$h—dšg
, 
$mes§ge
, 
$‹m¶©e
 = '”rÜ_g’”®', 
$¡©us_code
 = 500)

137 
£t_¡©us_h—d”
(
$¡©us_code
);

139 
	g$mes§ge
 = '<p>'.
im¶ode
('</p><p>', ( ! 
is_¬¿y
(
$mes§ge
)è? 
¬¿y
($message) : $message).'</p>';

141 ià(
ob_g‘_Ëv–
(è> 
	g$this
->
	gob_Ëv–
 + 1)

143 
ob_’d_æush
();

145 
ob_¡¬t
();

146 
šşude
(
APPPATH
.'”rÜs/'.
$‹m¶©e
.'.php');

147 
	g$bufãr
 = 
ob_g‘_cÚ‹Ás
();

148 
ob_’d_ş—n
();

149  
	g$bufãr
;

164 
funùiÚ
 
	$show_php_”rÜ
(
$£v”™y
, 
$mes§ge
, 
$f•©h
, 
$lše
)

166 
$£v”™y
 = ( ! 
	`is£t
(
$this
->
Ëv–s
[$severity])) ? $severity : $this->levels[$severity];

168 
$f•©h
 = 
	`¡r_»¶aû
("\\", "/", $filepath);

171 ià(
FALSE
 !=ğ
	`¡½os
(
$f•©h
, '/'))

173 
$x
 = 
	`ex¶ode
('/', 
$f•©h
);

174 
$f•©h
 = 
$x
[
	`couÁ
($x)-2].'/'.
	`’d
($x);

177 ià(
	`ob_g‘_Ëv–
(è> 
$this
->
ob_Ëv–
 + 1)

179 
	`ob_’d_æush
();

181 
	`ob_¡¬t
();

182 
	`šşude
(
APPPATH
.'errors/error_php.php');

183 
$bufãr
 = 
	`ob_g‘_cÚ‹Ás
();

184 
	`ob_’d_ş—n
();

185 
echo
 
$bufãr
;

186 
	}
}

	@system/core/Hooks.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_Hooks
 {

36 
v¬
 
	m$’abËd
 = 
FALSE
;

42 
v¬
 
	m$hooks
 = 
¬¿y
();

48 
v¬
 
	m$š_´og»ss
 = 
FALSE
;

54 
funùiÚ
 
	$__cÚ¡ruù
()

56 
$this
->
	`_š™Ÿlize
();

57 
	`log_mes§ge
('debug', "Hooks Class Initialized");

68 
funùiÚ
 
	$_š™Ÿlize
()

70 
$CFG
 =& 
	`lßd_şass
('Config', 'core');

75 ià(
$CFG
->
	`™em
('’abË_hooks'è=ğ
FALSE
)

83 ià(
	`defšed
('ENVIRONMENT'è
AND
 
	`is_fe
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/hooks.php'))

85 
	`šşude
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/hooks.php');

87 
	`–£if
 (
	`is_fe
(
APPPATH
.'config/hooks.php'))

89 
	`šşude
(
APPPATH
.'config/hooks.php');

93 iàĞ! 
	`is£t
(
$hook
è
OR
 ! 
	`is_¬¿y
($hook))

98 
$this
->
hooks
 =& 
$hook
;

99 
$this
->
’abËd
 = 
TRUE
;

100 
	}
}

113 
funùiÚ
 
_ÿÎ_hook
(
$which
 = '')

115 iàĞ! 
$this
->
’abËd
 
OR
 ! 
is£t
($this->
hooks
[
$which
]))

117  
FALSE
;

120 ià(
is£t
(
$this
->
hooks
[
$which
][0]è
AND
 
is_¬¿y
($this->hooks[$which][0]))

122 
fÜ—ch
 (
$this
->
hooks
[
$which
] 
as
 
$v®
)

124 
	g$this
->
_run_hook
(
$v®
);

129 
	g$this
->
_run_hook
(
$this
->
hooks
[
$which
]);

132  
	gTRUE
;

146 
funùiÚ
 
	$_run_hook
(
$d©a
)

148 iàĞ! 
	`is_¬¿y
(
$d©a
))

150  
FALSE
;

160 ià(
$this
->
š_´og»ss
 =ğ
TRUE
)

169 iàĞ! 
	`is£t
(
$d©a
['f•©h']è
OR
 ! isset($data['filename']))

171  
FALSE
;

174 
$f•©h
 = 
APPPATH
.
$d©a
['filepath'].'/'.$data['filename'];

176 iàĞ! 
	`fe_exi¡s
(
$f•©h
))

178  
FALSE
;

185 
$şass
 = 
FALSE
;

186 
$funùiÚ
 = 
FALSE
;

187 
$·¿ms
 = '';

189 ià(
	`is£t
(
$d©a
['şass']è
AND
 $data['class'] != '')

191 
$şass
 = 
$d©a
['class'];

194 ià(
	`is£t
(
$d©a
['function']))

196 
$funùiÚ
 = 
$d©a
['function'];

199 ià(
	`is£t
(
$d©a
['params']))

201 
$·¿ms
 = 
$d©a
['params'];

204 ià(
$şass
 ==ğ
FALSE
 
AND
 
$funùiÚ
 === FALSE)

206  
FALSE
;

213 
$this
->
š_´og»ss
 = 
TRUE
;

219 ià(
$şass
 !=ğ
FALSE
)

221 iàĞ! 
	`şass_exi¡s
(
$şass
))

223 
	`»quœe
(
$f•©h
);

226 
$HOOK
 = 
Ãw
 
$şass
;

227 
$HOOK
->
	`$funùiÚ
(
$·¿ms
);

231 iàĞ! 
	`funùiÚ_exi¡s
(
$funùiÚ
))

233 
	`»quœe
(
$f•©h
);

236 
	`$funùiÚ
(
$·¿ms
);

239 
$this
->
š_´og»ss
 = 
FALSE
;

240  
TRUE
;

241 
	}
}

	@system/core/Input.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_IÅut
 {

36 
v¬
 
	m$_add»ss
 = 
FALSE
;

42 
v¬
 
	m$u£r_ag’t
 = 
FALSE
;

48 
v¬
 
	m$_®low_g‘_¬¿y
 = 
TRUE
;

54 
v¬
 
	m$_¡ªd¬dize_Ãwlšes
 = 
TRUE
;

61 
v¬
 
	m$_’abË_xss
 = 
FALSE
;

68 
v¬
 
	m$_’abË_c¤f
 = 
FALSE
;

74 
´Ùeùed
 
	m$h—d”s
 = 
¬¿y
();

84 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

86 
	`log_mes§ge
('debug', "Input Class Initialized");

88 
$this
->
_®low_g‘_¬¿y
 = (
	`cÚfig_™em
('®low_g‘_¬¿y'è==ğ
TRUE
);

89 
$this
->
_’abË_xss
 = (
	`cÚfig_™em
('glob®_xss_f‹ršg'è==ğ
TRUE
);

90 
$this
->
_’abË_c¤f
 = (
	`cÚfig_™em
('c¤f_´ÙeùiÚ'è==ğ
TRUE
);

92 
glob®
 
$SEC
;

93 
$this
->
£cur™y
 =& 
$SEC
;

96 ià(
UTF8_ENABLED
 ==ğ
TRUE
)

98 
glob®
 
$UNI
;

99 
$this
->
uni
 =& 
$UNI
;

103 
$this
->
	`_§n™ize_glob®s
();

119 
funùiÚ
 
	`_ãtch_äom_¬¿y
(&
$¬¿y
, 
$šdex
 = '', 
$xss_ş—n
 = 
FALSE
)

121 iàĞ! 
	`is£t
(
$¬¿y
[
$šdex
]))

123  
FALSE
;

126 ià(
$xss_ş—n
 ==ğ
TRUE
)

128  
$this
->
£cur™y
->
	`xss_ş—n
(
$¬¿y
[
$šdex
]);

131  
$¬¿y
[
$šdex
];

132 
	}
}

144 
funùiÚ
 
	$g‘
(
$šdex
 = 
NULL
, 
$xss_ş—n
 = 
FALSE
)

147 ià(
$šdex
 ==ğ
NULL
 
AND
 ! 
	`em±y
(
$_GET
))

149 
$g‘
 = 
	`¬¿y
();

152 
	`fÜ—ch
 (
	`¬¿y_keys
(
$_GET
è
as
 
$key
)

154 
$g‘
[
$key
] = 
$this
->
	`_ãtch_äom_¬¿y
(
$_GET
, $key, 
$xss_ş—n
);

156  
$g‘
;

159  
$this
->
	`_ãtch_äom_¬¿y
(
$_GET
, 
$šdex
, 
$xss_ş—n
);

160 
	}
}

172 
funùiÚ
 
	$po¡
(
$šdex
 = 
NULL
, 
$xss_ş—n
 = 
FALSE
)

175 ià(
$šdex
 ==ğ
NULL
 
AND
 ! 
	`em±y
(
$_POST
))

177 
$po¡
 = 
	`¬¿y
();

180 
	`fÜ—ch
 (
	`¬¿y_keys
(
$_POST
è
as
 
$key
)

182 
$po¡
[
$key
] = 
$this
->
	`_ãtch_äom_¬¿y
(
$_POST
, $key, 
$xss_ş—n
);

184  
$po¡
;

187  
$this
->
	`_ãtch_äom_¬¿y
(
$_POST
, 
$šdex
, 
$xss_ş—n
);

188 
	}
}

201 
funùiÚ
 
g‘_po¡
(
$šdex
 = '', 
$xss_ş—n
 = 
FALSE
)

203 iàĞ! 
is£t
(
$_POST
[
$šdex
]) )

205  
$this
->
g‘
(
$šdex
, 
$xss_ş—n
);

209  
	g$this
->
po¡
(
$šdex
, 
$xss_ş—n
);

223 
funùiÚ
 
cook›
(
$šdex
 = '', 
$xss_ş—n
 = 
FALSE
)

225  
$this
->
_ãtch_äom_¬¿y
(
$_COOKIE
, 
$šdex
, 
$xss_ş—n
);

246 
funùiÚ
 
£t_cook›
(
$Çme
 = '', 
$v®ue
 = '', 
$expœe
 = '', 
$domaš
 = '', 
$·th
 = '/', 
$´efix
 = '', 
$£cu»
 = 
FALSE
)

248 ià(
is_¬¿y
(
$Çme
))

251 
fÜ—ch
 (
¬¿y
('v®ue', 'expœe', 'domaš', '·th', '´efix', '£cu»', 'Çme'è
as
 
$™em
)

253 ià(
is£t
(
$Çme
[
$™em
]))

255 
$$™em
 = 
$Çme
[
$™em
];

260 ià(
	g$´efix
 =ğ'' 
AND
 
cÚfig_™em
('cookie_prefix') != '')

262 
$´efix
 = 
cÚfig_™em
('cookie_prefix');

264 ià(
	g$domaš
 =ğ'' 
AND
 
cÚfig_™em
('cookie_domain') != '')

266 
$domaš
 = 
cÚfig_™em
('cookie_domain');

268 ià(
	g$·th
 =ğ'/' 
AND
 
cÚfig_™em
('cookie_path') != '/')

270 
$·th
 = 
cÚfig_™em
('cookie_path');

272 ià(
	g$£cu»
 =ğ
FALSE
 
AND
 
cÚfig_™em
('cookie_secure') != FALSE)

274 
$£cu»
 = 
cÚfig_™em
('cookie_secure');

277 iàĞ! 
is_num”ic
(
$expœe
))

279 
	g$expœe
 = 
time
() - 86500;

283 
	g$expœe
 = (
$expœe
 > 0è? 
time
() + $expire : 0;

286 
£tcook›
(
$´efix
.
$Çme
, 
$v®ue
, 
$expœe
, 
$·th
, 
$domaš
, 
$£cu»
);

299 
funùiÚ
 
£rv”
(
$šdex
 = '', 
$xss_ş—n
 = 
FALSE
)

301  
$this
->
_ãtch_äom_¬¿y
(
$_SERVER
, 
$šdex
, 
$xss_ş—n
);

312 
funùiÚ
 
	$_add»ss
()

314 ià(
$this
->
_add»ss
 !=ğ
FALSE
)

316  
$this
->
_add»ss
;

319 ià(
	`cÚfig_™em
('´oxy_s'è!ğ'' && 
$this
->
	`£rv”
('HTTP_X_FORWARDED_FOR') && $this->server('REMOTE_ADDR'))

321 
$´ox›s
 = 
	`´eg_¥l™
('/[\s,]/', 
	`cÚfig_™em
('´oxy_s'), -1, 
PREG_SPLIT_NO_EMPTY
);

322 
$´ox›s
 = 
	`is_¬¿y
($´ox›sè? $´ox› : 
	`¬¿y
($proxies);

324 
$this
->
_add»ss
 = 
	`š_¬¿y
(
$_SERVER
['REMOTE_ADDR'], 
$´ox›s
) ? $_SERVER['HTTP_X_FORWARDED_FOR'] : $_SERVER['REMOTE_ADDR'];

326 
	`–£if
 (
$this
->
	`£rv”
('REMOTE_ADDR'è
AND
 $this->server('HTTP_CLIENT_IP'))

328 
$this
->
_add»ss
 = 
$_SERVER
['HTTP_CLIENT_IP'];

330 
	`–£if
 (
$this
->
	`£rv”
('REMOTE_ADDR'))

332 
$this
->
_add»ss
 = 
$_SERVER
['REMOTE_ADDR'];

334 
	`–£if
 (
$this
->
	`£rv”
('HTTP_CLIENT_IP'))

336 
$this
->
_add»ss
 = 
$_SERVER
['HTTP_CLIENT_IP'];

338 
	`–£if
 (
$this
->
	`£rv”
('HTTP_X_FORWARDED_FOR'))

340 
$this
->
_add»ss
 = 
$_SERVER
['HTTP_X_FORWARDED_FOR'];

343 ià(
$this
->
_add»ss
 ==ğ
FALSE
)

345 
$this
->
_add»ss
 = '0.0.0.0';

346  
$this
->
_add»ss
;

349 ià(
	`¡½os
(
$this
->
_add»ss
, ','è!=ğ
FALSE
)

351 
$x
 = 
	`ex¶ode
(',', 
$this
->
_add»ss
);

352 
$this
->
_add»ss
 = 
	`Œim
(
	`’d
(
$x
));

355 iàĞ! 
$this
->
	`v®id_
($this->
_add»ss
))

357 
$this
->
_add»ss
 = '0.0.0.0';

360  
$this
->
_add»ss
;

361 
	}
}

374 
funùiÚ
 
	$v®id_
(
$
)

376 
$_£gm’ts
 = 
	`ex¶ode
('.', 
$
);

379 ià(
	`couÁ
(
$_£gm’ts
) != 4)

381  
FALSE
;

384 ià(
$_£gm’ts
[0][0] == '0')

386  
FALSE
;

389 
	`fÜ—ch
 (
$_£gm’ts
 
as
 
$£gm’t
)

393 ià(
$£gm’t
 =ğ'' 
OR
 
	`´eg_m©ch
("/[^0-9]/", $£gm’tèOR $£gm’ˆ> 255 OR 
	`¡¾’
($segment) > 3)

395  
FALSE
;

399  
TRUE
;

400 
	}
}

410 
funùiÚ
 
	$u£r_ag’t
()

412 ià(
$this
->
u£r_ag’t
 !=ğ
FALSE
)

414  
$this
->
u£r_ag’t
;

417 
$this
->
u£r_ag’t
 = ( ! 
	`is£t
(
$_SERVER
['HTTP_USER_AGENT'])è? 
FALSE
 : $_SERVER['HTTP_USER_AGENT'];

419  
$this
->
u£r_ag’t
;

420 
	}
}

438 
funùiÚ
 
	$_§n™ize_glob®s
()

441 
$´Ùeùed
 = 
	`¬¿y
('_SERVER', '_GET', '_POST', '_FILES', '_REQUEST',

448 
	`fÜ—ch
 (
	`¬¿y
(
$_GET
, 
$_POST
, 
$_COOKIE
è
as
 
$glob®
)

450 iàĞ! 
	`is_¬¿y
(
$glob®
))

452 iàĞ! 
	`š_¬¿y
(
$glob®
, 
$´Ùeùed
))

454 
glob®
 
$$glob®
;

455 
$$glob®
 = 
NULL
;

460 
	`fÜ—ch
 (
$glob®
 
as
 
$key
 => 
$v®
)

462 iàĞ! 
	`š_¬¿y
(
$key
, 
$´Ùeùed
))

464 
glob®
 
$$key
;

465 
$$key
 = 
NULL
;

472 ià(
$this
->
_®low_g‘_¬¿y
 =ğ
FALSE
)

474 
$_GET
 = 
	`¬¿y
();

478 ià(
	`is_¬¿y
(
$_GET
è
AND
 
	`couÁ
($_GET) > 0)

480 
	`fÜ—ch
 (
$_GET
 
as
 
$key
 => 
$v®
)

482 
$_GET
[
$this
->
	`_ş—n_šput_keys
(
$key
)] = $this->
	`_ş—n_šput_d©a
(
$v®
);

488 ià(
	`is_¬¿y
(
$_POST
è
AND
 
	`couÁ
($_POST) > 0)

490 
	`fÜ—ch
 (
$_POST
 
as
 
$key
 => 
$v®
)

492 
$_POST
[
$this
->
	`_ş—n_šput_keys
(
$key
)] = $this->
	`_ş—n_šput_d©a
(
$v®
);

497 ià(
	`is_¬¿y
(
$_COOKIE
è
AND
 
	`couÁ
($_COOKIE) > 0)

504 
	`un£t
(
$_COOKIE
['$Version']);

505 
	`un£t
(
$_COOKIE
['$Path']);

506 
	`un£t
(
$_COOKIE
['$Domain']);

508 
	`fÜ—ch
 (
$_COOKIE
 
as
 
$key
 => 
$v®
)

510 
$_COOKIE
[
$this
->
	`_ş—n_šput_keys
(
$key
)] = $this->
	`_ş—n_šput_d©a
(
$v®
);

515 
$_SERVER
['PHP_SELF'] = 
	`¡r_gs
($_SERVER['PHP_SELF']);

519 ià(
$this
->
_’abË_c¤f
 =ğ
TRUE
)

521 
$this
->
£cur™y
->
	`c¤f_v”ify
();

524 
	`log_mes§ge
('debug', "Global POST‡nd COOKIE data sanitized");

525 
	}
}

539 
funùiÚ
 
	$_ş—n_šput_d©a
(
$¡r
)

541 ià(
	`is_¬¿y
(
$¡r
))

543 
$Ãw_¬¿y
 = 
	`¬¿y
();

544 
	`fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

546 
$Ãw_¬¿y
[
$this
->
	`_ş—n_šput_keys
(
$key
)] = $this->
	`_ş—n_šput_d©a
(
$v®
);

548  
$Ãw_¬¿y
;

556 iàĞ! 
	`is_php
('5.4'è&& 
	`g‘_magic_quÙes_gpc
())

558 
$¡r
 = 
	`¡r¦ashes
($str);

562 ià(
UTF8_ENABLED
 ==ğ
TRUE
)

564 
$¡r
 = 
$this
->
uni
->
	`ş—n_¡ršg
($str);

568 
$¡r
 = 
	`»move_švisibË_ch¬aù”s
($str);

571 ià(
$this
->
_’abË_xss
 ==ğ
TRUE
)

573 
$¡r
 = 
$this
->
£cur™y
->
	`xss_ş—n
($str);

577 ià(
$this
->
_¡ªd¬dize_Ãwlšes
 =ğ
TRUE
)

579 ià(
	`¡½os
(
$¡r
, "\r"è!=ğ
FALSE
)

581 
$¡r
 = 
	`¡r_»¶aû
(
	`¬¿y
("\r\n", "\r", "\r\n\n"), 
PHP_EOL
, $str);

585  
$¡r
;

586 
	}
}

601 
funùiÚ
 
	$_ş—n_šput_keys
(
$¡r
)

603 iàĞ! 
	`´eg_m©ch
("/^[a-z0-9:_\/-]+$/i", 
$¡r
))

605 
	`ex™
('Disallowed Key Characters.');

609 ià(
UTF8_ENABLED
 ==ğ
TRUE
)

611 
$¡r
 = 
$this
->
uni
->
	`ş—n_¡ršg
($str);

614  
$¡r
;

615 
	}
}

629 
public
 
funùiÚ
 
	$»que¡_h—d”s
(
$xss_ş—n
 = 
FALSE
)

632 ià(
	`funùiÚ_exi¡s
('apache_request_headers'))

634 
$h—d”s
 = 
	`­ache_»que¡_h—d”s
();

638 
$h—d”s
['CÚ‹Á-Ty³'] = (
	`is£t
(
$_SERVER
['CONTENT_TYPE'])è? $_SERVER['CONTENT_TYPE'] : @
	`g‘’v
('CONTENT_TYPE');

640 
	`fÜ—ch
 (
$_SERVER
 
as
 
$key
 => 
$v®
)

642 ià(
	`¡ºcmp
(
$key
, 'HTTP_', 5) === 0)

644 
$h—d”s
[
	`sub¡r
(
$key
, 5)] = 
$this
->
	`_ãtch_äom_¬¿y
(
$_SERVER
, $key, 
$xss_ş—n
);

650 
	`fÜ—ch
 (
$h—d”s
 
as
 
$key
 => 
$v®
)

652 
$key
 = 
	`¡r_»¶aû
('_', ' ', 
	`¡¹Şow”
($key));

653 
$key
 = 
	`¡r_»¶aû
(' ', '-', 
	`ucwÜds
($key));

655 
$this
->
h—d”s
[
$key
] = 
$v®
;

658  
$this
->
h—d”s
;

659 
	}
}

672 
public
 
funùiÚ
 
	$g‘_»que¡_h—d”
(
$šdex
, 
$xss_ş—n
 = 
FALSE
)

674 ià(
	`em±y
(
$this
->
h—d”s
))

676 
$this
->
	`»que¡_h—d”s
();

679 iàĞ! 
	`is£t
(
$this
->
h—d”s
[
$šdex
]))

681  
FALSE
;

684 ià(
$xss_ş—n
 ==ğ
TRUE
)

686  
$this
->
£cur™y
->
	`xss_ş—n
($this->
h—d”s
[
$šdex
]);

689  
$this
->
h—d”s
[
$šdex
];

690 
	}
}

701 
public
 
funùiÚ
 
	$is_ajax_»que¡
()

703  (
$this
->
	`£rv”
('HTTP_X_REQUESTED_WITH') === 'XMLHttpRequest');

704 
	}
}

715 
public
 
funùiÚ
 
	$is_şi_»que¡
()

717  (
	`php_§pi_Çme
(è=ğ'şi'è
Ü
 
	`defšed
('STDIN');

718 
	}
}

	@system/core/Lang.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_Lªg
 {

34 
v¬
 
	m$Ïnguage
 = 
¬¿y
();

40 
v¬
 
	m$is_lßded
 = 
¬¿y
();

47 
funùiÚ
 
	$__cÚ¡ruù
()

49 
	`log_mes§ge
('debug', "Language Class Initialized");

65 
funùiÚ
 
	`lßd
(
$Ïngfe
 = '', 
$idiom
 = '', 
$»tuº
 = 
FALSE
, 
$add_suffix
 = 
TRUE
, 
$®t_·th
 = '')

67 
$Ïngfe
 = 
	`¡r_»¶aû
('.php', '', $langfile);

69 ià(
$add_suffix
 =ğ
TRUE
)

71 
$Ïngfe
 = 
	`¡r_»¶aû
('_lang.', '', $langfile).'_lang';

74 
$Ïngfe
 .= '.php';

76 ià(
	`š_¬¿y
(
$Ïngfe
, 
$this
->
is_lßded
, 
TRUE
))

81 
$cÚfig
 =& 
	`g‘_cÚfig
();

83 ià(
$idiom
 == '')

85 
$deá_Ïng
 = ( ! 
	`is£t
(
$cÚfig
['language'])) ? 'english' : $config['language'];

86 
$idiom
 = (
$deá_Ïng
 == '') ? 'english' : $deft_lang;

90 ià(
$®t_·th
 !ğ'' && 
	`fe_exi¡s
($®t_·th.'Ïnguage/'.
$idiom
.'/'.
$Ïngfe
))

92 
	`šşude
(
$®t_·th
.'Ïnguage/'.
$idiom
.'/'.
$Ïngfe
);

96 
$found
 = 
FALSE
;

98 
	`fÜ—ch
 (
	`g‘_š¡ªû
()->
lßd
->
	`g‘_·ckage_·ths
(
TRUE
è
as
 
$·ckage_·th
)

100 ià(
	`fe_exi¡s
(
$·ckage_·th
.'Ïnguage/'.
$idiom
.'/'.
$Ïngfe
))

102 
	`šşude
(
$·ckage_·th
.'Ïnguage/'.
$idiom
.'/'.
$Ïngfe
);

103 
$found
 = 
TRUE
;

108 ià(
$found
 !=ğ
TRUE
)

110 
	`show_”rÜ
('UÇbËØlßdh»que¡ed†ªguagfe:†ªguage/'.
$idiom
.'/'.
$Ïngfe
);

115 iàĞ! 
	`is£t
(
$Ïng
))

117 
	`log_mes§ge
('”rÜ', 'LªguagfcÚš nØd©a:†ªguage/'.
$idiom
.'/'.
$Ïngfe
);

121 ià(
$»tuº
 =ğ
TRUE
)

123  
$Ïng
;

126 
$this
->
is_lßded
[] = 
$Ïngfe
;

127 
$this
->
Ïnguage
 = 
	`¬¿y_m”ge
($this->Ïnguage, 
$Ïng
);

128 
	`un£t
(
$Ïng
);

130 
	`log_mes§ge
('debug', 'Lªguagflßded:†ªguage/'.
$idiom
.'/'.
$Ïngfe
);

131  
TRUE
;

132 
	}
}

143 
funùiÚ
 
lše
(
$lše
 = '')

145 
$v®ue
 = (
$lše
 =ğ'' 
OR
 ! 
is£t
(
$this
->
Ïnguage
[$lše])è? 
FALSE
 : $this->language[$line];

148 ià(
	g$v®ue
 ==ğ
FALSE
)

150 
log_mes§ge
('”rÜ', 'Could‚Ù fšdhÏnguaglš"'.
$lše
.'"');

153  
	g$v®ue
;

	@system/core/Loader.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_Lßd”
 {

38 
´Ùeùed
 
	m$_ci_ob_Ëv–
;

45 
´Ùeùed
 
	m$_ci_v›w_·ths
 = 
¬¿y
();

52 
´Ùeùed
 
	m$_ci_lib¿ry_·ths
 = 
¬¿y
();

59 
´Ùeùed
 
	m$_ci_mod–_·ths
 = 
¬¿y
();

66 
´Ùeùed
 
	m$_ci_h–³r_·ths
 = 
¬¿y
();

74 
´Ùeùed
 
	m$_ba£_şas£s
 = 
¬¿y
();

81 
´Ùeùed
 
	m$_ci_ÿched_v¬s
 = 
¬¿y
();

88 
´Ùeùed
 
	m$_ci_şas£s
 = 
¬¿y
();

95 
´Ùeùed
 
	m$_ci_lßded_fes
 = 
¬¿y
();

102 
´Ùeùed
 
	m$_ci_mod–s
 = 
¬¿y
();

109 
´Ùeùed
 
	m$_ci_h–³rs
 = 
¬¿y
();

116 
´Ùeùed
 
	m$_ci_v¬m­
 = 
¬¿y
('unit_test' => 'unit',

124 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

126 
$this
->
_ci_ob_Ëv–
 = 
	`ob_g‘_Ëv–
();

127 
$this
->
_ci_lib¿ry_·ths
 = 
	`¬¿y
(
APPPATH
, 
BASEPATH
);

128 
$this
->
_ci_h–³r_·ths
 = 
	`¬¿y
(
APPPATH
, 
BASEPATH
);

129 
$this
->
_ci_mod–_·ths
 = 
	`¬¿y
(
APPPATH
);

130 
$this
->
_ci_v›w_·ths
 = 
	`¬¿y
(
APPPATH
.'v›ws/' => 
TRUE
);

132 
	`log_mes§ge
('debug', "Loader Class Initialized");

145 
public
 
funùiÚ
 
	$š™Ÿlize
()

147 
$this
->
_ci_şas£s
 = 
	`¬¿y
();

148 
$this
->
_ci_lßded_fes
 = 
	`¬¿y
();

149 
$this
->
_ci_mod–s
 = 
	`¬¿y
();

150 
$this
->
_ba£_şas£s
 =& 
	`is_lßded
();

152 
$this
->
	`_ci_autŞßd”
();

154  
$this
;

155 
	}
}

171 
public
 
funùiÚ
 
	$is_lßded
(
$şass
)

173 ià(
	`is£t
(
$this
->
_ci_şas£s
[
$şass
]))

175  
$this
->
_ci_şas£s
[
$şass
];

178  
FALSE
;

179 
	}
}

194 
public
 
funùiÚ
 
lib¿ry
(
$lib¿ry
 = '', 
$·¿ms
 = 
NULL
, 
$objeù_Çme
 = NULL)

196 ià(
is_¬¿y
(
$lib¿ry
))

198 
fÜ—ch
 (
$lib¿ry
 
as
 
$şass
)

200 
$this
->
lib¿ry
(
$şass
, 
$·¿ms
);

206 ià(
	g$lib¿ry
 =ğ'' 
OR
 
is£t
(
$this
->
_ba£_şas£s
[
$lib¿ry
]))

208  
FALSE
;

211 iàĞ! 
is_nuÎ
(
$·¿ms
è&& ! 
is_¬¿y
($params))

213 
	g$·¿ms
 = 
NULL
;

216 
	g$this
->
_ci_lßd_şass
(
$lib¿ry
, 
$·¿ms
, 
$objeù_Çme
);

231 
public
 
funùiÚ
 
mod–
(
$mod–
, 
$Çme
 = '', 
$db_cÚn
 = 
FALSE
)

233 ià(
is_¬¿y
(
$mod–
))

235 
fÜ—ch
 (
$mod–
 
as
 
$babe
)

237 
$this
->
mod–
(
$babe
);

242 ià(
	g$mod–
 == '')

247 
	g$·th
 = '';

250 ià((
	g$Ï¡_¦ash
 = 
¡¼pos
(
$mod–
, '/')è!=ğ
FALSE
)

253 
$·th
 = 
sub¡r
(
$mod–
, 0, 
$Ï¡_¦ash
 + 1);

256 
	g$mod–
 = 
sub¡r
(
$mod–
, 
$Ï¡_¦ash
 + 1);

259 ià(
	g$Çme
 == '')

261 
$Çme
 = 
$mod–
;

264 ià(
š_¬¿y
(
$Çme
, 
$this
->
_ci_mod–s
, 
TRUE
))

269 
	g$CI
 =& 
g‘_š¡ªû
();

270 ià(
is£t
(
$CI
->
$Çme
))

272 
show_”rÜ
('Thmod–‚amyou‡»†ßdšg i thÇmoà¨»sourûh© i ®»ady bešg u£d: '.
$Çme
);

275 
	g$mod–
 = 
¡¹Şow”
(
$mod–
);

277 
fÜ—ch
 (
$this
->
_ci_mod–_·ths
 
as
 
$mod_·th
)

279 iàĞ! 
fe_exi¡s
(
$mod_·th
.'mod–s/'.
$·th
.
$mod–
.'.php'))

284 ià(
	g$db_cÚn
 !=ğ
FALSE
 
AND
 ! 
şass_exi¡s
('CI_DB'))

286 ià(
$db_cÚn
 ==ğ
TRUE
)

288 
$db_cÚn
 = '';

291 
	g$CI
->
	glßd
->
d©aba£
(
$db_cÚn
, 
FALSE
, 
TRUE
);

294 iàĞ! 
şass_exi¡s
('CI_Model'))

296 
lßd_şass
('Model', 'core');

299 
»quœe_Úû
(
$mod_·th
.'mod–s/'.
$·th
.
$mod–
.'.php');

301 
	g$mod–
 = 
ucfœ¡
(
$mod–
);

303 
	g$CI
->
	g$Çme
 = 
Ãw
 
$mod–
();

305 
	g$this
->
	g_ci_mod–s
[] = 
$Çme
;

310 
show_”rÜ
('UÇbËØloÿ‹hmod– you hav¥ecif›d: '.
$mod–
);

323 
public
 
funùiÚ
 
d©aba£
(
$·¿ms
 = '', 
$»tuº
 = 
FALSE
, 
$aùive_»cÜd
 = 
NULL
)

326 
$CI
 =& 
g‘_š¡ªû
();

329 ià(
şass_exi¡s
('CI_DB'è
AND
 
	g$»tuº
 =ğ
FALSE
 AND 
$aùive_»cÜd
 =ğ
NULL
 AND 
is£t
(
$CI
->
db
èAND 
is_objeù
($CI->db))

331  
FALSE
;

334 
»quœe_Úû
(
BASEPATH
.'database/DB.php');

336 ià(
	g$»tuº
 ==ğ
TRUE
)

338  
DB
(
$·¿ms
, 
$aùive_»cÜd
);

343 
	g$CI
->
	gdb
 = '';

346 
	g$CI
->
	gdb
 =& 
DB
(
$·¿ms
, 
$aùive_»cÜd
);

356 
public
 
funùiÚ
 
	$dbut
()

358 iàĞ! 
	`şass_exi¡s
('CI_DB'))

360 
$this
->
	`d©aba£
();

363 
$CI
 =& 
	`g‘_š¡ªû
();

367 
$CI
->
lßd
->
	`dbfÜge
();

369 
	`»quœe_Úû
(
BASEPATH
.'database/DB_utility.php');

370 
	`»quœe_Úû
(
BASEPATH
.'d©aba£/driv”s/'.
$CI
->
db
->
dbdriv”
.'/'.$CI->db->dbdriver.'_utility.php');

371 
$şass
 = 'CI_DB_'.
$CI
->
db
->
dbdriv”
.'_utility';

373 
$CI
->
dbut
 = 
Ãw
 
	`$şass
();

374 
	}
}

383 
public
 
funùiÚ
 
	$dbfÜge
()

385 iàĞ! 
	`şass_exi¡s
('CI_DB'))

387 
$this
->
	`d©aba£
();

390 
$CI
 =& 
	`g‘_š¡ªû
();

392 
	`»quœe_Úû
(
BASEPATH
.'database/DB_forge.php');

393 
	`»quœe_Úû
(
BASEPATH
.'d©aba£/driv”s/'.
$CI
->
db
->
dbdriv”
.'/'.$CI->db->dbdriver.'_forge.php');

394 
$şass
 = 'CI_DB_'.
$CI
->
db
->
dbdriv”
.'_forge';

396 
$CI
->
dbfÜge
 = 
Ãw
 
	`$şass
();

397 
	}
}

417 
public
 
funùiÚ
 
v›w
(
$v›w
, 
$v¬s
 = 
¬¿y
(), 
$»tuº
 = 
FALSE
)

419  
$this
->
_ci_lßd
(
¬¿y
('_ci_v›w' => 
$v›w
, '_ci_v¬s' => $this->
_ci_objeù_to_¬¿y
(
$v¬s
), '_ci_»tuº' => 
$»tuº
));

433 
public
 
funùiÚ
 
	$fe
(
$·th
, 
$»tuº
 = 
FALSE
)

435  
$this
->
	`_ci_lßd
(
	`¬¿y
('_ci_·th' => 
$·th
, '_ci_»tuº' => 
$»tuº
));

436 
	}
}

450 
public
 
funùiÚ
 
v¬s
(
$v¬s
 = 
¬¿y
(), 
$v®
 = '')

452 ià(
$v®
 !ğ'' 
AND
 
is_¡ršg
(
$v¬s
))

454 
$v¬s
 = 
¬¿y
($v¬ => 
$v®
);

457 
	g$v¬s
 = 
$this
->
_ci_objeù_to_¬¿y
(
$v¬s
);

459 ià(
is_¬¿y
(
$v¬s
è
AND
 
couÁ
($vars) > 0)

461 
fÜ—ch
 (
$v¬s
 
as
 
$key
 => 
$v®
)

463 
$this
->
_ci_ÿched_v¬s
[
$key
] = 
$v®
;

478 
public
 
funùiÚ
 
	$g‘_v¬
(
$key
)

480  
	`is£t
(
$this
->
_ci_ÿched_v¬s
[
$key
]è? $this->_ci_ÿched_v¬s[$key] : 
NULL
;

481 
	}
}

493 
public
 
funùiÚ
 
h–³r
(
$h–³rs
 = 
	$¬¿y
())

495 
	`fÜ—ch
 (
$this
->
	`_ci_´•_f’ame
(
$h–³rs
, '_h–³r'è
as
 
$h–³r
)

497 ià(
	`is£t
(
$this
->
_ci_h–³rs
[
$h–³r
]))

502 
$ext_h–³r
 = 
APPPATH
.'h–³rs/'.
	`cÚfig_™em
('subşass_´efix').
$h–³r
.'.php';

505 ià(
	`fe_exi¡s
(
$ext_h–³r
))

507 
$ba£_h–³r
 = 
BASEPATH
.'h–³rs/'.
$h–³r
.'.php';

509 iàĞ! 
	`fe_exi¡s
(
$ba£_h–³r
))

511 
	`show_”rÜ
('UÇbËØlßdh»que¡ed fe: h–³rs/'.
$h–³r
.'.php');

514 
	`šşude_Úû
(
$ext_h–³r
);

515 
	`šşude_Úû
(
$ba£_h–³r
);

517 
$this
->
_ci_h–³rs
[
$h–³r
] = 
TRUE
;

518 
	`log_mes§ge
('debug', 'H–³¸lßded: '.
$h–³r
);

523 
	`fÜ—ch
 (
$this
->
_ci_h–³r_·ths
 
as
 
$·th
)

525 ià(
	`fe_exi¡s
(
$·th
.'h–³rs/'.
$h–³r
.'.php'))

527 
	`šşude_Úû
(
$·th
.'h–³rs/'.
$h–³r
.'.php');

529 
$this
->
_ci_h–³rs
[
$h–³r
] = 
TRUE
;

530 
	`log_mes§ge
('debug', 'H–³¸lßded: '.
$h–³r
);

536 iàĞ! 
	`is£t
(
$this
->
_ci_h–³rs
[
$h–³r
]))

538 
	`show_”rÜ
('UÇbËØlßdh»que¡ed fe: h–³rs/'.
$h–³r
.'.php');

541 
	}
}

554 
public
 
funùiÚ
 
h–³rs
(
$h–³rs
 = 
	$¬¿y
())

556 
$this
->
	`h–³r
(
$h–³rs
);

557 
	}
}

568 
public
 
funùiÚ
 
Ïnguage
(
$fe
 = 
¬¿y
(), 
$Ïng
 = '')

570 
$CI
 =& 
g‘_š¡ªû
();

572 iàĞ! 
is_¬¿y
(
$fe
))

574 
	g$fe
 = 
¬¿y
(
$fe
);

577 
fÜ—ch
 (
$fe
 
as
 
$Ïngfe
)

579 
	g$CI
->
	gÏng
->
lßd
(
$Ïngfe
, 
$Ïng
);

593 
public
 
funùiÚ
 
cÚfig
(
$fe
 = '', 
$u£_£ùiÚs
 = 
FALSE
, 
$ç_g¿ûfuÎy
 = FALSE)

595 
$CI
 =& 
g‘_š¡ªû
();

596 
	g$CI
->
	gcÚfig
->
lßd
(
$fe
, 
$u£_£ùiÚs
, 
$ç_g¿ûfuÎy
);

611 
public
 
funùiÚ
 
driv”
(
$lib¿ry
 = '', 
$·¿ms
 = 
NULL
, 
$objeù_Çme
 = NULL)

613 iàĞ! 
şass_exi¡s
('CI_Driver_Library'))

616 
»quœe
 
BASEPATH
.'libraries/Driver.php';

619 ià(
	g$lib¿ry
 == '')

621  
FALSE
;

626 iàĞ! 
¡½os
(
$lib¿ry
, '/'))

628 
	g$lib¿ry
 = 
ucfœ¡
(
$lib¿ry
).'/'.$library;

631  
	g$this
->
lib¿ry
(
$lib¿ry
, 
$·¿ms
, 
$objeù_Çme
);

645 
public
 
funùiÚ
 
	$add_·ckage_·th
(
$·th
, 
$v›w_ÿsÿde
=
TRUE
)

647 
$·th
 = 
	`¹rim
($path, '/').'/';

649 
	`¬¿y_unshiá
(
$this
->
_ci_lib¿ry_·ths
, 
$·th
);

650 
	`¬¿y_unshiá
(
$this
->
_ci_mod–_·ths
, 
$·th
);

651 
	`¬¿y_unshiá
(
$this
->
_ci_h–³r_·ths
, 
$·th
);

653 
$this
->
_ci_v›w_·ths
 = 
	`¬¿y
(
$·th
.'v›ws/' => 
$v›w_ÿsÿde
) + $this->_ci_view_paths;

656 
$cÚfig
 =& 
$this
->
	`_ci_g‘_compÚ’t
('config');

657 
	`¬¿y_unshiá
(
$cÚfig
->
_cÚfig_·ths
, 
$·th
);

658 
	}
}

670 
public
 
funùiÚ
 
	$g‘_·ckage_·ths
(
$šşude_ba£
 = 
FALSE
)

672  
$šşude_ba£
 ==ğ
TRUE
 ? 
$this
->
_ci_lib¿ry_·ths
 : $this->
_ci_mod–_·ths
;

673 
	}
}

687 
public
 
funùiÚ
 
»move_·ckage_·th
(
$·th
 = '', 
$»move_cÚfig_·th
 = 
TRUE
)

689 
$cÚfig
 =& 
$this
->
_ci_g‘_compÚ’t
('config');

691 ià(
	g$·th
 == '')

693 
$void
 = 
¬¿y_shiá
(
$this
->
_ci_lib¿ry_·ths
);

694 
	g$void
 = 
¬¿y_shiá
(
$this
->
_ci_mod–_·ths
);

695 
	g$void
 = 
¬¿y_shiá
(
$this
->
_ci_h–³r_·ths
);

696 
	g$void
 = 
¬¿y_shiá
(
$this
->
_ci_v›w_·ths
);

697 
	g$void
 = 
¬¿y_shiá
(
$cÚfig
->
_cÚfig_·ths
);

701 
	g$·th
 = 
¹rim
(
$·th
, '/').'/';

702 
fÜ—ch
 (
¬¿y
('_ci_lib¿ry_·ths', '_ci_mod–_·ths', '_ci_h–³r_·ths'è
as
 
$v¬
)

704 ià((
	g$key
 = 
¬¿y_£¬ch
(
$·th
, 
$this
->{
$v¬
})è!=ğ
FALSE
)

706 
un£t
(
$this
->{
$v¬
}[
$key
]);

710 ià(
is£t
(
$this
->
_ci_v›w_·ths
[
$·th
.'views/']))

712 
un£t
(
$this
->
_ci_v›w_·ths
[
$·th
.'views/']);

715 ià((
	g$key
 = 
¬¿y_£¬ch
(
$·th
, 
$cÚfig
->
_cÚfig_·ths
)è!=ğ
FALSE
)

717 
un£t
(
$cÚfig
->
_cÚfig_·ths
[
$key
]);

722 
	g$this
->
	g_ci_lib¿ry_·ths
 = 
¬¿y_unique
(
¬¿y_m”ge
(
$this
->
_ci_lib¿ry_·ths
, 
¬¿y
(
APPPATH
, 
BASEPATH
)));

723 
	g$this
->
	g_ci_h–³r_·ths
 = 
¬¿y_unique
(
¬¿y_m”ge
(
$this
->
_ci_h–³r_·ths
, 
¬¿y
(
APPPATH
, 
BASEPATH
)));

724 
	g$this
->
	g_ci_mod–_·ths
 = 
¬¿y_unique
(
¬¿y_m”ge
(
$this
->
_ci_mod–_·ths
, 
¬¿y
(
APPPATH
)));

725 
	g$this
->
	g_ci_v›w_·ths
 = 
¬¿y_m”ge
(
$this
->
_ci_v›w_·ths
, 
¬¿y
(
APPPATH
.'v›ws/' => 
TRUE
));

726 
	g$cÚfig
->
	g_cÚfig_·ths
 = 
¬¿y_unique
(
¬¿y_m”ge
(
$cÚfig
->
_cÚfig_·ths
, 
¬¿y
(
APPPATH
)));

741 
´Ùeùed
 
funùiÚ
 
	$_ci_lßd
(
$_ci_d©a
)

744 
	`fÜ—ch
 (
	`¬¿y
('_ci_v›w', '_ci_v¬s', '_ci_·th', '_ci_»tuº'è
as
 
$_ci_v®
)

746 
$$_ci_v®
 = ( ! 
	`is£t
(
$_ci_d©a
[
$_ci_v®
])è? 
FALSE
 : $_ci_data[$_ci_val];

749 
$fe_exi¡s
 = 
FALSE
;

752 ià(
$_ci_·th
 != '')

754 
$_ci_x
 = 
	`ex¶ode
('/', 
$_ci_·th
);

755 
$_ci_fe
 = 
	`’d
(
$_ci_x
);

759 
$_ci_ext
 = 
	`·thšfo
(
$_ci_v›w
, 
PATHINFO_EXTENSION
);

760 
$_ci_fe
 = (
$_ci_ext
 =ğ''è? 
$_ci_v›w
.'.php' : $_ci_view;

762 
	`fÜ—ch
 (
$this
->
_ci_v›w_·ths
 
as
 
$v›w_fe
 => 
$ÿsÿde
)

764 ià(
	`fe_exi¡s
(
$v›w_fe
.
$_ci_fe
))

766 
$_ci_·th
 = 
$v›w_fe
.
$_ci_fe
;

767 
$fe_exi¡s
 = 
TRUE
;

771 iàĞ! 
$ÿsÿde
)

778 iàĞ! 
$fe_exi¡s
 && ! 
	`fe_exi¡s
(
$_ci_·th
))

780 
	`show_”rÜ
('UÇbËØlßdh»que¡ed fe: '.
$_ci_fe
);

786 
$_ci_CI
 =& 
	`g‘_š¡ªû
();

787 
	`fÜ—ch
 (
	`g‘_objeù_v¬s
(
$_ci_CI
è
as
 
$_ci_key
 => 
$_ci_v¬
)

789 iàĞ! 
	`is£t
(
$this
->
$_ci_key
))

791 
$this
->
$_ci_key
 =& 
$_ci_CI
->$_ci_key;

803 ià(
	`is_¬¿y
(
$_ci_v¬s
))

805 
$this
->
_ci_ÿched_v¬s
 = 
	`¬¿y_m”ge
($this->_ci_ÿched_v¬s, 
$_ci_v¬s
);

807 
	`exŒaù
(
$this
->
_ci_ÿched_v¬s
);

821 
	`ob_¡¬t
();

827 ià((
boŞ
è@
	`ši_g‘
('shÜt_İ’_g'è==ğ
FALSE
 
AND
 
	`cÚfig_™em
('»wr™e_shÜt_gs'è=ğ
TRUE
)

829 
echo
 
	`ev®
('?>'.
	`´eg_»¶aû
("/;*\s*\?>/", "; ?>", 
	`¡r_»¶aû
('<?=', '<?ph°echØ', 
	`fe_g‘_cÚ‹Ás
(
$_ci_·th
))));

833 
	`šşude
(
$_ci_·th
);

836 
	`log_mes§ge
('debug', 'Flßded: '.
$_ci_·th
);

839 ià(
$_ci_»tuº
 ==ğ
TRUE
)

841 
$bufãr
 = 
	`ob_g‘_cÚ‹Ás
();

842 @
	`ob_’d_ş—n
();

843  
$bufãr
;

856 ià(
	`ob_g‘_Ëv–
(è> 
$this
->
_ci_ob_Ëv–
 + 1)

858 
	`ob_’d_æush
();

862 
$_ci_CI
->
ouut
->
	`­³nd_ouut
(
	`ob_g‘_cÚ‹Ás
());

863 @
	`ob_’d_ş—n
();

865 
	}
}

879 
´Ùeùed
 
funùiÚ
 
	$_ci_lßd_şass
(
$şass
, 
$·¿ms
 = 
NULL
, 
$objeù_Çme
 = NULL)

884 
$şass
 = 
	`¡r_»¶aû
('.php', '', 
	`Œim
($class, '/'));

888 
$subdœ
 = '';

889 ià((
$Ï¡_¦ash
 = 
	`¡¼pos
(
$şass
, '/')è!=ğ
FALSE
)

892 
$subdœ
 = 
	`sub¡r
(
$şass
, 0, 
$Ï¡_¦ash
 + 1);

895 
$şass
 = 
	`sub¡r
($şass, 
$Ï¡_¦ash
 + 1);

899 
	`fÜ—ch
 (
	`¬¿y
(
	`ucfœ¡
(
$şass
), 
	`¡¹Şow”
($şass)è
as
 $class)

901 
$subşass
 = 
APPPATH
.'lib¿r›s/'.
$subdœ
.
	`cÚfig_™em
('subşass_´efix').
$şass
.'.php';

904 ià(
	`fe_exi¡s
(
$subşass
))

906 
$ba£şass
 = 
BASEPATH
.'lib¿r›s/'.
	`ucfœ¡
(
$şass
).'.php';

908 iàĞ! 
	`fe_exi¡s
(
$ba£şass
))

910 
	`log_mes§ge
('”rÜ', "UÇbËØlßdh»que¡ed cÏss: ".
$şass
);

911 
	`show_”rÜ
("UÇbËØlßdh»que¡ed cÏss: ".
$şass
);

915 ià(
	`š_¬¿y
(
$subşass
, 
$this
->
_ci_lßded_fes
))

920 iàĞ! 
	`is_nuÎ
(
$objeù_Çme
))

922 
$CI
 =& 
	`g‘_š¡ªû
();

923 iàĞ! 
	`is£t
(
$CI
->
$objeù_Çme
))

925  
$this
->
	`_ci_š™_şass
(
$şass
, 
	`cÚfig_™em
('subşass_´efix'), 
$·¿ms
, 
$objeù_Çme
);

929 
$is_du¶iÿ‹
 = 
TRUE
;

930 
	`log_mes§ge
('debug', 
$şass
." class‡lready†oaded. Second‡ttempt ignored.");

934 
	`šşude_Úû
(
$ba£şass
);

935 
	`šşude_Úû
(
$subşass
);

936 
$this
->
_ci_lßded_fes
[] = 
$subşass
;

938  
$this
->
	`_ci_š™_şass
(
$şass
, 
	`cÚfig_™em
('subşass_´efix'), 
$·¿ms
, 
$objeù_Çme
);

942 
$is_du¶iÿ‹
 = 
FALSE
;

943 
	`fÜ—ch
 (
$this
->
_ci_lib¿ry_·ths
 
as
 
$·th
)

945 
$f•©h
 = 
$·th
.'lib¿r›s/'.
$subdœ
.
$şass
.'.php';

948 iàĞ! 
	`fe_exi¡s
(
$f•©h
))

954 ià(
	`š_¬¿y
(
$f•©h
, 
$this
->
_ci_lßded_fes
))

959 iàĞ! 
	`is_nuÎ
(
$objeù_Çme
))

961 
$CI
 =& 
	`g‘_š¡ªû
();

962 iàĞ! 
	`is£t
(
$CI
->
$objeù_Çme
))

964  
$this
->
	`_ci_š™_şass
(
$şass
, '', 
$·¿ms
, 
$objeù_Çme
);

968 
$is_du¶iÿ‹
 = 
TRUE
;

969 
	`log_mes§ge
('debug', 
$şass
." class‡lready†oaded. Second‡ttempt ignored.");

973 
	`šşude_Úû
(
$f•©h
);

974 
$this
->
_ci_lßded_fes
[] = 
$f•©h
;

975  
$this
->
	`_ci_š™_şass
(
$şass
, '', 
$·¿ms
, 
$objeù_Çme
);

981 ià(
$subdœ
 == '')

983 
$·th
 = 
	`¡¹Şow”
(
$şass
).'/'.$class;

984  
$this
->
	`_ci_lßd_şass
(
$·th
, 
$·¿ms
);

989 ià(
$is_du¶iÿ‹
 =ğ
FALSE
)

991 
	`log_mes§ge
('”rÜ', "UÇbËØlßdh»que¡ed cÏss: ".
$şass
);

992 
	`show_”rÜ
("UÇbËØlßdh»que¡ed cÏss: ".
$şass
);

994 
	}
}

1007 
´Ùeùed
 
funùiÚ
 
_ci_š™_şass
(
$şass
, 
$´efix
 = '', 
$cÚfig
 = 
FALSE
, 
$objeù_Çme
 = 
NULL
)

1010 ià(
$cÚfig
 ==ğ
NULL
)

1013 
$cÚfig_compÚ’t
 = 
$this
->
_ci_g‘_compÚ’t
('config');

1015 ià(
is_¬¿y
(
$cÚfig_compÚ’t
->
_cÚfig_·ths
))

1019 
fÜ—ch
 (
$cÚfig_compÚ’t
->
_cÚfig_·ths
 
as
 
$·th
)

1024 ià(
defšed
('ENVIRONMENT'è
AND
 
fe_exi¡s
(
$·th
 .'cÚfig/'.
ENVIRONMENT
.'/'.
¡¹Şow”
(
$şass
).'.php'))

1026 
šşude
(
$·th
 .'cÚfig/'.
ENVIRONMENT
.'/'.
¡¹Şow”
(
$şass
).'.php');

1029 
–£if
 (
defšed
('ENVIRONMENT'è
AND
 
fe_exi¡s
(
$·th
 .'cÚfig/'.
ENVIRONMENT
.'/'.
ucfœ¡
(
¡¹Şow”
(
$şass
)).'.php'))

1031 
šşude
(
$·th
 .'cÚfig/'.
ENVIRONMENT
.'/'.
ucfœ¡
(
¡¹Şow”
(
$şass
)).'.php');

1034 
–£if
 (
fe_exi¡s
(
$·th
 .'cÚfig/'.
¡¹Şow”
(
$şass
).'.php'))

1036 
šşude
(
$·th
 .'cÚfig/'.
¡¹Şow”
(
$şass
).'.php');

1039 
–£if
 (
fe_exi¡s
(
$·th
 .'cÚfig/'.
ucfœ¡
(
¡¹Şow”
(
$şass
)).'.php'))

1041 
šşude
(
$·th
 .'cÚfig/'.
ucfœ¡
(
¡¹Şow”
(
$şass
)).'.php');

1048 ià(
	g$´efix
 == '')

1050 ià(
şass_exi¡s
('CI_'.
$şass
))

1052 
$Çme
 = 'CI_'.
$şass
;

1054 
–£if
 (
şass_exi¡s
(
cÚfig_™em
('subşass_´efix').
$şass
))

1056 
	g$Çme
 = 
cÚfig_™em
('subşass_´efix').
$şass
;

1060 
	g$Çme
 = 
$şass
;

1065 
	g$Çme
 = 
$´efix
.
$şass
;

1069 iàĞ! 
şass_exi¡s
(
$Çme
))

1071 
log_mes§ge
('”rÜ', "NÚ-exi¡’ˆşass: ".
$Çme
);

1072 
show_”rÜ
("NÚ-exi¡’ˆşass: ".
$şass
);

1077 
	g$şass
 = 
¡¹Şow”
(
$şass
);

1079 ià(
is_nuÎ
(
$objeù_Çme
))

1081 
	g$şassv¬
 = ( ! 
is£t
(
$this
->
_ci_v¬m­
[
$şass
])) ? $class : $this->_ci_varmap[$class];

1085 
	g$şassv¬
 = 
$objeù_Çme
;

1089 
	g$this
->
	g_ci_şas£s
[
$şass
] = 
$şassv¬
;

1092 
	g$CI
 =& 
g‘_š¡ªû
();

1093 ià(
	g$cÚfig
 !=ğ
NULL
)

1095 
$CI
->
$şassv¬
 = 
Ãw
 
$Çme
(
$cÚfig
);

1099 
	g$CI
->
	g$şassv¬
 = 
Ãw
 
$Çme
;

1114 
´iv©e
 
funùiÚ
 
	$_ci_autŞßd”
()

1116 ià(
	`defšed
('ENVIRONMENT'è
AND
 
	`fe_exi¡s
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/autoload.php'))

1118 
	`šşude
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/autoload.php');

1122 
	`šşude
(
APPPATH
.'config/autoload.php');

1125 iàĞ! 
	`is£t
(
$autŞßd
))

1127  
FALSE
;

1131 ià(
	`is£t
(
$autŞßd
['packages']))

1133 
	`fÜ—ch
 (
$autŞßd
['·ckages'] 
as
 
$·ckage_·th
)

1135 
$this
->
	`add_·ckage_·th
(
$·ckage_·th
);

1140 ià(
	`couÁ
(
$autŞßd
['config']) > 0)

1142 
$CI
 =& 
	`g‘_š¡ªû
();

1143 
	`fÜ—ch
 (
$autŞßd
['cÚfig'] 
as
 
$key
 => 
$v®
)

1145 
$CI
->
cÚfig
->
	`lßd
(
$v®
);

1150 
	`fÜ—ch
 (
	`¬¿y
('h–³r', 'Ïnguage'è
as
 
$ty³
)

1152 ià(
	`is£t
(
$autŞßd
[
$ty³
]è
AND
 
	`couÁ
($autoload[$type]) > 0)

1154 
$this
->
	`$ty³
(
$autŞßd
[
$ty³
]);

1160 iàĞ! 
	`is£t
(
$autŞßd
['lib¿r›s']è
AND
 isset($autoload['core']))

1162 
$autŞßd
['libraries'] = $autoload['core'];

1166 ià(
	`is£t
(
$autŞßd
['lib¿r›s']è
AND
 
	`couÁ
($autoload['libraries']) > 0)

1169 ià(
	`š_¬¿y
('d©aba£', 
$autŞßd
['libraries']))

1171 
$this
->
	`d©aba£
();

1172 
$autŞßd
['lib¿r›s'] = 
	`¬¿y_diff
($autŞßd['lib¿r›s'], 
	`¬¿y
('database'));

1176 
	`fÜ—ch
 (
$autŞßd
['lib¿r›s'] 
as
 
$™em
)

1178 
$this
->
	`lib¿ry
(
$™em
);

1183 ià(
	`is£t
(
$autŞßd
['model']))

1185 
$this
->
	`mod–
(
$autŞßd
['model']);

1187 
	}
}

1199 
´Ùeùed
 
funùiÚ
 
	$_ci_objeù_to_¬¿y
(
$objeù
)

1201  (
	`is_objeù
(
$objeù
)è? 
	`g‘_objeù_v¬s
($object) : $object;

1202 
	}
}

1212 
´Ùeùed
 
	gfunùiÚ
 &
	$_ci_g‘_compÚ’t
(
$compÚ’t
)

1214 
$CI
 =& 
	`g‘_š¡ªû
();

1215  
$CI
->
$compÚ’t
;

1216 
	}
}

1229 
´Ùeùed
 
funùiÚ
 
	$_ci_´•_f’ame
(
$f’ame
, 
$ex‹nsiÚ
)

1231 iàĞ! 
	`is_¬¿y
(
$f’ame
))

1233  
	`¬¿y
(
	`¡¹Şow”
(
	`¡r_»¶aû
('.php', '', sŒ_»¶aû(
$ex‹nsiÚ
, '', 
$f’ame
)).$extension));

1237 
	`fÜ—ch
 (
$f’ame
 
as
 
$key
 => 
$v®
)

1239 
$f’ame
[
$key
] = 
	`¡¹Şow”
(
	`¡r_»¶aû
('.php', '', sŒ_»¶aû(
$ex‹nsiÚ
, '', 
$v®
)).$extension);

1242  
$f’ame
;

1244 
	}
}

	@system/core/Model.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

67 şas 
	cCI_Mod–
 {

74 
funùiÚ
 
	$__cÚ¡ruù
()

76 
	`log_mes§ge
('debug', "Model Class Initialized");

88 
funùiÚ
 
	$__g‘
(
$key
)

90 
$CI
 =& 
	`g‘_š¡ªû
();

91  
$CI
->
$key
;

92 
	}
}

	@system/core/Output.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_Ouut
 {

37 
´Ùeùed
 
	m$fš®_ouut
;

44 
´Ùeùed
 
	m$ÿche_expœ©iÚ
 = 0;

51 
´Ùeùed
 
	m$h—d”s
 = 
¬¿y
();

58 
´Ùeùed
 
	m$mime_ty³s
 = 
¬¿y
();

65 
´Ùeùed
 
	m$’abË_´of”
 = 
FALSE
;

72 
´Ùeùed
 
	m$_zlib_oc
 = 
FALSE
;

79 
´Ùeùed
 
	m$_´of”_£ùiÚs
 = 
¬¿y
();

86 
´Ùeùed
 
	m$·r£_exec_v¬s
 = 
TRUE
;

92 
funùiÚ
 
	$__cÚ¡ruù
()

94 
$this
->
_zlib_oc
 = @
	`ši_g‘
('zlib.output_compression');

97 ià(
	`defšed
('ENVIRONMENT'è
AND
 
	`fe_exi¡s
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/mimes.php'))

99 
šşude
 
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/mimes.php';

103 
šşude
 
APPPATH
.'config/mimes.php';

107 
$this
->
mime_ty³s
 = 
$mimes
;

109 
	`log_mes§ge
('debug', "Output Class Initialized");

122 
funùiÚ
 
	$g‘_ouut
()

124  
$this
->
fš®_ouut
;

125 
	}
}

138 
funùiÚ
 
	$£t_ouut
(
$ouut
)

140 
$this
->
fš®_ouut
 = 
$ouut
;

142  
$this
;

143 
	}
}

156 
funùiÚ
 
	$­³nd_ouut
(
$ouut
)

158 ià(
$this
->
fš®_ouut
 == '')

160 
$this
->
fš®_ouut
 = 
$ouut
;

164 
$this
->
fš®_ouut
 .ğ
$ouut
;

167  
$this
;

168 
	}
}

185 
funùiÚ
 
	$£t_h—d”
(
$h—d”
, 
$»¶aû
 = 
TRUE
)

192 ià(
$this
->
_zlib_oc
 && 
	`¡ºÿ£cmp
(
$h—d”
, 'content-length', 14) == 0)

197 
$this
->
h—d”s
[] = 
	`¬¿y
(
$h—d”
, 
$»¶aû
);

199  
$this
;

200 
	}
}

211 
funùiÚ
 
	$£t_cÚ‹Á_ty³
(
$mime_ty³
)

213 ià(
	`¡½os
(
$mime_ty³
, '/'è==ğ
FALSE
)

215 
$ex‹nsiÚ
 = 
	`Érim
(
$mime_ty³
, '.');

218 ià(
	`is£t
(
$this
->
mime_ty³s
[
$ex‹nsiÚ
]))

220 
$mime_ty³
 =& 
$this
->
mime_ty³s
[
$ex‹nsiÚ
];

222 ià(
	`is_¬¿y
(
$mime_ty³
))

224 
$mime_ty³
 = 
	`cu¼’t
($mime_type);

229 
$h—d”
 = 'CÚ‹Á-Ty³: '.
$mime_ty³
;

231 
$this
->
h—d”s
[] = 
	`¬¿y
(
$h—d”
, 
TRUE
);

233  
$this
;

234 
	}
}

247 
funùiÚ
 
£t_¡©us_h—d”
(
$code
 = 200, 
$‹xt
 = '')

249 
£t_¡©us_h—d”
(
$code
, 
$‹xt
);

251  
	g$this
;

263 
funùiÚ
 
	$’abË_´of”
(
$v®
 = 
TRUE
)

265 
$this
->
’abË_´of”
 = (
	`is_boŞ
(
$v®
)è? $v® : 
TRUE
;

267  
$this
;

268 
	}
}

281 
funùiÚ
 
	$£t_´of”_£ùiÚs
(
$£ùiÚs
)

283 
	`fÜ—ch
 (
$£ùiÚs
 
as
 
$£ùiÚ
 => 
$’abË
)

285 
$this
->
_´of”_£ùiÚs
[
$£ùiÚ
] = (
$’abË
 !=ğ
FALSE
è? 
TRUE
 : FALSE;

288  
$this
;

289 
	}
}

300 
funùiÚ
 
	$ÿche
(
$time
)

302 
$this
->
ÿche_expœ©iÚ
 = ( ! 
	`is_num”ic
(
$time
)) ? 0 : $time;

304  
$this
;

305 
	}
}

324 
funùiÚ
 
_di¥Ïy
(
$ouut
 = '')

329 
glob®
 
$BM
, 
$CFG
;

332 ià(
şass_exi¡s
('CI_Controller'))

334 
	g$CI
 =& 
g‘_š¡ªû
();

340 ià(
	g$ouut
 == '')

342 
$ouut
 =& 
$this
->
fš®_ouut
;

350 ià(
	g$this
->
	gÿche_expœ©iÚ
 > 0 && 
is£t
(
$CI
è&& ! 
m‘hod_exi¡s
($CI, '_output'))

352 
	g$this
->
_wr™e_ÿche
(
$ouut
);

360 
	g$–­£d
 = 
$BM
->
–­£d_time
('total_execution_time_start', 'total_execution_time_end');

362 ià(
	g$this
->
	g·r£_exec_v¬s
 ==ğ
TRUE
)

364 
$memÜy
 = ( ! 
funùiÚ_exi¡s
('memÜy_g‘_u§ge')è? '0' : 
round
(
memÜy_g‘_u§ge
()/1024/1024, 2).'MB';

366 
	g$ouut
 = 
¡r_»¶aû
('{–­£d_time}', 
$–­£d
, 
$ouut
);

367 
	g$ouut
 = 
¡r_»¶aû
('{memÜy_u§ge}', 
$memÜy
, 
$ouut
);

373 ià(
	g$CFG
->
™em
('com´ess_ouut'è==ğ
TRUE
 && 
$this
->
_zlib_oc
 =ğ
FALSE
)

375 ià(
ex‹nsiÚ_lßded
('zlib'))

377 ià(
is£t
(
$_SERVER
['HTTP_ACCEPT_ENCODING']è
AND
 
¡½os
($_SERVER['HTTP_ACCEPT_ENCODING'], 'gz'è!=ğ
FALSE
)

379 
ob_¡¬t
('ob_gzhandler');

387 ià(
couÁ
(
$this
->
h—d”s
) > 0)

389 
fÜ—ch
 (
$this
->
h—d”s
 
as
 
$h—d”
)

391 @
h—d”
(
$h—d”
[0], $header[1]);

400 iàĞ! 
is£t
(
$CI
))

402 
echo
 
	g$ouut
;

403 
log_mes§ge
('debug', "Final output sento browser");

404 
log_mes§ge
('debug', "TÙ®ƒxecutiÚime: ".
$–­£d
);

405  
	gTRUE
;

412 ià(
	g$this
->
	g’abË_´of”
 =ğ
TRUE
)

414 
$CI
->
lßd
->
lib¿ry
('profiler');

416 iàĞ! 
em±y
(
$this
->
_´of”_£ùiÚs
))

418 
	g$CI
->
	g´of”
->
£t_£ùiÚs
(
$this
->
_´of”_£ùiÚs
);

423 ià(
´eg_m©ch
("|</body>.*?</html>|is", 
$ouut
))

425 
	g$ouut
 = 
´eg_»¶aû
("|</body>.*?</html>|is", '', 
$ouut
);

426 
	g$ouut
 .ğ
$CI
->
´of”
->
run
();

427 
	g$ouut
 .= '</body></html>';

431 
	g$ouut
 .ğ
$CI
->
´of”
->
run
();

439 ià(
m‘hod_exi¡s
(
$CI
, '_output'))

441 
	g$CI
->
_ouut
(
$ouut
);

445 
echo
 
	g$ouut
;

448 
log_mes§ge
('debug', "Final output sento browser");

449 
log_mes§ge
('debug', "TÙ®ƒxecutiÚime: ".
$–­£d
);

461 
funùiÚ
 
	$_wr™e_ÿche
(
$ouut
)

463 
$CI
 =& 
	`g‘_š¡ªû
();

464 
$·th
 = 
$CI
->
cÚfig
->
	`™em
('cache_path');

466 
$ÿche_·th
 = (
$·th
 =ğ''è? 
APPPATH
.'cache/' : $path;

468 iàĞ! 
	`is_dœ
(
$ÿche_·th
è
OR
 ! 
	`is_»®ly_wr™abË
($cache_path))

470 
	`log_mes§ge
('”rÜ', "UÇbËØwr™ÿchfe: ".
$ÿche_·th
);

474 
$uri
 = 
$CI
->
cÚfig
->
	`™em
('base_url').

475 
$CI
->
cÚfig
->
	`™em
('index_page').

476 
$CI
->
uri
->
	`uri_¡ršg
();

478 
$ÿche_·th
 .ğ
	`md5
(
$uri
);

480 iàĞ! 
$å
 = @
	`fİ’
(
$ÿche_·th
, 
FOPEN_WRITE_CREATE_DESTRUCTIVE
))

482 
	`log_mes§ge
('”rÜ', "UÇbËØwr™ÿchfe: ".
$ÿche_·th
);

486 
$expœe
 = 
	`time
(è+ (
$this
->
ÿche_expœ©iÚ
 * 60);

488 ià(
	`æock
(
$å
, 
LOCK_EX
))

490 
	`fwr™e
(
$å
, 
$expœe
.'TS--->'.
$ouut
);

491 
	`æock
(
$å
, 
LOCK_UN
);

495 
	`log_mes§ge
('”rÜ', "UÇbËØ£cu»‡ flock fÜ f©: ".
$ÿche_·th
);

498 
	`fşo£
(
$å
);

499 @
	`chmod
(
$ÿche_·th
, 
FILE_WRITE_MODE
);

501 
	`log_mes§ge
('debug', "Cachfwr™‹n: ".
$ÿche_·th
);

502 
	}
}

514 
funùiÚ
 
	$_di¥Ïy_ÿche
(&
$CFG
, &
$URI
)

516 
$ÿche_·th
 = (
$CFG
->
	`™em
('ÿche_·th'è=ğ''è? 
APPPATH
.'cache/' : $CFG->item('cache_path');

519 
$uri
 = 
$CFG
->
	`™em
('base_url').

520 
$CFG
->
	`™em
('index_page').

521 
$URI
->
uri_¡ršg
;

523 
$f•©h
 = 
$ÿche_·th
.
	`md5
(
$uri
);

525 iàĞ! @
	`fe_exi¡s
(
$f•©h
))

527  
FALSE
;

530 iàĞ! 
$å
 = @
	`fİ’
(
$f•©h
, 
FOPEN_READ
))

532  
FALSE
;

535 
	`æock
(
$å
, 
LOCK_SH
);

537 
$ÿche
 = '';

538 ià(
	`fesize
(
$f•©h
) > 0)

540 
$ÿche
 = 
	`ä—d
(
$å
, 
	`fesize
(
$f•©h
));

543 
	`æock
(
$å
, 
LOCK_UN
);

544 
	`fşo£
(
$å
);

547 iàĞ! 
	`´eg_m©ch
("/(\d+TS--->)/", 
$ÿche
, 
$m©ch
))

549  
FALSE
;

553 ià(
	`time
(è>ğ
	`Œim
(
	`¡r_»¶aû
('TS--->', '', 
$m©ch
['1'])))

555 ià(
	`is_»®ly_wr™abË
(
$ÿche_·th
))

557 @
	`uÆšk
(
$f•©h
);

558 
	`log_mes§ge
('debug', "Cache file hasƒxpired. File deleted");

559  
FALSE
;

564 
$this
->
	`_di¥Ïy
(
	`¡r_»¶aû
(
$m©ch
['0'], '', 
$ÿche
));

565 
	`log_mes§ge
('debug', "Cache file is current. Sending ito browser.");

566  
TRUE
;

567 
	}
}

	@system/core/Router.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_Rou‹r
 {

37 
v¬
 
	m$cÚfig
;

44 
v¬
 
	m$rou‹s
 = 
¬¿y
();

51 
v¬
 
	m$”rÜ_rou‹s
 = 
¬¿y
();

58 
v¬
 
	m$şass
 = '';

65 
v¬
 
	m$m‘hod
 = 'index';

72 
v¬
 
	m$dœeùÜy
 = '';

79 
v¬
 
	m$deçuÉ_cÚŒŞËr
;

86 
funùiÚ
 
	$__cÚ¡ruù
()

88 
$this
->
cÚfig
 =& 
	`lßd_şass
('Config', 'core');

89 
$this
->
uri
 =& 
	`lßd_şass
('URI', 'core');

90 
	`log_mes§ge
('debug', "Router Class Initialized");

104 
funùiÚ
 
	$_£t_routšg
()

109 
$£gm’ts
 = 
	`¬¿y
();

110 ià(
$this
->
cÚfig
->
	`™em
('’abË_qu”y_¡ršgs'è==ğ
TRUE
 
AND
 
	`is£t
(
$_GET
[$this->config->item('controller_trigger')]))

112 ià(
	`is£t
(
$_GET
[
$this
->
cÚfig
->
	`™em
('directory_trigger')]))

114 
$this
->
	`£t_dœeùÜy
(
	`Œim
($this->
uri
->
	`_f‹r_uri
(
$_GET
[$this->
cÚfig
->
	`™em
('directory_trigger')])));

115 
$£gm’ts
[] = 
$this
->
	`ãtch_dœeùÜy
();

118 ià(
	`is£t
(
$_GET
[
$this
->
cÚfig
->
	`™em
('controller_trigger')]))

120 
$this
->
	`£t_şass
(
	`Œim
($this->
uri
->
	`_f‹r_uri
(
$_GET
[$this->
cÚfig
->
	`™em
('controller_trigger')])));

121 
$£gm’ts
[] = 
$this
->
	`ãtch_şass
();

124 ià(
	`is£t
(
$_GET
[
$this
->
cÚfig
->
	`™em
('function_trigger')]))

126 
$this
->
	`£t_m‘hod
(
	`Œim
($this->
uri
->
	`_f‹r_uri
(
$_GET
[$this->
cÚfig
->
	`™em
('function_trigger')])));

127 
$£gm’ts
[] = 
$this
->
	`ãtch_m‘hod
();

132 ià(
	`defšed
('ENVIRONMENT'è
AND
 
	`is_fe
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/routes.php'))

134 
	`šşude
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/routes.php');

136 
	`–£if
 (
	`is_fe
(
APPPATH
.'config/routes.php'))

138 
	`šşude
(
APPPATH
.'config/routes.php');

141 
$this
->
rou‹s
 = ( ! 
	`is£t
(
$rou‹
è
OR
 ! 
	`is_¬¿y
($rou‹)è? 
	`¬¿y
() : $route;

142 
	`un£t
(
$rou‹
);

146 
$this
->
deçuÉ_cÚŒŞËr
 = ( ! 
	`is£t
($this->
rou‹s
['deçuÉ_cÚŒŞËr']è
OR
 $this->rou‹s['deçuÉ_cÚŒŞËr'] =ğ''è? 
FALSE
 : 
	`¡¹Şow”
($this->routes['default_controller']);

149 ià(
	`couÁ
(
$£gm’ts
) > 0)

151  
$this
->
	`_v®id©e_»que¡
(
$£gm’ts
);

155 
$this
->
uri
->
	`_ãtch_uri_¡ršg
();

158 ià(
$this
->
uri
->
uri_¡ršg
 == '')

160  
$this
->
	`_£t_deçuÉ_cÚŒŞËr
();

164 
$this
->
uri
->
	`_»move_u¾_suffix
();

167 
$this
->
uri
->
	`_ex¶ode_£gm’ts
();

170 
$this
->
	`_·r£_rou‹s
();

173 
$this
->
uri
->
	`_»šdex_£gm’ts
();

174 
	}
}

184 
funùiÚ
 
	$_£t_deçuÉ_cÚŒŞËr
()

186 ià(
$this
->
deçuÉ_cÚŒŞËr
 ==ğ
FALSE
)

188 
	`show_”rÜ
("Unableo determine what should be displayed. A default„oute has‚ot been specified inhe„outing file.");

191 ià(
	`¡½os
(
$this
->
deçuÉ_cÚŒŞËr
, '/'è!=ğ
FALSE
)

193 
$x
 = 
	`ex¶ode
('/', 
$this
->
deçuÉ_cÚŒŞËr
);

195 
$this
->
	`£t_şass
(
$x
[0]);

196 
$this
->
	`£t_m‘hod
(
$x
[1]);

197 
$this
->
	`_£t_»que¡
(
$x
);

201 
$this
->
	`£t_şass
($this->
deçuÉ_cÚŒŞËr
);

202 
$this
->
	`£t_m‘hod
('index');

203 
$this
->
	`_£t_»que¡
(
	`¬¿y
($this->
deçuÉ_cÚŒŞËr
, 'index'));

207 
$this
->
uri
->
	`_»šdex_£gm’ts
();

209 
	`log_mes§ge
('debug', "No URI…resent. Default controller set.");

210 
	}
}

225 
funùiÚ
 
_£t_»que¡
(
$£gm’ts
 = 
	$¬¿y
())

227 
$£gm’ts
 = 
$this
->
	`_v®id©e_»que¡
($segments);

229 ià(
	`couÁ
(
$£gm’ts
) == 0)

231  
$this
->
	`_£t_deçuÉ_cÚŒŞËr
();

234 
$this
->
	`£t_şass
(
$£gm’ts
[0]);

236 ià(
	`is£t
(
$£gm’ts
[1]))

239 
$this
->
	`£t_m‘hod
(
$£gm’ts
[1]);

245 
$£gm’ts
[1] = 'index';

251 
$this
->
uri
->
r£gm’ts
 = 
$£gm’ts
;

252 
	}
}

264 
funùiÚ
 
	$_v®id©e_»que¡
(
$£gm’ts
)

266 ià(
	`couÁ
(
$£gm’ts
) == 0)

268  
$£gm’ts
;

272 ià(
	`fe_exi¡s
(
APPPATH
.'cÚŒŞËrs/'.
$£gm’ts
[0].'.php'))

274  
$£gm’ts
;

278 ià(
	`is_dœ
(
APPPATH
.'cÚŒŞËrs/'.
$£gm’ts
[0]))

281 
$this
->
	`£t_dœeùÜy
(
$£gm’ts
[0]);

282 
$£gm’ts
 = 
	`¬¿y_¦iû
($segments, 1);

284 ià(
	`couÁ
(
$£gm’ts
) > 0)

287 iàĞ! 
	`fe_exi¡s
(
APPPATH
.'cÚŒŞËrs/'.
$this
->
	`ãtch_dœeùÜy
().
$£gm’ts
[0].'.php'))

289 iàĞ! 
	`em±y
(
$this
->
rou‹s
['404_override']))

291 
$x
 = 
	`ex¶ode
('/', 
$this
->
rou‹s
['404_override']);

293 
$this
->
	`£t_dœeùÜy
('');

294 
$this
->
	`£t_şass
(
$x
[0]);

295 
$this
->
	`£t_m‘hod
(
	`is£t
(
$x
[1]) ? $x[1] : 'index');

297  
$x
;

301 
	`show_404
(
$this
->
	`ãtch_dœeùÜy
().
$£gm’ts
[0]);

308 ià(
	`¡½os
(
$this
->
deçuÉ_cÚŒŞËr
, '/'è!=ğ
FALSE
)

310 
$x
 = 
	`ex¶ode
('/', 
$this
->
deçuÉ_cÚŒŞËr
);

312 
$this
->
	`£t_şass
(
$x
[0]);

313 
$this
->
	`£t_m‘hod
(
$x
[1]);

317 
$this
->
	`£t_şass
($this->
deçuÉ_cÚŒŞËr
);

318 
$this
->
	`£t_m‘hod
('index');

322 iàĞ! 
	`fe_exi¡s
(
APPPATH
.'cÚŒŞËrs/'.
$this
->
	`ãtch_dœeùÜy
().$this->
deçuÉ_cÚŒŞËr
.'.php'))

324 
$this
->
dœeùÜy
 = '';

325  
	`¬¿y
();

330  
$£gm’ts
;

336 iàĞ! 
	`em±y
(
$this
->
rou‹s
['404_override']))

338 
$x
 = 
	`ex¶ode
('/', 
$this
->
rou‹s
['404_override']);

340 
$this
->
	`£t_şass
(
$x
[0]);

341 
$this
->
	`£t_m‘hod
(
	`is£t
(
$x
[1]) ? $x[1] : 'index');

343  
$x
;

348 
	`show_404
(
$£gm’ts
[0]);

349 
	}
}

363 
funùiÚ
 
	$_·r£_rou‹s
()

366 
$uri
 = 
	`im¶ode
('/', 
$this
->
uri
->
£gm’ts
);

369 ià(
	`is£t
(
$this
->
rou‹s
[
$uri
]))

371  
$this
->
	`_£t_»que¡
(
	`ex¶ode
('/', $this->
rou‹s
[
$uri
]));

375 
	`fÜ—ch
 (
$this
->
rou‹s
 
as
 
$key
 => 
$v®
)

378 
$key
 = 
	`¡r_»¶aû
(':any', '.+', str_replace(':num', '[0-9]+', $key));

381 ià(
	`´eg_m©ch
('#^'.
$key
.'$#', 
$uri
))

384 ià(
	`¡½os
(
$v®
, '$'è!=ğ
FALSE
 
AND
 sŒpos(
$key
, '(') !== FALSE)

386 
$v®
 = 
	`´eg_»¶aû
('#^'.
$key
.'$#', $v®, 
$uri
);

389  
$this
->
	`_£t_»que¡
(
	`ex¶ode
('/', 
$v®
));

395 
$this
->
	`_£t_»que¡
($this->
uri
->
£gm’ts
);

396 
	}
}

407 
funùiÚ
 
	$£t_şass
(
$şass
)

409 
$this
->
şass
 = 
	`¡r_»¶aû
(
	`¬¿y
('/', '.'), '', 
$şass
);

410 
	}
}

420 
funùiÚ
 
	$ãtch_şass
()

422  
$this
->
şass
;

423 
	}
}

434 
funùiÚ
 
	$£t_m‘hod
(
$m‘hod
)

436 
$this
->
m‘hod
 = 
$m‘hod
;

437 
	}
}

447 
funùiÚ
 
	$ãtch_m‘hod
()

449 ià(
$this
->
m‘hod
 =ğ$this->
	`ãtch_şass
())

454  
$this
->
m‘hod
;

455 
	}
}

466 
funùiÚ
 
	$£t_dœeùÜy
(
$dœ
)

468 
$this
->
dœeùÜy
 = 
	`¡r_»¶aû
(
	`¬¿y
('/', '.'), '', 
$dœ
).'/';

469 
	}
}

479 
funùiÚ
 
	$ãtch_dœeùÜy
()

481  
$this
->
dœeùÜy
;

482 
	}
}

493 
funùiÚ
 
	$_£t_ov”rides
(
$routšg
)

495 iàĞ! 
	`is_¬¿y
(
$routšg
))

500 ià(
	`is£t
(
$routšg
['directory']))

502 
$this
->
	`£t_dœeùÜy
(
$routšg
['directory']);

505 ià(
	`is£t
(
$routšg
['cÚŒŞËr']è
AND
 $routing['controller'] != '')

507 
$this
->
	`£t_şass
(
$routšg
['controller']);

510 ià(
	`is£t
(
$routšg
['function']))

512 
$routšg
['function'] = ($routing['function'] == '') ? 'index' : $routing['function'];

513 
$this
->
	`£t_m‘hod
(
$routšg
['function']);

515 
	}
}

	@system/core/Security.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_Secur™y
 {

35 
´Ùeùed
 
	m$_xss_hash
 = '';

42 
´Ùeùed
 
	m$_c¤f_hash
 = '';

50 
´Ùeùed
 
	m$_c¤f_expœe
 = 7200;

57 
´Ùeùed
 
	m$_c¤f_tok’_Çme
 = 'ci_csrf_token';

64 
´Ùeùed
 
	m$_c¤f_cook›_Çme
 = 'ci_csrf_token';

71 
´Ùeùed
 
	m$_Ãv”_®lowed_¡r
 = 
¬¿y
(

91 
´Ùeùed
 
	m$_Ãv”_®lowed_»gex
 = 
¬¿y
(

101 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

104 
	`fÜ—ch
(
	`¬¿y
('c¤f_expœe', 'c¤f_tok’_Çme', 'c¤f_cook›_Çme'è
as
 
$key
)

106 ià(
FALSE
 !=ğ(
$v®
 = 
	`cÚfig_™em
(
$key
)))

108 
$this
->{'_'.
$key
} = 
$v®
;

113 ià(
	`cÚfig_™em
('cookie_prefix'))

115 
$this
->
_c¤f_cook›_Çme
 = 
	`cÚfig_™em
('cookie_prefix').$this->_csrf_cookie_name;

119 
$this
->
	`_c¤f_£t_hash
();

121 
	`log_mes§ge
('debug', "Security Class Initialized");

131 
public
 
funùiÚ
 
	$c¤f_v”ify
()

134 ià(
	`couÁ
(
$_POST
) == 0)

136  
$this
->
	`c¤f_£t_cook›
();

140 iàĞ! 
	`is£t
(
$_POST
[
$this
->
_c¤f_tok’_Çme
]è
OR


141 ! 
	`is£t
(
$_COOKIE
[
$this
->
_c¤f_cook›_Çme
]))

143 
$this
->
	`c¤f_show_”rÜ
();

147 ià(
$_POST
[
$this
->
_c¤f_tok’_Çme
] !ğ
$_COOKIE
[$this->
_c¤f_cook›_Çme
])

149 
$this
->
	`c¤f_show_”rÜ
();

154 
	`un£t
(
$_POST
[
$this
->
_c¤f_tok’_Çme
]);

157 
	`un£t
(
$_COOKIE
[
$this
->
_c¤f_cook›_Çme
]);

158 
$this
->
	`_c¤f_£t_hash
();

159 
$this
->
	`c¤f_£t_cook›
();

161 
	`log_mes§ge
('debug', "CSRFoken verified ");

163  
$this
;

164 
	}
}

173 
public
 
funùiÚ
 
	$c¤f_£t_cook›
()

175 
$expœe
 = 
	`time
(è+ 
$this
->
_c¤f_expœe
;

176 
$£cu»_cook›
 = (
	`cÚfig_™em
('cook›_£cu»'è==ğ
TRUE
) ? 1 : 0;

178 ià(
$£cu»_cook›
)

180 
$»q
 = 
	`is£t
(
$_SERVER
['HTTPS']è? $_SERVER['HTTPS'] : 
FALSE
;

182 iàĞ! 
$»q
 
OR
 $req == 'off')

184  
FALSE
;

188 
	`£tcook›
(
$this
->
_c¤f_cook›_Çme
, $this->
_c¤f_hash
, 
$expœe
, 
	`cÚfig_™em
('cook›_·th'), cÚfig_™em('cook›_domaš'), 
$£cu»_cook›
);

190 
	`log_mes§ge
('debug', "CRSF cookie Set");

192  
$this
;

193 
	}
}

202 
public
 
funùiÚ
 
	$c¤f_show_”rÜ
()

204 
	`show_”rÜ
('The‡ction you have„equested is‚ot‡llowed.');

205 
	}
}

216 
public
 
funùiÚ
 
	$g‘_c¤f_hash
()

218  
$this
->
_c¤f_hash
;

219 
	}
}

230 
public
 
funùiÚ
 
	$g‘_c¤f_tok’_Çme
()

232  
$this
->
_c¤f_tok’_Çme
;

233 
	}
}

263 
public
 
funùiÚ
 
	$xss_ş—n
(
$¡r
, 
$is_image
 = 
FALSE
)

269 ià(
	`is_¬¿y
(
$¡r
))

271 
	`li¡
(
$key
èğ
	`—ch
(
$¡r
))

273 
$¡r
[
$key
] = 
$this
->
	`xss_ş—n
($str[$key]);

276  
$¡r
;

282 
$¡r
 = 
	`»move_švisibË_ch¬aù”s
($str);

285 
$¡r
 = 
$this
->
	`_v®id©e_’t™›s
($str);

297 
$¡r
 = 
	`¿wu¾decode
($str);

308 
$¡r
 = 
	`´eg_»¶aû_ÿÎback
("/[a-z]+=([\'\"]).*?\\1/si", 
	`¬¿y
(
$this
, '_convert_attribute'), $str);

310 
$¡r
 = 
	`´eg_»¶aû_ÿÎback
("/<\w+.*?(?=>|<|$)/si", 
	`¬¿y
(
$this
, '_decode_entity'), $str);

315 
$¡r
 = 
	`»move_švisibË_ch¬aù”s
($str);

326 ià(
	`¡½os
(
$¡r
, "\t"è!=ğ
FALSE
)

328 
$¡r
 = 
	`¡r_»¶aû
("\t", ' ', $str);

334 
$cÚv”‹d_¡ršg
 = 
$¡r
;

337 
$¡r
 = 
$this
->
	`_do_Ãv”_®lowed
($str);

348 ià(
$is_image
 ==ğ
TRUE
)

353 
$¡r
 = 
	`´eg_»¶aû
('/<\?(php)/i', "&lt;?\\1", $str);

357 
$¡r
 = 
	`¡r_»¶aû
(
	`¬¿y
('<?', '?'.'>'),‡rray('&lt;?', '?&gt;'), $str);

366 
$wÜds
 = 
	`¬¿y
(

371 
	`fÜ—ch
 (
$wÜds
 
as
 
$wÜd
)

373 
$‹mp
 = '';

375 
$i
 = 0, 
$wÜdËn
 = 
	`¡¾’
(
$wÜd
); $i < $wordlen; $i++)

377 
$‹mp
 .ğ
	`sub¡r
(
$wÜd
, 
$i
, 1)."\s*";

382 
$¡r
 = 
	`´eg_»¶aû_ÿÎback
('#('.
	`sub¡r
(
$‹mp
, 0, -3).')(\W)#is', 
	`¬¿y
(
$this
, '_compact_exploded_words'), $str);

393 
$Üigš®
 = 
$¡r
;

395 ià(
	`´eg_m©ch
("/<a/i", 
$¡r
))

397 
$¡r
 = 
	`´eg_»¶aû_ÿÎback
("#<a\s+([^>]*?)(>|$)#si", 
	`¬¿y
(
$this
, '_js_link_removal'), $str);

400 ià(
	`´eg_m©ch
("/<img/i", 
$¡r
))

402 
$¡r
 = 
	`´eg_»¶aû_ÿÎback
("#<img\s+([^>]*?)(\s?/?>|$)#si", 
	`¬¿y
(
$this
, '_js_img_removal'), $str);

405 ià(
	`´eg_m©ch
("/süt/i", 
$¡r
è
OR
…reg_match("/xss/i", $str))

407 
$¡r
 = 
	`´eg_»¶aû
("#<(/*)(script|xss)(.*?)\>#si", '[removed]', $str);

410 
$Üigš®
 !ğ
$¡r
);

412 
	`un£t
(
$Üigš®
);

415 
$¡r
 = 
$this
->
	`_»move_ev_©Œibu‹s
($¡r, 
$is_image
);

426 
$Çughty
 = 'alert|applet|audio|basefont|base|behavior|bgsound|blink|body|embed|expression|form|frameset|frame|head|html|ilayer|iframe|input|isindex|layer|link|meta|object|plaintext|style|script|textarea|title|video|xml|xss';

427 
$¡r
 = 
	`´eg_»¶aû_ÿÎback
('#<(/*\s*)('.
$Çughty
.')([^><]*)([><]*)#is', 
	`¬¿y
(
$this
, '_sanitize_naughty_html'), $str);

441 
$¡r
 = 
	`´eg_»¶aû
('#(alert|cmd|passthru|eval|exec|expression|system|fopen|fsockopen|file|file_get_contents|readfile|unlink)(\s*)\((.*?)\)#si', "\\1\\2&#40;\\3&#41;", $str);

447 
$¡r
 = 
$this
->
	`_do_Ãv”_®lowed
($str);

459 ià(
$is_image
 ==ğ
TRUE
)

461  (
$¡r
 =ğ
$cÚv”‹d_¡ršg
è? 
TRUE
: 
FALSE
;

464 
	`log_mes§ge
('debug', "XSS Filtering completed");

465  
$¡r
;

466 
	}
}

475 
public
 
funùiÚ
 
	$xss_hash
()

477 ià(
$this
->
_xss_hash
 == '')

479 
	`mt_¤ªd
();

480 
$this
->
_xss_hash
 = 
	`md5
(
	`time
(è+ 
	`mt_¿nd
(0, 1999999999));

483  
$this
->
_xss_hash
;

484 
	}
}

503 
public
 
funùiÚ
 
’t™y_decode
(
$¡r
, 
$ch¬£t
='UTF-8')

505 ià(
¡ri¡r
(
$¡r
, '&'è==ğ
FALSE
)

507  
$¡r
;

510 
	g$¡r
 = 
html_’t™y_decode
(
$¡r
, 
ENT_COMPAT
, 
$ch¬£t
);

511 
	g$¡r
 = 
´eg_»¶aû
('~&#x(0*[0-9a-f]{2,5})~ei', 'chr(hexdec("\\1"))', 
$¡r
);

512  
´eg_»¶aû
('~&#([0-9]{2,4})~e', 'chr(\\1)', 
$¡r
);

524 
public
 
funùiÚ
 
	$§n™ize_f’ame
(
$¡r
, 
$»Ïtive_·th
 = 
FALSE
)

526 
$bad
 = 
	`¬¿y
(

560 iàĞ! 
$»Ïtive_·th
)

562 
$bad
[] = './';

563 
$bad
[] = '/';

566 
$¡r
 = 
	`»move_švisibË_ch¬aù”s
($¡r, 
FALSE
);

567  
	`¡r¦ashes
(
	`¡r_»¶aû
(
$bad
, '', 
$¡r
));

568 
	}
}

581 
´Ùeùed
 
funùiÚ
 
	$_com·ù_ex¶oded_wÜds
(
$m©ches
)

583  
	`´eg_»¶aû
('/\s+/s', '', 
$m©ches
[1]).$matches[2];

584 
	}
}

603 
´Ùeùed
 
funùiÚ
 
	$_»move_ev_©Œibu‹s
(
$¡r
, 
$is_image
)

606 
$ev_©Œibu‹s
 = 
	`¬¿y
('on\w*', 'style', 'xmlns', 'formaction');

608 ià(
$is_image
 ==ğ
TRUE
)

614 
	`un£t
(
$ev_©Œibu‹s
[
	`¬¿y_£¬ch
('xmlns', $evil_attributes)]);

618 
$couÁ
 = 0;

619 
$©Œibs
 = 
	`¬¿y
();

622 
	`´eg_m©ch_®l
("/(".
	`im¶ode
('|', 
$ev_©Œibu‹s
).")\s*=\s*([^\s]*)/is", 
$¡r
, 
$m©ches
, 
PREG_SET_ORDER
);

624 
	`fÜ—ch
 (
$m©ches
 
as
 
$©Œ
)

626 
$©Œibs
[] = 
	`´eg_quÙe
(
$©Œ
[0], '/');

630 
	`´eg_m©ch_®l
("/(".
	`im¶ode
('|', 
$ev_©Œibu‹s
).")\s*=\s*(\042|\047)([^\\2]*?)(\\2)/is", 
$¡r
, 
$m©ches
, 
PREG_SET_ORDER
);

632 
	`fÜ—ch
 (
$m©ches
 
as
 
$©Œ
)

634 
$©Œibs
[] = 
	`´eg_quÙe
(
$©Œ
[0], '/');

638 ià(
	`couÁ
(
$©Œibs
) > 0)

640 
$¡r
 = 
	`´eg_»¶aû
("/<(\/?[^><]+?)([^A-Za-z\-])(".
	`im¶ode
('|', 
$©Œibs
).")([\s><])([><]*)/i", '<$1$2$4$5', $¡r, -1, 
$couÁ
);

643 } 
$couÁ
);

645  
$¡r
;

646 
	}
}

658 
´Ùeùed
 
funùiÚ
 
	$_§n™ize_Çughty_html
(
$m©ches
)

661 
$¡r
 = '&É;'.
$m©ches
[1].$matches[2].$matches[3];

664 
$¡r
 .ğ
	`¡r_»¶aû
(
	`¬¿y
('>', '<'),‡rray('&gt;', '&lt;'),

665 
$m©ches
[4]);

667  
$¡r
;

668 
	}
}

683 
´Ùeùed
 
funùiÚ
 
	$_js_lšk_»mov®
(
$m©ch
)

685 
$©Œibu‹s
 = 
$this
->
	`_f‹r_©Œibu‹s
(
	`¡r_»¶aû
(
	`¬¿y
('<', '>'), '', 
$m©ch
[1]));

687  
	`¡r_»¶aû
(
$m©ch
[1], 
	`´eg_»¶aû
("#h»f=.*?×Ë¹\(|®”t&\#40;|javasüt\:|livesüt\:|mocha\:|ch¬£t\=|wšdow\.|docum’t\.|\.cook›|<süt|<xss|ba£64\s*,)#si", "", 
$©Œibu‹s
), $match[0]);

688 
	}
}

703 
´Ùeùed
 
funùiÚ
 
	$_js_img_»mov®
(
$m©ch
)

705 
$©Œibu‹s
 = 
$this
->
	`_f‹r_©Œibu‹s
(
	`¡r_»¶aû
(
	`¬¿y
('<', '>'), '', 
$m©ch
[1]));

707  
	`¡r_»¶aû
(
$m©ch
[1], 
	`´eg_»¶aû
("#¤c=.*?×Ë¹\(|®”t&\#40;|javasüt\:|livesüt\:|mocha\:|ch¬£t\=|wšdow\.|docum’t\.|\.cook›|<süt|<xss|ba£64\s*,)#si", "", 
$©Œibu‹s
), $match[0]);

708 
	}
}

720 
´Ùeùed
 
funùiÚ
 
	$_cÚv”t_©Œibu‹
(
$m©ch
)

722  
	`¡r_»¶aû
(
	`¬¿y
('>', '<', '\\'),‡¼ay('&gt;', '&É;', '\\\\'), 
$m©ch
[0]);

723 
	}
}

735 
´Ùeùed
 
funùiÚ
 
	$_f‹r_©Œibu‹s
(
$¡r
)

737 
$out
 = '';

739 ià(
	`´eg_m©ch_®l
('#\s*[a-z\-]+\s*=\s*(\042|\047)([^\\1]*?)\\1#is', 
$¡r
, 
$m©ches
))

741 
	`fÜ—ch
 (
$m©ches
[0] 
as
 
$m©ch
)

743 
$out
 .ğ
	`´eg_»¶aû
("#/\*.*?\*/#s", '', 
$m©ch
);

747  
$out
;

748 
	}
}

760 
´Ùeùed
 
funùiÚ
 
	$_decode_’t™y
(
$m©ch
)

762  
$this
->
	`’t™y_decode
(
$m©ch
[0], 
	`¡¹ouµ”
(
	`cÚfig_™em
('charset')));

763 
	}
}

775 
´Ùeùed
 
funùiÚ
 
	$_v®id©e_’t™›s
(
$¡r
)

783 
$¡r
 = 
	`´eg_»¶aû
('|\&([a-z\_0-9\-]+)\=([a-z\_0-9\-]+)|i', 
$this
->
	`xss_hash
()."\\1=\\2", $str);

792 
$¡r
 = 
	`´eg_»¶aû
('#(&\#?[0-9a-z]{2,})([\x00-\x20])*;?#i', "\\1;\\2", $str);

800 
$¡r
 = 
	`´eg_»¶aû
('#(&\#x?)([0-9A-F]+);?#i',"\\1\\2;",$str);

805 
$¡r
 = 
	`¡r_»¶aû
(
$this
->
	`xss_hash
(), '&', $str);

807  
$¡r
;

808 
	}
}

820 
´Ùeùed
 
funùiÚ
 
	$_do_Ãv”_®lowed
(
$¡r
)

822 
	`fÜ—ch
 (
$this
->
_Ãv”_®lowed_¡r
 
as
 
$key
 => 
$v®
)

824 
$¡r
 = 
	`¡r_»¶aû
(
$key
, 
$v®
, $str);

827 
	`fÜ—ch
 (
$this
->
_Ãv”_®lowed_»gex
 
as
 
$key
 => 
$v®
)

829 
$¡r
 = 
	`´eg_»¶aû
("#".
$key
."#i", 
$v®
, $str);

832  
$¡r
;

833 
	}
}

842 
´Ùeùed
 
funùiÚ
 
	$_c¤f_£t_hash
()

844 ià(
$this
->
_c¤f_hash
 == '')

850 ià(
	`is£t
(
$_COOKIE
[
$this
->
_c¤f_cook›_Çme
]) &&

851 
$_COOKIE
[
$this
->
_c¤f_cook›_Çme
] != '')

853  
$this
->
_c¤f_hash
 = 
$_COOKIE
[$this->
_c¤f_cook›_Çme
];

856  
$this
->
_c¤f_hash
 = 
	`md5
(
	`uniqid
(
	`¿nd
(), 
TRUE
));

859  
$this
->
_c¤f_hash
;

860 
	}
}

	@system/core/URI.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_URI
 {

37 
v¬
 
	m$keyv®
 = 
¬¿y
();

44 
v¬
 
	m$uri_¡ršg
;

51 
v¬
 
	m$£gm’ts
 = 
¬¿y
();

59 
v¬
 
	m$r£gm’ts
 = 
¬¿y
();

70 
funùiÚ
 
	$__cÚ¡ruù
()

72 
$this
->
cÚfig
 =& 
	`lßd_şass
('Config', 'core');

73 
	`log_mes§ge
('debug', "URI Class Initialized");

85 
funùiÚ
 
	$_ãtch_uri_¡ršg
()

87 ià(
	`¡¹ouµ”
(
$this
->
cÚfig
->
	`™em
('uri_protocol')) == 'AUTO')

90 ià(
	`php_§pi_Çme
(è=ğ'şi' 
Ü
 
	`defšed
('STDIN'))

92 
$this
->
	`_£t_uri_¡ršg
($this->
	`_·r£_şi_¬gs
());

97 ià(
$uri
 = 
$this
->
	`_d‘eù_uri
())

99 
$this
->
	`_£t_uri_¡ršg
(
$uri
);

105 
$·th
 = (
	`is£t
(
$_SERVER
['PATH_INFO'])è? $_SERVER['PATH_INFO'] : @
	`g‘’v
('PATH_INFO');

106 ià(
	`Œim
(
$·th
, '/'è!ğ'' && $·th !ğ"/".
SELF
)

108 
$this
->
	`_£t_uri_¡ršg
(
$·th
);

113 
$·th
 = (
	`is£t
(
$_SERVER
['QUERY_STRING'])è? $_SERVER['QUERY_STRING'] : @
	`g‘’v
('QUERY_STRING');

114 ià(
	`Œim
(
$·th
, '/') != '')

116 
$this
->
	`_£t_uri_¡ršg
(
$·th
);

121 ià(
	`is_¬¿y
(
$_GET
è&& 
	`couÁ
($_GETè=ğ1 && 
	`Œim
(
	`key
($_GET), '/') != '')

123 
$this
->
	`_£t_uri_¡ršg
(
	`key
(
$_GET
));

128 
$this
->
uri_¡ršg
 = '';

132 
$uri
 = 
	`¡¹ouµ”
(
$this
->
cÚfig
->
	`™em
('uri_protocol'));

134 ià(
$uri
 == 'REQUEST_URI')

136 
$this
->
	`_£t_uri_¡ršg
($this->
	`_d‘eù_uri
());

139 
	`–£if
 (
$uri
 == 'CLI')

141 
$this
->
	`_£t_uri_¡ršg
($this->
	`_·r£_şi_¬gs
());

145 
$·th
 = (
	`is£t
(
$_SERVER
[
$uri
])è? $_SERVER[$uri] : @
	`g‘’v
($uri);

146 
$this
->
	`_£t_uri_¡ršg
(
$·th
);

147 
	}
}

158 
funùiÚ
 
	$_£t_uri_¡ršg
(
$¡r
)

161 
$¡r
 = 
	`»move_švisibË_ch¬aù”s
($¡r, 
FALSE
);

164 
$this
->
uri_¡ršg
 = (
$¡r
 == '/') ? '' : $str;

165 
	}
}

178 
´iv©e
 
funùiÚ
 
	$_d‘eù_uri
()

180 iàĞ! 
	`is£t
(
$_SERVER
['REQUEST_URI']è
OR
 ! isset($_SERVER['SCRIPT_NAME']))

185 
$uri
 = 
$_SERVER
['REQUEST_URI'];

186 ià(
	`¡½os
(
$uri
, 
$_SERVER
['SCRIPT_NAME']) === 0)

188 
$uri
 = 
	`sub¡r
($uri, 
	`¡¾’
(
$_SERVER
['SCRIPT_NAME']));

190 
	`–£if
 (
	`¡½os
(
$uri
, 
	`dœÇme
(
$_SERVER
['SCRIPT_NAME'])) === 0)

192 
$uri
 = 
	`sub¡r
($uri, 
	`¡¾’
(
	`dœÇme
(
$_SERVER
['SCRIPT_NAME'])));

197 ià(
	`¡ºcmp
(
$uri
, '?/', 2) === 0)

199 
$uri
 = 
	`sub¡r
($uri, 2);

201 
$·¹s
 = 
	`´eg_¥l™
('#\?#i', 
$uri
, 2);

202 
$uri
 = 
$·¹s
[0];

203 ià(
	`is£t
(
$·¹s
[1]))

205 
$_SERVER
['QUERY_STRING'] = 
$·¹s
[1];

206 
	`·r£_¡r
(
$_SERVER
['QUERY_STRING'], 
$_GET
);

210 
$_SERVER
['QUERY_STRING'] = '';

211 
$_GET
 = 
	`¬¿y
();

214 ià(
$uri
 =ğ'/' || 
	`em±y
($uri))

219 
$uri
 = 
	`·r£_u¾
($uri, 
PHP_URL_PATH
);

222  
	`¡r_»¶aû
(
	`¬¿y
('//', '../'), '/', 
	`Œim
(
$uri
, '/'));

223 
	}
}

235 
´iv©e
 
funùiÚ
 
	$_·r£_şi_¬gs
()

237 
$¬gs
 = 
	`¬¿y_¦iû
(
$_SERVER
['argv'], 1);

239  
$¬gs
 ? '/' . 
	`im¶ode
('/', $args) : '';

240 
	}
}

251 
funùiÚ
 
	$_f‹r_uri
(
$¡r
)

253 ià(
$¡r
 !ğ'' && 
$this
->
cÚfig
->
	`™em
('³rm™‹d_uri_ch¬s'è!ğ'' && $this->cÚfig->™em('’abË_qu”y_¡ršgs'è=ğ
FALSE
)

257 iàĞ! 
	`´eg_m©ch
("|^[".
	`¡r_»¶aû
(
	`¬¿y
('\\-', '\-'), '-', 
	`´eg_quÙe
(
$this
->
cÚfig
->
	`™em
('³rm™‹d_uri_ch¬s'), '-'))."]+$|i", 
$¡r
))

259 
	`show_”rÜ
('The URI you submitted has disallowed characters.', 400);

264 
$bad
 = 
	`¬¿y
('$', '(', ')', '%28', '%29');

265 
$good
 = 
	`¬¿y
('&#36;', '&#40;', '&#41;', '&#40;', '&#41;');

267  
	`¡r_»¶aû
(
$bad
, 
$good
, 
$¡r
);

268 
	}
}

278 
funùiÚ
 
	$_»move_u¾_suffix
()

280 ià(
$this
->
cÚfig
->
	`™em
('url_suffix') != "")

282 
$this
->
uri_¡ršg
 = 
	`´eg_»¶aû
("|".
	`´eg_quÙe
($this->
cÚfig
->
	`™em
('url_suffix'))."$|", "", $this->uri_string);

284 
	}
}

295 
funùiÚ
 
	$_ex¶ode_£gm’ts
()

297 
	`fÜ—ch
 (
	`ex¶ode
("/", 
	`´eg_»¶aû
("|/*(.+?)/*$|", "\\1", 
$this
->
uri_¡ršg
)è
as
 
$v®
)

300 
$v®
 = 
	`Œim
(
$this
->
	`_f‹r_uri
($val));

302 ià(
$v®
 != '')

304 
$this
->
£gm’ts
[] = 
$v®
;

307 
	}
}

321 
funùiÚ
 
	$_»šdex_£gm’ts
()

323 
	`¬¿y_unshiá
(
$this
->
£gm’ts
, 
NULL
);

324 
	`¬¿y_unshiá
(
$this
->
r£gm’ts
, 
NULL
);

325 
	`un£t
(
$this
->
£gm’ts
[0]);

326 
	`un£t
(
$this
->
r£gm’ts
[0]);

327 
	}
}

341 
funùiÚ
 
	$£gm’t
(
$n
, 
$no_»suÉ
 = 
FALSE
)

343  ( ! 
	`is£t
(
$this
->
£gm’ts
[
$n
])è? 
$no_»suÉ
 : $this->segments[$n];

344 
	}
}

360 
funùiÚ
 
	$r£gm’t
(
$n
, 
$no_»suÉ
 = 
FALSE
)

362  ( ! 
	`is£t
(
$this
->
r£gm’ts
[
$n
])è? 
$no_»suÉ
 : $this->rsegments[$n];

363 
	}
}

388 
funùiÚ
 
uri_to_assoc
(
$n
 = 3, 
$deçuÉ
 = 
	$¬¿y
())

390  
$this
->
	`_uri_to_assoc
(
$n
, 
$deçuÉ
, 'segment');

391 
	}
}

401 
funùiÚ
 
ruri_to_assoc
(
$n
 = 3, 
$deçuÉ
 = 
	$¬¿y
())

403  
$this
->
	`_uri_to_assoc
(
$n
, 
$deçuÉ
, 'rsegment');

404 
	}
}

417 
funùiÚ
 
_uri_to_assoc
(
$n
 = 3, 
$deçuÉ
 = 
¬¿y
(), 
$which
 = 'segment')

419 ià(
$which
 == 'segment')

421 
$tÙ®_£gm’ts
 = 'total_segments';

422 
	g$£gm’t_¬¿y
 = 'segment_array';

426 
	g$tÙ®_£gm’ts
 = 'total_rsegments';

427 
	g$£gm’t_¬¿y
 = 'rsegment_array';

430 iàĞ! 
is_num”ic
(
$n
))

432  
	g$deçuÉ
;

435 ià(
is£t
(
$this
->
keyv®
[
$n
]))

437  
	g$this
->
	gkeyv®
[
$n
];

440 ià(
	g$this
->
$tÙ®_£gm’ts
(è< 
	g$n
)

442 ià(
couÁ
(
$deçuÉ
) == 0)

444  
¬¿y
();

447 
	g$»tv®
 = 
¬¿y
();

448 
fÜ—ch
 (
$deçuÉ
 
as
 
$v®
)

450 
	g$»tv®
[
$v®
] = 
FALSE
;

452  
	g$»tv®
;

455 
	g$£gm’ts
 = 
¬¿y_¦iû
(
$this
->
$£gm’t_¬¿y
(), (
$n
 - 1));

457 
	g$i
 = 0;

458 
	g$Ï¡v®
 = '';

459 
	g$»tv®
 = 
¬¿y
();

460 
fÜ—ch
 (
$£gm’ts
 
as
 
$£g
)

462 ià(
	g$i
 % 2)

464 
	g$»tv®
[
$Ï¡v®
] = 
$£g
;

468 
	g$»tv®
[
$£g
] = 
FALSE
;

469 
	g$Ï¡v®
 = 
$£g
;

472 
	g$i
++;

475 ià(
couÁ
(
$deçuÉ
) > 0)

477 
fÜ—ch
 (
$deçuÉ
 
as
 
$v®
)

479 iàĞ! 
¬¿y_key_exi¡s
(
$v®
, 
$»tv®
))

481 
	g$»tv®
[
$v®
] = 
FALSE
;

487 
	g$this
->
	gkeyv®
[
$n
] = 
$»tv®
;

488  
	g$»tv®
;

501 
funùiÚ
 
	$assoc_to_uri
(
$¬¿y
)

503 
$‹mp
 = 
	`¬¿y
();

504 
	`fÜ—ch
 ((
¬¿y
)
$¬¿y
 
as
 
$key
 => 
$v®
)

506 
$‹mp
[] = 
$key
;

507 
$‹mp
[] = 
$v®
;

510  
	`im¶ode
('/', 
$‹mp
);

511 
	}
}

523 
funùiÚ
 
¦ash_£gm’t
(
$n
, 
$wh”e
 = 'trailing')

525  
$this
->
_¦ash_£gm’t
(
$n
, 
$wh”e
, 'segment');

538 
funùiÚ
 
¦ash_r£gm’t
(
$n
, 
$wh”e
 = 'trailing')

540  
$this
->
_¦ash_£gm’t
(
$n
, 
$wh”e
, 'rsegment');

554 
funùiÚ
 
_¦ash_£gm’t
(
$n
, 
$wh”e
 = 'Œašg', 
$which
 = 'segment')

556 
$Ëadšg
 = '/';

557 
	g$Œašg
 = '/';

559 ià(
	g$wh”e
 == 'trailing')

561 
$Ëadšg
 = '';

563 
–£if
 (
$wh”e
 == 'leading')

565 
$Œašg
 = '';

568  
	g$Ëadšg
.
	g$this
->
$which
(
$n
).
	g$Œašg
;

579 
funùiÚ
 
	$£gm’t_¬¿y
()

581  
$this
->
£gm’ts
;

582 
	}
}

592 
funùiÚ
 
	$r£gm’t_¬¿y
()

594  
$this
->
r£gm’ts
;

595 
	}
}

605 
funùiÚ
 
	$tÙ®_£gm’ts
()

607  
	`couÁ
(
$this
->
£gm’ts
);

608 
	}
}

618 
funùiÚ
 
	$tÙ®_r£gm’ts
()

620  
	`couÁ
(
$this
->
r£gm’ts
);

621 
	}
}

631 
funùiÚ
 
	$uri_¡ršg
()

633  
$this
->
uri_¡ršg
;

634 
	}
}

645 
funùiÚ
 
	$ruri_¡ršg
()

647  '/'.
	`im¶ode
('/', 
$this
->
	`r£gm’t_¬¿y
());

648 
	}
}

	@system/core/Utf8.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_Utf8
 {

37 
funùiÚ
 
	$__cÚ¡ruù
()

39 
	`log_mes§ge
('debug', "Utf8 Class Initialized");

41 
glob®
 
$CFG
;

44 
	`´eg_m©ch
('/./u', 'Ã©') === 1

45 
AND
 
	`funùiÚ_exi¡s
('iconv')

46 
AND
 
	`ši_g‘
('mbstring.func_overload') != 1

47 
AND
 
$CFG
->
	`™em
('charset') == 'UTF-8'

50 
	`log_mes§ge
('debug', "UTF-8 Support Enabled");

52 
	`defše
('UTF8_ENABLED', 
TRUE
);

57 ià(
	`ex‹nsiÚ_lßded
('mbstring'))

59 
	`defše
('MB_ENABLED', 
TRUE
);

60 
	`mb_š‹º®_’codšg
('UTF-8');

64 
	`defše
('MB_ENABLED', 
FALSE
);

69 
	`log_mes§ge
('debug', "UTF-8 Support Disabled");

70 
	`defše
('UTF8_ENABLED', 
FALSE
);

85 
funùiÚ
 
	$ş—n_¡ršg
(
$¡r
)

87 ià(
$this
->
	`_is_ascii
(
$¡r
è==ğ
FALSE
)

89 
$¡r
 = @
	`icÚv
('UTF-8', 'UTF-8//IGNORE', $str);

92  
$¡r
;

93 
	}
}

108 
funùiÚ
 
	$§ã_ascii_fÜ_xml
(
$¡r
)

110  
	`»move_švisibË_ch¬aù”s
(
$¡r
, 
FALSE
);

111 
	}
}

125 
funùiÚ
 
	$cÚv”t_to_utf8
(
$¡r
, 
$’codšg
)

127 ià(
	`funùiÚ_exi¡s
('iconv'))

129 
$¡r
 = @
	`icÚv
(
$’codšg
, 'UTF-8', $str);

131 
	`–£if
 (
	`funùiÚ_exi¡s
('mb_convert_encoding'))

133 
$¡r
 = @
	`mb_cÚv”t_’codšg
($¡r, 'UTF-8', 
$’codšg
);

137  
FALSE
;

140  
$¡r
;

141 
	}
}

154 
funùiÚ
 
	$_is_ascii
(
$¡r
)

156  (
	`´eg_m©ch
('/[^\x00-\x7F]/S', 
$¡r
) == 0);

157 
	}
}

	@system/database/DB.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 
	gfunùiÚ
 &
DB
(
$·¿ms
 = '', 
$aùive_»cÜd_ov”ride
 = 
NULL
)

30 ià(
is_¡ršg
(
$·¿ms
è
AND
 
¡½os
($·¿ms, '://'è==ğ
FALSE
)

33 iàĞ! 
defšed
('ENVIRONMENT'è
OR
 ! 
fe_exi¡s
(
$fe_·th
 = 
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/database.php'))

35 iàĞ! 
fe_exi¡s
(
$fe_·th
 = 
APPPATH
.'config/database.php'))

37 
show_”rÜ
('The configuration file database.php does‚otƒxist.');

41 
šşude
(
$fe_·th
);

43 iàĞ! 
is£t
(
$db
è
OR
 
couÁ
($db) == 0)

45 
show_”rÜ
('No database connection settings were found inhe database config file.');

48 ià(
	g$·¿ms
 != '')

50 
$aùive_group
 = 
$·¿ms
;

53 iàĞ! 
is£t
(
$aùive_group
è
	gOR
 ! is£t(
$db
[$active_group]))

55 
show_”rÜ
('You have specified‡n invalid database connection group.');

58 
	g$·¿ms
 = 
$db
[
$aùive_group
];

60 
–£if
 (
is_¡ršg
(
$·¿ms
))

70 ià((
	g$dns
 = @
·r£_u¾
(
$·¿ms
)è==ğ
FALSE
)

72 
show_”rÜ
('Invalid DB Connection String');

75 
	g$·¿ms
 = 
¬¿y
(

76 'dbdriv”' => 
$dns
['scheme'],

77 'ho¡Çme' => (
is£t
(
$dns
['ho¡'])è? 
¿wu¾decode
($dns['host']) : '',

78 'u£ºame' => (
is£t
(
$dns
['u£r'])è? 
¿wu¾decode
($dns['user']) : '',

79 '·sswÜd' => (
is£t
(
$dns
['·ss'])è? 
¿wu¾decode
($dns['pass']) : '',

80 'd©aba£' => (
is£t
(
$dns
['·th'])è? 
¿wu¾decode
(
sub¡r
($dns['path'], 1)) : ''

84 ià(
is£t
(
$dns
['query']))

86 
·r£_¡r
(
$dns
['qu”y'], 
$exŒa
);

88 
fÜ—ch
 (
$exŒa
 
as
 
$key
 => 
$v®
)

91 ià(
¡¹ouµ”
(
$v®
) == "TRUE")

93 
$v®
 = 
TRUE
;

95 
–£if
 (
¡¹ouµ”
(
$v®
) == "FALSE")

97 
$v®
 = 
FALSE
;

100 
	g$·¿ms
[
$key
] = 
$v®
;

106 iàĞ! 
is£t
(
$·¿ms
['dbdriv”']è
OR
 
	g$·¿ms
['dbdriver'] == '')

108 
show_”rÜ
('You have‚ot selected‡ databaseypeo connecto.');

116 ià(
	g$aùive_»cÜd_ov”ride
 !=ğ
NULL
)

118 
$aùive_»cÜd
 = 
$aùive_»cÜd_ov”ride
;

121 
»quœe_Úû
(
BASEPATH
.'database/DB_driver.php');

123 iàĞ! 
is£t
(
$aùive_»cÜd
è
OR
 
	g$aùive_»cÜd
 =ğ
TRUE
)

125 
»quœe_Úû
(
BASEPATH
.'database/DB_active_rec.php');

127 iàĞ! 
şass_exi¡s
('CI_DB'))

129 
ev®
('class CI_DBƒxtends CI_DB_active_record { }');

134 iàĞ! 
şass_exi¡s
('CI_DB'))

136 
ev®
('class CI_DBƒxtends CI_DB_driver { }');

140 
»quœe_Úû
(
BASEPATH
.'d©aba£/driv”s/'.
$·¿ms
['dbdriver'].'/'.$params['dbdriver'].'_driver.php');

143 
	g$driv”
 = 'CI_DB_'.
$·¿ms
['dbdriver'].'_driver';

144 
	g$DB
 = 
Ãw
 
$driv”
(
$·¿ms
);

146 ià(
	g$DB
->
	gautoš™
 =ğ
TRUE
)

148 
$DB
->
š™Ÿlize
();

151 ià(
is£t
(
$·¿ms
['¡riùÚ']è&& 
	g$·¿ms
['¡riùÚ'] =ğ
TRUE
)

153 
$DB
->
qu”y
('SET SESSION sql_mode="STRICT_ALL_TABLES"');

156  
	g$DB
;

	@system/database/DB_active_rec.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_DB_aùive_»cÜd
 
ex‹nds
 
	mCI_DB_driv”
 {

31 
v¬
 
	m$¬_£Ëù
 = 
¬¿y
();

32 
v¬
 
	m$¬_di¡šù
 = 
FALSE
;

33 
v¬
 
	m$¬_äom
 = 
¬¿y
();

34 
v¬
 
	m$¬_još
 = 
¬¿y
();

35 
v¬
 
	m$¬_wh”e
 = 
¬¿y
();

36 
v¬
 
	m$¬_like
 = 
¬¿y
();

37 
v¬
 
	m$¬_groupby
 = 
¬¿y
();

38 
v¬
 
	m$¬_havšg
 = 
¬¿y
();

39 
v¬
 
	m$¬_keys
 = 
¬¿y
();

40 
v¬
 
	m$¬_lim™
 = 
FALSE
;

41 
v¬
 
	m$¬_off£t
 = 
FALSE
;

42 
v¬
 
	m$¬_Üd”
 = 
FALSE
;

43 
v¬
 
	m$¬_Üd”by
 = 
¬¿y
();

44 
v¬
 
	m$¬_£t
 = 
¬¿y
();

45 
v¬
 
	m$¬_wh”eš
 = 
¬¿y
();

46 
v¬
 
	m$¬_®Ÿ£d_bËs
 = 
¬¿y
();

47 
v¬
 
	m$¬_¡Üe_¬¿y
 = 
¬¿y
();

50 
v¬
 
	m$¬_ÿchšg
 = 
FALSE
;

51 
v¬
 
	m$¬_ÿche_exi¡s
 = 
¬¿y
();

52 
v¬
 
	m$¬_ÿche_£Ëù
 = 
¬¿y
();

53 
v¬
 
	m$¬_ÿche_äom
 = 
¬¿y
();

54 
v¬
 
	m$¬_ÿche_još
 = 
¬¿y
();

55 
v¬
 
	m$¬_ÿche_wh”e
 = 
¬¿y
();

56 
v¬
 
	m$¬_ÿche_like
 = 
¬¿y
();

57 
v¬
 
	m$¬_ÿche_groupby
 = 
¬¿y
();

58 
v¬
 
	m$¬_ÿche_havšg
 = 
¬¿y
();

59 
v¬
 
	m$¬_ÿche_Üd”by
 = 
¬¿y
();

60 
v¬
 
	m$¬_ÿche_£t
 = 
¬¿y
();

62 
v¬
 
	m$¬_no_esÿ³
 = 
¬¿y
();

63 
v¬
 
	m$¬_ÿche_no_esÿ³
 = 
¬¿y
();

75 
public
 
funùiÚ
 
£Ëù
(
$£Ëù
 = '*', 
$esÿ³
 = 
NULL
)

77 ià(
is_¡ršg
(
$£Ëù
))

79 
$£Ëù
 = 
ex¶ode
(',', $select);

82 
fÜ—ch
 (
$£Ëù
 
as
 
$v®
)

84 
	m$v®
 = 
Œim
(
$v®
);

86 ià(
	m$v®
 != '')

88 
$this
->
¬_£Ëù
[] = 
$v®
;

89 
	m$this
->
	m¬_no_esÿ³
[] = 
$esÿ³
;

91 ià(
	m$this
->
	m¬_ÿchšg
 ==ğ
TRUE
)

93 
$this
->
¬_ÿche_£Ëù
[] = 
$v®
;

94 
	m$this
->
	m¬_ÿche_exi¡s
[] = 'select';

95 
	m$this
->
	m¬_ÿche_no_esÿ³
[] = 
$esÿ³
;

99  
	m$this
;

113 
public
 
funùiÚ
 
£Ëù_max
(
$£Ëù
 = '', 
$®Ÿs
 = '')

115  
$this
->
_max_mš_avg_sum
(
$£Ëù
, 
$®Ÿs
, 'MAX');

129 
public
 
funùiÚ
 
£Ëù_mš
(
$£Ëù
 = '', 
$®Ÿs
 = '')

131  
$this
->
_max_mš_avg_sum
(
$£Ëù
, 
$®Ÿs
, 'MIN');

145 
public
 
funùiÚ
 
£Ëù_avg
(
$£Ëù
 = '', 
$®Ÿs
 = '')

147  
$this
->
_max_mš_avg_sum
(
$£Ëù
, 
$®Ÿs
, 'AVG');

161 
public
 
funùiÚ
 
£Ëù_sum
(
$£Ëù
 = '', 
$®Ÿs
 = '')

163  
$this
->
_max_mš_avg_sum
(
$£Ëù
, 
$®Ÿs
, 'SUM');

180 
´Ùeùed
 
funùiÚ
 
_max_mš_avg_sum
(
$£Ëù
 = '', 
$®Ÿs
 = '', 
$ty³
 = 'MAX')

182 iàĞ! 
is_¡ršg
(
$£Ëù
è
OR
 $select == '')

184 
$this
->
di¥Ïy_”rÜ
('db_invalid_query');

187 
	g$ty³
 = 
¡¹ouµ”
(
$ty³
);

189 iàĞ! 
š_¬¿y
(
$ty³
, 
¬¿y
('MAX', 'MIN', 'AVG', 'SUM')))

191 
show_”rÜ
('Inv®id funùiÚy³: '.
$ty³
);

194 ià(
	g$®Ÿs
 == '')

196 
$®Ÿs
 = 
$this
->
_ü—‹_®Ÿs_äom_bË
(
Œim
(
$£Ëù
));

199 
	g$sql
 = 
$ty³
.'('.
$this
->
_´Ùeù_id’tif›rs
(
Œim
(
$£Ëù
)).'èAS '.
$®Ÿs
;

201 
	g$this
->
	g¬_£Ëù
[] = 
$sql
;

203 ià(
	g$this
->
	g¬_ÿchšg
 ==ğ
TRUE
)

205 
$this
->
¬_ÿche_£Ëù
[] = 
$sql
;

206 
	g$this
->
	g¬_ÿche_exi¡s
[] = 'select';

209  
	g$this
;

220 
´Ùeùed
 
funùiÚ
 
	$_ü—‹_®Ÿs_äom_bË
(
$™em
)

222 ià(
	`¡½os
(
$™em
, '.'è!=ğ
FALSE
)

224  
	`’d
(
	`ex¶ode
('.', 
$™em
));

227  
$™em
;

228 
	}
}

240 
public
 
funùiÚ
 
	$di¡šù
(
$v®
 = 
TRUE
)

242 
$this
->
¬_di¡šù
 = (
	`is_boŞ
(
$v®
)è? $v® : 
TRUE
;

243  
$this
;

244 
	}
}

256 
public
 
funùiÚ
 
	$äom
(
$äom
)

258 
	`fÜ—ch
 ((
¬¿y
)
$äom
 
as
 
$v®
)

260 ià(
	`¡½os
(
$v®
, ','è!=ğ
FALSE
)

262 
	`fÜ—ch
 (
	`ex¶ode
(',', 
$v®
è
as
 
$v
)

264 
$v
 = 
	`Œim
($v);

265 
$this
->
	`_Œack_®Ÿ£s
(
$v
);

267 
$this
->
¬_äom
[] = $this->
	`_´Ùeù_id’tif›rs
(
$v
, 
TRUE
, 
NULL
, 
FALSE
);

269 ià(
$this
->
¬_ÿchšg
 ==ğ
TRUE
)

271 
$this
->
¬_ÿche_äom
[] = $this->
	`_´Ùeù_id’tif›rs
(
$v
, 
TRUE
, 
NULL
, 
FALSE
);

272 
$this
->
¬_ÿche_exi¡s
[] = 'from';

279 
$v®
 = 
	`Œim
($val);

283 
$this
->
	`_Œack_®Ÿ£s
(
$v®
);

285 
$this
->
¬_äom
[] = $this->
	`_´Ùeù_id’tif›rs
(
$v®
, 
TRUE
, 
NULL
, 
FALSE
);

287 ià(
$this
->
¬_ÿchšg
 ==ğ
TRUE
)

289 
$this
->
¬_ÿche_äom
[] = $this->
	`_´Ùeù_id’tif›rs
(
$v®
, 
TRUE
, 
NULL
, 
FALSE
);

290 
$this
->
¬_ÿche_exi¡s
[] = 'from';

295  
$this
;

296 
	}
}

310 
public
 
funùiÚ
 
još
(
$bË
, 
$cÚd
, 
$ty³
 = '')

312 ià(
$ty³
 != '')

314 
$ty³
 = 
¡¹ouµ”
(
Œim
($type));

316 iàĞ! 
š_¬¿y
(
$ty³
, 
¬¿y
('LEFT', 'RIGHT', 'OUTER', 'INNER', 'LEFT OUTER', 'RIGHT OUTER')))

318 
	g$ty³
 = '';

322 
	g$ty³
 .= ' ';

328 
	g$this
->
_Œack_®Ÿ£s
(
$bË
);

331 ià(
´eg_m©ch
('/([\w\.]+)([\W\s]+)(.+)/', 
$cÚd
, 
$m©ch
))

333 
	g$m©ch
[1] = 
$this
->
_´Ùeù_id’tif›rs
(
$m©ch
[1]);

334 
	g$m©ch
[3] = 
$this
->
_´Ùeù_id’tif›rs
(
$m©ch
[3]);

336 
	g$cÚd
 = 
$m©ch
[1].$match[2].$match[3];

340 
	g$još
 = 
$ty³
.'JOIN '.
$this
->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
).' ON '.
	g$cÚd
;

342 
	g$this
->
	g¬_još
[] = 
$još
;

343 ià(
	g$this
->
	g¬_ÿchšg
 ==ğ
TRUE
)

345 
$this
->
¬_ÿche_još
[] = 
$još
;

346 
	g$this
->
	g¬_ÿche_exi¡s
[] = 'join';

349  
	g$this
;

364 
public
 
funùiÚ
 
	$wh”e
(
$key
, 
$v®ue
 = 
NULL
, 
$esÿ³
 = 
TRUE
)

366  
$this
->
	`_wh”e
(
$key
, 
$v®ue
, 'AND ', 
$esÿ³
);

367 
	}
}

381 
public
 
funùiÚ
 
	$Ü_wh”e
(
$key
, 
$v®ue
 = 
NULL
, 
$esÿ³
 = 
TRUE
)

383  
$this
->
	`_wh”e
(
$key
, 
$v®ue
, 'OR ', 
$esÿ³
);

384 
	}
}

398 
´Ùeùed
 
funùiÚ
 
_wh”e
(
$key
, 
$v®ue
 = 
NULL
, 
$ty³
 = 'AND ', 
$esÿ³
 = NULL)

400 iàĞ! 
is_¬¿y
(
$key
))

402 
$key
 = 
¬¿y
($key => 
$v®ue
);

406 iàĞ! 
is_boŞ
(
$esÿ³
))

408 
	g$esÿ³
 = 
$this
->
_´Ùeù_id’tif›rs
;

411 
fÜ—ch
 (
$key
 
as
 
$k
 => 
$v
)

413 
$´efix
 = (
couÁ
(
$this
->
¬_wh”e
è=ğ0 
AND
 couÁ($this->
¬_ÿche_wh”e
è=ğ0è? '' : 
$ty³
;

415 ià(
is_nuÎ
(
$v
è&& ! 
	g$this
->
_has_İ”©Ü
(
$k
))

418 
	g$k
 .= ' IS NULL';

421 iàĞ! 
is_nuÎ
(
$v
))

423 ià(
	g$esÿ³
 ==ğ
TRUE
)

425 
$k
 = 
$this
->
_´Ùeù_id’tif›rs
($k, 
FALSE
, 
$esÿ³
);

427 
	g$v
 = ' '.
$this
->
esÿ³
(
$v
);

430 iàĞ! 
	g$this
->
_has_İ”©Ü
(
$k
))

432 
	g$k
 .= ' = ';

437 
	g$k
 = 
$this
->
_´Ùeù_id’tif›rs
(
$k
, 
FALSE
, 
$esÿ³
);

440 
	g$this
->
	g¬_wh”e
[] = 
$´efix
.
$k
.
$v
;

442 ià(
	g$this
->
	g¬_ÿchšg
 ==ğ
TRUE
)

444 
$this
->
¬_ÿche_wh”e
[] = 
$´efix
.
$k
.
$v
;

445 
	g$this
->
	g¬_ÿche_exi¡s
[] = 'where';

450  
	g$this
;

465 
public
 
funùiÚ
 
	$wh”e_š
(
$key
 = 
NULL
, 
$v®ues
 = NULL)

467  
$this
->
	`_wh”e_š
(
$key
, 
$v®ues
);

468 
	}
}

482 
public
 
funùiÚ
 
	$Ü_wh”e_š
(
$key
 = 
NULL
, 
$v®ues
 = NULL)

484  
$this
->
	`_wh”e_š
(
$key
, 
$v®ues
, 
FALSE
, 'OR ');

485 
	}
}

499 
public
 
funùiÚ
 
	$wh”e_nÙ_š
(
$key
 = 
NULL
, 
$v®ues
 = NULL)

501  
$this
->
	`_wh”e_š
(
$key
, 
$v®ues
, 
TRUE
);

502 
	}
}

516 
public
 
funùiÚ
 
	$Ü_wh”e_nÙ_š
(
$key
 = 
NULL
, 
$v®ues
 = NULL)

518  
$this
->
	`_wh”e_š
(
$key
, 
$v®ues
, 
TRUE
, 'OR ');

519 
	}
}

534 
´Ùeùed
 
funùiÚ
 
_wh”e_š
(
$key
 = 
NULL
, 
$v®ues
 = NULL, 
$nÙ
 = 
FALSE
, 
$ty³
 = 'AND ')

536 ià(
$key
 ==ğ
NULL
 
OR
 
$v®ues
 === NULL)

541 iàĞ! 
is_¬¿y
(
$v®ues
))

543 
	g$v®ues
 = 
¬¿y
(
$v®ues
);

546 
	g$nÙ
 = (
$nÙ
) ? ' NOT' : '';

548 
fÜ—ch
 (
$v®ues
 
as
 
$v®ue
)

550 
	g$this
->
	g¬_wh”eš
[] = 
$this
->
esÿ³
(
$v®ue
);

553 
	g$´efix
 = (
couÁ
(
$this
->
¬_wh”e
è=ğ0è? '' : 
$ty³
;

555 
	g$wh”e_š
 = 
$´efix
 . 
$this
->
_´Ùeù_id’tif›rs
(
$key
è. 
$nÙ
 . " IN (" . 
im¶ode
(", ", $this->
¬_wh”eš
) . ") ";

557 
	g$this
->
	g¬_wh”e
[] = 
$wh”e_š
;

558 ià(
	g$this
->
	g¬_ÿchšg
 ==ğ
TRUE
)

560 
$this
->
¬_ÿche_wh”e
[] = 
$wh”e_š
;

561 
	g$this
->
	g¬_ÿche_exi¡s
[] = 'where';

565 
	g$this
->
	g¬_wh”eš
 = 
¬¿y
();

566  
	g$this
;

581 
public
 
funùiÚ
 
like
(
$f›ld
, 
$m©ch
 = '', 
$side
 = 'both')

583  
$this
->
_like
(
$f›ld
, 
$m©ch
, 'AND ', 
$side
);

598 
public
 
funùiÚ
 
nÙ_like
(
$f›ld
, 
$m©ch
 = '', 
$side
 = 'both')

600  
$this
->
_like
(
$f›ld
, 
$m©ch
, 'AND ', 
$side
, 'NOT');

615 
public
 
funùiÚ
 
Ü_like
(
$f›ld
, 
$m©ch
 = '', 
$side
 = 'both')

617  
$this
->
_like
(
$f›ld
, 
$m©ch
, 'OR ', 
$side
);

632 
public
 
funùiÚ
 
Ü_nÙ_like
(
$f›ld
, 
$m©ch
 = '', 
$side
 = 'both')

634  
$this
->
_like
(
$f›ld
, 
$m©ch
, 'OR ', 
$side
, 'NOT');

649 
´Ùeùed
 
funùiÚ
 
_like
(
$f›ld
, 
$m©ch
 = '', 
$ty³
 = 'AND ', 
$side
 = 'bÙh', 
$nÙ
 = '')

651 iàĞ! 
is_¬¿y
(
$f›ld
))

653 
$f›ld
 = 
¬¿y
($f›ld => 
$m©ch
);

656 
fÜ—ch
 (
$f›ld
 
as
 
$k
 => 
$v
)

658 
$k
 = 
$this
->
_´Ùeù_id’tif›rs
($k);

660 
	g$´efix
 = (
couÁ
(
$this
->
¬_like
è=ğ0è? '' : 
$ty³
;

662 
	g$v
 = 
$this
->
esÿ³_like_¡r
(
$v
);

664 ià(
	g$side
 == 'before')

666 
$like_¡©em’t
 = 
$´efix
." $k $not LIKE '%{$v}'";

668 
–£if
 (
$side
 == 'after')

670 
$like_¡©em’t
 = 
$´efix
." $k $not LIKE '{$v}%'";

674 
	g$like_¡©em’t
 = 
$´efix
." $k $not LIKE '%{$v}%'";

678 ià(
	g$this
->
	g_like_esÿ³_¡r
 != '')

680 
$like_¡©em’t
 = $like_¡©em’t.
¥rštf
(
$this
->
_like_esÿ³_¡r
, $this->
_like_esÿ³_chr
);

683 
	g$this
->
	g¬_like
[] = 
$like_¡©em’t
;

684 ià(
	g$this
->
	g¬_ÿchšg
 ==ğ
TRUE
)

686 
$this
->
¬_ÿche_like
[] = 
$like_¡©em’t
;

687 
	g$this
->
	g¬_ÿche_exi¡s
[] = 'like';

691  
	g$this
;

702 
public
 
funùiÚ
 
	$group_by
(
$by
)

704 ià(
	`is_¡ršg
(
$by
))

706 
$by
 = 
	`ex¶ode
(',', $by);

709 
	`fÜ—ch
 (
$by
 
as
 
$v®
)

711 
$v®
 = 
	`Œim
($val);

713 ià(
$v®
 != '')

715 
$this
->
¬_groupby
[] = $this->
	`_´Ùeù_id’tif›rs
(
$v®
);

717 ià(
$this
->
¬_ÿchšg
 ==ğ
TRUE
)

719 
$this
->
¬_ÿche_groupby
[] = $this->
	`_´Ùeù_id’tif›rs
(
$v®
);

720 
$this
->
¬_ÿche_exi¡s
[] = 'groupby';

724  
$this
;

725 
	}
}

738 
public
 
funùiÚ
 
havšg
(
$key
, 
$v®ue
 = '', 
$esÿ³
 = 
TRUE
)

740  
$this
->
_havšg
(
$key
, 
$v®ue
, 'AND ', 
$esÿ³
);

754 
public
 
funùiÚ
 
Ü_havšg
(
$key
, 
$v®ue
 = '', 
$esÿ³
 = 
TRUE
)

756  
$this
->
_havšg
(
$key
, 
$v®ue
, 'OR ', 
$esÿ³
);

770 
´Ùeùed
 
funùiÚ
 
_havšg
(
$key
, 
$v®ue
 = '', 
$ty³
 = 'AND ', 
$esÿ³
 = 
TRUE
)

772 iàĞ! 
is_¬¿y
(
$key
))

774 
$key
 = 
¬¿y
($key => 
$v®ue
);

777 
fÜ—ch
 (
$key
 
as
 
$k
 => 
$v
)

779 
$´efix
 = (
couÁ
(
$this
->
¬_havšg
è=ğ0è? '' : 
$ty³
;

781 ià(
	g$esÿ³
 ==ğ
TRUE
)

783 
$k
 = 
$this
->
_´Ùeù_id’tif›rs
($k);

786 iàĞ! 
	g$this
->
_has_İ”©Ü
(
$k
))

788 
	g$k
 .= ' = ';

791 ià(
	g$v
 != '')

793 
$v
 = ' '.
$this
->
esÿ³
($v);

796 
	g$this
->
	g¬_havšg
[] = 
$´efix
.
$k
.
$v
;

797 ià(
	g$this
->
	g¬_ÿchšg
 ==ğ
TRUE
)

799 
$this
->
¬_ÿche_havšg
[] = 
$´efix
.
$k
.
$v
;

800 
	g$this
->
	g¬_ÿche_exi¡s
[] = 'having';

804  
	g$this
;

816 
public
 
funùiÚ
 
Üd”_by
(
$Üd”by
, 
$dœeùiÚ
 = '')

818 ià(
¡¹Şow”
(
$dœeùiÚ
) == 'random')

820 
$Üd”by
 = '';

821 
	g$dœeùiÚ
 = 
$this
->
_¿ndom_keywÜd
;

823 
–£if
 (
Œim
(
$dœeùiÚ
) != '')

825 
$dœeùiÚ
 = (
š_¬¿y
(
¡¹ouµ”
(
Œim
($dœeùiÚ)), 
¬¿y
('ASC', 'DESC'), 
TRUE
)è? ' '.
	g$dœeùiÚ
 : ' ASC';

829 ià(
¡½os
(
$Üd”by
, ','è!=ğ
FALSE
)

831 
$‹mp
 = 
¬¿y
();

832 
fÜ—ch
 (
ex¶ode
(',', 
$Üd”by
è
as
 
$·¹
)

834 
	g$·¹
 = 
Œim
(
$·¹
);

835 iàĞ! 
š_¬¿y
(
$·¹
, 
$this
->
¬_®Ÿ£d_bËs
))

837 
	g$·¹
 = 
$this
->
_´Ùeù_id’tif›rs
(
Œim
(
$·¹
));

840 
	g$‹mp
[] = 
$·¹
;

843 
	g$Üd”by
 = 
im¶ode
(', ', 
$‹mp
);

845 ià(
	g$dœeùiÚ
 !ğ
$this
->
_¿ndom_keywÜd
)

847 
$Üd”by
 = 
$this
->
_´Ùeù_id’tif›rs
($orderby);

850 
	g$Üd”by_¡©em’t
 = 
$Üd”by
.
$dœeùiÚ
;

852 
	g$this
->
	g¬_Üd”by
[] = 
$Üd”by_¡©em’t
;

853 ià(
	g$this
->
	g¬_ÿchšg
 ==ğ
TRUE
)

855 
$this
->
¬_ÿche_Üd”by
[] = 
$Üd”by_¡©em’t
;

856 
	g$this
->
	g¬_ÿche_exi¡s
[] = 'orderby';

859  
	g$this
;

871 
public
 
funùiÚ
 
lim™
(
$v®ue
, 
$off£t
 = '')

873 
$this
->
¬_lim™
 = (è
$v®ue
;

875 ià(
	g$off£t
 != '')

877 
$this
->
¬_off£t
 = (è
$off£t
;

880  
	g$this
;

891 
public
 
funùiÚ
 
	$off£t
(
$off£t
)

893 
$this
->
¬_off£t
 = 
$off£t
;

894  
$this
;

895 
	}
}

907 
public
 
funùiÚ
 
£t
(
$key
, 
$v®ue
 = '', 
$esÿ³
 = 
TRUE
)

909 
$key
 = 
$this
->
_objeù_to_¬¿y
($key);

911 iàĞ! 
is_¬¿y
(
$key
))

913 
	g$key
 = 
¬¿y
(
$key
 => 
$v®ue
);

916 
fÜ—ch
 (
$key
 
as
 
$k
 => 
$v
)

918 ià(
$esÿ³
 ==ğ
FALSE
)

920 
$this
->
¬_£t
[$this->
_´Ùeù_id’tif›rs
(
$k
)] = 
$v
;

924 
	g$this
->
	g¬_£t
[
$this
->
_´Ùeù_id’tif›rs
(
$k
, 
FALSE
, 
TRUE
)] = $this->
esÿ³
(
$v
);

928  
	g$this
;

944 
public
 
funùiÚ
 
g‘
(
$bË
 = '', 
$lim™
 = 
nuÎ
, 
$off£t
 =‚ull)

946 ià(
$bË
 != '')

948 
$this
->
_Œack_®Ÿ£s
(
$bË
);

949 
	g$this
->
äom
(
$bË
);

952 iàĞ! 
is_nuÎ
(
$lim™
))

954 
	g$this
->
lim™
(
$lim™
, 
$off£t
);

957 
	g$sql
 = 
$this
->
_compe_£Ëù
();

958 
	g$»suÉ
 = 
$this
->
qu”y
(
$sql
);

959 
	g$this
->
_»£t_£Ëù
();

960  
	g$»suÉ
;

972 
public
 
funùiÚ
 
couÁ_®l_»suÉs
(
$bË
 = '')

974 ià(
$bË
 != '')

976 
$this
->
_Œack_®Ÿ£s
(
$bË
);

977 
	g$this
->
äom
(
$bË
);

980 
	g$sql
 = 
$this
->
_compe_£Ëù
($this->
_couÁ_¡ršg
 . $this->
_´Ùeù_id’tif›rs
('numrows'));

982 
	g$qu”y
 = 
$this
->
qu”y
(
$sql
);

983 
	g$this
->
_»£t_£Ëù
();

985 ià(
	g$qu”y
->
num_rows
() == 0)

990 
	g$row
 = 
$qu”y
->
row
();

991  (è
	g$row
->
	gnumrows
;

1006 
public
 
funùiÚ
 
g‘_wh”e
(
$bË
 = '', 
$wh”e
 = 
nuÎ
, 
$lim™
 =‚uÎ, 
$off£t
 =‚ull)

1008 ià(
$bË
 != '')

1010 
$this
->
äom
(
$bË
);

1013 iàĞ! 
is_nuÎ
(
$wh”e
))

1015 
	g$this
->
wh”e
(
$wh”e
);

1018 iàĞ! 
is_nuÎ
(
$lim™
))

1020 
	g$this
->
lim™
(
$lim™
, 
$off£t
);

1023 
	g$sql
 = 
$this
->
_compe_£Ëù
();

1025 
	g$»suÉ
 = 
$this
->
qu”y
(
$sql
);

1026 
	g$this
->
_»£t_£Ëù
();

1027  
	g$»suÉ
;

1041 
public
 
funùiÚ
 
š£¹_b©ch
(
$bË
 = '', 
$£t
 = 
NULL
)

1043 iàĞ! 
is_nuÎ
(
$£t
))

1045 
$this
->
£t_š£¹_b©ch
(
$£t
);

1048 ià(
couÁ
(
$this
->
¬_£t
) == 0)

1050 ià(
$this
->
db_debug
)

1053  
$this
->
di¥Ïy_”rÜ
('db_must_use_set');

1055  
	gFALSE
;

1058 ià(
	g$bË
 == '')

1060 iàĞ! 
is£t
(
$this
->
¬_äom
[0]))

1062 ià(
$this
->
db_debug
)

1064  
$this
->
di¥Ïy_”rÜ
('db_must_set_table');

1066  
	gFALSE
;

1069 
	g$bË
 = 
$this
->
¬_äom
[0];

1073 
	g$i
 = 0, 
	g$tÙ®
 = 
couÁ
(
$this
->
¬_£t
); $˜< $tÙ®; $˜ğ
$i
 + 100)

1076 
$sql
 = 
$this
->
_š£¹_b©ch
($this->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
), $this->
¬_keys
, 
¬¿y_¦iû
($this->
¬_£t
, 
$i
, 100));

1080 
	g$this
->
qu”y
(
$sql
);

1083 
	g$this
->
_»£t_wr™e
();

1086  
	gTRUE
;

1099 
public
 
funùiÚ
 
£t_š£¹_b©ch
(
$key
, 
$v®ue
 = '', 
$esÿ³
 = 
TRUE
)

1101 
$key
 = 
$this
->
_objeù_to_¬¿y_b©ch
($key);

1103 iàĞ! 
is_¬¿y
(
$key
))

1105 
	g$key
 = 
¬¿y
(
$key
 => 
$v®ue
);

1108 
	g$keys
 = 
¬¿y_keys
(
cu¼’t
(
$key
));

1109 
sÜt
(
$keys
);

1111 
fÜ—ch
 (
$key
 
as
 
$row
)

1113 ià(
couÁ
(
¬¿y_diff
(
$keys
, 
¬¿y_keys
(
$row
))è> 0 
OR
 count(array_diff(array_keys($row), $keys)) > 0)

1116 
	g$this
->
	g¬_£t
[] = 
¬¿y
();

1120 
ksÜt
(
$row
);

1122 ià(
	g$esÿ³
 ==ğ
FALSE
)

1124 
$this
->
¬_£t
[] = '('.
im¶ode
(',', 
$row
).')';

1128 
	g$ş—n
 = 
¬¿y
();

1130 
fÜ—ch
 (
$row
 
as
 
$v®ue
)

1132 
	g$ş—n
[] = 
$this
->
esÿ³
(
$v®ue
);

1135 
	g$this
->
	g¬_£t
[] = '('.
im¶ode
(',', 
$ş—n
).')';

1139 
fÜ—ch
 (
$keys
 
as
 
$k
)

1141 
	g$this
->
	g¬_keys
[] = 
$this
->
_´Ùeù_id’tif›rs
(
$k
);

1144  
	g$this
;

1158 
funùiÚ
 
š£¹
(
$bË
 = '', 
$£t
 = 
NULL
)

1160 iàĞ! 
is_nuÎ
(
$£t
))

1162 
$this
->
£t
(
$£t
);

1165 ià(
couÁ
(
$this
->
¬_£t
) == 0)

1167 ià(
$this
->
db_debug
)

1169  
$this
->
di¥Ïy_”rÜ
('db_must_use_set');

1171  
	gFALSE
;

1174 ià(
	g$bË
 == '')

1176 iàĞ! 
is£t
(
$this
->
¬_äom
[0]))

1178 ià(
$this
->
db_debug
)

1180  
$this
->
di¥Ïy_”rÜ
('db_must_set_table');

1182  
	gFALSE
;

1185 
	g$bË
 = 
$this
->
¬_äom
[0];

1188 
	g$sql
 = 
$this
->
_š£¹
($this->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
), 
¬¿y_keys
($this->
¬_£t
), 
¬¿y_v®ues
($this->ar_set));

1190 
	g$this
->
_»£t_wr™e
();

1191  
	g$this
->
qu”y
(
$sql
);

1205 
public
 
funùiÚ
 
»¶aû
(
$bË
 = '', 
$£t
 = 
NULL
)

1207 iàĞ! 
is_nuÎ
(
$£t
))

1209 
$this
->
£t
(
$£t
);

1212 ià(
couÁ
(
$this
->
¬_£t
) == 0)

1214 ià(
$this
->
db_debug
)

1216  
$this
->
di¥Ïy_”rÜ
('db_must_use_set');

1218  
	gFALSE
;

1221 ià(
	g$bË
 == '')

1223 iàĞ! 
is£t
(
$this
->
¬_äom
[0]))

1225 ià(
$this
->
db_debug
)

1227  
$this
->
di¥Ïy_”rÜ
('db_must_set_table');

1229  
	gFALSE
;

1232 
	g$bË
 = 
$this
->
¬_äom
[0];

1235 
	g$sql
 = 
$this
->
_»¶aû
($this->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
), 
¬¿y_keys
($this->
¬_£t
), 
¬¿y_v®ues
($this->ar_set));

1237 
	g$this
->
_»£t_wr™e
();

1238  
	g$this
->
qu”y
(
$sql
);

1253 
public
 
funùiÚ
 
upd©e
(
$bË
 = '', 
$£t
 = 
NULL
, 
$wh”e
 = NULL, 
$lim™
 = NULL)

1256 
$this
->
_m”ge_ÿche
();

1258 iàĞ! 
is_nuÎ
(
$£t
))

1260 
	g$this
->
£t
(
$£t
);

1263 ià(
couÁ
(
$this
->
¬_£t
) == 0)

1265 ià(
$this
->
db_debug
)

1267  
$this
->
di¥Ïy_”rÜ
('db_must_use_set');

1269  
	gFALSE
;

1272 ià(
	g$bË
 == '')

1274 iàĞ! 
is£t
(
$this
->
¬_äom
[0]))

1276 ià(
$this
->
db_debug
)

1278  
$this
->
di¥Ïy_”rÜ
('db_must_set_table');

1280  
	gFALSE
;

1283 
	g$bË
 = 
$this
->
¬_äom
[0];

1286 ià(
	g$wh”e
 !ğ
NULL
)

1288 
$this
->
wh”e
(
$wh”e
);

1291 ià(
	g$lim™
 !ğ
NULL
)

1293 
$this
->
lim™
(
$lim™
);

1296 
	g$sql
 = 
$this
->
_upd©e
($this->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
), $this->
¬_£t
, $this->
¬_wh”e
, $this->
¬_Üd”by
, $this->
¬_lim™
);

1298 
	g$this
->
_»£t_wr™e
();

1299  
	g$this
->
qu”y
(
$sql
);

1315 
public
 
funùiÚ
 
upd©e_b©ch
(
$bË
 = '', 
$£t
 = 
NULL
, 
$šdex
 = NULL)

1318 
$this
->
_m”ge_ÿche
();

1320 ià(
is_nuÎ
(
$šdex
))

1322 ià(
	g$this
->
	gdb_debug
)

1324  
	g$this
->
di¥Ïy_”rÜ
('db_must_use_index');

1327  
	gFALSE
;

1330 iàĞ! 
is_nuÎ
(
$£t
))

1332 
	g$this
->
£t_upd©e_b©ch
(
$£t
, 
$šdex
);

1335 ià(
couÁ
(
$this
->
¬_£t
) == 0)

1337 ià(
$this
->
db_debug
)

1339  
$this
->
di¥Ïy_”rÜ
('db_must_use_set');

1342  
	gFALSE
;

1345 ià(
	g$bË
 == '')

1347 iàĞ! 
is£t
(
$this
->
¬_äom
[0]))

1349 ià(
$this
->
db_debug
)

1351  
$this
->
di¥Ïy_”rÜ
('db_must_set_table');

1353  
	gFALSE
;

1356 
	g$bË
 = 
$this
->
¬_äom
[0];

1360 
	g$i
 = 0, 
	g$tÙ®
 = 
couÁ
(
$this
->
¬_£t
); $˜< $tÙ®; $˜ğ
$i
 + 100)

1362 
$sql
 = 
$this
->
_upd©e_b©ch
($this->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
), 
¬¿y_¦iû
($this->
¬_£t
, 
$i
, 100), $this->_´Ùeù_id’tif›rs(
$šdex
), $this->
¬_wh”e
);

1364 
	g$this
->
qu”y
(
$sql
);

1367 
	g$this
->
_»£t_wr™e
();

1380 
public
 
funùiÚ
 
£t_upd©e_b©ch
(
$key
, 
$šdex
 = '', 
$esÿ³
 = 
TRUE
)

1382 
$key
 = 
$this
->
_objeù_to_¬¿y_b©ch
($key);

1384 iàĞ! 
is_¬¿y
(
$key
))

1389 
fÜ—ch
 (
$key
 
as
 
$k
 => 
$v
)

1391 
$šdex_£t
 = 
FALSE
;

1392 
	g$ş—n
 = 
¬¿y
();

1394 
fÜ—ch
 (
$v
 
as
 
$k2
 => 
$v2
)

1396 ià(
$k2
 =ğ
$šdex
)

1398 
$šdex_£t
 = 
TRUE
;

1402 
	g$nÙ
[] = 
$k
.'-'.
$v
;

1405 ià(
	g$esÿ³
 ==ğ
FALSE
)

1407 
$ş—n
[
$this
->
_´Ùeù_id’tif›rs
(
$k2
)] = 
$v2
;

1411 
	g$ş—n
[
$this
->
_´Ùeù_id’tif›rs
(
$k2
)] = $this->
esÿ³
(
$v2
);

1415 ià(
	g$šdex_£t
 =ğ
FALSE
)

1417  
$this
->
di¥Ïy_”rÜ
('db_batch_missing_index');

1420 
	g$this
->
	g¬_£t
[] = 
$ş—n
;

1423  
	g$this
;

1436 
public
 
funùiÚ
 
em±y_bË
(
$bË
 = '')

1438 ià(
$bË
 == '')

1440 iàĞ! 
is£t
(
$this
->
¬_äom
[0]))

1442 ià(
$this
->
db_debug
)

1444  
$this
->
di¥Ïy_”rÜ
('db_must_set_table');

1446  
	gFALSE
;

1449 
	g$bË
 = 
$this
->
¬_äom
[0];

1453 
	g$bË
 = 
$this
->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
);

1456 
	g$sql
 = 
$this
->
_d–‘e
(
$bË
);

1458 
	g$this
->
_»£t_wr™e
();

1460  
	g$this
->
qu”y
(
$sql
);

1475 
public
 
funùiÚ
 
Œunÿ‹
(
$bË
 = '')

1477 ià(
$bË
 == '')

1479 iàĞ! 
is£t
(
$this
->
¬_äom
[0]))

1481 ià(
$this
->
db_debug
)

1483  
$this
->
di¥Ïy_”rÜ
('db_must_set_table');

1485  
	gFALSE
;

1488 
	g$bË
 = 
$this
->
¬_äom
[0];

1492 
	g$bË
 = 
$this
->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
);

1495 
	g$sql
 = 
$this
->
_Œunÿ‹
(
$bË
);

1497 
	g$this
->
_»£t_wr™e
();

1499  
	g$this
->
qu”y
(
$sql
);

1515 
public
 
funùiÚ
 
d–‘e
(
$bË
 = '', 
$wh”e
 = '', 
$lim™
 = 
NULL
, 
$»£t_d©a
 = 
TRUE
)

1518 
$this
->
_m”ge_ÿche
();

1520 ià(
	g$bË
 == '')

1522 iàĞ! 
is£t
(
$this
->
¬_äom
[0]))

1524 ià(
$this
->
db_debug
)

1526  
$this
->
di¥Ïy_”rÜ
('db_must_set_table');

1528  
	gFALSE
;

1531 
	g$bË
 = 
$this
->
¬_äom
[0];

1533 
–£if
 (
is_¬¿y
(
$bË
))

1535 
fÜ—ch
 (
$bË
 
as
 
$sšgË_bË
)

1537 
	g$this
->
d–‘e
(
$sšgË_bË
, 
$wh”e
, 
$lim™
, 
FALSE
);

1540 
	g$this
->
_»£t_wr™e
();

1545 
	g$bË
 = 
$this
->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
);

1548 ià(
	g$wh”e
 != '')

1550 
$this
->
wh”e
(
$wh”e
);

1553 ià(
	g$lim™
 !ğ
NULL
)

1555 
$this
->
lim™
(
$lim™
);

1558 ià(
couÁ
(
$this
->
¬_wh”e
è=ğ0 && couÁ($this->
¬_wh”eš
è=ğ0 && couÁ($this->
¬_like
) == 0)

1560 ià(
$this
->
db_debug
)

1562  
$this
->
di¥Ïy_”rÜ
('db_del_must_use_where');

1565  
	gFALSE
;

1568 
	g$sql
 = 
$this
->
_d–‘e
(
$bË
, $this->
¬_wh”e
, $this->
¬_like
, $this->
¬_lim™
);

1570 ià(
	g$»£t_d©a
)

1572 
	g$this
->
_»£t_wr™e
();

1575  
	g$this
->
qu”y
(
$sql
);

1588 
public
 
funùiÚ
 
db´efix
(
$bË
 = '')

1590 ià(
$bË
 == '')

1592 
$this
->
di¥Ïy_”rÜ
('db_table_name_required');

1595  
	g$this
->
	gdb´efix
.
	g$bË
;

1608 
public
 
funùiÚ
 
£t_db´efix
(
$´efix
 = '')

1610  
$this
->
db´efix
 = 
$´efix
;

1623 
´Ùeùed
 
funùiÚ
 
	$_Œack_®Ÿ£s
(
$bË
)

1625 ià(
	`is_¬¿y
(
$bË
))

1627 
	`fÜ—ch
 (
$bË
 
as
 
$t
)

1629 
$this
->
	`_Œack_®Ÿ£s
(
$t
);

1636 ià(
	`¡½os
(
$bË
, ','è!=ğ
FALSE
)

1638  
$this
->
	`_Œack_®Ÿ£s
(
	`ex¶ode
(',', 
$bË
));

1642 ià(
	`¡½os
(
$bË
, " "è!=ğ
FALSE
)

1645 
$bË
 = 
	`´eg_»¶aû
('/ AS /i', ' ', $table);

1648 
$bË
 = 
	`Œim
(
	`¡¼chr
($table, " "));

1651 iàĞ! 
	`š_¬¿y
(
$bË
, 
$this
->
¬_®Ÿ£d_bËs
))

1653 
$this
->
¬_®Ÿ£d_bËs
[] = 
$bË
;

1656 
	}
}

1668 
´Ùeùed
 
funùiÚ
 
	$_compe_£Ëù
(
$£Ëù_ov”ride
 = 
FALSE
)

1671 
$this
->
	`_m”ge_ÿche
();

1677 ià(
$£Ëù_ov”ride
 !=ğ
FALSE
)

1679 
$sql
 = 
$£Ëù_ov”ride
;

1683 
$sql
 = ( ! 
$this
->
¬_di¡šù
) ? 'SELECT ' : 'SELECT DISTINCT ';

1685 ià(
	`couÁ
(
$this
->
¬_£Ëù
) == 0)

1687 
$sql
 .= '*';

1694 
	`fÜ—ch
 (
$this
->
¬_£Ëù
 
as
 
$key
 => 
$v®
)

1696 
$no_esÿ³
 = 
	`is£t
(
$this
->
¬_no_esÿ³
[
$key
]è? $this->¬_no_esÿ³[$key] : 
NULL
;

1697 
$this
->
¬_£Ëù
[
$key
] = $this->
	`_´Ùeù_id’tif›rs
(
$v®
, 
FALSE
, 
$no_esÿ³
);

1700 
$sql
 .ğ
	`im¶ode
(', ', 
$this
->
¬_£Ëù
);

1708 ià(
	`couÁ
(
$this
->
¬_äom
) > 0)

1710 
$sql
 .= "\nFROM ";

1712 
$sql
 .ğ
$this
->
	`_äom_bËs
($this->
¬_äom
);

1719 ià(
	`couÁ
(
$this
->
¬_još
) > 0)

1721 
$sql
 .= "\n";

1723 
$sql
 .ğ
	`im¶ode
("\n", 
$this
->
¬_još
);

1730 ià(
	`couÁ
(
$this
->
¬_wh”e
è> 0 
OR
 couÁ($this->
¬_like
) > 0)

1732 
$sql
 .= "\nWHERE ";

1735 
$sql
 .ğ
	`im¶ode
("\n", 
$this
->
¬_wh”e
);

1741 ià(
	`couÁ
(
$this
->
¬_like
) > 0)

1743 ià(
	`couÁ
(
$this
->
¬_wh”e
) > 0)

1745 
$sql
 .= "\nAND ";

1748 
$sql
 .ğ
	`im¶ode
("\n", 
$this
->
¬_like
);

1755 ià(
	`couÁ
(
$this
->
¬_groupby
) > 0)

1757 
$sql
 .= "\nGROUP BY ";

1759 
$sql
 .ğ
	`im¶ode
(', ', 
$this
->
¬_groupby
);

1766 ià(
	`couÁ
(
$this
->
¬_havšg
) > 0)

1768 
$sql
 .= "\nHAVING ";

1769 
$sql
 .ğ
	`im¶ode
("\n", 
$this
->
¬_havšg
);

1776 ià(
	`couÁ
(
$this
->
¬_Üd”by
) > 0)

1778 
$sql
 .= "\nORDER BY ";

1779 
$sql
 .ğ
	`im¶ode
(', ', 
$this
->
¬_Üd”by
);

1781 ià(
$this
->
¬_Üd”
 !=ğ
FALSE
)

1783 
$sql
 .ğ(
$this
->
¬_Üd”
 == 'desc') ? ' DESC' : ' ASC';

1791 ià(
	`is_num”ic
(
$this
->
¬_lim™
))

1793 
$sql
 .= "\n";

1794 
$sql
 = 
$this
->
	`_lim™
($sql, $this->
¬_lim™
, $this->
¬_off£t
);

1797  
$sql
;

1798 
	}
}

1810 
public
 
funùiÚ
 
	$_objeù_to_¬¿y
(
$objeù
)

1812 iàĞ! 
	`is_objeù
(
$objeù
))

1814  
$objeù
;

1817 
$¬¿y
 = 
	`¬¿y
();

1818 
	`fÜ—ch
 (
	`g‘_objeù_v¬s
(
$objeù
è
as
 
$key
 => 
$v®
)

1821 iàĞ! 
	`is_objeù
(
$v®
è&& ! 
	`is_¬¿y
($v®è&& 
$key
 != '_parent_name')

1823 
$¬¿y
[
$key
] = 
$v®
;

1827  
$¬¿y
;

1828 
	}
}

1840 
public
 
funùiÚ
 
	$_objeù_to_¬¿y_b©ch
(
$objeù
)

1842 iàĞ! 
	`is_objeù
(
$objeù
))

1844  
$objeù
;

1847 
$¬¿y
 = 
	`¬¿y
();

1848 
$out
 = 
	`g‘_objeù_v¬s
(
$objeù
);

1849 
$f›lds
 = 
	`¬¿y_keys
(
$out
);

1851 
	`fÜ—ch
 (
$f›lds
 
as
 
$v®
)

1854 ià(
$v®
 != '_parent_name')

1857 
$i
 = 0;

1858 
	`fÜ—ch
 (
$out
[
$v®
] 
as
 
$d©a
)

1860 
$¬¿y
[
$i
][
$v®
] = 
$d©a
;

1861 
$i
++;

1866  
$¬¿y
;

1867 
	}
}

1878 
public
 
funùiÚ
 
	$¡¬t_ÿche
()

1880 
$this
->
¬_ÿchšg
 = 
TRUE
;

1881 
	}
}

1892 
public
 
funùiÚ
 
	$¡İ_ÿche
()

1894 
$this
->
¬_ÿchšg
 = 
FALSE
;

1895 
	}
}

1907 
public
 
funùiÚ
 
	$æush_ÿche
()

1909 
$this
->
	`_»£t_run
(
	`¬¿y
(

1910 '¬_ÿche_£Ëù' => 
	`¬¿y
(),

1911 '¬_ÿche_äom' => 
	`¬¿y
(),

1912 '¬_ÿche_još' => 
	`¬¿y
(),

1913 '¬_ÿche_wh”e' => 
	`¬¿y
(),

1914 '¬_ÿche_like' => 
	`¬¿y
(),

1915 '¬_ÿche_groupby' => 
	`¬¿y
(),

1916 '¬_ÿche_havšg' => 
	`¬¿y
(),

1917 '¬_ÿche_Üd”by' => 
	`¬¿y
(),

1918 '¬_ÿche_£t' => 
	`¬¿y
(),

1919 '¬_ÿche_exi¡s' => 
	`¬¿y
(),

1920 '¬_ÿche_no_esÿ³' => 
	`¬¿y
()

1922 
	}
}

1934 
´Ùeùed
 
funùiÚ
 
	$_m”ge_ÿche
()

1936 ià(
	`couÁ
(
$this
->
¬_ÿche_exi¡s
) == 0)

1941 
	`fÜ—ch
 (
$this
->
¬_ÿche_exi¡s
 
as
 
$v®
)

1943 
$¬_v¬ŸbË
 = '¬_'.
$v®
;

1944 
$¬_ÿche_v¬
 = '¬_ÿche_'.
$v®
;

1946 ià(
	`couÁ
(
$this
->
$¬_ÿche_v¬
) == 0)

1951 
$this
->
$¬_v¬ŸbË
 = 
	`¬¿y_unique
(
	`¬¿y_m”ge
($this->
$¬_ÿche_v¬
, $this->$ar_variable));

1956 ià(
$this
->
_´Ùeù_id’tif›rs
 ==ğ
TRUE
 
AND
 
	`couÁ
($this->
¬_ÿche_äom
) > 0)

1958 
$this
->
	`_Œack_®Ÿ£s
($this->
¬_äom
);

1961 
$this
->
¬_no_esÿ³
 = $this->
¬_ÿche_no_esÿ³
;

1962 
	}
}

1972 
´Ùeùed
 
funùiÚ
 
	$_»£t_run
(
$¬_»£t_™ems
)

1974 
	`fÜ—ch
 (
$¬_»£t_™ems
 
as
 
$™em
 => 
$deçuÉ_v®ue
)

1976 iàĞ! 
	`š_¬¿y
(
$™em
, 
$this
->
¬_¡Üe_¬¿y
))

1978 
$this
->
$™em
 = 
$deçuÉ_v®ue
;

1981 
	}
}

1990 
´Ùeùed
 
funùiÚ
 
	$_»£t_£Ëù
()

1992 
$¬_»£t_™ems
 = 
	`¬¿y
(

1993 '¬_£Ëù' => 
	`¬¿y
(),

1994 '¬_äom' => 
	`¬¿y
(),

1995 '¬_još' => 
	`¬¿y
(),

1996 '¬_wh”e' => 
	`¬¿y
(),

1997 '¬_like' => 
	`¬¿y
(),

1998 '¬_groupby' => 
	`¬¿y
(),

1999 '¬_havšg' => 
	`¬¿y
(),

2000 '¬_Üd”by' => 
	`¬¿y
(),

2001 '¬_wh”eš' => 
	`¬¿y
(),

2002 '¬_®Ÿ£d_bËs' => 
	`¬¿y
(),

2003 '¬_no_esÿ³' => 
	`¬¿y
(),

2004 '¬_di¡šù' => 
FALSE
,

2005 '¬_lim™' => 
FALSE
,

2006 '¬_off£t' => 
FALSE
,

2007 '¬_Üd”' => 
FALSE
,

2010 
$this
->
	`_»£t_run
(
$¬_»£t_™ems
);

2011 
	}
}

2022 
´Ùeùed
 
funùiÚ
 
	$_»£t_wr™e
()

2024 
$¬_»£t_™ems
 = 
	`¬¿y
(

2025 '¬_£t' => 
	`¬¿y
(),

2026 '¬_äom' => 
	`¬¿y
(),

2027 '¬_wh”e' => 
	`¬¿y
(),

2028 '¬_like' => 
	`¬¿y
(),

2029 '¬_Üd”by' => 
	`¬¿y
(),

2030 '¬_keys' => 
	`¬¿y
(),

2031 '¬_lim™' => 
FALSE
,

2032 '¬_Üd”' => 
FALSE


2035 
$this
->
	`_»£t_run
(
$¬_»£t_™ems
);

2036 
	}
}

	@system/database/DB_cache.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_Cache
 {

27 
v¬
 
	m$CI
;

28 
v¬
 
	m$db
;

36 
funùiÚ
 
	$__cÚ¡ruù
(&
$db
)

40 
$this
->
CI
 =& 
	`g‘_š¡ªû
();

41 
$this
->
db
 =& 
$db
;

42 
$this
->
CI
->
lßd
->
	`h–³r
('file');

54 
funùiÚ
 
	`check_·th
(
$·th
 = '')

56 ià(
$·th
 == '')

58 ià(
$this
->
db
->
ÿchedœ
 == '')

60  
$this
->
db
->
	`ÿche_off
();

63 
$·th
 = 
$this
->
db
->
ÿchedœ
;

67 
$·th
 = 
	`´eg_»¶aû
("/(.+?)\/*$/", "\\1/", $path);

69 iàĞ! 
	`is_dœ
(
$·th
è
OR
 ! 
	`is_»®ly_wr™abË
($path))

72  
$this
->
db
->
	`ÿche_off
();

75 
$this
->
db
->
ÿchedœ
 = 
$·th
;

76  
TRUE
;

77 
	}
}

90 
funùiÚ
 
	$»ad
(
$sql
)

92 iàĞ! 
$this
->
	`check_·th
())

94  
$this
->
db
->
	`ÿche_off
();

97 
$£gm’t_Úe
 = (
$this
->
CI
->
uri
->
	`£gm’t
(1è=ğ
FALSE
) ? 'default' : $this->CI->uri->segment(1);

99 
$£gm’t_two
 = (
$this
->
CI
->
uri
->
	`£gm’t
(2è=ğ
FALSE
) ? 'index' : $this->CI->uri->segment(2);

101 
$f•©h
 = 
$this
->
db
->
ÿchedœ
.
$£gm’t_Úe
.'+'.
$£gm’t_two
.'/'.
	`md5
(
$sql
);

103 ià(
FALSE
 ==ğ(
$ÿched©a
 = 
	`»ad_fe
(
$f•©h
)))

105  
FALSE
;

108  
	`un£rŸlize
(
$ÿched©a
);

109 
	}
}

119 
funùiÚ
 
	$wr™e
(
$sql
, 
$objeù
)

121 iàĞ! 
$this
->
	`check_·th
())

123  
$this
->
db
->
	`ÿche_off
();

126 
$£gm’t_Úe
 = (
$this
->
CI
->
uri
->
	`£gm’t
(1è=ğ
FALSE
) ? 'default' : $this->CI->uri->segment(1);

128 
$£gm’t_two
 = (
$this
->
CI
->
uri
->
	`£gm’t
(2è=ğ
FALSE
) ? 'index' : $this->CI->uri->segment(2);

130 
$dœ_·th
 = 
$this
->
db
->
ÿchedœ
.
$£gm’t_Úe
.'+'.
$£gm’t_two
.'/';

132 
$f’ame
 = 
	`md5
(
$sql
);

134 iàĞ! @
	`is_dœ
(
$dœ_·th
))

136 iàĞ! @
	`mkdœ
(
$dœ_·th
, 
DIR_WRITE_MODE
))

138  
FALSE
;

141 @
	`chmod
(
$dœ_·th
, 
DIR_WRITE_MODE
);

144 ià(
	`wr™e_fe
(
$dœ_·th
.
$f’ame
, 
	`£rŸlize
(
$objeù
)è==ğ
FALSE
)

146  
FALSE
;

149 @
	`chmod
(
$dœ_·th
.
$f’ame
, 
FILE_WRITE_MODE
);

150  
TRUE
;

151 
	}
}

161 
funùiÚ
 
d–‘e
(
$£gm’t_Úe
 = '', 
$£gm’t_two
 = '')

163 ià(
$£gm’t_Úe
 == '')

165 
$£gm’t_Úe
 = (
$this
->
CI
->
uri
->
£gm’t
(1è=ğ
FALSE
) ? 'default' : $this->CI->uri->segment(1);

168 ià(
	g$£gm’t_two
 == '')

170 
$£gm’t_two
 = (
$this
->
CI
->
uri
->
£gm’t
(2è=ğ
FALSE
) ? 'index' : $this->CI->uri->segment(2);

173 
	g$dœ_·th
 = 
$this
->
db
->
ÿchedœ
.
$£gm’t_Úe
.'+'.
$£gm’t_two
.'/';

175 
d–‘e_fes
(
$dœ_·th
, 
TRUE
);

186 
funùiÚ
 
	$d–‘e_®l
()

188 
	`d–‘e_fes
(
$this
->
db
->
ÿchedœ
, 
TRUE
);

189 
	}
}

	@system/database/DB_driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

31 şas 
	cCI_DB_driv”
 {

33 
v¬
 
	m$u£ºame
;

34 
v¬
 
	m$·sswÜd
;

35 
v¬
 
	m$ho¡Çme
;

36 
v¬
 
	m$d©aba£
;

37 
v¬
 
	m$dbdriv”
 = 'mysql';

38 
v¬
 
	m$db´efix
 = '';

39 
v¬
 
	m$ch¬_£t
 = 'utf8';

40 
v¬
 
	m$dbcŞÏt
 = 'utf8_general_ci';

41 
v¬
 
	m$autoš™
 = 
TRUE
;

42 
v¬
 
	m$sw­_´e
 = '';

43 
v¬
 
	m$pÜt
 = '';

44 
v¬
 
	m$pcÚÃù
 = 
FALSE
;

45 
v¬
 
	m$cÚn_id
 = 
FALSE
;

46 
v¬
 
	m$»suÉ_id
 = 
FALSE
;

47 
v¬
 
	m$db_debug
 = 
FALSE
;

48 
v¬
 
	m$b’chm¬k
 = 0;

49 
v¬
 
	m$qu”y_couÁ
 = 0;

50 
v¬
 
	m$bšd_m¬k”
 = '?';

51 
v¬
 
	m$§ve_qu”›s
 = 
TRUE
;

52 
v¬
 
	m$qu”›s
 = 
¬¿y
();

53 
v¬
 
	m$qu”y_times
 = 
¬¿y
();

54 
v¬
 
	m$d©a_ÿche
 = 
¬¿y
();

55 
v¬
 
	m$Œªs_’abËd
 = 
TRUE
;

56 
v¬
 
	m$Œªs_¡riù
 = 
TRUE
;

57 
v¬
 
	m$_Œªs_d•th
 = 0;

58 
v¬
 
	m$_Œªs_¡©us
 = 
TRUE
;

59 
v¬
 
	m$ÿche_Ú
 = 
FALSE
;

60 
v¬
 
	m$ÿchedœ
 = '';

61 
v¬
 
	m$ÿche_autod–
 = 
FALSE
;

62 
v¬
 
	m$CACHE
;

65 
v¬
 
	m$_´Ùeù_id’tif›rs
 = 
TRUE
;

66 
v¬
 
	m$_»£rved_id’tif›rs
 = 
¬¿y
('*');

69 
v¬
 
	m$¡mt_id
;

70 
v¬
 
	m$curs_id
;

71 
v¬
 
	m$lim™_u£d
;

81 
funùiÚ
 
	$__cÚ¡ruù
(
$·¿ms
)

83 ià(
	`is_¬¿y
(
$·¿ms
))

85 
	`fÜ—ch
 (
$·¿ms
 
as
 
$key
 => 
$v®
)

87 
$this
->
$key
 = 
$v®
;

91 
	`log_mes§ge
('debug', 'Database Driver Class Initialized');

103 
funùiÚ
 
	$š™Ÿlize
()

107 ià(
	`is_»sourû
(
$this
->
cÚn_id
è
OR
 
	`is_objeù
($this->conn_id))

109  
TRUE
;

115 
$this
->
cÚn_id
 = ($this->
pcÚÃù
 =ğ
FALSE
è? $this->
	`db_cÚÃù
(è: $this->
	`db_pcÚÃù
();

118 iàĞ! 
$this
->
cÚn_id
)

120 
	`log_mes§ge
('error', 'Unableo connectohe database');

122 ià(
$this
->
db_debug
)

124 
$this
->
	`di¥Ïy_”rÜ
('db_unable_to_connect');

126  
FALSE
;

132 ià(
$this
->
d©aba£
 != '')

134 iàĞ! 
$this
->
	`db_£Ëù
())

136 
	`log_mes§ge
('”rÜ', 'UÇbËØ£Ëù d©aba£: '.
$this
->
d©aba£
);

138 ià(
$this
->
db_debug
)

140 
$this
->
	`di¥Ïy_”rÜ
('db_uÇbË_to_£Ëù', $this->
d©aba£
);

142  
FALSE
;

147 iàĞ! 
$this
->
	`db_£t_ch¬£t
($this->
ch¬_£t
, $this->
dbcŞÏt
))

149  
FALSE
;

152  
TRUE
;

156  
TRUE
;

157 
	}
}

169 
funùiÚ
 
	$db_£t_ch¬£t
(
$ch¬£t
, 
$cŞÏtiÚ
)

171 iàĞ! 
$this
->
	`_db_£t_ch¬£t
($this->
ch¬_£t
, $this->
dbcŞÏt
))

173 
	`log_mes§ge
('”rÜ', 'UÇbËØ£ˆd©aba£ cÚÃùiÚ ch¬£t: '.
$this
->
ch¬_£t
);

175 ià(
$this
->
db_debug
)

177 
$this
->
	`di¥Ïy_”rÜ
('db_uÇbË_to_£t_ch¬£t', $this->
ch¬_£t
);

180  
FALSE
;

183  
TRUE
;

184 
	}
}

194 
funùiÚ
 
	$¶©fÜm
()

196  
$this
->
dbdriv”
;

197 
	}
}

208 
funùiÚ
 
	$v”siÚ
()

210 ià(
FALSE
 ==ğ(
$sql
 = 
$this
->
	`_v”siÚ
()))

212 ià(
$this
->
db_debug
)

214  
$this
->
	`di¥Ïy_”rÜ
('db_unsupported_function');

216  
FALSE
;

221 
$driv”_v”siÚ_exû±iÚs
 = 
	`¬¿y
('oci8', 'sqlite', 'cubrid');

223 ià(
	`š_¬¿y
(
$this
->
dbdriv”
, 
$driv”_v”siÚ_exû±iÚs
))

225  
$sql
;

229 
$qu”y
 = 
$this
->
	`qu”y
(
$sql
);

230  
$qu”y
->
	`row
('ver');

232 
	}
}

250 
funùiÚ
 
	$qu”y
(
$sql
, 
$bšds
 = 
FALSE
, 
$»tuº_objeù
 = 
TRUE
)

252 ià(
$sql
 == '')

254 ià(
$this
->
db_debug
)

256 
	`log_mes§ge
('”rÜ', 'Inv®id qu”y: '.
$sql
);

257  
$this
->
	`di¥Ïy_”rÜ
('db_invalid_query');

259  
FALSE
;

263 iàĞ(
$this
->
db´efix
 !ğ'' 
AND
 $this->
sw­_´e
 !ğ''è
	`AND
 ($this->dbprefix != $this->swap_pre) )

265 
$sql
 = 
	`´eg_»¶aû
("/(\W)".
$this
->
sw­_´e
."(\S+?)/", "\\1".$this->
db´efix
."\\2", $sql);

271 ià(
$this
->
ÿche_Ú
 =ğ
TRUE
 
AND
 
	`¡ri¡r
(
$sql
, 'SELECT'))

273 ià(
$this
->
	`_ÿche_š™
())

275 
$this
->
	`lßd_rdriv”
();

276 ià(
FALSE
 !=ğ(
$ÿche
 = 
$this
->
CACHE
->
	`»ad
(
$sql
)))

278  
$ÿche
;

284 ià(
$bšds
 !=ğ
FALSE
)

286 
$sql
 = 
$this
->
	`compe_bšds
($sql, 
$bšds
);

290 ià(
$this
->
§ve_qu”›s
 =ğ
TRUE
)

292 
$this
->
qu”›s
[] = 
$sql
;

296 
$time_¡¬t
 = 
	`li¡
(
$sm
, 
$ss
èğ
	`ex¶ode
(' ', 
	`miüÙime
());

299 ià(
FALSE
 ==ğ(
$this
->
»suÉ_id
 = $this->
	`sim¶e_qu”y
(
$sql
)))

301 ià(
$this
->
§ve_qu”›s
 =ğ
TRUE
)

303 
$this
->
qu”y_times
[] = 0;

307 
$this
->
_Œªs_¡©us
 = 
FALSE
;

309 ià(
$this
->
db_debug
)

313 
$”rÜ_no
 = 
$this
->
	`_”rÜ_numb”
();

314 
$”rÜ_msg
 = 
$this
->
	`_”rÜ_mes§ge
();

320 
$this
->
	`Œªs_com¶‘e
();

323 
	`log_mes§ge
('”rÜ', 'Qu”yƒ¼Ü: '.
$”rÜ_msg
);

324  
$this
->
	`di¥Ïy_”rÜ
(

325 
	`¬¿y
(

326 'E¼Ü Numb”: '.
$”rÜ_no
,

327 
$”rÜ_msg
,

328 
$sql


333  
FALSE
;

337 
$time_’d
 = 
	`li¡
(
$em
, 
$es
èğ
	`ex¶ode
(' ', 
	`miüÙime
());

338 
$this
->
b’chm¬k
 +ğ(
$em
 + 
$es
è- (
$sm
 + 
$ss
);

340 ià(
$this
->
§ve_qu”›s
 =ğ
TRUE
)

342 
$this
->
qu”y_times
[] = (
$em
 + 
$es
è- (
$sm
 + 
$ss
);

346 
$this
->
qu”y_couÁ
++;

350 ià(
$this
->
	`is_wr™e_ty³
(
$sql
è==ğ
TRUE
)

354 ià(
$this
->
ÿche_Ú
 =ğ
TRUE
 
AND
 $this->
ÿche_autod–
 =ğTRUE AND $this->
	`_ÿche_š™
())

356 
$this
->
CACHE
->
	`d–‘e
();

359  
TRUE
;

365 ià(
$»tuº_objeù
 !=ğ
TRUE
)

367  
TRUE
;

372 
$driv”
 = 
$this
->
	`lßd_rdriv”
();

373 
$RES
 = 
Ãw
 
	`$driv”
();

374 
$RES
->
cÚn_id
 = 
$this
->conn_id;

375 
$RES
->
»suÉ_id
 = 
$this
->result_id;

377 ià(
$this
->
dbdriv”
 == 'oci8')

379 
$RES
->
¡mt_id
 = 
$this
->stmt_id;

380 
$RES
->
curs_id
 = 
NULL
;

381 
$RES
->
lim™_u£d
 = 
$this
->limit_used;

382 
$this
->
¡mt_id
 = 
FALSE
;

386 
$RES
->
num_rows
 = $RES->
	`num_rows
();

390 ià(
$this
->
ÿche_Ú
 =ğ
TRUE
 
AND
 $this->
	`_ÿche_š™
())

398 
$CR
 = 
Ãw
 
	`CI_DB_»suÉ
();

399 
$CR
->
num_rows
 = 
$RES
->
	`num_rows
();

400 
$CR
->
»suÉ_objeù
 = 
$RES
->
	`»suÉ_objeù
();

401 
$CR
->
»suÉ_¬¿y
 = 
$RES
->
	`»suÉ_¬¿y
();

404 
$CR
->
cÚn_id
 = 
NULL
;

405 
$CR
->
»suÉ_id
 = 
NULL
;

407 
$this
->
CACHE
->
	`wr™e
(
$sql
, 
$CR
);

410  
$RES
;

411 
	}
}

421 
funùiÚ
 
	$lßd_rdriv”
()

423 
$driv”
 = 'CI_DB_'.
$this
->
dbdriv”
.'_result';

425 iàĞ! 
	`şass_exi¡s
(
$driv”
))

427 
	`šşude_Úû
(
BASEPATH
.'database/DB_result.php');

428 
	`šşude_Úû
(
BASEPATH
.'d©aba£/driv”s/'.
$this
->
dbdriv”
.'/'.$this->dbdriver.'_result.php');

431  
$driv”
;

432 
	}
}

446 
funùiÚ
 
	$sim¶e_qu”y
(
$sql
)

448 iàĞ! 
$this
->
cÚn_id
)

450 
$this
->
	`š™Ÿlize
();

453  
$this
->
	`_execu‹
(
$sql
);

454 
	}
}

465 
funùiÚ
 
	$Œªs_off
()

467 
$this
->
Œªs_’abËd
 = 
FALSE
;

468 
	}
}

482 
funùiÚ
 
	$Œªs_¡riù
(
$mode
 = 
TRUE
)

484 
$this
->
Œªs_¡riù
 = 
	`is_boŞ
(
$mode
è? $mod: 
TRUE
;

485 
	}
}

495 
funùiÚ
 
	$Œªs_¡¬t
(
$‹¡_mode
 = 
FALSE
)

497 iàĞ! 
$this
->
Œªs_’abËd
)

499  
FALSE
;

503 ià(
$this
->
_Œªs_d•th
 > 0)

505 
$this
->
_Œªs_d•th
 += 1;

509 
$this
->
	`Œªs_begš
(
$‹¡_mode
);

510 
	}
}

520 
funùiÚ
 
	$Œªs_com¶‘e
()

522 iàĞ! 
$this
->
Œªs_’abËd
)

524  
FALSE
;

528 ià(
$this
->
_Œªs_d•th
 > 1)

530 
$this
->
_Œªs_d•th
 -= 1;

531  
TRUE
;

535 ià(
$this
->
_Œªs_¡©us
 ==ğ
FALSE
)

537 
$this
->
	`Œªs_rŞlback
();

542 ià(
$this
->
Œªs_¡riù
 ==ğ
FALSE
)

544 
$this
->
_Œªs_¡©us
 = 
TRUE
;

547 
	`log_mes§ge
('debug', 'DB Transaction Failure');

548  
FALSE
;

551 
$this
->
	`Œªs_comm™
();

552  
TRUE
;

553 
	}
}

563 
funùiÚ
 
	$Œªs_¡©us
()

565  
$this
->
_Œªs_¡©us
;

566 
	}
}

578 
funùiÚ
 
	$compe_bšds
(
$sql
, 
$bšds
)

580 ià(
	`¡½os
(
$sql
, 
$this
->
bšd_m¬k”
è==ğ
FALSE
)

582  
$sql
;

585 iàĞ! 
	`is_¬¿y
(
$bšds
))

587 
$bšds
 = 
	`¬¿y
($binds);

591 
$£gm’ts
 = 
	`ex¶ode
(
$this
->
bšd_m¬k”
, 
$sql
);

595 ià(
	`couÁ
(
$bšds
è>ğcouÁ(
$£gm’ts
)) {

596 
$bšds
 = 
	`¬¿y_¦iû
($bšds, 0, 
	`couÁ
(
$£gm’ts
)-1);

600 
$»suÉ
 = 
$£gm’ts
[0];

601 
$i
 = 0;

602 
	`fÜ—ch
 (
$bšds
 
as
 
$bšd
)

604 
$»suÉ
 .ğ
$this
->
	`esÿ³
(
$bšd
);

605 
$»suÉ
 .ğ
$£gm’ts
[++
$i
];

608  
$»suÉ
;

609 
	}
}

620 
funùiÚ
 
	$is_wr™e_ty³
(
$sql
)

622 iàĞ! 
	`´eg_m©ch
('/^\s*"?(SET|INSERT|UPDATE|DELETE|REPLACE|CREATE|DROP|TRUNCATE|LOAD DATA|COPY|ALTER|GRANT|REVOKE|LOCK|UNLOCK)\s+/i', 
$sql
))

624  
FALSE
;

626  
TRUE
;

627 
	}
}

638 
funùiÚ
 
	$–­£d_time
(
$decim®s
 = 6)

640  
	`numb”_fÜm©
(
$this
->
b’chm¬k
, 
$decim®s
);

641 
	}
}

651 
funùiÚ
 
	$tÙ®_qu”›s
()

653  
$this
->
qu”y_couÁ
;

654 
	}
}

664 
funùiÚ
 
	$Ï¡_qu”y
()

666  
	`’d
(
$this
->
qu”›s
);

667 
	}
}

681 
funùiÚ
 
	$esÿ³
(
$¡r
)

683 ià(
	`is_¡ršg
(
$¡r
))

685 
$¡r
 = "'".
$this
->
	`esÿ³_¡r
($str)."'";

687 
	`–£if
 (
	`is_boŞ
(
$¡r
))

689 
$¡r
 = ($¡¸==ğ
FALSE
) ? 0 : 1;

691 
	`–£if
 (
	`is_nuÎ
(
$¡r
))

693 
$¡r
 = 'NULL';

696  
$¡r
;

697 
	}
}

711 
funùiÚ
 
	$esÿ³_like_¡r
(
$¡r
)

713  
$this
->
	`esÿ³_¡r
(
$¡r
, 
TRUE
);

714 
	}
}

728 
funùiÚ
 
´im¬y
(
$bË
 = '')

730 
$f›lds
 = 
$this
->
li¡_f›lds
(
$bË
);

732 iàĞ! 
is_¬¿y
(
$f›lds
))

734  
	gFALSE
;

737  
cu¼’t
(
$f›lds
);

748 
funùiÚ
 
	$li¡_bËs
(
$cÚ¡¿š_by_´efix
 = 
FALSE
)

751 ià(
	`is£t
(
$this
->
d©a_ÿche
['table_names']))

753  
$this
->
d©a_ÿche
['table_names'];

756 ià(
FALSE
 ==ğ(
$sql
 = 
$this
->
	`_li¡_bËs
(
$cÚ¡¿š_by_´efix
)))

758 ià(
$this
->
db_debug
)

760  
$this
->
	`di¥Ïy_”rÜ
('db_unsupported_function');

762  
FALSE
;

765 
$»tv®
 = 
	`¬¿y
();

766 
$qu”y
 = 
$this
->
	`qu”y
(
$sql
);

768 ià(
$qu”y
->
	`num_rows
() > 0)

770 
	`fÜ—ch
 (
$qu”y
->
	`»suÉ_¬¿y
(è
as
 
$row
)

772 ià(
	`is£t
(
$row
['TABLE_NAME']))

774 
$»tv®
[] = 
$row
['TABLE_NAME'];

778 
$»tv®
[] = 
	`¬¿y_shiá
(
$row
);

783 
$this
->
d©a_ÿche
['bË_Çmes'] = 
$»tv®
;

784  
$this
->
d©a_ÿche
['table_names'];

785 
	}
}

794 
funùiÚ
 
	$bË_exi¡s
(
$bË_Çme
)

796  ( ! 
	`š_¬¿y
(
$this
->
	`_´Ùeù_id’tif›rs
(
$bË_Çme
, 
TRUE
, 
FALSE
, FALSE), $this->
	`li¡_bËs
())) ? FALSE : TRUE;

797 
	}
}

808 
funùiÚ
 
li¡_f›lds
(
$bË
 = '')

811 ià(
is£t
(
$this
->
d©a_ÿche
['f›ld_Çmes'][
$bË
]))

813  
$this
->
d©a_ÿche
['f›ld_Çmes'][
$bË
];

816 ià(
	g$bË
 == '')

818 ià(
$this
->
db_debug
)

820  
$this
->
di¥Ïy_”rÜ
('db_field_param_missing');

822  
	gFALSE
;

825 ià(
	gFALSE
 ==ğ(
$sql
 = 
$this
->
_li¡_cŞumns
(
$bË
)))

827 ià(
$this
->
db_debug
)

829  
$this
->
di¥Ïy_”rÜ
('db_unsupported_function');

831  
	gFALSE
;

834 
	g$qu”y
 = 
$this
->
qu”y
(
$sql
);

836 
	g$»tv®
 = 
¬¿y
();

837 
fÜ—ch
 (
$qu”y
->
»suÉ_¬¿y
(è
as
 
$row
)

839 ià(
is£t
(
$row
['COLUMN_NAME']))

841 
	g$»tv®
[] = 
$row
['COLUMN_NAME'];

845 
	g$»tv®
[] = 
cu¼’t
(
$row
);

849 
	g$this
->
	gd©a_ÿche
['f›ld_Çmes'][
$bË
] = 
$»tv®
;

850  
	g$this
->
	gd©a_ÿche
['f›ld_Çmes'][
$bË
];

862 
funùiÚ
 
	$f›ld_exi¡s
(
$f›ld_Çme
, 
$bË_Çme
)

864  ( ! 
	`š_¬¿y
(
$f›ld_Çme
, 
$this
->
	`li¡_f›lds
(
$bË_Çme
))è? 
FALSE
 : 
TRUE
;

865 
	}
}

876 
funùiÚ
 
f›ld_d©a
(
$bË
 = '')

878 ià(
$bË
 == '')

880 ià(
$this
->
db_debug
)

882  
$this
->
di¥Ïy_”rÜ
('db_field_param_missing');

884  
	gFALSE
;

887 
	g$qu”y
 = 
$this
->
qu”y
($this->
_f›ld_d©a
($this->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
)));

889  
	g$qu”y
->
f›ld_d©a
();

902 
funùiÚ
 
	$š£¹_¡ršg
(
$bË
, 
$d©a
)

904 
$f›lds
 = 
	`¬¿y
();

905 
$v®ues
 = 
	`¬¿y
();

907 
	`fÜ—ch
 (
$d©a
 
as
 
$key
 => 
$v®
)

909 
$f›lds
[] = 
$this
->
	`_esÿ³_id’tif›rs
(
$key
);

910 
$v®ues
[] = 
$this
->
	`esÿ³
(
$v®
);

913  
$this
->
	`_š£¹
($this->
	`_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
), 
$f›lds
, 
$v®ues
);

914 
	}
}

927 
funùiÚ
 
	$upd©e_¡ršg
(
$bË
, 
$d©a
, 
$wh”e
)

929 ià(
$wh”e
 == '')

931  
çl£
;

934 
$f›lds
 = 
	`¬¿y
();

935 
	`fÜ—ch
 (
$d©a
 
as
 
$key
 => 
$v®
)

937 
$f›lds
[
$this
->
	`_´Ùeù_id’tif›rs
(
$key
)] = $this->
	`esÿ³
(
$v®
);

940 iàĞ! 
	`is_¬¿y
(
$wh”e
))

942 
$de¡
 = 
	`¬¿y
(
$wh”e
);

946 
$de¡
 = 
	`¬¿y
();

947 
	`fÜ—ch
 (
$wh”e
 
as
 
$key
 => 
$v®
)

949 
$´efix
 = (
	`couÁ
(
$de¡
) == 0) ? '' : ' AND ';

951 ià(
$v®
 !== '')

953 iàĞ! 
$this
->
	`_has_İ”©Ü
(
$key
))

955 
$key
 .= ' =';

958 
$v®
 = ' '.
$this
->
	`esÿ³
($val);

961 
$de¡
[] = 
$´efix
.
$key
.
$v®
;

965  
$this
->
	`_upd©e
($this->
	`_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
), 
$f›lds
, 
$de¡
);

966 
	}
}

977 
funùiÚ
 
	$_has_İ”©Ü
(
$¡r
)

979 
$¡r
 = 
	`Œim
($str);

980 iàĞ! 
	`´eg_m©ch
("/(\s|<|>|!|=|i nuÎ|i nÙ‚uÎ)/i", 
$¡r
))

982  
FALSE
;

985  
TRUE
;

986 
	}
}

998 
funùiÚ
 
	$ÿÎ_funùiÚ
(
$funùiÚ
)

1000 
$driv”
 = (
$this
->
dbdriv”
 == 'postgre') ? 'pg_' : $this->dbdriver.'_';

1002 ià(
FALSE
 ==ğ
	`¡½os
(
$driv”
, 
$funùiÚ
))

1004 
$funùiÚ
 = 
$driv”
.$function;

1007 iàĞ! 
	`funùiÚ_exi¡s
(
$funùiÚ
))

1009 ià(
$this
->
db_debug
)

1011  
$this
->
	`di¥Ïy_”rÜ
('db_unsupported_function');

1013  
FALSE
;

1017 
$¬gs
 = (
	`func_num_¬gs
(è> 1è? 
	`¬¿y_¥liû
(
	`func_g‘_¬gs
(), 1è: 
nuÎ
;

1019  
	`ÿÎ_u£r_func_¬¿y
(
$funùiÚ
, 
$¬gs
);

1021 
	}
}

1032 
funùiÚ
 
ÿche_£t_·th
(
$·th
 = '')

1034 
$this
->
ÿchedœ
 = 
$·th
;

1045 
funùiÚ
 
	$ÿche_Ú
()

1047 
$this
->
ÿche_Ú
 = 
TRUE
;

1048  
TRUE
;

1049 
	}
}

1059 
funùiÚ
 
	$ÿche_off
()

1061 
$this
->
ÿche_Ú
 = 
FALSE
;

1062  
FALSE
;

1063 
	}
}

1074 
funùiÚ
 
ÿche_d–‘e
(
$£gm’t_Úe
 = '', 
$£gm’t_two
 = '')

1076 iàĞ! 
$this
->
_ÿche_š™
())

1078  
FALSE
;

1080  
	g$this
->
	gCACHE
->
d–‘e
(
$£gm’t_Úe
, 
$£gm’t_two
);

1091 
funùiÚ
 
	$ÿche_d–‘e_®l
()

1093 iàĞ! 
$this
->
	`_ÿche_š™
())

1095  
FALSE
;

1098  
$this
->
CACHE
->
	`d–‘e_®l
();

1099 
	}
}

1109 
funùiÚ
 
	$_ÿche_š™
()

1111 ià(
	`is_objeù
(
$this
->
CACHE
è
AND
 
	`şass_exi¡s
('CI_DB_Cache'))

1113  
TRUE
;

1116 iàĞ! 
	`şass_exi¡s
('CI_DB_Cache'))

1118 iàĞ! @
	`šşude
(
BASEPATH
.'database/DB_cache.php'))

1120  
$this
->
	`ÿche_off
();

1124 
$this
->
CACHE
 = 
Ãw
 
	`CI_DB_Cache
($this);

1125  
TRUE
;

1126 
	}
}

1136 
funùiÚ
 
	$şo£
()

1138 ià(
	`is_»sourû
(
$this
->
cÚn_id
è
OR
 
	`is_objeù
($this->conn_id))

1140 
$this
->
	`_şo£
($this->
cÚn_id
);

1142 
$this
->
cÚn_id
 = 
FALSE
;

1143 
	}
}

1156 
funùiÚ
 
di¥Ïy_”rÜ
(
$”rÜ
 = '', 
$sw­
 = '', 
$Çtive
 = 
FALSE
)

1158 
$LANG
 =& 
lßd_şass
('Lang', 'core');

1159 
	g$LANG
->
lßd
('db');

1161 
	g$h—dšg
 = 
$LANG
->
lše
('db_error_heading');

1163 ià(
	g$Çtive
 =ğ
TRUE
)

1165 
$mes§ge
 = 
$”rÜ
;

1169 
	g$mes§ge
 = ( ! 
is_¬¿y
(
$”rÜ
)è? 
¬¿y
(
¡r_»¶aû
('%s', 
$sw­
, 
$LANG
->
lše
($error))) : $error;

1176 
	g$Œaû
 = 
debug_backŒaû
();

1178 
fÜ—ch
 (
$Œaû
 
as
 
$ÿÎ
)

1180 ià(
is£t
(
$ÿÎ
['fe']è&& 
¡½os
($ÿÎ['fe'], 
BASEPATH
.'d©aba£'è==ğ
FALSE
)

1183 
$mes§ge
[] = 'F’ame: '.
¡r_»¶aû
(
¬¿y
(
BASEPATH
, 
APPPATH
), '', 
$ÿÎ
['file']);

1184 
	g$mes§ge
[] = 'LšNumb”: '.
$ÿÎ
['line'];

1190 
	g$”rÜ
 =& 
lßd_şass
('Exceptions', 'core');

1191 
echo
 
	g$”rÜ
->
show_”rÜ
(
$h—dšg
, 
$mes§ge
, 'error_db');

1192 
	gex™
;

1206 
funùiÚ
 
	$´Ùeù_id’tif›rs
(
$™em
, 
$´efix_sšgË
 = 
FALSE
)

1208  
$this
->
	`_´Ùeù_id’tif›rs
(
$™em
, 
$´efix_sšgË
);

1209 
	}
}

1240 
funùiÚ
 
	$_´Ùeù_id’tif›rs
(
$™em
, 
$´efix_sšgË
 = 
FALSE
, 
$´Ùeù_id’tif›rs
 = 
NULL
, 
$f›ld_exi¡s
 = 
TRUE
)

1242 iàĞ! 
	`is_boŞ
(
$´Ùeù_id’tif›rs
))

1244 
$´Ùeù_id’tif›rs
 = 
$this
->
_´Ùeù_id’tif›rs
;

1247 ià(
	`is_¬¿y
(
$™em
))

1249 
$esÿ³d_¬¿y
 = 
	`¬¿y
();

1251 
	`fÜ—ch
 (
$™em
 
as
 
$k
 => 
$v
)

1253 
$esÿ³d_¬¿y
[
$this
->
	`_´Ùeù_id’tif›rs
(
$k
)] = $this->_´Ùeù_id’tif›rs(
$v
);

1256  
$esÿ³d_¬¿y
;

1260 
$™em
 = 
	`´eg_»¶aû
('/[\t ]+/', ' ', $item);

1264 
$®Ÿs
 = '';

1265 ià(
	`¡½os
(
$™em
, ' 'è!=ğ
FALSE
)

1267 
$®Ÿs
 = 
	`¡r¡r
(
$™em
, " ");

1268 
$™em
 = 
	`sub¡r
($™em, 0, - 
	`¡¾’
(
$®Ÿs
));

1275 ià(
	`¡½os
(
$™em
, '('è!=ğ
FALSE
)

1277  
$™em
.
$®Ÿs
;

1283 ià(
	`¡½os
(
$™em
, '.'è!=ğ
FALSE
)

1285 
$·¹s
 = 
	`ex¶ode
('.', 
$™em
);

1290 ià(
	`š_¬¿y
(
$·¹s
[0], 
$this
->
¬_®Ÿ£d_bËs
))

1292 ià(
$´Ùeù_id’tif›rs
 ==ğ
TRUE
)

1294 
	`fÜ—ch
 (
$·¹s
 
as
 
$key
 => 
$v®
)

1296 iàĞ! 
	`š_¬¿y
(
$v®
, 
$this
->
_»£rved_id’tif›rs
))

1298 
$·¹s
[
$key
] = 
$this
->
	`_esÿ³_id’tif›rs
(
$v®
);

1302 
$™em
 = 
	`im¶ode
('.', 
$·¹s
);

1304  
$™em
.
$®Ÿs
;

1308 ià(
$this
->
db´efix
 != '')

1313 ià(
	`is£t
(
$·¹s
[3]))

1315 
$i
 = 2;

1319 
	`–£if
 (
	`is£t
(
$·¹s
[2]))

1321 
$i
 = 1;

1327 
$i
 = 0;

1332 ià(
$f›ld_exi¡s
 =ğ
FALSE
)

1334 
$i
++;

1338 ià(
$this
->
sw­_´e
 !ğ'' && 
	`¡ºcmp
(
$·¹s
[
$i
], $this->sw­_´e, 
	`¡¾’
($this->swap_pre)) === 0)

1340 
$·¹s
[
$i
] = 
	`´eg_»¶aû
("/^".
$this
->
sw­_´e
."(\S+?)/", $this->
db´efix
."\\1", $parts[$i]);

1344 ià(
	`sub¡r
(
$·¹s
[
$i
], 0, 
	`¡¾’
(
$this
->
db´efix
)) != $this->dbprefix)

1346 
$·¹s
[
$i
] = 
$this
->
db´efix
.$parts[$i];

1350 
$™em
 = 
	`im¶ode
('.', 
$·¹s
);

1353 ià(
$´Ùeù_id’tif›rs
 ==ğ
TRUE
)

1355 
$™em
 = 
$this
->
	`_esÿ³_id’tif›rs
($item);

1358  
$™em
.
$®Ÿs
;

1362 ià(
$this
->
db´efix
 != '')

1365 ià(
$this
->
sw­_´e
 !ğ'' && 
	`¡ºcmp
(
$™em
, $this->sw­_´e, 
	`¡¾’
($this->swap_pre)) === 0)

1367 
$™em
 = 
	`´eg_»¶aû
("/^".
$this
->
sw­_´e
."(\S+?)/", $this->
db´efix
."\\1", $item);

1371 ià(
$´efix_sšgË
 =ğ
TRUE
 
AND
 
	`sub¡r
(
$™em
, 0, 
	`¡¾’
(
$this
->
db´efix
)) != $this->dbprefix)

1373 
$™em
 = 
$this
->
db´efix
.$item;

1377 ià(
$´Ùeù_id’tif›rs
 ==ğ
TRUE
 
AND
 ! 
	`š_¬¿y
(
$™em
, 
$this
->
_»£rved_id’tif›rs
))

1379 
$™em
 = 
$this
->
	`_esÿ³_id’tif›rs
($item);

1382  
$™em
.
$®Ÿs
;

1383 
	}
}

	@system/database/DB_forge.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_fÜge
 {

27 
v¬
 
	m$f›lds
 = 
¬¿y
();

28 
v¬
 
	m$keys
 = 
¬¿y
();

29 
v¬
 
	m$´im¬y_keys
 = 
¬¿y
();

30 
v¬
 
	m$db_ch¬_£t
 = '';

38 
funùiÚ
 
	$__cÚ¡ruù
()

41 
$CI
 =& 
	`g‘_š¡ªû
();

42 
$this
->
db
 =& 
$CI
->db;

43 
	`log_mes§ge
('debug', "Database Forge Class Initialized");

55 
funùiÚ
 
	$ü—‹_d©aba£
(
$db_Çme
)

57 
$sql
 = 
$this
->
	`_ü—‹_d©aba£
(
$db_Çme
);

59 ià(
	`is_boŞ
(
$sql
))

61  
$sql
;

64  
$this
->
db
->
	`qu”y
(
$sql
);

65 
	}
}

76 
funùiÚ
 
	$drİ_d©aba£
(
$db_Çme
)

78 
$sql
 = 
$this
->
	`_drİ_d©aba£
(
$db_Çme
);

80 ià(
	`is_boŞ
(
$sql
))

82  
$sql
;

85  
$this
->
db
->
	`qu”y
(
$sql
);

86 
	}
}

98 
funùiÚ
 
add_key
(
$key
 = '', 
$´im¬y
 = 
FALSE
)

100 ià(
is_¬¿y
(
$key
))

102 
fÜ—ch
 (
$key
 
as
 
$Úe
)

104 
$this
->
add_key
(
$Úe
, 
$´im¬y
);

110 ià(
	g$key
 == '')

112 
show_”rÜ
('Key information is„equired forhat operation.');

115 ià(
	g$´im¬y
 ==ğ
TRUE
)

117 
$this
->
´im¬y_keys
[] = 
$key
;

121 
	g$this
->
	gkeys
[] = 
$key
;

134 
funùiÚ
 
add_f›ld
(
$f›ld
 = '')

136 ià(
$f›ld
 == '')

138 
show_”rÜ
('Field information is„equired.');

141 ià(
is_¡ršg
(
$f›ld
))

143 ià(
	g$f›ld
 == 'id')

145 
$this
->
add_f›ld
(
¬¿y
(

146 'id' => 
¬¿y
(

149 'auto_šüem’t' => 
TRUE


152 
	g$this
->
add_key
('id', 
TRUE
);

156 ià(
¡½os
(
$f›ld
, ' 'è==ğ
FALSE
)

158 
show_”rÜ
('Field information is„equired forhat operation.');

161 
	g$this
->
	gf›lds
[] = 
$f›ld
;

165 ià(
is_¬¿y
(
$f›ld
))

167 
	g$this
->
	gf›lds
 = 
¬¿y_m”ge
(
$this
->
f›lds
, 
$f›ld
);

181 
funùiÚ
 
ü—‹_bË
(
$bË
 = '', 
$if_nÙ_exi¡s
 = 
FALSE
)

183 ià(
$bË
 == '')

185 
show_”rÜ
('Aable‚ame is„equired forhat operation.');

188 ià(
couÁ
(
$this
->
f›lds
) == 0)

190 
show_”rÜ
('Field information is„equired.');

193 
	g$sql
 = 
$this
->
_ü—‹_bË
($this->
db
->
db´efix
.
$bË
, $this->
f›lds
, $this->
´im¬y_keys
, $this->
keys
, 
$if_nÙ_exi¡s
);

195 
	g$this
->
_»£t
();

196  
	g$this
->
	gdb
->
qu”y
(
$sql
);

208 
funùiÚ
 
	$drİ_bË
(
$bË_Çme
)

210 
$sql
 = 
$this
->
	`_drİ_bË
($this->
db
->
db´efix
.
$bË_Çme
);

212 ià(
	`is_boŞ
(
$sql
))

214  
$sql
;

217  
$this
->
db
->
	`qu”y
(
$sql
);

218 
	}
}

230 
funùiÚ
 
	$»Çme_bË
(
$bË_Çme
, 
$Ãw_bË_Çme
)

232 ià(
$bË_Çme
 =ğ'' 
OR
 
$Ãw_bË_Çme
 == '')

234 
	`show_”rÜ
('Aable‚ame is„equired forhat operation.');

237 
$sql
 = 
$this
->
	`_»Çme_bË
($this->
db
->
db´efix
.
$bË_Çme
, $this->db->db´efix.
$Ãw_bË_Çme
);

238  
$this
->
db
->
	`qu”y
(
$sql
);

239 
	}
}

252 
funùiÚ
 
add_cŞumn
(
$bË
 = '', 
$f›ld
 = 
¬¿y
(), 
$aá”_f›ld
 = '')

254 ià(
$bË
 == '')

256 
show_”rÜ
('Aable‚ame is„equired forhat operation.');

262 
fÜ—ch
 (
$f›ld
 
as
 
$k
 => 
$v
)

264 
$this
->
add_f›ld
(
¬¿y
(
$k
 => 
$f›ld
[$k]));

266 ià(
couÁ
(
$this
->
f›lds
) == 0)

268 
show_”rÜ
('Field information is„equired.');

271 
	g$sql
 = 
$this
->
_®‹r_bË
('ADD', $this->
db
->
db´efix
.
$bË
, $this->
f›lds
, 
$aá”_f›ld
);

273 
	g$this
->
_»£t
();

275 ià(
	g$this
->
	gdb
->
qu”y
(
$sql
è==ğ
FALSE
)

277  
FALSE
;

281  
	gTRUE
;

295 
funùiÚ
 
drİ_cŞumn
(
$bË
 = '', 
$cŞumn_Çme
 = '')

298 ià(
$bË
 == '')

300 
show_”rÜ
('Aable‚ame is„equired forhat operation.');

303 ià(
	g$cŞumn_Çme
 == '')

305 
show_”rÜ
('A column‚ame is„equired forhat operation.');

308 
	g$sql
 = 
$this
->
_®‹r_bË
('DROP', $this->
db
->
db´efix
.
$bË
, 
$cŞumn_Çme
);

310  
	g$this
->
	gdb
->
qu”y
(
$sql
);

324 
funùiÚ
 
modify_cŞumn
(
$bË
 = '', 
$f›ld
 = 
	$¬¿y
())

326 ià(
$bË
 == '')

328 
	`show_”rÜ
('Aable‚ame is„equired forhat operation.');

334 
	`fÜ—ch
 (
$f›ld
 
as
 
$k
 => 
$v
)

337 iàĞ! 
	`is£t
(
$f›ld
[
$k
]['name']))

339 
$f›ld
[
$k
]['name'] = $k;

342 
$this
->
	`add_f›ld
(
	`¬¿y
(
$k
 => 
$f›ld
[$k]));

344 ià(
	`couÁ
(
$this
->
f›lds
) == 0)

346 
	`show_”rÜ
('Field information is„equired.');

349 
$sql
 = 
$this
->
	`_®‹r_bË
('CHANGE', $this->
db
->
db´efix
.
$bË
, $this->
f›lds
);

351 
$this
->
	`_»£t
();

353 ià(
$this
->
db
->
	`qu”y
(
$sql
è==ğ
FALSE
)

355  
FALSE
;

359  
TRUE
;

360 
	}
}

372 
funùiÚ
 
	$_»£t
()

374 
$this
->
f›lds
 = 
	`¬¿y
();

375 
$this
->
keys
 = 
	`¬¿y
();

376 
$this
->
´im¬y_keys
 = 
	`¬¿y
();

377 
	}
}

	@system/database/DB_result.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_DB_»suÉ
 {

31 
v¬
 
	m$cÚn_id
 = 
NULL
;

32 
v¬
 
	m$»suÉ_id
 = 
NULL
;

33 
v¬
 
	m$»suÉ_¬¿y
 = 
¬¿y
();

34 
v¬
 
	m$»suÉ_objeù
 = 
¬¿y
();

35 
v¬
 
	m$cu¡om_»suÉ_objeù
 = 
¬¿y
();

36 
v¬
 
	m$cu¼’t_row
 = 0;

37 
v¬
 
	m$num_rows
 = 0;

38 
v¬
 
	m$row_d©a
 = 
NULL
;

48 
public
 
funùiÚ
 
»suÉ
(
$ty³
 = 'object')

50 ià(
$ty³
 =ğ'¬¿y'è 
$this
->
»suÉ_¬¿y
();

51 ià(
	m$ty³
 =ğ'objeù'è 
$this
->
»suÉ_objeù
();

52  
	m$this
->
cu¡om_»suÉ_objeù
(
$ty³
);

63 
public
 
funùiÚ
 
	$cu¡om_»suÉ_objeù
(
$şass_Çme
)

65 ià(
	`¬¿y_key_exi¡s
(
$şass_Çme
, 
$this
->
cu¡om_»suÉ_objeù
))

67  
$this
->
cu¡om_»suÉ_objeù
[
$şass_Çme
];

70 ià(
$this
->
»suÉ_id
 ==ğ
FALSE
 
OR
 $this->
	`num_rows
() == 0)

72  
	`¬¿y
();

76 
$this
->
	`_d©a_£ek
(0);

77 
$»suÉ_objeù
 = 
	`¬¿y
();

79 
$row
 = 
$this
->
	`_ãtch_objeù
())

81 
$objeù
 = 
Ãw
 
	`$şass_Çme
();

83 
	`fÜ—ch
 (
$row
 
as
 
$key
 => 
$v®ue
)

85 
$objeù
->
$key
 = 
$v®ue
;

88 
$»suÉ_objeù
[] = 
$objeù
;

92  
$this
->
cu¡om_»suÉ_objeù
[
$şass_Çme
] = 
$»suÉ_objeù
;

93 
	}
}

103 
public
 
funùiÚ
 
	$»suÉ_objeù
()

105 ià(
	`couÁ
(
$this
->
»suÉ_objeù
) > 0)

107  
$this
->
»suÉ_objeù
;

113 ià(
$this
->
»suÉ_id
 ==ğ
FALSE
 
OR
 $this->
	`num_rows
() == 0)

115  
	`¬¿y
();

118 
$this
->
	`_d©a_£ek
(0);

119 
$row
 = 
$this
->
	`_ãtch_objeù
())

121 
$this
->
»suÉ_objeù
[] = 
$row
;

124  
$this
->
»suÉ_objeù
;

125 
	}
}

135 
public
 
funùiÚ
 
	$»suÉ_¬¿y
()

137 ià(
	`couÁ
(
$this
->
»suÉ_¬¿y
) > 0)

139  
$this
->
»suÉ_¬¿y
;

145 ià(
$this
->
»suÉ_id
 ==ğ
FALSE
 
OR
 $this->
	`num_rows
() == 0)

147  
	`¬¿y
();

150 
$this
->
	`_d©a_£ek
(0);

151 
$row
 = 
$this
->
	`_ãtch_assoc
())

153 
$this
->
»suÉ_¬¿y
[] = 
$row
;

156  
$this
->
»suÉ_¬¿y
;

157 
	}
}

169 
public
 
funùiÚ
 
row
(
$n
 = 0, 
$ty³
 = 'object')

171 iàĞ! 
is_num”ic
(
$n
))

174 iàĞ! 
is_¬¿y
(
$this
->
row_d©a
))

176 
$this
->
row_d©a
 = $this->
row_¬¿y
(0);

180 ià(
¬¿y_key_exi¡s
(
$n
, 
$this
->
row_d©a
))

182  
	g$this
->
	grow_d©a
[
$n
];

185 
	g$n
 = 0;

188 ià(
	g$ty³
 =ğ'objeù'è 
$this
->
row_objeù
(
$n
);

189 ià(
	g$ty³
 =ğ'¬¿y'è 
$this
->
row_¬¿y
(
$n
);

190  
	g$this
->
cu¡om_row_objeù
(
$n
, 
$ty³
);

201 
public
 
funùiÚ
 
	$£t_row
(
$key
, 
$v®ue
 = 
NULL
)

204 iàĞ! 
	`is_¬¿y
(
$this
->
row_d©a
))

206 
$this
->
row_d©a
 = $this->
	`row_¬¿y
(0);

209 ià(
	`is_¬¿y
(
$key
))

211 
	`fÜ—ch
 (
$key
 
as
 
$k
 => 
$v
)

213 
$this
->
row_d©a
[
$k
] = 
$v
;

219 ià(
$key
 !ğ'' 
AND
 ! 
	`is_nuÎ
(
$v®ue
))

221 
$this
->
row_d©a
[
$key
] = 
$v®ue
;

223 
	}
}

233 
public
 
funùiÚ
 
	$cu¡om_row_objeù
(
$n
, 
$ty³
)

235 
$»suÉ
 = 
$this
->
	`cu¡om_»suÉ_objeù
(
$ty³
);

237 ià(
	`couÁ
(
$»suÉ
) == 0)

239  
$»suÉ
;

242 ià(
$n
 !ğ
$this
->
cu¼’t_row
 
AND
 
	`is£t
(
$»suÉ
[$n]))

244 
$this
->
cu¼’t_row
 = 
$n
;

247  
$»suÉ
[
$this
->
cu¼’t_row
];

248 
	}
}

256 
public
 
funùiÚ
 
	$row_objeù
(
$n
 = 0)

258 
$»suÉ
 = 
$this
->
	`»suÉ_objeù
();

260 ià(
	`couÁ
(
$»suÉ
) == 0)

262  
$»suÉ
;

265 ià(
$n
 !ğ
$this
->
cu¼’t_row
 
AND
 
	`is£t
(
$»suÉ
[$n]))

267 
$this
->
cu¼’t_row
 = 
$n
;

270  
$»suÉ
[
$this
->
cu¼’t_row
];

271 
	}
}

281 
public
 
funùiÚ
 
	$row_¬¿y
(
$n
 = 0)

283 
$»suÉ
 = 
$this
->
	`»suÉ_¬¿y
();

285 ià(
	`couÁ
(
$»suÉ
) == 0)

287  
$»suÉ
;

290 ià(
$n
 !ğ
$this
->
cu¼’t_row
 
AND
 
	`is£t
(
$»suÉ
[$n]))

292 
$this
->
cu¼’t_row
 = 
$n
;

295  
$»suÉ
[
$this
->
cu¼’t_row
];

296 
	}
}

307 
public
 
funùiÚ
 
fœ¡_row
(
$ty³
 = 'object')

309 
$»suÉ
 = 
$this
->
»suÉ
(
$ty³
);

311 ià(
couÁ
(
$»suÉ
) == 0)

313  
$»suÉ
;

315  
	g$»suÉ
[0];

326 
public
 
funùiÚ
 
Ï¡_row
(
$ty³
 = 'object')

328 
$»suÉ
 = 
$this
->
»suÉ
(
$ty³
);

330 ià(
couÁ
(
$»suÉ
) == 0)

332  
$»suÉ
;

334  
	g$»suÉ
[
couÁ
(
$»suÉ
) -1];

345 
public
 
funùiÚ
 
Ãxt_row
(
$ty³
 = 'object')

347 
$»suÉ
 = 
$this
->
»suÉ
(
$ty³
);

349 ià(
couÁ
(
$»suÉ
) == 0)

351  
$»suÉ
;

354 ià(
is£t
(
$»suÉ
[
$this
->
cu¼’t_row
 + 1]))

356 ++
	g$this
->
	gcu¼’t_row
;

359  
	g$»suÉ
[
$this
->
cu¼’t_row
];

370 
public
 
funùiÚ
 
´evious_row
(
$ty³
 = 'object')

372 
$»suÉ
 = 
$this
->
»suÉ
(
$ty³
);

374 ià(
couÁ
(
$»suÉ
) == 0)

376  
$»suÉ
;

379 ià(
is£t
(
$»suÉ
[
$this
->
cu¼’t_row
 - 1]))

381 --
	g$this
->
	gcu¼’t_row
;

383  
	g$»suÉ
[
$this
->
cu¼’t_row
];

397 
public
 
funùiÚ
 
	$num_rows
(è{  
$this
->
num_rows
; 
	}
}

398 
public
 
funùiÚ
 
	$num_f›lds
(è{  0; 
	}
}

399 
public
 
funùiÚ
 
	$li¡_f›lds
(è{  
	`¬¿y
(); 
	}
}

400 
public
 
funùiÚ
 
	$f›ld_d©a
(è{  
	`¬¿y
(); 
	}
}

401 
public
 
funùiÚ
 
	$ä“_»suÉ
(è{  
TRUE
; 
	}
}

402 
´Ùeùed
 
funùiÚ
 
	$_d©a_£ek
(è{  
TRUE
; 
	}
}

403 
´Ùeùed
 
funùiÚ
 
	$_ãtch_assoc
(è{  
	`¬¿y
(); 
	}
}

404 
´Ùeùed
 
funùiÚ
 
	$_ãtch_objeù
(è{  
	`¬¿y
(); 
	}
}

	@system/database/DB_utility.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_ut™y
 
ex‹nds
 
	mCI_DB_fÜge
 {

27 
v¬
 
	m$db
;

28 
v¬
 
	m$d©a_ÿche
 = 
¬¿y
();

36 
funùiÚ
 
	$__cÚ¡ruù
()

39 
$CI
 =& 
	`g‘_š¡ªû
();

40 
$this
->
db
 =& 
$CI
->db;

42 
	`log_mes§ge
('debug', "Database Utility Class Initialized");

53 
funùiÚ
 
	$li¡_d©aba£s
()

56 ià(
	`is£t
(
$this
->
d©a_ÿche
['db_names']))

58  
$this
->
d©a_ÿche
['db_names'];

61 
$qu”y
 = 
$this
->
db
->
	`qu”y
($this->
	`_li¡_d©aba£s
());

62 
$dbs
 = 
	`¬¿y
();

63 ià(
$qu”y
->
	`num_rows
() > 0)

65 
	`fÜ—ch
 (
$qu”y
->
	`»suÉ_¬¿y
(è
as
 
$row
)

67 
$dbs
[] = 
	`cu¼’t
(
$row
);

71 
$this
->
d©a_ÿche
['db_Çmes'] = 
$dbs
;

72  
$this
->
d©a_ÿche
['db_names'];

73 
	}
}

84 
funùiÚ
 
	$d©aba£_exi¡s
(
$d©aba£_Çme
)

89 ià(
	`m‘hod_exi¡s
(
$this
, '_database_exists'))

91  
$this
->
	`_d©aba£_exi¡s
(
$d©aba£_Çme
);

95  ( ! 
	`š_¬¿y
(
$d©aba£_Çme
, 
$this
->
	`li¡_d©aba£s
())è? 
FALSE
 : 
TRUE
;

97 
	}
}

109 
funùiÚ
 
	$İtimize_bË
(
$bË_Çme
)

111 
$sql
 = 
$this
->
	`_İtimize_bË
(
$bË_Çme
);

113 ià(
	`is_boŞ
(
$sql
))

115 
	`show_”rÜ
('db_must_use_set');

118 
$qu”y
 = 
$this
->
db
->
	`qu”y
(
$sql
);

119 
$»s
 = 
$qu”y
->
	`»suÉ_¬¿y
();

123  
	`cu¼’t
(
$»s
);

124 
	}
}

134 
funùiÚ
 
	$İtimize_d©aba£
()

136 
$»suÉ
 = 
	`¬¿y
();

137 
	`fÜ—ch
 (
$this
->
db
->
	`li¡_bËs
(è
as
 
$bË_Çme
)

139 
$sql
 = 
$this
->
	`_İtimize_bË
(
$bË_Çme
);

141 ià(
	`is_boŞ
(
$sql
))

143  
$sql
;

146 
$qu”y
 = 
$this
->
db
->
	`qu”y
(
$sql
);

151 
$»s
 = 
$qu”y
->
	`»suÉ_¬¿y
();

152 
$»s
 = 
	`cu¼’t
($res);

153 
$key
 = 
	`¡r_»¶aû
(
$this
->
db
->
d©aba£
.'.', '', 
	`cu¼’t
(
$»s
));

154 
$keys
 = 
	`¬¿y_keys
(
$»s
);

155 
	`un£t
(
$»s
[
$keys
[0]]);

157 
$»suÉ
[
$key
] = 
$»s
;

160  
$»suÉ
;

161 
	}
}

172 
funùiÚ
 
	$»·œ_bË
(
$bË_Çme
)

174 
$sql
 = 
$this
->
	`_»·œ_bË
(
$bË_Çme
);

176 ià(
	`is_boŞ
(
$sql
))

178  
$sql
;

181 
$qu”y
 = 
$this
->
db
->
	`qu”y
(
$sql
);

185 
$»s
 = 
$qu”y
->
	`»suÉ_¬¿y
();

186  
	`cu¼’t
(
$»s
);

187 
	}
}

201 
funùiÚ
 
csv_äom_»suÉ
(
$qu”y
, 
$d–im
 = ",", 
$Ãwlše
 = "\n", 
$’şosu»
 = '"')

203 iàĞ! 
is_objeù
(
$qu”y
è
OR
 ! 
m‘hod_exi¡s
($query, 'list_fields'))

205 
show_”rÜ
('You must submit‡ valid„esult object');

208 
	g$out
 = '';

211 
fÜ—ch
 (
$qu”y
->
li¡_f›lds
(è
as
 
$Çme
)

213 
	g$out
 .ğ
$’şosu»
.
¡r_»¶aû
($’şosu», $’şosu».$’şosu», 
$Çme
).
	g$’şosu»
.
	g$d–im
;

216 
	g$out
 = 
¹rim
(
$out
);

217 
	g$out
 .ğ
$Ãwlše
;

220 
fÜ—ch
 (
$qu”y
->
»suÉ_¬¿y
(è
as
 
$row
)

222 
fÜ—ch
 (
$row
 
as
 
$™em
)

224 
	g$out
 .ğ
$’şosu»
.
¡r_»¶aû
($’şosu», $’şosu».$’şosu», 
$™em
).
	g$’şosu»
.
	g$d–im
;

226 
	g$out
 = 
¹rim
(
$out
);

227 
	g$out
 .ğ
$Ãwlše
;

230  
	g$out
;

243 
funùiÚ
 
xml_äom_»suÉ
(
$qu”y
, 
$·¿ms
 = 
	$¬¿y
())

245 iàĞ! 
	`is_objeù
(
$qu”y
è
OR
 ! 
	`m‘hod_exi¡s
($query, 'list_fields'))

247 
	`show_”rÜ
('You must submit‡ valid„esult object');

251 
	`fÜ—ch
 (
	`¬¿y
('roÙ' => 'roÙ', '–em’t' => '–em’t', 'Ãwlše' => "\n", 'b' => "\t"è
as
 
$key
 => 
$v®
)

253 iàĞ! 
	`is£t
(
$·¿ms
[
$key
]))

255 
$·¿ms
[
$key
] = 
$v®
;

260 
	`exŒaù
(
$·¿ms
);

263 
$CI
 =& 
	`g‘_š¡ªû
();

264 
$CI
->
lßd
->
	`h–³r
('xml');

267 
$xml
 = "<{$roÙ}>".
$Ãwlše
;

268 
	`fÜ—ch
 (
$qu”y
->
	`»suÉ_¬¿y
(è
as
 
$row
)

270 
$xml
 .ğ
$b
."<{$–em’t}>".
$Ãwlše
;

272 
	`fÜ—ch
 (
$row
 
as
 
$key
 => 
$v®
)

274 
$xml
 .ğ
$b
.$b."<{$key}>".
	`xml_cÚv”t
(
$v®
)."</{$key}>".
$Ãwlše
;

276 
$xml
 .ğ
$b
."</{$–em’t}>".
$Ãwlše
;

278 
$xml
 .ğ"</$roÙ>".
$Ãwlše
;

280  
$xml
;

281 
	}
}

291 
funùiÚ
 
backup
(
$·¿ms
 = 
	$¬¿y
())

296 ià(
	`is_¡ršg
(
$·¿ms
))

298 
$·¿ms
 = 
	`¬¿y
('tables' => $params);

304 
$´efs
 = 
	`¬¿y
(

305 'bËs' => 
	`¬¿y
(),

306 'ignÜe' => 
	`¬¿y
(),

309 'add_drİ' => 
TRUE
,

310 'add_š£¹' => 
TRUE
,

315 ià(
	`couÁ
(
$·¿ms
) > 0)

317 
	`fÜ—ch
 (
$´efs
 
as
 
$key
 => 
$v®
)

319 ià(
	`is£t
(
$·¿ms
[
$key
]))

321 
$´efs
[
$key
] = 
$·¿ms
[$key];

330 ià(
	`couÁ
(
$´efs
['tables']) == 0)

332 
$´efs
['bËs'] = 
$this
->
db
->
	`li¡_bËs
();

338 iàĞ! 
	`š_¬¿y
(
$´efs
['fÜm©'], 
	`¬¿y
('gz', 'z', 'txt'), 
TRUE
))

340 
$´efs
['format'] = 'txt';

347 ià((
$´efs
['fÜm©'] =ğ'gz' 
AND
 ! @
	`funùiÚ_exi¡s
('gzencode'))

348 
	`OR
 (
$´efs
['fÜm©'] =ğ'z' 
AND
 ! @
	`funùiÚ_exi¡s
('gzcompress')))

350 ià(
$this
->
db
->
db_debug
)

352  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_compression');

355 
$´efs
['format'] = 'txt';

361 ià(
$´efs
['f’ame'] =ğ'' 
AND
 $prefs['format'] == 'zip')

363 
$´efs
['f’ame'] = (
	`couÁ
($´efs['bËs']è=ğ1è? $´efs['bËs'] : 
$this
->
db
->
d©aba£
;

364 
$´efs
['f’ame'] .ğ'_'.
	`d©e
('Y-m-d_H-i', 
	`time
());

370 ià(
$´efs
['format'] == 'gzip')

372  
	`gz’code
(
$this
->
	`_backup
(
$´efs
));

378 ià(
$´efs
['format'] == 'txt')

380  
$this
->
	`_backup
(
$´efs
);

386 ià(
$´efs
['format'] == 'zip')

389 ià(
	`´eg_m©ch
("|.+?\.z$|", 
$´efs
['filename']))

391 
$´efs
['f’ame'] = 
	`¡r_»¶aû
('.zip', '', $prefs['filename']);

395 iàĞ! 
	`´eg_m©ch
("|.+?\.sql$|", 
$´efs
['filename']))

397 
$´efs
['filename'] .= '.sql';

402 
$CI
 =& 
	`g‘_š¡ªû
();

403 
$CI
->
lßd
->
	`lib¿ry
('zip');

404 
$CI
->
z
->
	`add_d©a
(
$´efs
['f’ame'], 
$this
->
	`_backup
($prefs));

405  
$CI
->
z
->
	`g‘_z
();

408 
	}
}

	@system/database/drivers/cubrid/cubrid_driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

31 şas 
	cCI_DB_cubrid_driv”
 
ex‹nds
 
	mCI_DB
 {

35 cÚ¡ 
	mDEFAULT_PORT
 = 33000;

37 
v¬
 
	m$dbdriv”
 = 'cubrid';

40 
v¬
 
	m$_esÿ³_ch¬
 = '';

43 
v¬
 
	m$_like_esÿ³_¡r
 = '';

44 
v¬
 
	m$_like_esÿ³_chr
 = '';

51 
v¬
 
	m$_couÁ_¡ršg
 = 'SELECT COUNT(*) AS ';

52 
v¬
 
	m$_¿ndom_keywÜd
 = ' RAND()';

60 
funùiÚ
 
	$db_cÚÃù
()

63 ià(
$this
->
pÜt
 == '')

65 
$this
->
pÜt
 = 
£lf
::
DEFAULT_PORT
;

68 
$cÚn
 = 
	`cubrid_cÚÃù
(
$this
->
ho¡Çme
, $this->
pÜt
, $this->
d©aba£
, $this->
u£ºame
, $this->
·sswÜd
);

70 ià(
$cÚn
)

74 ià(
	`is£t
(
$this
->
auto_comm™
) && ! $this->auto_commit)

76 
	`cubrid_£t_autocomm™
(
$cÚn
, 
CUBRID_AUTOCOMMIT_FALSE
);

80 
	`cubrid_£t_autocomm™
(
$cÚn
, 
CUBRID_AUTOCOMMIT_TRUE
);

81 
$this
->
auto_comm™
 = 
TRUE
;

85  
$cÚn
;

103 
funùiÚ
 
	$db_pcÚÃù
()

105  
$this
->
	`db_cÚÃù
();

106 
	}
}

119 
funùiÚ
 
	$»cÚÃù
()

121 ià(
	`cubrid_pšg
(
$this
->
cÚn_id
è==ğ
FALSE
)

123 
$this
->
cÚn_id
 = 
FALSE
;

125 
	}
}

135 
funùiÚ
 
	$db_£Ëù
()

141  
	`cubrid_pšg
(
$this
->
cÚn_id
);

142 
	}
}

154 
funùiÚ
 
	$db_£t_ch¬£t
(
$ch¬£t
, 
$cŞÏtiÚ
)

159  
TRUE
;

160 
	}
}

170 
funùiÚ
 
	$_v”siÚ
()

177  
	`cubrid_g‘_£rv”_šfo
(
$this
->
cÚn_id
);

178 
	}
}

189 
funùiÚ
 
	$_execu‹
(
$sql
)

191 
$sql
 = 
$this
->
	`_´•_qu”y
($sql);

192  @
	`cubrid_qu”y
(
$sql
, 
$this
->
cÚn_id
);

193 
	}
}

206 
funùiÚ
 
	$_´•_qu”y
(
$sql
)

209  
$sql
;

210 
	}
}

220 
funùiÚ
 
	$Œªs_begš
(
$‹¡_mode
 = 
FALSE
)

222 iàĞ! 
$this
->
Œªs_’abËd
)

224  
TRUE
;

228 ià(
$this
->
_Œªs_d•th
 > 0)

230  
TRUE
;

236 
$this
->
_Œªs_çu»
 = (
$‹¡_mode
 ==ğ
TRUE
è? TRUE : 
FALSE
;

238 ià(
	`cubrid_g‘_autocomm™
(
$this
->
cÚn_id
))

240 
	`cubrid_£t_autocomm™
(
$this
->
cÚn_id
, 
CUBRID_AUTOCOMMIT_FALSE
);

243  
TRUE
;

244 
	}
}

254 
funùiÚ
 
	$Œªs_comm™
()

256 iàĞ! 
$this
->
Œªs_’abËd
)

258  
TRUE
;

262 ià(
$this
->
_Œªs_d•th
 > 0)

264  
TRUE
;

267 
	`cubrid_comm™
(
$this
->
cÚn_id
);

269 ià(
$this
->
auto_comm™
 && ! 
	`cubrid_g‘_autocomm™
($this->
cÚn_id
))

271 
	`cubrid_£t_autocomm™
(
$this
->
cÚn_id
, 
CUBRID_AUTOCOMMIT_TRUE
);

274  
TRUE
;

275 
	}
}

285 
funùiÚ
 
	$Œªs_rŞlback
()

287 iàĞ! 
$this
->
Œªs_’abËd
)

289  
TRUE
;

293 ià(
$this
->
_Œªs_d•th
 > 0)

295  
TRUE
;

298 
	`cubrid_rŞlback
(
$this
->
cÚn_id
);

300 ià(
$this
->
auto_comm™
 && ! 
	`cubrid_g‘_autocomm™
($this->
cÚn_id
))

302 
	`cubrid_£t_autocomm™
(
$this
->
cÚn_id
, 
CUBRID_AUTOCOMMIT_TRUE
);

305  
TRUE
;

306 
	}
}

318 
funùiÚ
 
	$esÿ³_¡r
(
$¡r
, 
$like
 = 
FALSE
)

320 ià(
	`is_¬¿y
(
$¡r
))

322 
	`fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

324 
$¡r
[
$key
] = 
$this
->
	`esÿ³_¡r
(
$v®
, 
$like
);

327  
$¡r
;

330 ià(
	`funùiÚ_exi¡s
('cubrid_»®_esÿ³_¡ršg'è
AND
 
	`is_»sourû
(
$this
->
cÚn_id
))

332 
$¡r
 = 
	`cubrid_»®_esÿ³_¡ršg
($¡r, 
$this
->
cÚn_id
);

336 
$¡r
 = 
	`add¦ashes
($str);

340 ià(
$like
 ==ğ
TRUE
)

342 
$¡r
 = 
	`¡r_»¶aû
(
	`¬¿y
('%', '_'),‡rray('\\%', '\\_'), $str);

345  
$¡r
;

346 
	}
}

356 
funùiÚ
 
	$afãùed_rows
()

358  @
	`cubrid_afãùed_rows
(
$this
->
cÚn_id
);

359 
	}
}

369 
funùiÚ
 
	$š£¹_id
()

371  @
	`cubrid_š£¹_id
(
$this
->
cÚn_id
);

372 
	}
}

386 
funùiÚ
 
couÁ_®l
(
$bË
 = '')

388 ià(
$bË
 == '')

393 
	g$qu”y
 = 
$this
->
qu”y
($this->
_couÁ_¡ršg
 . $this->
_´Ùeù_id’tif›rs
('numrows'è. " FROM " . $this->_´Ùeù_id’tif›rs(
$bË
, 
TRUE
, 
NULL
, 
FALSE
));

395 ià(
	g$qu”y
->
num_rows
() == 0)

400 
	g$row
 = 
$qu”y
->
row
();

401 
	g$this
->
_»£t_£Ëù
();

402  (è
	g$row
->
	gnumrows
;

416 
funùiÚ
 
	$_li¡_bËs
(
$´efix_lim™
 = 
FALSE
)

418 
$sql
 = "SHOW TABLES";

420 ià(
$´efix_lim™
 !=ğ
FALSE
 
AND
 
$this
->
db´efix
 != '')

422 
$sql
 .ğ" LIKE '".
$this
->
	`esÿ³_like_¡r
($this->
db´efix
)."%'";

425  
$sql
;

426 
	}
}

439 
funùiÚ
 
_li¡_cŞumns
(
$bË
 = '')

441  "SHOW COLUMNS FROM ".
$this
->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
);

455 
funùiÚ
 
	$_f›ld_d©a
(
$bË
)

457  "SELECT * FROM ".
$bË
." LIMIT 1";

458 
	}
}

468 
funùiÚ
 
	$_”rÜ_mes§ge
()

470  
	`cubrid_”rÜ
(
$this
->
cÚn_id
);

471 
	}
}

481 
funùiÚ
 
	$_”rÜ_numb”
()

483  
	`cubrid_”ºo
(
$this
->
cÚn_id
);

484 
	}
}

497 
funùiÚ
 
	$_esÿ³_id’tif›rs
(
$™em
)

499 ià(
$this
->
_esÿ³_ch¬
 == '')

501  
$™em
;

504 
	`fÜ—ch
 (
$this
->
_»£rved_id’tif›rs
 
as
 
$id
)

506 ià(
	`¡½os
(
$™em
, '.'.
$id
è!=ğ
FALSE
)

508 
$¡r
 = 
$this
->
_esÿ³_ch¬
. 
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.', 
$™em
);

511  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

515 ià(
	`¡½os
(
$™em
, '.'è!=ğ
FALSE
)

517 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.'.$this->_esÿ³_ch¬, 
$™em
).$this->_escape_char;

521 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
$™em
.$this->_escape_char;

525  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

526 
	}
}

540 
funùiÚ
 
	$_äom_bËs
(
$bËs
)

542 iàĞ! 
	`is_¬¿y
(
$bËs
))

544 
$bËs
 = 
	`¬¿y
($tables);

547  '('.
	`im¶ode
(', ', 
$bËs
).')';

548 
	}
}

563 
funùiÚ
 
	$_š£¹
(
$bË
, 
$keys
, 
$v®ues
)

565  "INSERT INTO ".
$bË
." (\"".
	`im¶ode
('", "', 
$keys
)."\"èVALUES (".im¶ode(', ', 
$v®ues
).")";

566 
	}
}

582 
funùiÚ
 
	$_»¶aû
(
$bË
, 
$keys
, 
$v®ues
)

584  "REPLACE INTO ".
$bË
." (\"".
	`im¶ode
('", "', 
$keys
)."\"èVALUES (".im¶ode(', ', 
$v®ues
).")";

585 
	}
}

600 
funùiÚ
 
	$_š£¹_b©ch
(
$bË
, 
$keys
, 
$v®ues
)

602  "INSERT INTO ".
$bË
." (\"".
	`im¶ode
('", "', 
$keys
)."\"èVALUES ".im¶ode(', ', 
$v®ues
);

603 
	}
}

621 
funùiÚ
 
_upd©e
(
$bË
, 
$v®ues
, 
$wh”e
, 
$Üd”by
 = 
¬¿y
(), 
$lim™
 = 
FALSE
)

623 
fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

625 
$v®¡r
[] = 
¥rštf
('"%s" = %s', 
$key
, 
$v®
);

628 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

630 
	g$Üd”by
 = (
couÁ
(
$Üd”by
è>ğ1)?' ORDER BY '.
im¶ode
(", ", $orderby):'';

632 
	g$sql
 = "UPDATE ".
$bË
." SET ".
im¶ode
(', ', 
$v®¡r
);

634 
	g$sql
 .ğ(
$wh”e
 !ğ'' 
AND
 
couÁ
($wh”eè>=1è? " WHERE ".
im¶ode
(" ", $where) : '';

636 
	g$sql
 .ğ
$Üd”by
.
$lim™
;

638  
	g$sql
;

655 
funùiÚ
 
	$_upd©e_b©ch
(
$bË
, 
$v®ues
, 
$šdex
, 
$wh”e
 = 
NULL
)

657 
$ids
 = 
	`¬¿y
();

658 
$wh”e
 = ($wh”!ğ'' 
AND
 
	`couÁ
($wh”eè>=1è? 
	`im¶ode
(" ", $where).' AND ' : '';

660 
	`fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

662 
$ids
[] = 
$v®
[
$šdex
];

664 
	`fÜ—ch
 (
	`¬¿y_keys
(
$v®
è
as
 
$f›ld
)

666 ià(
$f›ld
 !ğ
$šdex
)

668 
$fš®
[
$f›ld
][] = 'WHEN '.
$šdex
.' = '.
$v®
[$index].' THEN '.$val[$field];

673 
$sql
 = "UPDATE ".
$bË
." SET ";

674 
$ÿ£s
 = '';

676 
	`fÜ—ch
 (
$fš®
 
as
 
$k
 => 
$v
)

678 
$ÿ£s
 .ğ
$k
.' = CASE '."\n";

679 
	`fÜ—ch
 (
$v
 
as
 
$row
)

681 
$ÿ£s
 .ğ
$row
."\n";

684 
$ÿ£s
 .ğ'ELSE '.
$k
.' END, ';

687 
$sql
 .ğ
	`sub¡r
(
$ÿ£s
, 0, -2);

689 
$sql
 .ğ' WHERE '.
$wh”e
.
$šdex
.' IN ('.
	`im¶ode
(',', 
$ids
).')';

691  
$sql
;

692 
	}
}

708 
funùiÚ
 
	$_Œunÿ‹
(
$bË
)

710  "TRUNCATE ".
$bË
;

711 
	}
}

726 
funùiÚ
 
_d–‘e
(
$bË
, 
$wh”e
 = 
¬¿y
(), 
$like
 =‡¼ay(), 
$lim™
 = 
FALSE
)

728 
$cÚd™iÚs
 = '';

730 ià(
couÁ
(
$wh”e
è> 0 
OR
 couÁ(
$like
) > 0)

732 
	g$cÚd™iÚs
 = "\nWHERE ";

733 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$this
->
¬_wh”e
);

735 ià(
couÁ
(
$wh”e
è> 0 && couÁ(
$like
) > 0)

737 
	g$cÚd™iÚs
 .= " AND ";

739 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$like
);

742 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

744  "DELETE FROM ".
	g$bË
.
	g$cÚd™iÚs
.
	g$lim™
;

760 
funùiÚ
 
	$_lim™
(
$sql
, 
$lim™
, 
$off£t
)

762 ià(
$off£t
 == 0)

764 
$off£t
 = '';

768 
$off£t
 .= ", ";

771  
$sql
."LIMIT ".
$off£t
.
$lim™
;

772 
	}
}

783 
funùiÚ
 
	$_şo£
(
$cÚn_id
)

785 @
	`cubrid_şo£
(
$cÚn_id
);

786 
	}
}

	@system/database/drivers/cubrid/cubrid_forge.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_cubrid_fÜge
 
ex‹nds
 
	mCI_DB_fÜge
 {

34 
funùiÚ
 
	$_ü—‹_d©aba£
(
$Çme
)

38  
FALSE
;

50 
funùiÚ
 
	$_drİ_d©aba£
(
$Çme
)

54  
FALSE
;

55 
	}
}

66 
funùiÚ
 
	$_´oûss_f›lds
(
$f›lds
)

68 
$cu¼’t_f›ld_couÁ
 = 0;

69 
$sql
 = '';

71 
	`fÜ—ch
 (
$f›lds
 
as
 
$f›ld
=>
$©Œibu‹s
)

76 ià(
	`is_num”ic
(
$f›ld
))

78 
$sql
 .= "\n\t$attributes";

82 
$©Œibu‹s
 = 
	`¬¿y_chªge_key_ÿ£
($©Œibu‹s, 
CASE_UPPER
);

84 
$sql
 .ğ"\n\t\"" . 
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$f›ld
) . "\"";

86 ià(
	`¬¿y_key_exi¡s
('NAME', 
$©Œibu‹s
))

88 
$sql
 .ğ' '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$©Œibu‹s
['NAME']).' ';

91 ià(
	`¬¿y_key_exi¡s
('TYPE', 
$©Œibu‹s
))

93 
$sql
 .ğ' '.
$©Œibu‹s
['TYPE'];

95 ià(
	`¬¿y_key_exi¡s
('CONSTRAINT', 
$©Œibu‹s
))

97 
$©Œibu‹s
['TYPE'])

102 
$sql
 .ğ'('.
	`im¶ode
(',', 
$©Œibu‹s
['CONSTRAINT']).')';

108 
$sql
 .ğ'("'.
	`im¶ode
('","', 
$©Œibu‹s
['CONSTRAINT']).'")';

111 
$sql
 .ğ'('.
$©Œibu‹s
['CONSTRAINT'].')';

116 ià(
	`¬¿y_key_exi¡s
('UNSIGNED', 
$©Œibu‹s
è&& $©Œibu‹s['UNSIGNED'] ==ğ
TRUE
)

123 ià(
	`¬¿y_key_exi¡s
('DEFAULT', 
$©Œibu‹s
))

125 
$sql
 .ğ' DEFAULT \''.
$©Œibu‹s
['DEFAULT'].'\'';

128 ià(
	`¬¿y_key_exi¡s
('NULL', 
$©Œibu‹s
è&& $©Œibu‹s['NULL'] ==ğ
TRUE
)

130 
$sql
 .= ' NULL';

134 
$sql
 .= ' NOT NULL';

137 ià(
	`¬¿y_key_exi¡s
('AUTO_INCREMENT', 
$©Œibu‹s
è&& $©Œibu‹s['AUTO_INCREMENT'] ==ğ
TRUE
)

139 
$sql
 .= ' AUTO_INCREMENT';

142 ià(
	`¬¿y_key_exi¡s
('UNIQUE', 
$©Œibu‹s
è&& $©Œibu‹s['UNIQUE'] ==ğ
TRUE
)

144 
$sql
 .= ' UNIQUE';

149 ià(++
$cu¼’t_f›ld_couÁ
 < 
	`couÁ
(
$f›lds
))

151 
$sql
 .= ',';

155  
$sql
;

156 
	}
}

171 
funùiÚ
 
	$_ü—‹_bË
(
$bË
, 
$f›lds
, 
$´im¬y_keys
, 
$keys
, 
$if_nÙ_exi¡s
)

173 
$sql
 = 'CREATE TABLE ';

175 ià(
$if_nÙ_exi¡s
 ==ğ
TRUE
)

181 
$sql
 .ğ
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
)." (";

183 
$sql
 .ğ
$this
->
	`_´oûss_f›lds
(
$f›lds
);

186 ià(
	`couÁ
(
$´im¬y_keys
) > 0)

188 
$key_Çme
 = "pk_" . 
$bË
 . "_" .

189 
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
	`im¶ode
('_', 
$´im¬y_keys
));

191 
$´im¬y_keys
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($primary_keys);

192 
$sql
 .ğ",\n\tCONSTRAINT " . 
$key_Çme
 . " PRIMARY KEY(" . 
	`im¶ode
(', ', 
$´im¬y_keys
) . ")";

195 ià(
	`is_¬¿y
(
$keys
è&& 
	`couÁ
($keys) > 0)

197 
	`fÜ—ch
 (
$keys
 
as
 
$key
)

199 ià(
	`is_¬¿y
(
$key
))

201 
$key_Çme
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
	`im¶ode
('_', 
$key
));

202 
$key
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key);

206 
$key_Çme
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$key
);

207 
$key
 = 
	`¬¿y
(
$key_Çme
);

210 
$sql
 .ğ",\n\tKEY \"{$key_Çme}\" (" . 
	`im¶ode
(', ', 
$key
) . ")";

214 
$sql
 .= "\n);";

216  
$sql
;

217 
	}
}

227 
funùiÚ
 
	$_drİ_bË
(
$bË
)

229  "DROP TABLE IF EXISTS ".
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
);

230 
	}
}

247 
funùiÚ
 
_®‹r_bË
(
$®‹r_ty³
, 
$bË
, 
$f›lds
, 
$aá”_f›ld
 = '')

249 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$bË
)." $alter_type ";

252 ià(
	g$®‹r_ty³
 == 'DROP')

254  
$sql
.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$f›lds
);

257 
	g$sql
 .ğ
$this
->
_´oûss_f›lds
(
$f›lds
);

259 ià(
	g$aá”_f›ld
 != '')

261 
$sql
 .ğ' AFTER ' . 
$this
->
db
->
_´Ùeù_id’tif›rs
(
$aá”_f›ld
);

264  
	g$sql
;

279 
funùiÚ
 
	$_»Çme_bË
(
$bË_Çme
, 
$Ãw_bË_Çme
)

281 
$sql
 = 'RENAME TABLE '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$bË_Çme
)." AS ".$this->db->_´Ùeù_id’tif›rs(
$Ãw_bË_Çme
);

282  
$sql
;

283 
	}
}

	@system/database/drivers/cubrid/cubrid_result.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_DB_cubrid_»suÉ
 
ex‹nds
 
	mCI_DB_»suÉ
 {

35 
funùiÚ
 
	$num_rows
()

37  @
	`cubrid_num_rows
(
$this
->
»suÉ_id
);

48 
funùiÚ
 
	$num_f›lds
()

50  @
	`cubrid_num_f›lds
(
$this
->
»suÉ_id
);

51 
	}
}

63 
funùiÚ
 
	$li¡_f›lds
()

65  
	`cubrid_cŞumn_Çmes
(
$this
->
»suÉ_id
);

66 
	}
}

78 
funùiÚ
 
	$f›ld_d©a
()

80 
$»tv®
 = 
	`¬¿y
();

82 
$bËPrim¬yKeys
 = 
	`¬¿y
();

84 
$f›ld
 = 
	`cubrid_ãtch_f›ld
(
$this
->
»suÉ_id
))

86 
$F
 = 
Ãw
 
	`¡dCÏss
();

87 
$F
->
Çme
 = 
$f›ld
->name;

88 
$F
->
ty³
 = 
$f›ld
->type;

89 
$F
-> = 
$f›ld
->
def
;

90 
$F
->
max_Ëngth
 = 
$f›ld
->max_length;

105 
$»s
 = 
	`cubrid_qu”y
(
$this
->
cÚn_id
,

106 "SELECT COUNT(*èFROM db_šdex WHERE cÏss_Çmğ'" . 
$f›ld
->
bË
 .

108 
$f›ld
->
bË
 . "_" . $f›ld->
Çme
 . "'"

111 ià(
$»s
)

113 
$row
 = 
	`cubrid_ãtch_¬¿y
(
$»s
, 
CUBRID_NUM
);

114 
$F
->
´im¬y_key
 = (
$row
[0] > 0 ? 1 : 
nuÎ
);

118 
$F
->
´im¬y_key
 = 
nuÎ
;

121 ià(
	`is_»sourû
(
$»s
))

123 
	`cubrid_şo£_»que¡
(
$»s
);

124 
$this
->
»suÉ_id
 = 
FALSE
;

127 
$»tv®
[] = 
$F
;

130  
$»tv®
;

131 
	}
}

140 
funùiÚ
 
	$ä“_»suÉ
()

142 if(
	`is_»sourû
(
$this
->
»suÉ_id
) ||

143 
	`g‘_»sourû_ty³
(
$this
->
»suÉ_id
) == "Unknown" &&

144 
	`´eg_m©ch
('/Resourû id #/', 
	`¡rv®
(
$this
->
»suÉ_id
)))

146 
	`cubrid_şo£_»que¡
(
$this
->
»suÉ_id
);

147 
$this
->
»suÉ_id
 = 
FALSE
;

149 
	}
}

163 
funùiÚ
 
	$_d©a_£ek
(
$n
 = 0)

165  
	`cubrid_d©a_£ek
(
$this
->
»suÉ_id
, 
$n
);

166 
	}
}

178 
funùiÚ
 
	$_ãtch_assoc
()

180  
	`cubrid_ãtch_assoc
(
$this
->
»suÉ_id
);

181 
	}
}

193 
funùiÚ
 
	$_ãtch_objeù
()

195  
	`cubrid_ãtch_objeù
(
$this
->
»suÉ_id
);

196 
	}
}

	@system/database/drivers/cubrid/cubrid_utility.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_cubrid_ut™y
 
ex‹nds
 
	mCI_DB_ut™y
 {

33 
funùiÚ
 
	$_li¡_d©aba£s
()

40 ià(
$this
->
cÚn_id
)

42  "SELECT '" . 
$this
->
d©aba£
 . "'";

46  
FALSE
;

62 
funùiÚ
 
	$_İtimize_bË
(
$bË
)

67  
FALSE
;

68 
	}
}

82 
funùiÚ
 
	$_»·œ_bË
(
$bË
)

87  
FALSE
;

88 
	}
}

98 
funùiÚ
 
_backup
(
$·¿ms
 = 
	$¬¿y
())

103  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

104 
	}
}

	@system/database/drivers/mssql/mssql_driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

31 şas 
	cCI_DB_mssql_driv”
 
ex‹nds
 
	mCI_DB
 {

33 
v¬
 
	m$dbdriv”
 = 'mssql';

36 
v¬
 
	m$_esÿ³_ch¬
 = '';

39 
v¬
 
	m$_like_esÿ³_¡r
 = " ESCAPE '%s' ";

40 
v¬
 
	m$_like_esÿ³_chr
 = '!';

47 
v¬
 
	m$_couÁ_¡ršg
 = "SELECT COUNT(*) AS ";

48 
v¬
 
	m$_¿ndom_keywÜd
 = ' ASC';

56 
funùiÚ
 
	$db_cÚÃù
()

58 ià(
$this
->
pÜt
 != '')

60 
$this
->
ho¡Çme
 .ğ','.$this->
pÜt
;

63  @
	`mssql_cÚÃù
(
$this
->
ho¡Çme
, $this->
u£ºame
, $this->
·sswÜd
);

74 
funùiÚ
 
	$db_pcÚÃù
()

76 ià(
$this
->
pÜt
 != '')

78 
$this
->
ho¡Çme
 .ğ','.$this->
pÜt
;

81  @
	`mssql_pcÚÃù
(
$this
->
ho¡Çme
, $this->
u£ºame
, $this->
·sswÜd
);

82 
	}
}

95 
funùiÚ
 
	$»cÚÃù
()

98 
	}
}

108 
funùiÚ
 
	$db_£Ëù
()

112  @
	`mssql_£Ëù_db
('['.
$this
->
d©aba£
.']', $this->
cÚn_id
);

113 
	}
}

125 
funùiÚ
 
	$db_£t_ch¬£t
(
$ch¬£t
, 
$cŞÏtiÚ
)

128  
TRUE
;

129 
	}
}

140 
funùiÚ
 
	$_execu‹
(
$sql
)

142 
$sql
 = 
$this
->
	`_´•_qu”y
($sql);

143  @
	`mssql_qu”y
(
$sql
, 
$this
->
cÚn_id
);

144 
	}
}

157 
funùiÚ
 
	$_´•_qu”y
(
$sql
)

159  
$sql
;

160 
	}
}

170 
funùiÚ
 
	$Œªs_begš
(
$‹¡_mode
 = 
FALSE
)

172 iàĞ! 
$this
->
Œªs_’abËd
)

174  
TRUE
;

178 ià(
$this
->
_Œªs_d•th
 > 0)

180  
TRUE
;

186 
$this
->
_Œªs_çu»
 = (
$‹¡_mode
 ==ğ
TRUE
è? TRUE : 
FALSE
;

188 
$this
->
	`sim¶e_qu”y
('BEGIN TRAN');

189  
TRUE
;

190 
	}
}

200 
funùiÚ
 
	$Œªs_comm™
()

202 iàĞ! 
$this
->
Œªs_’abËd
)

204  
TRUE
;

208 ià(
$this
->
_Œªs_d•th
 > 0)

210  
TRUE
;

213 
$this
->
	`sim¶e_qu”y
('COMMIT TRAN');

214  
TRUE
;

215 
	}
}

225 
funùiÚ
 
	$Œªs_rŞlback
()

227 iàĞ! 
$this
->
Œªs_’abËd
)

229  
TRUE
;

233 ià(
$this
->
_Œªs_d•th
 > 0)

235  
TRUE
;

238 
$this
->
	`sim¶e_qu”y
('ROLLBACK TRAN');

239  
TRUE
;

240 
	}
}

252 
funùiÚ
 
	$esÿ³_¡r
(
$¡r
, 
$like
 = 
FALSE
)

254 ià(
	`is_¬¿y
(
$¡r
))

256 
	`fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

258 
$¡r
[
$key
] = 
$this
->
	`esÿ³_¡r
(
$v®
, 
$like
);

261  
$¡r
;

265 
$¡r
 = 
	`¡r_»¶aû
("'", "''", 
	`»move_švisibË_ch¬aù”s
($str));

268 ià(
$like
 ==ğ
TRUE
)

270 
$¡r
 = 
	`¡r_»¶aû
(

271 
	`¬¿y
(
$this
->
_like_esÿ³_chr
, '%', '_'),

272 
	`¬¿y
(
$this
->
_like_esÿ³_chr
.$this->_like_escape_chr, $this->_like_escape_chr.'%', $this->_like_escape_chr.'_'),

273 
$¡r


277  
$¡r
;

278 
	}
}

288 
funùiÚ
 
	$afãùed_rows
()

290  @
	`mssql_rows_afãùed
(
$this
->
cÚn_id
);

291 
	}
}

303 
funùiÚ
 
	$š£¹_id
()

305 
$v”
 = 
£lf
::
	`_·r£_majÜ_v”siÚ
(
$this
->
	`v”siÚ
());

306 
$sql
 = (
$v”
 >= 8 ? "SELECT SCOPE_IDENTITY() AS†ast_id" : "SELECT @@IDENTITY AS†ast_id");

307 
$qu”y
 = 
$this
->
	`qu”y
(
$sql
);

308 
$row
 = 
$qu”y
->
	`row
();

309  
$row
->
Ï¡_id
;

310 
	}
}

324 
funùiÚ
 
	$_·r£_majÜ_v”siÚ
(
$v”siÚ
)

326 
	`´eg_m©ch
('/([0-9]+)\.([0-9]+)\.([0-9]+)/', 
$v”siÚ
, 
$v”_šfo
);

327  
$v”_šfo
[1];

328 
	}
}

338 
funùiÚ
 
	$_v”siÚ
()

341 
	}
}

355 
funùiÚ
 
couÁ_®l
(
$bË
 = '')

357 ià(
$bË
 == '')

362 
	g$qu”y
 = 
$this
->
qu”y
($this->
_couÁ_¡ršg
 . $this->
_´Ùeù_id’tif›rs
('numrows'è. " FROM " . $this->_´Ùeù_id’tif›rs(
$bË
, 
TRUE
, 
NULL
, 
FALSE
));

364 ià(
	g$qu”y
->
num_rows
() == 0)

369 
	g$row
 = 
$qu”y
->
row
();

370 
	g$this
->
_»£t_£Ëù
();

371  (è
	g$row
->
	gnumrows
;

385 
funùiÚ
 
	$_li¡_bËs
(
$´efix_lim™
 = 
FALSE
)

387 
$sql
 = "SELECT‚ame FROM sysobjects WHEREype = 'U' ORDER BY‚ame";

390 ià(
$´efix_lim™
 !=ğ
FALSE
 
AND
 
$this
->
db´efix
 != '')

393  
FALSE
;

396  
$sql
;

397 
	}
}

410 
funùiÚ
 
_li¡_cŞumns
(
$bË
 = '')

412  "SELECT * FROM INFORMATION_SCHEMA.CŞumn WHERE TABLE_NAME = '".
$bË
."'";

426 
funùiÚ
 
	$_f›ld_d©a
(
$bË
)

428  "SELECT TOP 1 * FROM ".
$bË
;

429 
	}
}

439 
funùiÚ
 
	$_”rÜ_mes§ge
()

441  
	`mssql_g‘_Ï¡_mes§ge
();

442 
	}
}

452 
funùiÚ
 
	$_”rÜ_numb”
()

456 
	}
}

469 
funùiÚ
 
	$_esÿ³_id’tif›rs
(
$™em
)

471 ià(
$this
->
_esÿ³_ch¬
 == '')

473  
$™em
;

476 
	`fÜ—ch
 (
$this
->
_»£rved_id’tif›rs
 
as
 
$id
)

478 ià(
	`¡½os
(
$™em
, '.'.
$id
è!=ğ
FALSE
)

480 
$¡r
 = 
$this
->
_esÿ³_ch¬
. 
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.', 
$™em
);

483  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

487 ià(
	`¡½os
(
$™em
, '.'è!=ğ
FALSE
)

489 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.'.$this->_esÿ³_ch¬, 
$™em
).$this->_escape_char;

493 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
$™em
.$this->_escape_char;

497  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

498 
	}
}

512 
funùiÚ
 
	$_äom_bËs
(
$bËs
)

514 iàĞ! 
	`is_¬¿y
(
$bËs
))

516 
$bËs
 = 
	`¬¿y
($tables);

519  
	`im¶ode
(', ', 
$bËs
);

520 
	}
}

535 
funùiÚ
 
	$_š£¹
(
$bË
, 
$keys
, 
$v®ues
)

537  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES (".im¶ode(', ', 
$v®ues
).")";

538 
	}
}

555 
funùiÚ
 
_upd©e
(
$bË
, 
$v®ues
, 
$wh”e
, 
$Üd”by
 = 
¬¿y
(), 
$lim™
 = 
FALSE
)

557 
fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

559 
$v®¡r
[] = 
$key
." = ".
$v®
;

562 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

564 
	g$Üd”by
 = (
couÁ
(
$Üd”by
è>ğ1)?' ORDER BY '.
im¶ode
(", ", $orderby):'';

566 
	g$sql
 = "UPDATE ".
$bË
." SET ".
im¶ode
(', ', 
$v®¡r
);

568 
	g$sql
 .ğ(
$wh”e
 !ğ'' 
AND
 
couÁ
($wh”eè>=1è? " WHERE ".
im¶ode
(" ", $where) : '';

570 
	g$sql
 .ğ
$Üd”by
.
$lim™
;

572  
	g$sql
;

589 
funùiÚ
 
	$_Œunÿ‹
(
$bË
)

591  "TRUNCATE ".
$bË
;

592 
	}
}

607 
funùiÚ
 
_d–‘e
(
$bË
, 
$wh”e
 = 
¬¿y
(), 
$like
 =‡¼ay(), 
$lim™
 = 
FALSE
)

609 
$cÚd™iÚs
 = '';

611 ià(
couÁ
(
$wh”e
è> 0 
OR
 couÁ(
$like
) > 0)

613 
	g$cÚd™iÚs
 = "\nWHERE ";

614 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$this
->
¬_wh”e
);

616 ià(
couÁ
(
$wh”e
è> 0 && couÁ(
$like
) > 0)

618 
	g$cÚd™iÚs
 .= " AND ";

620 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$like
);

623 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

625  "DELETE FROM ".
	g$bË
.
	g$cÚd™iÚs
.
	g$lim™
;

641 
funùiÚ
 
	$_lim™
(
$sql
, 
$lim™
, 
$off£t
)

643 
$i
 = 
$lim™
 + 
$off£t
;

645  
	`´eg_»¶aû
('/(^\SELECT (DISTINCT)?)/i','\\1 TOP '.
$i
.' ', 
$sql
);

646 
	}
}

657 
funùiÚ
 
	$_şo£
(
$cÚn_id
)

659 @
	`mssql_şo£
(
$cÚn_id
);

660 
	}
}

	@system/database/drivers/mssql/mssql_forge.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_mssql_fÜge
 
ex‹nds
 
	mCI_DB_fÜge
 {

34 
funùiÚ
 
	$_ü—‹_d©aba£
(
$Çme
)

36  "CREATE DATABASE ".
$Çme
;

48 
funùiÚ
 
	$_drİ_d©aba£
(
$Çme
)

50  "DROP DATABASE ".
$Çme
;

51 
	}
}

61 
funùiÚ
 
	$_drİ_bË
(
$bË
)

63  "DROP TABLE ".
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
);

64 
	}
}

79 
funùiÚ
 
	$_ü—‹_bË
(
$bË
, 
$f›lds
, 
$´im¬y_keys
, 
$keys
, 
$if_nÙ_exi¡s
)

81 
$sql
 = 'CREATE TABLE ';

83 ià(
$if_nÙ_exi¡s
 ==ğ
TRUE
)

85 
$sql
 .= 'IF NOT EXISTS ';

88 
$sql
 .ğ
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
)." (";

89 
$cu¼’t_f›ld_couÁ
 = 0;

91 
	`fÜ—ch
 (
$f›lds
 
as
 
$f›ld
=>
$©Œibu‹s
)

96 ià(
	`is_num”ic
(
$f›ld
))

98 
$sql
 .= "\n\t$attributes";

102 
$©Œibu‹s
 = 
	`¬¿y_chªge_key_ÿ£
($©Œibu‹s, 
CASE_UPPER
);

104 
$sql
 .ğ"\n\t".
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$f›ld
);

106 
$sql
 .ğ' '.
$©Œibu‹s
['TYPE'];

108 ià(
	`¬¿y_key_exi¡s
('CONSTRAINT', 
$©Œibu‹s
))

110 
$sql
 .ğ'('.
$©Œibu‹s
['CONSTRAINT'].')';

113 ià(
	`¬¿y_key_exi¡s
('UNSIGNED', 
$©Œibu‹s
è&& $©Œibu‹s['UNSIGNED'] ==ğ
TRUE
)

115 
$sql
 .= ' UNSIGNED';

118 ià(
	`¬¿y_key_exi¡s
('DEFAULT', 
$©Œibu‹s
))

120 
$sql
 .ğ' DEFAULT \''.
$©Œibu‹s
['DEFAULT'].'\'';

123 ià(
	`¬¿y_key_exi¡s
('NULL', 
$©Œibu‹s
è&& $©Œibu‹s['NULL'] ==ğ
TRUE
)

125 
$sql
 .= ' NULL';

129 
$sql
 .= ' NOT NULL';

132 ià(
	`¬¿y_key_exi¡s
('AUTO_INCREMENT', 
$©Œibu‹s
è&& $©Œibu‹s['AUTO_INCREMENT'] ==ğ
TRUE
)

134 
$sql
 .= ' AUTO_INCREMENT';

139 ià(++
$cu¼’t_f›ld_couÁ
 < 
	`couÁ
(
$f›lds
))

141 
$sql
 .= ',';

145 ià(
	`couÁ
(
$´im¬y_keys
) > 0)

147 
$´im¬y_keys
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($primary_keys);

148 
$sql
 .ğ",\n\tPRIMARY KEY (" . 
	`im¶ode
(', ', 
$´im¬y_keys
) . ")";

151 ià(
	`is_¬¿y
(
$keys
è&& 
	`couÁ
($keys) > 0)

153 
	`fÜ—ch
 (
$keys
 
as
 
$key
)

155 ià(
	`is_¬¿y
(
$key
))

157 
$key
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key);

161 
$key
 = 
	`¬¿y
(
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key));

164 
$sql
 .ğ",\n\tFOREIGN KEY (" . 
	`im¶ode
(', ', 
$key
) . ")";

168 
$sql
 .= "\n)";

170  
$sql
;

171 
	}
}

191 
funùiÚ
 
_®‹r_bË
(
$®‹r_ty³
, 
$bË
, 
$cŞumn_Çme
, 
$cŞumn_defš™iÚ
 = '', 
$deçuÉ_v®ue
 = '', 
$nuÎ
 = '', 
$aá”_f›ld
 = '')

193 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$bË
)." $®‹r_ty³ ".$this->db->_´Ùeù_id’tif›rs(
$cŞumn_Çme
);

196 ià(
	g$®‹r_ty³
 == 'DROP')

198  
$sql
;

201 
	g$sql
 .= " $column_definition";

203 ià(
	g$deçuÉ_v®ue
 != '')

205 
$sql
 .= " DEFAULT \"$default_value\"";

208 ià(
	g$nuÎ
 ==ğ
NULL
)

210 
$sql
 .= ' NULL';

214 
	g$sql
 .= ' NOT NULL';

217 ià(
	g$aá”_f›ld
 != '')

219 
$sql
 .ğ' AFTER ' . 
$this
->
db
->
_´Ùeù_id’tif›rs
(
$aá”_f›ld
);

222  
	g$sql
;

238 
funùiÚ
 
	$_»Çme_bË
(
$bË_Çme
, 
$Ãw_bË_Çme
)

241 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$bË_Çme
)." RENAME TO ".$this->db->_´Ùeù_id’tif›rs(
$Ãw_bË_Çme
);

242  
$sql
;

243 
	}
}

	@system/database/drivers/mssql/mssql_result.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_DB_mssql_»suÉ
 
ex‹nds
 
	mCI_DB_»suÉ
 {

35 
funùiÚ
 
	$num_rows
()

37  @
	`mssql_num_rows
(
$this
->
»suÉ_id
);

48 
funùiÚ
 
	$num_f›lds
()

50  @
	`mssql_num_f›lds
(
$this
->
»suÉ_id
);

51 
	}
}

63 
funùiÚ
 
	$li¡_f›lds
()

65 
$f›ld_Çmes
 = 
	`¬¿y
();

66 
$f›ld
 = 
	`mssql_ãtch_f›ld
(
$this
->
»suÉ_id
))

68 
$f›ld_Çmes
[] = 
$f›ld
->
Çme
;

71  
$f›ld_Çmes
;

72 
	}
}

84 
funùiÚ
 
	$f›ld_d©a
()

86 
$»tv®
 = 
	`¬¿y
();

87 
$f›ld
 = 
	`mssql_ãtch_f›ld
(
$this
->
»suÉ_id
))

89 
$F
 = 
Ãw
 
	`¡dCÏss
();

90 
$F
->
Çme
 = 
$f›ld
->name;

91 
$F
->
ty³
 = 
$f›ld
->type;

92 
$F
->
max_Ëngth
 = 
$f›ld
->max_length;

93 
$F
->
´im¬y_key
 = 0;

94 
$F
-> = '';

96 
$»tv®
[] = 
$F
;

99  
$»tv®
;

100 
	}
}

109 
funùiÚ
 
	$ä“_»suÉ
()

111 ià(
	`is_»sourû
(
$this
->
»suÉ_id
))

113 
	`mssql_ä“_»suÉ
(
$this
->
»suÉ_id
);

114 
$this
->
»suÉ_id
 = 
FALSE
;

116 
	}
}

130 
funùiÚ
 
	$_d©a_£ek
(
$n
 = 0)

132  
	`mssql_d©a_£ek
(
$this
->
»suÉ_id
, 
$n
);

133 
	}
}

145 
funùiÚ
 
	$_ãtch_assoc
()

147  
	`mssql_ãtch_assoc
(
$this
->
»suÉ_id
);

148 
	}
}

160 
funùiÚ
 
	$_ãtch_objeù
()

162  
	`mssql_ãtch_objeù
(
$this
->
»suÉ_id
);

163 
	}
}

	@system/database/drivers/mssql/mssql_utility.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_mssql_ut™y
 
ex‹nds
 
	mCI_DB_ut™y
 {

33 
funùiÚ
 
	$_li¡_d©aba£s
()

49 
funùiÚ
 
	$_İtimize_bË
(
$bË
)

51  
FALSE
;

52 
	}
}

65 
funùiÚ
 
	$_»·œ_bË
(
$bË
)

67  
FALSE
;

68 
	}
}

79 
funùiÚ
 
_backup
(
$·¿ms
 = 
	$¬¿y
())

82  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

83 
	}
}

	@system/database/drivers/mysql/mysql_driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

31 şas 
	cCI_DB_mysql_driv”
 
ex‹nds
 
	mCI_DB
 {

33 
v¬
 
	m$dbdriv”
 = 'mysql';

36 
v¬
 
	m$_esÿ³_ch¬
 = '`';

39 
v¬
 
	m$_like_esÿ³_¡r
 = '';

40 
v¬
 
	m$_like_esÿ³_chr
 = '';

47 
v¬
 
	m$d–‘e_hack
 = 
TRUE
;

54 
v¬
 
	m$_couÁ_¡ršg
 = 'SELECT COUNT(*) AS ';

55 
v¬
 
	m$_¿ndom_keywÜd
 = ' RAND()';

58 
v¬
 
	m$u£_£t_Çmes
;

66 
funùiÚ
 
	$db_cÚÃù
()

68 ià(
$this
->
pÜt
 != '')

70 
$this
->
ho¡Çme
 .ğ':'.$this->
pÜt
;

73  @
	`mysql_cÚÃù
(
$this
->
ho¡Çme
, $this->
u£ºame
, $this->
·sswÜd
, 
TRUE
);

84 
funùiÚ
 
	$db_pcÚÃù
()

86 ià(
$this
->
pÜt
 != '')

88 
$this
->
ho¡Çme
 .ğ':'.$this->
pÜt
;

91  @
	`mysql_pcÚÃù
(
$this
->
ho¡Çme
, $this->
u£ºame
, $this->
·sswÜd
);

92 
	}
}

105 
funùiÚ
 
	$»cÚÃù
()

107 ià(
	`mysql_pšg
(
$this
->
cÚn_id
è==ğ
FALSE
)

109 
$this
->
cÚn_id
 = 
FALSE
;

111 
	}
}

121 
funùiÚ
 
	$db_£Ëù
()

123  @
	`mysql_£Ëù_db
(
$this
->
d©aba£
, $this->
cÚn_id
);

124 
	}
}

136 
funùiÚ
 
	$db_£t_ch¬£t
(
$ch¬£t
, 
$cŞÏtiÚ
)

138 iàĞ! 
	`is£t
(
$this
->
u£_£t_Çmes
))

141 
$this
->
u£_£t_Çmes
 = (
	`v”siÚ_com·»
(
PHP_VERSION
, '5.2.3', '>='è&& v”siÚ_com·»(
	`mysql_g‘_£rv”_šfo
(), '5.0.7', '>=')è? 
FALSE
 : 
TRUE
;

144 ià(
$this
->
u£_£t_Çmes
 ==ğ
TRUE
)

146  @
	`mysql_qu”y
("SET NAMES '".
$this
->
	`esÿ³_¡r
(
$ch¬£t
)."' COLLATE '".$this->esÿ³_¡r(
$cŞÏtiÚ
)."'", $this->
cÚn_id
);

150  @
	`mysql_£t_ch¬£t
(
$ch¬£t
, 
$this
->
cÚn_id
);

152 
	}
}

162 
funùiÚ
 
	$_v”siÚ
()

165 
	}
}

176 
funùiÚ
 
	$_execu‹
(
$sql
)

178 
$sql
 = 
$this
->
	`_´•_qu”y
($sql);

179  @
	`mysql_qu”y
(
$sql
, 
$this
->
cÚn_id
);

180 
	}
}

193 
funùiÚ
 
	$_´•_qu”y
(
$sql
)

197 ià(
$this
->
d–‘e_hack
 ==ğ
TRUE
)

199 ià(
	`´eg_m©ch
('/^\s*DELETE\s+FROM\s+(\S+)\s*$/i', 
$sql
))

201 
$sql
 = 
	`´eg_»¶aû
("/^\s*DELETE\s+FROM\s+(\S+)\s*$/", "DELETE FROM \\1 WHERE 1=1", $sql);

205  
$sql
;

206 
	}
}

216 
funùiÚ
 
	$Œªs_begš
(
$‹¡_mode
 = 
FALSE
)

218 iàĞ! 
$this
->
Œªs_’abËd
)

220  
TRUE
;

224 ià(
$this
->
_Œªs_d•th
 > 0)

226  
TRUE
;

232 
$this
->
_Œªs_çu»
 = (
$‹¡_mode
 ==ğ
TRUE
è? TRUE : 
FALSE
;

234 
$this
->
	`sim¶e_qu”y
('SET AUTOCOMMIT=0');

235 
$this
->
	`sim¶e_qu”y
('START TRANSACTION');

236  
TRUE
;

237 
	}
}

247 
funùiÚ
 
	$Œªs_comm™
()

249 iàĞ! 
$this
->
Œªs_’abËd
)

251  
TRUE
;

255 ià(
$this
->
_Œªs_d•th
 > 0)

257  
TRUE
;

260 
$this
->
	`sim¶e_qu”y
('COMMIT');

261 
$this
->
	`sim¶e_qu”y
('SET AUTOCOMMIT=1');

262  
TRUE
;

263 
	}
}

273 
funùiÚ
 
	$Œªs_rŞlback
()

275 iàĞ! 
$this
->
Œªs_’abËd
)

277  
TRUE
;

281 ià(
$this
->
_Œªs_d•th
 > 0)

283  
TRUE
;

286 
$this
->
	`sim¶e_qu”y
('ROLLBACK');

287 
$this
->
	`sim¶e_qu”y
('SET AUTOCOMMIT=1');

288  
TRUE
;

289 
	}
}

301 
funùiÚ
 
	$esÿ³_¡r
(
$¡r
, 
$like
 = 
FALSE
)

303 ià(
	`is_¬¿y
(
$¡r
))

305 
	`fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

307 
$¡r
[
$key
] = 
$this
->
	`esÿ³_¡r
(
$v®
, 
$like
);

310  
$¡r
;

313 ià(
	`funùiÚ_exi¡s
('mysql_»®_esÿ³_¡ršg'è
AND
 
	`is_»sourû
(
$this
->
cÚn_id
))

315 
$¡r
 = 
	`mysql_»®_esÿ³_¡ršg
($¡r, 
$this
->
cÚn_id
);

317 
	`–£if
 (
	`funùiÚ_exi¡s
('mysql_escape_string'))

319 
$¡r
 = 
	`mysql_esÿ³_¡ršg
($str);

323 
$¡r
 = 
	`add¦ashes
($str);

327 ià(
$like
 ==ğ
TRUE
)

329 
$¡r
 = 
	`¡r_»¶aû
(
	`¬¿y
('%', '_'),‡rray('\\%', '\\_'), $str);

332  
$¡r
;

333 
	}
}

343 
funùiÚ
 
	$afãùed_rows
()

345  @
	`mysql_afãùed_rows
(
$this
->
cÚn_id
);

346 
	}
}

356 
funùiÚ
 
	$š£¹_id
()

358  @
	`mysql_š£¹_id
(
$this
->
cÚn_id
);

359 
	}
}

373 
funùiÚ
 
couÁ_®l
(
$bË
 = '')

375 ià(
$bË
 == '')

380 
	g$qu”y
 = 
$this
->
qu”y
($this->
_couÁ_¡ršg
 . $this->
_´Ùeù_id’tif›rs
('numrows'è. " FROM " . $this->_´Ùeù_id’tif›rs(
$bË
, 
TRUE
, 
NULL
, 
FALSE
));

382 ià(
	g$qu”y
->
num_rows
() == 0)

387 
	g$row
 = 
$qu”y
->
row
();

388 
	g$this
->
_»£t_£Ëù
();

389  (è
	g$row
->
	gnumrows
;

403 
funùiÚ
 
	$_li¡_bËs
(
$´efix_lim™
 = 
FALSE
)

405 
$sql
 = "SHOW TABLES FROM ".
$this
->
_esÿ³_ch¬
.$this->
d©aba£
.$this->_escape_char;

407 ià(
$´efix_lim™
 !=ğ
FALSE
 
AND
 
$this
->
db´efix
 != '')

409 
$sql
 .ğ" LIKE '".
$this
->
	`esÿ³_like_¡r
($this->
db´efix
)."%'";

412  
$sql
;

413 
	}
}

426 
funùiÚ
 
_li¡_cŞumns
(
$bË
 = '')

428  "SHOW COLUMNS FROM ".
$this
->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
);

442 
funùiÚ
 
	$_f›ld_d©a
(
$bË
)

444  "DESCRIBE ".
$bË
;

445 
	}
}

455 
funùiÚ
 
	$_”rÜ_mes§ge
()

457  
	`mysql_”rÜ
(
$this
->
cÚn_id
);

458 
	}
}

468 
funùiÚ
 
	$_”rÜ_numb”
()

470  
	`mysql_”ºo
(
$this
->
cÚn_id
);

471 
	}
}

484 
funùiÚ
 
	$_esÿ³_id’tif›rs
(
$™em
)

486 ià(
$this
->
_esÿ³_ch¬
 == '')

488  
$™em
;

491 
	`fÜ—ch
 (
$this
->
_»£rved_id’tif›rs
 
as
 
$id
)

493 ià(
	`¡½os
(
$™em
, '.'.
$id
è!=ğ
FALSE
)

495 
$¡r
 = 
$this
->
_esÿ³_ch¬
. 
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.', 
$™em
);

498  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

502 ià(
	`¡½os
(
$™em
, '.'è!=ğ
FALSE
)

504 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.'.$this->_esÿ³_ch¬, 
$™em
).$this->_escape_char;

508 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
$™em
.$this->_escape_char;

512  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

513 
	}
}

527 
funùiÚ
 
	$_äom_bËs
(
$bËs
)

529 iàĞ! 
	`is_¬¿y
(
$bËs
))

531 
$bËs
 = 
	`¬¿y
($tables);

534  '('.
	`im¶ode
(', ', 
$bËs
).')';

535 
	}
}

550 
funùiÚ
 
	$_š£¹
(
$bË
, 
$keys
, 
$v®ues
)

552  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES (".im¶ode(', ', 
$v®ues
).")";

553 
	}
}

569 
funùiÚ
 
	$_»¶aû
(
$bË
, 
$keys
, 
$v®ues
)

571  "REPLACE INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES (".im¶ode(', ', 
$v®ues
).")";

572 
	}
}

587 
funùiÚ
 
	$_š£¹_b©ch
(
$bË
, 
$keys
, 
$v®ues
)

589  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES ".im¶ode(', ', 
$v®ues
);

590 
	}
}

608 
funùiÚ
 
_upd©e
(
$bË
, 
$v®ues
, 
$wh”e
, 
$Üd”by
 = 
¬¿y
(), 
$lim™
 = 
FALSE
)

610 
fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

612 
$v®¡r
[] = 
$key
 . ' = ' . 
$v®
;

615 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

617 
	g$Üd”by
 = (
couÁ
(
$Üd”by
è>ğ1)?' ORDER BY '.
im¶ode
(", ", $orderby):'';

619 
	g$sql
 = "UPDATE ".
$bË
." SET ".
im¶ode
(', ', 
$v®¡r
);

621 
	g$sql
 .ğ(
$wh”e
 !ğ'' 
AND
 
couÁ
($wh”eè>=1è? " WHERE ".
im¶ode
(" ", $where) : '';

623 
	g$sql
 .ğ
$Üd”by
.
$lim™
;

625  
	g$sql
;

642 
funùiÚ
 
	$_upd©e_b©ch
(
$bË
, 
$v®ues
, 
$šdex
, 
$wh”e
 = 
NULL
)

644 
$ids
 = 
	`¬¿y
();

645 
$wh”e
 = ($wh”!ğ'' 
AND
 
	`couÁ
($wh”eè>=1è? 
	`im¶ode
(" ", $where).' AND ' : '';

647 
	`fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

649 
$ids
[] = 
$v®
[
$šdex
];

651 
	`fÜ—ch
 (
	`¬¿y_keys
(
$v®
è
as
 
$f›ld
)

653 ià(
$f›ld
 !ğ
$šdex
)

655 
$fš®
[
$f›ld
][] = 'WHEN '.
$šdex
.' = '.
$v®
[$index].' THEN '.$val[$field];

660 
$sql
 = "UPDATE ".
$bË
." SET ";

661 
$ÿ£s
 = '';

663 
	`fÜ—ch
 (
$fš®
 
as
 
$k
 => 
$v
)

665 
$ÿ£s
 .ğ
$k
.' = CASE '."\n";

666 
	`fÜ—ch
 (
$v
 
as
 
$row
)

668 
$ÿ£s
 .ğ
$row
."\n";

671 
$ÿ£s
 .ğ'ELSE '.
$k
.' END, ';

674 
$sql
 .ğ
	`sub¡r
(
$ÿ£s
, 0, -2);

676 
$sql
 .ğ' WHERE '.
$wh”e
.
$šdex
.' IN ('.
	`im¶ode
(',', 
$ids
).')';

678  
$sql
;

679 
	}
}

695 
funùiÚ
 
	$_Œunÿ‹
(
$bË
)

697  "TRUNCATE ".
$bË
;

698 
	}
}

713 
funùiÚ
 
_d–‘e
(
$bË
, 
$wh”e
 = 
¬¿y
(), 
$like
 =‡¼ay(), 
$lim™
 = 
FALSE
)

715 
$cÚd™iÚs
 = '';

717 ià(
couÁ
(
$wh”e
è> 0 
OR
 couÁ(
$like
) > 0)

719 
	g$cÚd™iÚs
 = "\nWHERE ";

720 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$this
->
¬_wh”e
);

722 ià(
couÁ
(
$wh”e
è> 0 && couÁ(
$like
) > 0)

724 
	g$cÚd™iÚs
 .= " AND ";

726 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$like
);

729 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

731  "DELETE FROM ".
	g$bË
.
	g$cÚd™iÚs
.
	g$lim™
;

747 
funùiÚ
 
	$_lim™
(
$sql
, 
$lim™
, 
$off£t
)

749 ià(
$off£t
 == 0)

751 
$off£t
 = '';

755 
$off£t
 .= ", ";

758  
$sql
."LIMIT ".
$off£t
.
$lim™
;

759 
	}
}

770 
funùiÚ
 
	$_şo£
(
$cÚn_id
)

772 @
	`mysql_şo£
(
$cÚn_id
);

773 
	}
}

	@system/database/drivers/mysql/mysql_forge.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_mysql_fÜge
 
ex‹nds
 
	mCI_DB_fÜge
 {

34 
funùiÚ
 
	$_ü—‹_d©aba£
(
$Çme
)

36  "CREATE DATABASE ".
$Çme
;

48 
funùiÚ
 
	$_drİ_d©aba£
(
$Çme
)

50  "DROP DATABASE ".
$Çme
;

51 
	}
}

62 
funùiÚ
 
	$_´oûss_f›lds
(
$f›lds
)

64 
$cu¼’t_f›ld_couÁ
 = 0;

65 
$sql
 = '';

67 
	`fÜ—ch
 (
$f›lds
 
as
 
$f›ld
=>
$©Œibu‹s
)

72 ià(
	`is_num”ic
(
$f›ld
))

74 
$sql
 .= "\n\t$attributes";

78 
$©Œibu‹s
 = 
	`¬¿y_chªge_key_ÿ£
($©Œibu‹s, 
CASE_UPPER
);

80 
$sql
 .ğ"\n\t".
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$f›ld
);

82 ià(
	`¬¿y_key_exi¡s
('NAME', 
$©Œibu‹s
))

84 
$sql
 .ğ' '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$©Œibu‹s
['NAME']).' ';

87 ià(
	`¬¿y_key_exi¡s
('TYPE', 
$©Œibu‹s
))

89 
$sql
 .ğ' '.
$©Œibu‹s
['TYPE'];

91 ià(
	`¬¿y_key_exi¡s
('CONSTRAINT', 
$©Œibu‹s
))

93 
$©Œibu‹s
['TYPE'])

98 
$sql
 .ğ'('.
	`im¶ode
(',', 
$©Œibu‹s
['CONSTRAINT']).')';

103 
$sql
 .ğ'("'.
	`im¶ode
('","', 
$©Œibu‹s
['CONSTRAINT']).'")';

107 
$sql
 .ğ'('.
$©Œibu‹s
['CONSTRAINT'].')';

112 ià(
	`¬¿y_key_exi¡s
('UNSIGNED', 
$©Œibu‹s
è&& $©Œibu‹s['UNSIGNED'] ==ğ
TRUE
)

114 
$sql
 .= ' UNSIGNED';

117 ià(
	`¬¿y_key_exi¡s
('DEFAULT', 
$©Œibu‹s
))

119 
$sql
 .ğ' DEFAULT \''.
$©Œibu‹s
['DEFAULT'].'\'';

122 ià(
	`¬¿y_key_exi¡s
('NULL', 
$©Œibu‹s
è&& $©Œibu‹s['NULL'] ==ğ
TRUE
)

124 
$sql
 .= ' NULL';

128 
$sql
 .= ' NOT NULL';

131 ià(
	`¬¿y_key_exi¡s
('AUTO_INCREMENT', 
$©Œibu‹s
è&& $©Œibu‹s['AUTO_INCREMENT'] ==ğ
TRUE
)

133 
$sql
 .= ' AUTO_INCREMENT';

138 ià(++
$cu¼’t_f›ld_couÁ
 < 
	`couÁ
(
$f›lds
))

140 
$sql
 .= ',';

144  
$sql
;

145 
	}
}

160 
funùiÚ
 
	$_ü—‹_bË
(
$bË
, 
$f›lds
, 
$´im¬y_keys
, 
$keys
, 
$if_nÙ_exi¡s
)

162 
$sql
 = 'CREATE TABLE ';

164 ià(
$if_nÙ_exi¡s
 ==ğ
TRUE
)

166 
$sql
 .= 'IF NOT EXISTS ';

169 
$sql
 .ğ
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
)." (";

171 
$sql
 .ğ
$this
->
	`_´oûss_f›lds
(
$f›lds
);

173 ià(
	`couÁ
(
$´im¬y_keys
) > 0)

175 
$key_Çme
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
	`im¶ode
('_', 
$´im¬y_keys
));

176 
$´im¬y_keys
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($primary_keys);

177 
$sql
 .ğ",\n\tPRIMARY KEY ".
$key_Çme
." (" . 
	`im¶ode
(', ', 
$´im¬y_keys
) . ")";

180 ià(
	`is_¬¿y
(
$keys
è&& 
	`couÁ
($keys) > 0)

182 
	`fÜ—ch
 (
$keys
 
as
 
$key
)

184 ià(
	`is_¬¿y
(
$key
))

186 
$key_Çme
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
	`im¶ode
('_', 
$key
));

187 
$key
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key);

191 
$key_Çme
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$key
);

192 
$key
 = 
	`¬¿y
(
$key_Çme
);

195 
$sql
 .ğ",\n\tKEY {$key_Çme} (" . 
	`im¶ode
(', ', 
$key
) . ")";

199 
$sql
 .= "\n) DEFAULT CHARACTER SET {$this->db->char_set} COLLATE {$this->db->dbcollat};";

201  
$sql
;

202 
	}
}

212 
funùiÚ
 
	$_drİ_bË
(
$bË
)

214  "DROP TABLE IF EXISTS ".
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
);

215 
	}
}

232 
funùiÚ
 
_®‹r_bË
(
$®‹r_ty³
, 
$bË
, 
$f›lds
, 
$aá”_f›ld
 = '')

234 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$bË
)." $alter_type ";

237 ià(
	g$®‹r_ty³
 == 'DROP')

239  
$sql
.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$f›lds
);

242 
	g$sql
 .ğ
$this
->
_´oûss_f›lds
(
$f›lds
);

244 ià(
	g$aá”_f›ld
 != '')

246 
$sql
 .ğ' AFTER ' . 
$this
->
db
->
_´Ùeù_id’tif›rs
(
$aá”_f›ld
);

249  
	g$sql
;

264 
funùiÚ
 
	$_»Çme_bË
(
$bË_Çme
, 
$Ãw_bË_Çme
)

266 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$bË_Çme
)." RENAME TO ".$this->db->_´Ùeù_id’tif›rs(
$Ãw_bË_Çme
);

267  
$sql
;

268 
	}
}

	@system/database/drivers/mysql/mysql_result.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_DB_mysql_»suÉ
 
ex‹nds
 
	mCI_DB_»suÉ
 {

35 
funùiÚ
 
	$num_rows
()

37  @
	`mysql_num_rows
(
$this
->
»suÉ_id
);

48 
funùiÚ
 
	$num_f›lds
()

50  @
	`mysql_num_f›lds
(
$this
->
»suÉ_id
);

51 
	}
}

63 
funùiÚ
 
	$li¡_f›lds
()

65 
$f›ld_Çmes
 = 
	`¬¿y
();

66 
$f›ld
 = 
	`mysql_ãtch_f›ld
(
$this
->
»suÉ_id
))

68 
$f›ld_Çmes
[] = 
$f›ld
->
Çme
;

71  
$f›ld_Çmes
;

72 
	}
}

84 
funùiÚ
 
	$f›ld_d©a
()

86 
$»tv®
 = 
	`¬¿y
();

87 
$f›ld
 = 
	`mysql_ãtch_objeù
(
$this
->
»suÉ_id
))

89 
	`´eg_m©ch
('/([a-zA-Z]+)(\(\d+\))?/', 
$f›ld
->
Ty³
, 
$m©ches
);

91 
$ty³
 = (
	`¬¿y_key_exi¡s
(1, 
$m©ches
)è? $m©ches[1] : 
NULL
;

92 
$Ëngth
 = (
	`¬¿y_key_exi¡s
(2, 
$m©ches
)è? 
	`´eg_»¶aû
('/[^\d]/', '', $m©ches[2]è: 
NULL
;

94 
$F
 = 
Ãw
 
	`¡dCÏss
();

95 
$F
->
Çme
 = 
$f›ld
->
F›ld
;

96 
$F
->
ty³
 = 
$ty³
;

97 
$F
-> = 
$f›ld
->
DeçuÉ
;

98 
$F
->
max_Ëngth
 = 
$Ëngth
;

99 
$F
->
´im¬y_key
 = ( 
$f›ld
->
Key
 == 'PRI' ? 1 : 0 );

101 
$»tv®
[] = 
$F
;

104  
$»tv®
;

105 
	}
}

114 
funùiÚ
 
	$ä“_»suÉ
()

116 ià(
	`is_»sourû
(
$this
->
»suÉ_id
))

118 
	`mysql_ä“_»suÉ
(
$this
->
»suÉ_id
);

119 
$this
->
»suÉ_id
 = 
FALSE
;

121 
	}
}

135 
funùiÚ
 
	$_d©a_£ek
(
$n
 = 0)

137  
	`mysql_d©a_£ek
(
$this
->
»suÉ_id
, 
$n
);

138 
	}
}

150 
funùiÚ
 
	$_ãtch_assoc
()

152  
	`mysql_ãtch_assoc
(
$this
->
»suÉ_id
);

153 
	}
}

165 
funùiÚ
 
	$_ãtch_objeù
()

167  
	`mysql_ãtch_objeù
(
$this
->
»suÉ_id
);

168 
	}
}

	@system/database/drivers/mysql/mysql_utility.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_mysql_ut™y
 
ex‹nds
 
	mCI_DB_ut™y
 {

33 
funùiÚ
 
	$_li¡_d©aba£s
()

49 
funùiÚ
 
	$_İtimize_bË
(
$bË
)

51  "OPTIMIZE TABLE ".
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
);

52 
	}
}

65 
funùiÚ
 
	$_»·œ_bË
(
$bË
)

67  "REPAIR TABLE ".
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
);

68 
	}
}

78 
funùiÚ
 
_backup
(
$·¿ms
 = 
	$¬¿y
())

80 ià(
	`couÁ
(
$·¿ms
) == 0)

82  
FALSE
;

86 
	`exŒaù
(
$·¿ms
);

89 
$ouut
 = '';

90 
	`fÜ—ch
 ((
¬¿y
)
$bËs
 
as
 
$bË
)

93 ià(
	`š_¬¿y
(
$bË
, (
¬¿y
)
$ignÜe
, 
TRUE
))

99 
$qu”y
 = 
$this
->
db
->
	`qu”y
("SHOW CREATE TABLE `".$this->db->
d©aba£
.'`.`'.
$bË
.'`');

102 ià(
$qu”y
 ==ğ
FALSE
)

108 
$ouut
 .ğ'#'.
$Ãwlše
.'# TABLE STRUCTURE FOR: '.
$bË
.$newline.'#'.$newline.$newline;

110 ià(
$add_drİ
 =ğ
TRUE
)

112 
$ouut
 .ğ'DROP TABLE IF EXISTS '.
$bË
.';'.
$Ãwlše
.$newline;

115 
$i
 = 0;

116 
$»suÉ
 = 
$qu”y
->
	`»suÉ_¬¿y
();

117 
	`fÜ—ch
 (
$»suÉ
[0] 
as
 
$v®
)

119 ià(
$i
++ % 2)

121 
$ouut
 .ğ
$v®
.';'.
$Ãwlše
.$newline;

126 ià(
$add_š£¹
 =ğ
FALSE
)

132 
$qu”y
 = 
$this
->
db
->
	`qu”y
("SELECT * FROM $table");

134 ià(
$qu”y
->
	`num_rows
() == 0)

143 
$i
 = 0;

144 
$f›ld_¡r
 = '';

145 
$is_št
 = 
	`¬¿y
();

146 
$f›ld
 = 
	`mysql_ãtch_f›ld
(
$qu”y
->
»suÉ_id
))

149 
$is_št
[
$i
] = (
	`š_¬¿y
(

150 
	`¡¹Şow”
(
	`mysql_f›ld_ty³
(
$qu”y
->
»suÉ_id
, 
$i
)),

151 
	`¬¿y
('tinyint', 'smallint', 'mediumint', 'int', 'bigint'),

152 
TRUE
)

153 è? 
TRUE
 : 
FALSE
;

156 
$f›ld_¡r
 .ğ'`'.
$f›ld
->
Çme
.'`, ';

157 
$i
++;

161 
$f›ld_¡r
 = 
	`´eg_»¶aû
( "/, $/" , "" , $field_str);

165 
	`fÜ—ch
 (
$qu”y
->
	`»suÉ_¬¿y
(è
as
 
$row
)

167 
$v®_¡r
 = '';

169 
$i
 = 0;

170 
	`fÜ—ch
 (
$row
 
as
 
$v
)

173 ià(
$v
 ==ğ
NULL
)

175 
$v®_¡r
 .= 'NULL';

180 ià(
$is_št
[
$i
] =ğ
FALSE
)

182 
$v®_¡r
 .ğ
$this
->
db
->
	`esÿ³
(
$v
);

186 
$v®_¡r
 .ğ
$v
;

191 
$v®_¡r
 .= ', ';

192 
$i
++;

196 
$v®_¡r
 = 
	`´eg_»¶aû
( "/, $/" , "" , $val_str);

199 
$ouut
 .ğ'INSERT INTO '.
$bË
.' ('.
$f›ld_¡r
.'èVALUES ('.
$v®_¡r
.');'.
$Ãwlše
;

202 
$ouut
 .ğ
$Ãwlše
.$newline;

205  
$ouut
;

206 
	}
}

	@system/database/drivers/mysqli/mysqli_driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

31 şas 
	cCI_DB_mysqli_driv”
 
ex‹nds
 
	mCI_DB
 {

33 
v¬
 
	m$dbdriv”
 = 'mysqli';

36 
v¬
 
	m$_esÿ³_ch¬
 = '`';

39 
v¬
 
	m$_like_esÿ³_¡r
 = '';

40 
v¬
 
	m$_like_esÿ³_chr
 = '';

47 
v¬
 
	m$_couÁ_¡ršg
 = "SELECT COUNT(*) AS ";

48 
v¬
 
	m$_¿ndom_keywÜd
 = ' RAND()';

55 
v¬
 
	m$d–‘e_hack
 = 
TRUE
;

58 
v¬
 
	m$u£_£t_Çmes
;

68 
funùiÚ
 
	$db_cÚÃù
()

70 ià(
$this
->
pÜt
 != '')

72  @
	`mysqli_cÚÃù
(
$this
->
ho¡Çme
, $this->
u£ºame
, $this->
·sswÜd
, $this->
d©aba£
, $this->
pÜt
);

76  @
	`mysqli_cÚÃù
(
$this
->
ho¡Çme
, $this->
u£ºame
, $this->
·sswÜd
, $this->
d©aba£
);

89 
funùiÚ
 
	$db_pcÚÃù
()

91  
$this
->
	`db_cÚÃù
();

92 
	}
}

105 
funùiÚ
 
	$»cÚÃù
()

107 ià(
	`mysqli_pšg
(
$this
->
cÚn_id
è==ğ
FALSE
)

109 
$this
->
cÚn_id
 = 
FALSE
;

111 
	}
}

121 
funùiÚ
 
	$db_£Ëù
()

123  @
	`mysqli_£Ëù_db
(
$this
->
cÚn_id
, $this->
d©aba£
);

124 
	}
}

136 
funùiÚ
 
	$_db_£t_ch¬£t
(
$ch¬£t
, 
$cŞÏtiÚ
)

138 iàĞ! 
	`is£t
(
$this
->
u£_£t_Çmes
))

141 
$this
->
u£_£t_Çmes
 = (
	`v”siÚ_com·»
(
	`mysqli_g‘_£rv”_šfo
($this->
cÚn_id
), '5.0.7', '>=')è? 
FALSE
 : 
TRUE
;

144 ià(
$this
->
u£_£t_Çmes
 ==ğ
TRUE
)

146  @
	`mysqli_qu”y
(
$this
->
cÚn_id
, "SET NAMES '".$this->
	`esÿ³_¡r
(
$ch¬£t
)."' COLLATE '".$this->esÿ³_¡r(
$cŞÏtiÚ
)."'");

150  @
	`mysqli_£t_ch¬£t
(
$this
->
cÚn_id
, 
$ch¬£t
);

152 
	}
}

162 
funùiÚ
 
	$_v”siÚ
()

165 
	}
}

176 
funùiÚ
 
	$_execu‹
(
$sql
)

178 
$sql
 = 
$this
->
	`_´•_qu”y
($sql);

179 
$»suÉ
 = @
	`mysqli_qu”y
(
$this
->
cÚn_id
, 
$sql
);

180  
$»suÉ
;

181 
	}
}

194 
funùiÚ
 
	$_´•_qu”y
(
$sql
)

198 ià(
$this
->
d–‘e_hack
 ==ğ
TRUE
)

200 ià(
	`´eg_m©ch
('/^\s*DELETE\s+FROM\s+(\S+)\s*$/i', 
$sql
))

202 
$sql
 = 
	`´eg_»¶aû
("/^\s*DELETE\s+FROM\s+(\S+)\s*$/", "DELETE FROM \\1 WHERE 1=1", $sql);

206  
$sql
;

207 
	}
}

217 
funùiÚ
 
	$Œªs_begš
(
$‹¡_mode
 = 
FALSE
)

219 iàĞ! 
$this
->
Œªs_’abËd
)

221  
TRUE
;

225 ià(
$this
->
_Œªs_d•th
 > 0)

227  
TRUE
;

233 
$this
->
_Œªs_çu»
 = (
$‹¡_mode
 ==ğ
TRUE
è? TRUE : 
FALSE
;

235 
$this
->
	`sim¶e_qu”y
('SET AUTOCOMMIT=0');

236 
$this
->
	`sim¶e_qu”y
('START TRANSACTION');

237  
TRUE
;

238 
	}
}

248 
funùiÚ
 
	$Œªs_comm™
()

250 iàĞ! 
$this
->
Œªs_’abËd
)

252  
TRUE
;

256 ià(
$this
->
_Œªs_d•th
 > 0)

258  
TRUE
;

261 
$this
->
	`sim¶e_qu”y
('COMMIT');

262 
$this
->
	`sim¶e_qu”y
('SET AUTOCOMMIT=1');

263  
TRUE
;

264 
	}
}

274 
funùiÚ
 
	$Œªs_rŞlback
()

276 iàĞ! 
$this
->
Œªs_’abËd
)

278  
TRUE
;

282 ià(
$this
->
_Œªs_d•th
 > 0)

284  
TRUE
;

287 
$this
->
	`sim¶e_qu”y
('ROLLBACK');

288 
$this
->
	`sim¶e_qu”y
('SET AUTOCOMMIT=1');

289  
TRUE
;

290 
	}
}

302 
funùiÚ
 
	$esÿ³_¡r
(
$¡r
, 
$like
 = 
FALSE
)

304 ià(
	`is_¬¿y
(
$¡r
))

306 
	`fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

308 
$¡r
[
$key
] = 
$this
->
	`esÿ³_¡r
(
$v®
, 
$like
);

311  
$¡r
;

314 ià(
	`funùiÚ_exi¡s
('mysqli_»®_esÿ³_¡ršg'è
AND
 
	`is_objeù
(
$this
->
cÚn_id
))

316 
$¡r
 = 
	`mysqli_»®_esÿ³_¡ršg
(
$this
->
cÚn_id
, $str);

318 
	`–£if
 (
	`funùiÚ_exi¡s
('mysql_escape_string'))

320 
$¡r
 = 
	`mysql_esÿ³_¡ršg
($str);

324 
$¡r
 = 
	`add¦ashes
($str);

328 ià(
$like
 ==ğ
TRUE
)

330 
$¡r
 = 
	`¡r_»¶aû
(
	`¬¿y
('%', '_'),‡rray('\\%', '\\_'), $str);

333  
$¡r
;

334 
	}
}

344 
funùiÚ
 
	$afãùed_rows
()

346  @
	`mysqli_afãùed_rows
(
$this
->
cÚn_id
);

347 
	}
}

357 
funùiÚ
 
	$š£¹_id
()

359  @
	`mysqli_š£¹_id
(
$this
->
cÚn_id
);

360 
	}
}

374 
funùiÚ
 
couÁ_®l
(
$bË
 = '')

376 ià(
$bË
 == '')

381 
	g$qu”y
 = 
$this
->
qu”y
($this->
_couÁ_¡ršg
 . $this->
_´Ùeù_id’tif›rs
('numrows'è. " FROM " . $this->_´Ùeù_id’tif›rs(
$bË
, 
TRUE
, 
NULL
, 
FALSE
));

383 ià(
	g$qu”y
->
num_rows
() == 0)

388 
	g$row
 = 
$qu”y
->
row
();

389 
	g$this
->
_»£t_£Ëù
();

390  (è
	g$row
->
	gnumrows
;

404 
funùiÚ
 
	$_li¡_bËs
(
$´efix_lim™
 = 
FALSE
)

406 
$sql
 = "SHOW TABLES FROM ".
$this
->
_esÿ³_ch¬
.$this->
d©aba£
.$this->_escape_char;

408 ià(
$´efix_lim™
 !=ğ
FALSE
 
AND
 
$this
->
db´efix
 != '')

410 
$sql
 .ğ" LIKE '".
$this
->
	`esÿ³_like_¡r
($this->
db´efix
)."%'";

413  
$sql
;

414 
	}
}

427 
funùiÚ
 
_li¡_cŞumns
(
$bË
 = '')

429  "SHOW COLUMNS FROM ".
$this
->
_´Ùeù_id’tif›rs
(
$bË
, 
TRUE
, 
NULL
, 
FALSE
);

443 
funùiÚ
 
	$_f›ld_d©a
(
$bË
)

445  "DESCRIBE ".
$bË
;

446 
	}
}

456 
funùiÚ
 
	$_”rÜ_mes§ge
()

458  
	`mysqli_”rÜ
(
$this
->
cÚn_id
);

459 
	}
}

469 
funùiÚ
 
	$_”rÜ_numb”
()

471  
	`mysqli_”ºo
(
$this
->
cÚn_id
);

472 
	}
}

485 
funùiÚ
 
	$_esÿ³_id’tif›rs
(
$™em
)

487 ià(
$this
->
_esÿ³_ch¬
 == '')

489  
$™em
;

492 
	`fÜ—ch
 (
$this
->
_»£rved_id’tif›rs
 
as
 
$id
)

494 ià(
	`¡½os
(
$™em
, '.'.
$id
è!=ğ
FALSE
)

496 
$¡r
 = 
$this
->
_esÿ³_ch¬
. 
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.', 
$™em
);

499  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

503 ià(
	`¡½os
(
$™em
, '.'è!=ğ
FALSE
)

505 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.'.$this->_esÿ³_ch¬, 
$™em
).$this->_escape_char;

509 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
$™em
.$this->_escape_char;

513  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

514 
	}
}

528 
funùiÚ
 
	$_äom_bËs
(
$bËs
)

530 iàĞ! 
	`is_¬¿y
(
$bËs
))

532 
$bËs
 = 
	`¬¿y
($tables);

535  '('.
	`im¶ode
(', ', 
$bËs
).')';

536 
	}
}

551 
funùiÚ
 
	$_š£¹
(
$bË
, 
$keys
, 
$v®ues
)

553  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES (".im¶ode(', ', 
$v®ues
).")";

554 
	}
}

569 
funùiÚ
 
	$_š£¹_b©ch
(
$bË
, 
$keys
, 
$v®ues
)

571  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES ".im¶ode(', ', 
$v®ues
);

572 
	}
}

588 
funùiÚ
 
	$_»¶aû
(
$bË
, 
$keys
, 
$v®ues
)

590  "REPLACE INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES (".im¶ode(', ', 
$v®ues
).")";

591 
	}
}

608 
funùiÚ
 
_upd©e
(
$bË
, 
$v®ues
, 
$wh”e
, 
$Üd”by
 = 
¬¿y
(), 
$lim™
 = 
FALSE
)

610 
fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

612 
$v®¡r
[] = 
$key
." = ".
$v®
;

615 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

617 
	g$Üd”by
 = (
couÁ
(
$Üd”by
è>ğ1)?' ORDER BY '.
im¶ode
(", ", $orderby):'';

619 
	g$sql
 = "UPDATE ".
$bË
." SET ".
im¶ode
(', ', 
$v®¡r
);

621 
	g$sql
 .ğ(
$wh”e
 !ğ'' 
AND
 
couÁ
($wh”eè>=1è? " WHERE ".
im¶ode
(" ", $where) : '';

623 
	g$sql
 .ğ
$Üd”by
.
$lim™
;

625  
	g$sql
;

641 
funùiÚ
 
	$_upd©e_b©ch
(
$bË
, 
$v®ues
, 
$šdex
, 
$wh”e
 = 
NULL
)

643 
$ids
 = 
	`¬¿y
();

644 
$wh”e
 = ($wh”!ğ'' 
AND
 
	`couÁ
($wh”eè>=1è? 
	`im¶ode
(" ", $where).' AND ' : '';

646 
	`fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

648 
$ids
[] = 
$v®
[
$šdex
];

650 
	`fÜ—ch
 (
	`¬¿y_keys
(
$v®
è
as
 
$f›ld
)

652 ià(
$f›ld
 !ğ
$šdex
)

654 
$fš®
[
$f›ld
][] = 'WHEN '.
$šdex
.' = '.
$v®
[$index].' THEN '.$val[$field];

659 
$sql
 = "UPDATE ".
$bË
." SET ";

660 
$ÿ£s
 = '';

662 
	`fÜ—ch
 (
$fš®
 
as
 
$k
 => 
$v
)

664 
$ÿ£s
 .ğ
$k
.' = CASE '."\n";

665 
	`fÜ—ch
 (
$v
 
as
 
$row
)

667 
$ÿ£s
 .ğ
$row
."\n";

670 
$ÿ£s
 .ğ'ELSE '.
$k
.' END, ';

673 
$sql
 .ğ
	`sub¡r
(
$ÿ£s
, 0, -2);

675 
$sql
 .ğ' WHERE '.
$wh”e
.
$šdex
.' IN ('.
	`im¶ode
(',', 
$ids
).')';

677  
$sql
;

678 
	}
}

693 
funùiÚ
 
	$_Œunÿ‹
(
$bË
)

695  "TRUNCATE ".
$bË
;

696 
	}
}

711 
funùiÚ
 
_d–‘e
(
$bË
, 
$wh”e
 = 
¬¿y
(), 
$like
 =‡¼ay(), 
$lim™
 = 
FALSE
)

713 
$cÚd™iÚs
 = '';

715 ià(
couÁ
(
$wh”e
è> 0 
OR
 couÁ(
$like
) > 0)

717 
	g$cÚd™iÚs
 = "\nWHERE ";

718 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$this
->
¬_wh”e
);

720 ià(
couÁ
(
$wh”e
è> 0 && couÁ(
$like
) > 0)

722 
	g$cÚd™iÚs
 .= " AND ";

724 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$like
);

727 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

729  "DELETE FROM ".
	g$bË
.
	g$cÚd™iÚs
.
	g$lim™
;

745 
funùiÚ
 
	$_lim™
(
$sql
, 
$lim™
, 
$off£t
)

747 
$sql
 .ğ"LIMIT ".
$lim™
;

749 ià(
$off£t
 > 0)

751 
$sql
 .ğ" OFFSET ".
$off£t
;

754  
$sql
;

755 
	}
}

766 
funùiÚ
 
	$_şo£
(
$cÚn_id
)

768 @
	`mysqli_şo£
(
$cÚn_id
);

769 
	}
}

	@system/database/drivers/mysqli/mysqli_forge.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_mysqli_fÜge
 
ex‹nds
 
	mCI_DB_fÜge
 {

34 
funùiÚ
 
	$_ü—‹_d©aba£
(
$Çme
)

36  "CREATE DATABASE ".
$Çme
;

48 
funùiÚ
 
	$_drİ_d©aba£
(
$Çme
)

50  "DROP DATABASE ".
$Çme
;

51 
	}
}

62 
funùiÚ
 
	$_´oûss_f›lds
(
$f›lds
)

64 
$cu¼’t_f›ld_couÁ
 = 0;

65 
$sql
 = '';

67 
	`fÜ—ch
 (
$f›lds
 
as
 
$f›ld
=>
$©Œibu‹s
)

72 ià(
	`is_num”ic
(
$f›ld
))

74 
$sql
 .= "\n\t$attributes";

78 
$©Œibu‹s
 = 
	`¬¿y_chªge_key_ÿ£
($©Œibu‹s, 
CASE_UPPER
);

80 
$sql
 .ğ"\n\t".
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$f›ld
);

82 ià(
	`¬¿y_key_exi¡s
('NAME', 
$©Œibu‹s
))

84 
$sql
 .ğ' '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$©Œibu‹s
['NAME']).' ';

87 ià(
	`¬¿y_key_exi¡s
('TYPE', 
$©Œibu‹s
))

89 
$sql
 .ğ' '.
$©Œibu‹s
['TYPE'];

92 ià(
	`¬¿y_key_exi¡s
('CONSTRAINT', 
$©Œibu‹s
))

94 
$sql
 .ğ'('.
$©Œibu‹s
['CONSTRAINT'].')';

97 ià(
	`¬¿y_key_exi¡s
('UNSIGNED', 
$©Œibu‹s
è&& $©Œibu‹s['UNSIGNED'] ==ğ
TRUE
)

99 
$sql
 .= ' UNSIGNED';

102 ià(
	`¬¿y_key_exi¡s
('DEFAULT', 
$©Œibu‹s
))

104 
$sql
 .ğ' DEFAULT \''.
$©Œibu‹s
['DEFAULT'].'\'';

107 ià(
	`¬¿y_key_exi¡s
('NULL', 
$©Œibu‹s
è&& $©Œibu‹s['NULL'] ==ğ
TRUE
)

109 
$sql
 .= ' NULL';

113 
$sql
 .= ' NOT NULL';

116 ià(
	`¬¿y_key_exi¡s
('AUTO_INCREMENT', 
$©Œibu‹s
è&& $©Œibu‹s['AUTO_INCREMENT'] ==ğ
TRUE
)

118 
$sql
 .= ' AUTO_INCREMENT';

123 ià(++
$cu¼’t_f›ld_couÁ
 < 
	`couÁ
(
$f›lds
))

125 
$sql
 .= ',';

129  
$sql
;

130 
	}
}

145 
funùiÚ
 
	$_ü—‹_bË
(
$bË
, 
$f›lds
, 
$´im¬y_keys
, 
$keys
, 
$if_nÙ_exi¡s
)

147 
$sql
 = 'CREATE TABLE ';

149 ià(
$if_nÙ_exi¡s
 ==ğ
TRUE
)

151 
$sql
 .= 'IF NOT EXISTS ';

154 
$sql
 .ğ
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
)." (";

156 
$sql
 .ğ
$this
->
	`_´oûss_f›lds
(
$f›lds
);

158 ià(
	`couÁ
(
$´im¬y_keys
) > 0)

160 
$key_Çme
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
	`im¶ode
('_', 
$´im¬y_keys
));

161 
$´im¬y_keys
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($primary_keys);

162 
$sql
 .ğ",\n\tPRIMARY KEY ".
$key_Çme
." (" . 
	`im¶ode
(', ', 
$´im¬y_keys
) . ")";

165 ià(
	`is_¬¿y
(
$keys
è&& 
	`couÁ
($keys) > 0)

167 
	`fÜ—ch
 (
$keys
 
as
 
$key
)

169 ià(
	`is_¬¿y
(
$key
))

171 
$key_Çme
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
	`im¶ode
('_', 
$key
));

172 
$key
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key);

176 
$key_Çme
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$key
);

177 
$key
 = 
	`¬¿y
(
$key_Çme
);

180 
$sql
 .ğ",\n\tKEY {$key_Çme} (" . 
	`im¶ode
(', ', 
$key
) . ")";

184 
$sql
 .= "\n) DEFAULT CHARACTER SET {$this->db->char_set} COLLATE {$this->db->dbcollat};";

186  
$sql
;

187 
	}
}

197 
funùiÚ
 
	$_drİ_bË
(
$bË
)

199  "DROP TABLE IF EXISTS ".
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
);

200 
	}
}

217 
funùiÚ
 
_®‹r_bË
(
$®‹r_ty³
, 
$bË
, 
$f›lds
, 
$aá”_f›ld
 = '')

219 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$bË
)." $alter_type ";

222 ià(
	g$®‹r_ty³
 == 'DROP')

224  
$sql
.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$f›lds
);

227 
	g$sql
 .ğ
$this
->
_´oûss_f›lds
(
$f›lds
);

229 ià(
	g$aá”_f›ld
 != '')

231 
$sql
 .ğ' AFTER ' . 
$this
->
db
->
_´Ùeù_id’tif›rs
(
$aá”_f›ld
);

234  
	g$sql
;

249 
funùiÚ
 
	$_»Çme_bË
(
$bË_Çme
, 
$Ãw_bË_Çme
)

251 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$bË_Çme
)." RENAME TO ".$this->db->_´Ùeù_id’tif›rs(
$Ãw_bË_Çme
);

252  
$sql
;

253 
	}
}

	@system/database/drivers/mysqli/mysqli_result.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_DB_mysqli_»suÉ
 
ex‹nds
 
	mCI_DB_»suÉ
 {

35 
funùiÚ
 
	$num_rows
()

37  @
	`mysqli_num_rows
(
$this
->
»suÉ_id
);

48 
funùiÚ
 
	$num_f›lds
()

50  @
	`mysqli_num_f›lds
(
$this
->
»suÉ_id
);

51 
	}
}

63 
funùiÚ
 
	$li¡_f›lds
()

65 
$f›ld_Çmes
 = 
	`¬¿y
();

66 
$f›ld
 = 
	`mysqli_ãtch_f›ld
(
$this
->
»suÉ_id
))

68 
$f›ld_Çmes
[] = 
$f›ld
->
Çme
;

71  
$f›ld_Çmes
;

72 
	}
}

84 
funùiÚ
 
	$f›ld_d©a
()

86 
$»tv®
 = 
	`¬¿y
();

87 
$f›ld
 = 
	`mysqli_ãtch_objeù
(
$this
->
»suÉ_id
))

89 
	`´eg_m©ch
('/([a-zA-Z]+)(\(\d+\))?/', 
$f›ld
->
Ty³
, 
$m©ches
);

91 
$ty³
 = (
	`¬¿y_key_exi¡s
(1, 
$m©ches
)è? $m©ches[1] : 
NULL
;

92 
$Ëngth
 = (
	`¬¿y_key_exi¡s
(2, 
$m©ches
)è? 
	`´eg_»¶aû
('/[^\d]/', '', $m©ches[2]è: 
NULL
;

94 
$F
 = 
Ãw
 
	`¡dCÏss
();

95 
$F
->
Çme
 = 
$f›ld
->
F›ld
;

96 
$F
->
ty³
 = 
$ty³
;

97 
$F
-> = 
$f›ld
->
DeçuÉ
;

98 
$F
->
max_Ëngth
 = 
$Ëngth
;

99 
$F
->
´im¬y_key
 = ( 
$f›ld
->
Key
 == 'PRI' ? 1 : 0 );

101 
$»tv®
[] = 
$F
;

104  
$»tv®
;

105 
	}
}

114 
funùiÚ
 
	$ä“_»suÉ
()

116 ià(
	`is_objeù
(
$this
->
»suÉ_id
))

118 
	`mysqli_ä“_»suÉ
(
$this
->
»suÉ_id
);

119 
$this
->
»suÉ_id
 = 
FALSE
;

121 
	}
}

135 
funùiÚ
 
	$_d©a_£ek
(
$n
 = 0)

137  
	`mysqli_d©a_£ek
(
$this
->
»suÉ_id
, 
$n
);

138 
	}
}

150 
funùiÚ
 
	$_ãtch_assoc
()

152  
	`mysqli_ãtch_assoc
(
$this
->
»suÉ_id
);

153 
	}
}

165 
funùiÚ
 
	$_ãtch_objeù
()

167  
	`mysqli_ãtch_objeù
(
$this
->
»suÉ_id
);

168 
	}
}

	@system/database/drivers/mysqli/mysqli_utility.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_mysqli_ut™y
 
ex‹nds
 
	mCI_DB_ut™y
 {

33 
funùiÚ
 
	$_li¡_d©aba£s
()

49 
funùiÚ
 
	$_İtimize_bË
(
$bË
)

51  "OPTIMIZE TABLE ".
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
);

52 
	}
}

65 
funùiÚ
 
	$_»·œ_bË
(
$bË
)

67  "REPAIR TABLE ".
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
);

68 
	}
}

79 
funùiÚ
 
_backup
(
$·¿ms
 = 
	$¬¿y
())

82  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

83 
	}
}

	@system/database/drivers/oci8/oci8_driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

42 şas 
	cCI_DB_oci8_driv”
 
ex‹nds
 
	mCI_DB
 {

44 
v¬
 
	m$dbdriv”
 = 'oci8';

47 
v¬
 
	m$_esÿ³_ch¬
 = '"';

50 
v¬
 
	m$_like_esÿ³_¡r
 = "ƒscape '%s' ";

51 
v¬
 
	m$_like_esÿ³_chr
 = '!';

58 
v¬
 
	m$_couÁ_¡ršg
 = "SELECT COUNT(1) AS ";

59 
v¬
 
	m$_¿ndom_keywÜd
 = ' ASC';

62 
v¬
 
	m$_comm™
 = 
OCI_COMMIT_ON_SUCCESS
;

65 
v¬
 
	m$¡mt_id
;

66 
v¬
 
	m$curs_id
;

70 
v¬
 
	m$lim™_u£d
;

78 
public
 
funùiÚ
 
	$db_cÚÃù
()

80  @
	`oci_cÚÃù
(
$this
->
u£ºame
, $this->
·sswÜd
, $this->
ho¡Çme
, $this->
ch¬_£t
);

91 
public
 
funùiÚ
 
	$db_pcÚÃù
()

93  @
	`oci_pcÚÃù
(
$this
->
u£ºame
, $this->
·sswÜd
, $this->
ho¡Çme
, $this->
ch¬_£t
);

94 
	}
}

107 
public
 
funùiÚ
 
	$»cÚÃù
()

111 
	}
}

121 
public
 
funùiÚ
 
	$db_£Ëù
()

124  
TRUE
;

125 
	}
}

137 
public
 
funùiÚ
 
	$db_£t_ch¬£t
(
$ch¬£t
, 
$cŞÏtiÚ
)

140  
TRUE
;

141 
	}
}

151 
´Ùeùed
 
funùiÚ
 
	$_v”siÚ
()

153  
	`oci_£rv”_v”siÚ
(
$this
->
cÚn_id
);

154 
	}
}

165 
´Ùeùed
 
funùiÚ
 
	$_execu‹
(
$sql
)

169 
$this
->
¡mt_id
 = 
FALSE
;

170 
$this
->
	`_£t_¡mt_id
(
$sql
);

171 
	`oci_£t_´eãtch
(
$this
->
¡mt_id
, 1000);

172  @
	`oci_execu‹
(
$this
->
¡mt_id
, $this->
_comm™
);

173 
	}
}

182 
´iv©e
 
funùiÚ
 
	$_£t_¡mt_id
(
$sql
)

184 iàĞ! 
	`is_»sourû
(
$this
->
¡mt_id
))

186 
$this
->
¡mt_id
 = 
	`oci_·r£
($this->
cÚn_id
, $this->
	`_´•_qu”y
(
$sql
));

188 
	}
}

201 
´iv©e
 
funùiÚ
 
	$_´•_qu”y
(
$sql
)

203  
$sql
;

204 
	}
}

214 
public
 
funùiÚ
 
	$g‘_cursÜ
()

216 
$this
->
curs_id
 = 
	`oci_Ãw_cursÜ
($this->
cÚn_id
);

217  
$this
->
curs_id
;

218 
	}
}

240 
public
 
funùiÚ
 
	$¡Üed_´oûdu»
(
$·ckage
, 
$´oûdu»
, 
$·¿ms
)

242 ià(
$·ckage
 =ğ'' 
OR
 
$´oûdu»
 =ğ'' OR ! 
	`is_¬¿y
(
$·¿ms
))

244 ià(
$this
->
db_debug
)

246 
	`log_mes§ge
('”rÜ', 'Inv®id qu”y: '.
$·ckage
.'.'.
$´oûdu»
);

247  
$this
->
	`di¥Ïy_”rÜ
('db_invalid_query');

249  
FALSE
;

253 
$sql
 = "begin $package.$procedure(";

255 
$have_cursÜ
 = 
FALSE
;

256 
	`fÜ—ch
 (
$·¿ms
 
as
 
$·¿m
)

258 
$sql
 .ğ
$·¿m
['name'] . ",";

260 ià(
	`¬¿y_key_exi¡s
('ty³', 
$·¿m
è&& ($·¿m['ty³'] ==ğ
OCI_B_CURSOR
))

262 
$have_cursÜ
 = 
TRUE
;

265 
$sql
 = 
	`Œim
($sql, ",") . ");ƒnd;";

267 
$this
->
¡mt_id
 = 
FALSE
;

268 
$this
->
	`_£t_¡mt_id
(
$sql
);

269 
$this
->
	`_bšd_·¿ms
(
$·¿ms
);

270 
$this
->
	`qu”y
(
$sql
, 
FALSE
, 
$have_cursÜ
);

271 
	}
}

281 
´iv©e
 
funùiÚ
 
	$_bšd_·¿ms
(
$·¿ms
)

283 iàĞ! 
	`is_¬¿y
(
$·¿ms
è
OR
 ! 
	`is_»sourû
(
$this
->
¡mt_id
))

288 
	`fÜ—ch
 (
$·¿ms
 
as
 
$·¿m
)

290 
	`fÜ—ch
 (
	`¬¿y
('Çme', 'v®ue', 'ty³', 'Ëngth'è
as
 
$v®
)

292 iàĞ! 
	`is£t
(
$·¿m
[
$v®
]))

294 
$·¿m
[
$v®
] = '';

298 
	`oci_bšd_by_Çme
(
$this
->
¡mt_id
, 
$·¿m
['name'], $param['value'], $param['length'], $param['type']);

300 
	}
}

310 
public
 
funùiÚ
 
	$Œªs_begš
(
$‹¡_mode
 = 
FALSE
)

312 iàĞ! 
$this
->
Œªs_’abËd
)

314  
TRUE
;

318 ià(
$this
->
_Œªs_d•th
 > 0)

320  
TRUE
;

326 
$this
->
_Œªs_çu»
 = (
$‹¡_mode
 ==ğ
TRUE
è? TRUE : 
FALSE
;

328 
$this
->
_comm™
 = 
OCI_DEFAULT
;

329  
TRUE
;

330 
	}
}

340 
public
 
funùiÚ
 
	$Œªs_comm™
()

342 iàĞ! 
$this
->
Œªs_’abËd
)

344  
TRUE
;

348 ià(
$this
->
_Œªs_d•th
 > 0)

350  
TRUE
;

353 
$»t
 = 
	`oci_comm™
(
$this
->
cÚn_id
);

354 
$this
->
_comm™
 = 
OCI_COMMIT_ON_SUCCESS
;

355  
$»t
;

356 
	}
}

366 
public
 
funùiÚ
 
	$Œªs_rŞlback
()

368 iàĞ! 
$this
->
Œªs_’abËd
)

370  
TRUE
;

374 ià(
$this
->
_Œªs_d•th
 > 0)

376  
TRUE
;

379 
$»t
 = 
	`oci_rŞlback
(
$this
->
cÚn_id
);

380 
$this
->
_comm™
 = 
OCI_COMMIT_ON_SUCCESS
;

381  
$»t
;

382 
	}
}

394 
public
 
funùiÚ
 
	$esÿ³_¡r
(
$¡r
, 
$like
 = 
FALSE
)

396 ià(
	`is_¬¿y
(
$¡r
))

398 
	`fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

400 
$¡r
[
$key
] = 
$this
->
	`esÿ³_¡r
(
$v®
, 
$like
);

403  
$¡r
;

406 
$¡r
 = 
	`»move_švisibË_ch¬aù”s
($str);

409 ià(
$like
 ==ğ
TRUE
)

411 
$¡r
 = 
	`¡r_»¶aû
Ğ
	`¬¿y
('%', '_', 
$this
->
_like_esÿ³_chr
),

412 
	`¬¿y
(
$this
->
_like_esÿ³_chr
.'%', $this->_like_escape_chr.'_', $this->_like_escape_chr.$this->_like_escape_chr),

413 
$¡r
);

416  
$¡r
;

417 
	}
}

427 
public
 
funùiÚ
 
	$afãùed_rows
()

429  @
	`oci_num_rows
(
$this
->
¡mt_id
);

430 
	}
}

440 
public
 
funùiÚ
 
	$š£¹_id
()

443  
$this
->
	`di¥Ïy_”rÜ
('db_unsupported_function');

444 
	}
}

458 
public
 
funùiÚ
 
couÁ_®l
(
$bË
 = '')

460 ià(
$bË
 == '')

465 
	g$qu”y
 = 
$this
->
qu”y
($this->
_couÁ_¡ršg
 . $this->
_´Ùeù_id’tif›rs
('numrows'è. " FROM " . $this->_´Ùeù_id’tif›rs(
$bË
, 
TRUE
, 
NULL
, 
FALSE
));

467 ià(
	g$qu”y
 =ğ
FALSE
)

472 
	g$row
 = 
$qu”y
->
row
();

473 
	g$this
->
_»£t_£Ëù
();

474  (è
	g$row
->
	gnumrows
;

488 
´Ùeùed
 
funùiÚ
 
	$_li¡_bËs
(
$´efix_lim™
 = 
FALSE
)

490 
$sql
 = "SELECT TABLE_NAME FROM ALL_TABLES";

492 ià(
$´efix_lim™
 !=ğ
FALSE
 
AND
 
$this
->
db´efix
 != '')

494 
$sql
 .ğ" WHERE TABLE_NAME LIKE '".
$this
->
	`esÿ³_like_¡r
($this->
db´efix
)."%' ".
	`¥rštf
($this->
_like_esÿ³_¡r
, $this->
_like_esÿ³_chr
);

497  
$sql
;

498 
	}
}

511 
´Ùeùed
 
funùiÚ
 
_li¡_cŞumns
(
$bË
 = '')

527 
´Ùeùed
 
funùiÚ
 
	$_f›ld_d©a
(
$bË
)

529  "SELECT * FROM ".
$bË
." where„ownum = 1";

530 
	}
}

540 
´Ùeùed
 
funùiÚ
 
	$_”rÜ_mes§ge
()

543 
$”rÜ
 = 
	`is_»sourû
(
$this
->
cÚn_id
è? 
	`oci_”rÜ
($this->conn_id) : oci_error();

544  
$”rÜ
['message'];

545 
	}
}

555 
´Ùeùed
 
funùiÚ
 
	$_”rÜ_numb”
()

558 
$”rÜ
 = 
	`is_»sourû
(
$this
->
cÚn_id
è? 
	`oci_”rÜ
($this->conn_id) : oci_error();

559  
$”rÜ
['code'];

560 
	}
}

573 
´Ùeùed
 
funùiÚ
 
	$_esÿ³_id’tif›rs
(
$™em
)

575 ià(
$this
->
_esÿ³_ch¬
 == '')

577  
$™em
;

580 
	`fÜ—ch
 (
$this
->
_»£rved_id’tif›rs
 
as
 
$id
)

582 ià(
	`¡½os
(
$™em
, '.'.
$id
è!=ğ
FALSE
)

584 
$¡r
 = 
$this
->
_esÿ³_ch¬
. 
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.', 
$™em
);

587  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

591 ià(
	`¡½os
(
$™em
, '.'è!=ğ
FALSE
)

593 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.'.$this->_esÿ³_ch¬, 
$™em
).$this->_escape_char;

597 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
$™em
.$this->_escape_char;

601  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

602 
	}
}

616 
´Ùeùed
 
funùiÚ
 
	$_äom_bËs
(
$bËs
)

618 iàĞ! 
	`is_¬¿y
(
$bËs
))

620 
$bËs
 = 
	`¬¿y
($tables);

623  
	`im¶ode
(', ', 
$bËs
);

624 
	}
}

639 
´Ùeùed
 
funùiÚ
 
	$_š£¹
(
$bË
, 
$keys
, 
$v®ues
)

641  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES (".im¶ode(', ', 
$v®ues
).")";

642 
	}
}

657 
´Ùeùed
 
funùiÚ
 
	$_š£¹_b©ch
(
$bË
, 
$keys
, 
$v®ues
)

659 
$keys
 = 
	`im¶ode
(', ', $keys);

660 
$sql
 = "INSERT ALL\n";

662 
$i
 = 0, 
$c
 = 
	`couÁ
(
$v®ues
); $i < $c; $i++)

664 
$sql
 .ğ' INTO ' . 
$bË
 . ' (' . 
$keys
 . 'èVALUES ' . 
$v®ues
[
$i
] . "\n";

667 
$sql
 .= 'SELECT * FROM dual';

669  
$sql
;

670 
	}
}

687 
´Ùeùed
 
funùiÚ
 
_upd©e
(
$bË
, 
$v®ues
, 
$wh”e
, 
$Üd”by
 = 
¬¿y
(), 
$lim™
 = 
FALSE
)

689 
fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

691 
$v®¡r
[] = 
$key
." = ".
$v®
;

694 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

696 
	g$Üd”by
 = (
couÁ
(
$Üd”by
è>ğ1)?' ORDER BY '.
im¶ode
(", ", $orderby):'';

698 
	g$sql
 = "UPDATE ".
$bË
." SET ".
im¶ode
(', ', 
$v®¡r
);

700 
	g$sql
 .ğ(
$wh”e
 !ğ'' 
AND
 
couÁ
($wh”eè>=1è? " WHERE ".
im¶ode
(" ", $where) : '';

702 
	g$sql
 .ğ
$Üd”by
.
$lim™
;

704  
	g$sql
;

720 
´Ùeùed
 
funùiÚ
 
	$_Œunÿ‹
(
$bË
)

722  "TRUNCATE TABLE ".
$bË
;

723 
	}
}

738 
´Ùeùed
 
funùiÚ
 
_d–‘e
(
$bË
, 
$wh”e
 = 
¬¿y
(), 
$like
 =‡¼ay(), 
$lim™
 = 
FALSE
)

740 
$cÚd™iÚs
 = '';

742 ià(
couÁ
(
$wh”e
è> 0 
OR
 couÁ(
$like
) > 0)

744 
	g$cÚd™iÚs
 = "\nWHERE ";

745 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$this
->
¬_wh”e
);

747 ià(
couÁ
(
$wh”e
è> 0 && couÁ(
$like
) > 0)

749 
	g$cÚd™iÚs
 .= " AND ";

751 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$like
);

754 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

756  "DELETE FROM ".
	g$bË
.
	g$cÚd™iÚs
.
	g$lim™
;

772 
´Ùeùed
 
funùiÚ
 
	$_lim™
(
$sql
, 
$lim™
, 
$off£t
)

774 
$lim™
 = 
$off£t
 + $limit;

775 
$Ãwsql
 = "SELECT * FROM (select inner_query.*,„ownum„num FROM ($sql) inner_query WHERE„ownum < $limit)";

777 ià(
$off£t
 != 0)

779 
$Ãwsql
 .= " WHERE„num >= $offset";

783 
$this
->
lim™_u£d
 = 
TRUE
;

785  
$Ãwsql
;

786 
	}
}

797 
´Ùeùed
 
funùiÚ
 
	$_şo£
(
$cÚn_id
)

799 @
	`oci_şo£
(
$cÚn_id
);

800 
	}
}

	@system/database/drivers/oci8/oci8_forge.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_oci8_fÜge
 
ex‹nds
 
	mCI_DB_fÜge
 {

34 
funùiÚ
 
	$_ü—‹_d©aba£
(
$Çme
)

36  
FALSE
;

48 
funùiÚ
 
	$_drİ_d©aba£
(
$Çme
)

50  
FALSE
;

51 
	}
}

66 
funùiÚ
 
	$_ü—‹_bË
(
$bË
, 
$f›lds
, 
$´im¬y_keys
, 
$keys
, 
$if_nÙ_exi¡s
)

68 
$sql
 = 'CREATE TABLE ';

70 ià(
$if_nÙ_exi¡s
 ==ğ
TRUE
)

72 
$sql
 .= 'IF NOT EXISTS ';

75 
$sql
 .ğ
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
)." (";

76 
$cu¼’t_f›ld_couÁ
 = 0;

78 
	`fÜ—ch
 (
$f›lds
 
as
 
$f›ld
=>
$©Œibu‹s
)

83 ià(
	`is_num”ic
(
$f›ld
))

85 
$sql
 .= "\n\t$attributes";

89 
$©Œibu‹s
 = 
	`¬¿y_chªge_key_ÿ£
($©Œibu‹s, 
CASE_UPPER
);

91 
$sql
 .ğ"\n\t".
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$f›ld
);

93 
$sql
 .ğ' '.
$©Œibu‹s
['TYPE'];

95 ià(
	`¬¿y_key_exi¡s
('CONSTRAINT', 
$©Œibu‹s
))

97 
$sql
 .ğ'('.
$©Œibu‹s
['CONSTRAINT'].')';

100 ià(
	`¬¿y_key_exi¡s
('UNSIGNED', 
$©Œibu‹s
è&& $©Œibu‹s['UNSIGNED'] ==ğ
TRUE
)

102 
$sql
 .= ' UNSIGNED';

105 ià(
	`¬¿y_key_exi¡s
('DEFAULT', 
$©Œibu‹s
))

107 
$sql
 .ğ' DEFAULT \''.
$©Œibu‹s
['DEFAULT'].'\'';

110 ià(
	`¬¿y_key_exi¡s
('NULL', 
$©Œibu‹s
è&& $©Œibu‹s['NULL'] ==ğ
TRUE
)

112 
$sql
 .= ' NULL';

116 
$sql
 .= ' NOT NULL';

119 ià(
	`¬¿y_key_exi¡s
('AUTO_INCREMENT', 
$©Œibu‹s
è&& $©Œibu‹s['AUTO_INCREMENT'] ==ğ
TRUE
)

121 
$sql
 .= ' AUTO_INCREMENT';

126 ià(++
$cu¼’t_f›ld_couÁ
 < 
	`couÁ
(
$f›lds
))

128 
$sql
 .= ',';

132 ià(
	`couÁ
(
$´im¬y_keys
) > 0)

134 
$´im¬y_keys
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($primary_keys);

135 
$sql
 .ğ",\n\tPRIMARY KEY (" . 
	`im¶ode
(', ', 
$´im¬y_keys
) . ")";

138 ià(
	`is_¬¿y
(
$keys
è&& 
	`couÁ
($keys) > 0)

140 
	`fÜ—ch
 (
$keys
 
as
 
$key
)

142 ià(
	`is_¬¿y
(
$key
))

144 
$key
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key);

148 
$key
 = 
	`¬¿y
(
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key));

151 
$sql
 .ğ",\n\tUNIQUE COLUMNS (" . 
	`im¶ode
(', ', 
$key
) . ")";

155 
$sql
 .= "\n)";

157  
$sql
;

158 
	}
}

168 
funùiÚ
 
	$_drİ_bË
(
$bË
)

170  
FALSE
;

171 
	}
}

191 
funùiÚ
 
_®‹r_bË
(
$®‹r_ty³
, 
$bË
, 
$cŞumn_Çme
, 
$cŞumn_defš™iÚ
 = '', 
$deçuÉ_v®ue
 = '', 
$nuÎ
 = '', 
$aá”_f›ld
 = '')

193 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$bË
)." $®‹r_ty³ ".$this->db->_´Ùeù_id’tif›rs(
$cŞumn_Çme
);

196 ià(
	g$®‹r_ty³
 == 'DROP')

198  
$sql
;

201 
	g$sql
 .= " $column_definition";

203 ià(
	g$deçuÉ_v®ue
 != '')

205 
$sql
 .= " DEFAULT \"$default_value\"";

208 ià(
	g$nuÎ
 ==ğ
NULL
)

210 
$sql
 .= ' NULL';

214 
	g$sql
 .= ' NOT NULL';

217 ià(
	g$aá”_f›ld
 != '')

219 
$sql
 .ğ' AFTER ' . 
$this
->
db
->
_´Ùeù_id’tif›rs
(
$aá”_f›ld
);

222  
	g$sql
;

238 
funùiÚ
 
	$_»Çme_bË
(
$bË_Çme
, 
$Ãw_bË_Çme
)

240 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$bË_Çme
)." RENAME TO ".$this->db->_´Ùeù_id’tif›rs(
$Ãw_bË_Çme
);

241  
$sql
;

242 
	}
}

	@system/database/drivers/oci8/oci8_result.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_DB_oci8_»suÉ
 
ex‹nds
 
	mCI_DB_»suÉ
 {

29 
v¬
 
	m$¡mt_id
;

30 
v¬
 
	m$curs_id
;

31 
v¬
 
	m$lim™_u£d
;

43 
public
 
funùiÚ
 
	$num_rows
()

45 ià(
$this
->
num_rows
 ==ğ0 && 
	`couÁ
($this->
	`»suÉ_¬¿y
()) > 0)

47 
$this
->
num_rows
 = 
	`couÁ
($this->
	`»suÉ_¬¿y
());

48 @
	`oci_execu‹
(
$this
->
¡mt_id
);

50 ià(
$this
->
curs_id
)

52 @
	`oci_execu‹
(
$this
->
curs_id
);

56  
$rowcouÁ
;

67 
public
 
funùiÚ
 
	$num_f›lds
()

69 
$couÁ
 = @
	`oci_num_f›lds
(
$this
->
¡mt_id
);

72 ià(
$this
->
lim™_u£d
)

74 
$couÁ
 = $count - 1;

77  
$couÁ
;

78 
	}
}

90 
public
 
funùiÚ
 
	$li¡_f›lds
()

92 
$f›ld_Çmes
 = 
	`¬¿y
();

93 
$c
 = 1, 
$f›ldCouÁ
 = 
$this
->
	`num_f›lds
(); $c <= $fieldCount; $c++)

95 
$f›ld_Çmes
[] = 
	`oci_f›ld_Çme
(
$this
->
¡mt_id
, 
$c
);

97  
$f›ld_Çmes
;

98 
	}
}

110 
public
 
funùiÚ
 
	$f›ld_d©a
()

112 
$»tv®
 = 
	`¬¿y
();

113 
$c
 = 1, 
$f›ldCouÁ
 = 
$this
->
	`num_f›lds
(); $c <= $fieldCount; $c++)

115 
$F
 = 
Ãw
 
	`¡dCÏss
();

116 
$F
->
Çme
 = 
	`oci_f›ld_Çme
(
$this
->
¡mt_id
, 
$c
);

117 
$F
->
ty³
 = 
	`oci_f›ld_ty³
(
$this
->
¡mt_id
, 
$c
);

118 
$F
->
max_Ëngth
 = 
	`oci_f›ld_size
(
$this
->
¡mt_id
, 
$c
);

120 
$»tv®
[] = 
$F
;

123  
$»tv®
;

124 
	}
}

133 
public
 
funùiÚ
 
	$ä“_»suÉ
()

135 ià(
	`is_»sourû
(
$this
->
»suÉ_id
))

137 
	`oci_ä“_¡©em’t
(
$this
->
»suÉ_id
);

138 
$this
->
»suÉ_id
 = 
FALSE
;

140 
	}
}

152 
´Ùeùed
 
funùiÚ
 
	$_ãtch_assoc
()

154 
$id
 = (
$this
->
curs_id
è? $this->curs_id : $this->
¡mt_id
;

155  
	`oci_ãtch_assoc
(
$id
);

156 
	}
}

168 
´Ùeùed
 
funùiÚ
 
	$_ãtch_objeù
()

170 
$id
 = (
$this
->
curs_id
è? $this->curs_id : $this->
¡mt_id
;

171  @
	`oci_ãtch_objeù
(
$id
);

172 
	}
}

182 
public
 
funùiÚ
 
	$»suÉ_¬¿y
()

184 ià(
	`couÁ
(
$this
->
»suÉ_¬¿y
) > 0)

186  
$this
->
»suÉ_¬¿y
;

189 
$row
 = 
NULL
;

190 
$row
 = 
$this
->
	`_ãtch_assoc
())

192 
$this
->
»suÉ_¬¿y
[] = 
$row
;

195  
$this
->
»suÉ_¬¿y
;

196 
	}
}

210 
´Ùeùed
 
funùiÚ
 
	$_d©a_£ek
(
$n
 = 0)

212  
FALSE
;

213 
	}
}

	@system/database/drivers/oci8/oci8_utility.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_oci8_ut™y
 
ex‹nds
 
	mCI_DB_ut™y
 {

33 
funùiÚ
 
	$_li¡_d©aba£s
()

35  
FALSE
;

49 
funùiÚ
 
	$_İtimize_bË
(
$bË
)

51  
FALSE
;

52 
	}
}

65 
funùiÚ
 
	$_»·œ_bË
(
$bË
)

67  
FALSE
;

68 
	}
}

79 
funùiÚ
 
_backup
(
$·¿ms
 = 
	$¬¿y
())

82  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

83 
	}
}

	@system/database/drivers/odbc/odbc_driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

31 şas 
	cCI_DB_odbc_driv”
 
ex‹nds
 
	mCI_DB
 {

33 
v¬
 
	m$dbdriv”
 = 'odbc';

36 
v¬
 
	m$_esÿ³_ch¬
 = '';

39 
v¬
 
	m$_like_esÿ³_¡r
 = " {escape '%s'} ";

40 
v¬
 
	m$_like_esÿ³_chr
 = '!';

47 
v¬
 
	m$_couÁ_¡ršg
 = "SELECT COUNT(*) AS ";

48 
v¬
 
	m$_¿ndom_keywÜd
;

51 
funùiÚ
 
	$__cÚ¡ruù
(
$·¿ms
)

53 
·»Á
::
	`__cÚ¡ruù
(
$·¿ms
);

55 
$this
->
_¿ndom_keywÜd
 = ' RND('.
	`time
().')';

64 
funùiÚ
 
	$db_cÚÃù
()

66  @
	`odbc_cÚÃù
(
$this
->
ho¡Çme
, $this->
u£ºame
, $this->
·sswÜd
);

67 
	}
}

77 
funùiÚ
 
	$db_pcÚÃù
()

79  @
	`odbc_pcÚÃù
(
$this
->
ho¡Çme
, $this->
u£ºame
, $this->
·sswÜd
);

80 
	}
}

93 
funùiÚ
 
	$»cÚÃù
()

96 
	}
}

106 
funùiÚ
 
	$db_£Ëù
()

109  
TRUE
;

110 
	}
}

122 
funùiÚ
 
	$db_£t_ch¬£t
(
$ch¬£t
, 
$cŞÏtiÚ
)

125  
TRUE
;

126 
	}
}

136 
funùiÚ
 
	$_v”siÚ
()

139 
	}
}

150 
funùiÚ
 
	$_execu‹
(
$sql
)

152 
$sql
 = 
$this
->
	`_´•_qu”y
($sql);

153  @
	`odbc_exec
(
$this
->
cÚn_id
, 
$sql
);

154 
	}
}

167 
funùiÚ
 
	$_´•_qu”y
(
$sql
)

169  
$sql
;

170 
	}
}

180 
funùiÚ
 
	$Œªs_begš
(
$‹¡_mode
 = 
FALSE
)

182 iàĞ! 
$this
->
Œªs_’abËd
)

184  
TRUE
;

188 ià(
$this
->
_Œªs_d•th
 > 0)

190  
TRUE
;

196 
$this
->
_Œªs_çu»
 = (
$‹¡_mode
 ==ğ
TRUE
è? TRUE : 
FALSE
;

198  
	`odbc_autocomm™
(
$this
->
cÚn_id
, 
FALSE
);

199 
	}
}

209 
funùiÚ
 
	$Œªs_comm™
()

211 iàĞ! 
$this
->
Œªs_’abËd
)

213  
TRUE
;

217 ià(
$this
->
_Œªs_d•th
 > 0)

219  
TRUE
;

222 
$»t
 = 
	`odbc_comm™
(
$this
->
cÚn_id
);

223 
	`odbc_autocomm™
(
$this
->
cÚn_id
, 
TRUE
);

224  
$»t
;

225 
	}
}

235 
funùiÚ
 
	$Œªs_rŞlback
()

237 iàĞ! 
$this
->
Œªs_’abËd
)

239  
TRUE
;

243 ià(
$this
->
_Œªs_d•th
 > 0)

245  
TRUE
;

248 
$»t
 = 
	`odbc_rŞlback
(
$this
->
cÚn_id
);

249 
	`odbc_autocomm™
(
$this
->
cÚn_id
, 
TRUE
);

250  
$»t
;

251 
	}
}

263 
funùiÚ
 
	$esÿ³_¡r
(
$¡r
, 
$like
 = 
FALSE
)

265 ià(
	`is_¬¿y
(
$¡r
))

267 
	`fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

269 
$¡r
[
$key
] = 
$this
->
	`esÿ³_¡r
(
$v®
, 
$like
);

272  
$¡r
;

276 
$¡r
 = 
	`»move_švisibË_ch¬aù”s
($str);

279 ià(
$like
 ==ğ
TRUE
)

281 
$¡r
 = 
	`¡r_»¶aû
Ğ
	`¬¿y
('%', '_', 
$this
->
_like_esÿ³_chr
),

282 
	`¬¿y
(
$this
->
_like_esÿ³_chr
.'%', $this->_like_escape_chr.'_', $this->_like_escape_chr.$this->_like_escape_chr),

283 
$¡r
);

286  
$¡r
;

287 
	}
}

297 
funùiÚ
 
	$afãùed_rows
()

299  @
	`odbc_num_rows
(
$this
->
cÚn_id
);

300 
	}
}

310 
funùiÚ
 
	$š£¹_id
()

312  @
	`odbc_š£¹_id
(
$this
->
cÚn_id
);

313 
	}
}

327 
funùiÚ
 
couÁ_®l
(
$bË
 = '')

329 ià(
$bË
 == '')

334 
	g$qu”y
 = 
$this
->
qu”y
($this->
_couÁ_¡ršg
 . $this->
_´Ùeù_id’tif›rs
('numrows'è. " FROM " . $this->_´Ùeù_id’tif›rs(
$bË
, 
TRUE
, 
NULL
, 
FALSE
));

336 ià(
	g$qu”y
->
num_rows
() == 0)

341 
	g$row
 = 
$qu”y
->
row
();

342 
	g$this
->
_»£t_£Ëù
();

343  (è
	g$row
->
	gnumrows
;

357 
funùiÚ
 
	$_li¡_bËs
(
$´efix_lim™
 = 
FALSE
)

359 
$sql
 = "SHOW TABLES FROM `".
$this
->
d©aba£
."`";

361 ià(
$´efix_lim™
 !=ğ
FALSE
 
AND
 
$this
->
db´efix
 != '')

364  
FALSE
;

367  
$sql
;

368 
	}
}

381 
funùiÚ
 
_li¡_cŞumns
(
$bË
 = '')

383  "SHOW COLUMNS FROM ".
$bË
;

397 
funùiÚ
 
	$_f›ld_d©a
(
$bË
)

399  "SELECT TOP 1 FROM ".
$bË
;

400 
	}
}

410 
funùiÚ
 
	$_”rÜ_mes§ge
()

412  
	`odbc_”rÜmsg
(
$this
->
cÚn_id
);

413 
	}
}

423 
funùiÚ
 
	$_”rÜ_numb”
()

425  
	`odbc_”rÜ
(
$this
->
cÚn_id
);

426 
	}
}

439 
funùiÚ
 
	$_esÿ³_id’tif›rs
(
$™em
)

441 ià(
$this
->
_esÿ³_ch¬
 == '')

443  
$™em
;

446 
	`fÜ—ch
 (
$this
->
_»£rved_id’tif›rs
 
as
 
$id
)

448 ià(
	`¡½os
(
$™em
, '.'.
$id
è!=ğ
FALSE
)

450 
$¡r
 = 
$this
->
_esÿ³_ch¬
. 
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.', 
$™em
);

453  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

457 ià(
	`¡½os
(
$™em
, '.'è!=ğ
FALSE
)

459 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.'.$this->_esÿ³_ch¬, 
$™em
).$this->_escape_char;

463 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
$™em
.$this->_escape_char;

467  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

468 
	}
}

482 
funùiÚ
 
	$_äom_bËs
(
$bËs
)

484 iàĞ! 
	`is_¬¿y
(
$bËs
))

486 
$bËs
 = 
	`¬¿y
($tables);

489  '('.
	`im¶ode
(', ', 
$bËs
).')';

490 
	}
}

505 
funùiÚ
 
	$_š£¹
(
$bË
, 
$keys
, 
$v®ues
)

507  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES (".im¶ode(', ', 
$v®ues
).")";

508 
	}
}

525 
funùiÚ
 
_upd©e
(
$bË
, 
$v®ues
, 
$wh”e
, 
$Üd”by
 = 
¬¿y
(), 
$lim™
 = 
FALSE
)

527 
fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

529 
$v®¡r
[] = 
$key
." = ".
$v®
;

532 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

534 
	g$Üd”by
 = (
couÁ
(
$Üd”by
è>ğ1)?' ORDER BY '.
im¶ode
(", ", $orderby):'';

536 
	g$sql
 = "UPDATE ".
$bË
." SET ".
im¶ode
(', ', 
$v®¡r
);

538 
	g$sql
 .ğ(
$wh”e
 !ğ'' 
AND
 
couÁ
($wh”eè>=1è? " WHERE ".
im¶ode
(" ", $where) : '';

540 
	g$sql
 .ğ
$Üd”by
.
$lim™
;

542  
	g$sql
;

559 
funùiÚ
 
	$_Œunÿ‹
(
$bË
)

561  
$this
->
	`_d–‘e
(
$bË
);

562 
	}
}

577 
funùiÚ
 
_d–‘e
(
$bË
, 
$wh”e
 = 
¬¿y
(), 
$like
 =‡¼ay(), 
$lim™
 = 
FALSE
)

579 
$cÚd™iÚs
 = '';

581 ià(
couÁ
(
$wh”e
è> 0 
OR
 couÁ(
$like
) > 0)

583 
	g$cÚd™iÚs
 = "\nWHERE ";

584 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$this
->
¬_wh”e
);

586 ià(
couÁ
(
$wh”e
è> 0 && couÁ(
$like
) > 0)

588 
	g$cÚd™iÚs
 .= " AND ";

590 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$like
);

593 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

595  "DELETE FROM ".
	g$bË
.
	g$cÚd™iÚs
.
	g$lim™
;

611 
funùiÚ
 
	$_lim™
(
$sql
, 
$lim™
, 
$off£t
)

614  
$sql
;

615 
	}
}

626 
funùiÚ
 
	$_şo£
(
$cÚn_id
)

628 @
	`odbc_şo£
(
$cÚn_id
);

629 
	}
}

	@system/database/drivers/odbc/odbc_forge.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_odbc_fÜge
 
ex‹nds
 
	mCI_DB_fÜge
 {

34 
funùiÚ
 
	$_ü—‹_d©aba£
()

38 ià(
$this
->
db
->
db_debug
)

40  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

42  
FALSE
;

54 
funùiÚ
 
	$_drİ_d©aba£
(
$Çme
)

58 ià(
$this
->
db
->
db_debug
)

60  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

62  
FALSE
;

63 
	}
}

78 
funùiÚ
 
	$_ü—‹_bË
(
$bË
, 
$f›lds
, 
$´im¬y_keys
, 
$keys
, 
$if_nÙ_exi¡s
)

80 
$sql
 = 'CREATE TABLE ';

82 ià(
$if_nÙ_exi¡s
 ==ğ
TRUE
)

84 
$sql
 .= 'IF NOT EXISTS ';

87 
$sql
 .ğ
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
)." (";

88 
$cu¼’t_f›ld_couÁ
 = 0;

90 
	`fÜ—ch
 (
$f›lds
 
as
 
$f›ld
=>
$©Œibu‹s
)

95 ià(
	`is_num”ic
(
$f›ld
))

97 
$sql
 .= "\n\t$attributes";

101 
$©Œibu‹s
 = 
	`¬¿y_chªge_key_ÿ£
($©Œibu‹s, 
CASE_UPPER
);

103 
$sql
 .ğ"\n\t".
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$f›ld
);

105 
$sql
 .ğ' '.
$©Œibu‹s
['TYPE'];

107 ià(
	`¬¿y_key_exi¡s
('CONSTRAINT', 
$©Œibu‹s
))

109 
$sql
 .ğ'('.
$©Œibu‹s
['CONSTRAINT'].')';

112 ià(
	`¬¿y_key_exi¡s
('UNSIGNED', 
$©Œibu‹s
è&& $©Œibu‹s['UNSIGNED'] ==ğ
TRUE
)

114 
$sql
 .= ' UNSIGNED';

117 ià(
	`¬¿y_key_exi¡s
('DEFAULT', 
$©Œibu‹s
))

119 
$sql
 .ğ' DEFAULT \''.
$©Œibu‹s
['DEFAULT'].'\'';

122 ià(
	`¬¿y_key_exi¡s
('NULL', 
$©Œibu‹s
è&& $©Œibu‹s['NULL'] ==ğ
TRUE
)

124 
$sql
 .= ' NULL';

128 
$sql
 .= ' NOT NULL';

131 ià(
	`¬¿y_key_exi¡s
('AUTO_INCREMENT', 
$©Œibu‹s
è&& $©Œibu‹s['AUTO_INCREMENT'] ==ğ
TRUE
)

133 
$sql
 .= ' AUTO_INCREMENT';

138 ià(++
$cu¼’t_f›ld_couÁ
 < 
	`couÁ
(
$f›lds
))

140 
$sql
 .= ',';

144 ià(
	`couÁ
(
$´im¬y_keys
) > 0)

146 
$´im¬y_keys
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($primary_keys);

147 
$sql
 .ğ",\n\tPRIMARY KEY (" . 
	`im¶ode
(', ', 
$´im¬y_keys
) . ")";

150 ià(
	`is_¬¿y
(
$keys
è&& 
	`couÁ
($keys) > 0)

152 
	`fÜ—ch
 (
$keys
 
as
 
$key
)

154 ià(
	`is_¬¿y
(
$key
))

156 
$key
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key);

160 
$key
 = 
	`¬¿y
(
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key));

163 
$sql
 .ğ",\n\tFOREIGN KEY (" . 
	`im¶ode
(', ', 
$key
) . ")";

167 
$sql
 .= "\n)";

169  
$sql
;

170 
	}
}

180 
funùiÚ
 
	$_drİ_bË
(
$bË
)

183 ià(
$this
->
db
->
db_debug
)

185  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

187  
FALSE
;

188 
	}
}

208 
funùiÚ
 
_®‹r_bË
(
$®‹r_ty³
, 
$bË
, 
$cŞumn_Çme
, 
$cŞumn_defš™iÚ
 = '', 
$deçuÉ_v®ue
 = '', 
$nuÎ
 = '', 
$aá”_f›ld
 = '')

210 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$bË
)." $®‹r_ty³ ".$this->db->_´Ùeù_id’tif›rs(
$cŞumn_Çme
);

213 ià(
	g$®‹r_ty³
 == 'DROP')

215  
$sql
;

218 
	g$sql
 .= " $column_definition";

220 ià(
	g$deçuÉ_v®ue
 != '')

222 
$sql
 .= " DEFAULT \"$default_value\"";

225 ià(
	g$nuÎ
 ==ğ
NULL
)

227 
$sql
 .= ' NULL';

231 
	g$sql
 .= ' NOT NULL';

234 ià(
	g$aá”_f›ld
 != '')

236 
$sql
 .ğ' AFTER ' . 
$this
->
db
->
_´Ùeù_id’tif›rs
(
$aá”_f›ld
);

239  
	g$sql
;

256 
funùiÚ
 
	$_»Çme_bË
(
$bË_Çme
, 
$Ãw_bË_Çme
)

258 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$bË_Çme
)." RENAME TO ".$this->db->_´Ùeù_id’tif›rs(
$Ãw_bË_Çme
);

259  
$sql
;

260 
	}
}

	@system/database/drivers/odbc/odbc_result.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_DB_odbc_»suÉ
 
ex‹nds
 
	mCI_DB_»suÉ
 {

35 
funùiÚ
 
	$num_rows
()

37  @
	`odbc_num_rows
(
$this
->
»suÉ_id
);

48 
funùiÚ
 
	$num_f›lds
()

50  @
	`odbc_num_f›lds
(
$this
->
»suÉ_id
);

51 
	}
}

63 
funùiÚ
 
	$li¡_f›lds
()

65 
$f›ld_Çmes
 = 
	`¬¿y
();

66 
$i
 = 0; $˜< 
$this
->
	`num_f›lds
(); $i++)

68 
$f›ld_Çmes
[] = 
	`odbc_f›ld_Çme
(
$this
->
»suÉ_id
, 
$i
);

71  
$f›ld_Çmes
;

72 
	}
}

84 
funùiÚ
 
	$f›ld_d©a
()

86 
$»tv®
 = 
	`¬¿y
();

87 
$i
 = 0; $˜< 
$this
->
	`num_f›lds
(); $i++)

89 
$F
 = 
Ãw
 
	`¡dCÏss
();

90 
$F
->
Çme
 = 
	`odbc_f›ld_Çme
(
$this
->
»suÉ_id
, 
$i
);

91 
$F
->
ty³
 = 
	`odbc_f›ld_ty³
(
$this
->
»suÉ_id
, 
$i
);

92 
$F
->
max_Ëngth
 = 
	`odbc_f›ld_Ën
(
$this
->
»suÉ_id
, 
$i
);

93 
$F
->
´im¬y_key
 = 0;

94 
$F
-> = '';

96 
$»tv®
[] = 
$F
;

99  
$»tv®
;

100 
	}
}

109 
funùiÚ
 
	$ä“_»suÉ
()

111 ià(
	`is_»sourû
(
$this
->
»suÉ_id
))

113 
	`odbc_ä“_»suÉ
(
$this
->
»suÉ_id
);

114 
$this
->
»suÉ_id
 = 
FALSE
;

116 
	}
}

130 
funùiÚ
 
	$_d©a_£ek
(
$n
 = 0)

132  
FALSE
;

133 
	}
}

145 
funùiÚ
 
	$_ãtch_assoc
()

147 ià(
	`funùiÚ_exi¡s
('odbc_fetch_object'))

149  
	`odbc_ãtch_¬¿y
(
$this
->
»suÉ_id
);

153  
$this
->
	`_odbc_ãtch_¬¿y
($this->
»suÉ_id
);

155 
	}
}

167 
funùiÚ
 
	$_ãtch_objeù
()

169 ià(
	`funùiÚ_exi¡s
('odbc_fetch_object'))

171  
	`odbc_ãtch_objeù
(
$this
->
»suÉ_id
);

175  
$this
->
	`_odbc_ãtch_objeù
($this->
»suÉ_id
);

177 
	}
}

189 
funùiÚ
 
	$_odbc_ãtch_objeù
(& 
$odbc_»suÉ
) {

190 
$rs
 = 
	`¬¿y
();

191 
$rs_obj
 = 
FALSE
;

192 ià(
	`odbc_ãtch_što
(
$odbc_»suÉ
, 
$rs
)) {

193 
	`fÜ—ch
 (
$rs
 
as
 
$k
=>
$v
) {

194 
$f›ld_Çme
ğ
	`odbc_f›ld_Çme
(
$odbc_»suÉ
, 
$k
+1);

195 
$rs_obj
->
$f›ld_Çme
 = 
$v
;

198  
$rs_obj
;

199 
	}
}

211 
funùiÚ
 
	$_odbc_ãtch_¬¿y
(& 
$odbc_»suÉ
) {

212 
$rs
 = 
	`¬¿y
();

213 
$rs_assoc
 = 
FALSE
;

214 ià(
	`odbc_ãtch_što
(
$odbc_»suÉ
, 
$rs
)) {

215 
$rs_assoc
=
	`¬¿y
();

216 
	`fÜ—ch
 (
$rs
 
as
 
$k
=>
$v
) {

217 
$f›ld_Çme
ğ
	`odbc_f›ld_Çme
(
$odbc_»suÉ
, 
$k
+1);

218 
$rs_assoc
[
$f›ld_Çme
] = 
$v
;

221  
$rs_assoc
;

222 
	}
}

	@system/database/drivers/odbc/odbc_utility.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_odbc_ut™y
 
ex‹nds
 
	mCI_DB_ut™y
 {

33 
funùiÚ
 
	$_li¡_d©aba£s
()

36 ià(
$this
->
db
->
db_debug
)

38  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

40  
FALSE
;

54 
funùiÚ
 
	$_İtimize_bË
(
$bË
)

57 ià(
$this
->
db
->
db_debug
)

59  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

61  
FALSE
;

62 
	}
}

75 
funùiÚ
 
	$_»·œ_bË
(
$bË
)

78 ià(
$this
->
db
->
db_debug
)

80  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

82  
FALSE
;

83 
	}
}

94 
funùiÚ
 
_backup
(
$·¿ms
 = 
	$¬¿y
())

97  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

98 
	}
}

	@system/database/drivers/pdo/pdo_driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

32 şas 
	cCI_DB_pdo_driv”
 
ex‹nds
 
	mCI_DB
 {

34 
v¬
 
	m$dbdriv”
 = 'pdo';

37 
v¬
 
	m$_esÿ³_ch¬
 = '';

38 
v¬
 
	m$_like_esÿ³_¡r
;

39 
v¬
 
	m$_like_esÿ³_chr
;

47 
v¬
 
	m$_couÁ_¡ršg
 = "SELECT COUNT(*) AS ";

48 
v¬
 
	m$_¿ndom_keywÜd
;

50 
v¬
 
	m$İtiÚs
 = 
¬¿y
();

52 
funùiÚ
 
	$__cÚ¡ruù
(
$·¿ms
)

54 
·»Á
::
	`__cÚ¡ruù
(
$·¿ms
);

57 ià(
	`¡½os
(
$this
->
ho¡Çme
, 'mysql'è!=ğ
FALSE
)

59 
$this
->
_like_esÿ³_¡r
 = '';

60 
$this
->
_like_esÿ³_chr
 = '';

63 if(
	`is_php
('5.3.6'))

65 
$this
->
ho¡Çme
 .= ";charset={$this->char_set}";

69 
$this
->
İtiÚs
['PDO::MYSQL_ATTR_INIT_COMMAND'] = "SET NAMES {$this->char_set}";

71 ià(
	`¡½os
(
$this
->
ho¡Çme
, 'odbc'è!=ğ
FALSE
)

73 
$this
->
_like_esÿ³_¡r
 = " {escape '%s'} ";

74 
$this
->
_like_esÿ³_chr
 = '!';

78 
$this
->
_like_esÿ³_¡r
 = " ESCAPE '%s' ";

79 
$this
->
_like_esÿ³_chr
 = '!';

82 
$this
->
ho¡Çme
 .ğ";dbÇme=".$this->
d©aba£
;

83 
$this
->
Œªs_’abËd
 = 
FALSE
;

85 
$this
->
_¿ndom_keywÜd
 = ' RND('.
	`time
().')';

94 
funùiÚ
 
	$db_cÚÃù
()

96 
$this
->
İtiÚs
['PDO::ATTR_ERRMODE'] = 
PDO
::
ERRMODE_SILENT
;

98  
Ãw
 
	`PDO
(
$this
->
ho¡Çme
, $this->
u£ºame
, $this->
·sswÜd
, $this->
İtiÚs
);

99 
	}
}

109 
funùiÚ
 
	$db_pcÚÃù
()

111 
$this
->
İtiÚs
['PDO::ATTR_ERRMODE'] = 
PDO
::
ERRMODE_SILENT
;

112 
$this
->
İtiÚs
['PDO::ATTR_PERSISTENT'] = 
TRUE
;

114  
Ãw
 
	`PDO
(
$this
->
ho¡Çme
, $this->
u£ºame
, $this->
·sswÜd
, $this->
İtiÚs
);

115 
	}
}

128 
funùiÚ
 
	$»cÚÃù
()

130 ià(
$this
->
db
->
db_debug
)

132  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

134  
FALSE
;

135 
	}
}

145 
funùiÚ
 
	$db_£Ëù
()

148  
TRUE
;

149 
	}
}

161 
funùiÚ
 
	$db_£t_ch¬£t
(
$ch¬£t
, 
$cŞÏtiÚ
)

164  
TRUE
;

165 
	}
}

175 
funùiÚ
 
	$_v”siÚ
()

177  
$this
->
cÚn_id
->
	`g‘A‰ribu‹
(
PDO
::
ATTR_CLIENT_VERSION
);

178 
	}
}

189 
funùiÚ
 
	$_execu‹
(
$sql
)

191 
$sql
 = 
$this
->
	`_´•_qu”y
($sql);

192 
$»suÉ_id
 = 
$this
->
cÚn_id
->
	`qu”y
(
$sql
);

194 ià(
	`is_objeù
(
$»suÉ_id
))

196 
$this
->
afãù_rows
 = 
$»suÉ_id
->
	`rowCouÁ
();

200 
$this
->
afãù_rows
 = 0;

203  
$»suÉ_id
;

204 
	}
}

217 
funùiÚ
 
	$_´•_qu”y
(
$sql
)

219  
$sql
;

220 
	}
}

230 
funùiÚ
 
	$Œªs_begš
(
$‹¡_mode
 = 
FALSE
)

232 iàĞ! 
$this
->
Œªs_’abËd
)

234  
TRUE
;

238 ià(
$this
->
_Œªs_d•th
 > 0)

240  
TRUE
;

246 
$this
->
_Œªs_çu»
 = (
boŞ
è(
$‹¡_mode
 ==ğ
TRUE
);

248  
$this
->
cÚn_id
->
	`begšT¿n§ùiÚ
();

249 
	}
}

259 
funùiÚ
 
	$Œªs_comm™
()

261 iàĞ! 
$this
->
Œªs_’abËd
)

263  
TRUE
;

267 ià(
$this
->
_Œªs_d•th
 > 0)

269  
TRUE
;

272 
$»t
 = 
$this
->
cÚn
->
	`comm™
();

273  
$»t
;

274 
	}
}

284 
funùiÚ
 
	$Œªs_rŞlback
()

286 iàĞ! 
$this
->
Œªs_’abËd
)

288  
TRUE
;

292 ià(
$this
->
_Œªs_d•th
 > 0)

294  
TRUE
;

297 
$»t
 = 
$this
->
cÚn_id
->
	`rŞlBack
();

298  
$»t
;

299 
	}
}

311 
funùiÚ
 
	$esÿ³_¡r
(
$¡r
, 
$like
 = 
FALSE
)

313 ià(
	`is_¬¿y
(
$¡r
))

315 
	`fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

317 
$¡r
[
$key
] = 
$this
->
	`esÿ³_¡r
(
$v®
, 
$like
);

320  
$¡r
;

324 
$¡r
 = 
$this
->
cÚn_id
->
	`quÙe
($str);

327 ià(
	`¡½os
(
$¡r
, "'") === 0)

329 
$¡r
 = 
	`sub¡r
($str, 1, -1);

333 ià(
$like
 ==ğ
TRUE
)

335 
$¡r
 = 
	`¡r_»¶aû
Ğ
	`¬¿y
('%', '_', 
$this
->
_like_esÿ³_chr
),

336 
	`¬¿y
(
$this
->
_like_esÿ³_chr
.'%', $this->_like_escape_chr.'_', $this->_like_escape_chr.$this->_like_escape_chr),

337 
$¡r
);

340  
$¡r
;

341 
	}
}

351 
funùiÚ
 
	$afãùed_rows
()

353  
$this
->
afãù_rows
;

354 
	}
}

364 
funùiÚ
 
	$š£¹_id
(
$Çme
=
NULL
)

367 ià(
	`¡½os
(
$this
->
ho¡Çme
, 'pgsql'è!=ğ
FALSE
)

369 
$v
 = 
$this
->
	`_v”siÚ
();

371 
$bË
 = 
	`func_num_¬gs
(è> 0 ? 
	`func_g‘_¬g
(0è: 
NULL
;

373 ià(
$bË
 =ğ
NULL
 && 
$v
 >= '8.1')

375 
$sql
='SELECT LASTVAL()‡s ins_id';

377 
$qu”y
 = 
$this
->
	`qu”y
(
$sql
);

378 
$row
 = 
$qu”y
->
	`row
();

379  
$row
->
šs_id
;

383  
$this
->
cÚn_id
->
	`Ï¡In£¹Id
(
$Çme
);

385 
	}
}

399 
funùiÚ
 
couÁ_®l
(
$bË
 = '')

401 ià(
$bË
 == '')

406 
	g$qu”y
 = 
$this
->
qu”y
($this->
_couÁ_¡ršg
 . $this->
_´Ùeù_id’tif›rs
('numrows'è. " FROM " . $this->_´Ùeù_id’tif›rs(
$bË
, 
TRUE
, 
NULL
, 
FALSE
));

408 ià(
	g$qu”y
->
num_rows
() == 0)

413 
	g$row
 = 
$qu”y
->
row
();

414 
	g$this
->
_»£t_£Ëù
();

415  (è
	g$row
->
	gnumrows
;

429 
funùiÚ
 
	$_li¡_bËs
(
$´efix_lim™
 = 
FALSE
)

431 
$sql
 = "SHOW TABLES FROM `".
$this
->
d©aba£
."`";

433 ià(
$´efix_lim™
 !=ğ
FALSE
 
AND
 
$this
->
db´efix
 != '')

436  
FALSE
;

439  
$sql
;

440 
	}
}

453 
funùiÚ
 
_li¡_cŞumns
(
$bË
 = '')

455  "SHOW COLUMNS FROM ".
$bË
;

469 
funùiÚ
 
	$_f›ld_d©a
(
$bË
)

471  "SELECT TOP 1 FROM ".
$bË
;

472 
	}
}

482 
funùiÚ
 
	$_”rÜ_mes§ge
()

484 
$”rÜ_¬¿y
 = 
$this
->
cÚn_id
->
	`”rÜInfo
();

485  
$”rÜ_¬¿y
[2];

486 
	}
}

496 
funùiÚ
 
	$_”rÜ_numb”
()

498  
$this
->
cÚn_id
->
	`”rÜCode
();

499 
	}
}

512 
funùiÚ
 
	$_esÿ³_id’tif›rs
(
$™em
)

514 ià(
$this
->
_esÿ³_ch¬
 == '')

516  
$™em
;

519 
	`fÜ—ch
 (
$this
->
_»£rved_id’tif›rs
 
as
 
$id
)

521 ià(
	`¡½os
(
$™em
, '.'.
$id
è!=ğ
FALSE
)

523 
$¡r
 = 
$this
->
_esÿ³_ch¬
. 
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.', 
$™em
);

526  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

530 ià(
	`¡½os
(
$™em
, '.'è!=ğ
FALSE
)

532 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.'.$this->_esÿ³_ch¬, 
$™em
).$this->_escape_char;

537 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
$™em
.$this->_escape_char;

541  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

542 
	}
}

556 
funùiÚ
 
	$_äom_bËs
(
$bËs
)

558 iàĞ! 
	`is_¬¿y
(
$bËs
))

560 
$bËs
 = 
	`¬¿y
($tables);

563  (
	`couÁ
(
$bËs
è=ğ1è? $bËs[0] : '('.
	`im¶ode
(', ', $tables).')';

564 
	}
}

579 
funùiÚ
 
	$_š£¹
(
$bË
, 
$keys
, 
$v®ues
)

581  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES (".im¶ode(', ', 
$v®ues
).")";

582 
	}
}

597 
funùiÚ
 
	$_š£¹_b©ch
(
$bË
, 
$keys
, 
$v®ues
)

599  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES ".im¶ode(', ', 
$v®ues
);

600 
	}
}

617 
funùiÚ
 
_upd©e
(
$bË
, 
$v®ues
, 
$wh”e
, 
$Üd”by
 = 
¬¿y
(), 
$lim™
 = 
FALSE
)

619 
fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

621 
$v®¡r
[] = 
$key
." = ".
$v®
;

624 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

626 
	g$Üd”by
 = (
couÁ
(
$Üd”by
è>ğ1)?' ORDER BY '.
im¶ode
(", ", $orderby):'';

628 
	g$sql
 = "UPDATE ".
$bË
." SET ".
im¶ode
(', ', 
$v®¡r
);

630 
	g$sql
 .ğ(
$wh”e
 !ğ'' 
AND
 
couÁ
($wh”eè>=1è? " WHERE ".
im¶ode
(" ", $where) : '';

632 
	g$sql
 .ğ
$Üd”by
.
$lim™
;

634  
	g$sql
;

650 
funùiÚ
 
	$_upd©e_b©ch
(
$bË
, 
$v®ues
, 
$šdex
, 
$wh”e
 = 
NULL
)

652 
$ids
 = 
	`¬¿y
();

653 
$wh”e
 = ($wh”!ğ'' 
AND
 
	`couÁ
($wh”eè>=1è? 
	`im¶ode
(" ", $where).' AND ' : '';

655 
	`fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

657 
$ids
[] = 
$v®
[
$šdex
];

659 
	`fÜ—ch
 (
	`¬¿y_keys
(
$v®
è
as
 
$f›ld
)

661 ià(
$f›ld
 !ğ
$šdex
)

663 
$fš®
[
$f›ld
][] = 'WHEN '.
$šdex
.' = '.
$v®
[$index].' THEN '.$val[$field];

668 
$sql
 = "UPDATE ".
$bË
." SET ";

669 
$ÿ£s
 = '';

671 
	`fÜ—ch
 (
$fš®
 
as
 
$k
 => 
$v
)

673 
$ÿ£s
 .ğ
$k
.' = CASE '."\n";

674 
	`fÜ—ch
 (
$v
 
as
 
$row
)

676 
$ÿ£s
 .ğ
$row
."\n";

679 
$ÿ£s
 .ğ'ELSE '.
$k
.' END, ';

682 
$sql
 .ğ
	`sub¡r
(
$ÿ£s
, 0, -2);

684 
$sql
 .ğ' WHERE '.
$wh”e
.
$šdex
.' IN ('.
	`im¶ode
(',', 
$ids
).')';

686  
$sql
;

687 
	}
}

703 
funùiÚ
 
	$_Œunÿ‹
(
$bË
)

705  
$this
->
	`_d–‘e
(
$bË
);

706 
	}
}

721 
funùiÚ
 
_d–‘e
(
$bË
, 
$wh”e
 = 
¬¿y
(), 
$like
 =‡¼ay(), 
$lim™
 = 
FALSE
)

723 
$cÚd™iÚs
 = '';

725 ià(
couÁ
(
$wh”e
è> 0 
OR
 couÁ(
$like
) > 0)

727 
	g$cÚd™iÚs
 = "\nWHERE ";

728 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$this
->
¬_wh”e
);

730 ià(
couÁ
(
$wh”e
è> 0 && couÁ(
$like
) > 0)

732 
	g$cÚd™iÚs
 .= " AND ";

734 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$like
);

737 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

739  "DELETE FROM ".
	g$bË
.
	g$cÚd™iÚs
.
	g$lim™
;

755 
funùiÚ
 
	$_lim™
(
$sql
, 
$lim™
, 
$off£t
)

757 ià(
	`¡½os
(
$this
->
ho¡Çme
, 'cubrid'è!=ğ
FALSE
 || strpos($this->hostname, 'sqlite') !== FALSE)

759 ià(
$off£t
 == 0)

761 
$off£t
 = '';

765 
$off£t
 .= ", ";

768  
$sql
."LIMIT ".
$off£t
.
$lim™
;

772 
$sql
 .ğ"LIMIT ".
$lim™
;

774 ià(
$off£t
 > 0)

776 
$sql
 .ğ" OFFSET ".
$off£t
;

779  
$sql
;

781 
	}
}

792 
funùiÚ
 
	$_şo£
(
$cÚn_id
)

794 
$this
->
cÚn_id
 = 
nuÎ
;

795 
	}
}

	@system/database/drivers/postgre/postgre_driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

31 şas 
	cCI_DB_po¡g»_driv”
 
ex‹nds
 
	mCI_DB
 {

33 
v¬
 
	m$dbdriv”
 = 'postgre';

35 
v¬
 
	m$_esÿ³_ch¬
 = '"';

38 
v¬
 
	m$_like_esÿ³_¡r
 = " ESCAPE '%s' ";

39 
v¬
 
	m$_like_esÿ³_chr
 = '!';

46 
v¬
 
	m$_couÁ_¡ršg
 = "SELECT COUNT(*) AS ";

47 
v¬
 
	m$_¿ndom_keywÜd
 = ' RANDOM()';

55 
funùiÚ
 
	$_cÚÃù_¡ršg
()

57 
$compÚ’ts
 = 
	`¬¿y
(

65 
$cÚÃù_¡ršg
 = "";

66 
	`fÜ—ch
 (
$compÚ’ts
 
as
 
$key
 => 
$v®
)

68 ià(
	`is£t
(
$this
->
$key
) && $this->$key != '')

70 
$cÚÃù_¡ršg
 .ğ" $v®=".
$this
->
$key
;

73  
	`Œim
(
$cÚÃù_¡ršg
);

84 
funùiÚ
 
	$db_cÚÃù
()

86  @
	`pg_cÚÃù
(
$this
->
	`_cÚÃù_¡ršg
());

87 
	}
}

97 
funùiÚ
 
	$db_pcÚÃù
()

99  @
	`pg_pcÚÃù
(
$this
->
	`_cÚÃù_¡ršg
());

100 
	}
}

113 
funùiÚ
 
	$»cÚÃù
()

115 ià(
	`pg_pšg
(
$this
->
cÚn_id
è==ğ
FALSE
)

117 
$this
->
cÚn_id
 = 
FALSE
;

119 
	}
}

129 
funùiÚ
 
	$db_£Ëù
()

132  
TRUE
;

133 
	}
}

145 
funùiÚ
 
	$db_£t_ch¬£t
(
$ch¬£t
, 
$cŞÏtiÚ
)

148  
TRUE
;

149 
	}
}

159 
funùiÚ
 
	$_v”siÚ
()

162 
	}
}

173 
funùiÚ
 
	$_execu‹
(
$sql
)

175 
$sql
 = 
$this
->
	`_´•_qu”y
($sql);

176  @
	`pg_qu”y
(
$this
->
cÚn_id
, 
$sql
);

177 
	}
}

190 
funùiÚ
 
	$_´•_qu”y
(
$sql
)

192  
$sql
;

193 
	}
}

203 
funùiÚ
 
	$Œªs_begš
(
$‹¡_mode
 = 
FALSE
)

205 iàĞ! 
$this
->
Œªs_’abËd
)

207  
TRUE
;

211 ià(
$this
->
_Œªs_d•th
 > 0)

213  
TRUE
;

219 
$this
->
_Œªs_çu»
 = (
$‹¡_mode
 ==ğ
TRUE
è? TRUE : 
FALSE
;

221  @
	`pg_exec
(
$this
->
cÚn_id
, "begin");

222 
	}
}

232 
funùiÚ
 
	$Œªs_comm™
()

234 iàĞ! 
$this
->
Œªs_’abËd
)

236  
TRUE
;

240 ià(
$this
->
_Œªs_d•th
 > 0)

242  
TRUE
;

245  @
	`pg_exec
(
$this
->
cÚn_id
, "commit");

246 
	}
}

256 
funùiÚ
 
	$Œªs_rŞlback
()

258 iàĞ! 
$this
->
Œªs_’abËd
)

260  
TRUE
;

264 ià(
$this
->
_Œªs_d•th
 > 0)

266  
TRUE
;

269  @
	`pg_exec
(
$this
->
cÚn_id
, "rollback");

270 
	}
}

282 
funùiÚ
 
	$esÿ³_¡r
(
$¡r
, 
$like
 = 
FALSE
)

284 ià(
	`is_¬¿y
(
$¡r
))

286 
	`fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

288 
$¡r
[
$key
] = 
$this
->
	`esÿ³_¡r
(
$v®
, 
$like
);

291  
$¡r
;

294 
$¡r
 = 
	`pg_esÿ³_¡ršg
($str);

297 ià(
$like
 ==ğ
TRUE
)

299 
$¡r
 = 
	`¡r_»¶aû
Ğ
	`¬¿y
('%', '_', 
$this
->
_like_esÿ³_chr
),

300 
	`¬¿y
(
$this
->
_like_esÿ³_chr
.'%', $this->_like_escape_chr.'_', $this->_like_escape_chr.$this->_like_escape_chr),

301 
$¡r
);

304  
$¡r
;

305 
	}
}

315 
funùiÚ
 
	$afãùed_rows
()

317  @
	`pg_afãùed_rows
(
$this
->
»suÉ_id
);

318 
	}
}

328 
funùiÚ
 
	$š£¹_id
()

330 
$v
 = 
$this
->
	`_v”siÚ
();

331 
$v
 = $v['server'];

333 
$bË
 = 
	`func_num_¬gs
(è> 0 ? 
	`func_g‘_¬g
(0è: 
NULL
;

334 
$cŞumn
 = 
	`func_num_¬gs
(è> 1 ? 
	`func_g‘_¬g
(1è: 
NULL
;

336 ià(
$bË
 =ğ
NULL
 && 
$v
 >= '8.1')

338 
$sql
='SELECT LASTVAL()‡s ins_id';

340 
	`–£if
 (
$bË
 !ğ
NULL
 && 
$cŞumn
 !ğNULL && 
$v
 >= '8.0')

342 
$sql
 = 
	`¥rštf
("SELECT…g_g‘_£rŸl_£qu’û('%s','%s'èa £q", 
$bË
, 
$cŞumn
);

343 
$qu”y
 = 
$this
->
	`qu”y
(
$sql
);

344 
$row
 = 
$qu”y
->
	`row
();

345 
$sql
 = 
	`¥rštf
("SELECT CURRVAL('%s'èa šs_id", 
$row
->
£q
);

347 
	`–£if
 (
$bË
 !ğ
NULL
)

350 
$sql
 = 
	`¥rštf
("SELECT CURRVAL('%s'èa šs_id", 
$bË
);

354  
	`pg_Ï¡_oid
(
$this
->
»suÉ_id
);

356 
$qu”y
 = 
$this
->
	`qu”y
(
$sql
);

357 
$row
 = 
$qu”y
->
	`row
();

358  
$row
->
šs_id
;

359 
	}
}

373 
funùiÚ
 
couÁ_®l
(
$bË
 = '')

375 ià(
$bË
 == '')

380 
	g$qu”y
 = 
$this
->
qu”y
($this->
_couÁ_¡ršg
 . $this->
_´Ùeù_id’tif›rs
('numrows'è. " FROM " . $this->_´Ùeù_id’tif›rs(
$bË
, 
TRUE
, 
NULL
, 
FALSE
));

382 ià(
	g$qu”y
->
num_rows
() == 0)

387 
	g$row
 = 
$qu”y
->
row
();

388 
	g$this
->
_»£t_£Ëù
();

389  (è
	g$row
->
	gnumrows
;

403 
funùiÚ
 
	$_li¡_bËs
(
$´efix_lim™
 = 
FALSE
)

405 
$sql
 = "SELECTable_name FROM information_schema.tables WHEREable_schema = 'public'";

407 ià(
$´efix_lim™
 !=ğ
FALSE
 
AND
 
$this
->
db´efix
 != '')

409 
$sql
 .ğ" ANDabË_ÇmLIKE '".
$this
->
	`esÿ³_like_¡r
($this->
db´efix
)."%' ".
	`¥rštf
($this->
_like_esÿ³_¡r
, $this->
_like_esÿ³_chr
);

412  
$sql
;

413 
	}
}

426 
funùiÚ
 
_li¡_cŞumns
(
$bË
 = '')

428  "SELECT cŞumn_ÇmFROM infÜm©iÚ_schema.cŞumn WHEREabË_Çm='".
$bË
."'";

442 
funùiÚ
 
	$_f›ld_d©a
(
$bË
)

444  "SELECT * FROM ".
$bË
." LIMIT 1";

445 
	}
}

455 
funùiÚ
 
	$_”rÜ_mes§ge
()

457  
	`pg_Ï¡_”rÜ
(
$this
->
cÚn_id
);

458 
	}
}

468 
funùiÚ
 
	$_”rÜ_numb”
()

471 
	}
}

484 
funùiÚ
 
	$_esÿ³_id’tif›rs
(
$™em
)

486 ià(
$this
->
_esÿ³_ch¬
 == '')

488  
$™em
;

491 
	`fÜ—ch
 (
$this
->
_»£rved_id’tif›rs
 
as
 
$id
)

493 ià(
	`¡½os
(
$™em
, '.'.
$id
è!=ğ
FALSE
)

495 
$¡r
 = 
$this
->
_esÿ³_ch¬
. 
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.', 
$™em
);

498  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

502 ià(
	`¡½os
(
$™em
, '.'è!=ğ
FALSE
)

504 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.'.$this->_esÿ³_ch¬, 
$™em
).$this->_escape_char;

508 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
$™em
.$this->_escape_char;

512  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

513 
	}
}

527 
funùiÚ
 
	$_äom_bËs
(
$bËs
)

529 iàĞ! 
	`is_¬¿y
(
$bËs
))

531 
$bËs
 = 
	`¬¿y
($tables);

534  
	`im¶ode
(', ', 
$bËs
);

535 
	}
}

550 
funùiÚ
 
	$_š£¹
(
$bË
, 
$keys
, 
$v®ues
)

552  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES (".im¶ode(', ', 
$v®ues
).")";

553 
	}
}

568 
funùiÚ
 
	$_š£¹_b©ch
(
$bË
, 
$keys
, 
$v®ues
)

570  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES ".im¶ode(', ', 
$v®ues
);

571 
	}
}

588 
funùiÚ
 
_upd©e
(
$bË
, 
$v®ues
, 
$wh”e
, 
$Üd”by
 = 
¬¿y
(), 
$lim™
 = 
FALSE
)

590 
fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

592 
$v®¡r
[] = 
$key
." = ".
$v®
;

595 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

597 
	g$Üd”by
 = (
couÁ
(
$Üd”by
è>ğ1)?' ORDER BY '.
im¶ode
(", ", $orderby):'';

599 
	g$sql
 = "UPDATE ".
$bË
." SET ".
im¶ode
(', ', 
$v®¡r
);

601 
	g$sql
 .ğ(
$wh”e
 !ğ'' 
AND
 
couÁ
($wh”eè>=1è? " WHERE ".
im¶ode
(" ", $where) : '';

603 
	g$sql
 .ğ
$Üd”by
.
$lim™
;

605  
	g$sql
;

621 
funùiÚ
 
	$_Œunÿ‹
(
$bË
)

623  "TRUNCATE ".
$bË
;

624 
	}
}

639 
funùiÚ
 
_d–‘e
(
$bË
, 
$wh”e
 = 
¬¿y
(), 
$like
 =‡¼ay(), 
$lim™
 = 
FALSE
)

641 
$cÚd™iÚs
 = '';

643 ià(
couÁ
(
$wh”e
è> 0 
OR
 couÁ(
$like
) > 0)

645 
	g$cÚd™iÚs
 = "\nWHERE ";

646 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$this
->
¬_wh”e
);

648 ià(
couÁ
(
$wh”e
è> 0 && couÁ(
$like
) > 0)

650 
	g$cÚd™iÚs
 .= " AND ";

652 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$like
);

655 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

657  "DELETE FROM ".
	g$bË
.
	g$cÚd™iÚs
.
	g$lim™
;

672 
funùiÚ
 
	$_lim™
(
$sql
, 
$lim™
, 
$off£t
)

674 
$sql
 .ğ"LIMIT ".
$lim™
;

676 ià(
$off£t
 > 0)

678 
$sql
 .ğ" OFFSET ".
$off£t
;

681  
$sql
;

682 
	}
}

693 
funùiÚ
 
	$_şo£
(
$cÚn_id
)

695 @
	`pg_şo£
(
$cÚn_id
);

696 
	}
}

	@system/database/drivers/postgre/postgre_forge.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_po¡g»_fÜge
 
ex‹nds
 
	mCI_DB_fÜge
 {

34 
funùiÚ
 
	$_ü—‹_d©aba£
(
$Çme
)

36  "CREATE DATABASE ".
$Çme
;

48 
funùiÚ
 
	$_drİ_d©aba£
(
$Çme
)

50  "DROP DATABASE ".
$Çme
;

51 
	}
}

66 
funùiÚ
 
	$_ü—‹_bË
(
$bË
, 
$f›lds
, 
$´im¬y_keys
, 
$keys
, 
$if_nÙ_exi¡s
)

68 
$sql
 = 'CREATE TABLE ';

70 ià(
$if_nÙ_exi¡s
 ==ğ
TRUE
)

72 ià(
$this
->
db
->
	`bË_exi¡s
(
$bË
))

78 
$sql
 .ğ
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
)." (";

79 
$cu¼’t_f›ld_couÁ
 = 0;

81 
	`fÜ—ch
 (
$f›lds
 
as
 
$f›ld
=>
$©Œibu‹s
)

86 ià(
	`is_num”ic
(
$f›ld
))

88 
$sql
 .= "\n\t$attributes";

92 
$©Œibu‹s
 = 
	`¬¿y_chªge_key_ÿ£
($©Œibu‹s, 
CASE_UPPER
);

94 
$sql
 .ğ"\n\t".
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$f›ld
);

96 
$is_unsigÃd
 = (
	`¬¿y_key_exi¡s
('UNSIGNED', 
$©Œibu‹s
è&& $©Œibu‹s['UNSIGNED'] ==ğ
TRUE
);

99 
	`¡¹ouµ”
(
$©Œibu‹s
['TYPE']))

102 
$©Œibu‹s
['TYPE'] = 'SMALLINT';

105 
$©Œibu‹s
['TYPE'] = (
$is_unsigÃd
) ? 'INTEGER' : 'SMALLINT';

108 
$©Œibu‹s
['TYPE'] = 'INTEGER';

111 
$©Œibu‹s
['TYPE'] = (
$is_unsigÃd
) ? 'BIGINT' : 'INTEGER';

114 
$©Œibu‹s
['TYPE'] = (
$is_unsigÃd
) ? 'NUMERIC' : 'BIGINT';

117 
$©Œibu‹s
['TYPE'] = 'DOUBLE PRECISION';

120 
$©Œibu‹s
['TYPE'] = 'TIMESTAMP';

123 
$©Œibu‹s
['TYPE'] = 'TEXT';

126 
$©Œibu‹s
['TYPE'] = 'BYTEA';

131 ià(
	`š_¬¿y
(
$f›ld
, 
$´im¬y_keys
è&& 
	`¬¿y_key_exi¡s
('AUTO_INCREMENT', 
$©Œibu‹s
)

132 && 
$©Œibu‹s
['AUTO_INCREMENT'] ==ğ
TRUE
)

134 
$sql
 .= ' SERIAL';

138 
$sql
 .ğ' '.
$©Œibu‹s
['TYPE'];

142 ià(
	`¬¿y_key_exi¡s
('CONSTRAINT', 
$©Œibu‹s
è&& 
	`¡½os
($©Œibu‹s['TYPE'], 'INT'è==ğ
çl£
)

144 
$sql
 .ğ'('.
$©Œibu‹s
['CONSTRAINT'].')';

147 ià(
	`¬¿y_key_exi¡s
('DEFAULT', 
$©Œibu‹s
))

149 
$sql
 .ğ' DEFAULT \''.
$©Œibu‹s
['DEFAULT'].'\'';

152 ià(
	`¬¿y_key_exi¡s
('NULL', 
$©Œibu‹s
è&& $©Œibu‹s['NULL'] ==ğ
TRUE
)

154 
$sql
 .= ' NULL';

158 
$sql
 .= ' NOT NULL';

162 ià(
	`¬¿y_key_exi¡s
('UNIQUE', 
$©Œibu‹s
è&& $©Œibu‹s['UNIQUE'] ==ğ
TRUE
)

164 
$sql
 .= ' UNIQUE';

169 ià(++
$cu¼’t_f›ld_couÁ
 < 
	`couÁ
(
$f›lds
))

171 
$sql
 .= ',';

175 ià(
	`couÁ
(
$´im¬y_keys
) > 0)

178 
	`fÜ—ch
 (
$´im¬y_keys
 
as
 
$šdex
 => 
$key
)

180 
$´im¬y_keys
[
$šdex
] = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$key
);

183 
$sql
 .ğ",\n\tPRIMARY KEY (" . 
	`im¶ode
(', ', 
$´im¬y_keys
) . ")";

186 
$sql
 .= "\n);";

188 ià(
	`is_¬¿y
(
$keys
è&& 
	`couÁ
($keys) > 0)

190 
	`fÜ—ch
 (
$keys
 
as
 
$key
)

192 ià(
	`is_¬¿y
(
$key
))

194 
$key
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key);

198 
$key
 = 
	`¬¿y
(
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key));

201 
	`fÜ—ch
 (
$key
 
as
 
$f›ld
)

203 
$sql
 .ğ"CREATE INDEX " . 
$bË
 . "_" . 
	`¡r_»¶aû
(
	`¬¿y
('"', "'"), '', 
$f›ld
) . "_index ON $table ($field); ";

208  
$sql
;

209 
	}
}

219 
funùiÚ
 
	$_drİ_bË
(
$bË
)

221  "DROP TABLE IF EXISTS ".
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
)." CASCADE";

222 
	}
}

242 
funùiÚ
 
_®‹r_bË
(
$®‹r_ty³
, 
$bË
, 
$cŞumn_Çme
, 
$cŞumn_defš™iÚ
 = '', 
$deçuÉ_v®ue
 = '', 
$nuÎ
 = '', 
$aá”_f›ld
 = '')

244 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$bË
)." $®‹r_ty³ ".$this->db->_´Ùeù_id’tif›rs(
$cŞumn_Çme
);

247 ià(
	g$®‹r_ty³
 == 'DROP')

249  
$sql
;

252 
	g$sql
 .= " $column_definition";

254 ià(
	g$deçuÉ_v®ue
 != '')

256 
$sql
 .= " DEFAULT \"$default_value\"";

259 ià(
	g$nuÎ
 ==ğ
NULL
)

261 
$sql
 .= ' NULL';

265 
	g$sql
 .= ' NOT NULL';

268 ià(
	g$aá”_f›ld
 != '')

270 
$sql
 .ğ' AFTER ' . 
$this
->
db
->
_´Ùeù_id’tif›rs
(
$aá”_f›ld
);

273  
	g$sql
;

289 
funùiÚ
 
	$_»Çme_bË
(
$bË_Çme
, 
$Ãw_bË_Çme
)

291 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$bË_Çme
)." RENAME TO ".$this->db->_´Ùeù_id’tif›rs(
$Ãw_bË_Çme
);

292  
$sql
;

293 
	}
}

	@system/database/drivers/postgre/postgre_result.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_DB_po¡g»_»suÉ
 
ex‹nds
 
	mCI_DB_»suÉ
 {

35 
funùiÚ
 
	$num_rows
()

37  @
	`pg_num_rows
(
$this
->
»suÉ_id
);

48 
funùiÚ
 
	$num_f›lds
()

50  @
	`pg_num_f›lds
(
$this
->
»suÉ_id
);

51 
	}
}

63 
funùiÚ
 
	$li¡_f›lds
()

65 
$f›ld_Çmes
 = 
	`¬¿y
();

66 
$i
 = 0; $˜< 
$this
->
	`num_f›lds
(); $i++)

68 
$f›ld_Çmes
[] = 
	`pg_f›ld_Çme
(
$this
->
»suÉ_id
, 
$i
);

71  
$f›ld_Çmes
;

72 
	}
}

84 
funùiÚ
 
	$f›ld_d©a
()

86 
$»tv®
 = 
	`¬¿y
();

87 
$i
 = 0; $˜< 
$this
->
	`num_f›lds
(); $i++)

89 
$F
 = 
Ãw
 
	`¡dCÏss
();

90 
$F
->
Çme
 = 
	`pg_f›ld_Çme
(
$this
->
»suÉ_id
, 
$i
);

91 
$F
->
ty³
 = 
	`pg_f›ld_ty³
(
$this
->
»suÉ_id
, 
$i
);

92 
$F
->
max_Ëngth
 = 
	`pg_f›ld_size
(
$this
->
»suÉ_id
, 
$i
);

93 
$F
->
´im¬y_key
 = 0;

94 
$F
-> = '';

96 
$»tv®
[] = 
$F
;

99  
$»tv®
;

100 
	}
}

109 
funùiÚ
 
	$ä“_»suÉ
()

111 ià(
	`is_»sourû
(
$this
->
»suÉ_id
))

113 
	`pg_ä“_»suÉ
(
$this
->
»suÉ_id
);

114 
$this
->
»suÉ_id
 = 
FALSE
;

116 
	}
}

130 
funùiÚ
 
	$_d©a_£ek
(
$n
 = 0)

132  
	`pg_»suÉ_£ek
(
$this
->
»suÉ_id
, 
$n
);

133 
	}
}

145 
funùiÚ
 
	$_ãtch_assoc
()

147  
	`pg_ãtch_assoc
(
$this
->
»suÉ_id
);

148 
	}
}

160 
funùiÚ
 
	$_ãtch_objeù
()

162  
	`pg_ãtch_objeù
(
$this
->
»suÉ_id
);

163 
	}
}

	@system/database/drivers/postgre/postgre_utility.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_po¡g»_ut™y
 
ex‹nds
 
	mCI_DB_ut™y
 {

33 
funùiÚ
 
	$_li¡_d©aba£s
()

49 
funùiÚ
 
	$_İtimize_bË
(
$bË
)

51  
FALSE
;

52 
	}
}

65 
funùiÚ
 
	$_»·œ_bË
(
$bË
)

67  
FALSE
;

68 
	}
}

79 
funùiÚ
 
_backup
(
$·¿ms
 = 
	$¬¿y
())

82  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

83 
	}
}

	@system/database/drivers/sqlite/sqlite_driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

33 şas 
	cCI_DB_sql™e_driv”
 
ex‹nds
 
	mCI_DB
 {

35 
v¬
 
	m$dbdriv”
 = 'sqlite';

38 
v¬
 
	m$_esÿ³_ch¬
 = '';

41 
v¬
 
	m$_like_esÿ³_¡r
 = " ESCAPE '%s' ";

42 
v¬
 
	m$_like_esÿ³_chr
 = '!';

49 
v¬
 
	m$_couÁ_¡ršg
 = "SELECT COUNT(*) AS ";

50 
v¬
 
	m$_¿ndom_keywÜd
 = ' Random()';

58 
funùiÚ
 
	$db_cÚÃù
()

60 iàĞ! 
$cÚn_id
 = @
	`sql™e_İ’
(
$this
->
d©aba£
, 
FILE_WRITE_MODE
, 
$”rÜ
))

62 
	`log_mes§ge
('”rÜ', 
$”rÜ
);

64 ià(
$this
->
db_debug
)

66 
$this
->
	`di¥Ïy_”rÜ
(
$”rÜ
, '', 
TRUE
);

69  
FALSE
;

72  
$cÚn_id
;

83 
funùiÚ
 
	$db_pcÚÃù
()

85 iàĞ! 
$cÚn_id
 = @
	`sql™e_pİ’
(
$this
->
d©aba£
, 
FILE_WRITE_MODE
, 
$”rÜ
))

87 
	`log_mes§ge
('”rÜ', 
$”rÜ
);

89 ià(
$this
->
db_debug
)

91 
$this
->
	`di¥Ïy_”rÜ
(
$”rÜ
, '', 
TRUE
);

94  
FALSE
;

97  
$cÚn_id
;

98 
	}
}

111 
funùiÚ
 
	$»cÚÃù
()

114 
	}
}

124 
funùiÚ
 
	$db_£Ëù
()

126  
TRUE
;

127 
	}
}

139 
funùiÚ
 
	$db_£t_ch¬£t
(
$ch¬£t
, 
$cŞÏtiÚ
)

142  
TRUE
;

143 
	}
}

153 
funùiÚ
 
	$_v”siÚ
()

155  
	`sql™e_libv”siÚ
();

156 
	}
}

167 
funùiÚ
 
	$_execu‹
(
$sql
)

169 
$sql
 = 
$this
->
	`_´•_qu”y
($sql);

170  @
	`sql™e_qu”y
(
$this
->
cÚn_id
, 
$sql
);

171 
	}
}

184 
funùiÚ
 
	$_´•_qu”y
(
$sql
)

186  
$sql
;

187 
	}
}

197 
funùiÚ
 
	$Œªs_begš
(
$‹¡_mode
 = 
FALSE
)

199 iàĞ! 
$this
->
Œªs_’abËd
)

201  
TRUE
;

205 ià(
$this
->
_Œªs_d•th
 > 0)

207  
TRUE
;

213 
$this
->
_Œªs_çu»
 = (
$‹¡_mode
 ==ğ
TRUE
è? TRUE : 
FALSE
;

215 
$this
->
	`sim¶e_qu”y
('BEGIN TRANSACTION');

216  
TRUE
;

217 
	}
}

227 
funùiÚ
 
	$Œªs_comm™
()

229 iàĞ! 
$this
->
Œªs_’abËd
)

231  
TRUE
;

235 ià(
$this
->
_Œªs_d•th
 > 0)

237  
TRUE
;

240 
$this
->
	`sim¶e_qu”y
('COMMIT');

241  
TRUE
;

242 
	}
}

252 
funùiÚ
 
	$Œªs_rŞlback
()

254 iàĞ! 
$this
->
Œªs_’abËd
)

256  
TRUE
;

260 ià(
$this
->
_Œªs_d•th
 > 0)

262  
TRUE
;

265 
$this
->
	`sim¶e_qu”y
('ROLLBACK');

266  
TRUE
;

267 
	}
}

279 
funùiÚ
 
	$esÿ³_¡r
(
$¡r
, 
$like
 = 
FALSE
)

281 ià(
	`is_¬¿y
(
$¡r
))

283 
	`fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

285 
$¡r
[
$key
] = 
$this
->
	`esÿ³_¡r
(
$v®
, 
$like
);

288  
$¡r
;

291 
$¡r
 = 
	`sql™e_esÿ³_¡ršg
($str);

294 ià(
$like
 ==ğ
TRUE
)

296 
$¡r
 = 
	`¡r_»¶aû
Ğ
	`¬¿y
('%', '_', 
$this
->
_like_esÿ³_chr
),

297 
	`¬¿y
(
$this
->
_like_esÿ³_chr
.'%', $this->_like_escape_chr.'_', $this->_like_escape_chr.$this->_like_escape_chr),

298 
$¡r
);

301  
$¡r
;

302 
	}
}

312 
funùiÚ
 
	$afãùed_rows
()

314  
	`sql™e_chªges
(
$this
->
cÚn_id
);

315 
	}
}

325 
funùiÚ
 
	$š£¹_id
()

327  @
	`sql™e_Ï¡_š£¹_rowid
(
$this
->
cÚn_id
);

328 
	}
}

342 
funùiÚ
 
couÁ_®l
(
$bË
 = '')

344 ià(
$bË
 == '')

349 
	g$qu”y
 = 
$this
->
qu”y
($this->
_couÁ_¡ršg
 . $this->
_´Ùeù_id’tif›rs
('numrows'è. " FROM " . $this->_´Ùeù_id’tif›rs(
$bË
, 
TRUE
, 
NULL
, 
FALSE
));

351 ià(
	g$qu”y
->
num_rows
() == 0)

356 
	g$row
 = 
$qu”y
->
row
();

357 
	g$this
->
_»£t_£Ëù
();

358  (è
	g$row
->
	gnumrows
;

372 
funùiÚ
 
	$_li¡_bËs
(
$´efix_lim™
 = 
FALSE
)

374 
$sql
 = "SELECT‚ame from sqlite_master WHEREype='table'";

376 ià(
$´efix_lim™
 !=ğ
FALSE
 
AND
 
$this
->
db´efix
 != '')

378 
$sql
 .ğ" AND 'Çme' LIKE '".
$this
->
	`esÿ³_like_¡r
($this->
db´efix
)."%' ".
	`¥rštf
($this->
_like_esÿ³_¡r
, $this->
_like_esÿ³_chr
);

380  
$sql
;

381 
	}
}

394 
funùiÚ
 
_li¡_cŞumns
(
$bË
 = '')

397  
FALSE
;

411 
funùiÚ
 
	$_f›ld_d©a
(
$bË
)

413  "SELECT * FROM ".
$bË
." LIMIT 1";

414 
	}
}

424 
funùiÚ
 
	$_”rÜ_mes§ge
()

426  
	`sql™e_”rÜ_¡ršg
(
	`sql™e_Ï¡_”rÜ
(
$this
->
cÚn_id
));

427 
	}
}

437 
funùiÚ
 
	$_”rÜ_numb”
()

439  
	`sql™e_Ï¡_”rÜ
(
$this
->
cÚn_id
);

440 
	}
}

453 
funùiÚ
 
	$_esÿ³_id’tif›rs
(
$™em
)

455 ià(
$this
->
_esÿ³_ch¬
 == '')

457  
$™em
;

460 
	`fÜ—ch
 (
$this
->
_»£rved_id’tif›rs
 
as
 
$id
)

462 ià(
	`¡½os
(
$™em
, '.'.
$id
è!=ğ
FALSE
)

464 
$¡r
 = 
$this
->
_esÿ³_ch¬
. 
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.', 
$™em
);

467  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

471 ià(
	`¡½os
(
$™em
, '.'è!=ğ
FALSE
)

473 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
	`¡r_»¶aû
('.', $this->_esÿ³_ch¬.'.'.$this->_esÿ³_ch¬, 
$™em
).$this->_escape_char;

477 
$¡r
 = 
$this
->
_esÿ³_ch¬
.
$™em
.$this->_escape_char;

481  
	`´eg_»¶aû
('/['.
$this
->
_esÿ³_ch¬
.']+/', $this->_esÿ³_ch¬, 
$¡r
);

482 
	}
}

496 
funùiÚ
 
	$_äom_bËs
(
$bËs
)

498 iàĞ! 
	`is_¬¿y
(
$bËs
))

500 
$bËs
 = 
	`¬¿y
($tables);

503  '('.
	`im¶ode
(', ', 
$bËs
).')';

504 
	}
}

519 
funùiÚ
 
	$_š£¹
(
$bË
, 
$keys
, 
$v®ues
)

521  "INSERT INTO ".
$bË
." (".
	`im¶ode
(', ', 
$keys
)."èVALUES (".im¶ode(', ', 
$v®ues
).")";

522 
	}
}

539 
funùiÚ
 
_upd©e
(
$bË
, 
$v®ues
, 
$wh”e
, 
$Üd”by
 = 
¬¿y
(), 
$lim™
 = 
FALSE
)

541 
fÜ—ch
 (
$v®ues
 
as
 
$key
 => 
$v®
)

543 
$v®¡r
[] = 
$key
." = ".
$v®
;

546 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

548 
	g$Üd”by
 = (
couÁ
(
$Üd”by
è>ğ1)?' ORDER BY '.
im¶ode
(", ", $orderby):'';

550 
	g$sql
 = "UPDATE ".
$bË
." SET ".
im¶ode
(', ', 
$v®¡r
);

552 
	g$sql
 .ğ(
$wh”e
 !ğ'' 
AND
 
couÁ
($wh”eè>=1è? " WHERE ".
im¶ode
(" ", $where) : '';

554 
	g$sql
 .ğ
$Üd”by
.
$lim™
;

556  
	g$sql
;

573 
funùiÚ
 
	$_Œunÿ‹
(
$bË
)

575  
$this
->
	`_d–‘e
(
$bË
);

576 
	}
}

591 
funùiÚ
 
_d–‘e
(
$bË
, 
$wh”e
 = 
¬¿y
(), 
$like
 =‡¼ay(), 
$lim™
 = 
FALSE
)

593 
$cÚd™iÚs
 = '';

595 ià(
couÁ
(
$wh”e
è> 0 
OR
 couÁ(
$like
) > 0)

597 
	g$cÚd™iÚs
 = "\nWHERE ";

598 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$this
->
¬_wh”e
);

600 ià(
couÁ
(
$wh”e
è> 0 && couÁ(
$like
) > 0)

602 
	g$cÚd™iÚs
 .= " AND ";

604 
	g$cÚd™iÚs
 .ğ
im¶ode
("\n", 
$like
);

607 
	g$lim™
 = ( ! 
$lim™
) ? '' : ' LIMIT '.$limit;

609  "DELETE FROM ".
	g$bË
.
	g$cÚd™iÚs
.
	g$lim™
;

625 
funùiÚ
 
	$_lim™
(
$sql
, 
$lim™
, 
$off£t
)

627 ià(
$off£t
 == 0)

629 
$off£t
 = '';

633 
$off£t
 .= ", ";

636  
$sql
."LIMIT ".
$off£t
.
$lim™
;

637 
	}
}

648 
funùiÚ
 
	$_şo£
(
$cÚn_id
)

650 @
	`sql™e_şo£
(
$cÚn_id
);

651 
	}
}

	@system/database/drivers/sqlite/sqlite_forge.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_sql™e_fÜge
 
ex‹nds
 
	mCI_DB_fÜge
 {

34 
funùiÚ
 
	$_ü—‹_d©aba£
()

38  
TRUE
;

50 
funùiÚ
 
	$_drİ_d©aba£
(
$Çme
)

52 iàĞ! @
	`fe_exi¡s
(
$this
->
db
->
d©aba£
è
OR
 ! @
	`uÆšk
($this->db->database))

54 ià(
$this
->
db
->
db_debug
)

56  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unable_to_drop');

58  
FALSE
;

60  
TRUE
;

61 
	}
}

75 
funùiÚ
 
	$_ü—‹_bË
(
$bË
, 
$f›lds
, 
$´im¬y_keys
, 
$keys
, 
$if_nÙ_exi¡s
)

77 
$sql
 = 'CREATE TABLE ';

80 ià(
$if_nÙ_exi¡s
 ==ğ
TRUE
 && 
	`v”siÚ_com·»
(
$this
->
db
->
	`_v”siÚ
(), '3.3.0', '>=') === TRUE)

82 
$sql
 .= 'IF NOT EXISTS ';

85 
$sql
 .ğ
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
)."(";

86 
$cu¼’t_f›ld_couÁ
 = 0;

88 
	`fÜ—ch
 (
$f›lds
 
as
 
$f›ld
=>
$©Œibu‹s
)

93 ià(
	`is_num”ic
(
$f›ld
))

95 
$sql
 .= "\n\t$attributes";

99 
$©Œibu‹s
 = 
	`¬¿y_chªge_key_ÿ£
($©Œibu‹s, 
CASE_UPPER
);

101 
$sql
 .ğ"\n\t".
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$f›ld
);

103 
$sql
 .ğ' '.
$©Œibu‹s
['TYPE'];

105 ià(
	`¬¿y_key_exi¡s
('CONSTRAINT', 
$©Œibu‹s
))

107 
$sql
 .ğ'('.
$©Œibu‹s
['CONSTRAINT'].')';

110 ià(
	`¬¿y_key_exi¡s
('UNSIGNED', 
$©Œibu‹s
è&& $©Œibu‹s['UNSIGNED'] ==ğ
TRUE
)

112 
$sql
 .= ' UNSIGNED';

115 ià(
	`¬¿y_key_exi¡s
('DEFAULT', 
$©Œibu‹s
))

117 
$sql
 .ğ' DEFAULT \''.
$©Œibu‹s
['DEFAULT'].'\'';

120 ià(
	`¬¿y_key_exi¡s
('NULL', 
$©Œibu‹s
è&& $©Œibu‹s['NULL'] ==ğ
TRUE
)

122 
$sql
 .= ' NULL';

126 
$sql
 .= ' NOT NULL';

129 ià(
	`¬¿y_key_exi¡s
('AUTO_INCREMENT', 
$©Œibu‹s
è&& $©Œibu‹s['AUTO_INCREMENT'] ==ğ
TRUE
)

131 
$sql
 .= ' AUTO_INCREMENT';

136 ià(++
$cu¼’t_f›ld_couÁ
 < 
	`couÁ
(
$f›lds
))

138 
$sql
 .= ',';

142 ià(
	`couÁ
(
$´im¬y_keys
) > 0)

144 
$´im¬y_keys
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($primary_keys);

145 
$sql
 .ğ",\n\tPRIMARY KEY (" . 
	`im¶ode
(', ', 
$´im¬y_keys
) . ")";

148 ià(
	`is_¬¿y
(
$keys
è&& 
	`couÁ
($keys) > 0)

150 
	`fÜ—ch
 (
$keys
 
as
 
$key
)

152 ià(
	`is_¬¿y
(
$key
))

154 
$key
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key);

158 
$key
 = 
	`¬¿y
(
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key));

161 
$sql
 .ğ",\n\tUNIQUE (" . 
	`im¶ode
(', ', 
$key
) . ")";

165 
$sql
 .= "\n)";

167  
$sql
;

168 
	}
}

180 
funùiÚ
 
	$_drİ_bË
(
$bË
)

182 ià(
$this
->
db
->
db_debug
)

184  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

186  
	`¬¿y
();

187 
	}
}

207 
funùiÚ
 
_®‹r_bË
(
$®‹r_ty³
, 
$bË
, 
$cŞumn_Çme
, 
$cŞumn_defš™iÚ
 = '', 
$deçuÉ_v®ue
 = '', 
$nuÎ
 = '', 
$aá”_f›ld
 = '')

209 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$bË
)." $®‹r_ty³ ".$this->db->_´Ùeù_id’tif›rs(
$cŞumn_Çme
);

212 ià(
	g$®‹r_ty³
 == 'DROP')

217  
FALSE
;

220 
	g$sql
 .= " $column_definition";

222 ià(
	g$deçuÉ_v®ue
 != '')

224 
$sql
 .= " DEFAULT \"$default_value\"";

227 ià(
	g$nuÎ
 ==ğ
NULL
)

229 
$sql
 .= ' NULL';

233 
	g$sql
 .= ' NOT NULL';

236 ià(
	g$aá”_f›ld
 != '')

238 
$sql
 .ğ' AFTER ' . 
$this
->
db
->
_´Ùeù_id’tif›rs
(
$aá”_f›ld
);

241  
	g$sql
;

257 
funùiÚ
 
	$_»Çme_bË
(
$bË_Çme
, 
$Ãw_bË_Çme
)

259 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$bË_Çme
)." RENAME TO ".$this->db->_´Ùeù_id’tif›rs(
$Ãw_bË_Çme
);

260  
$sql
;

261 
	}
}

	@system/database/drivers/sqlite/sqlite_result.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_DB_sql™e_»suÉ
 
ex‹nds
 
	mCI_DB_»suÉ
 {

35 
funùiÚ
 
	$num_rows
()

37  @
	`sql™e_num_rows
(
$this
->
»suÉ_id
);

48 
funùiÚ
 
	$num_f›lds
()

50  @
	`sql™e_num_f›lds
(
$this
->
»suÉ_id
);

51 
	}
}

63 
funùiÚ
 
	$li¡_f›lds
()

65 
$f›ld_Çmes
 = 
	`¬¿y
();

66 
$i
 = 0; $˜< 
$this
->
	`num_f›lds
(); $i++)

68 
$f›ld_Çmes
[] = 
	`sql™e_f›ld_Çme
(
$this
->
»suÉ_id
, 
$i
);

71  
$f›ld_Çmes
;

72 
	}
}

84 
funùiÚ
 
	$f›ld_d©a
()

86 
$»tv®
 = 
	`¬¿y
();

87 
$i
 = 0; $˜< 
$this
->
	`num_f›lds
(); $i++)

89 
$F
 = 
Ãw
 
	`¡dCÏss
();

90 
$F
->
Çme
 = 
	`sql™e_f›ld_Çme
(
$this
->
»suÉ_id
, 
$i
);

91 
$F
->
ty³
 = 'varchar';

92 
$F
->
max_Ëngth
 = 0;

93 
$F
->
´im¬y_key
 = 0;

94 
$F
-> = '';

96 
$»tv®
[] = 
$F
;

99  
$»tv®
;

100 
	}
}

109 
funùiÚ
 
	$ä“_»suÉ
()

112 
	}
}

126 
funùiÚ
 
	$_d©a_£ek
(
$n
 = 0)

128  
	`sql™e_£ek
(
$this
->
»suÉ_id
, 
$n
);

129 
	}
}

141 
funùiÚ
 
	$_ãtch_assoc
()

143  
	`sql™e_ãtch_¬¿y
(
$this
->
»suÉ_id
);

144 
	}
}

156 
funùiÚ
 
	$_ãtch_objeù
()

158 ià(
	`funùiÚ_exi¡s
('sqlite_fetch_object'))

160  
	`sql™e_ãtch_objeù
(
$this
->
»suÉ_id
);

164 
$¬r
 = 
	`sql™e_ãtch_¬¿y
(
$this
->
»suÉ_id
, 
SQLITE_ASSOC
);

165 ià(
	`is_¬¿y
(
$¬r
))

167 
$obj
 = (
objeù
è
$¬r
;

168  
$obj
;

170  
NULL
;

173 
	}
}

	@system/database/drivers/sqlite/sqlite_utility.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_sql™e_ut™y
 
ex‹nds
 
	mCI_DB_ut™y
 {

38 
funùiÚ
 
	$_li¡_d©aba£s
()

40 ià(
$this
->
db_debug
)

42  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

44  
	`¬¿y
();

58 
funùiÚ
 
	$_İtimize_bË
(
$bË
)

60  
FALSE
;

61 
	}
}

74 
funùiÚ
 
	$_»·œ_bË
(
$bË
)

76  
FALSE
;

77 
	}
}

88 
funùiÚ
 
_backup
(
$·¿ms
 = 
	$¬¿y
())

91  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

92 
	}
}

	@system/database/drivers/sqlsrv/sqlsrv_driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

31 şas 
	cCI_DB_sql¤v_driv”
 
ex‹nds
 
	mCI_DB
 {

33 
v¬
 
	m$dbdriv”
 = 'sqlsrv';

36 
v¬
 
	m$_esÿ³_ch¬
 = '';

39 
v¬
 
	m$_like_esÿ³_¡r
 = " ESCAPE '%s' ";

40 
v¬
 
	m$_like_esÿ³_chr
 = '!';

47 
v¬
 
	m$_couÁ_¡ršg
 = "SELECT COUNT(*) AS ";

48 
v¬
 
	m$_¿ndom_keywÜd
 = ' ASC';

56 
funùiÚ
 
	$db_cÚÃù
(
$poŞšg
 = 
çl£
)

59 
$ch¬aù”_£t
 = (0 ==ğ
	`¡rÿ£cmp
('utf8', 
$this
->
ch¬_£t
)) ? 'UTF-8' : $this->char_set;

61 
$cÚÃùiÚ
 = 
	`¬¿y
(

62 'UID' => 
	`em±y
(
$this
->
u£ºame
) ? '' : $this->username,

63 'PWD' => 
	`em±y
(
$this
->
·sswÜd
) ? '' : $this->password,

64 'D©aba£' => 
$this
->
d©aba£
,

65 'CÚÃùiÚPoŞšg' => 
$poŞšg
 ? 1 : 0,

66 'Ch¬aù”S‘' => 
$ch¬aù”_£t
,

72 if(
	`em±y
(
$cÚÃùiÚ
['UID']) &&ƒmpty($connection['PWD'])) {

73 
	`un£t
(
$cÚÃùiÚ
['UID'], $connection['PWD']);

76  
	`sql¤v_cÚÃù
(
$this
->
ho¡Çme
, 
$cÚÃùiÚ
);

87 
funùiÚ
 
	$db_pcÚÃù
()

89 
$this
->
	`db_cÚÃù
(
TRUE
);

90 
	}
}

103 
funùiÚ
 
	$»cÚÃù
()

106 
	}
}

116 
funùiÚ
 
	$db_£Ëù
()

118  
$this
->
	`_execu‹
('USE ' . $this->
d©aba£
);

119 
	}
}

131 
funùiÚ
 
	$db_£t_ch¬£t
(
$ch¬£t
, 
$cŞÏtiÚ
)

134  
TRUE
;

135 
	}
}

146 
funùiÚ
 
	$_execu‹
(
$sql
)

148 
$sql
 = 
$this
->
	`_´•_qu”y
($sql);

149  
	`sql¤v_qu”y
(
$this
->
cÚn_id
, 
$sql
, 
nuÎ
, 
	`¬¿y
(

150 'SüŞÏbË' => 
SQLSRV_CURSOR_STATIC
,

151 'S’dSŒ—mP¬amsAtExec' => 
Œue


153 
	}
}

166 
funùiÚ
 
	$_´•_qu”y
(
$sql
)

168  
$sql
;

169 
	}
}

179 
funùiÚ
 
	$Œªs_begš
(
$‹¡_mode
 = 
FALSE
)

181 iàĞ! 
$this
->
Œªs_’abËd
)

183  
TRUE
;

187 ià(
$this
->
_Œªs_d•th
 > 0)

189  
TRUE
;

195 
$this
->
_Œªs_çu»
 = (
$‹¡_mode
 ==ğ
TRUE
è? TRUE : 
FALSE
;

197  
	`sql¤v_begš_Œª§ùiÚ
(
$this
->
cÚn_id
);

198 
	}
}

208 
funùiÚ
 
	$Œªs_comm™
()

210 iàĞ! 
$this
->
Œªs_’abËd
)

212  
TRUE
;

216 ià(
$this
->
_Œªs_d•th
 > 0)

218  
TRUE
;

221  
	`sql¤v_comm™
(
$this
->
cÚn_id
);

222 
	}
}

232 
funùiÚ
 
	$Œªs_rŞlback
()

234 iàĞ! 
$this
->
Œªs_’abËd
)

236  
TRUE
;

240 ià(
$this
->
_Œªs_d•th
 > 0)

242  
TRUE
;

245  
	`sql¤v_rŞlback
(
$this
->
cÚn_id
);

246 
	}
}

258 
funùiÚ
 
	$esÿ³_¡r
(
$¡r
, 
$like
 = 
FALSE
)

261  
	`¡r_»¶aû
("'", "''", 
$¡r
);

262 
	}
}

272 
funùiÚ
 
	$afãùed_rows
()

274  @
	`sqÌv_rows_afãùed
(
$this
->
cÚn_id
);

275 
	}
}

287 
funùiÚ
 
	$š£¹_id
()

289  
$this
->
	`qu”y
('£Ëù @@IDENTITY‡ š£¹_id')->
	`row
('insert_id');

290 
	}
}

304 
funùiÚ
 
	$_·r£_majÜ_v”siÚ
(
$v”siÚ
)

306 
	`´eg_m©ch
('/([0-9]+)\.([0-9]+)\.([0-9]+)/', 
$v”siÚ
, 
$v”_šfo
);

307  
$v”_šfo
[1];

308 
	}
}

318 
funùiÚ
 
	$_v”siÚ
()

320 
$šfo
 = 
	`sql¤v_£rv”_šfo
(
$this
->
cÚn_id
);

321  
	`¥rštf
("£Ëù '%s'‡ v”", 
$šfo
['SQLServerVersion']);

322 
	}
}

336 
funùiÚ
 
couÁ_®l
(
$bË
 = '')

338 ià(
$bË
 == '')

341 
	g$qu”y
 = 
$this
->
qu”y
("SELECT COUNT(*èAS‚umrow FROM " . $this->
db´efix
 . 
$bË
);

343 ià(
	g$qu”y
->
num_rows
() == 0)

346 
	g$row
 = 
$qu”y
->
row
();

347 
	g$this
->
_»£t_£Ëù
();

348  
	g$row
->
	gnumrows
;

362 
funùiÚ
 
	$_li¡_bËs
(
$´efix_lim™
 = 
FALSE
)

365 
	}
}

378 
funùiÚ
 
_li¡_cŞumns
(
$bË
 = '')

380  "SELECT * FROM INFORMATION_SCHEMA.CŞumn WHERE TABLE_NAME = '".
$this
->
_esÿ³_bË
(
$bË
)."'";

394 
funùiÚ
 
	$_f›ld_d©a
(
$bË
)

396  "SELECT TOP 1 * FROM " . 
$this
->
	`_esÿ³_bË
(
$bË
);

397 
	}
}

407 
funùiÚ
 
	$_”rÜ_mes§ge
()

409 
$”rÜ
 = 
	`¬¿y_shiá
(
	`sql¤v_”rÜs
());

410  !
	`em±y
(
$”rÜ
['mes§ge']è? $”rÜ['mes§ge'] : 
nuÎ
;

411 
	}
}

421 
funùiÚ
 
	$_”rÜ_numb”
()

423 
$”rÜ
 = 
	`¬¿y_shiá
(
	`sql¤v_”rÜs
());

424  
	`is£t
(
$”rÜ
['SQLSTATE']è? $”rÜ['SQLSTATE'] : 
nuÎ
;

425 
	}
}

439 
funùiÚ
 
	$_esÿ³_bË
(
$bË
)

441  
$bË
;

442 
	}
}

454 
funùiÚ
 
	$_esÿ³_id’tif›rs
(
$™em
)

456  
$™em
;

457 
	}
}

471 
funùiÚ
 
	$_äom_bËs
(
$bËs
)

473 iàĞ! 
	`is_¬¿y
(
$bËs
))

475 
$bËs
 = 
	`¬¿y
($tables);

478  
	`im¶ode
(', ', 
$bËs
);

479 
	}
}

494 
funùiÚ
 
	$_š£¹
(
$bË
, 
$keys
, 
$v®ues
)

496  "INSERT INTO ".
$this
->
	`_esÿ³_bË
(
$bË
)." (".
	`im¶ode
(', ', 
$keys
)."èVALUES (".im¶ode(', ', 
$v®ues
).")";

497 
	}
}

514 
funùiÚ
 
	$_upd©e
(
$bË
, 
$v®ues
, 
$wh”e
)

516 
	`fÜ—ch
(
$v®ues
 
as
 
$key
 => 
$v®
)

518 
$v®¡r
[] = 
$key
." = ".
$v®
;

521  "UPDATE ".
$this
->
	`_esÿ³_bË
(
$bË
)." SET ".
	`im¶ode
(', ', 
$v®¡r
)." WHERE ".im¶ode(" ", 
$wh”e
);

522 
	}
}

537 
funùiÚ
 
	$_Œunÿ‹
(
$bË
)

539  "TRUNCATE ".
$bË
;

540 
	}
}

555 
funùiÚ
 
	$_d–‘e
(
$bË
, 
$wh”e
)

557  "DELETE FROM ".
$this
->
	`_esÿ³_bË
(
$bË
)." WHERE ".
	`im¶ode
(" ", 
$wh”e
);

558 
	}
}

573 
funùiÚ
 
	$_lim™
(
$sql
, 
$lim™
, 
$off£t
)

575 
$i
 = 
$lim™
 + 
$off£t
;

577  
	`´eg_»¶aû
('/(^\SELECT (DISTINCT)?)/i','\\1 TOP '.
$i
.' ', 
$sql
);

578 
	}
}

589 
funùiÚ
 
	$_şo£
(
$cÚn_id
)

591 @
	`sql¤v_şo£
(
$cÚn_id
);

592 
	}
}

	@system/database/drivers/sqlsrv/sqlsrv_forge.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_sql¤v_fÜge
 
ex‹nds
 
	mCI_DB_fÜge
 {

34 
funùiÚ
 
	$_ü—‹_d©aba£
(
$Çme
)

36  "CREATE DATABASE ".
$Çme
;

48 
funùiÚ
 
	$_drİ_d©aba£
(
$Çme
)

50  "DROP DATABASE ".
$Çme
;

51 
	}
}

61 
funùiÚ
 
	$_drİ_bË
(
$bË
)

63  "DROP TABLE ".
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
);

64 
	}
}

79 
funùiÚ
 
	$_ü—‹_bË
(
$bË
, 
$f›lds
, 
$´im¬y_keys
, 
$keys
, 
$if_nÙ_exi¡s
)

81 
$sql
 = 'CREATE TABLE ';

83 ià(
$if_nÙ_exi¡s
 ==ğ
TRUE
)

85 
$sql
 .= 'IF NOT EXISTS ';

88 
$sql
 .ğ
$this
->
db
->
	`_esÿ³_id’tif›rs
(
$bË
)." (";

89 
$cu¼’t_f›ld_couÁ
 = 0;

91 
	`fÜ—ch
 (
$f›lds
 
as
 
$f›ld
=>
$©Œibu‹s
)

96 ià(
	`is_num”ic
(
$f›ld
))

98 
$sql
 .= "\n\t$attributes";

102 
$©Œibu‹s
 = 
	`¬¿y_chªge_key_ÿ£
($©Œibu‹s, 
CASE_UPPER
);

104 
$sql
 .ğ"\n\t".
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$f›ld
);

106 
$sql
 .ğ' '.
$©Œibu‹s
['TYPE'];

108 ià(
	`¬¿y_key_exi¡s
('CONSTRAINT', 
$©Œibu‹s
))

110 
$sql
 .ğ'('.
$©Œibu‹s
['CONSTRAINT'].')';

113 ià(
	`¬¿y_key_exi¡s
('UNSIGNED', 
$©Œibu‹s
è&& $©Œibu‹s['UNSIGNED'] ==ğ
TRUE
)

115 
$sql
 .= ' UNSIGNED';

118 ià(
	`¬¿y_key_exi¡s
('DEFAULT', 
$©Œibu‹s
))

120 
$sql
 .ğ' DEFAULT \''.
$©Œibu‹s
['DEFAULT'].'\'';

123 ià(
	`¬¿y_key_exi¡s
('NULL', 
$©Œibu‹s
è&& $©Œibu‹s['NULL'] ==ğ
TRUE
)

125 
$sql
 .= ' NULL';

129 
$sql
 .= ' NOT NULL';

132 ià(
	`¬¿y_key_exi¡s
('AUTO_INCREMENT', 
$©Œibu‹s
è&& $©Œibu‹s['AUTO_INCREMENT'] ==ğ
TRUE
)

134 
$sql
 .= ' AUTO_INCREMENT';

139 ià(++
$cu¼’t_f›ld_couÁ
 < 
	`couÁ
(
$f›lds
))

141 
$sql
 .= ',';

145 ià(
	`couÁ
(
$´im¬y_keys
) > 0)

147 
$´im¬y_keys
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($primary_keys);

148 
$sql
 .ğ",\n\tPRIMARY KEY (" . 
	`im¶ode
(', ', 
$´im¬y_keys
) . ")";

151 ià(
	`is_¬¿y
(
$keys
è&& 
	`couÁ
($keys) > 0)

153 
	`fÜ—ch
 (
$keys
 
as
 
$key
)

155 ià(
	`is_¬¿y
(
$key
))

157 
$key
 = 
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key);

161 
$key
 = 
	`¬¿y
(
$this
->
db
->
	`_´Ùeù_id’tif›rs
($key));

164 
$sql
 .ğ",\n\tFOREIGN KEY (" . 
	`im¶ode
(', ', 
$key
) . ")";

168 
$sql
 .= "\n)";

170  
$sql
;

171 
	}
}

191 
funùiÚ
 
_®‹r_bË
(
$®‹r_ty³
, 
$bË
, 
$cŞumn_Çme
, 
$cŞumn_defš™iÚ
 = '', 
$deçuÉ_v®ue
 = '', 
$nuÎ
 = '', 
$aá”_f›ld
 = '')

193 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
_´Ùeù_id’tif›rs
(
$bË
)." $®‹r_ty³ ".$this->db->_´Ùeù_id’tif›rs(
$cŞumn_Çme
);

196 ià(
	g$®‹r_ty³
 == 'DROP')

198  
$sql
;

201 
	g$sql
 .= " $column_definition";

203 ià(
	g$deçuÉ_v®ue
 != '')

205 
$sql
 .= " DEFAULT \"$default_value\"";

208 ià(
	g$nuÎ
 ==ğ
NULL
)

210 
$sql
 .= ' NULL';

214 
	g$sql
 .= ' NOT NULL';

217 ià(
	g$aá”_f›ld
 != '')

219 
$sql
 .ğ' AFTER ' . 
$this
->
db
->
_´Ùeù_id’tif›rs
(
$aá”_f›ld
);

222  
	g$sql
;

238 
funùiÚ
 
	$_»Çme_bË
(
$bË_Çme
, 
$Ãw_bË_Çme
)

241 
$sql
 = 'ALTER TABLE '.
$this
->
db
->
	`_´Ùeù_id’tif›rs
(
$bË_Çme
)." RENAME TO ".$this->db->_´Ùeù_id’tif›rs(
$Ãw_bË_Çme
);

242  
$sql
;

243 
	}
}

	@system/database/drivers/sqlsrv/sqlsrv_result.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_DB_sql¤v_»suÉ
 
ex‹nds
 
	mCI_DB_»suÉ
 {

35 
funùiÚ
 
	$num_rows
()

37  @
	`sql¤v_num_rows
(
$this
->
»suÉ_id
);

48 
funùiÚ
 
	$num_f›lds
()

50  @
	`sql¤v_num_f›lds
(
$this
->
»suÉ_id
);

51 
	}
}

63 
funùiÚ
 
	$li¡_f›lds
()

65 
$f›ld_Çmes
 = 
	`¬¿y
();

66 
	`fÜ—ch
(
	`sql¤v_f›ld_m‘ad©a
(
$this
->
»suÉ_id
è
as
 
$off£t
 => 
$f›ld
)

68 
$f›ld_Çmes
[] = 
$f›ld
['Name'];

71  
$f›ld_Çmes
;

72 
	}
}

84 
funùiÚ
 
	$f›ld_d©a
()

86 
$»tv®
 = 
	`¬¿y
();

87 
	`fÜ—ch
(
	`sql¤v_f›ld_m‘ad©a
(
$this
->
»suÉ_id
è
as
 
$off£t
 => 
$f›ld
)

89 
$F
 = 
Ãw
 
	`¡dCÏss
();

90 
$F
->
Çme
 = 
$f›ld
['Name'];

91 
$F
->
ty³
 = 
$f›ld
['Type'];

92 
$F
->
max_Ëngth
 = 
$f›ld
['Size'];

93 
$F
->
´im¬y_key
 = 0;

94 
$F
-> = '';

96 
$»tv®
[] = 
$F
;

99  
$»tv®
;

100 
	}
}

109 
funùiÚ
 
	$ä“_»suÉ
()

111 ià(
	`is_»sourû
(
$this
->
»suÉ_id
))

113 
	`sql¤v_ä“_¡mt
(
$this
->
»suÉ_id
);

114 
$this
->
»suÉ_id
 = 
FALSE
;

116 
	}
}

130 
funùiÚ
 
	$_d©a_£ek
(
$n
 = 0)

133 
	}
}

145 
funùiÚ
 
	$_ãtch_assoc
()

147  
	`sql¤v_ãtch_¬¿y
(
$this
->
»suÉ_id
, 
SQLSRV_FETCH_ASSOC
);

148 
	}
}

160 
funùiÚ
 
	$_ãtch_objeù
()

162  
	`sql¤v_ãtch_objeù
(
$this
->
»suÉ_id
);

163 
	}
}

	@system/database/drivers/sqlsrv/sqlsrv_utility.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

25 şas 
	cCI_DB_sql¤v_ut™y
 
ex‹nds
 
	mCI_DB_ut™y
 {

33 
funùiÚ
 
	$_li¡_d©aba£s
()

49 
funùiÚ
 
	$_İtimize_bË
(
$bË
)

51  
FALSE
;

52 
	}
}

65 
funùiÚ
 
	$_»·œ_bË
(
$bË
)

67  
FALSE
;

68 
	}
}

79 
funùiÚ
 
_backup
(
$·¿ms
 = 
	$¬¿y
())

82  
$this
->
db
->
	`di¥Ïy_”rÜ
('db_unsuported_feature');

83 
	}
}

	@system/helpers/array_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

42 iàĞ! 
funùiÚ_exi¡s
('element'))

44 
funùiÚ
 
–em’t
(
$™em
, 
$¬¿y
, 
$deçuÉ
 = 
FALSE
)

46 iàĞ! 
is£t
(
$¬¿y
[
$™em
]è
OR
 $array[$item] == "")

48  
$deçuÉ
;

51  
	g$¬¿y
[
$™em
];

64 iàĞ! 
funùiÚ_exi¡s
('random_element'))

66 
funùiÚ
 
¿ndom_–em’t
(
$¬¿y
)

68 iàĞ! 
is_¬¿y
(
$¬¿y
))

70  
	g$¬¿y
;

73  
	g$¬¿y
[
¬¿y_¿nd
(
$¬¿y
)];

91 iàĞ! 
funùiÚ_exi¡s
('elements'))

93 
funùiÚ
 
–em’ts
(
$™ems
, 
$¬¿y
, 
$deçuÉ
 = 
FALSE
)

95 
$»tuº
 = 
¬¿y
();

97 iàĞ! 
is_¬¿y
(
$™ems
))

99 
	g$™ems
 = 
¬¿y
(
$™ems
);

102 
fÜ—ch
 (
$™ems
 
as
 
$™em
)

104 ià(
is£t
(
$¬¿y
[
$™em
]))

106 
	g$»tuº
[
$™em
] = 
$¬¿y
[$item];

110 
	g$»tuº
[
$™em
] = 
$deçuÉ
;

114  
	g$»tuº
;

	@system/helpers/captcha_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

40 iàĞ! 
funùiÚ_exi¡s
('create_captcha'))

42 
funùiÚ
 
ü—‹_ÿ±cha
(
$d©a
 = '', 
$img_·th
 = '', 
$img_u¾
 = '', 
$fÚt_·th
 = '')

44 
$deçuÉs
 = 
¬¿y
('word' => '', 'img_path' => '', 'img_url' => '', 'img_width' => '150', 'img_height' => '30', 'font_path' => '', 'expiration' => 7200);

46 
fÜ—ch
 (
$deçuÉs
 
as
 
$key
 => 
$v®
)

48 iàĞ! 
is_¬¿y
(
$d©a
))

50 iàĞ! 
is£t
(
$$key
è
OR
 $$key == '')

52 
$$key
 = 
$v®
;

57 
	g$$key
 = ( ! 
is£t
(
$d©a
[
$key
])è? 
$v®
 : $data[$key];

61 ià(
	g$img_·th
 =ğ'' 
OR
 
$img_u¾
 == '')

63  
FALSE
;

66 iàĞ! @
is_dœ
(
$img_·th
))

68  
	gFALSE
;

71 iàĞ! 
is_wr™abË
(
$img_·th
))

73  
	gFALSE
;

76 iàĞ! 
ex‹nsiÚ_lßded
('gd'))

78  
	gFALSE
;

85 
li¡
(
$u£c
, 
$£c
èğ
ex¶ode
(" ", 
miüÙime
());

86 
	g$now
 = (()
$u£c
 + ()
$£c
);

88 
	g$cu¼’t_dœ
 = @
İ’dœ
(
$img_·th
);

90 
	g$f’ame
 = @
»addœ
(
$cu¼’t_dœ
))

92 ià(
$f’ame
 !ğ"." 
ªd
 $filename != ".."‡nd $filename != "index.html")

94 
$Çme
 = 
¡r_»¶aû
(".jpg", "", 
$f’ame
);

96 ià((
	g$Çme
 + 
	g$expœ©iÚ
è< 
	g$now
)

98 @
uÆšk
(
$img_·th
.
$f’ame
);

103 @
şo£dœ
(
$cu¼’t_dœ
);

109 ià(
	g$wÜd
 == '')

111 
$poŞ
 = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';

113 
	g$¡r
 = '';

114 
	g$i
 = 0; $i < 8; $i++)

116 
	g$¡r
 .ğ
sub¡r
(
$poŞ
, 
mt_¿nd
(0, 
¡¾’
($pool) -1), 1);

119 
	g$wÜd
 = 
$¡r
;

126 
	g$Ëngth
 = 
¡¾’
(
$wÜd
);

127 
	g$ªgË
 = (
$Ëngth
 >ğ6è? 
¿nd
(-($length-6), ($length-6)) : 0;

128 
	g$x_axis
 = 
¿nd
(6, (360/
$Ëngth
)-16);

129 
	g$y_axis
 = (
$ªgË
 >ğ0 ) ? 
¿nd
(
$img_height
, 
$img_width
) :„and(6, $img_height);

136 ià(
funùiÚ_exi¡s
('imagecreatetruecolor'))

138 
	g$im
 = 
imageü—‹ŒuecŞÜ
(
$img_width
, 
$img_height
);

142 
	g$im
 = 
imageü—‹
(
$img_width
, 
$img_height
);

149 
	g$bg_cŞÜ
 = 
imagecŞÜ®loÿ‹
 (
$im
, 255, 255, 255);

150 
	g$bÜd”_cŞÜ
 = 
imagecŞÜ®loÿ‹
 (
$im
, 153, 102, 102);

151 
	g$‹xt_cŞÜ
 = 
imagecŞÜ®loÿ‹
 (
$im
, 204, 153, 153);

152 
	g$grid_cŞÜ
 = 
imagecŞÜ®loÿ‹
(
$im
, 255, 182, 182);

153 
	g$shadow_cŞÜ
 = 
imagecŞÜ®loÿ‹
(
$im
, 255, 240, 240);

159 
ImageFËdReùªgË
(
$im
, 0, 0, 
$img_width
, 
$img_height
, 
$bg_cŞÜ
);

165 
	g$th‘a
 = 1;

166 
	g$th‘ac
 = 7;

167 
	g$¿dius
 = 16;

168 
	g$cœşes
 = 20;

169 
	g$pošts
 = 32;

171 
	g$i
 = 0; $˜< (
$cœşes
 * 
	g$pošts
) - 1; $i++)

173 
	g$th‘a
 = 
$th‘a
 + 
$th‘ac
;

174 
	g$¿d
 = 
$¿dius
 * (
$i
 / 
$pošts
 );

175 
	g$x
 = (
$¿d
 * 
cos
(
$th‘a
)è+ 
$x_axis
;

176 
	g$y
 = (
$¿d
 * 
sš
(
$th‘a
)è+ 
$y_axis
;

177 
	g$th‘a
 = 
$th‘a
 + 
$th‘ac
;

178 
	g$¿d1
 = 
$¿dius
 * ((
$i
 + 1è/ 
$pošts
);

179 
	g$x1
 = (
$¿d1
 * 
cos
(
$th‘a
)è+ 
$x_axis
;

180 
	g$y1
 = (
$¿d1
 * 
sš
(
$th‘a
 )è+ 
$y_axis
;

181 
imag–še
(
$im
, 
$x
, 
$y
, 
$x1
, 
$y1
, 
$grid_cŞÜ
);

182 
	g$th‘a
 = 
$th‘a
 - 
$th‘ac
;

189 
	g$u£_fÚt
 = (
$fÚt_·th
 !ğ'' 
AND
 
fe_exi¡s
($fÚt_·thèAND 
funùiÚ_exi¡s
('imag‘táext')è? 
TRUE
 : 
FALSE
;

191 ià(
	g$u£_fÚt
 =ğ
FALSE
)

193 
$fÚt_size
 = 5;

194 
	g$x
 = 
¿nd
(0, 
$img_width
/(
$Ëngth
/3));

195 
	g$y
 = 0;

199 
	g$fÚt_size
 = 16;

200 
	g$x
 = 
¿nd
(0, 
$img_width
/(
$Ëngth
/1.5));

201 
	g$y
 = 
$fÚt_size
+2;

204 
	g$i
 = 0; $˜< 
¡¾’
(
$wÜd
); $i++)

206 ià(
	g$u£_fÚt
 =ğ
FALSE
)

208 
$y
 = 
¿nd
(0 , 
$img_height
/2);

209 
image¡ršg
(
$im
, 
$fÚt_size
, 
$x
, 
$y
, 
sub¡r
(
$wÜd
, 
$i
, 1), 
$‹xt_cŞÜ
);

210 
	g$x
 +ğ(
$fÚt_size
*2);

214 
	g$y
 = 
¿nd
(
$img_height
/2, $img_height-3);

215 
imag‘táext
(
$im
, 
$fÚt_size
, 
$ªgË
, 
$x
, 
$y
, 
$‹xt_cŞÜ
, 
$fÚt_·th
, 
sub¡r
(
$wÜd
, 
$i
, 1));

216 
	g$x
 +ğ
$fÚt_size
;

225 
imag”eùªgË
(
$im
, 0, 0, 
$img_width
-1, 
$img_height
-1, 
$bÜd”_cŞÜ
);

231 
	g$img_Çme
 = 
$now
.'.jpg';

233 
ImageJPEG
(
$im
, 
$img_·th
.
$img_Çme
);

235 
	g$img
 = "<img src=\"$img_url$img_name\" width=\"$img_width\" height=\"$img_height\" style=\"border:0;\"‡lt=\" \" />";

237 
ImageDe¡roy
(
$im
);

239  
¬¿y
('wÜd' => 
$wÜd
, 'time' => 
$now
, 'image' => 
$img
);

	@system/helpers/cookie_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

45 iàĞ! 
funùiÚ_exi¡s
('set_cookie'))

47 
funùiÚ
 
£t_cook›
(
$Çme
 = '', 
$v®ue
 = '', 
$expœe
 = '', 
$domaš
 = '', 
$·th
 = '/', 
$´efix
 = '', 
$£cu»
 = 
FALSE
)

50 
$CI
 =& 
g‘_š¡ªû
();

51 
	g$CI
->
	gšput
->
£t_cook›
(
$Çme
, 
$v®ue
, 
$expœe
, 
$domaš
, 
$·th
, 
$´efix
, 
$£cu»
);

65 iàĞ! 
funùiÚ_exi¡s
('get_cookie'))

67 
funùiÚ
 
g‘_cook›
(
$šdex
 = '', 
$xss_ş—n
 = 
FALSE
)

69 
$CI
 =& 
g‘_š¡ªû
();

71 
	g$´efix
 = '';

73 iàĞ! 
is£t
(
$_COOKIE
[
$šdex
]è&& 
cÚfig_™em
('cookie_prefix') != '')

75 
$´efix
 = 
cÚfig_™em
('cookie_prefix');

78  
	g$CI
->
	gšput
->
cook›
(
$´efix
.
$šdex
, 
$xss_ş—n
);

93 iàĞ! 
funùiÚ_exi¡s
('delete_cookie'))

95 
funùiÚ
 
d–‘e_cook›
(
$Çme
 = '', 
$domaš
 = '', 
$·th
 = '/', 
$´efix
 = '')

97 
£t_cook›
(
$Çme
, '', '', 
$domaš
, 
$·th
, 
$´efix
);

	@system/helpers/date_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

38 iàĞ! 
funùiÚ_exi¡s
('now'))

40 
funùiÚ
 
now
()

42 
	g$CI
 =& 
g‘_š¡ªû
();

44 ià(
¡¹Şow”
(
$CI
->
cÚfig
->
™em
('time_reference')) == 'gmt')

46 
$now
 = 
time
();

47 
	g$sy¡em_time
 = 
mktime
(
gmd©e
("H", 
$now
), gmdate("i", $now), gmdate("s", $now), gmdate("m", $now), gmdate("d", $now), gmdate("Y", $now));

49 ià(
¡¾’
(
$sy¡em_time
) < 10)

51 
	g$sy¡em_time
 = 
time
();

52 
log_mes§ge
('error', 'The Date class could‚ot set‡…roper GMTimestamp sohe†ocalime() value was used.');

55  
	g$sy¡em_time
;

59  
time
();

83 iàĞ! 
funùiÚ_exi¡s
('mdate'))

85 
funùiÚ
 
md©e
(
$d©e¡r
 = '', 
$time
 = '')

87 ià(
$d©e¡r
 == '')

90 ià(
	g$time
 == '')

91 
$time
 = 
now
();

93 
	g$d©e¡r
 = 
¡r_»¶aû
('%\\', '', 
´eg_»¶aû
("/([a-z]+?){1}/i", "\\\\\\1", 
$d©e¡r
));

94  
d©e
(
$d©e¡r
, 
$time
);

110 iàĞ! 
funùiÚ_exi¡s
('standard_date'))

112 
funùiÚ
 
¡ªd¬d_d©e
(
$fmt
 = 'DATE_RFC822', 
$time
 = '')

114 
$fÜm©s
 = 
¬¿y
(

126 iàĞ! 
is£t
(
$fÜm©s
[
$fmt
]))

128  
	gFALSE
;

131  
md©e
(
$fÜm©s
[
$fmt
], 
$time
);

148 iàĞ! 
funùiÚ_exi¡s
('timespan'))

150 
funùiÚ
 
time¥ª
(
$£cÚds
 = 1, 
$time
 = '')

152 
$CI
 =& 
g‘_š¡ªû
();

153 
	g$CI
->
	gÏng
->
lßd
('date');

155 iàĞ! 
is_num”ic
(
$£cÚds
))

157 
	g$£cÚds
 = 1;

160 iàĞ! 
is_num”ic
(
$time
))

162 
	g$time
 = 
time
();

165 ià(
	g$time
 <ğ
$£cÚds
)

167 
$£cÚds
 = 1;

171 
	g$£cÚds
 = 
$time
 - 
$£cÚds
;

174 
	g$¡r
 = '';

175 
	g$y—rs
 = 
æoÜ
(
$£cÚds
 / 31536000);

177 ià(
	g$y—rs
 > 0)

179 
	g$¡r
 .ğ
$y—rs
.' '.
$CI
->
Ïng
->
lše
((($years > 1) ? 'date_years' : 'date_year')).', ';

182 
	g$£cÚds
 -ğ
$y—rs
 * 31536000;

183 
	g$mÚths
 = 
æoÜ
(
$£cÚds
 / 2628000);

185 ià(
	g$y—rs
 > 0 
OR
 
	g$mÚths
 > 0)

187 ià(
	g$mÚths
 > 0)

189 
	g$¡r
 .ğ
$mÚths
.' '.
$CI
->
Ïng
->
lše
((($months > 1) ? 'date_months' : 'date_month')).', ';

192 
	g$£cÚds
 -ğ
$mÚths
 * 2628000;

195 
	g$w“ks
 = 
æoÜ
(
$£cÚds
 / 604800);

197 ià(
	g$y—rs
 > 0 
OR
 
	g$mÚths
 > 0 OR 
	g$w“ks
 > 0)

199 ià(
	g$w“ks
 > 0)

201 
	g$¡r
 .ğ
$w“ks
.' '.
$CI
->
Ïng
->
lše
((($weeks > 1) ? 'date_weeks' : 'date_week')).', ';

204 
	g$£cÚds
 -ğ
$w“ks
 * 604800;

207 
	g$days
 = 
æoÜ
(
$£cÚds
 / 86400);

209 ià(
	g$mÚths
 > 0 
OR
 
	g$w“ks
 > 0 OR 
	g$days
 > 0)

211 ià(
	g$days
 > 0)

213 
	g$¡r
 .ğ
$days
.' '.
$CI
->
Ïng
->
lše
((($days > 1) ? 'date_days' : 'date_day')).', ';

216 
	g$£cÚds
 -ğ
$days
 * 86400;

219 
	g$hours
 = 
æoÜ
(
$£cÚds
 / 3600);

221 ià(
	g$days
 > 0 
OR
 
	g$hours
 > 0)

223 ià(
	g$hours
 > 0)

225 
	g$¡r
 .ğ
$hours
.' '.
$CI
->
Ïng
->
lše
((($hours > 1) ? 'date_hours' : 'date_hour')).', ';

228 
	g$£cÚds
 -ğ
$hours
 * 3600;

231 
	g$mšu‹s
 = 
æoÜ
(
$£cÚds
 / 60);

233 ià(
	g$days
 > 0 
OR
 
	g$hours
 > 0 OR 
	g$mšu‹s
 > 0)

235 ià(
	g$mšu‹s
 > 0)

237 
	g$¡r
 .ğ
$mšu‹s
.' '.
$CI
->
Ïng
->
lše
((($minutes > 1) ? 'date_minutes' : 'date_minute')).', ';

240 
	g$£cÚds
 -ğ
$mšu‹s
 * 60;

243 ià(
	g$¡r
 == '')

245 
$¡r
 .ğ
$£cÚds
.' '.
$CI
->
Ïng
->
lše
((($seconds > 1) ? 'date_seconds' : 'date_second')).', ';

248  
sub¡r
(
Œim
(
$¡r
), 0, -1);

265 iàĞ! 
funùiÚ_exi¡s
('days_in_month'))

267 
funùiÚ
 
days_š_mÚth
(
$mÚth
 = 0, 
$y—r
 = '')

269 ià(
$mÚth
 < 1 
OR
 $month > 12)

274 iàĞ! 
is_num”ic
(
$y—r
è
OR
 
¡¾’
($year) != 4)

276 
$y—r
 = 
d©e
('Y');

279 ià(
	g$mÚth
 == 2)

281 ià(
$y—r
 % 400 =ğ0 
OR
 ($y—¸% 4 =ğ0 
AND
 $year % 100 != 0))

287 
	g$days_š_mÚth
 = 
¬¿y
(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);

288  
	g$days_š_mÚth
[
$mÚth
 - 1];

301 iàĞ! 
funùiÚ_exi¡s
('local_to_gmt'))

303 
funùiÚ
 
loÿl_to_gmt
(
$time
 = '')

305 ià(
$time
 == '')

306 
$time
 = 
time
();

308  
mktime
Ğ
gmd©e
("H", 
$time
), gmdate("i", $time), gmdate("s", $time), gmdate("m", $time), gmdate("d", $time), gmdate("Y", $time));

327 iàĞ! 
funùiÚ_exi¡s
('gmt_to_local'))

329 
funùiÚ
 
gmt_to_loÿl
(
$time
 = '', 
$timezÚe
 = 'UTC', 
$d¡
 = 
FALSE
)

331 ià(
$time
 == '')

333  
now
();

336 
	g$time
 +ğ
timezÚes
(
$timezÚe
) * 3600;

338 ià(
	g$d¡
 =ğ
TRUE
)

340 
$time
 += 3600;

343  
	g$time
;

356 iàĞ! 
funùiÚ_exi¡s
('mysql_to_unix'))

358 
funùiÚ
 
mysql_to_unix
(
$time
 = '')

364 
$time
 = 
¡r_»¶aû
('-', '', $time);

365 
	g$time
 = 
¡r_»¶aû
(':', '', 
$time
);

366 
	g$time
 = 
¡r_»¶aû
(' ', '', 
$time
);

369  
mktime
(

370 
sub¡r
(
$time
, 8, 2),

371 
sub¡r
(
$time
, 10, 2),

372 
sub¡r
(
$time
, 12, 2),

373 
sub¡r
(
$time
, 4, 2),

374 
sub¡r
(
$time
, 6, 2),

375 
sub¡r
(
$time
, 0, 4)

393 iàĞ! 
funùiÚ_exi¡s
('unix_to_human'))

395 
funùiÚ
 
unix_to_humª
(
$time
 = '', 
$£cÚds
 = 
FALSE
, 
$fmt
 = 'us')

397 
$r
 = 
d©e
('Y', 
$time
).'-'.date('m', $time).'-'.date('d', $time).' ';

399 ià(
	g$fmt
 == 'us')

401 
$r
 .ğ
d©e
('h', 
$time
).':'.date('i', $time);

405 
	g$r
 .ğ
d©e
('H', 
$time
).':'.date('i', $time);

408 ià(
	g$£cÚds
)

410 
	g$r
 .ğ':'.
d©e
('s', 
$time
);

413 ià(
	g$fmt
 == 'us')

415 
$r
 .ğ' '.
d©e
('A', 
$time
);

418  
	g$r
;

433 iàĞ! 
funùiÚ_exi¡s
('human_to_unix'))

435 
funùiÚ
 
humª_to_unix
(
$d©e¡r
 = '')

437 ià(
$d©e¡r
 == '')

439  
FALSE
;

442 
	g$d©e¡r
 = 
Œim
(
$d©e¡r
);

443 
	g$d©e¡r
 = 
´eg_»¶aû
("/\040+/", ' ', 
$d©e¡r
);

445 iàĞ! 
´eg_m©ch
('/^[0-9]{2,4}\-[0-9]{1,2}\-[0-9]{1,2}\s[0-9]{1,2}:[0-9]{1,2}(?::[0-9]{1,2})?(?:\s[AP]M)?$/i', 
$d©e¡r
))

447  
	gFALSE
;

450 
	g$¥l™
 = 
ex¶ode
(' ', 
$d©e¡r
);

452 
	g$ex
 = 
ex¶ode
("-", 
$¥l™
['0']);

454 
	g$y—r
 = (
¡¾’
(
$ex
['0']) == 2) ? '20'.$ex['0'] : $ex['0'];

455 
	g$mÚth
 = (
¡¾’
(
$ex
['1']) == 1) ? '0'.$ex['1'] : $ex['1'];

456 
	g$day
 = (
¡¾’
(
$ex
['2']) == 1) ? '0'.$ex['2'] : $ex['2'];

458 
	g$ex
 = 
ex¶ode
(":", 
$¥l™
['1']);

460 
	g$hour
 = (
¡¾’
(
$ex
['0']) == 1) ? '0'.$ex['0'] : $ex['0'];

461 
	g$mš
 = (
¡¾’
(
$ex
['1']) == 1) ? '0'.$ex['1'] : $ex['1'];

463 ià(
is£t
(
$ex
['2']è&& 
´eg_m©ch
('/[0-9]{1,2}/', $ex['2']))

465 
	g$£c
 = (
¡¾’
(
$ex
['2']) == 1) ? '0'.$ex['2'] : $ex['2'];

470 
	g$£c
 = '00';

473 ià(
is£t
(
$¥l™
['2']))

475 
	g$ampm
 = 
¡¹Şow”
(
$¥l™
['2']);

477 ià(
sub¡r
(
$ampm
, 0, 1è=ğ'p' 
AND
 
$hour
 < 12)

478 
$hour
 = $hour + 12;

480 ià(
sub¡r
(
$ampm
, 0, 1è=ğ'a' 
AND
 
$hour
 == 12)

481 
$hour
 = '00';

483 ià(
¡¾’
(
$hour
) == 1)

484 
$hour
 = '0'.$hour;

487  
mktime
(
$hour
, 
$mš
, 
$£c
, 
$mÚth
, 
$day
, 
$y—r
);

504 iàĞ! 
funùiÚ_exi¡s
('timezone_menu'))

506 
funùiÚ
 
timezÚe_m’u
(
$deçuÉ
 = 'UTC', 
$şass
 = "", 
$Çme
 = 'timezones')

508 
$CI
 =& 
g‘_š¡ªû
();

509 
	g$CI
->
	gÏng
->
lßd
('date');

511 ià(
	g$deçuÉ
 == 'GMT')

512 
$deçuÉ
 = 'UTC';

514 
	g$m’u
 = '<£Ëù‚ame="'.
$Çme
.'"';

516 ià(
	g$şass
 != '')

518 
$m’u
 .ğ' cÏss="'.
$şass
.'"';

521 
	g$m’u
 .= ">\n";

523 
fÜ—ch
 (
timezÚes
(è
as
 
$key
 => 
$v®
)

525 
$£Ëùed
 = (
$deçuÉ
 =ğ
$key
) ? " selected='selected'" : '';

526 
	g$m’u
 .ğ"<İtiÚ v®ue='{$key}'{$£Ëùed}>".
$CI
->
Ïng
->
lše
(
$key
)."</option>\n";

529 
	g$m’u
 .= "</select>";

531  
	g$m’u
;

547 iàĞ! 
funùiÚ_exi¡s
('timezones'))

549 
funùiÚ
 
timezÚes
(
$tz
 = '')

554 
$zÚes
 = 
¬¿y
(

597 ià(
	g$tz
 == '')

599  
$zÚes
;

602 ià(
	g$tz
 == 'GMT')

603 
$tz
 = 'UTC';

605  ( ! 
is£t
(
$zÚes
[
$tz
])) ? 0 : $zones[$tz];

	@system/helpers/directory_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

42 iàĞ! 
funùiÚ_exi¡s
('directory_map'))

44 
funùiÚ
 
dœeùÜy_m­
(
$sourû_dœ
, 
$dœeùÜy_d•th
 = 0, 
$hidd’
 = 
FALSE
)

46 ià(
$å
 = @
İ’dœ
(
$sourû_dœ
))

48 
$fed©a
 = 
¬¿y
();

49 
	g$Ãw_d•th
 = 
$dœeùÜy_d•th
 - 1;

50 
	g$sourû_dœ
 = 
¹rim
(
$sourû_dœ
, 
DIRECTORY_SEPARATOR
).
	gDIRECTORY_SEPARATOR
;

52 
	gFALSE
 !=ğ(
$fe
 = 
»addœ
(
$å
)))

55 iàĞ! 
Œim
(
$fe
, '.'è
OR
 (
$hidd’
 =ğ
FALSE
 && $file[0] == '.'))

60 ià((
	g$dœeùÜy_d•th
 < 1 
OR
 
	g$Ãw_d•th
 > 0è&& @
is_dœ
(
$sourû_dœ
.
$fe
))

62 
	g$fed©a
[
$fe
] = 
dœeùÜy_m­
(
$sourû_dœ
.$fe.
DIRECTORY_SEPARATOR
, 
$Ãw_d•th
, 
$hidd’
);

66 
	g$fed©a
[] = 
$fe
;

70 
şo£dœ
(
$å
);

71  
	g$fed©a
;

74  
	gFALSE
;

	@system/helpers/download_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

40 iàĞ! 
funùiÚ_exi¡s
('force_download'))

42 
funùiÚ
 
fÜû_dowÆßd
(
$f’ame
 = '', 
$d©a
 = '')

44 ià(
$f’ame
 =ğ'' 
OR
 
$d©a
 == '')

46  
FALSE
;

51 ià(
	gFALSE
 ==ğ
¡½os
(
$f’ame
, '.'))

53  
	gFALSE
;

57 
	g$x
 = 
ex¶ode
('.', 
$f’ame
);

58 
	g$ex‹nsiÚ
 = 
’d
(
$x
);

61 ià(
defšed
('ENVIRONMENT'è
AND
 
is_fe
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/mimes.php'))

63 
šşude
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/mimes.php');

65 
–£if
 (
is_fe
(
APPPATH
.'config/mimes.php'))

67 
šşude
(
APPPATH
.'config/mimes.php');

71 iàĞ! 
is£t
(
$mimes
[
$ex‹nsiÚ
]))

73 
	g$mime
 = 'application/octet-stream';

77 
	g$mime
 = (
is_¬¿y
(
$mimes
[
$ex‹nsiÚ
])) ? $mimes[$extension][0] : $mimes[$extension];

81 ià(
¡½os
(
$_SERVER
['HTTP_USER_AGENT'], "MSIE"è!=ğ
FALSE
)

83 
h—d”
('CÚ‹Á-Ty³: "'.
$mime
.'"');

84 
h—d”
('CÚ‹Á-Di¥os™iÚ:‡‰achm’t; f’ame="'.
$f’ame
.'"');

85 
h—d”
('Expires: 0');

86 
h—d”
('Cache-Control: must-revalidate,…ost-check=0,…re-check=0');

87 
h—d”
("Content-Transfer-Encoding: binary");

88 
h—d”
('Pragma:…ublic');

89 
h—d”
("CÚ‹Á-L’gth: ".
¡¾’
(
$d©a
));

93 
h—d”
('CÚ‹Á-Ty³: "'.
$mime
.'"');

94 
h—d”
('CÚ‹Á-Di¥os™iÚ:‡‰achm’t; f’ame="'.
$f’ame
.'"');

95 
h—d”
("Content-Transfer-Encoding: binary");

96 
h—d”
('Expires: 0');

97 
h—d”
('Pragma:‚o-cache');

98 
h—d”
("CÚ‹Á-L’gth: ".
¡¾’
(
$d©a
));

101 
ex™
(
$d©a
);

	@system/helpers/email_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

36 iàĞ! 
funùiÚ_exi¡s
('valid_email'))

38 
funùiÚ
 
v®id_ema
(
$add»ss
)

40  ( ! 
´eg_m©ch
("/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/ix", 
$add»ss
)è? 
	gFALSE
 : 
TRUE
;

52 iàĞ! 
funùiÚ_exi¡s
('send_email'))

54 
funùiÚ
 
£nd_ema
(
$»c›Á
, 
$subjeù
 = 'Te¡ƒma', 
$mes§ge
 = 'Hello World')

56  
ma
(
$»c›Á
, 
$subjeù
, 
$mes§ge
);

	@system/helpers/file_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

39 iàĞ! 
funùiÚ_exi¡s
('read_file'))

41 
funùiÚ
 
»ad_fe
(
$fe
)

43 iàĞ! 
fe_exi¡s
(
$fe
))

45  
	gFALSE
;

48 ià(
funùiÚ_exi¡s
('file_get_contents'))

50  
fe_g‘_cÚ‹Ás
(
$fe
);

53 iàĞ! 
	g$å
 = @
fİ’
(
$fe
, 
FOPEN_READ
))

55  
	gFALSE
;

58 
æock
(
$å
, 
LOCK_SH
);

60 
	g$d©a
 = '';

61 ià(
fesize
(
$fe
) > 0)

63 
	g$d©a
 =& 
ä—d
(
$å
, 
fesize
(
$fe
));

66 
æock
(
$å
, 
LOCK_UN
);

67 
fşo£
(
$å
);

69  
	g$d©a
;

86 iàĞ! 
funùiÚ_exi¡s
('write_file'))

88 
funùiÚ
 
wr™e_fe
(
$·th
, 
$d©a
, 
$mode
 = 
FOPEN_WRITE_CREATE_DESTRUCTIVE
)

90 iàĞ! 
$å
 = @
fİ’
(
$·th
, 
$mode
))

92  
	gFALSE
;

95 
æock
(
$å
, 
LOCK_EX
);

96 
fwr™e
(
$å
, 
$d©a
);

97 
æock
(
$å
, 
LOCK_UN
);

98 
fşo£
(
$å
);

100  
	gTRUE
;

119 iàĞ! 
funùiÚ_exi¡s
('delete_files'))

121 
funùiÚ
 
d–‘e_fes
(
$·th
, 
$d–_dœ
 = 
FALSE
, 
$Ëv–
 = 0)

124 
$·th
 = 
¹rim
($·th, 
DIRECTORY_SEPARATOR
);

126 iàĞ! 
	g$cu¼’t_dœ
 = @
İ’dœ
(
$·th
))

128  
FALSE
;

131 
	gFALSE
 !=ğ(
$f’ame
 = @
»addœ
(
$cu¼’t_dœ
)))

133 ià(
$f’ame
 !ğ"." 
ªd
 $filename != "..")

135 ià(
is_dœ
(
$·th
.
DIRECTORY_SEPARATOR
.
$f’ame
))

138 ià(
sub¡r
(
$f’ame
, 0, 1) != '.')

140 
d–‘e_fes
(
$·th
.
DIRECTORY_SEPARATOR
.
$f’ame
, 
$d–_dœ
, 
$Ëv–
 + 1);

145 
uÆšk
(
$·th
.
DIRECTORY_SEPARATOR
.
$f’ame
);

149 @
şo£dœ
(
$cu¼’t_dœ
);

151 ià(
	g$d–_dœ
 =ğ
TRUE
 
AND
 
$Ëv–
 > 0)

153  @
rmdœ
(
$·th
);

156  
	gTRUE
;

174 iàĞ! 
funùiÚ_exi¡s
('get_filenames'))

176 
funùiÚ
 
g‘_f’ames
(
$sourû_dœ
, 
$šşude_·th
 = 
FALSE
, 
$_»cursiÚ
 = FALSE)

178 
$_fed©a
 = 
¬¿y
();

180 ià(
	g$å
 = @
İ’dœ
(
$sourû_dœ
))

183 ià(
$_»cursiÚ
 ==ğ
FALSE
)

185 
$_fed©a
 = 
¬¿y
();

186 
	g$sourû_dœ
 = 
¹rim
(
»®·th
(
$sourû_dœ
), 
DIRECTORY_SEPARATOR
).
	gDIRECTORY_SEPARATOR
;

189 
	gFALSE
 !=ğ(
$fe
 = 
»addœ
(
$å
)))

191 ià(@
is_dœ
(
$sourû_dœ
.
$fe
è&& 
¡ºcmp
($file, '.', 1) !== 0)

193 
g‘_f’ames
(
$sourû_dœ
.
$fe
.
DIRECTORY_SEPARATOR
, 
$šşude_·th
, 
TRUE
);

195 
–£if
 (
¡ºcmp
(
$fe
, '.', 1) !== 0)

197 
$_fed©a
[] = (
$šşude_·th
 =ğ
TRUE
è? 
$sourû_dœ
.
$fe
 : $file;

200  
	g$_fed©a
;

204  
	gFALSE
;

225 iàĞ! 
funùiÚ_exi¡s
('get_dir_file_info'))

227 
funùiÚ
 
g‘_dœ_fe_šfo
(
$sourû_dœ
, 
$tİ_Ëv–_Úly
 = 
TRUE
, 
$_»cursiÚ
 = 
FALSE
)

229 
$_fed©a
 = 
¬¿y
();

230 
	g$»Ïtive_·th
 = 
$sourû_dœ
;

232 ià(
	g$å
 = @
İ’dœ
(
$sourû_dœ
))

235 ià(
$_»cursiÚ
 ==ğ
FALSE
)

237 
$_fed©a
 = 
¬¿y
();

238 
	g$sourû_dœ
 = 
¹rim
(
»®·th
(
$sourû_dœ
), 
DIRECTORY_SEPARATOR
).
	gDIRECTORY_SEPARATOR
;

242 
	gFALSE
 !=ğ(
$fe
 = 
»addœ
(
$å
)))

244 ià(@
is_dœ
(
$sourû_dœ
.
$fe
è
AND
 
¡ºcmp
($fe, '.', 1è!=ğ0 AND 
$tİ_Ëv–_Úly
 ==ğ
FALSE
)

246 
g‘_dœ_fe_šfo
(
$sourû_dœ
.
$fe
.
DIRECTORY_SEPARATOR
, 
$tİ_Ëv–_Úly
, 
TRUE
);

248 
–£if
 (
¡ºcmp
(
$fe
, '.', 1) !== 0)

250 
$_fed©a
[
$fe
] = 
g‘_fe_šfo
(
$sourû_dœ
.$file);

251 
	g$_fed©a
[
$fe
]['»Ïtive_·th'] = 
$»Ïtive_·th
;

255  
	g$_fed©a
;

259  
	gFALSE
;

279 iàĞ! 
funùiÚ_exi¡s
('get_file_info'))

281 
funùiÚ
 
g‘_fe_šfo
(
$fe
, 
$»tuºed_v®ues
 = 
¬¿y
('name', 'server_path', 'size', 'date'))

284 iàĞ! 
fe_exi¡s
(
$fe
))

286  
	gFALSE
;

289 ià(
is_¡ršg
(
$»tuºed_v®ues
))

291 
	g$»tuºed_v®ues
 = 
ex¶ode
(',', 
$»tuºed_v®ues
);

294 
fÜ—ch
 (
$»tuºed_v®ues
 
as
 
$key
)

296 
	g$key
)

299 
$fešfo
['Çme'] = 
sub¡r
(
¡¼chr
(
$fe
, 
DIRECTORY_SEPARATOR
), 1);

302 
$fešfo
['£rv”_·th'] = 
$fe
;

305 
$fešfo
['size'] = 
fesize
(
$fe
);

308 
$fešfo
['d©e'] = 
femtime
(
$fe
);

311 
$fešfo
['»adabË'] = 
is_»adabË
(
$fe
);

315 
$fešfo
['wr™abË'] = 
is_wr™abË
(
$fe
);

318 
$fešfo
['execubË'] = 
is_execubË
(
$fe
);

321 
$fešfo
['f•”ms'] = 
f•”ms
(
$fe
);

326  
	g$fešfo
;

345 iàĞ! 
funùiÚ_exi¡s
('get_mime_by_extension'))

347 
funùiÚ
 
g‘_mime_by_ex‹nsiÚ
(
$fe
)

349 
	g$ex‹nsiÚ
 = 
¡¹Şow”
(
sub¡r
(
¡¼chr
(
$fe
, '.'), 1));

351 
glob®
 
	g$mimes
;

353 iàĞ! 
is_¬¿y
(
$mimes
))

355 ià(
defšed
('ENVIRONMENT'è
AND
 
is_fe
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/mimes.php'))

357 
šşude
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/mimes.php');

359 
–£if
 (
is_fe
(
APPPATH
.'config/mimes.php'))

361 
šşude
(
APPPATH
.'config/mimes.php');

364 iàĞ! 
is_¬¿y
(
$mimes
))

366  
	gFALSE
;

370 ià(
¬¿y_key_exi¡s
(
$ex‹nsiÚ
, 
$mimes
))

372 ià(
is_¬¿y
(
$mimes
[
$ex‹nsiÚ
]))

375  
cu¼’t
(
$mimes
[
$ex‹nsiÚ
]);

379  
	g$mimes
[
$ex‹nsiÚ
];

384  
	gFALSE
;

401 iàĞ! 
funùiÚ_exi¡s
('symbolic_permissions'))

403 
funùiÚ
 
symbŞic_³rmissiÚs
(
$³rms
)

405 ià((
	g$³rms
 & 0xC000) == 0xC000)

407 
$symbŞic
 = 's';

409 
–£if
 ((
$³rms
 & 0xA000) == 0xA000)

411 
$symbŞic
 = 'l';

413 
–£if
 ((
$³rms
 & 0x8000) == 0x8000)

415 
$symbŞic
 = '-';

417 
–£if
 ((
$³rms
 & 0x6000) == 0x6000)

419 
$symbŞic
 = 'b';

421 
–£if
 ((
$³rms
 & 0x4000) == 0x4000)

423 
$symbŞic
 = 'd';

425 
–£if
 ((
$³rms
 & 0x2000) == 0x2000)

427 
$symbŞic
 = 'c';

429 
–£if
 ((
$³rms
 & 0x1000) == 0x1000)

431 
$symbŞic
 = 'p';

435 
	g$symbŞic
 = 'u';

439 
	g$symbŞic
 .ğ((
$³rms
 & 0x0100) ? 'r' : '-');

440 
	g$symbŞic
 .ğ((
$³rms
 & 0x0080) ? 'w' : '-');

441 
	g$symbŞic
 .ğ((
$³rms
 & 0x0040) ? (($perms & 0x0800) ? 's' : 'x' ) : (($perms & 0x0800) ? 'S' : '-'));

444 
	g$symbŞic
 .ğ((
$³rms
 & 0x0020) ? 'r' : '-');

445 
	g$symbŞic
 .ğ((
$³rms
 & 0x0010) ? 'w' : '-');

446 
	g$symbŞic
 .ğ((
$³rms
 & 0x0008) ? (($perms & 0x0400) ? 's' : 'x' ) : (($perms & 0x0400) ? 'S' : '-'));

449 
	g$symbŞic
 .ğ((
$³rms
 & 0x0004) ? 'r' : '-');

450 
	g$symbŞic
 .ğ((
$³rms
 & 0x0002) ? 'w' : '-');

451 
	g$symbŞic
 .ğ((
$³rms
 & 0x0001) ? (($perms & 0x0200) ? 't' : 'x' ) : (($perms & 0x0200) ? 'T' : '-'));

453  
	g$symbŞic
;

469 iàĞ! 
funùiÚ_exi¡s
('octal_permissions'))

471 
funùiÚ
 
où®_³rmissiÚs
(
$³rms
)

473  
sub¡r
(
¥rštf
('%o', 
$³rms
), -3);

	@system/helpers/form_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

41 iàĞ! 
funùiÚ_exi¡s
('form_open'))

43 
funùiÚ
 
fÜm_İ’
(
$aùiÚ
 = '', 
$©Œibu‹s
 = '', 
$hidd’
 = 
¬¿y
())

45 
$CI
 =& 
g‘_š¡ªû
();

47 ià(
	g$©Œibu‹s
 == '')

49 
$©Œibu‹s
 = 'method="post"';

53 ià(
	g$aùiÚ
 && 
¡½os
(
$aùiÚ
, '://'è==ğ
FALSE
)

55 
$aùiÚ
 = 
$CI
->
cÚfig
->
s™e_u¾
($action);

59 
$aùiÚ
 
OR
 
	g$aùiÚ
 = 
$CI
->
cÚfig
->
s™e_u¾
($CI->
uri
->
uri_¡ršg
());

61 
	g$fÜm
 = '<fÜm‡ùiÚ="'.
$aùiÚ
.'"';

63 
	g$fÜm
 .ğ
_©Œibu‹s_to_¡ršg
(
$©Œibu‹s
, 
TRUE
);

65 
	g$fÜm
 .= '>';

68 ià(
	g$CI
->
	gcÚfig
->
™em
('c¤f_´ÙeùiÚ'è==ğ
TRUE
 
AND
 ! (
¡½os
(
$aùiÚ
, 
$CI
->
cÚfig
->
s™e_u¾
()è==ğ
FALSE
 
OR
 sŒpos(
$fÜm
, 'method="get"')))

70 
	g$hidd’
[
$CI
->
£cur™y
->
g‘_c¤f_tok’_Çme
()] = $CI->£cur™y->
g‘_c¤f_hash
();

73 ià(
is_¬¿y
(
$hidd’
è
AND
 
couÁ
($hidden) > 0)

75 
	g$fÜm
 .ğ
¥rštf
("<div styË=\"di¥Ïy:nÚe\">%s</div>", 
fÜm_hidd’
(
$hidd’
));

78  
	g$fÜm
;

95 iàĞ! 
funùiÚ_exi¡s
('form_open_multipart'))

97 
funùiÚ
 
fÜm_İ’_muÉ¬t
(
$aùiÚ
 = '', 
$©Œibu‹s
 = 
¬¿y
(), 
$hidd’
 =‡rray())

99 ià(
is_¡ršg
(
$©Œibu‹s
))

101 
$©Œibu‹s
 .= 'ƒnctype="multipart/form-data"';

105 
	g$©Œibu‹s
['enctype'] = 'multipart/form-data';

108  
fÜm_İ’
(
$aùiÚ
, 
$©Œibu‹s
, 
$hidd’
);

125 iàĞ! 
funùiÚ_exi¡s
('form_hidden'))

127 
funùiÚ
 
fÜm_hidd’
(
$Çme
, 
$v®ue
 = '', 
$»cursšg
 = 
FALSE
)

129 
$fÜm
;

131 ià(
	g$»cursšg
 ==ğ
FALSE
)

133 
$fÜm
 = "\n";

136 ià(
is_¬¿y
(
$Çme
))

138 
fÜ—ch
 (
$Çme
 
as
 
$key
 => 
$v®
)

140 
fÜm_hidd’
(
$key
, 
$v®
, 
TRUE
);

142  
	g$fÜm
;

145 iàĞ! 
is_¬¿y
(
$v®ue
))

147 
	g$fÜm
 .ğ'<špuˆty³="hidd’"‚ame="'.
$Çme
.'" v®ue="'.
fÜm_´•
(
$v®ue
, $name).'" />'."\n";

151 
fÜ—ch
 (
$v®ue
 
as
 
$k
 => 
$v
)

153 
$k
 = (
is_št
($k)) ? '' : $k;

154 
fÜm_hidd’
(
$Çme
.'['.
$k
.']', 
$v
, 
TRUE
);

158  
	g$fÜm
;

173 iàĞ! 
funùiÚ_exi¡s
('form_input'))

175 
funùiÚ
 
fÜm_šput
(
$d©a
 = '', 
$v®ue
 = '', 
$exŒa
 = '')

177 
$deçuÉs
 = 
¬¿y
('ty³' => '‹xt', 'Çme' => (Ğ! 
is_¬¿y
(
$d©a
)è? $d©¨: ''), 'v®ue' => 
$v®ue
);

179  "<špuˆ".
_·r£_fÜm_©Œibu‹s
(
$d©a
, 
$deçuÉs
).
	g$exŒa
." />";

196 iàĞ! 
funùiÚ_exi¡s
('form_password'))

198 
funùiÚ
 
fÜm_·sswÜd
(
$d©a
 = '', 
$v®ue
 = '', 
$exŒa
 = '')

200 iàĞ! 
is_¬¿y
(
$d©a
))

202 
$d©a
 = 
¬¿y
('name' => $data);

205 
	g$d©a
['type'] = 'password';

206  
fÜm_šput
(
$d©a
, 
$v®ue
, 
$exŒa
);

223 iàĞ! 
funùiÚ_exi¡s
('form_upload'))

225 
funùiÚ
 
fÜm_u¶ßd
(
$d©a
 = '', 
$v®ue
 = '', 
$exŒa
 = '')

227 iàĞ! 
is_¬¿y
(
$d©a
))

229 
$d©a
 = 
¬¿y
('name' => $data);

232 
	g$d©a
['type'] = 'file';

233  
fÜm_šput
(
$d©a
, 
$v®ue
, 
$exŒa
);

248 iàĞ! 
funùiÚ_exi¡s
('form_textarea'))

250 
funùiÚ
 
fÜm_‹x»a
(
$d©a
 = '', 
$v®ue
 = '', 
$exŒa
 = '')

252 
$deçuÉs
 = 
¬¿y
('Çme' => (Ğ! 
is_¬¿y
(
$d©a
)) ? $data : ''), 'cols' => '40', 'rows' => '10');

254 iàĞ! 
is_¬¿y
(
$d©a
è
	gOR
 ! 
is£t
($data['value']))

256 
	g$v®
 = 
$v®ue
;

260 
	g$v®
 = 
$d©a
['value'];

261 
un£t
(
$d©a
['value']);

264 
	g$Çme
 = (
is_¬¿y
(
$d©a
)) ? $data['name'] : $data;

265  "<‹x»¨".
_·r£_fÜm_©Œibu‹s
(
$d©a
, 
$deçuÉs
).
	g$exŒa
.">".
fÜm_´•
(
$v®
, 
$Çme
)."</textarea>";

281 iàĞ! 
funùiÚ_exi¡s
('form_multiselect'))

283 
funùiÚ
 
fÜm_muÉi£Ëù
(
$Çme
 = '', 
$İtiÚs
 = 
¬¿y
(), 
$£Ëùed
 =‡¼ay(), 
$exŒa
 = '')

285 iàĞ! 
¡½os
(
$exŒa
, 'multiple'))

287 
$exŒa
 .= ' multiple="multiple"';

290  
fÜm_drİdown
(
$Çme
, 
$İtiÚs
, 
$£Ëùed
, 
$exŒa
);

306 iàĞ! 
funùiÚ_exi¡s
('form_dropdown'))

308 
funùiÚ
 
fÜm_drİdown
(
$Çme
 = '', 
$İtiÚs
 = 
¬¿y
(), 
$£Ëùed
 =‡¼ay(), 
$exŒa
 = '')

310 iàĞ! 
is_¬¿y
(
$£Ëùed
))

312 
$£Ëùed
 = 
¬¿y
($selected);

316 ià(
couÁ
(
$£Ëùed
) === 0)

319 ià(
is£t
(
$_POST
[
$Çme
]))

321 
$£Ëùed
 = 
¬¿y
(
$_POST
[
$Çme
]);

325 ià(
	g$exŒa
 !ğ''è
$exŒa
 = ' '.$extra;

327 
	g$muÉË
 = (
couÁ
(
$£Ëùed
è> 1 && 
¡½os
(
$exŒa
, 'muÉË'è==ğ
FALSE
) ? ' multiple="multiple"' : '';

329 
	g$fÜm
 = '<£Ëù‚ame="'.
$Çme
.'"'.
$exŒa
.
$muÉË
.">\n";

331 
fÜ—ch
 (
$İtiÚs
 
as
 
$key
 => 
$v®
)

333 
$key
 = (
¡ršg
) $key;

335 ià(
is_¬¿y
(
$v®
è&& ! 
em±y
($val))

337 
	g$fÜm
 .ğ'<İtgrou°Ïb–="'.
$key
.'">'."\n";

339 
fÜ—ch
 (
$v®
 
as
 
$İtgroup_key
 => 
$İtgroup_v®
)

341 
$£l
 = (
š_¬¿y
(
$İtgroup_key
, 
$£Ëùed
)) ? ' selected="selected"' : '';

343 
	g$fÜm
 .ğ'<İtiÚ v®ue="'.
$İtgroup_key
.'"'.
$£l
.'>'.(
¡ršg
è
$İtgroup_v®
."</option>\n";

346 
	g$fÜm
 .= '</optgroup>'."\n";

350 
	g$£l
 = (
š_¬¿y
(
$key
, 
$£Ëùed
)) ? ' selected="selected"' : '';

352 
	g$fÜm
 .ğ'<İtiÚ v®ue="'.
$key
.'"'.
$£l
.'>'.(
¡ršg
è
$v®
."</option>\n";

356 
	g$fÜm
 .= '</select>';

358  
	g$fÜm
;

374 iàĞ! 
funùiÚ_exi¡s
('form_checkbox'))

376 
funùiÚ
 
fÜm_checkbox
(
$d©a
 = '', 
$v®ue
 = '', 
$checked
 = 
FALSE
, 
$exŒa
 = '')

378 
$deçuÉs
 = 
¬¿y
('ty³' => 'checkbox', 'Çme' => (Ğ! 
is_¬¿y
(
$d©a
)è? $d©¨: ''), 'v®ue' => 
$v®ue
);

380 ià(
is_¬¿y
(
$d©a
è
AND
 
¬¿y_key_exi¡s
('checked', $data))

382 
	g$checked
 = 
$d©a
['checked'];

384 ià(
	g$checked
 =ğ
FALSE
)

386 
un£t
(
$d©a
['checked']);

390 
	g$d©a
['checked'] = 'checked';

394 ià(
	g$checked
 =ğ
TRUE
)

396 
$deçuÉs
['checked'] = 'checked';

400 
un£t
(
$deçuÉs
['checked']);

403  "<špuˆ".
_·r£_fÜm_©Œibu‹s
(
$d©a
, 
$deçuÉs
).
	g$exŒa
." />";

419 iàĞ! 
funùiÚ_exi¡s
('form_radio'))

421 
funùiÚ
 
fÜm_¿dio
(
$d©a
 = '', 
$v®ue
 = '', 
$checked
 = 
FALSE
, 
$exŒa
 = '')

423 iàĞ! 
is_¬¿y
(
$d©a
))

425 
$d©a
 = 
¬¿y
('name' => $data);

428 
	g$d©a
['type'] = 'radio';

429  
fÜm_checkbox
(
$d©a
, 
$v®ue
, 
$checked
, 
$exŒa
);

444 iàĞ! 
funùiÚ_exi¡s
('form_submit'))

446 
funùiÚ
 
fÜm_subm™
(
$d©a
 = '', 
$v®ue
 = '', 
$exŒa
 = '')

448 
$deçuÉs
 = 
¬¿y
('ty³' => 'subm™', 'Çme' => (Ğ! 
is_¬¿y
(
$d©a
)è? $d©¨: ''), 'v®ue' => 
$v®ue
);

450  "<špuˆ".
_·r£_fÜm_©Œibu‹s
(
$d©a
, 
$deçuÉs
).
	g$exŒa
." />";

465 iàĞ! 
funùiÚ_exi¡s
('form_reset'))

467 
funùiÚ
 
fÜm_»£t
(
$d©a
 = '', 
$v®ue
 = '', 
$exŒa
 = '')

469 
$deçuÉs
 = 
¬¿y
('ty³' => '»£t', 'Çme' => (Ğ! 
is_¬¿y
(
$d©a
)è? $d©¨: ''), 'v®ue' => 
$v®ue
);

471  "<špuˆ".
_·r£_fÜm_©Œibu‹s
(
$d©a
, 
$deçuÉs
).
	g$exŒa
." />";

486 iàĞ! 
funùiÚ_exi¡s
('form_button'))

488 
funùiÚ
 
fÜm_bu‰Ú
(
$d©a
 = '', 
$cÚ‹Á
 = '', 
$exŒa
 = '')

490 
$deçuÉs
 = 
¬¿y
('Çme' => (Ğ! 
is_¬¿y
(
$d©a
)) ? $data : ''), 'type' => 'button');

492 iàĞ
is_¬¿y
(
$d©a
è
AND
 
is£t
($data['content']))

494 
	g$cÚ‹Á
 = 
$d©a
['content'];

495 
un£t
(
$d©a
['content']);

498  "<bu‰Ú ".
_·r£_fÜm_©Œibu‹s
(
$d©a
, 
$deçuÉs
).
	g$exŒa
.">".
	g$cÚ‹Á
."</button>";

513 iàĞ! 
funùiÚ_exi¡s
('form_label'))

515 
funùiÚ
 
fÜm_Ïb–
(
$Ïb–_‹xt
 = '', 
$id
 = '', 
$©Œibu‹s
 = 
¬¿y
())

518 
$Ïb–
 = '<label';

520 ià(
	g$id
 != '')

522 
$Ïb–
 .= " for=\"$id\"";

525 ià(
is_¬¿y
(
$©Œibu‹s
è
AND
 
couÁ
($attributes) > 0)

527 
fÜ—ch
 (
$©Œibu‹s
 
as
 
$key
 => 
$v®
)

529 
$Ïb–
 .ğ' '.
$key
.'="'.
$v®
.'"';

533 
	g$Ïb–
 .= ">$label_text</label>";

535  
	g$Ïb–
;

551 iàĞ! 
funùiÚ_exi¡s
('form_fieldset'))

553 
funùiÚ
 
fÜm_f›ld£t
(
$Ëg’d_‹xt
 = '', 
$©Œibu‹s
 = 
¬¿y
())

555 
$f›ld£t
 = "<fieldset";

557 
	g$f›ld£t
 .ğ
_©Œibu‹s_to_¡ršg
(
$©Œibu‹s
, 
FALSE
);

559 
	g$f›ld£t
 .= ">\n";

561 ià(
	g$Ëg’d_‹xt
 != '')

563 
$f›ld£t
 .= "<legend>$legend_text</legend>\n";

566  
	g$f›ld£t
;

579 iàĞ! 
funùiÚ_exi¡s
('form_fieldset_close'))

581 
funùiÚ
 
fÜm_f›ld£t_şo£
(
$exŒa
 = '')

583  "</f›ld£t>".
$exŒa
;

596 iàĞ! 
funùiÚ_exi¡s
('form_close'))

598 
funùiÚ
 
fÜm_şo£
(
$exŒa
 = '')

600  "</fÜm>".
$exŒa
;

615 iàĞ! 
funùiÚ_exi¡s
('form_prep'))

617 
funùiÚ
 
fÜm_´•
(
$¡r
 = '', 
$f›ld_Çme
 = '')

619 
$´•³d_f›lds
 = 
¬¿y
();

622 ià(
is_¬¿y
(
$¡r
))

624 
fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

626 
$¡r
[
$key
] = 
fÜm_´•
(
$v®
);

629  
	g$¡r
;

632 ià(
	g$¡r
 === '')

641 ià(
is£t
(
$´•³d_f›lds
[
$f›ld_Çme
]))

643  
	g$¡r
;

646 
	g$¡r
 = 
html¥ecŸlch¬s
(
$¡r
);

649 
	g$¡r
 = 
¡r_»¶aû
(
¬¿y
("'", '"'),‡¼ay("&#39;", "&quÙ;"), 
$¡r
);

651 ià(
	g$f›ld_Çme
 != '')

653 
$´•³d_f›lds
[
$f›ld_Çme
] = $field_name;

656  
	g$¡r
;

673 iàĞ! 
funùiÚ_exi¡s
('set_value'))

675 
funùiÚ
 
£t_v®ue
(
$f›ld
 = '', 
$deçuÉ
 = '')

677 ià(
FALSE
 ==ğ(
$OBJ
 =& 
_g‘_v®id©iÚ_objeù
()))

679 iàĞ! 
is£t
(
$_POST
[
$f›ld
]))

681  
$deçuÉ
;

684  
fÜm_´•
(
$_POST
[
$f›ld
], $field);

687  
fÜm_´•
(
$OBJ
->
£t_v®ue
(
$f›ld
, 
$deçuÉ
), $field);

705 iàĞ! 
funùiÚ_exi¡s
('set_select'))

707 
funùiÚ
 
£t_£Ëù
(
$f›ld
 = '', 
$v®ue
 = '', 
$deçuÉ
 = 
FALSE
)

709 
$OBJ
 =& 
_g‘_v®id©iÚ_objeù
();

711 ià(
	g$OBJ
 ==ğ
FALSE
)

713 iàĞ! 
is£t
(
$_POST
[
$f›ld
]))

715 ià(
couÁ
(
$_POST
è==ğ0 
AND
 
$deçuÉ
 =ğ
TRUE
)

722 
	g$f›ld
 = 
$_POST
[
$f›ld
];

724 ià(
is_¬¿y
(
$f›ld
))

726 iàĞ! 
š_¬¿y
(
$v®ue
, 
$f›ld
))

733 ià((
	g$f›ld
 =ğ'' 
OR
 
$v®ue
 =ğ''èOR (
$f›ld
 != $value))

742  
	g$OBJ
->
£t_£Ëù
(
$f›ld
, 
$v®ue
, 
$deçuÉ
);

760 iàĞ! 
funùiÚ_exi¡s
('set_checkbox'))

762 
funùiÚ
 
£t_checkbox
(
$f›ld
 = '', 
$v®ue
 = '', 
$deçuÉ
 = 
FALSE
)

764 
$OBJ
 =& 
_g‘_v®id©iÚ_objeù
();

766 ià(
	g$OBJ
 ==ğ
FALSE
)

768 iàĞ! 
is£t
(
$_POST
[
$f›ld
]))

770 ià(
couÁ
(
$_POST
è==ğ0 
AND
 
$deçuÉ
 =ğ
TRUE
)

777 
	g$f›ld
 = 
$_POST
[
$f›ld
];

779 ià(
is_¬¿y
(
$f›ld
))

781 iàĞ! 
š_¬¿y
(
$v®ue
, 
$f›ld
))

788 ià((
	g$f›ld
 =ğ'' 
OR
 
$v®ue
 =ğ''èOR (
$f›ld
 != $value))

797  
	g$OBJ
->
£t_checkbox
(
$f›ld
, 
$v®ue
, 
$deçuÉ
);

815 iàĞ! 
funùiÚ_exi¡s
('set_radio'))

817 
funùiÚ
 
£t_¿dio
(
$f›ld
 = '', 
$v®ue
 = '', 
$deçuÉ
 = 
FALSE
)

819 
$OBJ
 =& 
_g‘_v®id©iÚ_objeù
();

821 ià(
	g$OBJ
 ==ğ
FALSE
)

823 iàĞ! 
is£t
(
$_POST
[
$f›ld
]))

825 ià(
couÁ
(
$_POST
è==ğ0 
AND
 
$deçuÉ
 =ğ
TRUE
)

832 
	g$f›ld
 = 
$_POST
[
$f›ld
];

834 ià(
is_¬¿y
(
$f›ld
))

836 iàĞ! 
š_¬¿y
(
$v®ue
, 
$f›ld
))

843 ià((
	g$f›ld
 =ğ'' 
OR
 
$v®ue
 =ğ''èOR (
$f›ld
 != $value))

852  
	g$OBJ
->
£t_¿dio
(
$f›ld
, 
$v®ue
, 
$deçuÉ
);

870 iàĞ! 
funùiÚ_exi¡s
('form_error'))

872 
funùiÚ
 
fÜm_”rÜ
(
$f›ld
 = '', 
$´efix
 = '', 
$suffix
 = '')

874 ià(
FALSE
 ==ğ(
$OBJ
 =& 
_g‘_v®id©iÚ_objeù
()))

879  
	g$OBJ
->
”rÜ
(
$f›ld
, 
$´efix
, 
$suffix
);

896 iàĞ! 
funùiÚ_exi¡s
('validation_errors'))

898 
funùiÚ
 
v®id©iÚ_”rÜs
(
$´efix
 = '', 
$suffix
 = '')

900 ià(
FALSE
 ==ğ(
$OBJ
 =& 
_g‘_v®id©iÚ_objeù
()))

905  
	g$OBJ
->
”rÜ_¡ršg
(
$´efix
, 
$suffix
);

921 iàĞ! 
funùiÚ_exi¡s
('_parse_form_attributes'))

923 
funùiÚ
 
_·r£_fÜm_©Œibu‹s
(
$©Œibu‹s
, 
$deçuÉ
)

925 ià(
is_¬¿y
(
$©Œibu‹s
))

927 
fÜ—ch
 (
$deçuÉ
 
as
 
$key
 => 
$v®
)

929 ià(
is£t
(
$©Œibu‹s
[
$key
]))

931 
$deçuÉ
[
$key
] = 
$©Œibu‹s
[$key];

932 
un£t
(
$©Œibu‹s
[
$key
]);

936 ià(
couÁ
(
$©Œibu‹s
) > 0)

938 
	g$deçuÉ
 = 
¬¿y_m”ge
(
$deçuÉ
, 
$©Œibu‹s
);

942 
	g$©t
 = '';

944 
fÜ—ch
 (
$deçuÉ
 
as
 
$key
 => 
$v®
)

946 ià(
$key
 == 'value')

948 
$v®
 = 
fÜm_´•
($v®, 
$deçuÉ
['name']);

951 
	g$©t
 .ğ
$key
 . '="' . 
$v®
 . '" ';

954  
	g$©t
;

970 iàĞ! 
funùiÚ_exi¡s
('_attributes_to_string'))

972 
funùiÚ
 
_©Œibu‹s_to_¡ršg
(
$©Œibu‹s
, 
$fÜmg
 = 
FALSE
)

974 ià(
is_¡ršg
(
$©Œibu‹s
è
AND
 
¡¾’
($attributes) > 0)

976 ià(
$fÜmg
 =ğ
TRUE
 
AND
 
¡½os
(
$©Œibu‹s
, 'm‘hod='è==ğ
FALSE
)

978 
$©Œibu‹s
 .= ' method="post"';

981 ià(
	g$fÜmg
 =ğ
TRUE
 
AND
 
¡½os
(
$©Œibu‹s
, 'acû±-ch¬£t='è==ğ
FALSE
)

983 
$©Œibu‹s
 .ğ'‡cû±-ch¬£t="'.
¡¹Şow”
(
cÚfig_™em
('charset')).'"';

986  ' '.
	g$©Œibu‹s
;

989 ià(
is_objeù
(
$©Œibu‹s
è
AND
 
couÁ
($attributes) > 0)

991 
	g$©Œibu‹s
 = (
¬¿y
)
$©Œibu‹s
;

994 ià(
is_¬¿y
(
$©Œibu‹s
è
AND
 
couÁ
($attributes) > 0)

996 
	g$©ts
 = '';

998 iàĞ! 
is£t
(
$©Œibu‹s
['m‘hod']è
AND
 
	g$fÜmg
 ==ğ
TRUE
)

1000 
$©ts
 .= ' method="post"';

1003 iàĞ! 
is£t
(
$©Œibu‹s
['acû±-ch¬£t']è
AND
 
	g$fÜmg
 ==ğ
TRUE
)

1005 
$©ts
 .ğ'‡cû±-ch¬£t="'.
¡¹Şow”
(
cÚfig_™em
('charset')).'"';

1008 
fÜ—ch
 (
$©Œibu‹s
 
as
 
$key
 => 
$v®
)

1010 
$©ts
 .ğ' '.
$key
.'="'.
$v®
.'"';

1013  
	g$©ts
;

1029 iàĞ! 
funùiÚ_exi¡s
('_get_validation_object'))

1031 
	gfunùiÚ
 &
_g‘_v®id©iÚ_objeù
()

1033 
	g$CI
 =& 
g‘_š¡ªû
();

1036 
	g$»tuº
 = 
FALSE
;

1038 ià(
	gFALSE
 !=ğ(
$objeù
 = 
$CI
->
lßd
->
is_lßded
('form_validation')))

1040 iàĞ! 
is£t
(
$CI
->
$objeù
è
OR
 ! 
is_objeù
($CI->$object))

1042  
$»tuº
;

1045  
	g$CI
->
	g$objeù
;

1048  
	g$»tuº
;

	@system/helpers/html_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

41 iàĞ! 
funùiÚ_exi¡s
('heading'))

43 
funùiÚ
 
h—dšg
(
$d©a
 = '', 
$h
 = '1', 
$©Œibu‹s
 = '')

45 
$©Œibu‹s
 = ($attributes != '') ? ' '.$attributes : $attributes;

46  "<h".
	g$h
.
	g$©Œibu‹s
.">".
	g$d©a
."</h".$h.">";

62 iàĞ! 
funùiÚ_exi¡s
('ul'))

64 
funùiÚ
 
ul
(
$li¡
, 
$©Œibu‹s
 = '')

66  
_li¡
('ul', 
$li¡
, 
$©Œibu‹s
);

82 iàĞ! 
funùiÚ_exi¡s
('ol'))

84 
funùiÚ
 
Ş
(
$li¡
, 
$©Œibu‹s
 = '')

86  
_li¡
('Ş', 
$li¡
, 
$©Œibu‹s
);

104 iàĞ! 
funùiÚ_exi¡s
('_list'))

106 
funùiÚ
 
_li¡
(
$ty³
 = 'ul', 
$li¡
, 
$©Œibu‹s
 = '', 
$d•th
 = 0)

109 iàĞ! 
is_¬¿y
(
$li¡
))

111  
$li¡
;

115 
	g$out
 = 
¡r_»³©
(" ", 
$d•th
);

118 ià(
is_¬¿y
(
$©Œibu‹s
))

120 
	g$©ts
 = '';

121 
fÜ—ch
 (
$©Œibu‹s
 
as
 
$key
 => 
$v®
)

123 
$©ts
 .ğ' ' . 
$key
 . '="' . 
$v®
 . '"';

125 
	g$©Œibu‹s
 = 
$©ts
;

127 
–£if
 (
is_¡ršg
(
$©Œibu‹s
è
AND
 
¡¾’
($attributes) > 0)

129 
	g$©Œibu‹s
 = ' '. 
$©Œibu‹s
;

133 
	g$out
 .ğ"<".
$ty³
.
$©Œibu‹s
.">\n";

138 
	g$_Ï¡_li¡_™em
 = '';

139 
fÜ—ch
 (
$li¡
 
as
 
$key
 => 
$v®
)

141 
$_Ï¡_li¡_™em
 = 
$key
;

143 
	g$out
 .ğ
¡r_»³©
(" ", 
$d•th
 + 2);

144 
	g$out
 .= "<li>";

146 iàĞ! 
is_¬¿y
(
$v®
))

148 
	g$out
 .ğ
$v®
;

152 
	g$out
 .ğ
$_Ï¡_li¡_™em
."\n";

153 
	g$out
 .ğ
_li¡
(
$ty³
, 
$v®
, '', 
$d•th
 + 4);

154 
	g$out
 .ğ
¡r_»³©
(" ", 
$d•th
 + 2);

157 
	g$out
 .= "</li>\n";

161 
	g$out
 .ğ
¡r_»³©
(" ", 
$d•th
);

164 
	g$out
 .ğ"</".
$ty³
.">\n";

166  
	g$out
;

179 iàĞ! 
funùiÚ_exi¡s
('br'))

181 
funùiÚ
 
br
(
$num
 = 1)

183  
¡r_»³©
("<b¸/>", 
$num
);

198 iàĞ! 
funùiÚ_exi¡s
('img'))

200 
funùiÚ
 
img
(
$¤c
 = '', 
$šdex_·ge
 = 
FALSE
)

202 iàĞ! 
is_¬¿y
(
$¤c
) )

204 
$¤c
 = 
¬¿y
('src' => $src);

208 iàĞ! 
is£t
(
$¤c
['alt']))

210 
	g$¤c
['alt'] = '';

213 
	g$img
 = '<img';

215 
fÜ—ch
 (
$¤c
 
as
 
$k
=>
$v
)

218 ià(
$k
 =ğ'¤c' 
AND
 
¡½os
(
$v
, '://'è==ğ
FALSE
)

220 
$CI
 =& 
g‘_š¡ªû
();

222 ià(
	g$šdex_·ge
 ==ğ
TRUE
)

224 
$img
 .ğ' src="'.
$CI
->
cÚfig
->
s™e_u¾
(
$v
).'"';

228 
	g$img
 .ğ' src="'.
$CI
->
cÚfig
->
¦ash_™em
('ba£_u¾').
$v
.'"';

233 
	g$img
 .= " $k=\"$v\"";

237 
	g$img
 .= '/>';

239  
	g$img
;

258 iàĞ! 
funùiÚ_exi¡s
('doctype'))

260 
funùiÚ
 
doùy³
(
$ty³
 = 'xhtml1-strict')

262 
glob®
 
$_doùy³s
;

264 iàĞ! 
is_¬¿y
(
$_doùy³s
))

266 ià(
defšed
('ENVIRONMENT'è
AND
 
is_fe
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/doctypes.php'))

268 
šşude
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/doctypes.php');

270 
–£if
 (
is_fe
(
APPPATH
.'config/doctypes.php'))

272 
šşude
(
APPPATH
.'config/doctypes.php');

275 iàĞ! 
is_¬¿y
(
$_doùy³s
))

277  
	gFALSE
;

281 ià(
is£t
(
$_doùy³s
[
$ty³
]))

283  
	g$_doùy³s
[
$ty³
];

287  
	gFALSE
;

308 iàĞ! 
funùiÚ_exi¡s
('link_tag'))

310 
funùiÚ
 
lšk_g
(
$h»f
 = '', 
$»l
 = '¡yËsh“t', 
$ty³
 = '‹xt/css', 
$t™Ë
 = '', 
$medŸ
 = '', 
$šdex_·ge
 = 
FALSE
)

312 
$CI
 =& 
g‘_š¡ªû
();

314 
	g$lšk
 = '<link ';

316 ià(
is_¬¿y
(
$h»f
))

318 
fÜ—ch
 (
$h»f
 
as
 
$k
=>
$v
)

320 ià(
$k
 =ğ'h»f' 
AND
 
¡½os
(
$v
, '://'è==ğ
FALSE
)

322 ià(
$šdex_·ge
 ==ğ
TRUE
)

324 
$lšk
 .ğ'h»f="'.
$CI
->
cÚfig
->
s™e_u¾
(
$v
).'" ';

328 
	g$lšk
 .ğ'h»f="'.
$CI
->
cÚfig
->
¦ash_™em
('ba£_u¾').
$v
.'" ';

333 
	g$lšk
 .= "$k=\"$v\" ";

337 
	g$lšk
 .= "/>";

341 iàĞ
¡½os
(
$h»f
, '://'è!=ğ
FALSE
)

343 
$lšk
 .ğ'h»f="'.
$h»f
.'" ';

345 
–£if
 (
$šdex_·ge
 ==ğ
TRUE
)

347 
$lšk
 .ğ'h»f="'.
$CI
->
cÚfig
->
s™e_u¾
(
$h»f
).'" ';

351 
	g$lšk
 .ğ'h»f="'.
$CI
->
cÚfig
->
¦ash_™em
('ba£_u¾').
$h»f
.'" ';

354 
	g$lšk
 .ğ'»l="'.
$»l
.'"y³="'.
$ty³
.'" ';

356 ià(
	g$medŸ
 != '')

358 
$lšk
 .ğ'medŸ="'.
$medŸ
.'" ';

361 ià(
	g$t™Ë
 != '')

363 
$lšk
 .ğ't™Ë="'.
$t™Ë
.'" ';

366 
	g$lšk
 .= '/>';

370  
	g$lšk
;

383 iàĞ! 
funùiÚ_exi¡s
('meta'))

385 
funùiÚ
 
m‘a
(
$Çme
 = '', 
$cÚ‹Á
 = '', 
$ty³
 = 'Çme', 
$Ãwlše
 = "\n")

389 iàĞ! 
is_¬¿y
(
$Çme
))

391 
$Çme
 = 
¬¿y
×¼ay('Çme' => $Çme, 'cÚ‹Á' => 
$cÚ‹Á
, 'ty³' => 
$ty³
, 'Ãwlše' => 
$Ãwlše
));

396 ià(
is£t
(
$Çme
['name']))

398 
	g$Çme
 = 
¬¿y
(
$Çme
);

402 
	g$¡r
 = '';

403 
fÜ—ch
 (
$Çme
 
as
 
$m‘a
)

405 
	g$ty³
 = ( ! 
is£t
(
$m‘a
['ty³']è
OR
 $meta['type'] == 'name') ? 'name' : 'http-equiv';

406 
	g$Çme
 = ( ! 
is£t
(
$m‘a
['name'])) ? '' : $meta['name'];

407 
	g$cÚ‹Á
 = ( ! 
is£t
(
$m‘a
['content'])) ? '' : $meta['content'];

408 
	g$Ãwlše
 = ( ! 
is£t
(
$m‘a
['newline'])) ? "\n" : $meta['newline'];

410 
	g$¡r
 .ğ'<m‘¨'.
$ty³
.'="'.
$Çme
.'" cÚ‹Á="'.
$cÚ‹Á
.'" />'.
$Ãwlše
;

413  
	g$¡r
;

426 iàĞ! 
funùiÚ_exi¡s
('nbs'))

428 
funùiÚ
 
nbs
(
$num
 = 1)

430  
¡r_»³©
("&nb¥;", 
$num
);

	@system/helpers/inflector_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

40 iàĞ! 
funùiÚ_exi¡s
('singular'))

42 
funùiÚ
 
sšguÏr
(
$¡r
)

44 
	g$»suÉ
 = 
¡rv®
(
$¡r
);

46 
	g$sšguÏr_ruËs
 = 
¬¿y
(

76 
fÜ—ch
 (
$sšguÏr_ruËs
 
as
 
$ruË
 => 
$»¶aûm’t
)

78 ià(
´eg_m©ch
(
$ruË
, 
$»suÉ
))

80 
$»suÉ
 = 
´eg_»¶aû
(
$ruË
, 
$»¶aûm’t
, $result);

85  
	g$»suÉ
;

101 iàĞ! 
funùiÚ_exi¡s
('plural'))

103 
funùiÚ
 
¶u¿l
(
$¡r
, 
$fÜû
 = 
FALSE
)

105 
$»suÉ
 = 
¡rv®
(
$¡r
);

107 
	g$¶u¿l_ruËs
 = 
¬¿y
(

129 
fÜ—ch
 (
$¶u¿l_ruËs
 
as
 
$ruË
 => 
$»¶aûm’t
)

131 ià(
´eg_m©ch
(
$ruË
, 
$»suÉ
))

133 
$»suÉ
 = 
´eg_»¶aû
(
$ruË
, 
$»¶aûm’t
, $result);

138  
	g$»suÉ
;

153 iàĞ! 
funùiÚ_exi¡s
('camelize'))

155 
funùiÚ
 
ÿm–ize
(
$¡r
)

157 
	g$¡r
 = 'x'.
¡¹Şow”
(
Œim
(
$¡r
));

158 
	g$¡r
 = 
ucwÜds
(
´eg_»¶aû
('/[\s_]+/', ' ', 
$¡r
));

159  
sub¡r
(
¡r_»¶aû
(' ', '', 
$¡r
), 1);

174 iàĞ! 
funùiÚ_exi¡s
('underscore'))

176 
funùiÚ
 
und”scÜe
(
$¡r
)

178  
´eg_»¶aû
('/[\s]+/', '_', 
¡¹Şow”
(
Œim
(
$¡r
)));

193 iàĞ! 
funùiÚ_exi¡s
('humanize'))

195 
funùiÚ
 
humªize
(
$¡r
)

197  
ucwÜds
(
´eg_»¶aû
('/[_]+/', ' ', 
¡¹Şow”
(
Œim
(
$¡r
))));

	@system/helpers/language_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

40 iàĞ! 
funùiÚ_exi¡s
('lang'))

42 
funùiÚ
 
Ïng
(
$lše
, 
$id
 = '')

44 
$CI
 =& 
g‘_š¡ªû
();

45 
	g$lše
 = 
$CI
->
Ïng
->
lše
(
$lše
);

47 ià(
	g$id
 != '')

49 
$lše
 = '<Ïb– fÜ="'.
$id
.'">'.$line."</label>";

52  
	g$lše
;

	@system/helpers/number_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

37 iàĞ! 
funùiÚ_exi¡s
('byte_format'))

39 
funùiÚ
 
by‹_fÜm©
(
$num
, 
$´ecisiÚ
 = 1)

41 
$CI
 =& 
g‘_š¡ªû
();

42 
	g$CI
->
	gÏng
->
lßd
('number');

44 ià(
	g$num
 >= 1000000000000)

46 
$num
 = 
round
($num / 1099511627776, 
$´ecisiÚ
);

47 
	g$un™
 = 
$CI
->
Ïng
->
lše
('terabyte_abbr');

49 
–£if
 (
$num
 >= 1000000000)

51 
$num
 = 
round
($num / 1073741824, 
$´ecisiÚ
);

52 
	g$un™
 = 
$CI
->
Ïng
->
lše
('gigabyte_abbr');

54 
–£if
 (
$num
 >= 1000000)

56 
$num
 = 
round
($num / 1048576, 
$´ecisiÚ
);

57 
	g$un™
 = 
$CI
->
Ïng
->
lše
('megabyte_abbr');

59 
–£if
 (
$num
 >= 1000)

61 
$num
 = 
round
($num / 1024, 
$´ecisiÚ
);

62 
	g$un™
 = 
$CI
->
Ïng
->
lše
('kilobyte_abbr');

66 
	g$un™
 = 
$CI
->
Ïng
->
lše
('bytes');

67  
numb”_fÜm©
(
$num
).' '.
	g$un™
;

70  
numb”_fÜm©
(
$num
, 
$´ecisiÚ
).' '.
	g$un™
;

	@system/helpers/path_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

38 iàĞ! 
funùiÚ_exi¡s
('set_realpath'))

40 
funùiÚ
 
£t_»®·th
(
$·th
, 
$check_exi¡ªû
 = 
FALSE
)

43 ià(
´eg_m©ch
("#^(h‰p:\/\/|h‰ps:\/\/|www\.|áp|[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})#i", 
$·th
))

45 
show_”rÜ
('The…ath you submitted must be‡†ocal server…ath,‚ot‡ URL');

49 ià(
funùiÚ_exi¡s
('»®·th'è
	gAND
 @
»®·th
(
$·th
è!=ğ
FALSE
)

51 
$·th
 = 
»®·th
($path).'/';

55 
	g$·th
 = 
´eg_»¶aû
("#([^/])/*$#", "\\1/", 
$·th
);

58 ià(
	g$check_exi¡ªû
 =ğ
TRUE
)

60 iàĞ! 
is_dœ
(
$·th
))

62 
show_”rÜ
('NÙ‡ v®id…©h: '.
$·th
);

66  
	g$·th
;

	@system/helpers/security_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

38 iàĞ! 
funùiÚ_exi¡s
('xss_clean'))

40 
funùiÚ
 
xss_ş—n
(
$¡r
, 
$is_image
 = 
FALSE
)

42 
$CI
 =& 
g‘_š¡ªû
();

43  
	g$CI
->
	g£cur™y
->
xss_ş—n
(
$¡r
, 
$is_image
);

56 iàĞ! 
funùiÚ_exi¡s
('sanitize_filename'))

58 
funùiÚ
 
§n™ize_f’ame
(
$f’ame
)

60 
	g$CI
 =& 
g‘_š¡ªû
();

61  
	g$CI
->
	g£cur™y
->
§n™ize_f’ame
(
$f’ame
);

74 iàĞ! 
funùiÚ_exi¡s
('do_hash'))

76 
funùiÚ
 
do_hash
(
$¡r
, 
$ty³
 = 'sha1')

78 ià(
$ty³
 == 'sha1')

80  
sha1
(
$¡r
);

84  
md5
(
$¡r
);

98 iàĞ! 
funùiÚ_exi¡s
('strip_image_tags'))

100 
funùiÚ
 
¡r_image_gs
(
$¡r
)

102 
	g$¡r
 = 
´eg_»¶aû
("#<img\s+.*?¤c\s*=\s*[\"'](.+?)[\"'].*?\>#", "\\1", 
$¡r
);

103 
	g$¡r
 = 
´eg_»¶aû
("#<img\s+.*?¤c\s*=\s*(.+?).*?\>#", "\\1", 
$¡r
);

105  
	g$¡r
;

118 iàĞ! 
funùiÚ_exi¡s
('encode_php_tags'))

120 
funùiÚ
 
’code_php_gs
(
$¡r
)

122  
¡r_»¶aû
(
¬¿y
('<?php', '<?PHP', '<?', '?>'),‡¼ay('&É;?php', '&É;?PHP', '&É;?', '?&gt;'), 
$¡r
);

	@system/helpers/smiley_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

41 iàĞ! 
funùiÚ_exi¡s
('smiley_js'))

43 
funùiÚ
 
smey_js
(
$®Ÿs
 = '', 
$f›ld_id
 = '', 
$šlše
 = 
TRUE
)

45 
$do_£tup
 = 
TRUE
;

47 
	g$r
 = '';

49 ià(
	g$®Ÿs
 !ğ'' && ! 
is_¬¿y
(
$®Ÿs
))

51 
$®Ÿs
 = 
¬¿y
($®Ÿ => 
$f›ld_id
);

54 ià(
	g$do_£tup
 ==ğ
TRUE
)

56 
$do_£tup
 = 
FALSE
;

58 
	g$m
 = 
¬¿y
();

60 ià(
is_¬¿y
(
$®Ÿs
))

62 
fÜ—ch
 (
$®Ÿs
 
as
 
$Çme
 => 
$id
)

64 
$m
[] = '"'.
$Çme
.'" : "'.
$id
.'"';

68 
	g$m
 = '{'.
im¶ode
(',', 
$m
).'}';

70 
	g$r
 .ğ<<<
EOF


71 
v¬
 
smey_m­
 = {
$m
};

73 
funùiÚ
 
š£¹_smey
(
smey
, 
f›ld_id
) {

74 
v¬
 
	g–
 = 
docum’t
.
g‘EËm’tById
(
f›ld_id
), 
	gÃwS¹
;

76 iàĞ! 
	g–
 && 
	gsmey_m­
[
f›ld_id
]) {

77 
	g–
 = 
docum’t
.
g‘EËm’tById
(
smey_m­
[
f›ld_id
]);

79 iàĞ! 
	g–
)

80  
	gçl£
;

83 
	g–
.
focus
();

84 
	gsmey
 = " " + 
smey
;

86 ià('£ËùiÚS¹' 
š
 
	g–
) {

87 
	gÃwS¹
 = 
–
.
£ËùiÚS¹
 + 
smey
.
Ëngth
;

89 
	g–
.
	gv®ue
 = 
–
.
v®ue
.
sub¡r
(0,ƒl.
£ËùiÚS¹
) +

90 
	gsmey
 +

91 
	g–
.
	gv®ue
.
sub¡r
(
–
.
£ËùiÚEnd
,ƒl.
v®ue
.
Ëngth
);

92 
	g–
.
£tS–eùiÚRªge
(
ÃwS¹
,‚ewStart);

94 ià(
	gdocum’t
.
	g£ËùiÚ
) {

95 
	gdocum’t
.
	g£ËùiÚ
.
ü—‹Rªge
().
	g‹xt
 = 
smey
;

98 
	gEOF
;

102 ià(
is_¬¿y
(
$®Ÿs
))

104 
fÜ—ch
 (
$®Ÿs
 
as
 
$Çme
 => 
$id
)

106 
$r
 .ğ'smey_m­["'.
$Çme
.'"] = "'.
$id
.'";'."\n";

111 ià(
	g$šlše
)

113  '<süˆty³="‹xt/javasüt" ch¬£t="utf-8">/*<![CDATA[ */'.
	g$r
.'// ]]></script>';

117  
	g$r
;

134 iàĞ! 
funùiÚ_exi¡s
('get_clickable_smileys'))

136 
funùiÚ
 
g‘_şickabË_smeys
(
$image_u¾
, 
$®Ÿs
 = '', 
$smeys
 = 
NULL
)

140 ià(
is_¬¿y
(
$®Ÿs
))

142 
$smeys
 = 
$®Ÿs
;

145 iàĞ! 
is_¬¿y
(
$smeys
))

147 ià(
	gFALSE
 ==ğ(
$smeys
 = 
_g‘_smey_¬¿y
()))

149  
$smeys
;

154 
	g$image_u¾
 = 
¹rim
(
$image_u¾
, '/').'/';

156 
	g$u£d
 = 
¬¿y
();

157 
fÜ—ch
 (
$smeys
 
as
 
$key
 => 
$v®
)

163 ià(
is£t
(
$u£d
[
$smeys
[
$key
][0]]))

168 
	g$lšk
[] = "<¨h»f=\"javasüt:void(0);\" onşick=\"š£¹_smey('".
$key
."', '".
$®Ÿs
."')\"><img src=\"".
$image_u¾
.
$smeys
[$key][0]."\" width=\"".$smileys[$key][1]."\" height=\"".$smileys[$key][2]."\"‡lt=\"".$smileys[$key][3]."\" style=\"border:0;\" /></a>";

170 
	g$u£d
[
$smeys
[
$key
][0]] = 
TRUE
;

173  
	g$lšk
;

189 iàĞ! 
funùiÚ_exi¡s
('parse_smileys'))

191 
funùiÚ
 
·r£_smeys
(
$¡r
 = '', 
$image_u¾
 = '', 
$smeys
 = 
NULL
)

193 ià(
$image_u¾
 == '')

195  
$¡r
;

198 iàĞ! 
is_¬¿y
(
$smeys
))

200 ià(
	gFALSE
 ==ğ(
$smeys
 = 
_g‘_smey_¬¿y
()))

202  
$¡r
;

207 
	g$image_u¾
 = 
´eg_»¶aû
("/(.+?)\/*$/", "\\1/", 
$image_u¾
);

209 
fÜ—ch
 (
$smeys
 
as
 
$key
 => 
$v®
)

211 
$¡r
 = 
¡r_»¶aû
(
$key
, "<img src=\"".
$image_u¾
.
$smeys
[$key][0]."\" width=\"".$smileys[$key][1]."\" height=\"".$smileys[$key][2]."\"‡lt=\"".$smileys[$key][3]."\" style=\"border:0;\" />", $str);

214  
	g$¡r
;

228 iàĞ! 
funùiÚ_exi¡s
('_get_smiley_array'))

230 
funùiÚ
 
_g‘_smey_¬¿y
()

232 ià(
defšed
('ENVIRONMENT'è
AND
 
fe_exi¡s
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/smileys.php'))

234 
šşude
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/smileys.php');

236 
–£if
 (
fe_exi¡s
(
APPPATH
.'config/smileys.php'))

238 
šşude
(
APPPATH
.'config/smileys.php');

241 ià(
is£t
(
$smeys
è
AND
 
is_¬¿y
($smileys))

243  
	g$smeys
;

246  
	gFALSE
;

264 iàĞ! 
funùiÚ_exi¡s
('js_insert_smiley'))

266 
funùiÚ
 
js_š£¹_smey
(
$fÜm_Çme
 = '', 
$fÜm_f›ld
 = '')

268  <<<
EOF


269 <
süt
 
ty³
="text/javascript">

270 
funùiÚ
 
š£¹_smey
(
smey
)

272 
docum’t
.{
$fÜm_Çme
}.{
$fÜm_f›ld
}.
v®ue
 +ğ" " + 
smey
;

274 </
	gsüt
>

275 
	gEOF
;

	@system/helpers/string_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

45 iàĞ! 
funùiÚ_exi¡s
('trim_slashes'))

47 
funùiÚ
 
Œim_¦ashes
(
$¡r
)

49  
Œim
(
$¡r
, '/');

64 iàĞ! 
funùiÚ_exi¡s
('strip_slashes'))

66 
funùiÚ
 
¡r_¦ashes
(
$¡r
)

68 ià(
is_¬¿y
(
$¡r
))

70 
fÜ—ch
 (
$¡r
 
as
 
$key
 => 
$v®
)

72 
$¡r
[
$key
] = 
¡r_¦ashes
(
$v®
);

77 
	g$¡r
 = 
¡r¦ashes
(
$¡r
);

80  
	g$¡r
;

95 iàĞ! 
funùiÚ_exi¡s
('strip_quotes'))

97 
funùiÚ
 
¡r_quÙes
(
$¡r
)

99  
¡r_»¶aû
(
¬¿y
('"', "'"), '', 
$¡r
);

114 iàĞ! 
funùiÚ_exi¡s
('quotes_to_entities'))

116 
funùiÚ
 
quÙes_to_’t™›s
(
$¡r
)

118  
¡r_»¶aû
(
¬¿y
("\'","\"","'",'"'),‡¼ay("&#39;","&quÙ;","&#39;","&quÙ;"), 
$¡r
);

140 iàĞ! 
funùiÚ_exi¡s
('reduce_double_slashes'))

142 
funùiÚ
 
»duû_doubË_¦ashes
(
$¡r
)

144  
´eg_»¶aû
("#(^|[^:])//+#", "\\1/", 
$¡r
);

167 iàĞ! 
funùiÚ_exi¡s
('reduce_multiples'))

169 
funùiÚ
 
»duû_muÉËs
(
$¡r
, 
$ch¬aù”
 = ',', 
$Œim
 = 
FALSE
)

171 
$¡r
 = 
´eg_»¶aû
('#'.
´eg_quÙe
(
$ch¬aù”
, '#').'{2,}#', $character, $str);

173 ià(
	g$Œim
 ==ğ
TRUE
)

175 
$¡r
 = 
Œim
($¡r, 
$ch¬aù”
);

178  
	g$¡r
;

194 iàĞ! 
funùiÚ_exi¡s
('random_string'))

196 
funùiÚ
 
¿ndom_¡ršg
(
$ty³
 = '®num', 
$Ën
 = 8)

198 
$ty³
)

200 'basic' :  
mt_¿nd
();

207 
$ty³
)

209 '®pha' : 
$poŞ
 = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';

211 '®num' : 
$poŞ
 = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';

213 'num”ic' : 
$poŞ
 = '0123456789';

215 'noz”o' : 
$poŞ
 = '123456789';

219 
	g$¡r
 = '';

220 
	g$i
=0; $˜< 
	g$Ën
; $i++)

222 
	g$¡r
 .ğ
sub¡r
(
$poŞ
, 
mt_¿nd
(0, 
¡¾’
($pool) -1), 1);

224  
	g$¡r
;

229  
md5
(
uniqid
(
mt_¿nd
()));

234 
$CI
 =& 
g‘_š¡ªû
();

235 
	g$CI
->
	glßd
->
h–³r
('security');

237  
do_hash
(
uniqid
(
mt_¿nd
(), 
TRUE
), 'sha1');

253 
funùiÚ
 
šüem’t_¡ršg
(
$¡r
, 
$£·¿tÜ
 = '_', 
$fœ¡
 = 1)

255 
´eg_m©ch
('/(.+)'.
$£·¿tÜ
.'([0-9]+)$/', 
$¡r
, 
$m©ch
);

257  
is£t
(
$m©ch
[2]è? 
	g$m©ch
[1].
	g$£·¿tÜ
.($m©ch[2] + 1è: 
$¡r
.
$£·¿tÜ
.
$fœ¡
;

271 iàĞ! 
funùiÚ_exi¡s
('alternator'))

273 
funùiÚ
 
®‹º©Ü
()

275 
	g$i
;

277 ià(
func_num_¬gs
() == 0)

279 
$i
 = 0;

282 
	g$¬gs
 = 
func_g‘_¬gs
();

283  
	g$¬gs
[(
$i
++ % 
couÁ
(
$¬gs
))];

297 iàĞ! 
funùiÚ_exi¡s
('repeater'))

299 
funùiÚ
 
»³©”
(
$d©a
, 
$num
 = 1)

301  ((
$num
 > 0è? 
¡r_»³©
(
$d©a
, $num) : '');

	@system/helpers/text_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

41 iàĞ! 
funùiÚ_exi¡s
('word_limiter'))

43 
funùiÚ
 
wÜd_lim™”
(
$¡r
, 
$lim™
 = 100, 
$’d_ch¬
 = '&#8230;')

45 ià(
Œim
(
$¡r
) == '')

47  
$¡r
;

50 
´eg_m©ch
('/^\s*+(?:\S++\s*+){1,'.(è
$lim™
.'}/', 
$¡r
, 
$m©ches
);

52 ià(
¡¾’
(
$¡r
è=ğ¡¾’(
$m©ches
[0]))

54 
$’d_ch¬
 = '';

57  
¹rim
(
$m©ches
[0]).
	g$’d_ch¬
;

75 iàĞ! 
funùiÚ_exi¡s
('character_limiter'))

77 
funùiÚ
 
ch¬aù”_lim™”
(
$¡r
, 
$n
 = 500, 
$’d_ch¬
 = '&#8230;')

79 ià(
¡¾’
(
$¡r
è< 
$n
)

81  
$¡r
;

84 
	g$¡r
 = 
´eg_»¶aû
("/\s+/", ' ', 
¡r_»¶aû
(
¬¿y
("\r\n", "\r", "\n"), ' ', 
$¡r
));

86 ià(
¡¾’
(
$¡r
è<ğ
$n
)

88  
$¡r
;

91 
	g$out
 = "";

92 
fÜ—ch
 (
ex¶ode
(' ', 
Œim
(
$¡r
)è
as
 
$v®
)

94 
	g$out
 .ğ
$v®
.' ';

96 ià(
¡¾’
(
$out
è>ğ
$n
)

98 
$out
 = 
Œim
($out);

99  (
¡¾’
(
$out
è=ğ¡¾’(
$¡r
)è? $ouˆ: $out.
$’d_ch¬
;

116 iàĞ! 
funùiÚ_exi¡s
('ascii_to_entities'))

118 
funùiÚ
 
ascii_to_’t™›s
(
$¡r
)

120 
	g$couÁ
 = 1;

121 
	g$out
 = '';

122 
	g$‹mp
 = 
¬¿y
();

124 
	g$i
 = 0, 
	g$s
 = 
¡¾’
(
$¡r
); $i < $s; $i++)

126 
	g$Üdš®
 = 
Üd
(
$¡r
[
$i
]);

128 ià(
	g$Üdš®
 < 128)

134 ià(
couÁ
(
$‹mp
) == 1)

136 
$out
 .ğ'&#'.
¬¿y_shiá
(
$‹mp
).';';

137 
	g$couÁ
 = 1;

140 
	g$out
 .ğ
$¡r
[
$i
];

144 ià(
couÁ
(
$‹mp
) == 0)

146 
$couÁ
 = (
$Üdš®
 < 224) ? 2 : 3;

149 
	g$‹mp
[] = 
$Üdš®
;

151 ià(
couÁ
(
$‹mp
è=ğ
$couÁ
)

153 
$numb”
 = (
$couÁ
 =ğ3è? ((
$‹mp
['0'] % 16) * 4096) + (($temp['1'] % 64) * 64) + ($temp['2'] % 64) : (($temp['0'] % 32) * 64) + ($temp['1'] % 64);

155 
	g$out
 .ğ'&#'.
$numb”
.';';

156 
	g$couÁ
 = 1;

157 
	g$‹mp
 = 
¬¿y
();

162  
	g$out
;

178 iàĞ! 
funùiÚ_exi¡s
('entities_to_ascii'))

180 
funùiÚ
 
’t™›s_to_ascii
(
$¡r
, 
$®l
 = 
TRUE
)

182 ià(
´eg_m©ch_®l
('/\&#(\d+)\;/', 
$¡r
, 
$m©ches
))

184 
$i
 = 0, 
	g$s
 = 
couÁ
(
$m©ches
['0']); 
	g$i
 < $s; $i++)

186 
	g$dig™s
 = 
$m©ches
['1'][
$i
];

188 
	g$out
 = '';

190 ià(
	g$dig™s
 < 128)

192 
	g$out
 .ğ
chr
(
$dig™s
);

195 
–£if
 (
$dig™s
 < 2048)

197 
	g$out
 .ğ
chr
(192 + ((
$dig™s
 - ($digits % 64)) / 64));

198 
	g$out
 .ğ
chr
(128 + (
$dig™s
 % 64));

202 
	g$out
 .ğ
chr
(224 + ((
$dig™s
 - ($digits % 4096)) / 4096));

203 
	g$out
 .ğ
chr
(128 + (((
$dig™s
 % 4096) - ($digits % 64)) / 64));

204 
	g$out
 .ğ
chr
(128 + (
$dig™s
 % 64));

207 
	g$¡r
 = 
¡r_»¶aû
(
$m©ches
['0'][
$i
], 
$out
, 
$¡r
);

211 ià(
	g$®l
)

213 
	g$¡r
 = 
¡r_»¶aû
(
¬¿y
("&amp;", "&lt;", "&gt;", "&quot;", "&apos;", "&#45;"),

214 
¬¿y
("&","<",">","\"", "'", "-"),

215 
$¡r
);

218  
	g$¡r
;

237 iàĞ! 
funùiÚ_exi¡s
('word_censor'))

239 
funùiÚ
 
wÜd_ûnsÜ
(
$¡r
, 
$ûnsÜed
, 
$»¶aûm’t
 = '')

241 iàĞ! 
is_¬¿y
(
$ûnsÜed
))

243  
$¡r
;

246 
	g$¡r
 = ' '.
$¡r
.' ';

252 
	g$d–im
 = '[-_\'\"`(){}<>\[\]|!?@#%&,.:;^~*+=\/ 0-9\n\r\t]';

254 
fÜ—ch
 (
$ûnsÜed
 
as
 
$badwÜd
)

256 ià(
	g$»¶aûm’t
 != '')

258 
$¡r
 = 
´eg_»¶aû
("/({$d–im})(".
¡r_»¶aû
('\*', '\w*?', 
´eg_quÙe
(
$badwÜd
, '/')).")({$delim})/i", "\\1{$replacement}\\3", $str);

262 
	g$¡r
 = 
´eg_»¶aû
("/({$d–im})(".
¡r_»¶aû
('\*', '\w*?', 
´eg_quÙe
(
$badwÜd
, '/')).")({$d–im})/›", "'\\1'.¡r_»³©('#', sŒËn('\\2')).'\\3'", 
$¡r
);

266  
Œim
(
$¡r
);

281 iàĞ! 
funùiÚ_exi¡s
('highlight_code'))

283 
funùiÚ
 
highlight_code
(
$¡r
)

287 
	g$¡r
 = 
¡r_»¶aû
(
¬¿y
('&É;', '&gt;'),‡¼ay('<', '>'), 
$¡r
);

292 
	g$¡r
 = 
¡r_»¶aû
(
¬¿y
('<?', '?>', '<%', '%>', '\\', '</script>'),

293 
¬¿y
('ph±agİ’', 'ph±agşo£', 'a¥gİ’', 'a¥gşo£', 'back¦ashtmp', 'sütşo£'), 
$¡r
);

297 
	g$¡r
 = '<?ph°'.
$¡r
.' ?>';

300 
	g$¡r
 = 
highlight_¡ršg
(
$¡r
, 
TRUE
);

305 ià(
abs
(
PHP_VERSION
) < 5)

307 
	g$¡r
 = 
¡r_»¶aû
(
¬¿y
('<fÚˆ', '</fÚt>'),‡¼ay('<¥ª ', '</¥ª>'), 
$¡r
);

308 
	g$¡r
 = 
´eg_»¶aû
('#cŞÜ="(.*?)"#', '¡yË="cŞÜ: \\1"', 
$¡r
);

312 
	g$¡r
 = 
´eg_»¶aû
('/<¥ª styË="cŞÜ: #([A-Z0-9]+)">&É;\?php(&nb¥;| )/i', '<¥ª styË="cŞÜ: #$1">', 
$¡r
);

313 
	g$¡r
 = 
´eg_»¶aû
('/(<¥ª styË="cŞÜ: #[A-Z0-9]+">.*?)\?&gt;<\/¥ª>\n<\/¥ª>\n<\/code>/is', "$1</¥ª>\n</¥ª>\n</code>", 
$¡r
);

314 
	g$¡r
 = 
´eg_»¶aû
('/<¥ª styË="cŞÜ: #[A-Z0-9]+"\><\/¥ª>/i', '', 
$¡r
);

317 
	g$¡r
 = 
¡r_»¶aû
(
¬¿y
('phptagopen', 'phptagclose', 'asptagopen', 'asptagclose', 'backslashtmp', 'scriptclose'),

318 
¬¿y
('&É;?', '?&gt;', '&É;%', '%&gt;', '\\', '&É;/süt&gt;'), 
$¡r
);

320  
	g$¡r
;

338 iàĞ! 
funùiÚ_exi¡s
('highlight_phrase'))

340 
funùiÚ
 
highlight_ph¿£
(
$¡r
, 
$ph¿£
, 
$g_İ’
 = '<¡rÚg>', 
$g_şo£
 = '</strong>')

342 ià(
$¡r
 == '')

347 ià(
	g$ph¿£
 != '')

349  
´eg_»¶aû
('/('.
´eg_quÙe
(
$ph¿£
, '/').')/i', 
$g_İ’
."\\1".
$g_şo£
, 
$¡r
);

352  
	g$¡r
;

365 iàĞ! 
funùiÚ_exi¡s
('convert_accented_characters'))

367 
funùiÚ
 
cÚv”t_acûÁed_ch¬aù”s
(
$¡r
)

369 ià(
defšed
('ENVIRONMENT'è
AND
 
is_fe
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/foreign_chars.php'))

371 
šşude
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/foreign_chars.php');

373 
–£if
 (
is_fe
(
APPPATH
.'config/foreign_chars.php'))

375 
šşude
(
APPPATH
.'config/foreign_chars.php');

378 iàĞ! 
is£t
(
$fÜeign_ch¬aù”s
))

380  
	g$¡r
;

383  
´eg_»¶aû
(
¬¿y_keys
(
$fÜeign_ch¬aù”s
), 
¬¿y_v®ues
($fÜeign_ch¬aù”s), 
$¡r
);

401 iàĞ! 
funùiÚ_exi¡s
('word_wrap'))

403 
funùiÚ
 
wÜd_w¿p
(
$¡r
, 
$ch¬lim
 = '76')

406 iàĞ! 
is_num”ic
(
$ch¬lim
))

407 
$ch¬lim
 = 76;

410 
	g$¡r
 = 
´eg_»¶aû
("| +|", " ", 
$¡r
);

413 ià(
¡½os
(
$¡r
, "\r"è!=ğ
FALSE
)

415 
$¡r
 = 
¡r_»¶aû
(
¬¿y
("\r\n", "\r"), "\n", $str);

420 
	g$unw¿p
 = 
¬¿y
();

421 ià(
´eg_m©ch_®l
("|(\{unw¿p\}.+?\{/unw¿p\})|s", 
$¡r
, 
$m©ches
))

423 
	g$i
 = 0; $˜< 
couÁ
(
$m©ches
['0']); $i++)

425 
	g$unw¿p
[] = 
$m©ches
['1'][
$i
];

426 
	g$¡r
 = 
¡r_»¶aû
(
$m©ches
['1'][
$i
], "{{unw¿µed".$i."}}", 
$¡r
);

433 
	g$¡r
 = 
wÜdw¿p
(
$¡r
, 
$ch¬lim
, "\n", 
FALSE
);

436 
	g$ouut
 = "";

437 
fÜ—ch
 (
ex¶ode
("\n", 
$¡r
è
as
 
$lše
)

441 ià(
¡¾’
(
$lše
è<ğ
$ch¬lim
)

443 
$ouut
 .ğ
$lše
."\n";

447 
	g$‹mp
 = '';

448 (
¡¾’
(
$lše
)è> 
	g$ch¬lim
)

451 ià(
´eg_m©ch
("!\[u¾.+\]|://|wwww.!", 
$lše
))

457 
	g$‹mp
 .ğ
sub¡r
(
$lše
, 0, 
$ch¬lim
-1);

458 
	g$lše
 = 
sub¡r
(
$lše
, 
$ch¬lim
-1);

463 ià(
	g$‹mp
 != '')

465 
$ouut
 .ğ
$‹mp
."\n".
$lše
;

469 
	g$ouut
 .ğ
$lše
;

472 
	g$ouut
 .= "\n";

476 ià(
couÁ
(
$unw¿p
) > 0)

478 
fÜ—ch
 (
$unw¿p
 
as
 
$key
 => 
$v®
)

480 
$ouut
 = 
¡r_»¶aû
("{{unw¿µed".
$key
."}}", 
$v®
, $output);

485 
	g$ouut
 = 
¡r_»¶aû
(
¬¿y
('{unw¿p}', '{/unw¿p}'), '', 
$ouut
);

487  
	g$ouut
;

504 iàĞ! 
funùiÚ_exi¡s
('ellipsize'))

506 
funùiÚ
 
–lsize
(
$¡r
, 
$max_Ëngth
, 
$pos™iÚ
 = 1, 
$–lsis
 = '&hellip;')

509 
$¡r
 = 
Œim
(
¡r_gs
($str));

512 ià(
¡¾’
(
$¡r
è<ğ
$max_Ëngth
)

514  
$¡r
;

517 
	g$beg
 = 
sub¡r
(
$¡r
, 0, 
æoÜ
(
$max_Ëngth
 * 
$pos™iÚ
));

519 
	g$pos™iÚ
 = (
$pos™iÚ
 > 1) ? 1 : $position;

521 ià(
	g$pos™iÚ
 === 1)

523 
$’d
 = 
sub¡r
(
$¡r
, 0, -(
$max_Ëngth
 - 
¡¾’
(
$beg
)));

527 
	g$’d
 = 
sub¡r
(
$¡r
, -(
$max_Ëngth
 - 
¡¾’
(
$beg
)));

530  
	g$beg
.
	g$–lsis
.
	g$’d
;

	@system/helpers/typography_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

37 iàĞ! 
funùiÚ_exi¡s
('nl2br_except_pre'))

39 
funùiÚ
 
Æ2br_exû±_´e
(
$¡r
)

41 
	g$CI
 =& 
g‘_š¡ªû
();

43 
	g$CI
->
	glßd
->
lib¿ry
('typography');

45  
	g$CI
->
	gtypog¿phy
->
Æ2br_exû±_´e
(
$¡r
);

61 iàĞ! 
funùiÚ_exi¡s
('auto_typography'))

63 
funùiÚ
 
auto_typog¿phy
(
$¡r
, 
$¡r_js_ev’t_hªdËrs
 = 
TRUE
, 
$»duû_lšeb»aks
 = 
FALSE
)

65 
$CI
 =& 
g‘_š¡ªû
();

66 
	g$CI
->
	glßd
->
lib¿ry
('typography');

67  
	g$CI
->
	gtypog¿phy
->
auto_typog¿phy
(
$¡r
, 
$¡r_js_ev’t_hªdËrs
, 
$»duû_lšeb»aks
);

83 iàĞ! 
funùiÚ_exi¡s
('entity_decode'))

85 
funùiÚ
 
’t™y_decode
(
$¡r
, 
$ch¬£t
='UTF-8')

87 
glob®
 
$SEC
;

88  
	g$SEC
->
’t™y_decode
(
$¡r
, 
$ch¬£t
);

	@system/helpers/url_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

40 iàĞ! 
funùiÚ_exi¡s
('site_url'))

42 
funùiÚ
 
s™e_u¾
(
$uri
 = '')

44 
$CI
 =& 
g‘_š¡ªû
();

45  
	g$CI
->
	gcÚfig
->
s™e_u¾
(
$uri
);

62 iàĞ! 
funùiÚ_exi¡s
('base_url'))

64 
funùiÚ
 
ba£_u¾
(
$uri
 = '')

66 
$CI
 =& 
g‘_š¡ªû
();

67  
	g$CI
->
	gcÚfig
->
ba£_u¾
(
$uri
);

82 iàĞ! 
funùiÚ_exi¡s
('current_url'))

84 
funùiÚ
 
cu¼’t_u¾
()

86 
	g$CI
 =& 
g‘_š¡ªû
();

87  
	g$CI
->
	gcÚfig
->
s™e_u¾
(
$CI
->
uri
->
uri_¡ršg
());

100 iàĞ! 
funùiÚ_exi¡s
('uri_string'))

102 
funùiÚ
 
uri_¡ršg
()

104 
	g$CI
 =& 
g‘_š¡ªû
();

105  
	g$CI
->
	guri
->
uri_¡ršg
();

119 iàĞ! 
funùiÚ_exi¡s
('index_page'))

121 
funùiÚ
 
šdex_·ge
()

123 
	g$CI
 =& 
g‘_š¡ªû
();

124  
	g$CI
->
	gcÚfig
->
™em
('index_page');

141 iàĞ! 
funùiÚ_exi¡s
('anchor'))

143 
funùiÚ
 
ªchÜ
(
$uri
 = '', 
$t™Ë
 = '', 
$©Œibu‹s
 = '')

145 
$t™Ë
 = (
¡ršg
) $title;

147 iàĞ! 
is_¬¿y
(
$uri
))

149 
	g$s™e_u¾
 = ( ! 
´eg_m©ch
('!^\w+://! i', 
$uri
)è? 
s™e_u¾
($uri) : $uri;

153 
	g$s™e_u¾
 = 
s™e_u¾
(
$uri
);

156 ià(
	g$t™Ë
 == '')

158 
$t™Ë
 = 
$s™e_u¾
;

161 ià(
	g$©Œibu‹s
 != '')

163 
$©Œibu‹s
 = 
_·r£_©Œibu‹s
($attributes);

166  '<¨h»f="'.
	g$s™e_u¾
.'"'.
	g$©Œibu‹s
.'>'.
	g$t™Ë
.'</a>';

184 iàĞ! 
funùiÚ_exi¡s
('anchor_popup'))

186 
funùiÚ
 
ªchÜ_pİup
(
$uri
 = '', 
$t™Ë
 = '', 
$©Œibu‹s
 = 
FALSE
)

188 
$t™Ë
 = (
¡ršg
) $title;

190 
	g$s™e_u¾
 = ( ! 
´eg_m©ch
('!^\w+://! i', 
$uri
)è? 
s™e_u¾
($uri) : $uri;

192 ià(
	g$t™Ë
 == '')

194 
$t™Ë
 = 
$s™e_u¾
;

197 ià(
	g$©Œibu‹s
 ==ğ
FALSE
)

199  "<¨h»f='javasüt:void(0);' onşick=\"wšdow.İ’('".
$s™e_u¾
."', '_bÏnk');\">".
$t™Ë
."</a>";

202 iàĞ! 
is_¬¿y
(
$©Œibu‹s
))

204 
	g$©Œibu‹s
 = 
¬¿y
();

207 
fÜ—ch
 (
¬¿y
('width' => '800', 'height' => '600', 'süŞlb¬s' => 'yes', '¡©us' => 'yes', '»sizabË' => 'yes', 'sü“nx' => '0', 'sü“ny' => '0', ) 
as
 
$key
 => 
$v®
)

209 
$©ts
[
$key
] = ( ! 
is£t
(
$©Œibu‹s
[$key])è? 
$v®
 : $attributes[$key];

210 
un£t
(
$©Œibu‹s
[
$key
]);

213 ià(
	g$©Œibu‹s
 != '')

215 
$©Œibu‹s
 = 
_·r£_©Œibu‹s
($attributes);

218  "<¨h»f='javasüt:void(0);' onşick=\"wšdow.İ’('".
	g$s™e_u¾
."', '_bÏnk', '".
_·r£_©Œibu‹s
(
$©ts
, 
TRUE
)."');\"$©Œibu‹s>".
	g$t™Ë
."</a>";

233 iàĞ! 
funùiÚ_exi¡s
('mailto'))

235 
funùiÚ
 
mato
(
$ema
, 
$t™Ë
 = '', 
$©Œibu‹s
 = '')

237 
$t™Ë
 = (
¡ršg
) $title;

239 ià(
	g$t™Ë
 == "")

241 
$t™Ë
 = 
$ema
;

244 
	g$©Œibu‹s
 = 
_·r£_©Œibu‹s
(
$©Œibu‹s
);

246  '<¨h»f="mato:'.
	g$ema
.'"'.
	g$©Œibu‹s
.'>'.
	g$t™Ë
.'</a>';

263 iàĞ! 
funùiÚ_exi¡s
('safe_mailto'))

265 
funùiÚ
 
§ã_mato
(
$ema
, 
$t™Ë
 = '', 
$©Œibu‹s
 = '')

267 
$t™Ë
 = (
¡ršg
) $title;

269 ià(
	g$t™Ë
 == "")

271 
$t™Ë
 = 
$ema
;

274 
	g$i
 = 0; $i < 16; $i++)

276 
	g$x
[] = 
sub¡r
('<¨h»f="mato:', 
$i
, 1);

279 
	g$i
 = 0; $˜< 
¡¾’
(
$ema
); $i++)

281 
	g$x
[] = "|".
Üd
(
sub¡r
(
$ema
, 
$i
, 1));

284 
	g$x
[] = '"';

286 ià(
	g$©Œibu‹s
 != '')

288 ià(
is_¬¿y
(
$©Œibu‹s
))

290 
fÜ—ch
 (
$©Œibu‹s
 
as
 
$key
 => 
$v®
)

292 
$x
[] = ' '.
$key
.'="';

293 
	g$i
 = 0; $˜< 
¡¾’
(
$v®
); $i++)

295 
	g$x
[] = "|".
Üd
(
sub¡r
(
$v®
, 
$i
, 1));

297 
	g$x
[] = '"';

302 
	g$i
 = 0; $˜< 
¡¾’
(
$©Œibu‹s
); $i++)

304 
	g$x
[] = 
sub¡r
(
$©Œibu‹s
, 
$i
, 1);

309 
	g$x
[] = '>';

311 
	g$‹mp
 = 
¬¿y
();

312 
	g$i
 = 0; $˜< 
¡¾’
(
$t™Ë
); $i++)

314 
	g$Üdš®
 = 
Üd
(
$t™Ë
[
$i
]);

316 ià(
	g$Üdš®
 < 128)

318 
	g$x
[] = "|".
$Üdš®
;

322 ià(
couÁ
(
$‹mp
) == 0)

324 
$couÁ
 = (
$Üdš®
 < 224) ? 2 : 3;

327 
	g$‹mp
[] = 
$Üdš®
;

328 ià(
couÁ
(
$‹mp
è=ğ
$couÁ
)

330 
$numb”
 = (
$couÁ
 =ğ3è? ((
$‹mp
['0'] % 16) * 4096) + (($temp['1'] % 64) * 64) + ($temp['2'] % 64) : (($temp['0'] % 32) * 64) + ($temp['1'] % 64);

331 
	g$x
[] = "|".
$numb”
;

332 
	g$couÁ
 = 1;

333 
	g$‹mp
 = 
¬¿y
();

338 
	g$x
[] = '<'; $x[] = '/'; $x[] = 'a'; $x[] = '>';

340 
	g$x
 = 
¬¿y_»v”£
(
$x
);

341 
ob_¡¬t
();

343 ?><
süt
 
	gty³
="text/javascript">

345 
v¬
 
l
=
Ãw
 
A¼ay
();

346 <?
php


347 
	g$i
 = 0;

348 
fÜ—ch
 (
$x
 
as
 
$v®
){ ?>
	gl
[<?
php
 
echo
 
$i
++; ?>]='<?ph°echØ$v®; ?>';<?
	gphp
 } ?>

350 
v¬
 
	gi
 = 
l
.
Ëngth
-1; i >ğ0; i=
i
-1){

351 ià(
l
[
i
].
sub¡ršg
(0, 1è=ğ'|'è
docum’t
.
wr™e
("&#"+
uÃsÿ³
(l[i].substring(1))+";");

352 
	gdocum’t
.
wr™e
(
uÃsÿ³
(
l
[
i
]));}

354 </
	gsüt
><?
php


356 
	g$bufãr
 = 
ob_g‘_cÚ‹Ás
();

357 
ob_’d_ş—n
();

358  
	g$bufãr
;

378 iàĞ! 
funùiÚ_exi¡s
('auto_link'))

380 
funùiÚ
 
auto_lšk
(
$¡r
, 
$ty³
 = 'bÙh', 
$pİup
 = 
FALSE
)

382 ià(
$ty³
 != 'email')

384 ià(
´eg_m©ch_®l
("#(^|\s|\()((h‰p(s?)://)|(www\.))(\w+[^\s\)\<]+)#i", 
$¡r
, 
$m©ches
))

386 
$pİ
 = (
$pİup
 =ğ
TRUE
) ? "arget=\"_blank\" " : "";

388 
	g$i
 = 0; $˜< 
couÁ
(
$m©ches
['0']); $i++)

390 
	g$³riod
 = '';

391 ià(
´eg_m©ch
("|\.$|", 
$m©ches
['6'][
$i
]))

393 
	g$³riod
 = '.';

394 
	g$m©ches
['6'][
$i
] = 
sub¡r
(
$m©ches
['6'][$i], 0, -1);

397 
	g$¡r
 = 
¡r_»¶aû
(
$m©ches
['0'][
$i
],

398 
$m©ches
['1'][
$i
].'<a href="http'.

399 
$m©ches
['4'][
$i
].'://'.

400 
$m©ches
['5'][
$i
].

401 
$m©ches
['6'][
$i
].'"'.
$pİ
.'>http'.

402 
$m©ches
['4'][
$i
].'://'.

403 
$m©ches
['5'][
$i
].

404 
$m©ches
['6'][
$i
].'</a>'.

405 
$³riod
, 
$¡r
);

410 ià(
	g$ty³
 != 'url')

412 ià(
´eg_m©ch_®l
("/([a-zA-Z0-9_\.\-\+]+)@([a-zA-Z0-9\-]+)\.([a-zA-Z0-9\-\.]*)/i", 
$¡r
, 
$m©ches
))

414 
$i
 = 0; 
	g$i
 < 
couÁ
(
$m©ches
['0']); $i++)

416 
	g$³riod
 = '';

417 ià(
´eg_m©ch
("|\.$|", 
$m©ches
['3'][
$i
]))

419 
	g$³riod
 = '.';

420 
	g$m©ches
['3'][
$i
] = 
sub¡r
(
$m©ches
['3'][$i], 0, -1);

423 
	g$¡r
 = 
¡r_»¶aû
(
$m©ches
['0'][
$i
], 
§ã_mato
($m©ches['1'][$i].'@'.$m©ches['2'][$i].'.'.$m©ches['3'][$i]).
$³riod
, 
$¡r
);

428  
	g$¡r
;

443 iàĞ! 
funùiÚ_exi¡s
('prep_url'))

445 
funùiÚ
 
´•_u¾
(
$¡r
 = '')

447 ià(
$¡r
 =ğ'h‰p://' 
OR
 $str == '')

452 
	g$u¾
 = 
·r£_u¾
(
$¡r
);

454 iàĞ! 
$u¾
 
	gOR
 ! 
is£t
($url['scheme']))

456 
	g$¡r
 = 'h‰p://'.
$¡r
;

459  
	g$¡r
;

477 iàĞ! 
funùiÚ_exi¡s
('url_title'))

479 
funùiÚ
 
u¾_t™Ë
(
$¡r
, 
$£·¿tÜ
 = 'dash', 
$low”ÿ£
 = 
FALSE
)

481 ià(
$£·¿tÜ
 == 'dash')

483 
$£¬ch
 = '_';

484 
	g$»¶aû
 = '-';

488 
	g$£¬ch
 = '-';

489 
	g$»¶aû
 = '_';

492 
	g$Œªs
 = 
¬¿y
(

495 '\s+' => 
$»¶aû
,

497 
$»¶aû
.'+' => $replace,

498 
$»¶aû
.'$' => $replace,

499 '^'.
$»¶aû
 => $replace,

503 
	g$¡r
 = 
¡r_gs
(
$¡r
);

505 
fÜ—ch
 (
$Œªs
 
as
 
$key
 => 
$v®
)

507 
$¡r
 = 
´eg_»¶aû
("#".
$key
."#i", 
$v®
, $str);

510 ià(
	g$low”ÿ£
 ==ğ
TRUE
)

512 
$¡r
 = 
¡¹Şow”
($str);

515  
Œim
(
¡r¦ashes
(
$¡r
));

533 iàĞ! 
funùiÚ_exi¡s
('redirect'))

535 
funùiÚ
 
»dœeù
(
$uri
 = '', 
$m‘hod
 = 'loÿtiÚ', 
$h‰p_»¥Ú£_code
 = 302)

537 iàĞ! 
´eg_m©ch
('#^h‰ps?://#i', 
$uri
))

539 
$uri
 = 
s™e_u¾
($uri);

542 
	g$m‘hod
)

544 '»äesh' : 
h—d”
("Reäesh:0;u¾=".
$uri
);

546  : 
h—d”
("LoÿtiÚ: ".
$uri
, 
TRUE
, 
$h‰p_»¥Ú£_code
);

549 
	gex™
;

565 iàĞ! 
funùiÚ_exi¡s
('_parse_attributes'))

567 
funùiÚ
 
_·r£_©Œibu‹s
(
$©Œibu‹s
, 
$javasüt
 = 
FALSE
)

569 ià(
is_¡ršg
(
$©Œibu‹s
))

571  (
$©Œibu‹s
 != '') ? ' '.$attributes : '';

574 
	g$©t
 = '';

575 
fÜ—ch
 (
$©Œibu‹s
 
as
 
$key
 => 
$v®
)

577 ià(
$javasüt
 =ğ
TRUE
)

579 
$©t
 .ğ
$key
 . '=' . 
$v®
 . ',';

583 
	g$©t
 .ğ' ' . 
$key
 . '="' . 
$v®
 . '"';

587 ià(
	g$javasüt
 =ğ
TRUE
 
AND
 
$©t
 != '')

589 
$©t
 = 
sub¡r
($att, 0, -1);

592  
	g$©t
;

	@system/helpers/xml_helper.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

37 iàĞ! 
funùiÚ_exi¡s
('xml_convert'))

39 
funùiÚ
 
xml_cÚv”t
(
$¡r
, 
$´Ùeù_®l
 = 
FALSE
)

41 
$‹mp
 = '__TEMP_AMPERSANDS__';

45 
	g$¡r
 = 
´eg_»¶aû
("/&#(\d+);/", "$‹mp\\1;", 
$¡r
);

47 ià(
	g$´Ùeù_®l
 ==ğ
TRUE
)

49 
$¡r
 = 
´eg_»¶aû
("/&(\w+);/", "$temp\\1;", $str);

52 
	g$¡r
 = 
¡r_»¶aû
(
¬¿y
("&","<",">","\"", "'", "-"),

53 
¬¿y
("&amp;", "&lt;", "&gt;", "&quot;", "&apos;", "&#45;"),

54 
$¡r
);

57 
	g$¡r
 = 
´eg_»¶aû
("/$‹mp(\d+);/","&#\\1;",
$¡r
);

59 ià(
	g$´Ùeù_®l
 ==ğ
TRUE
)

61 
$¡r
 = 
´eg_»¶aû
("/$temp(\w+);/","&\\1;", $str);

64  
	g$¡r
;

	@system/language/english/calendar_lang.php

1 <?
php


3 
	g$Ïng
['cal_su'] = "Su";

4 
	g$Ïng
['cal_mo'] = "Mo";

5 
	g$Ïng
['cal_tu'] = "Tu";

6 
	g$Ïng
['cal_we'] = "We";

7 
	g$Ïng
['cal_th'] = "Th";

8 
	g$Ïng
['cal_fr'] = "Fr";

9 
	g$Ïng
['cal_sa'] = "Sa";

10 
	g$Ïng
['cal_sun'] = "Sun";

11 
	g$Ïng
['cal_mon'] = "Mon";

12 
	g$Ïng
['cal_tue'] = "Tue";

13 
	g$Ïng
['cal_wed'] = "Wed";

14 
	g$Ïng
['cal_thu'] = "Thu";

15 
	g$Ïng
['cal_fri'] = "Fri";

16 
	g$Ïng
['cal_sat'] = "Sat";

17 
	g$Ïng
['cal_sunday'] = "Sunday";

18 
	g$Ïng
['cal_monday'] = "Monday";

19 
	g$Ïng
['cal_tuesday'] = "Tuesday";

20 
	g$Ïng
['cal_wednesday'] = "Wednesday";

21 
	g$Ïng
['cal_thursday'] = "Thursday";

22 
	g$Ïng
['cal_friday'] = "Friday";

23 
	g$Ïng
['cal_saturday'] = "Saturday";

24 
	g$Ïng
['cal_jan'] = "Jan";

25 
	g$Ïng
['cal_feb'] = "Feb";

26 
	g$Ïng
['cal_mar'] = "Mar";

27 
	g$Ïng
['cal_apr'] = "Apr";

28 
	g$Ïng
['cal_may'] = "May";

29 
	g$Ïng
['cal_jun'] = "Jun";

30 
	g$Ïng
['cal_jul'] = "Jul";

31 
	g$Ïng
['cal_aug'] = "Aug";

32 
	g$Ïng
['cal_sep'] = "Sep";

33 
	g$Ïng
['cal_oct'] = "Oct";

34 
	g$Ïng
['cal_nov'] = "Nov";

35 
	g$Ïng
['cal_dec'] = "Dec";

36 
	g$Ïng
['cal_january'] = "January";

37 
	g$Ïng
['cal_february'] = "February";

38 
	g$Ïng
['cal_march'] = "March";

39 
	g$Ïng
['cal_april'] = "April";

40 
	g$Ïng
['cal_mayl'] = "May";

41 
	g$Ïng
['cal_june'] = "June";

42 
	g$Ïng
['cal_july'] = "July";

43 
	g$Ïng
['cal_august'] = "August";

44 
	g$Ïng
['cal_september'] = "September";

45 
	g$Ïng
['cal_october'] = "October";

46 
	g$Ïng
['cal_november'] = "November";

47 
	g$Ïng
['cal_december'] = "December";

	@system/language/english/date_lang.php

1 <?
php


3 
	g$Ïng
['date_year'] = "å¹´";

4 
	g$Ïng
['date_years'] = "å¹´";

5 
	g$Ïng
['date_month'] = "æœˆ";

6 
	g$Ïng
['date_months'] = "æœˆ";

7 
	g$Ïng
['date_week'] = "æ˜ŸæœŸ";

8 
	g$Ïng
['date_weeks'] = "æ˜ŸæœŸ";

9 
	g$Ïng
['date_day'] = "å¤©";

10 
	g$Ïng
['date_days'] = "å¤©";

11 
	g$Ïng
['date_hour'] = "å°æ—¶";

12 
	g$Ïng
['date_hours'] = "å°æ—¶";

13 
	g$Ïng
['date_minute'] = "åˆ†é’Ÿ";

14 
	g$Ïng
['date_minutes'] = "åˆ†é’Ÿ";

15 
	g$Ïng
['date_second'] = "ç§’";

16 
	g$Ïng
['date_seconds'] = "ç§’";

18 
	g$Ïng
['UM12'] = '(UTC -12:00) Baker/Howland Island';

19 
	g$Ïng
['UM11'] = '(UTC -11:00) Samoa Time Zone, Niue';

20 
	g$Ïng
['UM10'] = '(UTC -10:00) Hawaii-Aleutian Standard Time, Cook Islands, Tahiti';

21 
	g$Ïng
['UM95'] = '(UTC -9:30) Marquesas Islands';

22 
	g$Ïng
['UM9'] = '(UTC -9:00) Alaska Standard Time, Gambier Islands';

23 
	g$Ïng
['UM8'] = '(UTC -8:00) Pacific Standard Time, Clipperton Island';

24 
	g$Ïng
['UM7'] = '(UTC -7:00) Mountain Standard Time';

25 
	g$Ïng
['UM6'] = '(UTC -6:00) Central Standard Time';

26 
	g$Ïng
['UM5'] = '(UTC -5:00) Eastern Standard Time, Western Caribbean Standard Time';

27 
	g$Ïng
['UM45'] = '(UTC -4:30) Venezuelan Standard Time';

28 
	g$Ïng
['UM4'] = '(UTC -4:00) Atlantic Standard Time, Eastern Caribbean Standard Time';

29 
	g$Ïng
['UM35'] = '(UTC -3:30) Newfoundland Standard Time';

30 
	g$Ïng
['UM3'] = '(UTC -3:00) Argentina, Brazil, French Guiana, Uruguay';

31 
	g$Ïng
['UM2'] = '(UTC -2:00) South Georgia/South Sandwich Islands';

32 
	g$Ïng
['UM1'] = '(UTC -1:00) Azores, Cape Verde Islands';

33 
	g$Ïng
['UTC'] = '(UTC) Greenwich Mean Time, Western European Time';

34 
	g$Ïng
['UP1'] = '(UTC +1:00) Central European Time, West Africa Time';

35 
	g$Ïng
['UP2'] = '(UTC +2:00) Central Africa Time, Eastern European Time, Kaliningrad Time';

36 
	g$Ïng
['UP3'] = '(UTC +3:00) Moscow Time, East Africa Time';

37 
	g$Ïng
['UP35'] = '(UTC +3:30) Iran Standard Time';

38 
	g$Ïng
['UP4'] = '(UTC +4:00) Azerbaijan Standard Time, Samara Time';

39 
	g$Ïng
['UP45'] = '(UTC +4:30) Afghanistan';

40 
	g$Ïng
['UP5'] = '(UTC +5:00) Pakistan Standard Time, Yekaterinburg Time';

41 
	g$Ïng
['UP55'] = '(UTC +5:30) Indian Standard Time, Sri Lanka Time';

42 
	g$Ïng
['UP575'] = '(UTC +5:45) Nepal Time';

43 
	g$Ïng
['UP6'] = '(UTC +6:00) Bangladesh Standard Time, Bhutan Time, Omsk Time';

44 
	g$Ïng
['UP65'] = '(UTC +6:30) Cocos Islands, Myanmar';

45 
	g$Ïng
['UP7'] = '(UTC +7:00) Krasnoyarsk Time, Cambodia, Laos, Thailand, Vietnam';

46 
	g$Ïng
['UP8'] = '(UTC +8:00) Australian Western Standard Time, Beijing Time, Irkutsk Time';

47 
	g$Ïng
['UP875'] = '(UTC +8:45) Australian Central Western Standard Time';

48 
	g$Ïng
['UP9'] = '(UTC +9:00) Japan Standard Time, Korea Standard Time, Yakutsk Time';

49 
	g$Ïng
['UP95'] = '(UTC +9:30) Australian Central Standard Time';

50 
	g$Ïng
['UP10'] = '(UTC +10:00) Australian Eastern Standard Time, Vladivostok Time';

51 
	g$Ïng
['UP105'] = '(UTC +10:30) Lord Howe Island';

52 
	g$Ïng
['UP11'] = '(UTC +11:00) Magadan Time, Solomon Islands, Vanuatu';

53 
	g$Ïng
['UP115'] = '(UTC +11:30) Norfolk Island';

54 
	g$Ïng
['UP12'] = '(UTC +12:00) Fiji, Gilbert Islands, Kamchatka Time, New Zealand Standard Time';

55 
	g$Ïng
['UP1275'] = '(UTC +12:45) Chatham Islands Standard Time';

56 
	g$Ïng
['UP13'] = '(UTC +13:00) Phoenix Islands Time, Tonga';

57 
	g$Ïng
['UP14'] = '(UTC +14:00) Line Islands';

	@system/language/english/db_lang.php

1 <?
php


3 
	g$Ïng
['db_invalid_connection_str'] = 'Unableo determinehe database settings based onhe connection string you submitted.';

4 
	g$Ïng
['db_unable_to_connect'] = 'Unableo connecto your database server usinghe…rovided settings.';

5 
	g$Ïng
['db_unable_to_select'] = 'Unableo selecthe specified database: %s';

6 
	g$Ïng
['db_unable_to_create'] = 'Unableo createhe specified database: %s';

7 
	g$Ïng
['db_invalid_query'] = 'The query you submitted is‚ot valid.';

8 
	g$Ïng
['db_must_set_table'] = 'You must sethe databaseableo be used with your query.';

9 
	g$Ïng
['db_must_use_set'] = 'You must usehe "set" methodo update‡nƒntry.';

10 
	g$Ïng
['db_must_use_index'] = 'You must specify‡n indexo match on for batch updates.';

11 
	g$Ïng
['db_batch_missing_index'] = 'One or more„ows submitted for batch updating is missinghe specified index.';

12 
	g$Ïng
['db_must_use_where'] = 'Updates‡re‚ot‡llowed unlesshey contain‡ "where" clause.';

13 
	g$Ïng
['db_del_must_use_where'] = 'Deletes‡re‚ot‡llowed unlesshey contain‡ "where" or "like" clause.';

14 
	g$Ïng
['db_field_param_missing'] = 'To fetch fields„equireshe‚ame ofheable‡s‡…arameter.';

15 
	g$Ïng
['db_unsupported_function'] = 'This feature is‚ot‡vailable forhe database you‡re using.';

16 
	g$Ïng
['db_transaction_failure'] = 'Transaction failure: Rollback…erformed.';

17 
	g$Ïng
['db_unable_to_drop'] = 'Unableo drophe specified database.';

18 
	g$Ïng
['db_unsuported_feature'] = 'Unsupported feature ofhe database…latform you‡re using.';

19 
	g$Ïng
['db_unsuported_compression'] = 'The file compression format you chose is‚ot supported by your server.';

20 
	g$Ïng
['db_filepath_error'] = 'Unableo write dataohe file…ath you have submitted.';

21 
	g$Ïng
['db_invalid_cache_path'] = 'The cache…ath you submitted is‚ot valid or writable.';

22 
	g$Ïng
['db_table_name_required'] = 'Aable‚ame is„equired forhat operation.';

23 
	g$Ïng
['db_column_name_required'] = 'A column‚ame is„equired forhat operation.';

24 
	g$Ïng
['db_column_definition_required'] = 'A column definition is„equired forhat operation.';

25 
	g$Ïng
['db_unable_to_set_charset'] = 'Unableo set client connection character set: %s';

26 
	g$Ïng
['db_error_heading'] = 'A Database Error Occurred';

	@system/language/english/email_lang.php

1 <?
php


3 
	g$Ïng
['email_must_be_array'] = "Theƒmail validation method must be…assed‡n‡rray.";

4 
	g$Ïng
['email_invalid_address'] = "Invalidƒmail‡ddress: %s";

5 
	g$Ïng
['email_attachment_missing'] = "Unableo†ocatehe followingƒmail‡ttachment: %s";

6 
	g$Ïng
['email_attachment_unreadable'] = "Unableo openhis‡ttachment: %s";

7 
	g$Ïng
['email_no_recipients'] = "You must include„ecipients: To, Cc, or Bcc";

8 
	g$Ïng
['email_send_failure_phpmail'] = "Unableo sendƒmail using PHP mail(). Your server might‚ot be configuredo send mail usinghis method.";

9 
	g$Ïng
['email_send_failure_sendmail'] = "Unableo sendƒmail using PHP Sendmail. Your server might‚ot be configuredo send mail usinghis method.";

10 
	g$Ïng
['email_send_failure_smtp'] = "Unableo sendƒmail using PHP SMTP. Your server might‚ot be configuredo send mail usinghis method.";

11 
	g$Ïng
['email_sent'] = "Your message has been successfully sent usinghe following…rotocol: %s";

12 
	g$Ïng
['email_no_socket'] = "Unableo open‡ socketo Sendmail. Please check settings.";

13 
	g$Ïng
['email_no_hostname'] = "You did‚ot specify‡ SMTP hostname.";

14 
	g$Ïng
['email_smtp_error'] = "The following SMTPƒrror wasƒncountered: %s";

15 
	g$Ïng
['email_no_smtp_unpw'] = "Error: You must‡ssign‡ SMTP username‡nd…assword.";

16 
	g$Ïng
['email_failed_smtp_login'] = "Failedo send AUTH LOGIN command. Error: %s";

17 
	g$Ïng
['email_smtp_auth_un'] = "Failedo‡uthenticate username. Error: %s";

18 
	g$Ïng
['email_smtp_auth_pw'] = "Failedo‡uthenticate…assword. Error: %s";

19 
	g$Ïng
['email_smtp_data_failure'] = "Unableo send data: %s";

20 
	g$Ïng
['email_exit_status'] = "Exit status code: %s";

	@system/language/english/form_validation_lang.php

1 <?
php


3 
	g$Ïng
['required'] = "The %s field is„equired.";

4 
	g$Ïng
['isset'] = "The %s field must have‡ value.";

5 
	g$Ïng
['valid_email'] = "The %s field must contain‡ validƒmail‡ddress.";

6 
	g$Ïng
['valid_emails'] = "The %s field must contain‡ll validƒmail‡ddresses.";

7 
	g$Ïng
['valid_url'] = "The %s field must contain‡ valid URL.";

8 
	g$Ïng
['valid_ip'] = "The %s field must contain‡ valid IP.";

9 
	g$Ïng
['min_length'] = "The %s field must be‡t†east %s characters in†ength.";

10 
	g$Ïng
['max_length'] = "The %s field can‚otƒxceed %s characters in†ength.";

11 
	g$Ïng
['exact_length'] = "The %s field must beƒxactly %s characters in†ength.";

12 
	g$Ïng
['alpha'] = "The %s field may only contain‡lphabetical characters.";

13 
	g$Ïng
['alpha_numeric'] = "The %s field may only contain‡lpha-numeric characters.";

14 
	g$Ïng
['alpha_dash'] = "The %s field may only contain‡lpha-numeric characters, underscores,‡nd dashes.";

15 
	g$Ïng
['numeric'] = "The %s field must contain only‚umbers.";

16 
	g$Ïng
['is_numeric'] = "The %s field must contain only‚umeric characters.";

17 
	g$Ïng
['integer'] = "The %s field must contain‡n integer.";

18 
	g$Ïng
['regex_match'] = "The %s field is‚ot inhe correct format.";

19 
	g$Ïng
['matches'] = "The %s field does‚ot matchhe %s field.";

20 
	g$Ïng
['is_unique'] = "The %s field must contain‡ unique value.";

21 
	g$Ïng
['is_natural'] = "The %s field must contain only…ositive‚umbers.";

22 
	g$Ïng
['is_natural_no_zero'] = "The %s field must contain‡‚umber greaterhan zero.";

23 
	g$Ïng
['decimal'] = "The %s field must contain‡ decimal‚umber.";

24 
	g$Ïng
['less_than'] = "The %s field must contain‡‚umber†esshan %s.";

25 
	g$Ïng
['greater_than'] = "The %s field must contain‡‚umber greaterhan %s.";

	@system/language/english/ftp_lang.php

1 <?
php


3 
	g$Ïng
['ftp_no_connection'] = "Unableo†ocate‡ valid connection ID. Please make sure you‡re connected before…eforming‡ny file„outines.";

4 
	g$Ïng
['ftp_unable_to_connect'] = "Unableo connecto your FTP server usinghe supplied hostname.";

5 
	g$Ïng
['ftp_unable_to_login'] = "Unableo†ogino your FTP server. Please check your username‡nd…assword.";

6 
	g$Ïng
['ftp_unable_to_makdir'] = "Unableo createhe directory you have specified.";

7 
	g$Ïng
['ftp_unable_to_changedir'] = "Unableo change directories.";

8 
	g$Ïng
['ftp_unable_to_chmod'] = "Unableo set file…ermissions. Please check your…ath. Note: This feature is only‡vailable in PHP 5 or higher.";

9 
	g$Ïng
['ftp_unable_to_upload'] = "Unableo uploadhe specified file. Please check your…ath.";

10 
	g$Ïng
['ftp_unable_to_download'] = "Unableo downloadhe specified file. Please check your…ath.";

11 
	g$Ïng
['ftp_no_source_file'] = "Unableo†ocatehe source file. Please check your…ath.";

12 
	g$Ïng
['ftp_unable_to_rename'] = "Unableo„enamehe file.";

13 
	g$Ïng
['ftp_unable_to_delete'] = "Unableo deletehe file.";

14 
	g$Ïng
['ftp_unable_to_move'] = "Unableo movehe file. Please make surehe destination directoryƒxists.";

	@system/language/english/imglib_lang.php

1 <?
php


3 
	g$Ïng
['imglib_source_image_required'] = "You must specify‡ source image in your…references.";

4 
	g$Ïng
['imglib_gd_required'] = "The GD image†ibrary is„equired forhis feature.";

5 
	g$Ïng
['imglib_gd_required_for_props'] = "Your server must supporthe GD image†ibrary in ordero determinehe image…roperties.";

6 
	g$Ïng
['imglib_unsupported_imagecreate'] = "Your server does‚ot supporthe GD function„equiredo…rocesshisype of image.";

7 
	g$Ïng
['imglib_gif_not_supported'] = "GIF images‡re often‚ot supported dueo†icensing„estrictions. You may haveo use JPG or PNG images instead.";

8 
	g$Ïng
['imglib_jpg_not_supported'] = "JPG images‡re‚ot supported.";

9 
	g$Ïng
['imglib_png_not_supported'] = "PNG images‡re‚ot supported.";

10 
	g$Ïng
['imglib_jpg_or_png_required'] = "The image„esize…rotocol specified in your…references only works with JPEG or PNG imageypes.";

11 
	g$Ïng
['imglib_copy_error'] = "Anƒrror wasƒncountered while‡ttemptingo„eplacehe file. Please make sure your file directory is writable.";

12 
	g$Ïng
['imglib_rotate_unsupported'] = "Image„otation does‚ot‡ppearo be supported by your server.";

13 
	g$Ïng
['imglib_libpath_invalid'] = "The…atho your image†ibrary is‚ot correct. Please sethe correct…ath in your image…references.";

14 
	g$Ïng
['imglib_image_process_failed'] = "Image…rocessing failed. Please verifyhat your server supportshe chosen…rotocol‡ndhathe…atho your image†ibrary is correct.";

15 
	g$Ïng
['imglib_rotation_angle_required'] = "An‡ngle of„otation is„equiredo„otatehe image.";

16 
	g$Ïng
['imglib_writing_failed_gif'] = "GIF image.";

17 
	g$Ïng
['imglib_invalid_path'] = "The…athohe image is‚ot correct.";

18 
	g$Ïng
['imglib_copy_failed'] = "The image copy„outine failed.";

19 
	g$Ïng
['imglib_missing_font'] = "Unableo find‡ fonto use.";

20 
	g$Ïng
['imglib_save_failed'] = "Unableo savehe image. Please make surehe image‡nd file directory‡re writable.";

	@system/language/english/migration_lang.php

1 <?
php


3 
	g$Ïng
['migration_none_found'] = "No migrations were found.";

4 
	g$Ïng
['migration_not_found'] = "This migration could‚ot be found.";

5 
	g$Ïng
['migration_multiple_version'] = "This‡re multiple migrations withhe same version‚umber: %d.";

6 
	g$Ïng
['migration_class_doesnt_exist'] = "The migration class \"%s\" could‚ot be found.";

7 
	g$Ïng
['migration_missing_up_method'] = "The migration class \"%s\" is missing‡n 'up' method.";

8 
	g$Ïng
['migration_missing_down_method'] = "The migration class \"%s\" is missing‡n 'up' method.";

9 
	g$Ïng
['migration_invalid_filename'] = "Migration \"%s\" has‡n invalid filename.";

	@system/language/english/number_lang.php

1 <?
php


3 
	g$Ïng
['terabyte_abbr'] = "TB";

4 
	g$Ïng
['gigabyte_abbr'] = "GB";

5 
	g$Ïng
['megabyte_abbr'] = "MB";

6 
	g$Ïng
['kilobyte_abbr'] = "KB";

7 
	g$Ïng
['bytes'] = "Bytes";

	@system/language/english/profiler_lang.php

1 <?
php


3 
	g$Ïng
['profiler_database'] = 'DATABASE';

4 
	g$Ïng
['profiler_controller_info'] = 'CLASS/METHOD';

5 
	g$Ïng
['profiler_benchmarks'] = 'BENCHMARKS';

6 
	g$Ïng
['profiler_queries'] = 'QUERIES';

7 
	g$Ïng
['profiler_get_data'] = 'GET DATA';

8 
	g$Ïng
['profiler_post_data'] = 'POST DATA';

9 
	g$Ïng
['profiler_uri_string'] = 'URI STRING';

10 
	g$Ïng
['profiler_memory_usage'] = 'MEMORY USAGE';

11 
	g$Ïng
['profiler_config'] = 'CONFIG VARIABLES';

12 
	g$Ïng
['profiler_session_data'] = 'SESSION DATA';

13 
	g$Ïng
['profiler_headers'] = 'HTTP HEADERS';

14 
	g$Ïng
['profiler_no_db'] = 'Database driver is‚ot currently†oaded';

15 
	g$Ïng
['profiler_no_queries'] = 'No queries were„un';

16 
	g$Ïng
['profiler_no_post'] = 'No POST dataƒxists';

17 
	g$Ïng
['profiler_no_get'] = 'No GET dataƒxists';

18 
	g$Ïng
['profiler_no_uri'] = 'No URI dataƒxists';

19 
	g$Ïng
['profiler_no_memory'] = 'Memory Usage Unavailable';

20 
	g$Ïng
['profiler_no_profiles'] = 'No Profile data -‡ll Profiler sections have been disabled.';

21 
	g$Ïng
['profiler_section_hide'] = 'Hide';

22 
	g$Ïng
['profiler_section_show'] = 'Show';

	@system/language/english/unit_test_lang.php

1 <?
php


3 
	g$Ïng
['ut_test_name'] = 'Test Name';

4 
	g$Ïng
['ut_test_datatype'] = 'Test Datatype';

5 
	g$Ïng
['ut_res_datatype'] = 'Expected Datatype';

6 
	g$Ïng
['ut_result'] = 'Result';

7 
	g$Ïng
['ut_undefined'] = 'Undefined Test Name';

8 
	g$Ïng
['ut_file'] = 'File Name';

9 
	g$Ïng
['ut_line'] = 'Line Number';

10 
	g$Ïng
['ut_passed'] = 'Passed';

11 
	g$Ïng
['ut_failed'] = 'Failed';

12 
	g$Ïng
['ut_boolean'] = 'Boolean';

13 
	g$Ïng
['ut_integer'] = 'Integer';

14 
	g$Ïng
['ut_float'] = 'Float';

15 
	g$Ïng
['ut_double'] = 'Float';

16 
	g$Ïng
['ut_string'] = 'String';

17 
	g$Ïng
['ut_array'] = 'Array';

18 
	g$Ïng
['ut_object'] = 'Object';

19 
	g$Ïng
['ut_resource'] = 'Resource';

20 
	g$Ïng
['ut_null'] = 'Null';

21 
	g$Ïng
['ut_notes'] = 'Notes';

	@system/language/english/upload_lang.php

1 <?
php


3 
	g$Ïng
['upload_userfile_not_set'] = "Unableo find‡…ost variable called userfile.";

4 
	g$Ïng
['upload_file_exceeds_limit'] = "The uploaded fileƒxceedshe maximum‡llowed size in your PHP configuration file.";

5 
	g$Ïng
['upload_file_exceeds_form_limit'] = "The uploaded fileƒxceedshe maximum size‡llowed byhe submission form.";

6 
	g$Ïng
['upload_file_partial'] = "The file was only…artially uploaded.";

7 
	g$Ïng
['upload_no_temp_directory'] = "Theemporary folder is missing.";

8 
	g$Ïng
['upload_unable_to_write_file'] = "The file could‚ot be writteno disk.";

9 
	g$Ïng
['upload_stopped_by_extension'] = "The file upload was stopped byƒxtension.";

10 
	g$Ïng
['upload_no_file_selected'] = "You did‚ot select‡ fileo upload.";

11 
	g$Ïng
['upload_invalid_filetype'] = "The filetype you‡re‡ttemptingo upload is‚ot‡llowed.";

12 
	g$Ïng
['upload_invalid_filesize'] = "The file you‡re‡ttemptingo upload is†argerhanhe…ermitted size.";

13 
	g$Ïng
['upload_invalid_dimensions'] = "The image you‡re‡ttemptingo uploadƒxceedeshe maximum height or width.";

14 
	g$Ïng
['upload_destination_error'] = "A…roblem wasƒncountered while‡ttemptingo movehe uploaded fileohe final destination.";

15 
	g$Ïng
['upload_no_filepath'] = "The upload…ath does‚ot‡ppearo be valid.";

16 
	g$Ïng
['upload_no_file_types'] = "You have‚ot specified‡ny‡llowed fileypes.";

17 
	g$Ïng
['upload_bad_filename'] = "The file‚ame you submitted‡lreadyƒxists onhe server.";

18 
	g$Ïng
['upload_not_writable'] = "The upload destination folder does‚ot‡ppearo be writable.";

	@system/libraries/Cache/Cache.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_Cache
 
ex‹nds
 
	mCI_Driv”_Lib¿ry
 {

29 
´Ùeùed
 
	m$v®id_driv”s
 = 
¬¿y
(

33 
´Ùeùed
 
	m$_ÿche_·th
 = 
NULL
;

34 
´Ùeùed
 
	m$_ad­‹r
 = 'dummy';

35 
´Ùeùed
 
	m$_backup_driv”
;

44 
public
 
funùiÚ
 
__cÚ¡ruù
(
$cÚfig
 = 
	$¬¿y
())

46 iàĞ! 
	`em±y
(
$cÚfig
))

48 
$this
->
	`_š™Ÿlize
(
$cÚfig
);

63 
public
 
funùiÚ
 
	$g‘
(
$id
)

65  
$this
->{$this->
_ad­‹r
}->
	`g‘
(
$id
);

66 
	}
}

79 
public
 
funùiÚ
 
	$§ve
(
$id
, 
$d©a
, 
$‰l
 = 60)

81  
$this
->{$this->
_ad­‹r
}->
	`§ve
(
$id
, 
$d©a
, 
$‰l
);

82 
	}
}

92 
public
 
funùiÚ
 
	$d–‘e
(
$id
)

94  
$this
->{$this->
_ad­‹r
}->
	`d–‘e
(
$id
);

95 
	}
}

104 
public
 
funùiÚ
 
	$ş—n
()

106  
$this
->{$this->
_ad­‹r
}->
	`ş—n
();

107 
	}
}

117 
public
 
funùiÚ
 
ÿche_šfo
(
$ty³
 = 'user')

119  
$this
->{$this->
_ad­‹r
}->
ÿche_šfo
(
$ty³
);

130 
public
 
funùiÚ
 
	$g‘_m‘ad©a
(
$id
)

132  
$this
->{$this->
_ad­‹r
}->
	`g‘_m‘ad©a
(
$id
);

133 
	}
}

145 
´iv©e
 
funùiÚ
 
	$_š™Ÿlize
(
$cÚfig
)

147 
$deçuÉ_cÚfig
 = 
	`¬¿y
(

152 
	`fÜ—ch
 (
$deçuÉ_cÚfig
 
as
 
$key
)

154 ià(
	`is£t
(
$cÚfig
[
$key
]))

156 
$·¿m
 = '_'.
$key
;

158 
$this
->{
$·¿m
} = 
$cÚfig
[
$key
];

162 ià(
	`is£t
(
$cÚfig
['backup']))

164 ià(
	`š_¬¿y
('ÿche_'.
$cÚfig
['backup'], 
$this
->
v®id_driv”s
))

166 
$this
->
_backup_driv”
 = 
$cÚfig
['backup'];

169 
	}
}

179 
public
 
funùiÚ
 
	$is_suµÜ‹d
(
$driv”
)

181 
$suµÜt
 = 
	`¬¿y
();

183 iàĞ! 
	`is£t
(
$suµÜt
[
$driv”
]))

185 
$suµÜt
[
$driv”
] = 
$this
->{$driv”}->
	`is_suµÜ‹d
();

188  
$suµÜt
[
$driv”
];

189 
	}
}

199 
public
 
funùiÚ
 
	$__g‘
(
$chd
)

201 
$obj
 = 
·»Á
::
	`__g‘
(
$chd
);

203 iàĞ! 
$this
->
	`is_suµÜ‹d
(
$chd
))

205 
$this
->
_ad­‹r
 = $this->
_backup_driv”
;

208  
$obj
;

209 
	}
}

	@system/libraries/Cache/drivers/Cache_apc.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

28 şas 
	cCI_Cache_­c
 
ex‹nds
 
	mCI_Driv”
 {

39 
public
 
funùiÚ
 
	$g‘
(
$id
)

41 
$d©a
 = 
	`­c_ãtch
(
$id
);

43  (
	`is_¬¿y
(
$d©a
)è? $d©a[0] : 
FALSE
;

57 
public
 
funùiÚ
 
	$§ve
(
$id
, 
$d©a
, 
$‰l
 = 60)

59  
	`­c_¡Üe
(
$id
, 
	`¬¿y
(
$d©a
, 
	`time
(), 
$‰l
), $ttl);

60 
	}
}

70 
public
 
funùiÚ
 
	$d–‘e
(
$id
)

72  
	`­c_d–‘e
(
$id
);

73 
	}
}

82 
public
 
funùiÚ
 
	$ş—n
()

84  
	`­c_ş—r_ÿche
('user');

85 
	}
}

95 
public
 
funùiÚ
 
	$ÿche_šfo
(
$ty³
 = 
NULL
)

97  
	`­c_ÿche_šfo
(
$ty³
);

98 
	}
}

108 
public
 
funùiÚ
 
	$g‘_m‘ad©a
(
$id
)

110 
$¡Üed
 = 
	`­c_ãtch
(
$id
);

112 ià(
	`couÁ
(
$¡Üed
) !== 3)

114  
FALSE
;

117 
	`li¡
(
$d©a
, 
$time
, 
$‰l
èğ
$¡Üed
;

119  
	`¬¿y
(

120 'expœe' => 
$time
 + 
$‰l
,

121 'mtime' => 
$time
,

122 'd©a' => 
$d©a


124 
	}
}

133 
public
 
funùiÚ
 
	$is_suµÜ‹d
()

135 iàĞ! 
	`ex‹nsiÚ_lßded
('­c'è
OR
 
	`ši_g‘
('apc.enabled') != "1")

137 
	`log_mes§ge
('error', 'The APC PHPƒxtension must be†oadedo use APC Cache.');

138  
FALSE
;

141  
TRUE
;

142 
	}
}

	@system/libraries/Cache/drivers/Cache_dummy.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

28 şas 
	cCI_Cache_dummy
 
ex‹nds
 
	mCI_Driv”
 {

38 
public
 
funùiÚ
 
	$g‘
(
$id
)

40  
FALSE
;

54 
public
 
funùiÚ
 
	$§ve
(
$id
, 
$d©a
, 
$‰l
 = 60)

56  
TRUE
;

57 
	}
}

67 
public
 
funùiÚ
 
	$d–‘e
(
$id
)

69  
TRUE
;

70 
	}
}

79 
public
 
funùiÚ
 
	$ş—n
()

81  
TRUE
;

82 
	}
}

92 
public
 
funùiÚ
 
	$ÿche_šfo
(
$ty³
 = 
NULL
)

94  
FALSE
;

95 
	}
}

105 
public
 
funùiÚ
 
	$g‘_m‘ad©a
(
$id
)

107  
FALSE
;

108 
	}
}

118 
public
 
funùiÚ
 
	$is_suµÜ‹d
()

120  
TRUE
;

121 
	}
}

	@system/libraries/Cache/drivers/Cache_file.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

28 şas 
	cCI_Cache_fe
 
ex‹nds
 
	mCI_Driv”
 {

30 
´Ùeùed
 
	m$_ÿche_·th
;

35 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

37 
$CI
 =& 
	`g‘_š¡ªû
();

38 
$CI
->
lßd
->
	`h–³r
('file');

40 
$·th
 = 
$CI
->
cÚfig
->
	`™em
('cache_path');

42 
$this
->
_ÿche_·th
 = (
$·th
 =ğ''è? 
APPPATH
.'cache/' : $path;

53 
public
 
funùiÚ
 
	$g‘
(
$id
)

55 iàĞ! 
	`fe_exi¡s
(
$this
->
_ÿche_·th
.
$id
))

57  
FALSE
;

60 
$d©a
 = 
	`»ad_fe
(
$this
->
_ÿche_·th
.
$id
);

61 
$d©a
 = 
	`un£rŸlize
($data);

63 ià(
	`time
(è> 
$d©a
['time'] + $data['ttl'])

65 
	`uÆšk
(
$this
->
_ÿche_·th
.
$id
);

66  
FALSE
;

69  
$d©a
['data'];

70 
	}
}

83 
public
 
funùiÚ
 
	$§ve
(
$id
, 
$d©a
, 
$‰l
 = 60)

85 
$cÚ‹Ás
 = 
	`¬¿y
(

86 'time' => 
	`time
(),

87 '‰l' => 
$‰l
,

88 'd©a' => 
$d©a


91 ià(
	`wr™e_fe
(
$this
->
_ÿche_·th
.
$id
, 
	`£rŸlize
(
$cÚ‹Ás
)))

93 @
	`chmod
(
$this
->
_ÿche_·th
.
$id
, 0777);

94  
TRUE
;

97  
FALSE
;

98 
	}
}

108 
public
 
funùiÚ
 
	$d–‘e
(
$id
)

110  
	`uÆšk
(
$this
->
_ÿche_·th
.
$id
);

111 
	}
}

120 
public
 
funùiÚ
 
	$ş—n
()

122  
	`d–‘e_fes
(
$this
->
_ÿche_·th
);

123 
	}
}

135 
public
 
funùiÚ
 
	$ÿche_šfo
(
$ty³
 = 
NULL
)

137  
	`g‘_dœ_fe_šfo
(
$this
->
_ÿche_·th
);

138 
	}
}

148 
public
 
funùiÚ
 
	$g‘_m‘ad©a
(
$id
)

150 iàĞ! 
	`fe_exi¡s
(
$this
->
_ÿche_·th
.
$id
))

152  
FALSE
;

155 
$d©a
 = 
	`»ad_fe
(
$this
->
_ÿche_·th
.
$id
);

156 
$d©a
 = 
	`un£rŸlize
($data);

158 ià(
	`is_¬¿y
(
$d©a
))

160 
$d©a
 = $data['data'];

161 
$mtime
 = 
	`femtime
(
$this
->
_ÿche_·th
.
$id
);

163 iàĞ! 
	`is£t
(
$d©a
['ttl']))

165  
FALSE
;

168  
	`¬¿y
(

169 'expœe' => 
$mtime
 + 
$d©a
['ttl'],

170 'mtime' => 
$mtime


174  
FALSE
;

175 
	}
}

186 
public
 
funùiÚ
 
	$is_suµÜ‹d
()

188  
	`is_»®ly_wr™abË
(
$this
->
_ÿche_·th
);

189 
	}
}

	@system/libraries/Cache/drivers/Cache_memcached.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

28 şas 
	cCI_Cache_memÿched
 
ex‹nds
 
	mCI_Driv”
 {

30 
´iv©e
 
	m$_memÿched
;

32 
´Ùeùed
 
	m$_memÿche_cÚf
 = 
¬¿y
(

33 'deçuÉ' => 
¬¿y
(

48 
public
 
funùiÚ
 
	$g‘
(
$id
)

50 
$d©a
 = 
$this
->
_memÿched
->
	`g‘
(
$id
);

52  (
	`is_¬¿y
(
$d©a
)è? $d©a[0] : 
FALSE
;

65 
public
 
funùiÚ
 
	$§ve
(
$id
, 
$d©a
, 
$‰l
 = 60)

67 ià(
	`g‘_şass
(
$this
->
_memÿched
) == 'Memcached')

69  
$this
->
_memÿched
->
	`£t
(
$id
, 
	`¬¿y
(
$d©a
, 
	`time
(), 
$‰l
), $ttl);

71 ià(
	`g‘_şass
(
$this
->
_memÿched
) == 'Memcache')

73  
$this
->
_memÿched
->
	`£t
(
$id
, 
	`¬¿y
(
$d©a
, 
	`time
(), 
$‰l
), 0, $ttl);

76  
FALSE
;

77 
	}
}

87 
public
 
funùiÚ
 
	$d–‘e
(
$id
)

89  
$this
->
_memÿched
->
	`d–‘e
(
$id
);

90 
	}
}

99 
public
 
funùiÚ
 
	$ş—n
()

101  
$this
->
_memÿched
->
	`æush
();

102 
	}
}

112 
public
 
funùiÚ
 
	$ÿche_šfo
(
$ty³
 = 
NULL
)

114  
$this
->
_memÿched
->
	`g‘Sts
();

115 
	}
}

125 
public
 
funùiÚ
 
	$g‘_m‘ad©a
(
$id
)

127 
$¡Üed
 = 
$this
->
_memÿched
->
	`g‘
(
$id
);

129 ià(
	`couÁ
(
$¡Üed
) !== 3)

131  
FALSE
;

134 
	`li¡
(
$d©a
, 
$time
, 
$‰l
èğ
$¡Üed
;

136  
	`¬¿y
(

137 'expœe' => 
$time
 + 
$‰l
,

138 'mtime' => 
$time
,

139 'd©a' => 
$d©a


141 
	}
}

148 
´iv©e
 
funùiÚ
 
	$_£tup_memÿched
()

151 
$CI
 =& 
	`g‘_š¡ªû
();

152 ià(
$CI
->
cÚfig
->
	`lßd
('memÿched', 
TRUE
, TRUE))

154 ià(
	`is_¬¿y
(
$CI
->
cÚfig
->config['memcached']))

156 
$this
->
_memÿche_cÚf
 = 
NULL
;

158 
	`fÜ—ch
 (
$CI
->
cÚfig
->cÚfig['memÿched'] 
as
 
$Çme
 => 
$cÚf
)

160 
$this
->
_memÿche_cÚf
[
$Çme
] = 
$cÚf
;

165 
$this
->
_memÿched
 = 
Ãw
 
	`Memÿche
();

167 
	`fÜ—ch
 (
$this
->
_memÿche_cÚf
 
as
 
$Çme
 => 
$ÿche_£rv”
)

169 iàĞ! 
	`¬¿y_key_exi¡s
('ho¡Çme', 
$ÿche_£rv”
))

171 
$ÿche_£rv”
['ho¡Çme'] = 
$this
->
_memÿche_cÚf
['default']['default_host'];

174 iàĞ! 
	`¬¿y_key_exi¡s
('pÜt', 
$ÿche_£rv”
))

176 
$ÿche_£rv”
['pÜt'] = 
$this
->
_memÿche_cÚf
['default']['default_port'];

179 iàĞ! 
	`¬¿y_key_exi¡s
('weight', 
$ÿche_£rv”
))

181 
$ÿche_£rv”
['weight'] = 
$this
->
_memÿche_cÚf
['default']['default_weight'];

184 
$this
->
_memÿched
->
	`addS”v”
(

185 
$ÿche_£rv”
['hostname'], $cache_server['port'], $cache_server['weight']

188 
	}
}

199 
public
 
funùiÚ
 
	$is_suµÜ‹d
()

201 iàĞ! 
	`ex‹nsiÚ_lßded
('memcache'))

203 
	`log_mes§ge
('error', 'The Memcached Extension must be†oadedo use Memcached Cache.');

205  
FALSE
;

208 
$this
->
	`_£tup_memÿched
();

209  
TRUE
;

210 
	}
}

	@system/libraries/Calendar.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_C®’d¬
 {

31 
v¬
 
	m$CI
;

32 
v¬
 
	m$Ïng
;

33 
v¬
 
	m$loÿl_time
;

34 
v¬
 
	m$‹m¶©e
 = '';

35 
v¬
 
	m$¡¬t_day
 = 'sunday';

36 
v¬
 
	m$mÚth_ty³
 = 'long';

37 
v¬
 
	m$day_ty³
 = 'abr';

38 
v¬
 
	m$show_Ãxt_´ev
 = 
FALSE
;

39 
v¬
 
	m$Ãxt_´ev_u¾
 = '';

46 
public
 
funùiÚ
 
__cÚ¡ruù
(
$cÚfig
 = 
	$¬¿y
())

48 
$this
->
CI
 =& 
	`g‘_š¡ªû
();

50 iàĞ! 
	`š_¬¿y
('ÿËnd¬_Ïng.php', 
$this
->
CI
->
Ïng
->
is_lßded
, 
TRUE
))

52 
$this
->
CI
->
Ïng
->
	`lßd
('calendar');

55 
$this
->
loÿl_time
 = 
	`time
();

57 ià(
	`couÁ
(
$cÚfig
) > 0)

59 
$this
->
	`š™Ÿlize
(
$cÚfig
);

62 
	`log_mes§ge
('debug', "Calendar Class Initialized");

76 
funùiÚ
 
	`š™Ÿlize
(
$cÚfig
 = 
	$¬¿y
())

78 
	`fÜ—ch
 (
$cÚfig
 
as
 
$key
 => 
$v®
)

80 ià(
	`is£t
(
$this
->
$key
))

82 
$this
->
$key
 = 
$v®
;

85 
	}
}

98 
funùiÚ
 
g’”©e
(
$y—r
 = '', 
$mÚth
 = '', 
$d©a
 = 
	$¬¿y
())

101 ià(
$y—r
 == '')

102 
$y—r
 = 
	`d©e
("Y", 
$this
->
loÿl_time
);

104 ià(
$mÚth
 == '')

105 
$mÚth
 = 
	`d©e
("m", 
$this
->
loÿl_time
);

107 ià(
	`¡¾’
(
$y—r
) == 1)

108 
$y—r
 = '200'.$year;

110 ià(
	`¡¾’
(
$y—r
) == 2)

111 
$y—r
 = '20'.$year;

113 ià(
	`¡¾’
(
$mÚth
) == 1)

114 
$mÚth
 = '0'.$month;

116 
$adju¡ed_d©e
 = 
$this
->
	`adju¡_d©e
(
$mÚth
, 
$y—r
);

118 
$mÚth
 = 
$adju¡ed_d©e
['month'];

119 
$y—r
 = 
$adju¡ed_d©e
['year'];

122 
$tÙ®_days
 = 
$this
->
	`g‘_tÙ®_days
(
$mÚth
, 
$y—r
);

125 
$¡¬t_days
 = 
	`¬¿y
('sunday' => 0, 'monday' => 1, 'tuesday' => 2, 'wednesday' => 3, 'thursday' => 4, 'friday' => 5, 'saturday' => 6);

126 
$¡¬t_day
 = ( ! 
	`is£t
(
$¡¬t_days
[
$this
->
¡¬t_day
])) ? 0 : $start_days[$this->start_day];

129 
$loÿl_d©e
 = 
	`mktime
(12, 0, 0, 
$mÚth
, 1, 
$y—r
);

130 
$d©e
 = 
	`g‘d©e
(
$loÿl_d©e
);

131 
$day
 = 
$¡¬t_day
 + 1 - 
$d©e
["wday"];

133 
$day
 > 1)

135 
$day
 -= 7;

140 
$cur_y—r
 = 
	`d©e
("Y", 
$this
->
loÿl_time
);

141 
$cur_mÚth
 = 
	`d©e
("m", 
$this
->
loÿl_time
);

142 
$cur_day
 = 
	`d©e
("j", 
$this
->
loÿl_time
);

144 
$is_cu¼’t_mÚth
 = (
$cur_y—r
 =ğ
$y—r
 
AND
 
$cur_mÚth
 =ğ
$mÚth
è? 
TRUE
 : 
FALSE
;

147 
$this
->
	`·r£_‹m¶©e
();

150 
$out
 = 
$this
->
‹mp
['table_open'];

151 
$out
 .= "\n";

153 
$out
 .= "\n";

154 
$out
 .ğ
$this
->
‹mp
['heading_row_start'];

155 
$out
 .= "\n";

158 ià(
$this
->
show_Ãxt_´ev
 =ğ
TRUE
)

161 
$this
->
Ãxt_´ev_u¾
 = 
	`´eg_»¶aû
("/(.+?)\/*$/", "\\1/", $this->next_prev_url);

163 
$adju¡ed_d©e
 = 
$this
->
	`adju¡_d©e
(
$mÚth
 - 1, 
$y—r
);

164 
$out
 .ğ
	`¡r_»¶aû
('{´evious_u¾}', 
$this
->
Ãxt_´ev_u¾
.
$adju¡ed_d©e
['y—r'].'/'.$adju¡ed_d©e['mÚth'], $this->
‹mp
['heading_previous_cell']);

165 
$out
 .= "\n";

169 
$cŞ¥ª
 = (
$this
->
show_Ãxt_´ev
 =ğ
TRUE
) ? 5 : 7;

171 
$this
->
‹mp
['h—dšg_t™Ë_ûÎ'] = 
	`¡r_»¶aû
('{cŞ¥ª}', 
$cŞ¥ª
, $this->temp['heading_title_cell']);

172 
$this
->
‹mp
['h—dšg_t™Ë_ûÎ'] = 
	`¡r_»¶aû
('{h—dšg}', $this->
	`g‘_mÚth_Çme
(
$mÚth
)."&nb¥;".
$y—r
, $this->temp['heading_title_cell']);

174 
$out
 .ğ
$this
->
‹mp
['heading_title_cell'];

175 
$out
 .= "\n";

178 ià(
$this
->
show_Ãxt_´ev
 =ğ
TRUE
)

180 
$adju¡ed_d©e
 = 
$this
->
	`adju¡_d©e
(
$mÚth
 + 1, 
$y—r
);

181 
$out
 .ğ
	`¡r_»¶aû
('{Ãxt_u¾}', 
$this
->
Ãxt_´ev_u¾
.
$adju¡ed_d©e
['y—r'].'/'.$adju¡ed_d©e['mÚth'], $this->
‹mp
['heading_next_cell']);

184 
$out
 .= "\n";

185 
$out
 .ğ
$this
->
‹mp
['heading_row_end'];

186 
$out
 .= "\n";

189 
$out
 .= "\n";

190 
$out
 .ğ
$this
->
‹mp
['week_row_start'];

191 
$out
 .= "\n";

193 
$day_Çmes
 = 
$this
->
	`g‘_day_Çmes
();

195 
$i
 = 0; $i < 7; $i ++)

197 
$out
 .ğ
	`¡r_»¶aû
('{w“k_day}', 
$day_Çmes
[(
$¡¬t_day
 + 
$i
è%7], 
$this
->
‹mp
['week_day_cell']);

200 
$out
 .= "\n";

201 
$out
 .ğ
$this
->
‹mp
['week_row_end'];

202 
$out
 .= "\n";

205 
$day
 <ğ
$tÙ®_days
)

207 
$out
 .= "\n";

208 
$out
 .ğ
$this
->
‹mp
['cal_row_start'];

209 
$out
 .= "\n";

211 
$i
 = 0; $i < 7; $i++)

213 
$out
 .ğ(
$is_cu¼’t_mÚth
 =ğ
TRUE
 
AND
 
$day
 =ğ
$cur_day
è? 
$this
->
‹mp
['cal_cell_start_today'] : $this->temp['cal_cell_start'];

215 ià(
$day
 > 0 
AND
 $day <ğ
$tÙ®_days
)

217 ià(
	`is£t
(
$d©a
[
$day
]))

220 
$‹mp
 = (
$is_cu¼’t_mÚth
 =ğ
TRUE
 
AND
 
$day
 =ğ
$cur_day
è? 
$this
->
‹mp
['cal_cell_content_today'] : $this->temp['cal_cell_content'];

221 
$out
 .ğ
	`¡r_»¶aû
('{day}', 
$day
, sŒ_»¶aû('{cÚ‹Á}', 
$d©a
[$day], 
$‹mp
));

226 
$‹mp
 = (
$is_cu¼’t_mÚth
 =ğ
TRUE
 
AND
 
$day
 =ğ
$cur_day
è? 
$this
->
‹mp
['cal_cell_no_content_today'] : $this->temp['cal_cell_no_content'];

227 
$out
 .ğ
	`¡r_»¶aû
('{day}', 
$day
, 
$‹mp
);

233 
$out
 .ğ
$this
->
‹mp
['cal_cell_blank'];

236 
$out
 .ğ(
$is_cu¼’t_mÚth
 =ğ
TRUE
 
AND
 
$day
 =ğ
$cur_day
è? 
$this
->
‹mp
['cal_cell_end_today'] : $this->temp['cal_cell_end'];

237 
$day
++;

240 
$out
 .= "\n";

241 
$out
 .ğ
$this
->
‹mp
['cal_row_end'];

242 
$out
 .= "\n";

245 
$out
 .= "\n";

246 
$out
 .ğ
$this
->
‹mp
['table_close'];

248  
$out
;

249 
	}
}

263 
funùiÚ
 
	$g‘_mÚth_Çme
(
$mÚth
)

265 ià(
$this
->
mÚth_ty³
 == 'short')

267 
$mÚth_Çmes
 = 
	`¬¿y
('01' => 'cal_jan', '02' => 'cal_feb', '03' => 'cal_mar', '04' => 'cal_apr', '05' => 'cal_may', '06' => 'cal_jun', '07' => 'cal_jul', '08' => 'cal_aug', '09' => 'cal_sep', '10' => 'cal_oct', '11' => 'cal_nov', '12' => 'cal_dec');

271 
$mÚth_Çmes
 = 
	`¬¿y
('01' => 'cal_january', '02' => 'cal_february', '03' => 'cal_march', '04' => 'cal_april', '05' => 'cal_mayl', '06' => 'cal_june', '07' => 'cal_july', '08' => 'cal_august', '09' => 'cal_september', '10' => 'cal_october', '11' => 'cal_november', '12' => 'cal_december');

274 
$mÚth
 = 
$mÚth_Çmes
[$month];

276 ià(
$this
->
CI
->
Ïng
->
	`lše
(
$mÚth
è==ğ
FALSE
)

278  
	`ucfœ¡
(
	`¡r_»¶aû
('ÿl_', '', 
$mÚth
));

281  
$this
->
CI
->
Ïng
->
	`lše
(
$mÚth
);

282 
	}
}

296 
funùiÚ
 
g‘_day_Çmes
(
$day_ty³
 = '')

298 ià(
$day_ty³
 != '')

299 
$this
->
day_ty³
 = 
$day_ty³
;

301 ià(
	g$this
->
	gday_ty³
 == 'long')

303 
$day_Çmes
 = 
¬¿y
('sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday');

305 
–£if
 (
$this
->
day_ty³
 == 'short')

307 
$day_Çmes
 = 
¬¿y
('sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat');

311 
	g$day_Çmes
 = 
¬¿y
('su', 'mo', 'tu', 'we', 'th', 'fr', 'sa');

314 
	g$days
 = 
¬¿y
();

315 
fÜ—ch
 (
$day_Çmes
 
as
 
$v®
)

317 
	g$days
[] = (
$this
->
CI
->
Ïng
->
lše
('ÿl_'.
$v®
è==ğ
FALSE
è? 
ucfœ¡
($val) : $this->CI->lang->line('cal_'.$val);

320  
	g$days
;

337 
funùiÚ
 
	$adju¡_d©e
(
$mÚth
, 
$y—r
)

339 
$d©e
 = 
	`¬¿y
();

341 
$d©e
['mÚth'] = 
$mÚth
;

342 
$d©e
['y—r'] = 
$y—r
;

344 
$d©e
['month'] > 12)

346 
$d©e
['month'] -= 12;

347 
$d©e
['year']++;

350 
$d©e
['month'] <= 0)

352 
$d©e
['month'] += 12;

353 
$d©e
['year']--;

356 ià(
	`¡¾’
(
$d©e
['month']) == 1)

358 
$d©e
['month'] = '0'.$date['month'];

361  
$d©e
;

362 
	}
}

374 
funùiÚ
 
	$g‘_tÙ®_days
(
$mÚth
, 
$y—r
)

376 
$days_š_mÚth
 = 
	`¬¿y
(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);

378 ià(
$mÚth
 < 1 
OR
 $month > 12)

384 ià(
$mÚth
 == 2)

386 ià(
$y—r
 % 400 =ğ0 
	`OR
 ($y—¸% 4 =ğ0 
AND
 $year % 100 != 0))

392  
$days_š_mÚth
[
$mÚth
 - 1];

393 
	}
}

405 
funùiÚ
 
	$deçuÉ_‹m¶©e
()

407  
	`¬¿y
 (

430 
	}
}

443 
funùiÚ
 
	$·r£_‹m¶©e
()

445 
$this
->
‹mp
 = $this->
	`deçuÉ_‹m¶©e
();

447 ià(
$this
->
‹m¶©e
 == '')

452 
$today
 = 
	`¬¿y
('cal_cell_start_today', 'cal_cell_content_today', 'cal_cell_no_content_today', 'cal_cell_end_today');

454 
	`fÜ—ch
 (
	`¬¿y
('bË_İ’', 'bË_şo£', 'h—dšg_row_¡¬t', 'h—dšg_´evious_ûÎ', 'h—dšg_t™Ë_ûÎ', 'h—dšg_Ãxt_ûÎ', 'h—dšg_row_’d', 'w“k_row_¡¬t', 'w“k_day_ûÎ', 'w“k_row_’d', 'ÿl_row_¡¬t', 'ÿl_ûÎ_¡¬t', 'ÿl_ûÎ_cÚ‹Á', 'ÿl_ûÎ_no_cÚ‹Á', 'ÿl_ûÎ_bÏnk', 'ÿl_ûÎ_’d', 'ÿl_row_’d', 'ÿl_ûÎ_¡¬t_today', 'ÿl_ûÎ_cÚ‹Á_today', 'ÿl_ûÎ_no_cÚ‹Á_today', 'ÿl_ûÎ_’d_today'è
as
 
$v®
)

456 ià(
	`´eg_m©ch
("/\{".
$v®
."\}(.*?)\{\/".$v®."\}/si", 
$this
->
‹m¶©e
, 
$m©ch
))

458 
$this
->
‹mp
[
$v®
] = 
$m©ch
['1'];

462 ià(
	`š_¬¿y
(
$v®
, 
$today
, 
TRUE
))

464 
$this
->
‹mp
[
$v®
] = $this->‹mp[
	`¡r_»¶aû
('_today', '', $val)];

468 
	}
}

	@system/libraries/Cart.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_C¬t
 {

30 
v¬
 
	m$´oduù_id_ruËs
 = '\.a-z0-9_-';

31 
v¬
 
	m$´oduù_Çme_ruËs
 = '\.\:\-_‡-z0-9';

34 
v¬
 
	m$CI
;

35 
v¬
 
	m$_ÿ¹_cÚ‹Ás
 = 
¬¿y
();

43 
public
 
funùiÚ
 
__cÚ¡ruù
(
$·¿ms
 = 
	$¬¿y
())

46 
$this
->
CI
 =& 
	`g‘_š¡ªû
();

49 
$cÚfig
 = 
	`¬¿y
();

50 ià(
	`couÁ
(
$·¿ms
) > 0)

52 
	`fÜ—ch
 (
$·¿ms
 
as
 
$key
 => 
$v®
)

54 
$cÚfig
[
$key
] = 
$v®
;

59 
$this
->
CI
->
lßd
->
	`lib¿ry
('£ssiÚ', 
$cÚfig
);

62 ià(
$this
->
CI
->
£ssiÚ
->
	`u£rd©a
('ÿ¹_cÚ‹Ás'è!=ğ
FALSE
)

64 
$this
->
_ÿ¹_cÚ‹Ás
 = $this->
CI
->
£ssiÚ
->
	`u£rd©a
('cart_contents');

69 
$this
->
_ÿ¹_cÚ‹Ás
['cart_total'] = 0;

70 
$this
->
_ÿ¹_cÚ‹Ás
['total_items'] = 0;

73 
	`log_mes§ge
('debug', "Cart Class Initialized");

85 
funùiÚ
 
	`š£¹
(
$™ems
 = 
	$¬¿y
())

88 iàĞ! 
	`is_¬¿y
(
$™ems
è
OR
 
	`couÁ
($items) == 0)

90 
	`log_mes§ge
('error', 'The insert method must be…assed‡n‡rray containing data.');

91  
FALSE
;

99 
$§ve_ÿ¹
 = 
FALSE
;

100 ià(
	`is£t
(
$™ems
['id']))

102 ià((
$rowid
 = 
$this
->
	`_š£¹
(
$™ems
)))

104 
$§ve_ÿ¹
 = 
TRUE
;

109 
	`fÜ—ch
 (
$™ems
 
as
 
$v®
)

111 ià(
	`is_¬¿y
(
$v®
è
AND
 
	`is£t
($val['id']))

113 ià(
$this
->
	`_š£¹
(
$v®
))

115 
$§ve_ÿ¹
 = 
TRUE
;

122 ià(
$§ve_ÿ¹
 =ğ
TRUE
)

124 
$this
->
	`_§ve_ÿ¹
();

125  
	`is£t
(
$rowid
è? $rowid : 
TRUE
;

128  
FALSE
;

129 
	}
}

140 
funùiÚ
 
_š£¹
(
$™ems
 = 
	$¬¿y
())

143 iàĞ! 
	`is_¬¿y
(
$™ems
è
OR
 
	`couÁ
($items) == 0)

145 
	`log_mes§ge
('error', 'The insert method must be…assed‡n‡rray containing data.');

146  
FALSE
;

152 iàĞ! 
	`is£t
(
$™ems
['id']è
OR
 ! isset($items['qty']) OR ! isset($items['price']) OR ! isset($items['name']))

154 
	`log_mes§ge
('error', 'The cart‡rray must contain‡…roduct ID, quantity,…rice,‡nd‚ame.');

155  
FALSE
;

161 
$™ems
['qty'] = 
	`Œim
(
	`´eg_»¶aû
('/([^0-9])/i', '', $items['qty']));

163 
$™ems
['qty'] = 
	`Œim
(
	`´eg_»¶aû
('/(^[0]+)/i', '', $items['qty']));

166 iàĞ! 
	`is_num”ic
(
$™ems
['qty']è
OR
 $items['qty'] == 0)

168  
FALSE
;

176 iàĞ! 
	`´eg_m©ch
("/^[".
$this
->
´oduù_id_ruËs
."]+$/i", 
$™ems
['id']))

178 
	`log_mes§ge
('error', 'Invalid…roduct ID. The…roduct ID can only contain‡lpha-numeric characters, dashes,‡nd underscores');

179  
FALSE
;

186 iàĞ! 
	`´eg_m©ch
("/^[".
$this
->
´oduù_Çme_ruËs
."]+$/i", 
$™ems
['name']))

188 
	`log_mes§ge
('”rÜ', 'AÀšv®id‚amwa subm™‹d‡ th´oduù‚ame: '.
$™ems
['name'].' The‚ame can only contain‡lpha-numeric characters, dashes, underscores, colons,‡nd spaces');

189  
FALSE
;

195 
$™ems
['´iû'] = 
	`Œim
(
	`´eg_»¶aû
('/([^0-9\.])/i', '', $items['price']));

197 
$™ems
['´iû'] = 
	`Œim
(
	`´eg_»¶aû
('/(^[0]+)/i', '', $items['price']));

200 iàĞ! 
	`is_num”ic
(
$™ems
['price']))

202 
	`log_mes§ge
('”rÜ', 'AÀšv®id…riû wa subm™‹d fÜ…roduù ID: '.
$™ems
['id']);

203  
FALSE
;

218 ià(
	`is£t
(
$™ems
['İtiÚs']è
AND
 
	`couÁ
($items['options']) > 0)

220 
$rowid
 = 
	`md5
(
$™ems
['id'].
	`im¶ode
('', $items['options']));

227 
$rowid
 = 
	`md5
(
$™ems
['id']);

235 
	`un£t
(
$this
->
_ÿ¹_cÚ‹Ás
[
$rowid
]);

238 
$this
->
_ÿ¹_cÚ‹Ás
[
$rowid
]['rowid'] = $rowid;

241 
	`fÜ—ch
 (
$™ems
 
as
 
$key
 => 
$v®
)

243 
$this
->
_ÿ¹_cÚ‹Ás
[
$rowid
][
$key
] = 
$v®
;

247  
$rowid
;

248 
	}
}

265 
funùiÚ
 
upd©e
(
$™ems
 = 
	$¬¿y
())

268 iàĞ! 
	`is_¬¿y
(
$™ems
è
OR
 
	`couÁ
($items) == 0)

270  
FALSE
;

277 
$§ve_ÿ¹
 = 
FALSE
;

278 ià(
	`is£t
(
$™ems
['rowid']è
AND
 isset($items['qty']))

280 ià(
$this
->
	`_upd©e
(
$™ems
è=ğ
TRUE
)

282 
$§ve_ÿ¹
 = 
TRUE
;

287 
	`fÜ—ch
 (
$™ems
 
as
 
$v®
)

289 ià(
	`is_¬¿y
(
$v®
è
AND
 
	`is£t
($val['rowid']) AND isset($val['qty']))

291 ià(
$this
->
	`_upd©e
(
$v®
è=ğ
TRUE
)

293 
$§ve_ÿ¹
 = 
TRUE
;

300 ià(
$§ve_ÿ¹
 =ğ
TRUE
)

302 
$this
->
	`_§ve_ÿ¹
();

303  
TRUE
;

306  
FALSE
;

307 
	}
}

323 
funùiÚ
 
_upd©e
(
$™ems
 = 
	$¬¿y
())

326 iàĞ! 
	`is£t
(
$™ems
['qty']è
OR
 ! is£t($™ems['rowid']èOR ! is£t(
$this
->
_ÿ¹_cÚ‹Ás
[$items['rowid']]))

328  
FALSE
;

332 
$™ems
['qty'] = 
	`´eg_»¶aû
('/([^0-9])/i', '', $items['qty']);

335 iàĞ! 
	`is_num”ic
(
$™ems
['qty']))

337  
FALSE
;

342 ià(
$this
->
_ÿ¹_cÚ‹Ás
[
$™ems
['rowid']]['qty'] == $items['qty'])

344  
FALSE
;

349 ià(
$™ems
['qty'] == 0)

351 
	`un£t
(
$this
->
_ÿ¹_cÚ‹Ás
[
$™ems
['rowid']]);

355 
$this
->
_ÿ¹_cÚ‹Ás
[
$™ems
['rowid']]['qty'] = $items['qty'];

358  
TRUE
;

359 
	}
}

369 
funùiÚ
 
	$_§ve_ÿ¹
()

372 
	`un£t
(
$this
->
_ÿ¹_cÚ‹Ás
['total_items']);

373 
	`un£t
(
$this
->
_ÿ¹_cÚ‹Ás
['cart_total']);

376 
$tÙ®
 = 0;

377 
$™ems
 = 0;

378 
	`fÜ—ch
 (
$this
->
_ÿ¹_cÚ‹Ás
 
as
 
$key
 => 
$v®
)

381 iàĞ! 
	`is_¬¿y
(
$v®
è
OR
 ! 
	`is£t
($val['price']) OR ! isset($val['qty']))

386 
$tÙ®
 +ğ(
$v®
['price'] * $val['qty']);

387 
$™ems
 +ğ
$v®
['qty'];

390 
$this
->
_ÿ¹_cÚ‹Ás
[
$key
]['subtotal'] = ($this->_cart_contents[$key]['price'] * $this->_cart_contents[$key]['qty']);

394 
$this
->
_ÿ¹_cÚ‹Ás
['tÙ®_™ems'] = 
$™ems
;

395 
$this
->
_ÿ¹_cÚ‹Ás
['ÿ¹_tÙ®'] = 
$tÙ®
;

398 ià(
	`couÁ
(
$this
->
_ÿ¹_cÚ‹Ás
) <= 2)

400 
$this
->
CI
->
£ssiÚ
->
	`un£t_u£rd©a
('cart_contents');

403  
FALSE
;

408 
$this
->
CI
->
£ssiÚ
->
	`£t_u£rd©a
(
	`¬¿y
('ÿ¹_cÚ‹Ás' => $this->
_ÿ¹_cÚ‹Ás
));

411  
TRUE
;

412 
	}
}

422 
funùiÚ
 
	$tÙ®
()

424  
$this
->
_ÿ¹_cÚ‹Ás
['cart_total'];

425 
	}
}

437 
funùiÚ
 
	$tÙ®_™ems
()

439  
$this
->
_ÿ¹_cÚ‹Ás
['total_items'];

440 
	}
}

452 
funùiÚ
 
	$cÚ‹Ás
()

454 
$ÿ¹
 = 
$this
->
_ÿ¹_cÚ‹Ás
;

457 
	`un£t
(
$ÿ¹
['total_items']);

458 
	`un£t
(
$ÿ¹
['cart_total']);

460  
$ÿ¹
;

461 
	}
}

474 
funùiÚ
 
has_İtiÚs
(
$rowid
 = '')

476 iàĞ! 
is£t
(
$this
->
_ÿ¹_cÚ‹Ás
[
$rowid
]['İtiÚs']è
OR
 
couÁ
($this->_cart_contents[$rowid]['options']) === 0)

478  
FALSE
;

481  
	gTRUE
;

494 
funùiÚ
 
´oduù_İtiÚs
(
$rowid
 = '')

496 iàĞ! 
is£t
(
$this
->
_ÿ¹_cÚ‹Ás
[
$rowid
]['options']))

498  
¬¿y
();

501  
	g$this
->
	g_ÿ¹_cÚ‹Ás
[
$rowid
]['options'];

514 
funùiÚ
 
fÜm©_numb”
(
$n
 = '')

516 ià(
$n
 == '')

522 
	g$n
 = 
Œim
(
´eg_»¶aû
('/([^0-9\.])/i', '', 
$n
));

524  
numb”_fÜm©
(
$n
, 2, '.', ',');

537 
funùiÚ
 
	$de¡roy
()

539 
	`un£t
(
$this
->
_ÿ¹_cÚ‹Ás
);

541 
$this
->
_ÿ¹_cÚ‹Ás
['cart_total'] = 0;

542 
$this
->
_ÿ¹_cÚ‹Ás
['total_items'] = 0;

544 
$this
->
CI
->
£ssiÚ
->
	`un£t_u£rd©a
('cart_contents');

545 
	}
}

	@system/libraries/Driver.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

30 şas 
	cCI_Driv”_Lib¿ry
 {

32 
´Ùeùed
 
	m$v®id_driv”s
 = 
¬¿y
();

33 
´Ùeùed
 
	m$lib_Çme
;

37 
funùiÚ
 
	$__g‘
(
$chd
)

39 iàĞ! 
	`is£t
(
$this
->
lib_Çme
))

41 
$this
->
lib_Çme
 = 
	`g‘_şass
($this);

45 
$chd_şass
 = 
$this
->
lib_Çme
.'_'.
$chd
;

48 
$lib_Çme
 = 
	`ucfœ¡
(
	`¡¹Şow”
(
	`¡r_»¶aû
('CI_', '', 
$this
->
lib_Çme
)));

49 
$driv”_Çme
 = 
	`¡¹Şow”
(
	`¡r_»¶aû
('CI_', '', 
$chd_şass
));

51 ià(
	`š_¬¿y
(
$driv”_Çme
, 
	`¬¿y_m­
('¡¹Şow”', 
$this
->
v®id_driv”s
)))

54 iàĞ! 
	`şass_exi¡s
(
$chd_şass
))

57 
	`fÜ—ch
 (
	`g‘_š¡ªû
()->
lßd
->
	`g‘_·ckage_·ths
(
TRUE
è
as
 
$·th
)

60 
	`fÜ—ch
 (
	`¬¿y
(
	`ucfœ¡
(
$driv”_Çme
), $driv”_Çmeè
as
 
$şass
)

62 
$f•©h
 = 
$·th
.'lib¿r›s/'.
$lib_Çme
.'/driv”s/'.
$şass
.'.php';

64 ià(
	`fe_exi¡s
(
$f•©h
))

66 
šşude_Úû
 
$f•©h
;

73 iàĞ! 
	`şass_exi¡s
(
$chd_şass
))

75 
	`log_mes§ge
('”rÜ', "UÇbËØlßdh»que¡ed driv”: ".
$chd_şass
);

76 
	`show_”rÜ
("UÇbËØlßdh»que¡ed driv”: ".
$chd_şass
);

80 
$obj
 = 
Ãw
 
$chd_şass
;

81 
$obj
->
	`decÜ©e
(
$this
);

82 
$this
->
$chd
 = 
$obj
;

83  
$this
->
$chd
;

87 
	`log_mes§ge
('”rÜ', "Inv®id driv”„eque¡ed: ".
$chd_şass
);

88 
	`show_”rÜ
("Inv®id driv”„eque¡ed: ".
$chd_şass
);

93 
	}
}

109 şas 
	cCI_Driv”
 {

110 
´Ùeùed
 
	m$·»Á
;

112 
´iv©e
 
	m$m‘hods
 = 
¬¿y
();

113 
´iv©e
 
	m$´İ”t›s
 = 
¬¿y
();

115 
´iv©e
 
	m$»æeùiÚs
 = 
¬¿y
();

125 
public
 
funùiÚ
 
	$decÜ©e
(
$·»Á
)

127 
$this
->
·»Á
 = 
$·»Á
;

132 
$şass_Çme
 = 
	`g‘_şass
(
$·»Á
);

134 iàĞ! 
	`is£t
(
£lf
::
$»æeùiÚs
[
$şass_Çme
]))

136 
$r
 = 
Ãw
 
	`ReæeùiÚObjeù
(
$·»Á
);

138 
	`fÜ—ch
 (
$r
->
	`g‘M‘hods
(è
as
 
$m‘hod
)

140 ià(
$m‘hod
->
	`isPublic
())

142 
$this
->
m‘hods
[] = 
$m‘hod
->
	`g‘Name
();

146 
	`fÜ—ch
 (
$r
->
	`g‘Prİ”t›s
(è
as
 
$´İ
)

148 ià(
$´İ
->
	`isPublic
())

150 
$this
->
´İ”t›s
[] = 
$´İ
->
	`g‘Name
();

154 
£lf
::
$»æeùiÚs
[
$şass_Çme
] = 
	`¬¿y
(
$this
->
m‘hods
, $this->
´İ”t›s
);

158 
	`li¡
(
$this
->
m‘hods
, $this->
´İ”t›s
èğ
£lf
::
$»æeùiÚs
[
$şass_Çme
];

174 
public
 
funùiÚ
 
	`__ÿÎ
(
$m‘hod
, 
$¬gs
 = 
	$¬¿y
())

176 ià(
	`š_¬¿y
(
$m‘hod
, 
$this
->
m‘hods
))

178  
	`ÿÎ_u£r_func_¬¿y
(
	`¬¿y
(
$this
->
·»Á
, 
$m‘hod
), 
$¬gs
);

181 
$Œaû
 = 
	`debug_backŒaû
();

182 
	`_exû±iÚ_hªdËr
(
E_ERROR
, "NØsuch m‘hod '{$m‘hod}'", 
$Œaû
[1]['file'], $trace[1]['line']);

183 
ex™
;

184 
	}
}

196 
public
 
funùiÚ
 
	$__g‘
(
$v¬
)

198 ià(
	`š_¬¿y
(
$v¬
, 
$this
->
´İ”t›s
))

200  
$this
->
·»Á
->
$v¬
;

202 
	}
}

215 
public
 
funùiÚ
 
	$__£t
(
$v¬
, 
$v®
)

217 ià(
	`š_¬¿y
(
$v¬
, 
$this
->
´İ”t›s
))

219 
$this
->
·»Á
->
$v¬
 = 
$v®
;

221 
	}
}

	@system/libraries/Email.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_Ema
 {

31 
v¬
 
	m$u£¿g’t
 = "CodeIgniter";

32 
v¬
 
	m$ma·th
 = "/usr/sbin/sendmail";

33 
v¬
 
	m$´ÙocŞ
 = "mail";

34 
v¬
 
	m$sm_ho¡
 = "";

35 
v¬
 
	m$sm_u£r
 = "";

36 
v¬
 
	m$sm_·ss
 = "";

37 
v¬
 
	m$sm_pÜt
 = "25";

38 
v¬
 
	m$sm_timeout
 = 5;

39 
v¬
 
	m$sm_üy±o
 = "";

40 
v¬
 
	m$wÜdw¿p
 = 
TRUE
;

41 
v¬
 
	m$w¿pch¬s
 = "76";

42 
v¬
 
	m$maty³
 = "text";

43 
v¬
 
	m$ch¬£t
 = "utf-8";

44 
v¬
 
	m$muÉ¬t
 = "mixed";

45 
v¬
 
	m$®t_mes§ge
 = '';

46 
v¬
 
	m$v®id©e
 = 
FALSE
;

47 
v¬
 
	m$´iÜ™y
 = "3";

48 
v¬
 
	m$Ãwlše
 = "\n";

49 
v¬
 
	m$ülf
 = "\n";

52 
v¬
 
	m$£nd_muÉ¬t
 = 
TRUE
;

53 
v¬
 
	m$bcc_b©ch_mode
 = 
FALSE
;

54 
v¬
 
	m$bcc_b©ch_size
 = 200;

55 
v¬
 
	m$_§ã_mode
 = 
FALSE
;

56 
v¬
 
	m$_subjeù
 = "";

57 
v¬
 
	m$_body
 = "";

58 
v¬
 
	m$_fš®body
 = "";

59 
v¬
 
	m$_®t_bound¬y
 = "";

60 
v¬
 
	m$_©c_bound¬y
 = "";

61 
v¬
 
	m$_h—d”_¡r
 = "";

62 
v¬
 
	m$_sm_cÚÃù
 = "";

63 
v¬
 
	m$_’codšg
 = "8bit";

64 
v¬
 
	m$_IP
 = 
FALSE
;

65 
v¬
 
	m$_sm_auth
 = 
FALSE
;

66 
v¬
 
	m$_»¶yto_æag
 = 
FALSE
;

67 
v¬
 
	m$_debug_msg
 = 
¬¿y
();

68 
v¬
 
	m$_»c›Ás
 = 
¬¿y
();

69 
v¬
 
	m$_cc_¬¿y
 = 
¬¿y
();

70 
v¬
 
	m$_bcc_¬¿y
 = 
¬¿y
();

71 
v¬
 
	m$_h—d”s
 = 
¬¿y
();

72 
v¬
 
	m$_©ch_Çme
 = 
¬¿y
();

73 
v¬
 
	m$_©ch_ty³
 = 
¬¿y
();

74 
v¬
 
	m$_©ch_di¥
 = 
¬¿y
();

75 
v¬
 
	m$_´ÙocŞs
 = 
¬¿y
('mail', 'sendmail', 'smtp');

76 
v¬
 
	m$_ba£_ch¬£ts
 = 
¬¿y
('us-ascii', 'iso-2022-');

77 
v¬
 
	m$_b™_d•ths
 = 
¬¿y
('7bit', '8bit');

78 
v¬
 
	m$_´iÜ™›s
 = 
¬¿y
('1 (Highest)', '2 (High)', '3 (Normal)', '4 (Low)', '5 (Lowest)');

86 
public
 
funùiÚ
 
__cÚ¡ruù
(
$cÚfig
 = 
	$¬¿y
())

88 ià(
	`couÁ
(
$cÚfig
) > 0)

90 
$this
->
	`š™Ÿlize
(
$cÚfig
);

94 
$this
->
_sm_auth
 = ($this->
sm_u£r
 =ğ'' 
AND
 $this->
sm_·ss
 =ğ''è? 
FALSE
 : 
TRUE
;

95 
$this
->
_§ã_mode
 = ((
boŞ—n
)@
	`ši_g‘
("§ã_mode"è==ğ
FALSE
è? FALSE : 
TRUE
;

98 
	`log_mes§ge
('debug', "Email Class Initialized");

110 
public
 
funùiÚ
 
	`š™Ÿlize
(
$cÚfig
 = 
	$¬¿y
())

112 
	`fÜ—ch
 (
$cÚfig
 
as
 
$key
 => 
$v®
)

114 ià(
	`is£t
(
$this
->
$key
))

116 
$m‘hod
 = '£t_'.
$key
;

118 ià(
	`m‘hod_exi¡s
(
$this
, 
$m‘hod
))

120 
$this
->
	`$m‘hod
(
$v®
);

124 
$this
->
$key
 = 
$v®
;

128 
$this
->
	`ş—r
();

130 
$this
->
_sm_auth
 = ($this->
sm_u£r
 =ğ'' 
AND
 $this->
sm_·ss
 =ğ''è? 
FALSE
 : 
TRUE
;

131 
$this
->
_§ã_mode
 = ((
boŞ—n
)@
	`ši_g‘
("§ã_mode"è==ğ
FALSE
è? FALSE : 
TRUE
;

133  
$this
;

134 
	}
}

144 
public
 
funùiÚ
 
	$ş—r
(
$ş—r_©chm’ts
 = 
FALSE
)

146 
$this
->
_subjeù
 = "";

147 
$this
->
_body
 = "";

148 
$this
->
_fš®body
 = "";

149 
$this
->
_h—d”_¡r
 = "";

150 
$this
->
_»¶yto_æag
 = 
FALSE
;

151 
$this
->
_»c›Ás
 = 
	`¬¿y
();

152 
$this
->
_cc_¬¿y
 = 
	`¬¿y
();

153 
$this
->
_bcc_¬¿y
 = 
	`¬¿y
();

154 
$this
->
_h—d”s
 = 
	`¬¿y
();

155 
$this
->
_debug_msg
 = 
	`¬¿y
();

157 
$this
->
	`_£t_h—d”
('U£r-Ag’t', $this->
u£¿g’t
);

158 
$this
->
	`_£t_h—d”
('D©e', $this->
	`_£t_d©e
());

160 ià(
$ş—r_©chm’ts
 !=ğ
FALSE
)

162 
$this
->
_©ch_Çme
 = 
	`¬¿y
();

163 
$this
->
_©ch_ty³
 = 
	`¬¿y
();

164 
$this
->
_©ch_di¥
 = 
	`¬¿y
();

167  
$this
;

168 
	}
}

180 
public
 
funùiÚ
 
äom
(
$äom
, 
$Çme
 = '')

182 ià(
´eg_m©ch
Ğ'/\<(.*)\>/', 
$äom
, 
$m©ch
))

184 
$äom
 = 
$m©ch
['1'];

187 ià(
	g$this
->
	gv®id©e
)

189 
	g$this
->
v®id©e_ema
(
$this
->
_¡r_to_¬¿y
(
$äom
));

193 ià(
	g$Çme
 != '')

196 iàĞ! 
´eg_m©ch
('/[\200-\377]/', 
$Çme
))

199 
$Çme
 = '"'.
addc¦ashes
($name, "\0..\37\177'\"\\").'"';

203 
	g$Çme
 = 
$this
->
_´•_q_’codšg
(
$Çme
, 
TRUE
);

207 
	g$this
->
_£t_h—d”
('From', 
$Çme
.' <'.
$äom
.'>');

208 
	g$this
->
_£t_h—d”
('R‘uº-P©h', '<'.
$äom
.'>');

210  
	g$this
;

223 
public
 
funùiÚ
 
»¶y_to
(
$»¶yto
, 
$Çme
 = '')

225 ià(
´eg_m©ch
Ğ'/\<(.*)\>/', 
$»¶yto
, 
$m©ch
))

227 
$»¶yto
 = 
$m©ch
['1'];

230 ià(
	g$this
->
	gv®id©e
)

232 
	g$this
->
v®id©e_ema
(
$this
->
_¡r_to_¬¿y
(
$»¶yto
));

235 ià(
	g$Çme
 == '')

237 
$Çme
 = 
$»¶yto
;

240 ià(
¡ºcmp
(
$Çme
, '"', 1) != 0)

242 
$Çme
 = '"'.$name.'"';

245 
	g$this
->
_£t_h—d”
('R•ly-To', 
$Çme
.' <'.
$»¶yto
.'>');

246 
	g$this
->
	g_»¶yto_æag
 = 
TRUE
;

248  
	g$this
;

260 
public
 
funùiÚ
 
	$to
(
$to
)

262 
$to
 = 
$this
->
	`_¡r_to_¬¿y
($to);

263 
$to
 = 
$this
->
	`ş—n_ema
($to);

265 ià(
$this
->
v®id©e
)

267 
$this
->
	`v®id©e_ema
(
$to
);

270 ià(
$this
->
	`_g‘_´ÙocŞ
() != 'mail')

272 
$this
->
	`_£t_h—d”
('To', 
	`im¶ode
(", ", 
$to
));

275 
$this
->
	`_g‘_´ÙocŞ
())

278 
$this
->
_»c›Ás
 = 
$to
;

282 
$this
->
_»c›Ás
 = 
	`im¶ode
(", ", 
$to
);

286  
$this
;

287 
	}
}

298 
public
 
funùiÚ
 
	$cc
(
$cc
)

300 
$cc
 = 
$this
->
	`_¡r_to_¬¿y
($cc);

301 
$cc
 = 
$this
->
	`ş—n_ema
($cc);

303 ià(
$this
->
v®id©e
)

305 
$this
->
	`v®id©e_ema
(
$cc
);

308 
$this
->
	`_£t_h—d”
('Cc', 
	`im¶ode
(", ", 
$cc
));

310 ià(
$this
->
	`_g‘_´ÙocŞ
() == "smtp")

312 
$this
->
_cc_¬¿y
 = 
$cc
;

315  
$this
;

316 
	}
}

328 
public
 
funùiÚ
 
bcc
(
$bcc
, 
$lim™
 = '')

330 ià(
$lim™
 !ğ'' && 
is_num”ic
($limit))

332 
$this
->
bcc_b©ch_mode
 = 
TRUE
;

333 
	g$this
->
	gbcc_b©ch_size
 = 
$lim™
;

336 
	g$bcc
 = 
$this
->
_¡r_to_¬¿y
(
$bcc
);

337 
	g$bcc
 = 
$this
->
ş—n_ema
(
$bcc
);

339 ià(
	g$this
->
	gv®id©e
)

341 
	g$this
->
v®id©e_ema
(
$bcc
);

344 ià((
	g$this
->
_g‘_´ÙocŞ
(è=ğ"sm"è
OR
 (
$this
->
bcc_b©ch_mode
 && 
couÁ
(
$bcc
è> $this->
bcc_b©ch_size
))

346 
$this
->
_bcc_¬¿y
 = 
$bcc
;

350 
	g$this
->
_£t_h—d”
('Bcc', 
im¶ode
(", ", 
$bcc
));

353  
	g$this
;

365 
public
 
funùiÚ
 
	$subjeù
(
$subjeù
)

367 
$subjeù
 = 
$this
->
	`_´•_q_’codšg
($subject);

368 
$this
->
	`_£t_h—d”
('Subjeù', 
$subjeù
);

369  
$this
;

370 
	}
}

381 
public
 
funùiÚ
 
	$mes§ge
(
$body
)

383 
$this
->
_body
 = 
	`¹rim
(
	`¡r_»¶aû
("\r", "", 
$body
));

391 iàĞ! 
	`is_php
('5.4'è&& 
	`g‘_magic_quÙes_gpc
())

393 
$this
->
_body
 = 
	`¡r¦ashes
($this->_body);

396  
$this
;

397 
	}
}

408 
public
 
funùiÚ
 
©ch
(
$f’ame
, 
$di¥os™iÚ
 = 'attachment')

410 
$this
->
_©ch_Çme
[] = 
$f’ame
;

411 
	g$this
->
	g_©ch_ty³
[] = 
$this
->
_mime_ty³s
(
·thšfo
(
$f’ame
, 
PATHINFO_EXTENSION
));

412 
	g$this
->
	g_©ch_di¥
[] = 
$di¥os™iÚ
;

413  
	g$this
;

426 
´Ùeùed
 
funùiÚ
 
	$_£t_h—d”
(
$h—d”
, 
$v®ue
)

428 
$this
->
_h—d”s
[
$h—d”
] = 
$v®ue
;

429 
	}
}

440 
´Ùeùed
 
funùiÚ
 
	$_¡r_to_¬¿y
(
$ema
)

442 iàĞ! 
	`is_¬¿y
(
$ema
))

444 ià(
	`¡½os
(
$ema
, ','è!=ğ
FALSE
)

446 
$ema
 = 
	`´eg_¥l™
('/[\s,]/', $ema, -1, 
PREG_SPLIT_NO_EMPTY
);

450 
$ema
 = 
	`Œim
($email);

451 
	`£‰y³
(
$ema
, "array");

454  
$ema
;

455 
	}
}

466 
public
 
funùiÚ
 
£t_®t_mes§ge
(
$¡r
 = '')

468 
$this
->
®t_mes§ge
 = 
$¡r
;

469  
	g$this
;

481 
public
 
funùiÚ
 
£t_maty³
(
$ty³
 = 'text')

483 
$this
->
maty³
 = (
$ty³
 == 'html') ? 'html' : 'text';

484  
	g$this
;

496 
public
 
funùiÚ
 
	$£t_wÜdw¿p
(
$wÜdw¿p
 = 
TRUE
)

498 
$this
->
wÜdw¿p
 = (
$wÜdw¿p
 ==ğ
FALSE
è? FALSE : 
TRUE
;

499  
$this
;

500 
	}
}

511 
public
 
funùiÚ
 
£t_´ÙocŞ
(
$´ÙocŞ
 = 'mail')

513 
$this
->
´ÙocŞ
 = ( ! 
š_¬¿y
(
$´ÙocŞ
, $this->
_´ÙocŞs
, 
TRUE
)è? 'ma' : 
¡¹Şow”
($protocol);

514  
	g$this
;

526 
public
 
funùiÚ
 
	$£t_´iÜ™y
(
$n
 = 3)

528 iàĞ! 
	`is_num”ic
(
$n
))

530 
$this
->
´iÜ™y
 = 3;

534 ià(
$n
 < 1 
OR
 $n > 5)

536 
$this
->
´iÜ™y
 = 3;

540 
$this
->
´iÜ™y
 = 
$n
;

541  
$this
;

542 
	}
}

553 
public
 
funùiÚ
 
£t_Ãwlše
(
$Ãwlše
 = "\n")

555 ià(
$Ãwlše
 !ğ"\n" 
AND
 $newline != "\r\n" AND $newline != "\r")

557 
$this
->
Ãwlše
 = "\n";

561 
	g$this
->
	gÃwlše
 = 
$Ãwlše
;

563  
	g$this
;

575 
public
 
funùiÚ
 
£t_ülf
(
$ülf
 = "\n")

577 ià(
$ülf
 !ğ"\n" 
AND
 $crlf != "\r\n" AND $crlf != "\r")

579 
$this
->
ülf
 = "\n";

583 
	g$this
->
	gülf
 = 
$ülf
;

585  
	g$this
;

596 
´Ùeùed
 
funùiÚ
 
	$_£t_bound¬›s
()

598 
$this
->
_®t_bound¬y
 = "B_ALT_".
	`uniqid
('');

599 
$this
->
_©c_bound¬y
 = "B_ATC_".
	`uniqid
('');

600 
	}
}

610 
´Ùeùed
 
funùiÚ
 
	$_g‘_mes§ge_id
()

612 
$äom
 = 
$this
->
_h—d”s
['Return-Path'];

613 
$äom
 = 
	`¡r_»¶aû
(">", "", $from);

614 
$äom
 = 
	`¡r_»¶aû
("<", "", $from);

616  "<".
	`uniqid
('').
	`¡r¡r
(
$äom
, '@').">";

617 
	}
}

628 
´Ùeùed
 
funùiÚ
 
	$_g‘_´ÙocŞ
(
$»tuº
 = 
TRUE
)

630 
$this
->
´ÙocŞ
 = 
	`¡¹Şow”
($this->protocol);

631 
$this
->
´ÙocŞ
 = ( ! 
	`š_¬¿y
($this->´ÙocŞ, $this->
_´ÙocŞs
, 
TRUE
)) ? 'mail' : $this->protocol;

633 ià(
$»tuº
 =ğ
TRUE
)

635  
$this
->
´ÙocŞ
;

637 
	}
}

648 
´Ùeùed
 
funùiÚ
 
	$_g‘_’codšg
(
$»tuº
 = 
TRUE
)

650 
$this
->
_’codšg
 = ( ! 
	`š_¬¿y
($this->_’codšg, $this->
_b™_d•ths
)) ? '8bit' : $this->_encoding;

652 
	`fÜ—ch
 (
$this
->
_ba£_ch¬£ts
 
as
 
$ch¬£t
)

654 ià(
	`¡ºcmp
(
$ch¬£t
, 
$this
->
ch¬£t
, 
	`¡¾’
($charset)) == 0)

656 
$this
->
_’codšg
 = '7bit';

660 ià(
$»tuº
 =ğ
TRUE
)

662  
$this
->
_’codšg
;

664 
	}
}

674 
´Ùeùed
 
funùiÚ
 
	$_g‘_cÚ‹Á_ty³
()

676 ià(
$this
->
maty³
 =ğ'html' && 
	`couÁ
($this->
_©ch_Çme
) == 0)

680 
	`–£if
 (
$this
->
maty³
 =ğ'html' && 
	`couÁ
($this->
_©ch_Çme
) > 0)

684 
	`–£if
 (
$this
->
maty³
 =ğ'‹xt' && 
	`couÁ
($this->
_©ch_Çme
) > 0)

692 
	}
}

702 
´Ùeùed
 
funùiÚ
 
	$_£t_d©e
()

704 
$timezÚe
 = 
	`d©e
("Z");

705 
$İ”©Ü
 = (
	`¡ºcmp
(
$timezÚe
, '-', 1) == 0) ? '-' : '+';

706 
$timezÚe
 = 
	`abs
($timezone);

707 
$timezÚe
 = 
	`æoÜ
($timezone/3600) * 100 + ($timezone % 3600 ) / 60;

709  
	`¥rštf
("% %s%04d", 
	`d©e
("D, j M Y H:i:s"), 
$İ”©Ü
, 
$timezÚe
);

710 
	}
}

720 
´Ùeùed
 
funùiÚ
 
	$_g‘_mime_mes§ge
()

722  "Thi i ¨muÉi-·¹ mes§gš MIME fÜm©.".
$this
->
Ãwlše
."Yourƒmail‡pplication may‚ot supporthis format.";

723 
	}
}

734 
public
 
funùiÚ
 
	$v®id©e_ema
(
$ema
)

736 iàĞ! 
	`is_¬¿y
(
$ema
))

738 
$this
->
	`_£t_”rÜ_mes§ge
('lang:email_must_be_array');

739  
FALSE
;

742 
	`fÜ—ch
 (
$ema
 
as
 
$v®
)

744 iàĞ! 
$this
->
	`v®id_ema
(
$v®
))

746 
$this
->
	`_£t_”rÜ_mes§ge
('Ïng:ema_šv®id_add»ss', 
$v®
);

747  
FALSE
;

751  
TRUE
;

752 
	}
}

763 
public
 
funùiÚ
 
	$v®id_ema
(
$add»ss
)

765  ( ! 
	`´eg_m©ch
("/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/ix", 
$add»ss
)è? 
FALSE
 : 
TRUE
;

766 
	}
}

777 
public
 
funùiÚ
 
	$ş—n_ema
(
$ema
)

779 iàĞ! 
	`is_¬¿y
(
$ema
))

781 ià(
	`´eg_m©ch
('/\<(.*)\>/', 
$ema
, 
$m©ch
))

783  
$m©ch
['1'];

787  
$ema
;

791 
$ş—n_ema
 = 
	`¬¿y
();

793 
	`fÜ—ch
 (
$ema
 
as
 
$addy
)

795 ià(
	`´eg_m©ch
Ğ'/\<(.*)\>/', 
$addy
, 
$m©ch
))

797 
$ş—n_ema
[] = 
$m©ch
['1'];

801 
$ş—n_ema
[] = 
$addy
;

805  
$ş—n_ema
;

806 
	}
}

821 
´Ùeùed
 
funùiÚ
 
	$_g‘_®t_mes§ge
()

823 ià(
$this
->
®t_mes§ge
 != "")

825  
$this
->
	`wÜd_w¿p
($this->
®t_mes§ge
, '76');

828 ià(
	`´eg_m©ch
('/\<body.*?\>(.*)\<\/body\>/si', 
$this
->
_body
, 
$m©ch
))

830 
$body
 = 
$m©ch
['1'];

834 
$body
 = 
$this
->
_body
;

837 
$body
 = 
	`Œim
(
	`¡r_gs
($body));

838 
$body
 = 
	`´eg_»¶aû
( '#<!--(.*)--\>#', "", $body);

839 
$body
 = 
	`¡r_»¶aû
("\t", "", $body);

841 
$i
 = 20; $i >= 3; $i--)

843 
$n
 = "";

845 
$x
 = 1; $x <ğ
$i
; $x ++)

847 
$n
 .= "\n";

850 
$body
 = 
	`¡r_»¶aû
(
$n
, "\n\n", $body);

853  
$this
->
	`wÜd_w¿p
(
$body
, '76');

854 
	}
}

866 
public
 
funùiÚ
 
wÜd_w¿p
(
$¡r
, 
$ch¬lim
 = '')

869 ià(
$ch¬lim
 == '')

871 
$ch¬lim
 = (
$this
->
w¿pch¬s
 == "") ? "76" : $this->wrapchars;

875 
	g$¡r
 = 
´eg_»¶aû
("| +|", " ", 
$¡r
);

878 ià(
¡½os
(
$¡r
, "\r"è!=ğ
FALSE
)

880 
$¡r
 = 
¡r_»¶aû
(
¬¿y
("\r\n", "\r"), "\n", $str);

885 
	g$unw¿p
 = 
¬¿y
();

886 ià(
´eg_m©ch_®l
("|(\{unw¿p\}.+?\{/unw¿p\})|s", 
$¡r
, 
$m©ches
))

888 
	g$i
 = 0; $˜< 
couÁ
(
$m©ches
['0']); $i++)

890 
	g$unw¿p
[] = 
$m©ches
['1'][
$i
];

891 
	g$¡r
 = 
¡r_»¶aû
(
$m©ches
['1'][
$i
], "{{unw¿µed".$i."}}", 
$¡r
);

898 
	g$¡r
 = 
wÜdw¿p
(
$¡r
, 
$ch¬lim
, "\n", 
FALSE
);

901 
	g$ouut
 = "";

902 
fÜ—ch
 (
ex¶ode
("\n", 
$¡r
è
as
 
$lše
)

906 ià(
¡¾’
(
$lše
è<ğ
$ch¬lim
)

908 
$ouut
 .ğ
$lše
.
$this
->
Ãwlše
;

912 
	g$‹mp
 = '';

913 (
¡¾’
(
$lše
)è> 
	g$ch¬lim
)

916 ià(
´eg_m©ch
("!\[u¾.+\]|://|wwww.!", 
$lše
))

922 
	g$‹mp
 .ğ
sub¡r
(
$lše
, 0, 
$ch¬lim
-1);

923 
	g$lše
 = 
sub¡r
(
$lše
, 
$ch¬lim
-1);

928 ià(
	g$‹mp
 != '')

930 
$ouut
 .ğ
$‹mp
.
$this
->
Ãwlše
.
$lše
;

934 
	g$ouut
 .ğ
$lše
;

937 
	g$ouut
 .ğ
$this
->
Ãwlše
;

941 ià(
couÁ
(
$unw¿p
) > 0)

943 
fÜ—ch
 (
$unw¿p
 
as
 
$key
 => 
$v®
)

945 
$ouut
 = 
¡r_»¶aû
("{{unw¿µed".
$key
."}}", 
$v®
, $output);

949  
	g$ouut
;

961 
´Ùeùed
 
funùiÚ
 
	$_bud_h—d”s
()

963 
$this
->
	`_£t_h—d”
('X-S’d”', $this->
	`ş—n_ema
($this->
_h—d”s
['From']));

964 
$this
->
	`_£t_h—d”
('X-Ma”', $this->
u£¿g’t
);

965 
$this
->
	`_£t_h—d”
('X-PriÜ™y', $this->
_´iÜ™›s
[$this->
´iÜ™y
 - 1]);

966 
$this
->
	`_£t_h—d”
('Mes§ge-ID', $this->
	`_g‘_mes§ge_id
());

967 
$this
->
	`_£t_h—d”
('Mime-Version', '1.0');

968 
	}
}

978 
´Ùeùed
 
funùiÚ
 
	$_wr™e_h—d”s
()

980 ià(
$this
->
´ÙocŞ
 == 'mail')

982 
$this
->
_subjeù
 = $this->
_h—d”s
['Subject'];

983 
	`un£t
(
$this
->
_h—d”s
['Subject']);

986 
	`»£t
(
$this
->
_h—d”s
);

987 
$this
->
_h—d”_¡r
 = "";

989 
	`fÜ—ch
 (
$this
->
_h—d”s
 
as
 
$key
 => 
$v®
)

991 
$v®
 = 
	`Œim
($val);

993 ià(
$v®
 != "")

995 
$this
->
_h—d”_¡r
 .ğ
$key
.": ".
$v®
.$this->
Ãwlše
;

999 ià(
$this
->
	`_g‘_´ÙocŞ
() == 'mail')

1001 
$this
->
_h—d”_¡r
 = 
	`¹rim
($this->_header_str);

1003 
	}
}

1013 
´Ùeùed
 
funùiÚ
 
	$_bud_mes§ge
()

1015 ià(
$this
->
wÜdw¿p
 ==ğ
TRUE
 
AND
 $this->
maty³
 != 'html')

1017 
$this
->
_body
 = $this->
	`wÜd_w¿p
($this->_body);

1020 
$this
->
	`_£t_bound¬›s
();

1021 
$this
->
	`_wr™e_h—d”s
();

1023 
$hdr
 = (
$this
->
	`_g‘_´ÙocŞ
(è=ğ'ma'è? $this->
Ãwlše
 : '';

1024 
$body
 = '';

1026 
$this
->
	`_g‘_cÚ‹Á_ty³
())

1030 
$hdr
 .ğ"CÚ‹Á-Ty³:ext/¶aš; ch¬£t=" . 
$this
->
ch¬£t
 . $this->
Ãwlše
;

1031 
$hdr
 .ğ"CÚ‹Á-T¿nsãr-Encodšg: " . 
$this
->
	`_g‘_’codšg
();

1033 ià(
$this
->
	`_g‘_´ÙocŞ
() == 'mail')

1035 
$this
->
_h—d”_¡r
 .ğ
$hdr
;

1036 
$this
->
_fš®body
 = $this->
_body
;

1040 
$this
->
_fš®body
 = 
$hdr
 . $this->
Ãwlše
 . $this->Ãwlš. $this->
_body
;

1048 ià(
$this
->
£nd_muÉ¬t
 ==ğ
FALSE
)

1050 
$hdr
 .ğ"CÚ‹Á-Ty³:ext/html; ch¬£t=" . 
$this
->
ch¬£t
 . $this->
Ãwlše
;

1051 
$hdr
 .= "Content-Transfer-Encoding: quoted-printable";

1055 
$hdr
 .ğ"CÚ‹Á-Ty³: muÉ¬t/®‹º©ive; bound¬y=\"" . 
$this
->
_®t_bound¬y
 . "\"" . $this->
Ãwlše
 . $this->newline;

1057 
$body
 .ğ
$this
->
	`_g‘_mime_mes§ge
(è. $this->
Ãwlše
 . $this->newline;

1058 
$body
 .ğ"--" . 
$this
->
_®t_bound¬y
 . $this->
Ãwlše
;

1060 
$body
 .ğ"CÚ‹Á-Ty³:ext/¶aš; ch¬£t=" . 
$this
->
ch¬£t
 . $this->
Ãwlše
;

1061 
$body
 .ğ"CÚ‹Á-T¿nsãr-Encodšg: " . 
$this
->
	`_g‘_’codšg
(è. $this->
Ãwlše
 . $this->newline;

1062 
$body
 .ğ
$this
->
	`_g‘_®t_mes§ge
(è. $this->
Ãwlše
 . $this->Ãwlš. "--" . $this->
_®t_bound¬y
 . $this->newline;

1064 
$body
 .ğ"CÚ‹Á-Ty³:ext/html; ch¬£t=" . 
$this
->
ch¬£t
 . $this->
Ãwlše
;

1065 
$body
 .ğ"CÚ‹Á-T¿nsãr-Encodšg: quÙed-´šbË" . 
$this
->
Ãwlše
 . $this->newline;

1068 
$this
->
_fš®body
 = 
$body
 . $this->
	`_´•_quÙed_´šbË
($this->
_body
è. $this->
Ãwlše
 . $this->newline;

1071 ià(
$this
->
	`_g‘_´ÙocŞ
() == 'mail')

1073 
$this
->
_h—d”_¡r
 .ğ
$hdr
;

1077 
$this
->
_fš®body
 = 
$hdr
 . $this->_finalbody;

1081 ià(
$this
->
£nd_muÉ¬t
 !=ğ
FALSE
)

1083 
$this
->
_fš®body
 .ğ"--" . $this->
_®t_bound¬y
 . "--";

1091 
$hdr
 .ğ"CÚ‹Á-Ty³: muÉ¬t/".
$this
->
muÉ¬t
."; bound¬y=\"" . $this->
_©c_bound¬y
."\"" . $this->
Ãwlše
 . $this->newline;

1093 ià(
$this
->
	`_g‘_´ÙocŞ
() == 'mail')

1095 
$this
->
_h—d”_¡r
 .ğ
$hdr
;

1098 
$body
 .ğ
$this
->
	`_g‘_mime_mes§ge
(è. $this->
Ãwlše
 . $this->newline;

1099 
$body
 .ğ"--" . 
$this
->
_©c_bound¬y
 . $this->
Ãwlše
;

1101 
$body
 .ğ"CÚ‹Á-Ty³:ext/¶aš; ch¬£t=" . 
$this
->
ch¬£t
 . $this->
Ãwlše
;

1102 
$body
 .ğ"CÚ‹Á-T¿nsãr-Encodšg: " . 
$this
->
	`_g‘_’codšg
(è. $this->
Ãwlše
 . $this->newline;

1104 
$body
 .ğ
$this
->
_body
 . $this->
Ãwlše
 . $this->newline;

1109 
$hdr
 .ğ"CÚ‹Á-Ty³: muÉ¬t/".
$this
->
muÉ¬t
."; bound¬y=\"" . $this->
_©c_bound¬y
."\"" . $this->
Ãwlše
 . $this->newline;

1111 ià(
$this
->
	`_g‘_´ÙocŞ
() == 'mail')

1113 
$this
->
_h—d”_¡r
 .ğ
$hdr
;

1116 
$body
 .ğ
$this
->
	`_g‘_mime_mes§ge
(è. $this->
Ãwlše
 . $this->newline;

1117 
$body
 .ğ"--" . 
$this
->
_©c_bound¬y
 . $this->
Ãwlše
;

1119 
$body
 .ğ"CÚ‹Á-Ty³: muÉ¬t/®‹º©ive; bound¬y=\"" . 
$this
->
_®t_bound¬y
 . "\"" . $this->
Ãwlše
 .$this->newline;

1120 
$body
 .ğ"--" . 
$this
->
_®t_bound¬y
 . $this->
Ãwlše
;

1122 
$body
 .ğ"CÚ‹Á-Ty³:ext/¶aš; ch¬£t=" . 
$this
->
ch¬£t
 . $this->
Ãwlše
;

1123 
$body
 .ğ"CÚ‹Á-T¿nsãr-Encodšg: " . 
$this
->
	`_g‘_’codšg
(è. $this->
Ãwlše
 . $this->newline;

1124 
$body
 .ğ
$this
->
	`_g‘_®t_mes§ge
(è. $this->
Ãwlše
 . $this->Ãwlš. "--" . $this->
_®t_bound¬y
 . $this->newline;

1126 
$body
 .ğ"CÚ‹Á-Ty³:ext/html; ch¬£t=" . 
$this
->
ch¬£t
 . $this->
Ãwlše
;

1127 
$body
 .ğ"CÚ‹Á-T¿nsãr-Encodšg: quÙed-´šbË" . 
$this
->
Ãwlše
 . $this->newline;

1129 
$body
 .ğ
$this
->
	`_´•_quÙed_´šbË
($this->
_body
è. $this->
Ãwlše
 . $this->newline;

1130 
$body
 .ğ"--" . 
$this
->
_®t_bound¬y
 . "--" . $this->
Ãwlše
 . $this->newline;

1135 
$©chm’t
 = 
	`¬¿y
();

1137 
$z
 = 0;

1139 
$i
=0; $˜< 
	`couÁ
(
$this
->
_©ch_Çme
); $i++)

1141 
$f’ame
 = 
$this
->
_©ch_Çme
[
$i
];

1142 
$ba£Çme
 = 
	`ba£Çme
(
$f’ame
);

1143 
$ùy³
 = 
$this
->
_©ch_ty³
[
$i
];

1145 iàĞ! 
	`fe_exi¡s
(
$f’ame
))

1147 
$this
->
	`_£t_”rÜ_mes§ge
('Ïng:ema_©chm’t_missšg', 
$f’ame
);

1148  
FALSE
;

1151 
$h
 = "--".
$this
->
_©c_bound¬y
.$this->
Ãwlše
;

1152 
$h
 .ğ"CÚ‹Á-ty³: ".
$ùy³
."; ";

1153 
$h
 .ğ"Çme=\"".
$ba£Çme
."\"".
$this
->
Ãwlše
;

1154 
$h
 .ğ"CÚ‹Á-Di¥os™iÚ: ".
$this
->
_©ch_di¥
[
$i
].";".$this->
Ãwlše
;

1155 
$h
 .ğ"CÚ‹Á-T¿nsãr-Encodšg: ba£64".
$this
->
Ãwlše
;

1157 
$©chm’t
[
$z
++] = 
$h
;

1158 
$fe
 = 
	`fesize
(
$f’ame
) +1;

1160 iàĞ! 
$å
 = 
	`fİ’
(
$f’ame
, 
FOPEN_READ
))

1162 
$this
->
	`_£t_”rÜ_mes§ge
('Ïng:ema_©chm’t_uÄ—dabË', 
$f’ame
);

1163  
FALSE
;

1166 
$©chm’t
[
$z
++] = 
	`chunk_¥l™
(
	`ba£64_’code
(
	`ä—d
(
$å
, 
$fe
)));

1167 
	`fşo£
(
$å
);

1170 
$body
 .ğ
	`im¶ode
(
$this
->
Ãwlše
, 
$©chm’t
).$this->Ãwlše."--".$this->
_©c_bound¬y
."--";

1173 ià(
$this
->
	`_g‘_´ÙocŞ
() == 'mail')

1175 
$this
->
_fš®body
 = 
$body
;

1179 
$this
->
_fš®body
 = 
$hdr
 . 
$body
;

1183 
	}
}

1198 
´Ùeùed
 
funùiÚ
 
_´•_quÙed_´šbË
(
$¡r
, 
$ch¬lim
 = '')

1203 ià(
$ch¬lim
 =ğ'' 
OR
 $charlim > '76')

1205 
$ch¬lim
 = '76';

1209 
	g$¡r
 = 
´eg_»¶aû
("| +|", " ", 
$¡r
);

1212 
	g$¡r
 = 
´eg_»¶aû
('/\x00+/', '', 
$¡r
);

1215 ià(
¡½os
(
$¡r
, "\r"è!=ğ
FALSE
)

1217 
$¡r
 = 
¡r_»¶aû
(
¬¿y
("\r\n", "\r"), "\n", $str);

1222 
	g$¡r
 = 
¡r_»¶aû
(
¬¿y
('{unw¿p}', '{/unw¿p}'), '', 
$¡r
);

1225 
	g$lšes
 = 
ex¶ode
("\n", 
$¡r
);

1227 
	g$esÿ³
 = '=';

1228 
	g$ouut
 = '';

1230 
fÜ—ch
 (
$lšes
 
as
 
$lše
)

1232 
	g$Ëngth
 = 
¡¾’
(
$lše
);

1233 
	g$‹mp
 = '';

1238 
	g$i
 = 0; $˜< 
	g$Ëngth
; $i++)

1241 
	g$ch¬
 = 
sub¡r
(
$lše
, 
$i
, 1);

1242 
	g$ascii
 = 
Üd
(
$ch¬
);

1245 ià(
	g$i
 =ğ(
$Ëngth
 - 1))

1247 
$ch¬
 = (
$ascii
 =ğ'32' 
OR
 $asci˜=ğ'9'è? 
$esÿ³
.
¥rštf
('%02s', 
dechex
($ascii)) : $char;

1251 ià(
	g$ascii
 == '61')

1253 
$ch¬
 = 
$esÿ³
.
¡¹ouµ”
(
¥rštf
('%02s', 
dechex
(
$ascii
)));

1258 ià((
¡¾’
(
$‹mp
è+ sŒËn(
$ch¬
)è>ğ
$ch¬lim
)

1260 
$ouut
 .ğ
$‹mp
.
$esÿ³
.
$this
->
ülf
;

1261 
	g$‹mp
 = '';

1265 
	g$‹mp
 .ğ
$ch¬
;

1269 
	g$ouut
 .ğ
$‹mp
.
$this
->
ülf
;

1273 
	g$ouut
 = 
sub¡r
(
$ouut
, 0, 
¡¾’
(
$this
->
ülf
) * -1);

1275  
	g$ouut
;

1291 
´Ùeùed
 
funùiÚ
 
	$_´•_q_’codšg
(
$¡r
, 
$äom
 = 
FALSE
)

1293 
$¡r
 = 
	`¡r_»¶aû
(
	`¬¿y
("\r", "\n"),‡rray('', ''), $str);

1297 
$lim™
 = 75 - 7 - 
	`¡¾’
(
$this
->
ch¬£t
);

1300 
$cÚv”t
 = 
	`¬¿y
('_', '=', '?');

1302 ià(
$äom
 ==ğ
TRUE
)

1304 
$cÚv”t
[] = ',';

1305 
$cÚv”t
[] = ';';

1308 
$ouut
 = '';

1309 
$‹mp
 = '';

1311 
$i
 = 0, 
$Ëngth
 = 
	`¡¾’
(
$¡r
); $i < $length; $i++)

1314 
$ch¬
 = 
	`sub¡r
(
$¡r
, 
$i
, 1);

1315 
$ascii
 = 
	`Üd
(
$ch¬
);

1318 ià(
$ascii
 < 32 
OR
 $asci˜> 126 OR 
	`š_¬¿y
(
$ch¬
, 
$cÚv”t
))

1320 
$ch¬
 = '='.
	`dechex
(
$ascii
);

1324 ià(
$ascii
 == 32)

1326 
$ch¬
 = '_';

1331 ià((
	`¡¾’
(
$‹mp
è+ sŒËn(
$ch¬
)è>ğ
$lim™
)

1333 
$ouut
 .ğ
$‹mp
.
$this
->
ülf
;

1334 
$‹mp
 = '';

1338 
$‹mp
 .ğ
$ch¬
;

1341 
$¡r
 = 
$ouut
.
$‹mp
;

1345 
$¡r
 = 
	`Œim
(
	`´eg_»¶aû
('/^(.*)$/m', ' =?'.
$this
->
ch¬£t
.'?Q?$1?=', $str));

1347  
$¡r
;

1348 
	}
}

1358 
public
 
funùiÚ
 
	$£nd
()

1360 ià(
$this
->
_»¶yto_æag
 =ğ
FALSE
)

1362 
$this
->
	`»¶y_to
($this->
_h—d”s
['From']);

1365 ià(Ğ! 
	`is£t
(
$this
->
_»c›Ás
è
AND
 ! is£t($this->
_h—d”s
['To'])) AND

1366 Ğ! 
	`is£t
(
$this
->
_bcc_¬¿y
è
AND
 ! is£t($this->
_h—d”s
['Bcc'])) AND

1367 Ğ! 
	`is£t
(
$this
->
_h—d”s
['Cc'])))

1369 
$this
->
	`_£t_”rÜ_mes§ge
('lang:email_no_recipients');

1370  
FALSE
;

1373 
$this
->
	`_bud_h—d”s
();

1375 ià(
$this
->
bcc_b©ch_mode
 
AND
 
	`couÁ
($this->
_bcc_¬¿y
) > 0)

1377 ià(
	`couÁ
(
$this
->
_bcc_¬¿y
è> $this->
bcc_b©ch_size
)

1378  
$this
->
	`b©ch_bcc_£nd
();

1381 
$this
->
	`_bud_mes§ge
();

1383 iàĞ! 
$this
->
	`_¥oŞ_ema
())

1385  
FALSE
;

1389  
TRUE
;

1391 
	}
}

1401 
public
 
funùiÚ
 
	$b©ch_bcc_£nd
()

1403 
$æßt
 = 
$this
->
bcc_b©ch_size
 -1;

1405 
$£t
 = "";

1407 
$chunk
 = 
	`¬¿y
();

1409 
$i
 = 0; $˜< 
	`couÁ
(
$this
->
_bcc_¬¿y
); $i++)

1411 ià(
	`is£t
(
$this
->
_bcc_¬¿y
[
$i
]))

1413 
$£t
 .ğ", ".
$this
->
_bcc_¬¿y
[
$i
];

1416 ià(
$i
 =ğ
$æßt
)

1418 
$chunk
[] = 
	`sub¡r
(
$£t
, 1);

1419 
$æßt
 = $æßˆ+ 
$this
->
bcc_b©ch_size
;

1420 
$£t
 = "";

1423 ià(
$i
 =ğ
	`couÁ
(
$this
->
_bcc_¬¿y
)-1)

1425 
$chunk
[] = 
	`sub¡r
(
$£t
, 1);

1429 
$i
 = 0; $˜< 
	`couÁ
(
$chunk
); $i++)

1431 
	`un£t
(
$this
->
_h—d”s
['Bcc']);

1432 
	`un£t
(
$bcc
);

1434 
$bcc
 = 
$this
->
	`_¡r_to_¬¿y
(
$chunk
[
$i
]);

1435 
$bcc
 = 
$this
->
	`ş—n_ema
($bcc);

1437 ià(
$this
->
´ÙocŞ
 != 'smtp')

1439 
$this
->
	`_£t_h—d”
('Bcc', 
	`im¶ode
(", ", 
$bcc
));

1443 
$this
->
_bcc_¬¿y
 = 
$bcc
;

1446 
$this
->
	`_bud_mes§ge
();

1447 
$this
->
	`_¥oŞ_ema
();

1449 
	}
}

1459 
´Ùeùed
 
funùiÚ
 
	$_unw¿p_¥ecŸls
()

1461 
$this
->
_fš®body
 = 
	`´eg_»¶aû_ÿÎback
("/\{unw¿p\}(.*?)\{\/unw¿p\}/si", 
	`¬¿y
($this, '_remove_nl_callback'), $this->_finalbody);

1462 
	}
}

1472 
´Ùeùed
 
funùiÚ
 
	$_»move_Æ_ÿÎback
(
$m©ches
)

1474 ià(
	`¡½os
(
$m©ches
[1], "\r"è!=ğ
FALSE
 
OR
 strpos($matches[1], "\n") !== FALSE)

1476 
$m©ches
[1] = 
	`¡r_»¶aû
(
	`¬¿y
("\r\n", "\r", "\n"), '', $matches[1]);

1479  
$m©ches
[1];

1480 
	}
}

1490 
´Ùeùed
 
funùiÚ
 
	$_¥oŞ_ema
()

1492 
$this
->
	`_unw¿p_¥ecŸls
();

1494 
$this
->
	`_g‘_´ÙocŞ
())

1498 iàĞ! 
$this
->
	`_£nd_w™h_ma
())

1500 
$this
->
	`_£t_”rÜ_mes§ge
('lang:email_send_failure_phpmail');

1501  
FALSE
;

1506 iàĞ! 
$this
->
	`_£nd_w™h_£ndma
())

1508 
$this
->
	`_£t_”rÜ_mes§ge
('lang:email_send_failure_sendmail');

1509  
FALSE
;

1514 iàĞ! 
$this
->
	`_£nd_w™h_sm
())

1516 
$this
->
	`_£t_”rÜ_mes§ge
('lang:email_send_failure_smtp');

1517  
FALSE
;

1523 
$this
->
	`_£t_”rÜ_mes§ge
('Ïng:ema_£Á', $this->
	`_g‘_´ÙocŞ
());

1524  
TRUE
;

1525 
	}
}

1535 
´Ùeùed
 
funùiÚ
 
	$_£nd_w™h_ma
()

1537 ià(
$this
->
_§ã_mode
 =ğ
TRUE
)

1539 iàĞ! 
	`ma
(
$this
->
_»c›Ás
, $this->
_subjeù
, $this->
_fš®body
, $this->
_h—d”_¡r
))

1541  
FALSE
;

1545  
TRUE
;

1553 iàĞ! 
	`ma
(
$this
->
_»c›Ás
, $this->
_subjeù
, $this->
_fš®body
, $this->
_h—d”_¡r
, "-à".$this->
	`ş—n_ema
($this->
_h—d”s
['From'])))

1555  
FALSE
;

1559  
TRUE
;

1562 
	}
}

1572 
´Ùeùed
 
funùiÚ
 
	$_£nd_w™h_£ndma
()

1574 
$å
 = @
	`pİ’
(
$this
->
ma·th
 . " -o˜-à".$this->
	`ş—n_ema
($this->
_h—d”s
['From'])." -t", 'w');

1576 ià(
$å
 ==ğ
FALSE
 
OR
 $å ==ğ
NULL
)

1579  
FALSE
;

1582 
	`åuts
(
$å
, 
$this
->
_h—d”_¡r
);

1583 
	`åuts
(
$å
, 
$this
->
_fš®body
);

1585 
$¡©us
 = 
	`pşo£
(
$å
);

1587 ià(
	`v”siÚ_com·»
(
PHP_VERSION
, '4.2.3') == -1)

1589 
$¡©us
 = $status >> 8 & 0xFF;

1592 ià(
$¡©us
 != 0)

1594 
$this
->
	`_£t_”rÜ_mes§ge
('Ïng:ema_ex™_¡©us', 
$¡©us
);

1595 
$this
->
	`_£t_”rÜ_mes§ge
('lang:email_no_socket');

1596  
FALSE
;

1599  
TRUE
;

1600 
	}
}

1610 
´Ùeùed
 
funùiÚ
 
	$_£nd_w™h_sm
()

1612 ià(
$this
->
sm_ho¡
 == '')

1614 
$this
->
	`_£t_”rÜ_mes§ge
('lang:email_no_hostname');

1615  
FALSE
;

1618 
$this
->
	`_sm_cÚÃù
();

1619 
$this
->
	`_sm_auth’tiÿ‹
();

1621 
$this
->
	`_£nd_commªd
('äom', $this->
	`ş—n_ema
($this->
_h—d”s
['From']));

1623 
	`fÜ—ch
 (
$this
->
_»c›Ás
 
as
 
$v®
)

1625 
$this
->
	`_£nd_commªd
('to', 
$v®
);

1628 ià(
	`couÁ
(
$this
->
_cc_¬¿y
) > 0)

1630 
	`fÜ—ch
 (
$this
->
_cc_¬¿y
 
as
 
$v®
)

1632 ià(
$v®
 != "")

1634 
$this
->
	`_£nd_commªd
('to', 
$v®
);

1639 ià(
	`couÁ
(
$this
->
_bcc_¬¿y
) > 0)

1641 
	`fÜ—ch
 (
$this
->
_bcc_¬¿y
 
as
 
$v®
)

1643 ià(
$v®
 != "")

1645 
$this
->
	`_£nd_commªd
('to', 
$v®
);

1650 
$this
->
	`_£nd_commªd
('data');

1653 
$this
->
	`_£nd_d©a
($this->
_h—d”_¡r
 . 
	`´eg_»¶aû
('/^\./m', '..$1', $this->
_fš®body
));

1655 
$this
->
	`_£nd_d©a
('.');

1657 
$»¶y
 = 
$this
->
	`_g‘_sm_d©a
();

1659 
$this
->
	`_£t_”rÜ_mes§ge
(
$»¶y
);

1661 ià(
	`¡ºcmp
(
$»¶y
, '250', 3) != 0)

1663 
$this
->
	`_£t_”rÜ_mes§ge
('Ïng:ema_sm_”rÜ', 
$»¶y
);

1664  
FALSE
;

1667 
$this
->
	`_£nd_commªd
('quit');

1668  
TRUE
;

1669 
	}
}

1680 
´Ùeùed
 
funùiÚ
 
	$_sm_cÚÃù
()

1682 
$s¦
 = 
NULL
;

1683 ià(
$this
->
sm_üy±o
 == 'ssl')

1684 
$s¦
 = 'ssl://';

1685 
$this
->
_sm_cÚÃù
 = 
	`fsockİ’
(
$s¦
.$this->
sm_ho¡
,

1686 
$this
->
sm_pÜt
,

1687 
$”ºo
,

1688 
$”r¡r
,

1689 
$this
->
sm_timeout
);

1691 iàĞ! 
	`is_»sourû
(
$this
->
_sm_cÚÃù
))

1693 
$this
->
	`_£t_”rÜ_mes§ge
('Ïng:ema_sm_”rÜ', 
$”ºo
." ".
$”r¡r
);

1694  
FALSE
;

1697 
$this
->
	`_£t_”rÜ_mes§ge
($this->
	`_g‘_sm_d©a
());

1699 ià(
$this
->
sm_üy±o
 == 'tls')

1701 
$this
->
	`_£nd_commªd
('hello');

1702 
$this
->
	`_£nd_commªd
('starttls');

1703 
	`¡»am_sock‘_’abË_üy±o
(
$this
->
_sm_cÚÃù
, 
TRUE
, 
STREAM_CRYPTO_METHOD_TLS_CLIENT
);

1706  
$this
->
	`_£nd_commªd
('hello');

1707 
	}
}

1719 
´Ùeùed
 
funùiÚ
 
_£nd_commªd
(
$cmd
, 
$d©a
 = '')

1721 
$cmd
)

1725 ià(
$this
->
_sm_auth
 
OR
 $this->
_g‘_’codšg
() == '8bit')

1726 
$this
->
_£nd_d©a
('EHLO '.$this->
_g‘_ho¡Çme
());

1728 
	g$this
->
_£nd_d©a
('HELO '.
$this
->
_g‘_ho¡Çme
());

1730 
	g$»¥
 = 250;

1734 
$this
->
_£nd_d©a
('STARTTLS');

1736 
	g$»¥
 = 220;

1740 
$this
->
_£nd_d©a
('MAIL FROM:<'.
$d©a
.'>');

1742 
	g$»¥
 = 250;

1746 
$this
->
_£nd_d©a
('RCPT TO:<'.
$d©a
.'>');

1748 
	g$»¥
 = 250;

1752 
$this
->
_£nd_d©a
('DATA');

1754 
	g$»¥
 = 354;

1758 
$this
->
_£nd_d©a
('QUIT');

1760 
	g$»¥
 = 221;

1764 
	g$»¶y
 = 
$this
->
_g‘_sm_d©a
();

1766 
	g$this
->
	g_debug_msg
[] = "<´e>".
$cmd
.": ".
$»¶y
."</pre>";

1768 ià(
sub¡r
(
$»¶y
, 0, 3è!ğ
$»¥
)

1770 
$this
->
_£t_”rÜ_mes§ge
('Ïng:ema_sm_”rÜ', 
$»¶y
);

1771  
	gFALSE
;

1774 ià(
	g$cmd
 == 'quit')

1776 
fşo£
(
$this
->
_sm_cÚÃù
);

1779  
	gTRUE
;

1790 
´Ùeùed
 
funùiÚ
 
	$_sm_auth’tiÿ‹
()

1792 iàĞ! 
$this
->
_sm_auth
)

1794  
TRUE
;

1797 ià(
$this
->
sm_u£r
 =ğ"" 
AND
 $this->
sm_·ss
 == "")

1799 
$this
->
	`_£t_”rÜ_mes§ge
('lang:email_no_smtp_unpw');

1800  
FALSE
;

1803 
$this
->
	`_£nd_d©a
('AUTH LOGIN');

1805 
$»¶y
 = 
$this
->
	`_g‘_sm_d©a
();

1807 ià(
	`¡ºcmp
(
$»¶y
, '334', 3) != 0)

1809 
$this
->
	`_£t_”rÜ_mes§ge
('Ïng:ema_çed_sm_logš', 
$»¶y
);

1810  
FALSE
;

1813 
$this
->
	`_£nd_d©a
(
	`ba£64_’code
($this->
sm_u£r
));

1815 
$»¶y
 = 
$this
->
	`_g‘_sm_d©a
();

1817 ià(
	`¡ºcmp
(
$»¶y
, '334', 3) != 0)

1819 
$this
->
	`_£t_”rÜ_mes§ge
('Ïng:ema_sm_auth_un', 
$»¶y
);

1820  
FALSE
;

1823 
$this
->
	`_£nd_d©a
(
	`ba£64_’code
($this->
sm_·ss
));

1825 
$»¶y
 = 
$this
->
	`_g‘_sm_d©a
();

1827 ià(
	`¡ºcmp
(
$»¶y
, '235', 3) != 0)

1829 
$this
->
	`_£t_”rÜ_mes§ge
('Ïng:ema_sm_auth_pw', 
$»¶y
);

1830  
FALSE
;

1833  
TRUE
;

1834 
	}
}

1844 
´Ùeùed
 
funùiÚ
 
	$_£nd_d©a
(
$d©a
)

1846 iàĞ! 
	`fwr™e
(
$this
->
_sm_cÚÃù
, 
$d©a
 . $this->
Ãwlše
))

1848 
$this
->
	`_£t_”rÜ_mes§ge
('Ïng:ema_sm_d©a_çu»', 
$d©a
);

1849  
FALSE
;

1853  
TRUE
;

1855 
	}
}

1865 
´Ùeùed
 
funùiÚ
 
	$_g‘_sm_d©a
()

1867 
$d©a
 = "";

1869 
$¡r
 = 
	`fg‘s
(
$this
->
_sm_cÚÃù
, 512))

1871 
$d©a
 .ğ
$¡r
;

1873 ià(
	`sub¡r
(
$¡r
, 3, 1) == " ")

1879  
$d©a
;

1880 
	}
}

1890 
´Ùeùed
 
funùiÚ
 
	$_g‘_ho¡Çme
()

1892  (
	`is£t
(
$_SERVER
['SERVER_NAME'])) ? $_SERVER['SERVER_NAME'] : 'localhost.localdomain';

1893 
	}
}

1903 
´Ùeùed
 
funùiÚ
 
	$_g‘_
()

1905 ià(
$this
->
_IP
 !=ğ
FALSE
)

1907  
$this
->
_IP
;

1910 
$c
 = (
	`is£t
(
$_SERVER
['HTTP_CLIENT_IP']è
AND
 $_SERVER['HTTP_CLIENT_IP'] !ğ""è? $_SERVER['HTTP_CLIENT_IP'] : 
FALSE
;

1911 
$r
 = (
	`is£t
(
$_SERVER
['REMOTE_ADDR']è
AND
 $_SERVER['REMOTE_ADDR'] !ğ""è? $_SERVER['REMOTE_ADDR'] : 
FALSE
;

1912 
$f
 = (
	`is£t
(
$_SERVER
['HTTP_X_FORWARDED_FOR']è
AND
 $_SERVER['HTTP_X_FORWARDED_FOR'] !ğ""è? $_SERVER['HTTP_X_FORWARDED_FOR'] : 
FALSE
;

1914 ià(
$c
 && 
$r
è
$this
->
_IP
 = $cip;

1915 
	`–£if
 (
$r
è
$this
->
_IP
 = $rip;

1916 
	`–£if
 (
$c
è
$this
->
_IP
 = $cip;

1917 
	`–£if
 (
$f
è
$this
->
_IP
 = $fip;

1919 ià(
	`¡½os
(
$this
->
_IP
, ','è!=ğ
FALSE
)

1921 
$x
 = 
	`ex¶ode
(',', 
$this
->
_IP
);

1922 
$this
->
_IP
 = 
	`’d
(
$x
);

1925 iàĞ! 
	`´eg_m©ch
Ğ"/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/", 
$this
->
_IP
))

1927 
$this
->
_IP
 = '0.0.0.0';

1930 
	`un£t
(
$c
);

1931 
	`un£t
(
$r
);

1932 
	`un£t
(
$f
);

1934  
$this
->
_IP
;

1935 
	}
}

1945 
public
 
funùiÚ
 
	$´št_debugg”
()

1947 
$msg
 = '';

1949 ià(
	`couÁ
(
$this
->
_debug_msg
) > 0)

1951 
	`fÜ—ch
 (
$this
->
_debug_msg
 
as
 
$v®
)

1953 
$msg
 .ğ
$v®
;

1957 
$msg
 .ğ"<´e>".
$this
->
_h—d”_¡r
."\n".
	`html¥ecŸlch¬s
($this->
_subjeù
)."\n".html¥ecŸlch¬s($this->
_fš®body
).'</pre>';

1958  
$msg
;

1959 
	}
}

1970 
´Ùeùed
 
funùiÚ
 
_£t_”rÜ_mes§ge
(
$msg
, 
$v®
 = '')

1972 
$CI
 =& 
g‘_š¡ªû
();

1973 
	g$CI
->
	gÏng
->
lßd
('email');

1975 ià(
sub¡r
(
$msg
, 0, 5è!ğ'Ïng:' || 
FALSE
 ==ğ(
$lše
 = 
$CI
->
Ïng
->
lše
(substr($msg, 5))))

1977 
	g$this
->
	g_debug_msg
[] = 
¡r_»¶aû
('%s', 
$v®
, 
$msg
)."<br />";

1981 
	g$this
->
	g_debug_msg
[] = 
¡r_»¶aû
('%s', 
$v®
, 
$lše
)."<br />";

1994 
´Ùeùed
 
funùiÚ
 
_mime_ty³s
(
$ext
 = "")

1996 
$mimes
 = 
¬¿y
( 'hqx' => 'application/mac-binhex40',

2085  ( ! 
is£t
(
$mimes
[
¡¹Şow”
(
$ext
)])) ? "application/x-unknown-content-type" : $mimes[strtolower($ext)];

	@system/libraries/Encrypt.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_Enüy±
 {

31 
v¬
 
	m$CI
;

32 
v¬
 
	m$’üy±iÚ_key
 = '';

33 
v¬
 
	m$_hash_ty³
 = 'sha1';

34 
v¬
 
	m$_müy±_exi¡s
 = 
FALSE
;

35 
v¬
 
	m$_müy±_ch”
;

36 
v¬
 
	m$_müy±_mode
;

44 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

46 
$this
->
CI
 =& 
	`g‘_š¡ªû
();

47 
$this
->
_müy±_exi¡s
 = ( ! 
	`funùiÚ_exi¡s
('müy±_’üy±')è? 
FALSE
 : 
TRUE
;

48 
	`log_mes§ge
('debug', "Encrypt Class Initialized");

63 
funùiÚ
 
	`g‘_key
(
$key
 = '')

65 ià(
$key
 == '')

67 ià(
$this
->
’üy±iÚ_key
 != '')

69  
$this
->
’üy±iÚ_key
;

72 
$CI
 =& 
	`g‘_š¡ªû
();

73 
$key
 = 
$CI
->
cÚfig
->
	`™em
('encryption_key');

75 ià(
$key
 =ğ
FALSE
)

77 
	`show_”rÜ
('In ordero useheƒncryption class„equireshat you set‡nƒncryption key in your config file.');

81  
	`md5
(
$key
);

82 
	}
}

93 
funùiÚ
 
£t_key
(
$key
 = '')

95 
$this
->
’üy±iÚ_key
 = 
$key
;

116 
funùiÚ
 
’code
(
$¡ršg
, 
$key
 = '')

118 
$key
 = 
$this
->
g‘_key
($key);

120 ià(
	g$this
->
	g_müy±_exi¡s
 ==ğ
TRUE
)

122 
$’c
 = 
$this
->
müy±_’code
(
$¡ršg
, 
$key
);

126 
	g$’c
 = 
$this
->
_xÜ_’code
(
$¡ršg
, 
$key
);

129  
ba£64_’code
(
$’c
);

144 
funùiÚ
 
decode
(
$¡ršg
, 
$key
 = '')

146 
$key
 = 
$this
->
g‘_key
($key);

148 ià(
´eg_m©ch
('/[^a-zA-Z0-9\/\+=]/', 
$¡ršg
))

150  
	gFALSE
;

153 
	g$dec
 = 
ba£64_decode
(
$¡ršg
);

155 ià(
	g$this
->
	g_müy±_exi¡s
 ==ğ
TRUE
)

157 ià((
$dec
 = 
$this
->
müy±_decode
($dec, 
$key
)è==ğ
FALSE
)

159  
FALSE
;

164 
	g$dec
 = 
$this
->
_xÜ_decode
(
$dec
, 
$key
);

167  
	g$dec
;

188 
funùiÚ
 
’code_äom_Ëgacy
(
$¡ršg
, 
$Ëgacy_mode
 = 
MCRYPT_MODE_ECB
, 
$key
 = '')

190 ià(
$this
->
_müy±_exi¡s
 ==ğ
FALSE
)

192 
log_mes§ge
('error', 'Encoding from†egacy is‡vailable only when Mcrypt is in use.');

193  
	gFALSE
;

199 
	g$cu¼’t_mode
 = 
$this
->
_g‘_mode
();

200 
	g$this
->
£t_mode
(
$Ëgacy_mode
);

202 
	g$key
 = 
$this
->
g‘_key
(
$key
);

204 ià(
´eg_m©ch
('/[^a-zA-Z0-9\/\+=]/', 
$¡ršg
))

206  
	gFALSE
;

209 
	g$dec
 = 
ba£64_decode
(
$¡ršg
);

211 ià((
	g$dec
 = 
$this
->
müy±_decode
(
$dec
, 
$key
)è==ğ
FALSE
)

213  
FALSE
;

216 
	g$dec
 = 
$this
->
_xÜ_decode
(
$dec
, 
$key
);

219 
	g$this
->
£t_mode
(
$cu¼’t_mode
);

222  
ba£64_’code
(
$this
->
müy±_’code
(
$dec
, 
$key
));

238 
funùiÚ
 
	$_xÜ_’code
(
$¡ršg
, 
$key
)

240 
$¿nd
 = '';

241 
	`¡¾’
(
$¿nd
) < 32)

243 
$¿nd
 .ğ
	`mt_¿nd
(0, 
	`mt_g‘¿ndmax
());

246 
$¿nd
 = 
$this
->
	`hash
($rand);

248 
$’c
 = '';

249 
$i
 = 0; $˜< 
	`¡¾’
(
$¡ršg
); $i++)

251 
$’c
 .ğ
	`sub¡r
(
$¿nd
, (
$i
 % 
	`¡¾’
($¿nd)), 1).(sub¡r($¿nd, ($˜% sŒËn($¿nd)), 1è^ sub¡r(
$¡ršg
, $i, 1));

254  
$this
->
	`_xÜ_m”ge
(
$’c
, 
$key
);

255 
	}
}

270 
funùiÚ
 
	$_xÜ_decode
(
$¡ršg
, 
$key
)

272 
$¡ršg
 = 
$this
->
	`_xÜ_m”ge
($¡ršg, 
$key
);

274 
$dec
 = '';

275 
$i
 = 0; $˜< 
	`¡¾’
(
$¡ršg
); $i++)

277 
$dec
 .ğ(
	`sub¡r
(
$¡ršg
, 
$i
++, 1) ^ substr($string, $i, 1));

280  
$dec
;

281 
	}
}

295 
funùiÚ
 
	$_xÜ_m”ge
(
$¡ršg
, 
$key
)

297 
$hash
 = 
$this
->
	`hash
(
$key
);

298 
$¡r
 = '';

299 
$i
 = 0; $˜< 
	`¡¾’
(
$¡ršg
); $i++)

301 
$¡r
 .ğ
	`sub¡r
(
$¡ršg
, 
$i
, 1è^ sub¡r(
$hash
, ($˜% 
	`¡¾’
($hash)), 1);

304  
$¡r
;

305 
	}
}

317 
funùiÚ
 
	$müy±_’code
(
$d©a
, 
$key
)

319 
$š™_size
 = 
	`müy±_g‘_iv_size
(
$this
->
	`_g‘_ch”
(), $this->
	`_g‘_mode
());

320 
$š™_veù
 = 
	`müy±_ü—‹_iv
(
$š™_size
, 
MCRYPT_RAND
);

321  
$this
->
	`_add_ch”_noi£
(
$š™_veù
.
	`müy±_’üy±
($this->
	`_g‘_ch”
(), 
$key
, 
$d©a
, $this->
	`_g‘_mode
(), $init_vect), $key);

322 
	}
}

334 
funùiÚ
 
	$müy±_decode
(
$d©a
, 
$key
)

336 
$d©a
 = 
$this
->
	`_»move_ch”_noi£
($d©a, 
$key
);

337 
$š™_size
 = 
	`müy±_g‘_iv_size
(
$this
->
	`_g‘_ch”
(), $this->
	`_g‘_mode
());

339 ià(
$š™_size
 > 
	`¡¾’
(
$d©a
))

341  
FALSE
;

344 
$š™_veù
 = 
	`sub¡r
(
$d©a
, 0, 
$š™_size
);

345 
$d©a
 = 
	`sub¡r
($d©a, 
$š™_size
);

346  
	`¹rim
(
	`müy±_deüy±
(
$this
->
	`_g‘_ch”
(), 
$key
, 
$d©a
, $this->
	`_g‘_mode
(), 
$š™_veù
), "\0");

347 
	}
}

363 
funùiÚ
 
	$_add_ch”_noi£
(
$d©a
, 
$key
)

365 
$keyhash
 = 
$this
->
	`hash
(
$key
);

366 
$keyËn
 = 
	`¡¾’
(
$keyhash
);

367 
$¡r
 = '';

369 
$i
 = 0, 
$j
 = 0, 
$Ën
 = 
	`¡¾’
(
$d©a
); $i < $len; ++$i, ++$j)

371 ià(
$j
 >ğ
$keyËn
)

373 
$j
 = 0;

376 
$¡r
 .ğ
	`chr
((
	`Üd
(
$d©a
[
$i
]è+ ord(
$keyhash
[
$j
])) % 256);

379  
$¡r
;

380 
	}
}

394 
funùiÚ
 
	$_»move_ch”_noi£
(
$d©a
, 
$key
)

396 
$keyhash
 = 
$this
->
	`hash
(
$key
);

397 
$keyËn
 = 
	`¡¾’
(
$keyhash
);

398 
$¡r
 = '';

400 
$i
 = 0, 
$j
 = 0, 
$Ën
 = 
	`¡¾’
(
$d©a
); $i < $len; ++$i, ++$j)

402 ià(
$j
 >ğ
$keyËn
)

404 
$j
 = 0;

407 
$‹mp
 = 
	`Üd
(
$d©a
[
$i
]è- ord(
$keyhash
[
$j
]);

409 ià(
$‹mp
 < 0)

411 
$‹mp
 = $temp + 256;

414 
$¡r
 .ğ
	`chr
(
$‹mp
);

417  
$¡r
;

418 
	}
}

429 
funùiÚ
 
	$£t_ch”
(
$ch”
)

431 
$this
->
_müy±_ch”
 = 
$ch”
;

432 
	}
}

443 
funùiÚ
 
	$£t_mode
(
$mode
)

445 
$this
->
_müy±_mode
 = 
$mode
;

446 
	}
}

456 
funùiÚ
 
	$_g‘_ch”
()

458 ià(
$this
->
_müy±_ch”
 == '')

460 
$this
->
_müy±_ch”
 = 
MCRYPT_RIJNDAEL_256
;

463  
$this
->
_müy±_ch”
;

464 
	}
}

474 
funùiÚ
 
	$_g‘_mode
()

476 ià(
$this
->
_müy±_mode
 == '')

478 
$this
->
_müy±_mode
 = 
MCRYPT_MODE_CBC
;

481  
$this
->
_müy±_mode
;

482 
	}
}

493 
funùiÚ
 
£t_hash
(
$ty³
 = 'sha1')

495 
$this
->
_hash_ty³
 = (
$ty³
 !ğ'sha1' 
AND
 $type != 'md5') ? 'sha1' : $type;

507 
funùiÚ
 
	$hash
(
$¡r
)

509  (
$this
->
_hash_ty³
 =ğ'sha1'è? $this->
	`sha1
(
$¡r
è: 
	`md5
($str);

510 
	}
}

521 
funùiÚ
 
	$sha1
(
$¡r
)

523 iàĞ! 
	`funùiÚ_exi¡s
('sha1'))

525 iàĞ! 
	`funùiÚ_exi¡s
('mhash'))

527 
	`»quœe_Úû
(
BASEPATH
.'libraries/Sha1.php');

528 
$SH
 = 
Ãw
 
CI_SHA
;

529  
$SH
->
	`g’”©e
(
$¡r
);

533  
	`bš2hex
(
	`mhash
(
MHASH_SHA1
, 
$¡r
));

538  
	`sha1
(
$¡r
);

540 
	}
}

	@system/libraries/Form_validation.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_FÜm_v®id©iÚ
 {

29 
´Ùeùed
 
	m$CI
;

30 
´Ùeùed
 
	m$_f›ld_d©a
 = 
¬¿y
();

31 
´Ùeùed
 
	m$_cÚfig_ruËs
 = 
¬¿y
();

32 
´Ùeùed
 
	m$_”rÜ_¬¿y
 = 
¬¿y
();

33 
´Ùeùed
 
	m$_”rÜ_mes§ges
 = 
¬¿y
();

34 
´Ùeùed
 
	m$_”rÜ_´efix
 = '<p>';

35 
´Ùeùed
 
	m$_”rÜ_suffix
 = '</p>';

36 
´Ùeùed
 
	m$”rÜ_¡ršg
 = '';

37 
´Ùeùed
 
	m$_§ã_fÜm_d©a
 = 
FALSE
;

42 
public
 
funùiÚ
 
__cÚ¡ruù
(
$ruËs
 = 
	$¬¿y
())

44 
$this
->
CI
 =& 
	`g‘_š¡ªû
();

47 
$this
->
_cÚfig_ruËs
 = 
$ruËs
;

50 
$this
->
CI
->
lßd
->
	`h–³r
('form');

53 ià(
	`funùiÚ_exi¡s
('mb_internal_encoding'))

55 
	`mb_š‹º®_’codšg
(
$this
->
CI
->
cÚfig
->
	`™em
('charset'));

58 
	`log_mes§ge
('debug', "Form Validation Class Initialized");

74 
public
 
funùiÚ
 
	`£t_ruËs
(
$f›ld
, 
$Ïb–
 = '', 
$ruËs
 = '')

77 ià(
	`couÁ
(
$_POST
) == 0)

79  
$this
;

84 ià(
	`is_¬¿y
(
$f›ld
))

86 
	`fÜ—ch
 (
$f›ld
 
as
 
$row
)

89 iàĞ! 
	`is£t
(
$row
['f›ld']è
OR
 ! isset($row['rules']))

95 
$Ïb–
 = ( ! 
	`is£t
(
$row
['label'])) ? $row['field'] : $row['label'];

98 
$this
->
	`£t_ruËs
(
$row
['f›ld'], 
$Ïb–
, $row['rules']);

100  
$this
;

104 iàĞ! 
	`is_¡ršg
(
$f›ld
è
OR
 ! is_¡ršg(
$ruËs
) OR $field == '')

106  
$this
;

110 
$Ïb–
 = ($Ïb– =ğ''è? 
$f›ld
 : $label;

115 ià(
	`¡½os
(
$f›ld
, '['è!=ğ
FALSE
 
AND
 
	`´eg_m©ch_®l
('/\[(.*?)\]/', $f›ld, 
$m©ches
))

119 
$x
 = 
	`ex¶ode
('[', 
$f›ld
);

120 
$šdexes
[] = 
	`cu¼’t
(
$x
);

122 
$i
 = 0; $˜< 
	`couÁ
(
$m©ches
['0']); $i++)

124 ià(
$m©ches
['1'][
$i
] != '')

126 
$šdexes
[] = 
$m©ches
['1'][
$i
];

130 
$is_¬¿y
 = 
TRUE
;

134 
$šdexes
 = 
	`¬¿y
();

135 
$is_¬¿y
 = 
FALSE
;

139 
$this
->
_f›ld_d©a
[
$f›ld
] = 
	`¬¿y
(

140 'f›ld' => 
$f›ld
,

141 'Ïb–' => 
$Ïb–
,

142 'ruËs' => 
$ruËs
,

143 'is_¬¿y' => 
$is_¬¿y
,

144 'keys' => 
$šdexes
,

145 'po¡d©a' => 
NULL
,

149  
$this
;

150 
	}
}

165 
public
 
funùiÚ
 
£t_mes§ge
(
$Ïng
, 
$v®
 = '')

167 iàĞ! 
is_¬¿y
(
$Ïng
))

169 
$Ïng
 = 
¬¿y
($Ïng => 
$v®
);

172 
	g$this
->
	g_”rÜ_mes§ges
 = 
¬¿y_m”ge
(
$this
->
_”rÜ_mes§ges
, 
$Ïng
);

174  
	g$this
;

189 
public
 
funùiÚ
 
£t_”rÜ_d–im™”s
(
$´efix
 = '<p>', 
$suffix
 = '</p>')

191 
$this
->
_”rÜ_´efix
 = 
$´efix
;

192 
	g$this
->
	g_”rÜ_suffix
 = 
$suffix
;

194  
	g$this
;

208 
public
 
funùiÚ
 
”rÜ
(
$f›ld
 = '', 
$´efix
 = '', 
$suffix
 = '')

210 iàĞ! 
is£t
(
$this
->
_f›ld_d©a
[
$f›ld
]['”rÜ']è
OR
 $this->_field_data[$field]['error'] == '')

215 ià(
	g$´efix
 == '')

217 
$´efix
 = 
$this
->
_”rÜ_´efix
;

220 ià(
	g$suffix
 == '')

222 
$suffix
 = 
$this
->
_”rÜ_suffix
;

225  
	g$´efix
.
	g$this
->
	g_f›ld_d©a
[
$f›ld
]['”rÜ'].
	g$suffix
;

240 
public
 
funùiÚ
 
”rÜ_¡ršg
(
$´efix
 = '', 
$suffix
 = '')

243 ià(
couÁ
(
$this
->
_”rÜ_¬¿y
) === 0)

248 ià(
	g$´efix
 == '')

250 
$´efix
 = 
$this
->
_”rÜ_´efix
;

253 ià(
	g$suffix
 == '')

255 
$suffix
 = 
$this
->
_”rÜ_suffix
;

259 
	g$¡r
 = '';

260 
fÜ—ch
 (
$this
->
_”rÜ_¬¿y
 
as
 
$v®
)

262 ià(
	g$v®
 != '')

264 
$¡r
 .ğ
$´efix
.
$v®
.
$suffix
."\n";

268  
	g$¡r
;

281 
public
 
funùiÚ
 
run
(
$group
 = '')

284 ià(
couÁ
(
$_POST
) == 0)

286  
FALSE
;

291 ià(
couÁ
(
$this
->
_f›ld_d©a
) == 0)

294 ià(
couÁ
(
$this
->
_cÚfig_ruËs
) == 0)

296  
FALSE
;

300 
	g$uri
 = (
$group
 =ğ''è? 
Œim
(
$this
->
CI
->
uri
->
ruri_¡ršg
(), '/') : $group;

302 ià(
	g$uri
 !ğ'' 
AND
 
is£t
(
$this
->
_cÚfig_ruËs
[
$uri
]))

304 
$this
->
£t_ruËs
($this->
_cÚfig_ruËs
[
$uri
]);

308 
	g$this
->
£t_ruËs
(
$this
->
_cÚfig_ruËs
);

312 ià(
couÁ
(
$this
->
_f›ld_d©a
) == 0)

314 
log_mes§ge
('debug', "Unableo find validation„ules");

315  
	gFALSE
;

320 
	g$this
->
	gCI
->
	gÏng
->
lßd
('form_validation');

324 
fÜ—ch
 (
$this
->
_f›ld_d©a
 
as
 
$f›ld
 => 
$row
)

329 ià(
$row
['is_¬¿y'] =ğ
TRUE
)

331 
$this
->
_f›ld_d©a
[
$f›ld
]['po¡d©a'] = $this->
_»duû_¬¿y
(
$_POST
, 
$row
['keys']);

335 ià(
is£t
(
$_POST
[
$f›ld
]è
AND
 
	g$_POST
[$field] != "")

337 
$this
->
_f›ld_d©a
[
$f›ld
]['po¡d©a'] = 
$_POST
[$field];

341 
	g$this
->
_execu‹
(
$row
, 
ex¶ode
('|', $row['ruËs']), 
$this
->
_f›ld_d©a
[
$f›ld
]['postdata']);

345 
	g$tÙ®_”rÜs
 = 
couÁ
(
$this
->
_”rÜ_¬¿y
);

347 ià(
	g$tÙ®_”rÜs
 > 0)

349 
	g$this
->
	g_§ã_fÜm_d©a
 = 
TRUE
;

353 
	g$this
->
_»£t_po¡_¬¿y
();

356 ià(
	g$tÙ®_”rÜs
 == 0)

358  
TRUE
;

362  
	gFALSE
;

376 
´Ùeùed
 
funùiÚ
 
	$_»duû_¬¿y
(
$¬¿y
, 
$keys
, 
$i
 = 0)

378 ià(
	`is_¬¿y
(
$¬¿y
))

380 ià(
	`is£t
(
$keys
[
$i
]))

382 ià(
	`is£t
(
$¬¿y
[
$keys
[
$i
]]))

384 
$¬¿y
 = 
$this
->
	`_»duû_¬¿y
($¬¿y[
$keys
[
$i
]], $keys, ($i+1));

388  
NULL
;

393  
$¬¿y
;

397  
$¬¿y
;

398 
	}
}

408 
´Ùeùed
 
funùiÚ
 
	$_»£t_po¡_¬¿y
()

410 
	`fÜ—ch
 (
$this
->
_f›ld_d©a
 
as
 
$f›ld
 => 
$row
)

412 iàĞ! 
	`is_nuÎ
(
$row
['postdata']))

414 ià(
$row
['is_¬¿y'] =ğ
FALSE
)

416 ià(
	`is£t
(
$_POST
[
$row
['field']]))

418 
$_POST
[
$row
['f›ld']] = 
$this
->
	`´•_fÜ_fÜm
($row['postdata']);

424 
$po¡_»f
 =& 
$_POST
;

427 ià(
	`couÁ
(
$row
['keys']) == 1)

429 
$po¡_»f
 =& $po¡_»f[
	`cu¼’t
(
$row
['keys'])];

433 
	`fÜ—ch
 (
$row
['keys'] 
as
 
$v®
)

435 
$po¡_»f
 =& $po¡_»f[
$v®
];

439 ià(
	`is_¬¿y
(
$row
['postdata']))

441 
$¬¿y
 = 
	`¬¿y
();

442 
	`fÜ—ch
 (
$row
['po¡d©a'] 
as
 
$k
 => 
$v
)

444 
$¬¿y
[
$k
] = 
$this
->
	`´•_fÜ_fÜm
(
$v
);

447 
$po¡_»f
 = 
$¬¿y
;

451 
$po¡_»f
 = 
$this
->
	`´•_fÜ_fÜm
(
$row
['postdata']);

456 
	}
}

470 
´Ùeùed
 
funùiÚ
 
	$_execu‹
(
$row
, 
$ruËs
, 
$po¡d©a
 = 
NULL
, 
$cyşes
 = 0)

473 ià(
	`is_¬¿y
(
$po¡d©a
))

475 
	`fÜ—ch
 (
$po¡d©a
 
as
 
$key
 => 
$v®
)

477 
$this
->
	`_execu‹
(
$row
, 
$ruËs
, 
$v®
, 
$cyşes
);

478 
$cyşes
++;

487 
$ÿÎback
 = 
FALSE
;

488 iàĞ! 
	`š_¬¿y
('»quœed', 
$ruËs
è
AND
 
	`is_nuÎ
(
$po¡d©a
))

491 ià(
	`´eg_m©ch
("/(ÿÎback_\w+(\[.*?\])?)/", 
	`im¶ode
(' ', 
$ruËs
), 
$m©ch
))

493 
$ÿÎback
 = 
TRUE
;

494 
$ruËs
 = (
	`¬¿y
('1' => 
$m©ch
[1]));

505 ià(
	`is_nuÎ
(
$po¡d©a
è
AND
 
$ÿÎback
 =ğ
FALSE
)

507 ià(
	`š_¬¿y
('is£t', 
$ruËs
, 
TRUE
è
OR
 in_array('required', $rules))

510 
$ty³
 = (
	`š_¬¿y
('»quœed', 
$ruËs
)) ? 'required' : 'isset';

512 iàĞ! 
	`is£t
(
$this
->
_”rÜ_mes§ges
[
$ty³
]))

514 ià(
FALSE
 ==ğ(
$lše
 = 
$this
->
CI
->
Ïng
->
	`lše
(
$ty³
)))

516 
$lše
 = 'The field was‚ot set';

521 
$lše
 = 
$this
->
_”rÜ_mes§ges
[
$ty³
];

525 
$mes§ge
 = 
	`¥rštf
(
$lše
, 
$this
->
	`_Œª¦©e_f›ldÇme
(
$row
['label']));

528 
$this
->
_f›ld_d©a
[
$row
['f›ld']]['”rÜ'] = 
$mes§ge
;

530 iàĞ! 
	`is£t
(
$this
->
_”rÜ_¬¿y
[
$row
['field']]))

532 
$this
->
_”rÜ_¬¿y
[
$row
['f›ld']] = 
$mes§ge
;

542 
	`fÜ—ch
 (
$ruËs
 
As
 
$ruË
)

544 
$_š_¬¿y
 = 
FALSE
;

548 ià(
$row
['is_¬¿y'] =ğ
TRUE
 
AND
 
	`is_¬¿y
(
$this
->
_f›ld_d©a
[$row['field']]['postdata']))

552 iàĞ! 
	`is£t
(
$this
->
_f›ld_d©a
[
$row
['f›ld']]['po¡d©a'][
$cyşes
]))

557 
$po¡d©a
 = 
$this
->
_f›ld_d©a
[
$row
['f›ld']]['po¡d©a'][
$cyşes
];

558 
$_š_¬¿y
 = 
TRUE
;

562 
$po¡d©a
 = 
$this
->
_f›ld_d©a
[
$row
['field']]['postdata'];

568 
$ÿÎback
 = 
FALSE
;

569 ià(
	`sub¡r
(
$ruË
, 0, 9) == 'callback_')

571 
$ruË
 = 
	`sub¡r
($rule, 9);

572 
$ÿÎback
 = 
TRUE
;

577 
$·¿m
 = 
FALSE
;

578 ià(
	`´eg_m©ch
("/(.*?)\[(.*)\]/", 
$ruË
, 
$m©ch
))

580 
$ruË
 = 
$m©ch
[1];

581 
$·¿m
 = 
$m©ch
[2];

585 ià(
$ÿÎback
 ==ğ
TRUE
)

587 iàĞ! 
	`m‘hod_exi¡s
(
$this
->
CI
, 
$ruË
))

593 
$»suÉ
 = 
$this
->
CI
->
	`$ruË
(
$po¡d©a
, 
$·¿m
);

596 ià(
$_š_¬¿y
 =ğ
TRUE
)

598 
$this
->
_f›ld_d©a
[
$row
['f›ld']]['po¡d©a'][
$cyşes
] = (
	`is_boŞ
(
$»suÉ
)è? 
$po¡d©a
 : $result;

602 
$this
->
_f›ld_d©a
[
$row
['f›ld']]['po¡d©a'] = (
	`is_boŞ
(
$»suÉ
)è? 
$po¡d©a
 : $result;

606 iàĞ! 
	`š_¬¿y
('»quœed', 
$ruËs
, 
TRUE
è
AND
 
$»suÉ
 !=ğ
FALSE
)

613 iàĞ! 
	`m‘hod_exi¡s
(
$this
, 
$ruË
))

617 ià(
	`funùiÚ_exi¡s
(
$ruË
))

619 
$»suÉ
 = 
	`$ruË
(
$po¡d©a
);

621 ià(
$_š_¬¿y
 =ğ
TRUE
)

623 
$this
->
_f›ld_d©a
[
$row
['f›ld']]['po¡d©a'][
$cyşes
] = (
	`is_boŞ
(
$»suÉ
)è? 
$po¡d©a
 : $result;

627 
$this
->
_f›ld_d©a
[
$row
['f›ld']]['po¡d©a'] = (
	`is_boŞ
(
$»suÉ
)è? 
$po¡d©a
 : $result;

632 
	`log_mes§ge
('debug', "UÇbËØfšd v®id©iÚ„uË: ".
$ruË
);

638 
$»suÉ
 = 
$this
->
	`$ruË
(
$po¡d©a
, 
$·¿m
);

640 ià(
$_š_¬¿y
 =ğ
TRUE
)

642 
$this
->
_f›ld_d©a
[
$row
['f›ld']]['po¡d©a'][
$cyşes
] = (
	`is_boŞ
(
$»suÉ
)è? 
$po¡d©a
 : $result;

646 
$this
->
_f›ld_d©a
[
$row
['f›ld']]['po¡d©a'] = (
	`is_boŞ
(
$»suÉ
)è? 
$po¡d©a
 : $result;

651 ià(
$»suÉ
 ==ğ
FALSE
)

653 iàĞ! 
	`is£t
(
$this
->
_”rÜ_mes§ges
[
$ruË
]))

655 ià(
FALSE
 ==ğ(
$lše
 = 
$this
->
CI
->
Ïng
->
	`lše
(
$ruË
)))

657 
$lše
 = 'Unableo‡ccess‡nƒrror message correspondingo your field‚ame.';

662 
$lše
 = 
$this
->
_”rÜ_mes§ges
[
$ruË
];

667 ià(
	`is£t
(
$this
->
_f›ld_d©a
[
$·¿m
]è
AND
 isset($this->_field_data[$param]['label']))

669 
$·¿m
 = 
$this
->
	`_Œª¦©e_f›ldÇme
($this->
_f›ld_d©a
[$param]['label']);

673 
$mes§ge
 = 
	`¥rštf
(
$lše
, 
$this
->
	`_Œª¦©e_f›ldÇme
(
$row
['Ïb–']), 
$·¿m
);

676 
$this
->
_f›ld_d©a
[
$row
['f›ld']]['”rÜ'] = 
$mes§ge
;

678 iàĞ! 
	`is£t
(
$this
->
_”rÜ_¬¿y
[
$row
['field']]))

680 
$this
->
_”rÜ_¬¿y
[
$row
['f›ld']] = 
$mes§ge
;

686 
	}
}

697 
´Ùeùed
 
funùiÚ
 
	$_Œª¦©e_f›ldÇme
(
$f›ldÇme
)

701 ià(
	`sub¡r
(
$f›ldÇme
, 0, 5) == 'lang:')

704 
$lše
 = 
	`sub¡r
(
$f›ldÇme
, 5);

707 ià(
FALSE
 ==ğ(
$f›ldÇme
 = 
$this
->
CI
->
Ïng
->
	`lše
(
$lše
)))

709  
$lše
;

713  
$f›ldÇme
;

714 
	}
}

729 
public
 
funùiÚ
 
£t_v®ue
(
$f›ld
 = '', 
$deçuÉ
 = '')

731 iàĞ! 
is£t
(
$this
->
_f›ld_d©a
[
$f›ld
]))

733  
$deçuÉ
;

738 ià(
is_¬¿y
(
$this
->
_f›ld_d©a
[
$f›ld
]['postdata']))

740  
¬¿y_shiá
(
$this
->
_f›ld_d©a
[
$f›ld
]['postdata']);

743  
	g$this
->
	g_f›ld_d©a
[
$f›ld
]['postdata'];

759 
public
 
funùiÚ
 
£t_£Ëù
(
$f›ld
 = '', 
$v®ue
 = '', 
$deçuÉ
 = 
FALSE
)

761 iàĞ! 
is£t
(
$this
->
_f›ld_d©a
[
$f›ld
]è
OR
 ! isset($this->_field_data[$field]['postdata']))

763 ià(
$deçuÉ
 ==ğ
TRUE
 
AND
 
couÁ
(
$this
->
_f›ld_d©a
) === 0)

770 
	g$f›ld
 = 
$this
->
_f›ld_d©a
[
$f›ld
]['postdata'];

772 ià(
is_¬¿y
(
$f›ld
))

774 iàĞ! 
š_¬¿y
(
$v®ue
, 
$f›ld
))

781 ià((
	g$f›ld
 =ğ'' 
OR
 
$v®ue
 =ğ''èOR (
$f›ld
 != $value))

803 
public
 
funùiÚ
 
£t_¿dio
(
$f›ld
 = '', 
$v®ue
 = '', 
$deçuÉ
 = 
FALSE
)

805 iàĞ! 
is£t
(
$this
->
_f›ld_d©a
[
$f›ld
]è
OR
 ! isset($this->_field_data[$field]['postdata']))

807 ià(
$deçuÉ
 ==ğ
TRUE
 
AND
 
couÁ
(
$this
->
_f›ld_d©a
) === 0)

814 
	g$f›ld
 = 
$this
->
_f›ld_d©a
[
$f›ld
]['postdata'];

816 ià(
is_¬¿y
(
$f›ld
))

818 iàĞ! 
š_¬¿y
(
$v®ue
, 
$f›ld
))

825 ià((
	g$f›ld
 =ğ'' 
OR
 
$v®ue
 =ğ''èOR (
$f›ld
 != $value))

847 
public
 
funùiÚ
 
£t_checkbox
(
$f›ld
 = '', 
$v®ue
 = '', 
$deçuÉ
 = 
FALSE
)

849 iàĞ! 
is£t
(
$this
->
_f›ld_d©a
[
$f›ld
]è
OR
 ! isset($this->_field_data[$field]['postdata']))

851 ià(
$deçuÉ
 ==ğ
TRUE
 
AND
 
couÁ
(
$this
->
_f›ld_d©a
) === 0)

858 
	g$f›ld
 = 
$this
->
_f›ld_d©a
[
$f›ld
]['postdata'];

860 ià(
is_¬¿y
(
$f›ld
))

862 iàĞ! 
š_¬¿y
(
$v®ue
, 
$f›ld
))

869 ià((
	g$f›ld
 =ğ'' 
OR
 
$v®ue
 =ğ''èOR (
$f›ld
 != $value))

887 
public
 
funùiÚ
 
	$»quœed
(
$¡r
)

889 iàĞ! 
	`is_¬¿y
(
$¡r
))

891  (
	`Œim
(
$¡r
è=ğ''è? 
FALSE
 : 
TRUE
;

895  ( ! 
	`em±y
(
$¡r
));

897 
	}
}

909 
public
 
funùiÚ
 
	$»gex_m©ch
(
$¡r
, 
$»gex
)

911 iàĞ! 
	`´eg_m©ch
(
$»gex
, 
$¡r
))

913  
FALSE
;

916  
TRUE
;

917 
	}
}

929 
public
 
funùiÚ
 
	$m©ches
(
$¡r
, 
$f›ld
)

931 iàĞ! 
	`is£t
(
$_POST
[
$f›ld
]))

933  
FALSE
;

936 
$f›ld
 = 
$_POST
[$field];

938  (
$¡r
 !=ğ
$f›ld
è? 
FALSE
 : 
TRUE
;

939 
	}
}

951 
public
 
funùiÚ
 
	$is_unique
(
$¡r
, 
$f›ld
)

953 
	`li¡
(
$bË
, 
$f›ld
)=
	`ex¶ode
('.', $field);

954 
$qu”y
 = 
$this
->
CI
->
db
->
	`lim™
(1)->
	`g‘_wh”e
(
$bË
, 
	`¬¿y
(
$f›ld
 => 
$¡r
));

956  
$qu”y
->
	`num_rows
() === 0;

957 
	}
}

969 
public
 
funùiÚ
 
	$mš_Ëngth
(
$¡r
, 
$v®
)

971 ià(
	`´eg_m©ch
("/[^0-9]/", 
$v®
))

973  
FALSE
;

976 ià(
	`funùiÚ_exi¡s
('mb_strlen'))

978  (
	`mb_¡¾’
(
$¡r
è< 
$v®
è? 
FALSE
 : 
TRUE
;

981  (
	`¡¾’
(
$¡r
è< 
$v®
è? 
FALSE
 : 
TRUE
;

982 
	}
}

994 
public
 
funùiÚ
 
	$max_Ëngth
(
$¡r
, 
$v®
)

996 ià(
	`´eg_m©ch
("/[^0-9]/", 
$v®
))

998  
FALSE
;

1001 ià(
	`funùiÚ_exi¡s
('mb_strlen'))

1003  (
	`mb_¡¾’
(
$¡r
è> 
$v®
è? 
FALSE
 : 
TRUE
;

1006  (
	`¡¾’
(
$¡r
è> 
$v®
è? 
FALSE
 : 
TRUE
;

1007 
	}
}

1019 
public
 
funùiÚ
 
	$exaù_Ëngth
(
$¡r
, 
$v®
)

1021 ià(
	`´eg_m©ch
("/[^0-9]/", 
$v®
))

1023  
FALSE
;

1026 ià(
	`funùiÚ_exi¡s
('mb_strlen'))

1028  (
	`mb_¡¾’
(
$¡r
è!ğ
$v®
è? 
FALSE
 : 
TRUE
;

1031  (
	`¡¾’
(
$¡r
è!ğ
$v®
è? 
FALSE
 : 
TRUE
;

1032 
	}
}

1043 
public
 
funùiÚ
 
	$v®id_ema
(
$¡r
)

1045  ( ! 
	`´eg_m©ch
("/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/ix", 
$¡r
)è? 
FALSE
 : 
TRUE
;

1046 
	}
}

1057 
public
 
funùiÚ
 
	$v®id_emas
(
$¡r
)

1059 ià(
	`¡½os
(
$¡r
, ','è==ğ
FALSE
)

1061  
$this
->
	`v®id_ema
(
	`Œim
(
$¡r
));

1064 
	`fÜ—ch
 (
	`ex¶ode
(',', 
$¡r
è
as
 
$ema
)

1066 ià(
	`Œim
(
$ema
è!ğ'' && 
$this
->
	`v®id_ema
Ñrim($ema)è==ğ
FALSE
)

1068  
FALSE
;

1072  
TRUE
;

1073 
	}
}

1084 
public
 
funùiÚ
 
	$v®id_
(
$
)

1086  
$this
->
CI
->
šput
->
	`v®id_
(
$
);

1087 
	}
}

1098 
public
 
funùiÚ
 
	$®pha
(
$¡r
)

1100  ( ! 
	`´eg_m©ch
("/^([a-z])+$/i", 
$¡r
)è? 
FALSE
 : 
TRUE
;

1101 
	}
}

1112 
public
 
funùiÚ
 
	$®pha_num”ic
(
$¡r
)

1114  ( ! 
	`´eg_m©ch
("/^([a-z0-9])+$/i", 
$¡r
)è? 
FALSE
 : 
TRUE
;

1115 
	}
}

1126 
public
 
funùiÚ
 
	$®pha_dash
(
$¡r
)

1128  ( ! 
	`´eg_m©ch
("/^([-a-z0-9_-])+$/i", 
$¡r
)è? 
FALSE
 : 
TRUE
;

1129 
	}
}

1140 
public
 
funùiÚ
 
	$num”ic
(
$¡r
)

1142  (
boŞ
)
	`´eg_m©ch
Ğ'/^[\-+]?[0-9]*\.?[0-9]+$/', 
$¡r
);

1144 
	}
}

1155 
public
 
funùiÚ
 
	$is_num”ic
(
$¡r
)

1157  ( ! 
	`is_num”ic
(
$¡r
)è? 
FALSE
 : 
TRUE
;

1158 
	}
}

1169 
public
 
funùiÚ
 
	$š‹g”
(
$¡r
)

1171  (
boŞ
è
	`´eg_m©ch
('/^[\-+]?[0-9]+$/', 
$¡r
);

1172 
	}
}

1183 
public
 
funùiÚ
 
	$decim®
(
$¡r
)

1185  (
boŞ
è
	`´eg_m©ch
('/^[\-+]?[0-9]+\.[0-9]+$/', 
$¡r
);

1186 
	}
}

1197 
public
 
funùiÚ
 
	$g»©”_thª
(
$¡r
, 
$mš
)

1199 iàĞ! 
	`is_num”ic
(
$¡r
))

1201  
FALSE
;

1203  
$¡r
 > 
$mš
;

1204 
	}
}

1215 
public
 
funùiÚ
 
	$Ëss_thª
(
$¡r
, 
$max
)

1217 iàĞ! 
	`is_num”ic
(
$¡r
))

1219  
FALSE
;

1221  
$¡r
 < 
$max
;

1222 
	}
}

1233 
public
 
funùiÚ
 
	$is_Çtu¿l
(
$¡r
)

1235  (
boŞ
è
	`´eg_m©ch
Ğ'/^[0-9]+$/', 
$¡r
);

1236 
	}
}

1247 
public
 
funùiÚ
 
	$is_Çtu¿l_no_z”o
(
$¡r
)

1249 iàĞ! 
	`´eg_m©ch
Ğ'/^[0-9]+$/', 
$¡r
))

1251  
FALSE
;

1254 ià(
$¡r
 == 0)

1256  
FALSE
;

1259  
TRUE
;

1260 
	}
}

1274 
public
 
funùiÚ
 
	$v®id_ba£64
(
$¡r
)

1276  (
boŞ
è! 
	`´eg_m©ch
('/[^a-zA-Z0-9\/\+=]/', 
$¡r
);

1277 
	}
}

1291 
public
 
funùiÚ
 
´•_fÜ_fÜm
(
$d©a
 = '')

1293 ià(
is_¬¿y
(
$d©a
))

1295 
fÜ—ch
 (
$d©a
 
as
 
$key
 => 
$v®
)

1297 
$d©a
[
$key
] = 
$this
->
´•_fÜ_fÜm
(
$v®
);

1300  
	g$d©a
;

1303 ià(
	g$this
->
	g_§ã_fÜm_d©a
 =ğ
FALSE
 
OR
 
$d©a
 === '')

1305  
$d©a
;

1308  
¡r_»¶aû
(
¬¿y
("'", '"', '<', '>'),‡¼ay("&#39;", "&quÙ;", '&É;', '&gt;'), 
¡r¦ashes
(
$d©a
));

1320 
public
 
funùiÚ
 
´•_u¾
(
$¡r
 = '')

1322 ià(
$¡r
 =ğ'h‰p://' 
OR
 $str == '')

1327 ià(
sub¡r
(
$¡r
, 0, 7) != 'http://' && substr($str, 0, 8) != 'https://')

1329 
$¡r
 = 'http://'.$str;

1332  
	g$¡r
;

1344 
public
 
funùiÚ
 
	$¡r_image_gs
(
$¡r
)

1346  
$this
->
CI
->
šput
->
	`¡r_image_gs
(
$¡r
);

1347 
	}
}

1358 
public
 
funùiÚ
 
	$xss_ş—n
(
$¡r
)

1360  
$this
->
CI
->
£cur™y
->
	`xss_ş—n
(
$¡r
);

1361 
	}
}

1372 
public
 
funùiÚ
 
	$’code_php_gs
(
$¡r
)

1374  
	`¡r_»¶aû
(
	`¬¿y
('<?php', '<?PHP', '<?', '?>'),‡¼ay('&É;?php', '&É;?PHP', '&É;?', '?&gt;'), 
$¡r
);

1375 
	}
}

	@system/libraries/Ftp.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_FTP
 {

29 
v¬
 
	m$ho¡Çme
 = '';

30 
v¬
 
	m$u£ºame
 = '';

31 
v¬
 
	m$·sswÜd
 = '';

32 
v¬
 
	m$pÜt
 = 21;

33 
v¬
 
	m$·ssive
 = 
TRUE
;

34 
v¬
 
	m$debug
 = 
FALSE
;

35 
v¬
 
	m$cÚn_id
 = 
FALSE
;

43 
public
 
funùiÚ
 
__cÚ¡ruù
(
$cÚfig
 = 
	$¬¿y
())

45 ià(
	`couÁ
(
$cÚfig
) > 0)

47 
$this
->
	`š™Ÿlize
(
$cÚfig
);

50 
	`log_mes§ge
('debug', "FTP Class Initialized");

62 
funùiÚ
 
	`š™Ÿlize
(
$cÚfig
 = 
	$¬¿y
())

64 
	`fÜ—ch
 (
$cÚfig
 
as
 
$key
 => 
$v®
)

66 ià(
	`is£t
(
$this
->
$key
))

68 
$this
->
$key
 = 
$v®
;

73 
$this
->
ho¡Çme
 = 
	`´eg_»¶aû
('|.+?://|', '', $this->hostname);

74 
	}
}

85 
funùiÚ
 
cÚÃù
(
$cÚfig
 = 
	$¬¿y
())

87 ià(
	`couÁ
(
$cÚfig
) > 0)

89 
$this
->
	`š™Ÿlize
(
$cÚfig
);

92 ià(
FALSE
 ==ğ(
$this
->
cÚn_id
 = @
	`áp_cÚÃù
($this->
ho¡Çme
, $this->
pÜt
)))

94 ià(
$this
->
debug
 =ğ
TRUE
)

96 
$this
->
	`_”rÜ
('ftp_unable_to_connect');

98  
FALSE
;

101 iàĞ! 
$this
->
	`_logš
())

103 ià(
$this
->
debug
 =ğ
TRUE
)

105 
$this
->
	`_”rÜ
('ftp_unable_to_login');

107  
FALSE
;

111 ià(
$this
->
·ssive
 =ğ
TRUE
)

113 
	`áp_·sv
(
$this
->
cÚn_id
, 
TRUE
);

116  
TRUE
;

117 
	}
}

127 
funùiÚ
 
	$_logš
()

129  @
	`áp_logš
(
$this
->
cÚn_id
, $this->
u£ºame
, $this->
·sswÜd
);

130 
	}
}

140 
funùiÚ
 
	$_is_cÚn
()

142 iàĞ! 
	`is_»sourû
(
$this
->
cÚn_id
))

144 ià(
$this
->
debug
 =ğ
TRUE
)

146 
$this
->
	`_”rÜ
('ftp_no_connection');

148  
FALSE
;

150  
TRUE
;

151 
	}
}

170 
funùiÚ
 
chªgedœ
(
$·th
 = '', 
$su´ess_debug
 = 
FALSE
)

172 ià(
$·th
 =ğ'' 
OR
 ! 
$this
->
_is_cÚn
())

174  
FALSE
;

177 
	g$»suÉ
 = @
áp_chdœ
(
$this
->
cÚn_id
, 
$·th
);

179 ià(
	g$»suÉ
 ==ğ
FALSE
)

181 ià(
$this
->
debug
 =ğ
TRUE
 
AND
 
$su´ess_debug
 =ğ
FALSE
)

183 
$this
->
_”rÜ
('ftp_unable_to_changedir');

185  
	gFALSE
;

188  
	gTRUE
;

200 
funùiÚ
 
mkdœ
(
$·th
 = '', 
$³rmissiÚs
 = 
NULL
)

202 ià(
$·th
 =ğ'' 
OR
 ! 
$this
->
_is_cÚn
())

204  
FALSE
;

207 
	g$»suÉ
 = @
áp_mkdœ
(
$this
->
cÚn_id
, 
$·th
);

209 ià(
	g$»suÉ
 ==ğ
FALSE
)

211 ià(
$this
->
debug
 =ğ
TRUE
)

213 
$this
->
_”rÜ
('ftp_unable_to_makdir');

215  
	gFALSE
;

219 iàĞ! 
is_nuÎ
(
$³rmissiÚs
))

221 
	g$this
->
chmod
(
$·th
, ()
$³rmissiÚs
);

224  
	gTRUE
;

238 
funùiÚ
 
u¶ßd
(
$loı©h
, 
$»m·th
, 
$mode
 = 'auto', 
$³rmissiÚs
 = 
NULL
)

240 iàĞ! 
$this
->
_is_cÚn
())

242  
FALSE
;

245 iàĞ! 
fe_exi¡s
(
$loı©h
))

247 
	g$this
->
_”rÜ
('ftp_no_source_file');

248  
	gFALSE
;

252 ià(
	g$mode
 == 'auto')

255 
$ext
 = 
$this
->
_g‘ext
(
$loı©h
);

256 
	g$mode
 = 
$this
->
_£‰y³
(
$ext
);

259 
	g$mode
 = (
$mode
 =ğ'ascii'è? 
FTP_ASCII
 : 
FTP_BINARY
;

261 
	g$»suÉ
 = @
áp_put
(
$this
->
cÚn_id
, 
$»m·th
, 
$loı©h
, 
$mode
);

263 ià(
	g$»suÉ
 ==ğ
FALSE
)

265 ià(
$this
->
debug
 =ğ
TRUE
)

267 
$this
->
_”rÜ
('ftp_unable_to_upload');

269  
	gFALSE
;

273 iàĞ! 
is_nuÎ
(
$³rmissiÚs
))

275 
	g$this
->
chmod
(
$»m·th
, ()
$³rmissiÚs
);

278  
	gTRUE
;

292 
funùiÚ
 
dowÆßd
(
$»m·th
, 
$loı©h
, 
$mode
 = 'auto')

294 iàĞ! 
$this
->
_is_cÚn
())

296  
FALSE
;

300 ià(
	g$mode
 == 'auto')

303 
$ext
 = 
$this
->
_g‘ext
(
$»m·th
);

304 
	g$mode
 = 
$this
->
_£‰y³
(
$ext
);

307 
	g$mode
 = (
$mode
 =ğ'ascii'è? 
FTP_ASCII
 : 
FTP_BINARY
;

309 
	g$»suÉ
 = @
áp_g‘
(
$this
->
cÚn_id
, 
$loı©h
, 
$»m·th
, 
$mode
);

311 ià(
	g$»suÉ
 ==ğ
FALSE
)

313 ià(
$this
->
debug
 =ğ
TRUE
)

315 
$this
->
_”rÜ
('ftp_unable_to_download');

317  
	gFALSE
;

320  
	gTRUE
;

334 
funùiÚ
 
	$»Çme
(
$Şd_fe
, 
$Ãw_fe
, 
$move
 = 
FALSE
)

336 iàĞ! 
$this
->
	`_is_cÚn
())

338  
FALSE
;

341 
$»suÉ
 = @
	`áp_»Çme
(
$this
->
cÚn_id
, 
$Şd_fe
, 
$Ãw_fe
);

343 ià(
$»suÉ
 ==ğ
FALSE
)

345 ià(
$this
->
debug
 =ğ
TRUE
)

347 
$msg
 = (
$move
 =ğ
FALSE
) ? 'ftp_unable_to_rename' : 'ftp_unable_to_move';

349 
$this
->
	`_”rÜ
(
$msg
);

351  
FALSE
;

354  
TRUE
;

355 
	}
}

367 
funùiÚ
 
	$move
(
$Şd_fe
, 
$Ãw_fe
)

369  
$this
->
	`»Çme
(
$Şd_fe
, 
$Ãw_fe
, 
TRUE
);

370 
	}
}

381 
funùiÚ
 
	$d–‘e_fe
(
$f•©h
)

383 iàĞ! 
$this
->
	`_is_cÚn
())

385  
FALSE
;

388 
$»suÉ
 = @
	`áp_d–‘e
(
$this
->
cÚn_id
, 
$f•©h
);

390 ià(
$»suÉ
 ==ğ
FALSE
)

392 ià(
$this
->
debug
 =ğ
TRUE
)

394 
$this
->
	`_”rÜ
('ftp_unable_to_delete');

396  
FALSE
;

399  
TRUE
;

400 
	}
}

412 
funùiÚ
 
	$d–‘e_dœ
(
$f•©h
)

414 iàĞ! 
$this
->
	`_is_cÚn
())

416  
FALSE
;

420 
$f•©h
 = 
	`´eg_»¶aû
("/(.+?)\/*$/", "\\1/", $filepath);

422 
$li¡
 = 
$this
->
	`li¡_fes
(
$f•©h
);

424 ià(
$li¡
 !=ğ
FALSE
 
AND
 
	`couÁ
($list) > 0)

426 
	`fÜ—ch
 (
$li¡
 
as
 
$™em
)

430 iàĞ! @
	`áp_d–‘e
(
$this
->
cÚn_id
, 
$™em
))

432 
$this
->
	`d–‘e_dœ
(
$™em
);

437 
$»suÉ
 = @
	`áp_rmdœ
(
$this
->
cÚn_id
, 
$f•©h
);

439 ià(
$»suÉ
 ==ğ
FALSE
)

441 ià(
$this
->
debug
 =ğ
TRUE
)

443 
$this
->
	`_”rÜ
('ftp_unable_to_delete');

445  
FALSE
;

448  
TRUE
;

449 
	}
}

461 
funùiÚ
 
	$chmod
(
$·th
, 
$³rm
)

463 iàĞ! 
$this
->
	`_is_cÚn
())

465  
FALSE
;

469 iàĞ! 
	`funùiÚ_exi¡s
('ftp_chmod'))

471 ià(
$this
->
debug
 =ğ
TRUE
)

473 
$this
->
	`_”rÜ
('ftp_unable_to_chmod');

475  
FALSE
;

478 
$»suÉ
 = @
	`áp_chmod
(
$this
->
cÚn_id
, 
$³rm
, 
$·th
);

480 ià(
$»suÉ
 ==ğ
FALSE
)

482 ià(
$this
->
debug
 =ğ
TRUE
)

484 
$this
->
	`_”rÜ
('ftp_unable_to_chmod');

486  
FALSE
;

489  
TRUE
;

490 
	}
}

500 
funùiÚ
 
li¡_fes
(
$·th
 = '.')

502 iàĞ! 
$this
->
_is_cÚn
())

504  
FALSE
;

507  
áp_Æi¡
(
$this
->
cÚn_id
, 
$·th
);

524 
funùiÚ
 
	$mœrÜ
(
$loı©h
, 
$»m·th
)

526 iàĞ! 
$this
->
	`_is_cÚn
())

528  
FALSE
;

532 ià(
$å
 = @
	`İ’dœ
(
$loı©h
))

535 iàĞ! 
$this
->
	`chªgedœ
(
$»m·th
, 
TRUE
))

538 iàĞ! 
$this
->
	`mkdœ
(
$»m·th
è
OR
 ! $this->
	`chªgedœ
($rempath))

540  
FALSE
;

545 
FALSE
 !=ğ(
$fe
 = 
	`»addœ
(
$å
)))

547 ià(@
	`is_dœ
(
$loı©h
.
$fe
è&& 
	`sub¡r
($file, 0, 1) != '.')

549 
$this
->
	`mœrÜ
(
$loı©h
.
$fe
."/", 
$»m·th
.$file."/");

551 
	`–£if
 (
	`sub¡r
(
$fe
, 0, 1) != ".")

554 
$ext
 = 
$this
->
	`_g‘ext
(
$fe
);

555 
$mode
 = 
$this
->
	`_£‰y³
(
$ext
);

557 
$this
->
	`u¶ßd
(
$loı©h
.
$fe
, 
$»m·th
.$fe, 
$mode
);

560  
TRUE
;

563  
FALSE
;

564 
	}
}

576 
funùiÚ
 
	$_g‘ext
(
$f’ame
)

578 ià(
FALSE
 ==ğ
	`¡½os
(
$f’ame
, '.'))

583 
$x
 = 
	`ex¶ode
('.', 
$f’ame
);

584  
	`’d
(
$x
);

585 
	}
}

597 
funùiÚ
 
	$_£‰y³
(
$ext
)

599 
$‹xt_ty³s
 = 
	`¬¿y
(

616  (
	`š_¬¿y
(
$ext
, 
$‹xt_ty³s
)) ? 'ascii' : 'binary';

617 
	}
}

629 
funùiÚ
 
	$şo£
()

631 iàĞ! 
$this
->
	`_is_cÚn
())

633  
FALSE
;

636 @
	`áp_şo£
(
$this
->
cÚn_id
);

637 
	}
}

648 
funùiÚ
 
	$_”rÜ
(
$lše
)

650 
$CI
 =& 
	`g‘_š¡ªû
();

651 
$CI
->
Ïng
->
	`lßd
('ftp');

652 
	`show_”rÜ
(
$CI
->
Ïng
->
	`lše
(
$lše
));

653 
	}
}

	@system/libraries/Image_lib.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_Image_lib
 {

29 
v¬
 
	m$image_lib¿ry
 = 'gd2';

30 
v¬
 
	m$lib¿ry_·th
 = '';

31 
v¬
 
	m$dyÇmic_ouut
 = 
FALSE
;

32 
v¬
 
	m$sourû_image
 = '';

33 
v¬
 
	m$Ãw_image
 = '';

34 
v¬
 
	m$width
 = '';

35 
v¬
 
	m$height
 = '';

36 
v¬
 
	m$qu®™y
 = '90';

37 
v¬
 
	m$ü—‹_thumb
 = 
FALSE
;

38 
v¬
 
	m$thumb_m¬k”
 = '_thumb';

39 
v¬
 
	m$mašš_¿tio
 = 
TRUE
;

40 
v¬
 
	m$ma¡”_dim
 = 'auto';

41 
v¬
 
	m$rÙ©iÚ_ªgË
 = '';

42 
v¬
 
	m$x_axis
 = '';

43 
v¬
 
	m$y_axis
 = '';

46 
v¬
 
	m$wm_‹xt
 = '';

47 
v¬
 
	m$wm_ty³
 = 'text';

48 
v¬
 
	m$wm_x_Œª¥
 = 4;

49 
v¬
 
	m$wm_y_Œª¥
 = 4;

50 
v¬
 
	m$wm_ov”Ïy_·th
 = '';

51 
v¬
 
	m$wm_fÚt_·th
 = '';

52 
v¬
 
	m$wm_fÚt_size
 = 17;

53 
v¬
 
	m$wm_v¹_®ignm’t
 = 'B';

54 
v¬
 
	m$wm_hÜ_®ignm’t
 = 'C';

55 
v¬
 
	m$wm_·ddšg
 = 0;

56 
v¬
 
	m$wm_hÜ_off£t
 = 0;

57 
v¬
 
	m$wm_v¹_off£t
 = 0;

58 
v¬
 
	m$wm_fÚt_cŞÜ
 = '#ffffff';

59 
v¬
 
	m$wm_shadow_cŞÜ
 = '';

60 
v¬
 
	m$wm_shadow_di¡ªû
 = 2;

61 
v¬
 
	m$wm_İac™y
 = 50;

64 
v¬
 
	m$sourû_fŞd”
 = '';

65 
v¬
 
	m$de¡_fŞd”
 = '';

66 
v¬
 
	m$mime_ty³
 = '';

67 
v¬
 
	m$Üig_width
 = '';

68 
v¬
 
	m$Üig_height
 = '';

69 
v¬
 
	m$image_ty³
 = '';

70 
v¬
 
	m$size_¡r
 = '';

71 
v¬
 
	m$fuÎ_¤c_·th
 = '';

72 
v¬
 
	m$fuÎ_d¡_·th
 = '';

73 
v¬
 
	m$ü—‹_âc
 = 'imagecreatetruecolor';

74 
v¬
 
	m$cİy_âc
 = 'imagecopyresampled';

75 
v¬
 
	m$”rÜ_msg
 = 
¬¿y
();

76 
v¬
 
	m$wm_u£_drİ_shadow
 = 
FALSE
;

77 
v¬
 
	m$wm_u£_Œu‘y³
 = 
FALSE
;

85 
public
 
funùiÚ
 
__cÚ¡ruù
(
$´İs
 = 
	$¬¿y
())

87 ià(
	`couÁ
(
$´İs
) > 0)

89 
$this
->
	`š™Ÿlize
(
$´İs
);

92 
	`log_mes§ge
('debug', "Image Lib Class Initialized");

105 
funùiÚ
 
	$ş—r
()

107 
$´İs
 = 
	`¬¿y
('source_folder', 'dest_folder', 'source_image', 'full_src_path', 'full_dst_path', 'new_image', 'image_type', 'size_str', 'quality', 'orig_width', 'orig_height', 'rotation_angle', 'x_axis', 'y_axis', 'create_fnc', 'copy_fnc', 'wm_overlay_path', 'wm_use_truetype', 'dynamic_output', 'wm_font_size', 'wm_text', 'wm_vrt_alignment', 'wm_hor_alignment', 'wm_padding', 'wm_hor_offset', 'wm_vrt_offset', 'wm_font_color', 'wm_use_drop_shadow', 'wm_shadow_color', 'wm_shadow_distance', 'wm_opacity');

109 
	`fÜ—ch
 (
$´İs
 
as
 
$v®
)

111 
$this
->
$v®
 = '';

115 
$this
->
ma¡”_dim
 = 'auto';

116 
	}
}

127 
funùiÚ
 
š™Ÿlize
(
$´İs
 = 
	$¬¿y
())

132 ià(
	`couÁ
(
$´İs
) > 0)

134 
	`fÜ—ch
 (
$´İs
 
as
 
$key
 => 
$v®
)

136 
$this
->
$key
 = 
$v®
;

146 ià(
$this
->
sourû_image
 == '')

148 
$this
->
	`£t_”rÜ
('imglib_source_image_required');

149  
FALSE
;

160 iàĞ! 
	`funùiÚ_exi¡s
('getimagesize'))

162 
$this
->
	`£t_”rÜ
('imglib_gd_required_for_props');

163  
FALSE
;

166 
$this
->
image_lib¿ry
 = 
	`¡¹Şow”
($this->image_library);

176 ià(
	`funùiÚ_exi¡s
('»®·th'è
AND
 @
	`»®·th
(
$this
->
sourû_image
è!=ğ
FALSE
)

178 
$fuÎ_sourû_·th
 = 
	`¡r_»¶aû
("\\", "/", 
	`»®·th
(
$this
->
sourû_image
));

182 
$fuÎ_sourû_·th
 = 
$this
->
sourû_image
;

185 
$x
 = 
	`ex¶ode
('/', 
$fuÎ_sourû_·th
);

186 
$this
->
sourû_image
 = 
	`’d
(
$x
);

187 
$this
->
sourû_fŞd”
 = 
	`¡r_»¶aû
($this->
sourû_image
, '', 
$fuÎ_sourû_·th
);

190 iàĞ! 
$this
->
	`g‘_image_´İ”t›s
($this->
sourû_fŞd”
.$this->
sourû_image
))

192  
FALSE
;

204 ià(
$this
->
Ãw_image
 == '')

206 
$this
->
de¡_image
 = $this->
sourû_image
;

207 
$this
->
de¡_fŞd”
 = $this->
sourû_fŞd”
;

211 ià(
	`¡½os
(
$this
->
Ãw_image
, '/'è==ğ
FALSE
)

213 
$this
->
de¡_fŞd”
 = $this->
sourû_fŞd”
;

214 
$this
->
de¡_image
 = $this->
Ãw_image
;

218 ià(
	`funùiÚ_exi¡s
('»®·th'è
AND
 @
	`»®·th
(
$this
->
Ãw_image
è!=ğ
FALSE
)

220 
$fuÎ_de¡_·th
 = 
	`¡r_»¶aû
("\\", "/", 
	`»®·th
(
$this
->
Ãw_image
));

224 
$fuÎ_de¡_·th
 = 
$this
->
Ãw_image
;

228 iàĞ! 
	`´eg_m©ch
("#\.(jpg|j³g|gif|²g)$#i", 
$fuÎ_de¡_·th
))

230 
$this
->
de¡_fŞd”
 = 
$fuÎ_de¡_·th
.'/';

231 
$this
->
de¡_image
 = $this->
sourû_image
;

235 
$x
 = 
	`ex¶ode
('/', 
$fuÎ_de¡_·th
);

236 
$this
->
de¡_image
 = 
	`’d
(
$x
);

237 
$this
->
de¡_fŞd”
 = 
	`¡r_»¶aû
($this->
de¡_image
, '', 
$fuÎ_de¡_·th
);

252 ià(
$this
->
ü—‹_thumb
 ==ğ
FALSE
 
OR
 $this->
thumb_m¬k”
 == '')

254 
$this
->
thumb_m¬k”
 = '';

257 
$xp
 = 
$this
->
	`ex¶ode_Çme
($this->
de¡_image
);

259 
$f’ame
 = 
$xp
['name'];

260 
$fe_ext
 = 
$xp
['ext'];

262 
$this
->
fuÎ_¤c_·th
 = $this->
sourû_fŞd”
.$this->
sourû_image
;

263 
$this
->
fuÎ_d¡_·th
 = $this->
de¡_fŞd”
.
$f’ame
.$this->
thumb_m¬k”
.
$fe_ext
;

273 ià(
$this
->
mašš_¿tio
 ==ğ
TRUE
 && ($this->
width
 !ğ'' 
AND
 $this->
height
 != ''))

275 
$this
->
	`image_»´İÜtiÚ
();

286 ià(
$this
->
width
 == '')

287 
$this
->
width
 = $this->
Üig_width
;

289 ià(
$this
->
height
 == '')

290 
$this
->
height
 = $this->
Üig_height
;

293 
$this
->
qu®™y
 = 
	`Œim
(
	`¡r_»¶aû
("%", "", $this->quality));

295 ià(
$this
->
qu®™y
 =ğ'' 
OR
 $this->qu®™y =ğ0 OR ! 
	`is_num”ic
($this->quality))

296 
$this
->
qu®™y
 = 90;

299 
$this
->
x_axis
 = ($this->x_axi =ğ'' 
OR
 ! 
	`is_num”ic
($this->x_axis)) ? 0 : $this->x_axis;

300 
$this
->
y_axis
 = ($this->y_axi =ğ'' 
OR
 ! 
	`is_num”ic
($this->y_axis)) ? 0 : $this->y_axis;

303 ià(
$this
->
wm_fÚt_cŞÜ
 != '')

305 ià(
	`¡¾’
(
$this
->
wm_fÚt_cŞÜ
) == 6)

307 
$this
->
wm_fÚt_cŞÜ
 = '#'.$this->wm_font_color;

311 ià(
$this
->
wm_shadow_cŞÜ
 != '')

313 ià(
	`¡¾’
(
$this
->
wm_shadow_cŞÜ
) == 6)

315 
$this
->
wm_shadow_cŞÜ
 = '#'.$this->wm_shadow_color;

319 ià(
$this
->
wm_ov”Ïy_·th
 != '')

321 
$this
->
wm_ov”Ïy_·th
 = 
	`¡r_»¶aû
("\\", "/", 
	`»®·th
($this->wm_overlay_path));

324 ià(
$this
->
wm_shadow_cŞÜ
 != '')

326 
$this
->
wm_u£_drİ_shadow
 = 
TRUE
;

329 ià(
$this
->
wm_fÚt_·th
 != '')

331 
$this
->
wm_u£_Œu‘y³
 = 
TRUE
;

334  
TRUE
;

335 
	}
}

348 
funùiÚ
 
	$»size
()

350 
$´ÙocŞ
 = 'image_´oûss_'.
$this
->
image_lib¿ry
;

352 ià(
	`´eg_m©ch
('/gd2$/i', 
$´ÙocŞ
))

354 
$´ÙocŞ
 = 'image_process_gd';

357  
$this
->
	`$´ÙocŞ
('resize');

358 
	}
}

371 
funùiÚ
 
	$üİ
()

373 
$´ÙocŞ
 = 'image_´oûss_'.
$this
->
image_lib¿ry
;

375 ià(
	`´eg_m©ch
('/gd2$/i', 
$´ÙocŞ
))

377 
$´ÙocŞ
 = 'image_process_gd';

380  
$this
->
	`$´ÙocŞ
('crop');

381 
	}
}

394 
funùiÚ
 
	$rÙ©e
()

397 
$degs
 = 
	`¬¿y
(90, 180, 270, 'vrt', 'hor');

399 ià(
$this
->
rÙ©iÚ_ªgË
 =ğ'' 
OR
 ! 
	`š_¬¿y
($this->rÙ©iÚ_ªgË, 
$degs
))

401 
$this
->
	`£t_”rÜ
('imglib_rotation_angle_required');

402  
FALSE
;

406 ià(
$this
->
rÙ©iÚ_ªgË
 =ğ90 
OR
 $this->rotation_angle == 270)

408 
$this
->
width
 = $this->
Üig_height
;

409 
$this
->
height
 = $this->
Üig_width
;

413 
$this
->
width
 = $this->
Üig_width
;

414 
$this
->
height
 = $this->
Üig_height
;

419 ià(
$this
->
image_lib¿ry
 =ğ'imagemagick' 
OR
 $this->image_library == 'netpbm')

421 
$´ÙocŞ
 = 'image_´oûss_'.
$this
->
image_lib¿ry
;

423  
$this
->
	`$´ÙocŞ
('rotate');

426 ià(
$this
->
rÙ©iÚ_ªgË
 =ğ'hÜ' 
OR
 $this->rotation_angle == 'vrt')

428  
$this
->
	`image_mœrÜ_gd
();

432  
$this
->
	`image_rÙ©e_gd
();

434 
	}
}

447 
funùiÚ
 
image_´oûss_gd
(
$aùiÚ
 = 'resize')

449 
$v2_ov”ride
 = 
FALSE
;

453 ià(
	g$this
->
	gdyÇmic_ouut
 ==ğ
FALSE
)

455 ià(
$this
->
Üig_width
 =ğ$this->
width
 
AND
 $this->
Üig_height
 =ğ$this->
height
)

457 ià(
$this
->
sourû_image
 !ğ$this->
Ãw_image
)

459 ià(@
cİy
(
$this
->
fuÎ_¤c_·th
, $this->
fuÎ_d¡_·th
))

461 @
chmod
(
$this
->
fuÎ_d¡_·th
, 
FILE_WRITE_MODE
);

465  
	gTRUE
;

470 ià(
	g$aùiÚ
 == 'crop')

473 
$this
->
Üig_width
 = $this->
width
;

474 
	g$this
->
	gÜig_height
 = 
$this
->
height
;

477 ià(
	g$this
->
gd_v”siÚ
(è!=ğ
FALSE
)

479 
$gd_v”siÚ
 = 
¡r_»¶aû
('0', '', 
$this
->
gd_v”siÚ
());

480 
	g$v2_ov”ride
 = (
$gd_v”siÚ
 =ğ2è? 
TRUE
 : 
FALSE
;

486 
	g$this
->
	gx_axis
 = 0;

487 
	g$this
->
	gy_axis
 = 0;

491 iàĞ! (
	g$¤c_img
 = 
$this
->
image_ü—‹_gd
()))

493  
FALSE
;

503 ià(
	g$this
->
	gimage_lib¿ry
 =ğ'gd2' 
AND
 
funùiÚ_exi¡s
('imagecreatetruecolor'))

505 
$ü—‹
 = 'imagecreatetruecolor';

506 
	g$cİy
 = 'imagecopyresampled';

510 
	g$ü—‹
 = 'imagecreate';

511 
	g$cİy
 = 'imagecopyresized';

514 
	g$d¡_img
 = 
$ü—‹
(
$this
->
width
, $this->
height
);

516 ià(
	g$this
->
	gimage_ty³
 == 3)

518 
imag—ÍhabËndšg
(
$d¡_img
, 
FALSE
);

519 
image§v—Íha
(
$d¡_img
, 
TRUE
);

522 
$cİy
(
$d¡_img
, 
$¤c_img
, 0, 0, 
$this
->
x_axis
, $this->
y_axis
, $this->
width
, $this->
height
, $this->
Üig_width
, $this->
Üig_height
);

525 ià(
	g$this
->
	gdyÇmic_ouut
 =ğ
TRUE
)

527 
$this
->
image_di¥Ïy_gd
(
$d¡_img
);

532 iàĞ! 
	g$this
->
image_§ve_gd
(
$d¡_img
))

534  
	gFALSE
;

539 
imagede¡roy
(
$d¡_img
);

540 
imagede¡roy
(
$¤c_img
);

543 @
chmod
(
$this
->
fuÎ_d¡_·th
, 
FILE_WRITE_MODE
);

545  
	gTRUE
;

559 
funùiÚ
 
image_´oûss_imagemagick
(
$aùiÚ
 = 'resize')

562 ià(
$this
->
lib¿ry_·th
 == '')

564 
$this
->
£t_”rÜ
('imglib_libpath_invalid');

565  
	gFALSE
;

568 iàĞ! 
´eg_m©ch
("/cÚv”t$/i", 
$this
->
lib¿ry_·th
))

570 
	g$this
->
	glib¿ry_·th
 = 
¹rim
(
$this
->
lib¿ry_·th
, '/').'/';

572 
	g$this
->
	glib¿ry_·th
 .= 'convert';

576 
	g$cmd
 = 
$this
->
lib¿ry_·th
." -qu®™y ".$this->
qu®™y
;

578 ià(
	g$aùiÚ
 == 'crop')

580 
$cmd
 .ğ" -üİ ".
$this
->
width
."x".$this->
height
."+".$this->
x_axis
."+".$this->
y_axis
." \"$this->full_src_path\" \"$this->full_dst_path\" 2>&1";

582 
–£if
 (
$aùiÚ
 == 'rotate')

584 
$this
->
rÙ©iÚ_ªgË
)

586 'hÜ' : 
$ªgË
 = '-flop';

588 'v¹' : 
$ªgË
 = '-flip';

590  : 
$ªgË
 = '-rÙ©'.
$this
->
rÙ©iÚ_ªgË
;

594 
	g$cmd
 .ğ" ".
$ªgË
." \"$this->full_src_path\" \"$this->full_dst_path\" 2>&1";

598 
	g$cmd
 .ğ" -»siz".
$this
->
width
."x".$this->
height
." \"$this->full_src_path\" \"$this->full_dst_path\" 2>&1";

601 
	g$»tv®
 = 1;

603 @
exec
(
$cmd
, 
$ouut
, 
$»tv®
);

606 ià(
	g$»tv®
 > 0)

608 
	g$this
->
£t_”rÜ
('imglib_image_process_failed');

609  
	gFALSE
;

613 @
chmod
(
$this
->
fuÎ_d¡_·th
, 
FILE_WRITE_MODE
);

615  
	gTRUE
;

629 
funùiÚ
 
image_´oûss_Ãbm
(
$aùiÚ
 = 'resize')

631 ià(
$this
->
lib¿ry_·th
 == '')

633 
$this
->
£t_”rÜ
('imglib_libpath_invalid');

634  
	gFALSE
;

638 
	g$this
->
	gimage_ty³
)

641 
$cmd_š
 = 'giftopnm';

642 
	g$cmd_out
 = 'ppmtogif';

645 
$cmd_š
 = 'jpegtopnm';

646 
	g$cmd_out
 = 'ppmtojpeg';

649 
$cmd_š
 = 'pngtopnm';

650 
	g$cmd_out
 = 'ppmtopng';

654 ià(
	g$aùiÚ
 == 'crop')

656 
$cmd_šÃr
 = '²mcuˆ-Ëá '.
$this
->
x_axis
.' -tİ '.$this->
y_axis
.' -width '.$this->
width
.' -heighˆ'.$this->
height
;

658 
–£if
 (
$aùiÚ
 == 'rotate')

660 
$this
->
rÙ©iÚ_ªgË
)

662 90 : 
$ªgË
 = 'r270';

664 180 : 
$ªgË
 = 'r180';

666 270 : 
$ªgË
 = 'r90';

668 'v¹' : 
$ªgË
 = 'tb';

670 'hÜ' : 
$ªgË
 = 'lr';

674 
	g$cmd_šÃr
 = '²mæ -'.
$ªgË
.' ';

678 
	g$cmd_šÃr
 = '²msÿË -xysiz'.
$this
->
width
.' '.$this->
height
;

681 
	g$cmd
 = 
$this
->
lib¿ry_·th
.
$cmd_š
.' '.$this->
fuÎ_¤c_·th
.' | '.
$cmd_šÃr
.' | '.
$cmd_out
.' > '.$this->
de¡_fŞd”
.'netpbm.tmp';

683 
	g$»tv®
 = 1;

685 @
exec
(
$cmd
, 
$ouut
, 
$»tv®
);

688 ià(
	g$»tv®
 > 0)

690 
	g$this
->
£t_”rÜ
('imglib_image_process_failed');

691  
	gFALSE
;

697 
cİy
 (
$this
->
de¡_fŞd”
.'Ãbm.tmp', $this->
fuÎ_d¡_·th
);

698 
uÆšk
 (
$this
->
de¡_fŞd”
.'netpbm.tmp');

699 @
chmod
(
$this
->
fuÎ_d¡_·th
, 
FILE_WRITE_MODE
);

701  
	gTRUE
;

712 
funùiÚ
 
	$image_rÙ©e_gd
()

715 iàĞ! (
$¤c_img
 = 
$this
->
	`image_ü—‹_gd
()))

717  
FALSE
;

725 
$wh™e
 = 
	`imagecŞÜ®loÿ‹
(
$¤c_img
, 255, 255, 255);

728 
$d¡_img
 = 
	`imag”Ù©e
(
$¤c_img
, 
$this
->
rÙ©iÚ_ªgË
, 
$wh™e
);

731 ià(
$this
->
dyÇmic_ouut
 =ğ
TRUE
)

733 
$this
->
	`image_di¥Ïy_gd
(
$d¡_img
);

738 iàĞ! 
$this
->
	`image_§ve_gd
(
$d¡_img
))

740  
FALSE
;

745 
	`imagede¡roy
(
$d¡_img
);

746 
	`imagede¡roy
(
$¤c_img
);

750 @
	`chmod
(
$this
->
fuÎ_d¡_·th
, 
FILE_WRITE_MODE
);

752  
TRUE
;

753 
	}
}

765 
funùiÚ
 
	$image_mœrÜ_gd
()

767 iàĞ! 
$¤c_img
 = 
$this
->
	`image_ü—‹_gd
())

769  
FALSE
;

772 
$width
 = 
$this
->
Üig_width
;

773 
$height
 = 
$this
->
Üig_height
;

775 ià(
$this
->
rÙ©iÚ_ªgË
 == 'hor')

777 
$i
 = 0; $˜< 
$height
; $i++)

779 
$Ëá
 = 0;

780 
$right
 = 
$width
-1;

782 
$Ëá
 < 
$right
)

784 
$ş
 = 
	`imagecŞÜ©
(
$¤c_img
, 
$Ëá
, 
$i
);

785 
$ü
 = 
	`imagecŞÜ©
(
$¤c_img
, 
$right
, 
$i
);

787 
	`image£ix–
(
$¤c_img
, 
$Ëá
, 
$i
, 
$ü
);

788 
	`image£ix–
(
$¤c_img
, 
$right
, 
$i
, 
$ş
);

790 
$Ëá
++;

791 
$right
--;

797 
$i
 = 0; $˜< 
$width
; $i++)

799 
$tİ
 = 0;

800 
$bÙ
 = 
$height
-1;

802 
$tİ
 < 
$bÙ
)

804 
$ù
 = 
	`imagecŞÜ©
(
$¤c_img
, 
$i
, 
$tİ
);

805 
$cb
 = 
	`imagecŞÜ©
(
$¤c_img
, 
$i
, 
$bÙ
);

807 
	`image£ix–
(
$¤c_img
, 
$i
, 
$tİ
, 
$cb
);

808 
	`image£ix–
(
$¤c_img
, 
$i
, 
$bÙ
, 
$ù
);

810 
$tİ
++;

811 
$bÙ
--;

817 ià(
$this
->
dyÇmic_ouut
 =ğ
TRUE
)

819 
$this
->
	`image_di¥Ïy_gd
(
$¤c_img
);

824 iàĞ! 
$this
->
	`image_§ve_gd
(
$¤c_img
))

826  
FALSE
;

831 
	`imagede¡roy
(
$¤c_img
);

834 @
	`chmod
(
$this
->
fuÎ_d¡_·th
, 
FILE_WRITE_MODE
);

836  
TRUE
;

837 
	}
}

851 
funùiÚ
 
	$w©”m¬k
()

853 ià(
$this
->
wm_ty³
 == 'overlay')

855  
$this
->
	`ov”Ïy_w©”m¬k
();

859  
$this
->
	`‹xt_w©”m¬k
();

861 
	}
}

871 
funùiÚ
 
	$ov”Ïy_w©”m¬k
()

873 iàĞ! 
	`funùiÚ_exi¡s
('imagecolortransparent'))

875 
$this
->
	`£t_”rÜ
('imglib_gd_required');

876  
FALSE
;

880 
$this
->
	`g‘_image_´İ”t›s
();

883 
$´İs
 = 
$this
->
	`g‘_image_´İ”t›s
($this->
wm_ov”Ïy_·th
, 
TRUE
);

884 
$wm_img_ty³
 = 
$´İs
['image_type'];

885 
$wm_width
 = 
$´İs
['width'];

886 
$wm_height
 = 
$´İs
['height'];

889 
$wm_img
 = 
$this
->
	`image_ü—‹_gd
($this->
wm_ov”Ïy_·th
, 
$wm_img_ty³
);

890 
$¤c_img
 = 
$this
->
	`image_ü—‹_gd
($this->
fuÎ_¤c_·th
);

899 
$this
->
wm_v¹_®ignm’t
 = 
	`¡¹ouµ”
(
	`sub¡r
($this->wm_vrt_alignment, 0, 1));

900 
$this
->
wm_hÜ_®ignm’t
 = 
	`¡¹ouµ”
(
	`sub¡r
($this->wm_hor_alignment, 0, 1));

902 ià(
$this
->
wm_v¹_®ignm’t
 == 'B')

903 
$this
->
wm_v¹_off£t
 = $this->wm_vrt_offset * -1;

905 ià(
$this
->
wm_hÜ_®ignm’t
 == 'R')

906 
$this
->
wm_hÜ_off£t
 = $this->wm_hor_offset * -1;

909 
$x_axis
 = 
$this
->
wm_hÜ_off£t
 + $this->
wm_·ddšg
;

910 
$y_axis
 = 
$this
->
wm_v¹_off£t
 + $this->
wm_·ddšg
;

913 
$this
->
wm_v¹_®ignm’t
)

917 'M': 
$y_axis
 +ğ(
$this
->
Üig_height
 / 2è- (
$wm_height
 / 2);

919 'B': 
$y_axis
 +ğ
$this
->
Üig_height
 - 
$wm_height
;

924 
$this
->
wm_hÜ_®ignm’t
)

928 'C': 
$x_axis
 +ğ(
$this
->
Üig_width
 / 2è- (
$wm_width
 / 2);

930 'R': 
$x_axis
 +ğ
$this
->
Üig_width
 - 
$wm_width
;

935 ià(
$wm_img_ty³
 =ğ3 
AND
 
	`funùiÚ_exi¡s
('imagealphablending'))

937 @
	`imag—ÍhabËndšg
(
$¤c_img
, 
TRUE
);

941 
$rgba
 = 
	`imagecŞÜ©
(
$wm_img
, 
$this
->
wm_x_Œª¥
, $this->
wm_y_Œª¥
);

942 
$®pha
 = (
$rgba
 & 0x7F000000) >> 24;

945 ià(
$®pha
 > 0)

948 
	`imagecİy
(
$¤c_img
, 
$wm_img
, 
$x_axis
, 
$y_axis
, 0, 0, 
$wm_width
, 
$wm_height
);

953 
	`imagecŞÜŒª¥¬’t
(
$wm_img
, 
	`imagecŞÜ©
($wm_img, 
$this
->
wm_x_Œª¥
, $this->
wm_y_Œª¥
));

954 
	`imagecİym”ge
(
$¤c_img
, 
$wm_img
, 
$x_axis
, 
$y_axis
, 0, 0, 
$wm_width
, 
$wm_height
, 
$this
->
wm_İac™y
);

958 ià(
$this
->
dyÇmic_ouut
 =ğ
TRUE
)

960 
$this
->
	`image_di¥Ïy_gd
(
$¤c_img
);

964 iàĞ! 
$this
->
	`image_§ve_gd
(
$¤c_img
))

966  
FALSE
;

970 
	`imagede¡roy
(
$¤c_img
);

971 
	`imagede¡roy
(
$wm_img
);

973  
TRUE
;

974 
	}
}

984 
funùiÚ
 
	$‹xt_w©”m¬k
()

986 iàĞ! (
$¤c_img
 = 
$this
->
	`image_ü—‹_gd
()))

988  
FALSE
;

991 ià(
$this
->
wm_u£_Œu‘y³
 =ğ
TRUE
 
AND
 ! 
	`fe_exi¡s
($this->
wm_fÚt_·th
))

993 
$this
->
	`£t_”rÜ
('imglib_missing_font');

994  
FALSE
;

998 
$this
->
	`g‘_image_´İ”t›s
();

1001 
$this
->
wm_fÚt_cŞÜ
 = 
	`¡r_»¶aû
('#', '', $this->wm_font_color);

1002 
$this
->
wm_shadow_cŞÜ
 = 
	`¡r_»¶aû
('#', '', $this->wm_shadow_color);

1004 
$R1
 = 
	`hexdec
(
	`sub¡r
(
$this
->
wm_fÚt_cŞÜ
, 0, 2));

1005 
$G1
 = 
	`hexdec
(
	`sub¡r
(
$this
->
wm_fÚt_cŞÜ
, 2, 2));

1006 
$B1
 = 
	`hexdec
(
	`sub¡r
(
$this
->
wm_fÚt_cŞÜ
, 4, 2));

1008 
$R2
 = 
	`hexdec
(
	`sub¡r
(
$this
->
wm_shadow_cŞÜ
, 0, 2));

1009 
$G2
 = 
	`hexdec
(
	`sub¡r
(
$this
->
wm_shadow_cŞÜ
, 2, 2));

1010 
$B2
 = 
	`hexdec
(
	`sub¡r
(
$this
->
wm_shadow_cŞÜ
, 4, 2));

1012 
$txt_cŞÜ
 = 
	`imagecŞÜşo£¡
(
$¤c_img
, 
$R1
, 
$G1
, 
$B1
);

1013 
$d½_cŞÜ
 = 
	`imagecŞÜşo£¡
(
$¤c_img
, 
$R2
, 
$G2
, 
$B2
);

1022 ià(
$this
->
wm_v¹_®ignm’t
 == 'B')

1023 
$this
->
wm_v¹_off£t
 = $this->wm_vrt_offset * -1;

1025 ià(
$this
->
wm_hÜ_®ignm’t
 == 'R')

1026 
$this
->
wm_hÜ_off£t
 = $this->wm_hor_offset * -1;

1031 ià(
$this
->
wm_u£_Œu‘y³
 =ğ
TRUE
)

1033 ià(
$this
->
wm_fÚt_size
 == '')

1034 
$this
->
wm_fÚt_size
 = '17';

1036 
$fÚtwidth
 = 
$this
->
wm_fÚt_size
-($this->wm_font_size/4);

1037 
$fÚtheight
 = 
$this
->
wm_fÚt_size
;

1038 
$this
->
wm_v¹_off£t
 +ğ$this->
wm_fÚt_size
;

1042 
$fÚtwidth
 = 
	`imagefÚtwidth
(
$this
->
wm_fÚt_size
);

1043 
$fÚtheight
 = 
	`imagefÚtheight
(
$this
->
wm_fÚt_size
);

1047 
$x_axis
 = 
$this
->
wm_hÜ_off£t
 + $this->
wm_·ddšg
;

1048 
$y_axis
 = 
$this
->
wm_v¹_off£t
 + $this->
wm_·ddšg
;

1051 ià(
$this
->
wm_u£_drİ_shadow
 =ğ
FALSE
)

1052 
$this
->
wm_shadow_di¡ªû
 = 0;

1054 
$this
->
wm_v¹_®ignm’t
 = 
	`¡¹ouµ”
(
	`sub¡r
($this->wm_vrt_alignment, 0, 1));

1055 
$this
->
wm_hÜ_®ignm’t
 = 
	`¡¹ouµ”
(
	`sub¡r
($this->wm_hor_alignment, 0, 1));

1057 
$this
->
wm_v¹_®ignm’t
)

1061 "M": 
$y_axis
 +ğ(
$this
->
Üig_height
/2)+(
$fÚtheight
/2);

1063 "B": 
$y_axis
 +ğ(
$this
->
Üig_height
 - 
$fÚtheight
 - $this->
wm_shadow_di¡ªû
 - ($fontheight/2));

1067 
$x_shad
 = 
$x_axis
 + 
$this
->
wm_shadow_di¡ªû
;

1068 
$y_shad
 = 
$y_axis
 + 
$this
->
wm_shadow_di¡ªû
;

1071 
$this
->
wm_hÜ_®ignm’t
)

1076 ià(
$this
->
wm_u£_drİ_shadow
)

1077 
$x_shad
 +ğ(
$this
->
Üig_width
 - 
$fÚtwidth
*
	`¡¾’
($this->
wm_‹xt
));

1078 
$x_axis
 +ğ(
$this
->
Üig_width
 - 
$fÚtwidth
*
	`¡¾’
($this->
wm_‹xt
));

1081 ià(
$this
->
wm_u£_drİ_shadow
)

1082 
$x_shad
 +ğ
	`æoÜ
((
$this
->
Üig_width
 - 
$fÚtwidth
*
	`¡¾’
($this->
wm_‹xt
))/2);

1083 
$x_axis
 +ğ
	`æoÜ
((
$this
->
Üig_width
 -
$fÚtwidth
*
	`¡¾’
($this->
wm_‹xt
))/2);

1088 ià(
$this
->
wm_u£_Œu‘y³
)

1090 ià(
$this
->
wm_u£_drİ_shadow
)

1091 
	`imag‘táext
(
$¤c_img
, 
$this
->
wm_fÚt_size
, 0, 
$x_shad
, 
$y_shad
, 
$d½_cŞÜ
, $this->
wm_fÚt_·th
, $this->
wm_‹xt
);

1092 
	`imag‘táext
(
$¤c_img
, 
$this
->
wm_fÚt_size
, 0, 
$x_axis
, 
$y_axis
, 
$txt_cŞÜ
, $this->
wm_fÚt_·th
, $this->
wm_‹xt
);

1096 ià(
$this
->
wm_u£_drİ_shadow
)

1097 
	`image¡ršg
(
$¤c_img
, 
$this
->
wm_fÚt_size
, 
$x_shad
, 
$y_shad
, $this->
wm_‹xt
, 
$d½_cŞÜ
);

1098 
	`image¡ršg
(
$¤c_img
, 
$this
->
wm_fÚt_size
, 
$x_axis
, 
$y_axis
, $this->
wm_‹xt
, 
$txt_cŞÜ
);

1102 ià(
$this
->
dyÇmic_ouut
 =ğ
TRUE
)

1104 
$this
->
	`image_di¥Ïy_gd
(
$¤c_img
);

1108 
$this
->
	`image_§ve_gd
(
$¤c_img
);

1111 
	`imagede¡roy
(
$¤c_img
);

1113  
TRUE
;

1114 
	}
}

1128 
funùiÚ
 
image_ü—‹_gd
(
$·th
 = '', 
$image_ty³
 = '')

1130 ià(
$·th
 == '')

1131 
$·th
 = 
$this
->
fuÎ_¤c_·th
;

1133 ià(
	g$image_ty³
 == '')

1134 
$image_ty³
 = 
$this
->
image_ty³
;

1137 
	g$image_ty³
)

1140 iàĞ! 
funùiÚ_exi¡s
('imagecreatefromgif'))

1142 
$this
->
£t_”rÜ
(
¬¿y
('imglib_unsupported_imagecreate', 'imglib_gif_not_supported'));

1143  
	gFALSE
;

1146  
imageü—‹äomgif
(
$·th
);

1149 iàĞ! 
funùiÚ_exi¡s
('imagecreatefromjpeg'))

1151 
$this
->
£t_”rÜ
(
¬¿y
('imglib_unsupported_imagecreate', 'imglib_jpg_not_supported'));

1152  
	gFALSE
;

1155  
imageü—‹äomj³g
(
$·th
);

1158 iàĞ! 
funùiÚ_exi¡s
('imagecreatefrompng'))

1160 
$this
->
£t_”rÜ
(
¬¿y
('imglib_unsupported_imagecreate', 'imglib_png_not_supported'));

1161  
	gFALSE
;

1164  
imageü—‹äom²g
(
$·th
);

1169 
	g$this
->
£t_”rÜ
(
¬¿y
('imglib_unsupported_imagecreate'));

1170  
	gFALSE
;

1185 
funùiÚ
 
	$image_§ve_gd
(
$»sourû
)

1187 
$this
->
image_ty³
)

1190 iàĞ! 
	`funùiÚ_exi¡s
('imagegif'))

1192 
$this
->
	`£t_”rÜ
(
	`¬¿y
('imglib_unsupported_imagecreate', 'imglib_gif_not_supported'));

1193  
FALSE
;

1196 iàĞ! @
	`imagegif
(
$»sourû
, 
$this
->
fuÎ_d¡_·th
))

1198 
$this
->
	`£t_”rÜ
('imglib_save_failed');

1199  
FALSE
;

1203 iàĞ! 
	`funùiÚ_exi¡s
('imagejpeg'))

1205 
$this
->
	`£t_”rÜ
(
	`¬¿y
('imglib_unsupported_imagecreate', 'imglib_jpg_not_supported'));

1206  
FALSE
;

1209 iàĞ! @
	`imagej³g
(
$»sourû
, 
$this
->
fuÎ_d¡_·th
, $this->
qu®™y
))

1211 
$this
->
	`£t_”rÜ
('imglib_save_failed');

1212  
FALSE
;

1216 iàĞ! 
	`funùiÚ_exi¡s
('imagepng'))

1218 
$this
->
	`£t_”rÜ
(
	`¬¿y
('imglib_unsupported_imagecreate', 'imglib_png_not_supported'));

1219  
FALSE
;

1222 iàĞ! @
	`imag•ng
(
$»sourû
, 
$this
->
fuÎ_d¡_·th
))

1224 
$this
->
	`£t_”rÜ
('imglib_save_failed');

1225  
FALSE
;

1229 
$this
->
	`£t_”rÜ
(
	`¬¿y
('imglib_unsupported_imagecreate'));

1230  
FALSE
;

1234  
TRUE
;

1235 
	}
}

1246 
funùiÚ
 
	$image_di¥Ïy_gd
(
$»sourû
)

1248 
	`h—d”
("Content-Disposition: filename={$this->source_image};");

1249 
	`h—d”
("Content-Type: {$this->mime_type}");

1250 
	`h—d”
('Content-Transfer-Encoding: binary');

1251 
	`h—d”
('La¡-Modif›d: '.
	`gmd©e
('D, d M Y H:i:s', 
	`time
()).' GMT');

1253 
$this
->
image_ty³
)

1255 1 : 
	`imagegif
(
$»sourû
);

1257 2 : 
	`imagej³g
(
$»sourû
, '', 
$this
->
qu®™y
);

1259 3 : 
	`imag•ng
(
$»sourû
);

1261  : 
echo
 'Unableo displayhe image';

1264 
	}
}

1281 
funùiÚ
 
	$image_»´İÜtiÚ
()

1283 iàĞ! 
	`is_num”ic
(
$this
->
width
è
OR
 ! is_num”ic($this->
height
) OR $this->width == 0 OR $this->height == 0)

1286 iàĞ! 
	`is_num”ic
(
$this
->
Üig_width
è
OR
 ! is_num”ic($this->
Üig_height
) OR $this->orig_width == 0 OR $this->orig_height == 0)

1289 
$Ãw_width
 = 
	`û
(
$this
->
Üig_width
*$this->
height
/$this->
Üig_height
);

1290 
$Ãw_height
 = 
	`û
(
$this
->
width
*$this->
Üig_height
/$this->
Üig_width
);

1292 
$¿tio
 = ((
$this
->
Üig_height
/$this->
Üig_width
è- ($this->
height
/$this->
width
));

1294 ià(
$this
->
ma¡”_dim
 !ğ'width' 
AND
 $this->master_dim != 'height')

1296 
$this
->
ma¡”_dim
 = (
$¿tio
 < 0) ? 'width' : 'height';

1299 ià((
$this
->
width
 !ğ
$Ãw_width
è
	`AND
 ($this->
height
 !ğ
$Ãw_height
))

1301 ià(
$this
->
ma¡”_dim
 == 'height')

1303 
$this
->
width
 = 
$Ãw_width
;

1307 
$this
->
height
 = 
$Ãw_height
;

1310 
	}
}

1323 
funùiÚ
 
g‘_image_´İ”t›s
(
$·th
 = '', 
$»tuº
 = 
FALSE
)

1328 ià(
$·th
 == '')

1329 
$·th
 = 
$this
->
fuÎ_¤c_·th
;

1331 iàĞ! 
fe_exi¡s
(
$·th
))

1333 
	g$this
->
£t_”rÜ
('imglib_invalid_path');

1334  
	gFALSE
;

1337 
	g$v®s
 = @
g‘imagesize
(
$·th
);

1339 
	g$ty³s
 = 
¬¿y
(1 => 'gif', 2 => 'jpeg', 3 => 'png');

1341 
	g$mime
 = (
is£t
(
$ty³s
[
$v®s
['2']])) ? 'image/'.$types[$vals['2']] : 'image/jpg';

1343 ià(
	g$»tuº
 =ğ
TRUE
)

1345 
$v
['width'] = 
$v®s
['0'];

1346 
	g$v
['height'] = 
$v®s
['1'];

1347 
	g$v
['image_ty³'] = 
$v®s
['2'];

1348 
	g$v
['size_¡r'] = 
$v®s
['3'];

1349 
	g$v
['mime_ty³'] = 
$mime
;

1351  
	g$v
;

1354 
	g$this
->
	gÜig_width
 = 
$v®s
['0'];

1355 
	g$this
->
	gÜig_height
 = 
$v®s
['1'];

1356 
	g$this
->
	gimage_ty³
 = 
$v®s
['2'];

1357 
	g$this
->
	gsize_¡r
 = 
$v®s
['3'];

1358 
	g$this
->
	gmime_ty³
 = 
$mime
;

1360  
	gTRUE
;

1383 
funùiÚ
 
	$size_ÿlcuÏtÜ
(
$v®s
)

1385 iàĞ! 
	`is_¬¿y
(
$v®s
))

1390 
$®lowed
 = 
	`¬¿y
('new_width', 'new_height', 'width', 'height');

1392 
	`fÜ—ch
 (
$®lowed
 
as
 
$™em
)

1394 iàĞ! 
	`is£t
(
$v®s
[
$™em
]è
OR
 $vals[$item] == '')

1395 
$v®s
[
$™em
] = 0;

1398 ià(
$v®s
['width'] =ğ0 
OR
 $vals['height'] == 0)

1400  
$v®s
;

1403 ià(
$v®s
['new_width'] == 0)

1405 
$v®s
['Ãw_width'] = 
	`û
($vals['width']*$vals['new_height']/$vals['height']);

1407 
	`–£if
 (
$v®s
['new_height'] == 0)

1409 
$v®s
['Ãw_height'] = 
	`û
($vals['new_width']*$vals['height']/$vals['width']);

1412  
$v®s
;

1413 
	}
}

1431 
funùiÚ
 
	$ex¶ode_Çme
(
$sourû_image
)

1433 
$ext
 = 
	`¡¼chr
(
$sourû_image
, '.');

1434 
$Çme
 = (
$ext
 ==ğ
FALSE
è? 
$sourû_image
 : 
	`sub¡r
($sourû_image, 0, -
	`¡¾’
($ext));

1436  
	`¬¿y
('ext' => 
$ext
, 'Çme' => 
$Çme
);

1437 
	}
}

1447 
funùiÚ
 
	$gd_lßded
()

1449 iàĞ! 
	`ex‹nsiÚ_lßded
('gd'))

1451 iàĞ! 
	`dl
('gd.so'))

1453  
FALSE
;

1457  
TRUE
;

1458 
	}
}

1468 
funùiÚ
 
	$gd_v”siÚ
()

1470 ià(
	`funùiÚ_exi¡s
('gd_info'))

1472 
$gd_v”siÚ
 = @
	`gd_šfo
();

1473 
$gd_v”siÚ
 = 
	`´eg_»¶aû
("/\D/", "", $gd_version['GD Version']);

1475  
$gd_v”siÚ
;

1478  
FALSE
;

1479 
	}
}

1490 
funùiÚ
 
	$£t_”rÜ
(
$msg
)

1492 
$CI
 =& 
	`g‘_š¡ªû
();

1493 
$CI
->
Ïng
->
	`lßd
('imglib');

1495 ià(
	`is_¬¿y
(
$msg
))

1497 
	`fÜ—ch
 (
$msg
 
as
 
$v®
)

1500 
$msg
 = (
$CI
->
Ïng
->
	`lše
(
$v®
è=ğ
FALSE
) ? $val : $CI->lang->line($val);

1501 
$this
->
”rÜ_msg
[] = 
$msg
;

1502 
	`log_mes§ge
('”rÜ', 
$msg
);

1507 
$msg
 = (
$CI
->
Ïng
->
	`lše
($msgè=ğ
FALSE
) ? $msg : $CI->lang->line($msg);

1508 
$this
->
”rÜ_msg
[] = 
$msg
;

1509 
	`log_mes§ge
('”rÜ', 
$msg
);

1511 
	}
}

1522 
funùiÚ
 
di¥Ïy_”rÜs
(
$İ’
 = '<p>', 
$şo£
 = '</p>')

1524 
$¡r
 = '';

1525 
fÜ—ch
 (
$this
->
”rÜ_msg
 
as
 
$v®
)

1527 
	g$¡r
 .ğ
$İ’
.
$v®
.
$şo£
;

1530  
	g$¡r
;

	@system/libraries/Javascript.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_Javasüt
 {

29 
v¬
 
	m$_javasüt_loÿtiÚ
 = 'js';

31 
public
 
funùiÚ
 
__cÚ¡ruù
(
$·¿ms
 = 
	$¬¿y
())

33 
$deçuÉs
 = 
	`¬¿y
('js_lib¿ry_driv”' => 'jqu”y', 'autŞßd' => 
TRUE
);

35 
	`fÜ—ch
 (
$deçuÉs
 
as
 
$key
 => 
$v®
)

37 ià(
	`is£t
(
$·¿ms
[
$key
]) && $params[$key] !== "")

39 
$deçuÉs
[
$key
] = 
$·¿ms
[$key];

43 
	`exŒaù
(
$deçuÉs
);

45 
$this
->
CI
 =& 
	`g‘_š¡ªû
();

48 
$this
->
CI
->
lßd
->
	`lib¿ry
('javasüt/'.
$js_lib¿ry_driv”
, 
	`¬¿y
('autŞßd' => 
$autŞßd
));

50 
$this
->
js
 =& $this->
CI
->
$js_lib¿ry_driv”
;

52 
	`log_mes§ge
('debug', "Javascript Class Initialized‡nd†oaded. Driver used: $js_library_driver");

69 
funùiÚ
 
	`blur
(
$–em’t
 = 'this', 
$js
 = '')

71  
$this
->
js
->
	`_blur
(
$–em’t
, 
$js
);

72 
	}
}

86 
funùiÚ
 
chªge
(
$–em’t
 = 'this', 
$js
 = '')

88  
$this
->
js
->
_chªge
(
$–em’t
, 
$js
);

104 
funùiÚ
 
şick
(
$–em’t
 = 'this', 
$js
 = '', 
$»t_çl£
 = 
TRUE
)

106  
$this
->
js
->
_şick
(
$–em’t
, 
$js
, 
$»t_çl£
);

121 
funùiÚ
 
dblşick
(
$–em’t
 = 'this', 
$js
 = '')

123  
$this
->
js
->
_dblşick
(
$–em’t
, 
$js
);

138 
funùiÚ
 
”rÜ
(
$–em’t
 = 'this', 
$js
 = '')

140  
$this
->
js
->
_”rÜ
(
$–em’t
, 
$js
);

155 
funùiÚ
 
focus
(
$–em’t
 = 'this', 
$js
 = '')

157  
$this
->
js
->
__add_ev’t
(
$focus
, 
$js
);

173 
funùiÚ
 
hov”
(
$–em’t
 = 'this', 
$ov”
, 
$out
)

175  
	g$this
->
	gjs
->
__hov”
(
$–em’t
, 
$ov”
, 
$out
);

190 
funùiÚ
 
keydown
(
$–em’t
 = 'this', 
$js
 = '')

192  
$this
->
js
->
_keydown
(
$–em’t
, 
$js
);

207 
funùiÚ
 
keyup
(
$–em’t
 = 'this', 
$js
 = '')

209  
$this
->
js
->
_keyup
(
$–em’t
, 
$js
);

224 
funùiÚ
 
lßd
(
$–em’t
 = 'this', 
$js
 = '')

226  
$this
->
js
->
_lßd
(
$–em’t
, 
$js
);

241 
funùiÚ
 
mou£down
(
$–em’t
 = 'this', 
$js
 = '')

243  
$this
->
js
->
_mou£down
(
$–em’t
, 
$js
);

258 
funùiÚ
 
mou£out
(
$–em’t
 = 'this', 
$js
 = '')

260  
$this
->
js
->
_mou£out
(
$–em’t
, 
$js
);

275 
funùiÚ
 
mou£ov”
(
$–em’t
 = 'this', 
$js
 = '')

277  
$this
->
js
->
_mou£ov”
(
$–em’t
, 
$js
);

292 
funùiÚ
 
mou£up
(
$–em’t
 = 'this', 
$js
 = '')

294  
$this
->
js
->
_mou£up
(
$–em’t
, 
$js
);

308 
funùiÚ
 
	$ouut
(
$js
)

310  
$this
->
js
->
	`_ouut
(
$js
);

311 
	}
}

325 
funùiÚ
 
	$»ady
(
$js
)

327  
$this
->
js
->
	`_docum’t_»ady
(
$js
);

328 
	}
}

342 
funùiÚ
 
»size
(
$–em’t
 = 'this', 
$js
 = '')

344  
$this
->
js
->
_»size
(
$–em’t
, 
$js
);

359 
funùiÚ
 
süŞl
(
$–em’t
 = 'this', 
$js
 = '')

361  
$this
->
js
->
_süŞl
(
$–em’t
, 
$js
);

376 
funùiÚ
 
uÆßd
(
$–em’t
 = 'this', 
$js
 = '')

378  
$this
->
js
->
_uÆßd
(
$–em’t
, 
$js
);

396 
funùiÚ
 
addCÏss
(
$–em’t
 = 'this', 
$şass
 = '')

398  
$this
->
js
->
_addCÏss
(
$–em’t
, 
$şass
);

414 
funùiÚ
 
ªim©e
(
$–em’t
 = 'this', 
$·¿ms
 = 
¬¿y
(), 
$¥“d
 = '', 
$exŒa
 = '')

416  
$this
->
js
->
_ªim©e
(
$–em’t
, 
$·¿ms
, 
$¥“d
, 
$exŒa
);

432 
funùiÚ
 
çdeIn
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

434  
$this
->
js
->
_çdeIn
(
$–em’t
, 
$¥“d
, 
$ÿÎback
);

450 
funùiÚ
 
çdeOut
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

452  
$this
->
js
->
_çdeOut
(
$–em’t
, 
$¥“d
, 
$ÿÎback
);

467 
funùiÚ
 
¦ideUp
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

469  
$this
->
js
->
_¦ideUp
(
$–em’t
, 
$¥“d
, 
$ÿÎback
);

485 
funùiÚ
 
»moveCÏss
(
$–em’t
 = 'this', 
$şass
 = '')

487  
$this
->
js
->
_»moveCÏss
(
$–em’t
, 
$şass
);

503 
funùiÚ
 
¦ideDown
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

505  
$this
->
js
->
_¦ideDown
(
$–em’t
, 
$¥“d
, 
$ÿÎback
);

521 
funùiÚ
 
¦ideToggË
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

523  
$this
->
js
->
_¦ideToggË
(
$–em’t
, 
$¥“d
, 
$ÿÎback
);

540 
funùiÚ
 
hide
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

542  
$this
->
js
->
_hide
(
$–em’t
, 
$¥“d
, 
$ÿÎback
);

556 
funùiÚ
 
toggË
(
$–em’t
 = 'this')

558  
$this
->
js
->
_toggË
(
$–em’t
);

573 
funùiÚ
 
toggËCÏss
(
$–em’t
 = 'this', 
$şass
='')

575  
$this
->
js
->
_toggËCÏss
(
$–em’t
, 
$şass
);

591 
funùiÚ
 
show
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

593  
$this
->
js
->
_show
(
$–em’t
, 
$¥“d
, 
$ÿÎback
);

608 
funùiÚ
 
compe
(
$v›w_v¬
 = 'süt_foÙ', 
$süt_gs
 = 
TRUE
)

610 
$this
->
js
->
_compe
(
$v›w_v¬
, 
$süt_gs
);

621 
funùiÚ
 
	$ş—r_compe
()

623 
$this
->
js
->
	`_ş—r_compe
();

624 
	}
}

637 
funùiÚ
 
ex‹º®
(
$ex‹º®_fe
 = '', 
$»Ïtive
 = 
FALSE
)

639 ià(
$ex‹º®_fe
 !== '')

641 
$this
->
_javasüt_loÿtiÚ
 = 
$ex‹º®_fe
;

645 ià(
	g$this
->
	gCI
->
	gcÚfig
->
™em
('javascript_location') != '')

647 
$this
->
_javasüt_loÿtiÚ
 = $this->
CI
->
cÚfig
->
™em
('javascript_location');

651 ià(
	g$»Ïtive
 ==ğ
TRUE
 
OR
 
¡ºcmp
(
$ex‹º®_fe
, 'http://', 7) == 0 OR strncmp($external_file, 'https://', 8) == 0)

653 
$¡r
 = 
$this
->
_İ’_süt
(
$ex‹º®_fe
);

655 
–£if
 (
¡½os
(
$this
->
_javasüt_loÿtiÚ
, 'h‰p://'è!=ğ
FALSE
)

657 
$¡r
 = 
$this
->
_İ’_süt
($this->
_javasüt_loÿtiÚ
.
$ex‹º®_fe
);

661 
	g$¡r
 = 
$this
->
_İ’_süt
($this->
CI
->
cÚfig
->
¦ash_™em
('ba£_u¾').$this->
_javasüt_loÿtiÚ
.
$ex‹º®_fe
);

664 
	g$¡r
 .ğ
$this
->
_şo£_süt
();

665  
	g$¡r
;

680 
funùiÚ
 
	$šlše
(
$süt
, 
$cd©a
 = 
TRUE
)

682 
$¡r
 = 
$this
->
	`_İ’_süt
();

683 
$¡r
 .ğ(
$cd©a
) ? "\n// <![CDATA[\n{$script}\n// ]]>\n" : "\n{$script}\n";

684 
$¡r
 .ğ
$this
->
	`_şo£_süt
();

686  
$¡r
;

687 
	}
}

700 
funùiÚ
 
_İ’_süt
(
$¤c
 = '')

702 
$¡r
 = '<süˆty³="‹xt/javasüt" ch¬£t="'.
¡¹Şow”
(
$this
->
CI
->
cÚfig
->
™em
('charset')).'"';

703 
	g$¡r
 .ğ(
$¤c
 == '') ? '>' : ' src="'.$src.'">';

704  
	g$¡r
;

718 
funùiÚ
 
_şo£_süt
(
$exŒa
 = "\n")

741 
funùiÚ
 
upd©e
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

743  
$this
->
js
->
_upd©”
(
$–em’t
, 
$¥“d
, 
$ÿÎback
);

757 
funùiÚ
 
	$g’”©e_jsÚ
(
$»suÉ
 = 
NULL
, 
$m©ch_¬¿y_ty³
 = 
FALSE
)

761 iàĞ! 
	`is_nuÎ
(
$»suÉ
))

763 ià(
	`is_objeù
(
$»suÉ
))

765 
$jsÚ_»suÉ
 = 
$»suÉ
->
	`»suÉ_¬¿y
();

767 
	`–£if
 (
	`is_¬¿y
(
$»suÉ
))

769 
$jsÚ_»suÉ
 = 
$»suÉ
;

773  
$this
->
	`_´•_¬gs
(
$»suÉ
);

781 
$jsÚ
 = 
	`¬¿y
();

782 
$_is_assoc
 = 
TRUE
;

784 iàĞ! 
	`is_¬¿y
(
$jsÚ_»suÉ
è
AND
 
	`em±y
($json_result))

786 
	`show_”rÜ
("Generate JSON Failed - Illegal key, value…air.");

788 
	`–£if
 (
$m©ch_¬¿y_ty³
)

790 
$_is_assoc
 = 
$this
->
	`_is_assocŸtive_¬¿y
(
$jsÚ_»suÉ
);

793 
	`fÜ—ch
 (
$jsÚ_»suÉ
 
as
 
$k
 => 
$v
)

795 ià(
$_is_assoc
)

797 
$jsÚ
[] = 
$this
->
	`_´•_¬gs
(
$k
, 
TRUE
).':'.$this->
	`g’”©e_jsÚ
(
$v
, 
$m©ch_¬¿y_ty³
);

801 
$jsÚ
[] = 
$this
->
	`g’”©e_jsÚ
(
$v
, 
$m©ch_¬¿y_ty³
);

805 
$jsÚ
 = 
	`im¶ode
(',', $json);

807  
$_is_assoc
 ? "{".
$jsÚ
."}" : "[".$json."]";

809 
	}
}

822 
funùiÚ
 
	$_is_assocŸtive_¬¿y
(
$¬r
)

824 
	`fÜ—ch
 (
	`¬¿y_keys
(
$¬r
è
as
 
$key
 => 
$v®
)

826 ià(
$key
 !=ğ
$v®
)

828  
TRUE
;

832  
FALSE
;

833 
	}
}

846 
funùiÚ
 
	$_´•_¬gs
(
$»suÉ
, 
$is_key
 = 
FALSE
)

848 ià(
	`is_nuÎ
(
$»suÉ
))

852 
	`–£if
 (
	`is_boŞ
(
$»suÉ
))

854  (
$»suÉ
 ==ğ
TRUE
) ? 'true' : 'false';

856 
	`–£if
 (
	`is_¡ršg
(
$»suÉ
è
OR
 
$is_key
)

858  '"'.
	`¡r_»¶aû
(
	`¬¿y
('\\', "\t", "\n", "\r", '"', '/'),‡¼ay('\\\\', '\\t', '\\n', "\\r", '\"', '\/'), 
$»suÉ
).'"';

860 
	`–£if
 (
	`is_sÿÏr
(
$»suÉ
))

862  
$»suÉ
;

864 
	}
}

	@system/libraries/Log.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_Log
 {

29 
´Ùeùed
 
	m$_log_·th
;

30 
´Ùeùed
 
	m$_th»shŞd
 = 1;

31 
´Ùeùed
 
	m$_d©e_fmt
 = 'Y-m-d H:i:s';

32 
´Ùeùed
 
	m$_’abËd
 = 
TRUE
;

33 
´Ùeùed
 
	m$_Ëv–s
 = 
¬¿y
('ERROR' => '1', 'DEBUG' => '2', 'INFO' => '3', 'ALL' => '4');

38 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

40 
$cÚfig
 =& 
	`g‘_cÚfig
();

42 
$this
->
_log_·th
 = (
$cÚfig
['log_·th'] !ğ''è? $cÚfig['log_·th'] : 
APPPATH
.'logs/';

44 iàĞ! 
	`is_dœ
(
$this
->
_log_·th
è
OR
 ! 
	`is_»®ly_wr™abË
($this->_log_path))

46 
$this
->
_’abËd
 = 
FALSE
;

49 ià(
	`is_num”ic
(
$cÚfig
['log_threshold']))

51 
$this
->
_th»shŞd
 = 
$cÚfig
['log_threshold'];

54 ià(
$cÚfig
['log_date_format'] != '')

56 
$this
->
_d©e_fmt
 = 
$cÚfig
['log_date_format'];

72 
public
 
funùiÚ
 
	`wr™e_log
(
$Ëv–
 = '”rÜ', 
$msg
, 
$php_”rÜ
 = 
FALSE
)

74 ià(
$this
->
_’abËd
 ==ğ
FALSE
)

76  
FALSE
;

79 
$Ëv–
 = 
	`¡¹ouµ”
($level);

81 iàĞ! 
	`is£t
(
$this
->
_Ëv–s
[
$Ëv–
]è
	`OR
 ($this->_Ëv–s[$Ëv–] > $this->
_th»shŞd
))

83  
FALSE
;

86 
$f•©h
 = 
$this
->
_log_·th
.'log-'.
	`d©e
('Y-m-d').'.php';

87 
$mes§ge
 = '';

89 iàĞ! 
	`fe_exi¡s
(
$f•©h
))

91 
$mes§ge
 .= "<"."?php if ( ! defined('BASEPATH'))ƒxit('No direct script‡ccess‡llowed'); ?".">\n\n";

94 iàĞ! 
$å
 = @
	`fİ’
(
$f•©h
, 
FOPEN_WRITE_CREATE
))

96  
FALSE
;

99 
$mes§ge
 .ğ
$Ëv–
.' '.(($Ëv– =ğ'INFO'è? ' -' : '-').' '.
	`d©e
(
$this
->
_d©e_fmt
). ' --> '.
$msg
."\n";

101 
	`æock
(
$å
, 
LOCK_EX
);

102 
	`fwr™e
(
$å
, 
$mes§ge
);

103 
	`æock
(
$å
, 
LOCK_UN
);

104 
	`fşo£
(
$å
);

106 @
	`chmod
(
$f•©h
, 
FILE_WRITE_MODE
);

107  
TRUE
;

108 
	}
}

	@system/libraries/Migration.php

1 <?
php
 
defšed
('BASEPATH'è
OR
 
ex™
('No direct script‡ccess‡llowed');

30 şas 
	cCI_Mig¿tiÚ
 {

32 
´Ùeùed
 
	m$_mig¿tiÚ_’abËd
 = 
FALSE
;

33 
´Ùeùed
 
	m$_mig¿tiÚ_·th
 = 
NULL
;

34 
´Ùeùed
 
	m$_mig¿tiÚ_v”siÚ
 = 0;

36 
´Ùeùed
 
	m$_”rÜ_¡ršg
 = '';

38 
public
 
funùiÚ
 
__cÚ¡ruù
(
$cÚfig
 = 
	$¬¿y
())

40 #OÆy 
run
 
this
 
cÚ¡ruùÜ
 
Ú
 
maš
 
lib¿ry
 
lßd


41 ià(
	`g‘_·»Á_şass
(
$this
è!=ğ
FALSE
)

46 
	`fÜ—ch
 (
$cÚfig
 
as
 
$key
 => 
$v®
)

48 
$this
->{'_' . 
$key
} = 
$v®
;

51 
	`log_mes§ge
('debug', 'Migrations class initialized');

54 ià(
$this
->
_mig¿tiÚ_’abËd
 !=ğ
TRUE
)

56 
	`show_”rÜ
('Migrations has been†oaded but is disabled or set up incorrectly.');

60 
$this
->
_mig¿tiÚ_·th
 =ğ'' 
OR
 $this->_mig¿tiÚ_·th = 
APPPATH
 . 'migrations/';

63 
$this
->
_mig¿tiÚ_·th
 = 
	`¹rim
($this->_migration_path, '/').'/';

66 
$this
->
Ïng
->
	`lßd
('migration');

69 
$this
->
lßd
->
	`dbfÜge
();

72 iàĞ! 
$this
->
db
->
	`bË_exi¡s
('migrations'))

74 
$this
->
dbfÜge
->
	`add_f›ld
(
	`¬¿y
(

75 'v”siÚ' => 
	`¬¿y
('type' => 'INT', 'constraint' => 3),

78 
$this
->
dbfÜge
->
	`ü—‹_bË
('mig¿tiÚs', 
TRUE
);

80 
$this
->
db
->
	`š£¹
('mig¿tiÚs', 
	`¬¿y
('version' => 0));

96 
public
 
funùiÚ
 
	$v”siÚ
(
$rg‘_v”siÚ
)

98 
$¡¬t
 = 
$cu¼’t_v”siÚ
 = 
$this
->
	`_g‘_v”siÚ
();

99 
$¡İ
 = 
$rg‘_v”siÚ
;

101 ià(
$rg‘_v”siÚ
 > 
$cu¼’t_v”siÚ
)

104 ++
$¡¬t
;

105 ++
$¡İ
;

106 
$¡•
 = 1;

112 
$¡•
 = -1;

115 
$m‘hod
 = 
$¡•
 === 1 ? 'up' : 'down';

116 
$mig¿tiÚs
 = 
	`¬¿y
();

120 
$i
 = 
$¡¬t
; $˜!ğ
$¡İ
; $˜+ğ
$¡•
)

122 
$f
 = 
	`glob
(
	`¥rštf
(
$this
->
_mig¿tiÚ_·th
 . '%03d_*.php', 
$i
));

125 ià(
	`couÁ
(
$f
) > 1)

127 
$this
->
_”rÜ_¡ršg
 = 
	`¥rštf
($this->
Ïng
->
	`lše
('mig¿tiÚ_muÉË_v”siÚ'), 
$i
);

128  
FALSE
;

132 ià(
	`couÁ
(
$f
) == 0)

136 ià(
$¡•
 == 1)

143 
$this
->
_”rÜ_¡ršg
 = 
	`¥rštf
($this->
Ïng
->
	`lše
('mig¿tiÚ_nÙ_found'), 
$i
);

144  
FALSE
;

147 
$fe
 = 
	`ba£Çme
(
$f
[0]);

148 
$Çme
 = 
	`ba£Çme
(
$f
[0], '.php');

151 ià(
	`´eg_m©ch
('/^\d{3}_(\w+)$/', 
$Çme
, 
$m©ch
))

153 
$m©ch
[1] = 
	`¡¹Şow”
($match[1]);

156 ià(
	`š_¬¿y
(
$m©ch
[1], 
$mig¿tiÚs
))

158 
$this
->
_”rÜ_¡ršg
 = 
	`¥rštf
($this->
Ïng
->
	`lše
('mig¿tiÚ_muÉË_v”siÚ'), 
$m©ch
[1]);

159  
FALSE
;

162 
šşude
 
$f
[0];

163 
$şass
 = 'Mig¿tiÚ_' . 
	`ucfœ¡
(
$m©ch
[1]);

165 iàĞ! 
	`şass_exi¡s
(
$şass
))

167 
$this
->
_”rÜ_¡ršg
 = 
	`¥rštf
($this->
Ïng
->
	`lše
('mig¿tiÚ_şass_dÛ¢t_exi¡'), 
$şass
);

168  
FALSE
;

171 iàĞ! 
	`is_ÿÎabË
(
	`¬¿y
(
$şass
, 
$m‘hod
)))

173 
$this
->
_”rÜ_¡ršg
 = 
	`¥rštf
($this->
Ïng
->
	`lše
('mig¿tiÚ_missšg_'.
$m‘hod
.'_m‘hod'), 
$şass
);

174  
FALSE
;

177 
$mig¿tiÚs
[] = 
$m©ch
[1];

181 
$this
->
_”rÜ_¡ršg
 = 
	`¥rštf
($this->
Ïng
->
	`lše
('mig¿tiÚ_šv®id_f’ame'), 
$fe
);

182  
FALSE
;

186 
	`log_mes§ge
('debug', 'Cu¼’ˆmig¿tiÚ: ' . 
$cu¼’t_v”siÚ
);

188 
$v”siÚ
 = 
$i
 + (
$¡•
 == 1 ? -1 : 0);

191 ià(
$mig¿tiÚs
 ==ğ
	`¬¿y
())

193  
TRUE
;

196 
	`log_mes§ge
('debug', 'Mig¿tšg from ' . 
$m‘hod
 . 'Øv”siÚ ' . 
$v”siÚ
);

199 
	`fÜ—ch
 (
$mig¿tiÚs
 
AS
 
$mig¿tiÚ
)

202 
$şass
 = 'Mig¿tiÚ_' . 
	`ucfœ¡
(
	`¡¹Şow”
(
$mig¿tiÚ
));

203 
	`ÿÎ_u£r_func
(
	`¬¿y
(
Ãw
 
$şass
, 
$m‘hod
));

205 
$cu¼’t_v”siÚ
 +ğ
$¡•
;

206 
$this
->
	`_upd©e_v”siÚ
(
$cu¼’t_v”siÚ
);

209 
	`log_mes§ge
('debug', 'Fšished mig¿tšgØ'.
$cu¼’t_v”siÚ
);

211  
$cu¼’t_v”siÚ
;

212 
	}
}

222 
public
 
funùiÚ
 
	$Ï‹¡
()

224 iàĞ! 
$mig¿tiÚs
 = 
$this
->
	`fšd_mig¿tiÚs
())

226 
$this
->
_”rÜ_¡ršg
 = $this->
lše
->
	`Ïng
('migration_none_found');

227  
çl£
;

230 
$Ï¡_mig¿tiÚ
 = 
	`ba£Çme
(
	`’d
(
$mig¿tiÚs
));

234  
$this
->
	`v”siÚ
((è
	`sub¡r
(
$Ï¡_mig¿tiÚ
, 0, 3));

235 
	}
}

245 
public
 
funùiÚ
 
	$cu¼’t
()

247  
$this
->
	`v”siÚ
($this->
_mig¿tiÚ_v”siÚ
);

248 
	}
}

258 
public
 
funùiÚ
 
	$”rÜ_¡ršg
()

260  
$this
->
_”rÜ_¡ršg
;

261 
	}
}

271 
´Ùeùed
 
funùiÚ
 
	$fšd_mig¿tiÚs
()

274 
$fes
 = 
	`glob
(
$this
->
_mig¿tiÚ_·th
 . '*_*.php');

275 
$fe_couÁ
 = 
	`couÁ
(
$fes
);

277 
$i
 = 0; $˜< 
$fe_couÁ
; $i++)

280 
$Çme
 = 
	`ba£Çme
(
$fes
[
$i
], '.php');

281 iàĞ! 
	`´eg_m©ch
('/^\d{3}_(\w+)$/', 
$Çme
))

283 
$fes
[
$i
] = 
FALSE
;

287 
	`sÜt
(
$fes
);

289  
$fes
;

290 
	}
}

300 
´Ùeùed
 
funùiÚ
 
	$_g‘_v”siÚ
()

302 
$row
 = 
$this
->
db
->
	`g‘
('mig¿tiÚs')->
	`row
();

303  
$row
 ? $row->
v”siÚ
 : 0;

304 
	}
}

315 
´Ùeùed
 
funùiÚ
 
	$_upd©e_v”siÚ
(
$mig¿tiÚs
)

317  
$this
->
db
->
	`upd©e
('mig¿tiÚs', 
	`¬¿y
(

318 'v”siÚ' => 
$mig¿tiÚs


320 
	}
}

331 
public
 
funùiÚ
 
	$__g‘
(
$v¬
)

333  
	`g‘_š¡ªû
()->
$v¬
;

334 
	}
}

	@system/libraries/Pagination.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_Pagš©iÚ
 {

29 
v¬
 
	m$ba£_u¾
 = '';

30 
v¬
 
	m$´efix
 = '';

31 
v¬
 
	m$suffix
 = '';

33 
v¬
 
	m$tÙ®_rows
 = 0;

34 
v¬
 
	m$³r_·ge
 = 10;

35 
v¬
 
	m$num_lšks
 = 2;

36 
v¬
 
	m$cur_·ge
 = 0;

37 
v¬
 
	m$u£_·ge_numb”s
 = 
FALSE
;

38 
v¬
 
	m$fœ¡_lšk
 = '&lsaquo; First';

39 
v¬
 
	m$Ãxt_lšk
 = '&gt;';

40 
v¬
 
	m$´ev_lšk
 = '&lt;';

41 
v¬
 
	m$Ï¡_lšk
 = 'Last &rsaquo;';

42 
v¬
 
	m$uri_£gm’t
 = 3;

43 
v¬
 
	m$fuÎ_g_İ’
 = '';

44 
v¬
 
	m$fuÎ_g_şo£
 = '';

45 
v¬
 
	m$fœ¡_g_İ’
 = '';

46 
v¬
 
	m$fœ¡_g_şo£
 = '&nbsp;';

47 
v¬
 
	m$Ï¡_g_İ’
 = '&nbsp;';

48 
v¬
 
	m$Ï¡_g_şo£
 = '';

49 
v¬
 
	m$fœ¡_u¾
 = '';

50 
v¬
 
	m$cur_g_İ’
 = '&nbsp;<strong>';

51 
v¬
 
	m$cur_g_şo£
 = '</strong>';

52 
v¬
 
	m$Ãxt_g_İ’
 = '&nbsp;';

53 
v¬
 
	m$Ãxt_g_şo£
 = '&nbsp;';

54 
v¬
 
	m$´ev_g_İ’
 = '&nbsp;';

55 
v¬
 
	m$´ev_g_şo£
 = '';

56 
v¬
 
	m$num_g_İ’
 = '&nbsp;';

57 
v¬
 
	m$num_g_şo£
 = '';

58 
v¬
 
	m$·ge_qu”y_¡ršg
 = 
FALSE
;

59 
v¬
 
	m$qu”y_¡ršg_£gm’t
 = 'per_page';

60 
v¬
 
	m$di¥Ïy_·ges
 = 
TRUE
;

61 
v¬
 
	m$ªchÜ_şass
 = '';

69 
public
 
funùiÚ
 
__cÚ¡ruù
(
$·¿ms
 = 
	$¬¿y
())

71 ià(
	`couÁ
(
$·¿ms
) > 0)

73 
$this
->
	`š™Ÿlize
(
$·¿ms
);

76 ià(
$this
->
ªchÜ_şass
 != '')

78 
$this
->
ªchÜ_şass
 = 'class="'.$this->anchor_class.'" ';

81 
	`log_mes§ge
('debug', "Pagination Class Initialized");

93 
funùiÚ
 
	`š™Ÿlize
(
$·¿ms
 = 
	$¬¿y
())

95 ià(
	`couÁ
(
$·¿ms
) > 0)

97 
	`fÜ—ch
 (
$·¿ms
 
as
 
$key
 => 
$v®
)

99 ià(
	`is£t
(
$this
->
$key
))

101 
$this
->
$key
 = 
$v®
;

105 
	}
}

115 
funùiÚ
 
	$ü—‹_lšks
()

118 ià(
$this
->
tÙ®_rows
 =ğ0 
OR
 $this->
³r_·ge
 == 0)

124 
$num_·ges
 = 
	`û
(
$this
->
tÙ®_rows
 / $this->
³r_·ge
);

127 ià(
$num_·ges
 == 1)

133 ià(
$this
->
u£_·ge_numb”s
)

135 
$ba£_·ge
 = 1;

139 
$ba£_·ge
 = 0;

143 
$CI
 =& 
	`g‘_š¡ªû
();

145 ià(
$CI
->
cÚfig
->
	`™em
('’abË_qu”y_¡ršgs'è==ğ
TRUE
 
OR
 
$this
->
·ge_qu”y_¡ršg
 === TRUE)

147 ià(
$CI
->
šput
->
	`g‘
(
$this
->
qu”y_¡ršg_£gm’t
è!ğ
$ba£_·ge
)

149 
$this
->
cur_·ge
 = 
$CI
->
šput
->
	`g‘
($this->
qu”y_¡ršg_£gm’t
);

152 
$this
->
cur_·ge
 = () $this->cur_page;

157 ià(
$CI
->
uri
->
	`£gm’t
(
$this
->
uri_£gm’t
è!ğ
$ba£_·ge
)

159 
$this
->
cur_·ge
 = 
$CI
->
uri
->
	`£gm’t
($this->
uri_£gm’t
);

162 
$this
->
cur_·ge
 = () $this->cur_page;

167 ià(
$this
->
u£_·ge_numb”s
 
AND
 $this->
cur_·ge
 == 0)

169 
$this
->
cur_·ge
 = 
$ba£_·ge
;

172 
$this
->
num_lšks
 = ()$this->num_links;

174 ià(
$this
->
num_lšks
 < 1)

176 
	`show_”rÜ
('Your‚umber of†inks must be‡…ositive‚umber.');

179 iàĞ! 
	`is_num”ic
(
$this
->
cur_·ge
))

181 
$this
->
cur_·ge
 = 
$ba£_·ge
;

186 ià(
$this
->
u£_·ge_numb”s
)

188 ià(
$this
->
cur_·ge
 > 
$num_·ges
)

190 
$this
->
cur_·ge
 = 
$num_·ges
;

195 ià(
$this
->
cur_·ge
 > $this->
tÙ®_rows
)

197 
$this
->
cur_·ge
 = (
$num_·ges
 - 1è* $this->
³r_·ge
;

201 
$uri_·ge_numb”
 = 
$this
->
cur_·ge
;

203 iàĞ! 
$this
->
u£_·ge_numb”s
)

205 
$this
->
cur_·ge
 = 
	`æoÜ
(($this->cur_·ge/$this->
³r_·ge
) + 1);

210 
$¡¬t
 = ((
$this
->
cur_·ge
 - $this->
num_lšks
) > 0) ? $this->cur_page - ($this->num_links - 1) : 1;

211 
$’d
 = ((
$this
->
cur_·ge
 + $this->
num_lšks
è< 
$num_·ges
) ? $this->cur_page + $this->num_links : $num_pages;

215 ià(
$CI
->
cÚfig
->
	`™em
('’abË_qu”y_¡ršgs'è==ğ
TRUE
 
OR
 
$this
->
·ge_qu”y_¡ršg
 === TRUE)

217 
$this
->
ba£_u¾
 = 
	`¹rim
($this->ba£_u¾).'&amp;'.$this->
qu”y_¡ršg_£gm’t
.'=';

221 
$this
->
ba£_u¾
 = 
	`¹rim
($this->base_url, '/') .'/';

225 
$ouut
 = '';

228 ià(
$this
->
fœ¡_lšk
 !=ğ
FALSE
 
AND
 $this->
cur_·ge
 > ($this->
num_lšks
 + 1))

230 
$fœ¡_u¾
 = (
$this
->
fœ¡_u¾
 =ğ''è? $this->
ba£_u¾
 : $this->first_url;

231 
$ouut
 .ğ
$this
->
fœ¡_g_İ’
.'<¨'.$this->
ªchÜ_şass
.'h»f="'.
$fœ¡_u¾
.'">'.$this->
fœ¡_lšk
.'</a>'.$this->
fœ¡_g_şo£
;

235 ià(
$this
->
´ev_lšk
 !=ğ
FALSE
 
AND
 $this->
cur_·ge
 != 1)

237 ià(
$this
->
u£_·ge_numb”s
)

239 
$i
 = 
$uri_·ge_numb”
 - 1;

243 
$i
 = 
$uri_·ge_numb”
 - 
$this
->
³r_·ge
;

246 ià(
$i
 =ğ0 && 
$this
->
fœ¡_u¾
 != '')

248 
$ouut
 .ğ
$this
->
´ev_g_İ’
.'<¨'.$this->
ªchÜ_şass
.'h»f="'.$this->
fœ¡_u¾
.'">'.$this->
´ev_lšk
.'</a>'.$this->
´ev_g_şo£
;

252 
$i
 = ($˜=ğ0è? '' : 
$this
->
´efix
.$i.$this->
suffix
;

253 
$ouut
 .ğ
$this
->
´ev_g_İ’
.'<¨'.$this->
ªchÜ_şass
.'h»f="'.$this->
ba£_u¾
.
$i
.'">'.$this->
´ev_lšk
.'</a>'.$this->
´ev_g_şo£
;

259 ià(
$this
->
di¥Ïy_·ges
 !=ğ
FALSE
)

262 
$loİ
 = 
$¡¬t
 -1; $loİ <ğ
$’d
; $loop++)

264 ià(
$this
->
u£_·ge_numb”s
)

266 
$i
 = 
$loİ
;

270 
$i
 = (
$loİ
 * 
$this
->
³r_·ge
) - $this->per_page;

273 ià(
$i
 >ğ
$ba£_·ge
)

275 ià(
$this
->
cur_·ge
 =ğ
$loİ
)

277 
$ouut
 .ğ
$this
->
cur_g_İ’
.
$loİ
.$this->
cur_g_şo£
;

281 
$n
 = (
$i
 =ğ
$ba£_·ge
) ? '' : $i;

283 ià(
$n
 =ğ'' && 
$this
->
fœ¡_u¾
 != '')

285 
$ouut
 .ğ
$this
->
num_g_İ’
.'<¨'.$this->
ªchÜ_şass
.'h»f="'.$this->
fœ¡_u¾
.'">'.
$loİ
.'</a>'.$this->
num_g_şo£
;

289 
$n
 = ($À=ğ''è? '' : 
$this
->
´efix
.$n.$this->
suffix
;

291 
$ouut
 .ğ
$this
->
num_g_İ’
.'<¨'.$this->
ªchÜ_şass
.'h»f="'.$this->
ba£_u¾
.
$n
.'">'.
$loİ
.'</a>'.$this->
num_g_şo£
;

299 ià(
$this
->
Ãxt_lšk
 !=ğ
FALSE
 
AND
 $this->
cur_·ge
 < 
$num_·ges
)

301 ià(
$this
->
u£_·ge_numb”s
)

303 
$i
 = 
$this
->
cur_·ge
 + 1;

307 
$i
 = (
$this
->
cur_·ge
 * $this->
³r_·ge
);

310 
$ouut
 .ğ
$this
->
Ãxt_g_İ’
.'<¨'.$this->
ªchÜ_şass
.'h»f="'.$this->
ba£_u¾
.$this->
´efix
.
$i
.$this->
suffix
.'">'.$this->
Ãxt_lšk
.'</a>'.$this->
Ãxt_g_şo£
;

314 ià(
$this
->
Ï¡_lšk
 !=ğ
FALSE
 
	`AND
 ($this->
cur_·ge
 + $this->
num_lšks
è< 
$num_·ges
)

316 ià(
$this
->
u£_·ge_numb”s
)

318 
$i
 = 
$num_·ges
;

322 
$i
 = ((
$num_·ges
 * 
$this
->
³r_·ge
) - $this->per_page);

324 
$ouut
 .ğ
$this
->
Ï¡_g_İ’
.'<¨'.$this->
ªchÜ_şass
.'h»f="'.$this->
ba£_u¾
.$this->
´efix
.
$i
.$this->
suffix
.'">'.$this->
Ï¡_lšk
.'</a>'.$this->
Ï¡_g_şo£
;

329 
$ouut
 = 
	`´eg_»¶aû
("#([^:])//+#", "\\1/", $output);

332 
$ouut
 = 
$this
->
fuÎ_g_İ’
.$ouut.$this->
fuÎ_g_şo£
;

334  
$ouut
;

335 
	}
}

	@system/libraries/Parser.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_P¬£r
 {

29 
v¬
 
	m$l_d–im
 = '{';

30 
v¬
 
	m$r_d–im
 = '}';

31 
v¬
 
	m$objeù
;

45 
public
 
funùiÚ
 
	$·r£
(
$‹m¶©e
, 
$d©a
, 
$»tuº
 = 
FALSE
)

47 
$CI
 =& 
	`g‘_š¡ªû
();

48 
$‹m¶©e
 = 
$CI
->
lßd
->
	`v›w
($‹m¶©e, 
$d©a
, 
TRUE
);

50  
$this
->
	`_·r£
(
$‹m¶©e
, 
$d©a
, 
$»tuº
);

67 
funùiÚ
 
	$·r£_¡ršg
(
$‹m¶©e
, 
$d©a
, 
$»tuº
 = 
FALSE
)

69  
$this
->
	`_·r£
(
$‹m¶©e
, 
$d©a
, 
$»tuº
);

70 
	}
}

86 
funùiÚ
 
	$_·r£
(
$‹m¶©e
, 
$d©a
, 
$»tuº
 = 
FALSE
)

88 ià(
$‹m¶©e
 == '')

90  
FALSE
;

93 
	`fÜ—ch
 (
$d©a
 
as
 
$key
 => 
$v®
)

95 ià(
	`is_¬¿y
(
$v®
))

97 
$‹m¶©e
 = 
$this
->
	`_·r£_·œ
(
$key
, 
$v®
, $template);

101 
$‹m¶©e
 = 
$this
->
	`_·r£_sšgË
(
$key
, (
¡ršg
)
$v®
, $template);

105 ià(
$»tuº
 =ğ
FALSE
)

107 
$CI
 =& 
	`g‘_š¡ªû
();

108 
$CI
->
ouut
->
	`­³nd_ouut
(
$‹m¶©e
);

111  
$‹m¶©e
;

112 
	}
}

124 
funùiÚ
 
£t_d–im™”s
(
$l
 = '{', 
$r
 = '}')

126 
$this
->
l_d–im
 = 
$l
;

127 
	g$this
->
	gr_d–im
 = 
$r
;

141 
funùiÚ
 
	$_·r£_sšgË
(
$key
, 
$v®
, 
$¡ršg
)

143  
	`¡r_»¶aû
(
$this
->
l_d–im
.
$key
.$this->
r_d–im
, 
$v®
, 
$¡ršg
);

144 
	}
}

159 
funùiÚ
 
	$_·r£_·œ
(
$v¬ŸbË
, 
$d©a
, 
$¡ršg
)

161 ià(
FALSE
 ==ğ(
$m©ch
 = 
$this
->
	`_m©ch_·œ
(
$¡ršg
, 
$v¬ŸbË
)))

163  
$¡ršg
;

166 
$¡r
 = '';

167 
	`fÜ—ch
 (
$d©a
 
as
 
$row
)

169 
$‹mp
 = 
$m©ch
['1'];

170 
	`fÜ—ch
 (
$row
 
as
 
$key
 => 
$v®
)

172 iàĞ! 
	`is_¬¿y
(
$v®
))

174 
$‹mp
 = 
$this
->
	`_·r£_sšgË
(
$key
, 
$v®
, $temp);

178 
$‹mp
 = 
$this
->
	`_·r£_·œ
(
$key
, 
$v®
, $temp);

182 
$¡r
 .ğ
$‹mp
;

185  
	`¡r_»¶aû
(
$m©ch
['0'], 
$¡r
, 
$¡ršg
);

186 
	}
}

198 
funùiÚ
 
	$_m©ch_·œ
(
$¡ršg
, 
$v¬ŸbË
)

200 iàĞ! 
	`´eg_m©ch
("|" . 
	`´eg_quÙe
(
$this
->
l_d–im
è. 
$v¬ŸbË
 .…»g_quÙe($this->
r_d–im
è. "(.+?)".…»g_quÙe($this->l_d–imè. '/' . $v¬ŸbË .…»g_quÙe($this->r_d–imè. "|s", 
$¡ršg
, 
$m©ch
))

202  
FALSE
;

205  
$m©ch
;

206 
	}
}

	@system/libraries/Profiler.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

33 şas 
	cCI_Prof”
 {

35 
´Ùeùed
 
	m$_avaabË_£ùiÚs
 = 
¬¿y
(

48 
´Ùeùed
 
	m$_qu”y_toggË_couÁ
 = 25;

50 
´Ùeùed
 
	m$CI
;

54 
public
 
funùiÚ
 
__cÚ¡ruù
(
$cÚfig
 = 
	$¬¿y
())

56 
$this
->
CI
 =& 
	`g‘_š¡ªû
();

57 
$this
->
CI
->
lßd
->
	`Ïnguage
('profiler');

59 ià(
	`is£t
(
$cÚfig
['query_toggle_count']))

61 
$this
->
_qu”y_toggË_couÁ
 = (è
$cÚfig
['query_toggle_count'];

62 
	`un£t
(
$cÚfig
['query_toggle_count']);

66 
	`fÜ—ch
 (
$this
->
_avaabË_£ùiÚs
 
as
 
$£ùiÚ
)

68 iàĞ! 
	`is£t
(
$cÚfig
[
$£ùiÚ
]))

70 
$this
->
_compe_
{
$£ùiÚ
} = 
TRUE
;

74 
$this
->
	`£t_£ùiÚs
(
$cÚfig
);

87 
public
 
funùiÚ
 
	$£t_£ùiÚs
(
$cÚfig
)

89 
	`fÜ—ch
 (
$cÚfig
 
as
 
$m‘hod
 => 
$’abË
)

91 ià(
	`š_¬¿y
(
$m‘hod
, 
$this
->
_avaabË_£ùiÚs
))

93 
$this
->
_compe_
{
$m‘hod
} = (
$’abË
 !=ğ
FALSE
è? 
TRUE
 : FALSE;

96 
	}
}

110 
´Ùeùed
 
funùiÚ
 
	$_compe_b’chm¬ks
()

112 
$´ofe
 = 
	`¬¿y
();

113 
	`fÜ—ch
 (
$this
->
CI
->
b’chm¬k
->
m¬k”
 
as
 
$key
 => 
$v®
)

117 ià(
	`´eg_m©ch
("/(.+?)_’d/i", 
$key
, 
$m©ch
))

119 ià(
	`is£t
(
$this
->
CI
->
b’chm¬k
->
m¬k”
[
$m©ch
[1].'_’d']è
AND
 isset($this->CI->benchmark->marker[$match[1].'_start']))

121 
$´ofe
[
$m©ch
[1]] = 
$this
->
CI
->
b’chm¬k
->
	`–­£d_time
($m©ch[1].'_¡¬t', 
$key
);

130 
$ouut
 = "\n\n";

131 
$ouut
 .= '<fieldset id="ci_profiler_benchmarks" style="border:1px solid #900;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';

132 
$ouut
 .= "\n";

133 
$ouut
 .ğ'<Ëg’d styË="cŞÜ:#900;">&nb¥;&nb¥;'.
$this
->
CI
->
Ïng
->
	`lše
('profiler_benchmarks').'&nbsp;&nbsp;</legend>';

134 
$ouut
 .= "\n";

135 
$ouut
 .= "\n\n<table style='width:100%'>\n";

137 
	`fÜ—ch
 (
$´ofe
 
as
 
$key
 => 
$v®
)

139 
$key
 = 
	`ucwÜds
(
	`¡r_»¶aû
(
	`¬¿y
('_', '-'), ' ', $key));

140 
$ouut
 .ğ"<Œ><td styË='·ddšg:5px;width:50%;cŞÜ:#000;fÚt-weight:bŞd;background-cŞÜ:#ddd;'>".
$key
."&nb¥;&nb¥;</td><td styË='·ddšg:5px;width:50%;cŞÜ:#900;fÚt-weight:nÜm®;background-cŞÜ:#ddd;'>".
$v®
."</td></tr>\n";

143 
$ouut
 .= "</table>\n";

144 
$ouut
 .= "</fieldset>";

146  
$ouut
;

147 
	}
}

156 
´Ùeùed
 
funùiÚ
 
	$_compe_qu”›s
()

158 
$dbs
 = 
	`¬¿y
();

161 
	`fÜ—ch
 (
	`g‘_objeù_v¬s
(
$this
->
CI
è
as
 
$CI_objeù
)

163 ià(
	`is_objeù
(
$CI_objeù
è&& 
	`is_subşass_of
(
	`g‘_şass
($CI_object), 'CI_DB') )

165 
$dbs
[] = 
$CI_objeù
;

169 ià(
	`couÁ
(
$dbs
) == 0)

171 
$ouut
 = "\n\n";

172 
$ouut
 .= '<fieldset id="ci_profiler_queries" style="border:1px solid #0000FF;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';

173 
$ouut
 .= "\n";

174 
$ouut
 .ğ'<Ëg’d styË="cŞÜ:#0000FF;">&nb¥;&nb¥;'.
$this
->
CI
->
Ïng
->
	`lše
('profiler_queries').'&nbsp;&nbsp;</legend>';

175 
$ouut
 .= "\n";

176 
$ouut
 .= "\n\n<table style='border:none; width:100%;'>\n";

177 
$ouut
 .="<Œ><td styË='width:100%;cŞÜ:#0000FF;fÚt-weight:nÜm®;background-cŞÜ:#“e;·ddšg:5px'>".
$this
->
CI
->
Ïng
->
	`lše
('profiler_no_db')."</td></tr>\n";

178 
$ouut
 .= "</table>\n";

179 
$ouut
 .= "</fieldset>";

181  
$ouut
;

185 
$this
->
CI
->
lßd
->
	`h–³r
('text');

188 
$highlight
 = 
	`¬¿y
('SELECT', 'DISTINCT', 'FROM', 'WHERE', 'AND', 'LEFT&nbsp;JOIN', 'ORDER&nbsp;BY', 'GROUP&nbsp;BY', 'LIMIT', 'INSERT', 'INTO', 'VALUES', 'UPDATE', 'OR&nbsp;', 'HAVING', 'OFFSET', 'NOT&nbsp;IN', 'IN', 'LIKE', 'NOT&nbsp;LIKE', 'COUNT', 'MAX', 'MIN', 'ON', 'AS', 'AVG', 'SUM', '(', ')');

190 
$ouut
 = "\n\n";

192 
$couÁ
 = 0;

194 
	`fÜ—ch
 (
$dbs
 
as
 
$db
)

196 
$couÁ
++;

198 
$hide_qu”›s
 = (
	`couÁ
(
$db
->
qu”›s
è> 
$this
->
_qu”y_toggË_couÁ
) ? ' display:none' : '';

200 
$show_hide_js
 = '(<¥ª styË="cursÜ:…oš‹r;" onşick="v¬ s=docum’t.g‘EËm’tById(\'ci_´of”_qu”›s_db_'.
$couÁ
.'\').¡yË;s.di¥Ïy=s.di¥Ïy==\'nÚe\'?\'\':\'nÚe\';this.šÃrHTMLñhis.šÃrHTML==\''.
$this
->
CI
->
Ïng
->
	`lše
('profiler_section_hide').'\'?\''.$this->CI->lang->line('profiler_section_show').'\':\''.$this->CI->lang->line('profiler_section_hide').'\';">'.$this->CI->lang->line('profiler_section_hide').'</span>)';

202 ià(
$hide_qu”›s
 != '')

204 
$show_hide_js
 = '(<¥ª styË="cursÜ:…oš‹r;" onşick="v¬ s=docum’t.g‘EËm’tById(\'ci_´of”_qu”›s_db_'.
$couÁ
.'\').¡yË;s.di¥Ïy=s.di¥Ïy==\'nÚe\'?\'\':\'nÚe\';this.šÃrHTMLñhis.šÃrHTML==\''.
$this
->
CI
->
Ïng
->
	`lše
('profiler_section_show').'\'?\''.$this->CI->lang->line('profiler_section_hide').'\':\''.$this->CI->lang->line('profiler_section_show').'\';">'.$this->CI->lang->line('profiler_section_show').'</span>)';

207 
$ouut
 .= '<fieldset style="border:1px solid #0000FF;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';

208 
$ouut
 .= "\n";

209 
$ouut
 .ğ'<Ëg’d styË="cŞÜ:#0000FF;">&nb¥;&nb¥;'.
$this
->
CI
->
Ïng
->
	`lše
('´of”_d©aba£').':&nb¥; '.
$db
->
d©aba£
.'&nb¥;&nb¥;&nb¥;'.$this->CI->Ïng->lše('´of”_qu”›s').': '.
	`couÁ
($db->
qu”›s
).'&nb¥;&nb¥;'.
$show_hide_js
.'</legend>';

210 
$ouut
 .= "\n";

211 
$ouut
 .= "\n\n<table style='width:100%;{$hide_queries}' id='ci_profiler_queries_db_{$count}'>\n";

213 ià(
	`couÁ
(
$db
->
qu”›s
) == 0)

215 
$ouut
 .ğ"<Œ><td styË='width:100%;cŞÜ:#0000FF;fÚt-weight:nÜm®;background-cŞÜ:#“e;·ddšg:5px;'>".
$this
->
CI
->
Ïng
->
	`lše
('profiler_no_queries')."</td></tr>\n";

219 
	`fÜ—ch
 (
$db
->
qu”›s
 
as
 
$key
 => 
$v®
)

221 
$time
 = 
	`numb”_fÜm©
(
$db
->
qu”y_times
[
$key
], 4);

223 
$v®
 = 
	`highlight_code
($v®, 
ENT_QUOTES
);

225 
	`fÜ—ch
 (
$highlight
 
as
 
$bŞd
)

227 
$v®
 = 
	`¡r_»¶aû
(
$bŞd
, '<strong>'.$bold.'</strong>', $val);

230 
$ouut
 .ğ"<Œ><td styË='·ddšg:5px; v”tiÿl-®ign:İ;width:1%;cŞÜ:#900;fÚt-weight:nÜm®;background-cŞÜ:#ddd;'>".
$time
."&nb¥;&nb¥;</td><td styË='·ddšg:5px; cŞÜ:#000;fÚt-weight:nÜm®;background-cŞÜ:#ddd;'>".
$v®
."</td></tr>\n";

234 
$ouut
 .= "</table>\n";

235 
$ouut
 .= "</fieldset>";

239  
$ouut
;

240 
	}
}

250 
´Ùeùed
 
funùiÚ
 
	$_compe_g‘
()

252 
$ouut
 = "\n\n";

253 
$ouut
 .= '<fieldset id="ci_profiler_get" style="border:1px solid #cd6e00;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';

254 
$ouut
 .= "\n";

255 
$ouut
 .ğ'<Ëg’d styË="cŞÜ:#cd6e00;">&nb¥;&nb¥;'.
$this
->
CI
->
Ïng
->
	`lše
('profiler_get_data').'&nbsp;&nbsp;</legend>';

256 
$ouut
 .= "\n";

258 ià(
	`couÁ
(
$_GET
) == 0)

260 
$ouut
 .ğ"<div styË='cŞÜ:#cd6e00;fÚt-weight:nÜm®;·ddšg:4px 0 4px 0'>".
$this
->
CI
->
Ïng
->
	`lše
('profiler_no_get')."</div>";

264 
$ouut
 .= "\n\n<table style='width:100%; border:none'>\n";

266 
	`fÜ—ch
 (
$_GET
 
as
 
$key
 => 
$v®
)

268 iàĞ! 
	`is_num”ic
(
$key
))

270 
$key
 = "'".$key."'";

273 
$ouut
 .ğ"<Œ><td styË='width:50%;cŞÜ:#000;background-cŞÜ:#ddd;·ddšg:5px'>&#36;_GET[".
$key
."]&nbsp;&nbsp; </td><td style='width:50%;padding:5px;color:#cd6e00;font-weight:normal;background-color:#ddd;'>";

274 ià(
	`is_¬¿y
(
$v®
))

276 
$ouut
 .ğ"<´e>" . 
	`html¥ecŸlch¬s
(
	`¡r¦ashes
(
	`´št_r
(
$v®
, 
Œue
))) . "</pre>";

280 
$ouut
 .ğ
	`html¥ecŸlch¬s
(
	`¡r¦ashes
(
$v®
));

282 
$ouut
 .= "</td></tr>\n";

285 
$ouut
 .= "</table>\n";

287 
$ouut
 .= "</fieldset>";

289  
$ouut
;

290 
	}
}

299 
´Ùeùed
 
funùiÚ
 
	$_compe_po¡
()

301 
$ouut
 = "\n\n";

302 
$ouut
 .= '<fieldset id="ci_profiler_post" style="border:1px solid #009900;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';

303 
$ouut
 .= "\n";

304 
$ouut
 .ğ'<Ëg’d styË="cŞÜ:#009900;">&nb¥;&nb¥;'.
$this
->
CI
->
Ïng
->
	`lše
('profiler_post_data').'&nbsp;&nbsp;</legend>';

305 
$ouut
 .= "\n";

307 ià(
	`couÁ
(
$_POST
) == 0)

309 
$ouut
 .ğ"<div styË='cŞÜ:#009900;fÚt-weight:nÜm®;·ddšg:4px 0 4px 0'>".
$this
->
CI
->
Ïng
->
	`lše
('profiler_no_post')."</div>";

313 
$ouut
 .= "\n\n<table style='width:100%'>\n";

315 
	`fÜ—ch
 (
$_POST
 
as
 
$key
 => 
$v®
)

317 iàĞ! 
	`is_num”ic
(
$key
))

319 
$key
 = "'".$key."'";

322 
$ouut
 .ğ"<Œ><td styË='width:50%;·ddšg:5px;cŞÜ:#000;background-cŞÜ:#ddd;'>&#36;_POST[".
$key
."]&nbsp;&nbsp; </td><td style='width:50%;padding:5px;color:#009900;font-weight:normal;background-color:#ddd;'>";

323 ià(
	`is_¬¿y
(
$v®
))

325 
$ouut
 .ğ"<´e>" . 
	`html¥ecŸlch¬s
(
	`¡r¦ashes
(
	`´št_r
(
$v®
, 
TRUE
))) . "</pre>";

329 
$ouut
 .ğ
	`html¥ecŸlch¬s
(
	`¡r¦ashes
(
$v®
));

331 
$ouut
 .= "</td></tr>\n";

334 
$ouut
 .= "</table>\n";

336 
$ouut
 .= "</fieldset>";

338  
$ouut
;

339 
	}
}

348 
´Ùeùed
 
funùiÚ
 
	$_compe_uri_¡ršg
()

350 
$ouut
 = "\n\n";

351 
$ouut
 .= '<fieldset id="ci_profiler_uri_string" style="border:1px solid #000;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';

352 
$ouut
 .= "\n";

353 
$ouut
 .ğ'<Ëg’d styË="cŞÜ:#000;">&nb¥;&nb¥;'.
$this
->
CI
->
Ïng
->
	`lše
('profiler_uri_string').'&nbsp;&nbsp;</legend>';

354 
$ouut
 .= "\n";

356 ià(
$this
->
CI
->
uri
->
uri_¡ršg
 == '')

358 
$ouut
 .ğ"<div styË='cŞÜ:#000;fÚt-weight:nÜm®;·ddšg:4px 0 4px 0'>".
$this
->
CI
->
Ïng
->
	`lše
('profiler_no_uri')."</div>";

362 
$ouut
 .ğ"<div styË='cŞÜ:#000;fÚt-weight:nÜm®;·ddšg:4px 0 4px 0'>".
$this
->
CI
->
uri
->
uri_¡ršg
."</div>";

365 
$ouut
 .= "</fieldset>";

367  
$ouut
;

368 
	}
}

377 
´Ùeùed
 
funùiÚ
 
	$_compe_cÚŒŞËr_šfo
()

379 
$ouut
 = "\n\n";

380 
$ouut
 .= '<fieldset id="ci_profiler_controller_info" style="border:1px solid #995300;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';

381 
$ouut
 .= "\n";

382 
$ouut
 .ğ'<Ëg’d styË="cŞÜ:#995300;">&nb¥;&nb¥;'.
$this
->
CI
->
Ïng
->
	`lše
('profiler_controller_info').'&nbsp;&nbsp;</legend>';

383 
$ouut
 .= "\n";

385 
$ouut
 .ğ"<div styË='cŞÜ:#995300;fÚt-weight:nÜm®;·ddšg:4px 0 4px 0'>".
$this
->
CI
->
rou‹r
->
	`ãtch_şass
()."/".$this->CI->rou‹r->
	`ãtch_m‘hod
()."</div>";

387 
$ouut
 .= "</fieldset>";

389  
$ouut
;

390 
	}
}

401 
´Ùeùed
 
funùiÚ
 
	$_compe_memÜy_u§ge
()

403 
$ouut
 = "\n\n";

404 
$ouut
 .= '<fieldset id="ci_profiler_memory_usage" style="border:1px solid #5a0099;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';

405 
$ouut
 .= "\n";

406 
$ouut
 .ğ'<Ëg’d styË="cŞÜ:#5a0099;">&nb¥;&nb¥;'.
$this
->
CI
->
Ïng
->
	`lše
('profiler_memory_usage').'&nbsp;&nbsp;</legend>';

407 
$ouut
 .= "\n";

409 ià(
	`funùiÚ_exi¡s
('memÜy_g‘_u§ge'è&& (
$u§ge
 = 
	`memÜy_g‘_u§ge
()) != '')

411 
$ouut
 .ğ"<div styË='cŞÜ:#5a0099;fÚt-weight:nÜm®;·ddšg:4px 0 4px 0'>".
	`numb”_fÜm©
(
$u§ge
).' bytes</div>';

415 
$ouut
 .ğ"<div styË='cŞÜ:#5a0099;fÚt-weight:nÜm®;·ddšg:4px 0 4px 0'>".
$this
->
CI
->
Ïng
->
	`lše
('profiler_no_memory')."</div>";

418 
$ouut
 .= "</fieldset>";

420  
$ouut
;

421 
	}
}

432 
´Ùeùed
 
funùiÚ
 
	$_compe_h‰p_h—d”s
()

434 
$ouut
 = "\n\n";

435 
$ouut
 .= '<fieldset id="ci_profiler_http_headers" style="border:1px solid #000;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';

436 
$ouut
 .= "\n";

437 
$ouut
 .ğ'<Ëg’d styË="cŞÜ:#000;">&nb¥;&nb¥;'.
$this
->
CI
->
Ïng
->
	`lše
('profiler_headers').'&nbsp;&nbsp;(<span style="cursor:…ointer;" onclick="var s=document.getElementById(\'ci_profiler_httpheaders_table\').style;s.display=s.display==\'none\'?\'\':\'none\';this.innerHTML=this.innerHTML==\''.$this->CI->lang->line('profiler_section_show').'\'?\''.$this->CI->lang->line('profiler_section_hide').'\':\''.$this->CI->lang->line('profiler_section_show').'\';">'.$this->CI->lang->line('profiler_section_show').'</span>)</legend>';

438 
$ouut
 .= "\n";

440 
$ouut
 .= "\n\n<table style='width:100%;display:none' id='ci_profiler_httpheaders_table'>\n";

442 
	`fÜ—ch
 (
	`¬¿y
('HTTP_ACCEPT', 'HTTP_USER_AGENT', 'HTTP_CONNECTION', 'SERVER_PORT', 'SERVER_NAME', 'REMOTE_ADDR', 'SERVER_SOFTWARE', 'HTTP_ACCEPT_LANGUAGE', 'SCRIPT_NAME', 'REQUEST_METHOD',' HTTP_HOST', 'REMOTE_HOST', 'CONTENT_TYPE', 'SERVER_PROTOCOL', 'QUERY_STRING', 'HTTP_ACCEPT_ENCODING', 'HTTP_X_FORWARDED_FOR'è
as
 
$h—d”
)

444 
$v®
 = (
	`is£t
(
$_SERVER
[
$h—d”
])) ? $_SERVER[$header] : '';

445 
$ouut
 .ğ"<Œ><td styË='v”tiÿl-®ign:İ;width:50%;·ddšg:5px;cŞÜ:#900;background-cŞÜ:#ddd;'>".
$h—d”
."&nb¥;&nb¥;</td><td styË='width:50%;·ddšg:5px;cŞÜ:#000;background-cŞÜ:#ddd;'>".
$v®
."</td></tr>\n";

448 
$ouut
 .= "</table>\n";

449 
$ouut
 .= "</fieldset>";

451  
$ouut
;

452 
	}
}

463 
´Ùeùed
 
funùiÚ
 
	$_compe_cÚfig
()

465 
$ouut
 = "\n\n";

466 
$ouut
 .= '<fieldset id="ci_profiler_config" style="border:1px solid #000;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';

467 
$ouut
 .= "\n";

468 
$ouut
 .ğ'<Ëg’d styË="cŞÜ:#000;">&nb¥;&nb¥;'.
$this
->
CI
->
Ïng
->
	`lše
('profiler_config').'&nbsp;&nbsp;(<span style="cursor:…ointer;" onclick="var s=document.getElementById(\'ci_profiler_config_table\').style;s.display=s.display==\'none\'?\'\':\'none\';this.innerHTML=this.innerHTML==\''.$this->CI->lang->line('profiler_section_show').'\'?\''.$this->CI->lang->line('profiler_section_hide').'\':\''.$this->CI->lang->line('profiler_section_show').'\';">'.$this->CI->lang->line('profiler_section_show').'</span>)</legend>';

469 
$ouut
 .= "\n";

471 
$ouut
 .= "\n\n<table style='width:100%; display:none' id='ci_profiler_config_table'>\n";

473 
	`fÜ—ch
 (
$this
->
CI
->
cÚfig
->cÚfig 
as
 
$cÚfig
=>
$v®
)

475 ià(
	`is_¬¿y
(
$v®
))

477 
$v®
 = 
	`´št_r
($v®, 
TRUE
);

480 
$ouut
 .ğ"<Œ><td styË='·ddšg:5px; v”tiÿl-®ign:İ;cŞÜ:#900;background-cŞÜ:#ddd;'>".
$cÚfig
."&nb¥;&nb¥;</td><td styË='·ddšg:5px; cŞÜ:#000;background-cŞÜ:#ddd;'>".
	`html¥ecŸlch¬s
(
$v®
)."</td></tr>\n";

483 
$ouut
 .= "</table>\n";

484 
$ouut
 .= "</fieldset>";

486  
$ouut
;

487 
	}
}

496 
´iv©e
 
funùiÚ
 
	$_compe_£ssiÚ_d©a
()

498 iàĞ! 
	`is£t
(
$this
->
CI
->
£ssiÚ
))

503 
$ouut
 = '<fieldset id="ci_profiler_csession" style="border:1px solid #000;padding:6px 10px 10px 10px;margin:20px 0 20px 0;background-color:#eee">';

504 
$ouut
 .ğ'<Ëg’d styË="cŞÜ:#000;">&nb¥;&nb¥;'.
$this
->
CI
->
Ïng
->
	`lše
('profiler_session_data').'&nbsp;&nbsp;(<span style="cursor:…ointer;" onclick="var s=document.getElementById(\'ci_profiler_session_data\').style;s.display=s.display==\'none\'?\'\':\'none\';this.innerHTML=this.innerHTML==\''.$this->CI->lang->line('profiler_section_show').'\'?\''.$this->CI->lang->line('profiler_section_hide').'\':\''.$this->CI->lang->line('profiler_section_show').'\';">'.$this->CI->lang->line('profiler_section_show').'</span>)</legend>';

505 
$ouut
 .= "<table style='width:100%;display:none' id='ci_profiler_session_data'>";

507 
	`fÜ—ch
 (
$this
->
CI
->
£ssiÚ
->
	`®l_u£rd©a
(è
as
 
$key
 => 
$v®
)

509 ià(
	`is_¬¿y
(
$v®
))

511 
$v®
 = 
	`´št_r
($v®, 
TRUE
);

514 
$ouut
 .ğ"<Œ><td styË='·ddšg:5px; v”tiÿl-®ign:İ;cŞÜ:#900;background-cŞÜ:#ddd;'>".
$key
."&nb¥;&nb¥;</td><td styË='·ddšg:5px; cŞÜ:#000;background-cŞÜ:#ddd;'>".
	`html¥ecŸlch¬s
(
$v®
)."</td></tr>\n";

517 
$ouut
 .= '</table>';

518 
$ouut
 .= "</fieldset>";

519  
$ouut
;

520 
	}
}

529 
public
 
funùiÚ
 
	$run
()

531 
$ouut
 = "<div id='codeigniter_profiler' style='clear:both;background-color:#fff;padding:10px;'>";

532 
$f›lds_di¥Ïyed
 = 0;

534 
	`fÜ—ch
 (
$this
->
_avaabË_£ùiÚs
 
as
 
$£ùiÚ
)

536 ià(
$this
->
_compe_
{
$£ùiÚ
} !=ğ
FALSE
)

538 
$func
 = "_compile_{$section}";

539 
$ouut
 .ğ
$this
->{
$func
}();

540 
$f›lds_di¥Ïyed
++;

544 ià(
$f›lds_di¥Ïyed
 == 0)

546 
$ouut
 .ğ'<°¡yË="bÜd”:1px sŞid #5a0099;·ddšg:10px;m¬gš:20px 0;background-cŞÜ:#“e">'.
$this
->
CI
->
Ïng
->
	`lše
('profiler_no_profiles').'</p>';

549 
$ouut
 .= '</div>';

551  
$ouut
;

552 
	}
}

	@system/libraries/Session.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_SessiÚ
 {

29 
v¬
 
	m$£ss_’üy±_cook›
 = 
FALSE
;

30 
v¬
 
	m$£ss_u£_d©aba£
 = 
FALSE
;

31 
v¬
 
	m$£ss_bË_Çme
 = '';

32 
v¬
 
	m$£ss_expœ©iÚ
 = 7200;

33 
v¬
 
	m$£ss_expœe_Ú_şo£
 = 
FALSE
;

34 
v¬
 
	m$£ss_m©ch_
 = 
FALSE
;

35 
v¬
 
	m$£ss_m©ch_u£¿g’t
 = 
TRUE
;

36 
v¬
 
	m$£ss_cook›_Çme
 = 'ci_session';

37 
v¬
 
	m$cook›_´efix
 = '';

38 
v¬
 
	m$cook›_·th
 = '';

39 
v¬
 
	m$cook›_domaš
 = '';

40 
v¬
 
	m$cook›_£cu»
 = 
FALSE
;

41 
v¬
 
	m$£ss_time_to_upd©e
 = 300;

42 
v¬
 
	m$’üy±iÚ_key
 = '';

43 
v¬
 
	m$æashd©a_key
 = 'flash';

44 
v¬
 
	m$time_»ã»nû
 = 'time';

45 
v¬
 
	m$gc_´obab™y
 = 5;

46 
v¬
 
	m$u£rd©a
 = 
¬¿y
();

47 
v¬
 
	m$CI
;

48 
v¬
 
	m$now
;

57 
public
 
funùiÚ
 
__cÚ¡ruù
(
$·¿ms
 = 
	$¬¿y
())

60 
	`log_mes§ge
('debug', "Session Class Initialized");

63 
$this
->
CI
 =& 
	`g‘_š¡ªû
();

68 
	`fÜ—ch
 (
	`¬¿y
('£ss_’üy±_cook›', '£ss_u£_d©aba£', '£ss_bË_Çme', '£ss_expœ©iÚ', '£ss_expœe_Ú_şo£', '£ss_m©ch_', '£ss_m©ch_u£¿g’t', '£ss_cook›_Çme', 'cook›_·th', 'cook›_domaš', 'cook›_£cu»', '£ss_time_to_upd©e', 'time_»ã»nû', 'cook›_´efix', '’üy±iÚ_key'è
as
 
$key
)

70 
$this
->
$key
 = (
	`is£t
(
$·¿ms
[$key])è? $·¿ms[$key] : $this->
CI
->
cÚfig
->
	`™em
($key);

74 ià(
$this
->
’üy±iÚ_key
 == '')

76 
	`show_”rÜ
('In ordero usehe Session class you‡re„equiredo set‡nƒncryption key in your config file.');

81 
$this
->
CI
->
lßd
->
	`h–³r
('string');

85 ià(
$this
->
£ss_’üy±_cook›
 =ğ
TRUE
)

87 
$this
->
CI
->
lßd
->
	`lib¿ry
('encrypt');

92 ià(
$this
->
£ss_u£_d©aba£
 ==ğ
TRUE
 
AND
 $this->
£ss_bË_Çme
 != '')

94 
$this
->
CI
->
lßd
->
	`d©aba£
();

100 
$this
->
now
 = $this->
	`_g‘_time
();

104 ià(
$this
->
£ss_expœ©iÚ
 == 0)

106 
$this
->
£ss_expœ©iÚ
 = (60*60*24*365*2);

111 
$this
->
£ss_cook›_Çme
 = $this->
cook›_´efix
.$this->sess_cookie_name;

116 iàĞ! 
$this
->
	`£ss_»ad
())

118 
$this
->
	`£ss_ü—‹
();

122 
$this
->
	`£ss_upd©e
();

127 
$this
->
	`_æashd©a_sw“p
();

130 
$this
->
	`_æashd©a_m¬k
();

134 
$this
->
	`_£ss_gc
();

136 
	`log_mes§ge
('debug', "Session„outines successfully„un");

147 
funùiÚ
 
	$£ss_»ad
()

151 
$£ssiÚ
 = 
$this
->
CI
->
šput
->
	`cook›
($this->
£ss_cook›_Çme
);

156 ià(
$£ssiÚ
 ==ğ
FALSE
)

158 
	`log_mes§ge
('debug', 'A session cookie was‚ot found.');

159  
FALSE
;

164 ià(
$this
->
£ss_’üy±_cook›
 =ğ
TRUE
)

166 
$£ssiÚ
 = 
$this
->
CI
->
’üy±
->
	`decode
($session);

172 
$hash
 = 
	`sub¡r
(
$£ssiÚ
, 
	`¡¾’
($session)-32);

173 
$£ssiÚ
 = 
	`sub¡r
($£ssiÚ, 0, 
	`¡¾’
($session)-32);

176 ià(
$hash
 !=ğ
	`md5
(
$£ssiÚ
.
$this
->
’üy±iÚ_key
))

178 
	`log_mes§ge
('error', 'The session cookie data did‚ot match what wasƒxpected. This could be‡…ossible hacking‡ttempt.');

179 
$this
->
	`£ss_de¡roy
();

180  
FALSE
;

187 
$£ssiÚ
 = 
$this
->
	`_un£rŸlize
($session);

190 iàĞ! 
	`is_¬¿y
(
$£ssiÚ
è
OR
 ! 
	`is£t
($session['session_id']) OR ! isset($session['ip_address']) OR ! isset($session['user_agent']) OR ! isset($session['last_activity']))

192 
$this
->
	`£ss_de¡roy
();

193  
FALSE
;

198 ià((
$£ssiÚ
['Ï¡_aùiv™y'] + 
$this
->
£ss_expœ©iÚ
è< $this->
now
)

200 
$this
->
	`£ss_de¡roy
();

201  
FALSE
;

206 ià(
$this
->
£ss_m©ch_
 =ğ
TRUE
 
AND
 
$£ssiÚ
['_add»ss'] !ğ$this->
CI
->
šput
->
	`_add»ss
())

208 
$this
->
	`£ss_de¡roy
();

209  
FALSE
;

214 ià(
$this
->
£ss_m©ch_u£¿g’t
 =ğ
TRUE
 
AND
 
	`Œim
(
$£ssiÚ
['u£r_ag’t']è!ğŒim(
	`sub¡r
($this->
CI
->
šput
->
	`u£r_ag’t
(), 0, 120)))

216 
$this
->
	`£ss_de¡roy
();

217  
FALSE
;

222 ià(
$this
->
£ss_u£_d©aba£
 ==ğ
TRUE
)

224 
$this
->
CI
->
db
->
	`wh”e
('£ssiÚ_id', 
$£ssiÚ
['session_id']);

226 ià(
$this
->
£ss_m©ch_
 =ğ
TRUE
)

228 
$this
->
CI
->
db
->
	`wh”e
('_add»ss', 
$£ssiÚ
['ip_address']);

231 ià(
$this
->
£ss_m©ch_u£¿g’t
 =ğ
TRUE
)

233 
$this
->
CI
->
db
->
	`wh”e
('u£r_ag’t', 
$£ssiÚ
['user_agent']);

236 
$qu”y
 = 
$this
->
CI
->
db
->
	`g‘
($this->
£ss_bË_Çme
);

239 ià(
$qu”y
->
	`num_rows
() == 0)

242 
$this
->
	`£ss_de¡roy
();

244  
FALSE
;

248 
$row
 = 
$qu”y
->
	`row
();

250 ià(
	`is£t
(
$row
->
u£r_d©a
è
AND
 $row->user_data != '')

252 
$cu¡om_d©a
 = 
$this
->
	`_un£rŸlize
(
$row
->
u£r_d©a
);

254 ià(
	`is_¬¿y
(
$cu¡om_d©a
))

256 
	`fÜ—ch
 (
$cu¡om_d©a
 
as
 
$key
 => 
$v®
)

258 
$£ssiÚ
[
$key
] = 
$v®
;

265 
$this
->
u£rd©a
 = 
$£ssiÚ
;

266 
	`un£t
(
$£ssiÚ
);

268  
TRUE
;

269 
	}
}

279 
funùiÚ
 
	$£ss_wr™e
()

282 ià(
$this
->
£ss_u£_d©aba£
 ==ğ
FALSE
)

284 
$this
->
	`_£t_cook›
();

289 
$cu¡om_u£rd©a
 = 
$this
->
u£rd©a
;

290 
$cook›_u£rd©a
 = 
	`¬¿y
();

295 
	`fÜ—ch
 (
	`¬¿y
('£ssiÚ_id','_add»ss','u£r_ag’t','Ï¡_aùiv™y'è
as
 
$v®
)

297 
	`un£t
(
$cu¡om_u£rd©a
[
$v®
]);

298 
$cook›_u£rd©a
[
$v®
] = 
$this
->
u£rd©a
[$val];

303 ià(
	`couÁ
(
$cu¡om_u£rd©a
) === 0)

305 
$cu¡om_u£rd©a
 = '';

310 
$cu¡om_u£rd©a
 = 
$this
->
	`_£rŸlize
($custom_userdata);

314 
$this
->
CI
->
db
->
	`wh”e
('£ssiÚ_id', $this->
u£rd©a
['session_id']);

315 
$this
->
CI
->
db
->
	`upd©e
($this->
£ss_bË_Çme
, 
	`¬¿y
('Ï¡_aùiv™y' => $this->
u£rd©a
['Ï¡_aùiv™y'], 'u£r_d©a' => 
$cu¡om_u£rd©a
));

320 
$this
->
	`_£t_cook›
(
$cook›_u£rd©a
);

321 
	}
}

331 
funùiÚ
 
	$£ss_ü—‹
()

333 
$£ssid
 = '';

334 
	`¡¾’
(
$£ssid
) < 32)

336 
$£ssid
 .ğ
	`mt_¿nd
(0, 
	`mt_g‘¿ndmax
());

340 
$£ssid
 .ğ
$this
->
CI
->
šput
->
	`_add»ss
();

343 
$this
->
u£rd©a
 = 
	`¬¿y
(

344 '£ssiÚ_id' => 
	`md5
(
	`uniqid
(
$£ssid
, 
TRUE
)),

345 '_add»ss' => 
$this
->
CI
->
šput
->
	`_add»ss
(),

346 'u£r_ag’t' => 
	`sub¡r
(
$this
->
CI
->
šput
->
	`u£r_ag’t
(), 0, 120),

347 'Ï¡_aùiv™y' => 
$this
->
now
,

353 ià(
$this
->
£ss_u£_d©aba£
 ==ğ
TRUE
)

355 
$this
->
CI
->
db
->
	`qu”y
($this->CI->db->
	`š£¹_¡ršg
($this->
£ss_bË_Çme
, $this->
u£rd©a
));

359 
$this
->
	`_£t_cook›
();

360 
	}
}

370 
funùiÚ
 
	$£ss_upd©e
()

373 ià((
$this
->
u£rd©a
['Ï¡_aùiv™y'] + $this->
£ss_time_to_upd©e
è>ğ$this->
now
)

380 
$Şd_£ssid
 = 
$this
->
u£rd©a
['session_id'];

381 
$Ãw_£ssid
 = '';

382 
	`¡¾’
(
$Ãw_£ssid
) < 32)

384 
$Ãw_£ssid
 .ğ
	`mt_¿nd
(0, 
	`mt_g‘¿ndmax
());

388 
$Ãw_£ssid
 .ğ
$this
->
CI
->
šput
->
	`_add»ss
();

391 
$Ãw_£ssid
 = 
	`md5
(
	`uniqid
($Ãw_£ssid, 
TRUE
));

394 
$this
->
u£rd©a
['£ssiÚ_id'] = 
$Ãw_£ssid
;

395 
$this
->
u£rd©a
['Ï¡_aùiv™y'] = $this->
now
;

399 
$cook›_d©a
 = 
NULL
;

402 ià(
$this
->
£ss_u£_d©aba£
 ==ğ
TRUE
)

405 
$cook›_d©a
 = 
	`¬¿y
();

406 
	`fÜ—ch
 (
	`¬¿y
('£ssiÚ_id','_add»ss','u£r_ag’t','Ï¡_aùiv™y'è
as
 
$v®
)

408 
$cook›_d©a
[
$v®
] = 
$this
->
u£rd©a
[$val];

411 
$this
->
CI
->
db
->
	`qu”y
($this->CI->db->
	`upd©e_¡ršg
($this->
£ss_bË_Çme
, 
	`¬¿y
('Ï¡_aùiv™y' => $this->
now
, '£ssiÚ_id' => 
$Ãw_£ssid
),‡¼ay('£ssiÚ_id' => 
$Şd_£ssid
)));

415 
$this
->
	`_£t_cook›
(
$cook›_d©a
);

416 
	}
}

426 
funùiÚ
 
	$£ss_de¡roy
()

429 ià(
$this
->
£ss_u£_d©aba£
 ==ğ
TRUE
 
AND
 
	`is£t
($this->
u£rd©a
['session_id']))

431 
$this
->
CI
->
db
->
	`wh”e
('£ssiÚ_id', $this->
u£rd©a
['session_id']);

432 
$this
->
CI
->
db
->
	`d–‘e
($this->
£ss_bË_Çme
);

436 
	`£tcook›
(

437 
$this
->
£ss_cook›_Çme
,

438 
	`add¦ashes
(
	`£rŸlize
(
	`¬¿y
())),

439 (
$this
->
now
 - 31500000),

440 
$this
->
cook›_·th
,

441 
$this
->
cook›_domaš
,

444 
	}
}

455 
funùiÚ
 
	$u£rd©a
(
$™em
)

457  ( ! 
	`is£t
(
$this
->
u£rd©a
[
$™em
])è? 
FALSE
 : $this->userdata[$item];

458 
	}
}

468 
funùiÚ
 
	$®l_u£rd©a
()

470  
$this
->
u£rd©a
;

471 
	}
}

483 
funùiÚ
 
£t_u£rd©a
(
$Ãwd©a
 = 
¬¿y
(), 
$Ãwv®
 = '')

485 ià(
is_¡ršg
(
$Ãwd©a
))

487 
$Ãwd©a
 = 
¬¿y
($Ãwd©¨=> 
$Ãwv®
);

490 ià(
couÁ
(
$Ãwd©a
) > 0)

492 
fÜ—ch
 (
$Ãwd©a
 
as
 
$key
 => 
$v®
)

494 
$this
->
u£rd©a
[
$key
] = 
$v®
;

498 
	g$this
->
£ss_wr™e
();

509 
funùiÚ
 
un£t_u£rd©a
(
$Ãwd©a
 = 
	$¬¿y
())

511 ià(
	`is_¡ršg
(
$Ãwd©a
))

513 
$Ãwd©a
 = 
	`¬¿y
($newdata => '');

516 ià(
	`couÁ
(
$Ãwd©a
) > 0)

518 
	`fÜ—ch
 (
$Ãwd©a
 
as
 
$key
 => 
$v®
)

520 
	`un£t
(
$this
->
u£rd©a
[
$key
]);

524 
$this
->
	`£ss_wr™e
();

525 
	}
}

538 
funùiÚ
 
£t_æashd©a
(
$Ãwd©a
 = 
¬¿y
(), 
$Ãwv®
 = '')

540 ià(
is_¡ršg
(
$Ãwd©a
))

542 
$Ãwd©a
 = 
¬¿y
($Ãwd©¨=> 
$Ãwv®
);

545 ià(
couÁ
(
$Ãwd©a
) > 0)

547 
fÜ—ch
 (
$Ãwd©a
 
as
 
$key
 => 
$v®
)

549 
$æashd©a_key
 = 
$this
->
æashd©a_key
.':Ãw:'.
$key
;

550 
	g$this
->
£t_u£rd©a
(
$æashd©a_key
, 
$v®
);

564 
funùiÚ
 
	$k“p_æashd©a
(
$key
)

570 
$Şd_æashd©a_key
 = 
$this
->
æashd©a_key
.':Şd:'.
$key
;

571 
$v®ue
 = 
$this
->
	`u£rd©a
(
$Şd_æashd©a_key
);

573 
$Ãw_æashd©a_key
 = 
$this
->
æashd©a_key
.':Ãw:'.
$key
;

574 
$this
->
	`£t_u£rd©a
(
$Ãw_æashd©a_key
, 
$v®ue
);

575 
	}
}

586 
funùiÚ
 
	$æashd©a
(
$key
)

588 
$æashd©a_key
 = 
$this
->
æashd©a_key
.':Şd:'.
$key
;

589  
$this
->
	`u£rd©a
(
$æashd©a_key
);

590 
	}
}

601 
funùiÚ
 
	$_æashd©a_m¬k
()

603 
$u£rd©a
 = 
$this
->
	`®l_u£rd©a
();

604 
	`fÜ—ch
 (
$u£rd©a
 
as
 
$Çme
 => 
$v®ue
)

606 
$·¹s
 = 
	`ex¶ode
(':Ãw:', 
$Çme
);

607 ià(
	`is_¬¿y
(
$·¹s
è&& 
	`couÁ
($parts) === 2)

609 
$Ãw_Çme
 = 
$this
->
æashd©a_key
.':Şd:'.
$·¹s
[1];

610 
$this
->
	`£t_u£rd©a
(
$Ãw_Çme
, 
$v®ue
);

611 
$this
->
	`un£t_u£rd©a
(
$Çme
);

614 
	}
}

625 
funùiÚ
 
	$_æashd©a_sw“p
()

627 
$u£rd©a
 = 
$this
->
	`®l_u£rd©a
();

628 
	`fÜ—ch
 (
$u£rd©a
 
as
 
$key
 => 
$v®ue
)

630 ià(
	`¡½os
(
$key
, ':old:'))

632 
$this
->
	`un£t_u£rd©a
(
$key
);

636 
	}
}

646 
funùiÚ
 
	$_g‘_time
()

648 ià(
	`¡¹Şow”
(
$this
->
time_»ã»nû
) == 'gmt')

650 
$now
 = 
	`time
();

651 
$time
 = 
	`mktime
(
	`gmd©e
("H", 
$now
), gmdate("i", $now), gmdate("s", $now), gmdate("m", $now), gmdate("d", $now), gmdate("Y", $now));

655 
$time
 = 
	`time
();

658  
$time
;

659 
	}
}

669 
funùiÚ
 
	$_£t_cook›
(
$cook›_d©a
 = 
NULL
)

671 ià(
	`is_nuÎ
(
$cook›_d©a
))

673 
$cook›_d©a
 = 
$this
->
u£rd©a
;

677 
$cook›_d©a
 = 
$this
->
	`_£rŸlize
($cookie_data);

679 ià(
$this
->
£ss_’üy±_cook›
 =ğ
TRUE
)

681 
$cook›_d©a
 = 
$this
->
CI
->
’üy±
->
	`’code
($cookie_data);

686 
$cook›_d©a
 = $cook›_d©a.
	`md5
($cook›_d©a.
$this
->
’üy±iÚ_key
);

689 
$expœe
 = (
$this
->
£ss_expœe_Ú_şo£
 ==ğ
TRUE
è? 0 : $this->
£ss_expœ©iÚ
 + 
	`time
();

692 
	`£tcook›
(

693 
$this
->
£ss_cook›_Çme
,

694 
$cook›_d©a
,

695 
$expœe
,

696 
$this
->
cook›_·th
,

697 
$this
->
cook›_domaš
,

698 
$this
->
cook›_£cu»


700 
	}
}

714 
funùiÚ
 
	$_£rŸlize
(
$d©a
)

716 ià(
	`is_¬¿y
(
$d©a
))

718 
	`fÜ—ch
 (
$d©a
 
as
 
$key
 => 
$v®
)

720 ià(
	`is_¡ršg
(
$v®
))

722 
$d©a
[
$key
] = 
	`¡r_»¶aû
('\\', '{{¦ash}}', 
$v®
);

728 ià(
	`is_¡ršg
(
$d©a
))

730 
$d©a
 = 
	`¡r_»¶aû
('\\', '{{slash}}', $data);

734  
	`£rŸlize
(
$d©a
);

735 
	}
}

749 
funùiÚ
 
	$_un£rŸlize
(
$d©a
)

751 
$d©a
 = @
	`un£rŸlize
(
	`¡r_¦ashes
($data));

753 ià(
	`is_¬¿y
(
$d©a
))

755 
	`fÜ—ch
 (
$d©a
 
as
 
$key
 => 
$v®
)

757 ià(
	`is_¡ršg
(
$v®
))

759 
$d©a
[
$key
] = 
	`¡r_»¶aû
('{{¦ash}}', '\\', 
$v®
);

763  
$d©a
;

766  (
	`is_¡ršg
(
$d©a
)è? 
	`¡r_»¶aû
('{{slash}}', '\\', $data) : $data;

767 
	}
}

780 
funùiÚ
 
	$_£ss_gc
()

782 ià(
$this
->
£ss_u£_d©aba£
 !ğ
TRUE
)

787 
	`¤ªd
(
	`time
());

788 ià((
	`¿nd
(è% 100è< 
$this
->
gc_´obab™y
)

790 
$expœe
 = 
$this
->
now
 - $this->
£ss_expœ©iÚ
;

792 
$this
->
CI
->
db
->
	`wh”e
("last_activity < {$expire}");

793 
$this
->
CI
->
db
->
	`d–‘e
($this->
£ss_bË_Çme
);

795 
	`log_mes§ge
('debug', 'Session garbage collection…erformed.');

797 
	}
}

	@system/libraries/Sha1.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

45 şas 
	cCI_SHA1
 {

47 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

49 
	`log_mes§ge
('debug', "SHA1 Class Initialized");

59 
funùiÚ
 
	$g’”©e
(
$¡r
)

61 
$n
 = ((
	`¡¾’
(
$¡r
) + 8) >> 6) + 1;

63 
$i
 = 0; $˜< 
$n
 * 16; $i++)

65 
$x
[
$i
] = 0;

68 
$i
 = 0; $˜< 
	`¡¾’
(
$¡r
); $i++)

70 
$x
[
$i
 >> 2] |ğ
	`Üd
(
	`sub¡r
(
$¡r
, $i, 1)) << (24 - ($i % 4) * 8);

73 
$x
[
$i
 >> 2] |= 0x80 << (24 - ($i % 4) * 8);

75 
$x
[
$n
 * 16 - 1] = 
	`¡¾’
(
$¡r
) * 8;

77 
$a
 = 1732584193;

78 
$b
 = -271733879;

79 
$c
 = -1732584194;

80 
$d
 = 271733878;

81 
$e
 = -1009589776;

83 
$i
 = 0; $˜< 
	`couÁ
(
$x
); $i += 16)

85 
$Şda
 = 
$a
;

86 
$Şdb
 = 
$b
;

87 
$Şdc
 = 
$c
;

88 
$Şdd
 = 
$d
;

89 
$Şde
 = 
$e
;

91 
$j
 = 0; $j < 80; $j++)

93 ià(
$j
 < 16)

95 
$w
[
$j
] = 
$x
[
$i
 + $j];

99 
$w
[
$j
] = 
$this
->
	`_rŞ
($w[$j - 3] ^ $w[$j - 8] ^ $w[$j - 14] ^ $w[$j - 16], 1);

102 
$t
 = 
$this
->
	`_§ã_add
($this->_§ã_add($this->
	`_rŞ
(
$a
, 5), $this->
	`_á
(
$j
, 
$b
, 
$c
, 
$d
)), $this->_§ã_add($this->_§ã_add(
$e
, 
$w
[$j]), $this->
	`_kt
($j)));

104 
$e
 = 
$d
;

105 
$d
 = 
$c
;

106 
$c
 = 
$this
->
	`_rŞ
(
$b
, 30);

107 
$b
 = 
$a
;

108 
$a
 = 
$t
;

111 
$a
 = 
$this
->
	`_§ã_add
($a, 
$Şda
);

112 
$b
 = 
$this
->
	`_§ã_add
($b, 
$Şdb
);

113 
$c
 = 
$this
->
	`_§ã_add
($c, 
$Şdc
);

114 
$d
 = 
$this
->
	`_§ã_add
($d, 
$Şdd
);

115 
$e
 = 
$this
->
	`_§ã_add
($e, 
$Şde
);

118  
$this
->
	`_hex
(
$a
).$this->_hex(
$b
).$this->_hex(
$c
).$this->_hex(
$d
).$this->_hex(
$e
);

119 
	}
}

130 
funùiÚ
 
	$_hex
(
$¡r
)

132 
$¡r
 = 
	`dechex
($str);

134 ià(
	`¡¾’
(
$¡r
) == 7)

136 
$¡r
 = '0'.$str;

139  
$¡r
;

140 
	}
}

150 
funùiÚ
 
	$_á
(
$t
, 
$b
, 
$c
, 
$d
)

152 ià(
$t
 < 20)

153  (
$b
 & 
$c
è| ((~$bè& 
$d
);

154 ià(
$t
 < 40)

155  
$b
 ^ 
$c
 ^ 
$d
;

156 ià(
$t
 < 60)

157  (
$b
 & 
$c
è| ($b & 
$d
) | ($c & $d);

159  
$b
 ^ 
$c
 ^ 
$d
;

160 
	}
}

170 
funùiÚ
 
	$_kt
(
$t
)

172 ià(
$t
 < 20)

176 ià(
$t
 < 40)

180 ià(
$t
 < 60)

188 
	}
}

198 
funùiÚ
 
	$_§ã_add
(
$x
, 
$y
)

200 
$lsw
 = (
$x
 & 0xFFFFè+ (
$y
 & 0xFFFF);

201 
$msw
 = (
$x
 >> 16è+ (
$y
 >> 16è+ (
$lsw
 >> 16);

203  (
$msw
 << 16è| (
$lsw
 & 0xFFFF);

204 
	}
}

214 
funùiÚ
 
	$_rŞ
(
$num
, 
$út
)

216  (
$num
 << 
$út
è| 
$this
->
	`_z”o_fl
($num, 32 - $cnt);

217 
	}
}

227 
funùiÚ
 
	$_z”o_fl
(
$a
, 
$b
)

229 
$bš
 = 
	`decbš
(
$a
);

231 ià(
	`¡¾’
(
$bš
è< 
$b
)

233 
$bš
 = 0;

237 
$bš
 = 
	`sub¡r
($bš, 0, 
	`¡¾’
($bšè- 
$b
);

240 
$i
=0; $˜< 
$b
; $i++)

242 
$bš
 = "0".$bin;

245  
	`bšdec
(
$bš
);

246 
	}
}

	@system/libraries/Table.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_TabË
 {

31 
v¬
 
	m$rows
 = 
¬¿y
();

32 
v¬
 
	m$h—dšg
 = 
¬¿y
();

33 
v¬
 
	m$auto_h—dšg
 = 
TRUE
;

34 
v¬
 
	m$ÿ±iÚ
 = 
NULL
;

35 
v¬
 
	m$‹m¶©e
 = 
NULL
;

36 
v¬
 
	m$Ãwlše
 = "\n";

37 
v¬
 
	m$em±y_ûÎs
 = "";

38 
v¬
 
	m$funùiÚ
 = 
FALSE
;

40 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

42 
	`log_mes§ge
('debug', "Table Class Initialized");

54 
funùiÚ
 
	$£t_‹m¶©e
(
$‹m¶©e
)

56 iàĞ! 
	`is_¬¿y
(
$‹m¶©e
))

58  
FALSE
;

61 
$this
->
‹m¶©e
 = 
$‹m¶©e
;

62 
	}
}

75 
funùiÚ
 
	$£t_h—dšg
()

77 
$¬gs
 = 
	`func_g‘_¬gs
();

78 
$this
->
h—dšg
 = $this->
	`_´•_¬gs
(
$¬gs
);

79 
	}
}

94 
funùiÚ
 
make_cŞumns
(
$¬¿y
 = 
¬¿y
(), 
$cŞ_lim™
 = 0)

96 iàĞ! 
is_¬¿y
(
$¬¿y
è
OR
 
couÁ
($array) == 0)

98  
FALSE
;

103 
	g$this
->
	gauto_h—dšg
 = 
FALSE
;

105 ià(
	g$cŞ_lim™
 == 0)

107  
$¬¿y
;

110 
	g$Ãw
 = 
¬¿y
();

111 
couÁ
(
$¬¿y
) > 0)

113 
	g$‹mp
 = 
¬¿y_¥liû
(
$¬¿y
, 0, 
$cŞ_lim™
);

115 ià(
couÁ
(
$‹mp
è< 
	g$cŞ_lim™
)

117 
	g$i
 = 
couÁ
(
$‹mp
); $˜< 
	g$cŞ_lim™
; $i++)

119 
	g$‹mp
[] = '&nbsp;';

123 
	g$Ãw
[] = 
$‹mp
;

126  
	g$Ãw
;

140 
funùiÚ
 
	$£t_em±y
(
$v®ue
)

142 
$this
->
em±y_ûÎs
 = 
$v®ue
;

143 
	}
}

156 
funùiÚ
 
	$add_row
()

158 
$¬gs
 = 
	`func_g‘_¬gs
();

159 
$this
->
rows
[] = $this->
	`_´•_¬gs
(
$¬gs
);

160 
	}
}

173 
funùiÚ
 
	$_´•_¬gs
(
$¬gs
)

178 ià(
	`is£t
(
$¬gs
[0]è
	`AND
 (
	`couÁ
($¬gsè=ğ1 && 
	`is_¬¿y
($args[0])))

181 iàĞ! 
	`is£t
(
$¬gs
[0]['data']))

183 
	`fÜ—ch
 (
$¬gs
[0] 
as
 
$key
 => 
$v®
)

185 ià(
	`is_¬¿y
(
$v®
è&& 
	`is£t
($val['data']))

187 
$¬gs
[
$key
] = 
$v®
;

191 
$¬gs
[
$key
] = 
	`¬¿y
('d©a' => 
$v®
);

198 
	`fÜ—ch
 (
$¬gs
 
as
 
$key
 => 
$v®
)

200 iàĞ! 
	`is_¬¿y
(
$v®
))

202 
$¬gs
[
$key
] = 
	`¬¿y
('d©a' => 
$v®
);

207  
$¬gs
;

208 
	}
}

219 
funùiÚ
 
	$£t_ÿ±iÚ
(
$ÿ±iÚ
)

221 
$this
->
ÿ±iÚ
 = 
$ÿ±iÚ
;

222 
	}
}

233 
funùiÚ
 
	$g’”©e
(
$bË_d©a
 = 
NULL
)

237 iàĞ! 
	`is_nuÎ
(
$bË_d©a
))

239 ià(
	`is_objeù
(
$bË_d©a
))

241 
$this
->
	`_£t_äom_objeù
(
$bË_d©a
);

243 
	`–£if
 (
	`is_¬¿y
(
$bË_d©a
))

245 
$£t_h—dšg
 = (
	`couÁ
(
$this
->
h—dšg
è=ğ0 
AND
 $this->
auto_h—dšg
 =ğ
FALSE
è? FALSE : 
TRUE
;

246 
$this
->
	`_£t_äom_¬¿y
(
$bË_d©a
, 
$£t_h—dšg
);

251 ià(
	`couÁ
(
$this
->
h—dšg
è=ğ0 
AND
 couÁ($this->
rows
) == 0)

257 
$this
->
	`_compe_‹m¶©e
();

260 
$funùiÚ
 = 
$this
->
funùiÚ
;

264 
$out
 = 
$this
->
‹m¶©e
['table_open'];

265 
$out
 .ğ
$this
->
Ãwlše
;

268 ià(
$this
->
ÿ±iÚ
)

270 
$out
 .ğ
$this
->
Ãwlše
;

271 
$out
 .ğ'<ÿ±iÚ>' . 
$this
->
ÿ±iÚ
 . '</caption>';

272 
$out
 .ğ
$this
->
Ãwlše
;

276 ià(
	`couÁ
(
$this
->
h—dšg
) > 0)

278 
$out
 .ğ
$this
->
‹m¶©e
['thead_open'];

279 
$out
 .ğ
$this
->
Ãwlše
;

280 
$out
 .ğ
$this
->
‹m¶©e
['heading_row_start'];

281 
$out
 .ğ
$this
->
Ãwlše
;

283 
	`fÜ—ch
 (
$this
->
h—dšg
 
as
 
$h—dšg
)

285 
$‹mp
 = 
$this
->
‹m¶©e
['heading_cell_start'];

287 
	`fÜ—ch
 (
$h—dšg
 
as
 
$key
 => 
$v®
)

289 ià(
$key
 != 'data')

291 
$‹mp
 = 
	`¡r_»¶aû
('<th', "<th $key='$val'", $temp);

295 
$out
 .ğ
$‹mp
;

296 
$out
 .ğ
	`is£t
(
$h—dšg
['data']) ? $heading['data'] : '';

297 
$out
 .ğ
$this
->
‹m¶©e
['heading_cell_end'];

300 
$out
 .ğ
$this
->
‹m¶©e
['heading_row_end'];

301 
$out
 .ğ
$this
->
Ãwlše
;

302 
$out
 .ğ
$this
->
‹m¶©e
['thead_close'];

303 
$out
 .ğ
$this
->
Ãwlše
;

307 ià(
	`couÁ
(
$this
->
rows
) > 0)

309 
$out
 .ğ
$this
->
‹m¶©e
['tbody_open'];

310 
$out
 .ğ
$this
->
Ãwlše
;

312 
$i
 = 1;

313 
	`fÜ—ch
 (
$this
->
rows
 
as
 
$row
)

315 iàĞ! 
	`is_¬¿y
(
$row
))

321 
$Çme
 = (
	`fmod
(
$i
++, 2)) ? '' : 'alt_';

323 
$out
 .ğ
$this
->
‹m¶©e
['row_'.
$Çme
.'start'];

324 
$out
 .ğ
$this
->
Ãwlše
;

326 
	`fÜ—ch
 (
$row
 
as
 
$ûÎ
)

328 
$‹mp
 = 
$this
->
‹m¶©e
['ûÎ_'.
$Çme
.'start'];

330 
	`fÜ—ch
 (
$ûÎ
 
as
 
$key
 => 
$v®
)

332 ià(
$key
 != 'data')

334 
$‹mp
 = 
	`¡r_»¶aû
('<td', "<td $key='$val'", $temp);

338 
$ûÎ
 = 
	`is£t
($cell['data']) ? $cell['data'] : '';

339 
$out
 .ğ
$‹mp
;

341 ià(
$ûÎ
 ==ğ"" 
OR
 $ûÎ ==ğ
NULL
)

343 
$out
 .ğ
$this
->
em±y_ûÎs
;

347 ià(
$funùiÚ
 !=ğ
FALSE
 && 
	`is_ÿÎabË
($function))

349 
$out
 .ğ
	`ÿÎ_u£r_func
(
$funùiÚ
, 
$ûÎ
);

353 
$out
 .ğ
$ûÎ
;

357 
$out
 .ğ
$this
->
‹m¶©e
['ûÎ_'.
$Çme
.'end'];

360 
$out
 .ğ
$this
->
‹m¶©e
['row_'.
$Çme
.'end'];

361 
$out
 .ğ
$this
->
Ãwlše
;

364 
$out
 .ğ
$this
->
‹m¶©e
['tbody_close'];

365 
$out
 .ğ
$this
->
Ãwlše
;

368 
$out
 .ğ
$this
->
‹m¶©e
['table_close'];

371 
$this
->
	`ş—r
();

373  
$out
;

374 
	}
}

384 
funùiÚ
 
	$ş—r
()

386 
$this
->
rows
 = 
	`¬¿y
();

387 
$this
->
h—dšg
 = 
	`¬¿y
();

388 
$this
->
auto_h—dšg
 = 
TRUE
;

389 
	}
}

400 
funùiÚ
 
	$_£t_äom_objeù
(
$qu”y
)

402 iàĞ! 
	`is_objeù
(
$qu”y
))

404  
FALSE
;

408 ià(
	`couÁ
(
$this
->
h—dšg
) == 0)

410 iàĞ! 
	`m‘hod_exi¡s
(
$qu”y
, 'list_fields'))

412  
FALSE
;

415 
$this
->
h—dšg
 = $this->
	`_´•_¬gs
(
$qu”y
->
	`li¡_f›lds
());

420 ià(
$qu”y
->
	`num_rows
() > 0)

422 
	`fÜ—ch
 (
$qu”y
->
	`»suÉ_¬¿y
(è
as
 
$row
)

424 
$this
->
rows
[] = $this->
	`_´•_¬gs
(
$row
);

427 
	}
}

438 
funùiÚ
 
	$_£t_äom_¬¿y
(
$d©a
, 
$£t_h—dšg
 = 
TRUE
)

440 iàĞ! 
	`is_¬¿y
(
$d©a
è
OR
 
	`couÁ
($data) == 0)

442  
FALSE
;

445 
$i
 = 0;

446 
	`fÜ—ch
 (
$d©a
 
as
 
$row
)

449 ià(
$i
 =ğ0 
AND
 
	`couÁ
(
$d©a
è> 1 AND couÁ(
$this
->
h—dšg
è=ğ0 AND 
$£t_h—dšg
 =ğ
TRUE
)

451 
$this
->
h—dšg
 = $this->
	`_´•_¬gs
(
$row
);

455 
$this
->
rows
[] = $this->
	`_´•_¬gs
(
$row
);

458 
$i
++;

460 
	}
}

470 
funùiÚ
 
	$_compe_‹m¶©e
()

472 ià(
$this
->
‹m¶©e
 =ğ
NULL
)

474 
$this
->
‹m¶©e
 = $this->
	`_deçuÉ_‹m¶©e
();

478 
$this
->
‹mp
 = $this->
	`_deçuÉ_‹m¶©e
();

479 
	`fÜ—ch
 (
	`¬¿y
('bË_İ’', 'th—d_İ’', 'th—d_şo£', 'h—dšg_row_¡¬t', 'h—dšg_row_’d', 'h—dšg_ûÎ_¡¬t', 'h—dšg_ûÎ_’d', 'tbody_İ’', 'tbody_şo£', 'row_¡¬t', 'row_’d', 'ûÎ_¡¬t', 'ûÎ_’d', 'row_®t_¡¬t', 'row_®t_’d', 'ûÎ_®t_¡¬t', 'ûÎ_®t_’d', 'bË_şo£'è
as
 
$v®
)

481 iàĞ! 
	`is£t
(
$this
->
‹m¶©e
[
$v®
]))

483 
$this
->
‹m¶©e
[
$v®
] = $this->
‹mp
[$val];

486 
	}
}

496 
funùiÚ
 
	$_deçuÉ_‹m¶©e
()

498  
	`¬¿y
 (

524 
	}
}

	@system/libraries/Trackback.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_T¿ckback
 {

31 
v¬
 
	m$time_fÜm©
 = 'local';

32 
v¬
 
	m$ch¬£t
 = 'UTF-8';

33 
v¬
 
	m$d©a
 = 
¬¿y
('url' => '', 'title' => '', 'excerpt' => '', 'blog_name' => '', 'charset' => '');

34 
v¬
 
	m$cÚv”t_ascii
 = 
TRUE
;

35 
v¬
 
	m$»¥Ú£
 = '';

36 
v¬
 
	m$”rÜ_msg
 = 
¬¿y
();

43 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

45 
	`log_mes§ge
('debug', "Trackback Class Initialized");

57 
funùiÚ
 
	$£nd
(
$tb_d©a
)

59 iàĞ! 
	`is_¬¿y
(
$tb_d©a
))

61 
$this
->
	`£t_”rÜ
('The send() method must be…assed‡n‡rray');

62  
FALSE
;

66 
	`fÜ—ch
 (
	`¬¿y
('u¾', 't™Ë', 'exû½t', 'blog_Çme', 'pšg_u¾'è
as
 
$™em
)

68 iàĞ! 
	`is£t
(
$tb_d©a
[
$™em
]))

70 
$this
->
	`£t_”rÜ
('Requœed i‹m missšg: '.
$™em
);

71  
FALSE
;

74 
$™em
)

76 'pšg_u¾' : 
$$™em
 = 
$this
->
	`exŒaù_u¾s
(
$tb_d©a
[
$™em
]);

78 'exû½t' : 
$$™em
 = 
$this
->
	`lim™_ch¬aù”s
($this->
	`cÚv”t_xml
(
	`¡r_gs
(
	`¡r¦ashes
(
$tb_d©a
[
$™em
]))));

80 'u¾' : 
$$™em
 = 
	`¡r_»¶aû
('&#45;', '-', 
$this
->
	`cÚv”t_xml
(
	`¡r_gs
(
	`¡r¦ashes
(
$tb_d©a
[
$™em
]))));

82  : 
$$™em
 = 
$this
->
	`cÚv”t_xml
(
	`¡r_gs
(
	`¡r¦ashes
(
$tb_d©a
[
$™em
])));

87 ià(
$this
->
cÚv”t_ascii
 =ğ
TRUE
)

89 ià(
$™em
 == 'excerpt')

91 
$$™em
 = 
$this
->
	`cÚv”t_ascii
($$item);

93 
	`–£if
 (
$™em
 == 'title')

95 
$$™em
 = 
$this
->
	`cÚv”t_ascii
($$item);

97 
	`–£if
 (
$™em
 == 'blog_name')

99 
$$™em
 = 
$this
->
	`cÚv”t_ascii
($$item);

105 
$ch¬£t
 = ( ! 
	`is£t
(
$tb_d©a
['ch¬£t'])è? 
$this
->
ch¬£t
 : $tb_data['charset'];

107 
$d©a
 = "u¾=".
	`¿wu¾’code
(
$u¾
)."&t™Ë=".¿wu¾’code(
$t™Ë
)."&blog_Çme=".¿wu¾’code(
$blog_Çme
)."&exû½t=".¿wu¾’code(
$exû½t
)."&ch¬£t=".¿wu¾’code(
$ch¬£t
);

110 
$»tuº
 = 
TRUE
;

111 ià(
	`couÁ
(
$pšg_u¾
) > 0)

113 
	`fÜ—ch
 (
$pšg_u¾
 
as
 
$u¾
)

115 ià(
$this
->
	`´oûss
(
$u¾
, 
$d©a
è=ğ
FALSE
)

117 
$»tuº
 = 
FALSE
;

122  
$»tuº
;

123 
	}
}

138 
funùiÚ
 
	$»ûive
()

140 
	`fÜ—ch
 (
	`¬¿y
('u¾', 't™Ë', 'blog_Çme', 'exû½t'è
as
 
$v®
)

142 iàĞ! 
	`is£t
(
$_POST
[
$v®
]è
OR
 $_POST[$val] == '')

144 
$this
->
	`£t_”rÜ
('ThfŞlowšg„equœed POST v¬ŸbË i missšg: '.
$v®
);

145  
FALSE
;

148 
$this
->
d©a
['ch¬£t'] = ( ! 
	`is£t
(
$_POST
['ch¬£t'])è? 'auto' : 
	`¡¹ouµ”
(
	`Œim
($_POST['charset']));

150 ià(
$v®
 !ğ'u¾' && 
	`funùiÚ_exi¡s
('mb_convert_encoding'))

152 
$_POST
[
$v®
] = 
	`mb_cÚv”t_’codšg
($_POST[$v®], 
$this
->
ch¬£t
, $this->
d©a
['charset']);

155 
$_POST
[
$v®
] = ($v® !ğ'u¾'è? 
$this
->
	`cÚv”t_xml
(
	`¡r_gs
($_POST[$val])) : strip_tags($_POST[$val]);

157 ià(
$v®
 == 'excerpt')

159 
$_POST
['exû½t'] = 
$this
->
	`lim™_ch¬aù”s
($_POST['excerpt']);

162 
$this
->
d©a
[
$v®
] = 
$_POST
[$val];

165  
TRUE
;

166 
	}
}

181 
funùiÚ
 
£nd_”rÜ
(
$mes§ge
 = 'Incomplete Information')

183 
echo
 "<?xmÈv”siÚ=\"1.0\"ƒncodšg=\"utf-8\"?".">\n<»¥Ú£>\n<”rÜ>1</”rÜ>\n<mes§ge>".
$mes§ge
."</message>\n</response>";

184 
	gex™
;

198 
funùiÚ
 
	$£nd_sucûss
()

200 
echo
 "<?xml version=\"1.0\"ƒncoding=\"utf-8\"?".">\n<response>\n<error>0</error>\n</response>";

201 
ex™
;

202 
	}
}

213 
funùiÚ
 
	$d©a
(
$™em
)

215  ( ! 
	`is£t
(
$this
->
d©a
[
$™em
])) ? '' : $this->data[$item];

216 
	}
}

231 
funùiÚ
 
	$´oûss
(
$u¾
, 
$d©a
)

233 
$rg‘
 = 
	`·r£_u¾
(
$u¾
);

236 iàĞ! 
$å
 = @
	`fsockİ’
(
$rg‘
['host'], 80))

238 
$this
->
	`£t_”rÜ
('Inv®id CÚÃùiÚ: '.
$u¾
);

239  
FALSE
;

243 
$µ©h
 = ( ! 
	`is£t
(
$rg‘
['·th'])è? 
$u¾
 : $target['path'];

245 
$·th
 = (
	`is£t
(
$rg‘
['qu”y']è&& $rg‘['qu”y'] !ğ""è? 
$µ©h
.'?'.$target['query'] : $ppath;

248 ià(
$id
 = 
$this
->
	`g‘_id
(
$u¾
))

250 
$d©a
 = "tb_id=".
$id
."&".$data;

254 
	`åuts
 (
$å
, "POST " . 
$·th
 . " HTTP/1.0\r\n" );

255 
	`åuts
 (
$å
, "Ho¡: " . 
$rg‘
['host'] . "\r\n" );

256 
	`åuts
 (
$å
, "Content-type:‡pplication/x-www-form-urlencoded\r\n" );

257 
	`åuts
 (
$å
, "CÚ‹Á-Ëngth: " . 
	`¡¾’
(
$d©a
) . "\r\n" );

258 
	`åuts
 (
$å
, "Connection: close\r\n\r\n" );

259 
	`åuts
 (
$å
, 
$d©a
);

262 
$this
->
»¥Ú£
 = "";

264  ! 
	`ãof
(
$å
))

266 
$this
->
»¥Ú£
 .ğ
	`fg‘s
(
$å
, 128);

268 @
	`fşo£
(
$å
);

271 ià(
	`¡ri¡r
(
$this
->
»¥Ú£
, '<”rÜ>0</”rÜ>'è==ğ
FALSE
)

273 
$mes§ge
 = 'An unknownƒrror wasƒncountered';

275 ià(
	`´eg_m©ch
("/<mes§ge>(.*?)<\/mes§ge>/is", 
$this
->
»¥Ú£
, 
$m©ch
))

277 
$mes§ge
 = 
	`Œim
(
$m©ch
['1']);

280 
$this
->
	`£t_”rÜ
(
$mes§ge
);

281  
FALSE
;

284  
TRUE
;

285 
	}
}

300 
funùiÚ
 
	$exŒaù_u¾s
(
$u¾s
)

303 
$u¾s
 = 
	`´eg_»¶aû
("/\s*(\S+)\s*/", "\\1,", $urls);

306 
$u¾s
 = 
	`¡r_»¶aû
(",,", ",", $urls);

309 ià(
	`sub¡r
(
$u¾s
, -1) == ",")

311 
$u¾s
 = 
	`sub¡r
($urls, 0, -1);

315 
$u¾s
 = 
	`´eg_¥l™
('/[,]/', $urls);

318 
$u¾s
 = 
	`¬¿y_unique
($urls);

320 
	`¬¿y_w®k
(
$u¾s
, 
	`¬¿y
(
$this
, 'validate_url'));

322  
$u¾s
;

323 
	}
}

336 
funùiÚ
 
	$v®id©e_u¾
(
$u¾
)

338 
$u¾
 = 
	`Œim
($url);

340 ià(
	`sub¡r
(
$u¾
, 0, 4) != "http")

342 
$u¾
 = "http://".$url;

344 
	}
}

355 
funùiÚ
 
	$g‘_id
(
$u¾
)

357 
$tb_id
 = "";

359 ià(
	`¡½os
(
$u¾
, '?'è!=ğ
FALSE
)

361 
$tb_¬¿y
 = 
	`ex¶ode
('/', 
$u¾
);

362 
$tb_’d
 = 
$tb_¬¿y
[
	`couÁ
($tb_array)-1];

364 iàĞ! 
	`is_num”ic
(
$tb_’d
))

366 
$tb_’d
 = 
$tb_¬¿y
[
	`couÁ
($tb_array)-2];

369 
$tb_¬¿y
 = 
	`ex¶ode
('=', 
$tb_’d
);

370 
$tb_id
 = 
$tb_¬¿y
[
	`couÁ
($tb_array)-1];

374 
$u¾
 = 
	`¹rim
($url, '/');

376 
$tb_¬¿y
 = 
	`ex¶ode
('/', 
$u¾
);

377 
$tb_id
 = 
$tb_¬¿y
[
	`couÁ
($tb_array)-1];

379 iàĞ! 
	`is_num”ic
(
$tb_id
))

381 
$tb_id
 = 
$tb_¬¿y
[
	`couÁ
($tb_array)-2];

385 iàĞ! 
	`´eg_m©ch
 ("/^([0-9]+)$/", 
$tb_id
))

387  
FALSE
;

391  
$tb_id
;

393 
	}
}

404 
funùiÚ
 
	$cÚv”t_xml
(
$¡r
)

406 
$‹mp
 = '__TEMP_AMPERSANDS__';

408 
$¡r
 = 
	`´eg_»¶aû
("/&#(\d+);/", "$temp\\1;", $str);

409 
$¡r
 = 
	`´eg_»¶aû
("/&(\w+);/", "$temp\\1;", $str);

411 
$¡r
 = 
	`¡r_»¶aû
(
	`¬¿y
("&","<",">","\"", "'", "-"),

412 
	`¬¿y
("&amp;", "&lt;", "&gt;", "&quot;", "&#39;", "&#45;"),

413 
$¡r
);

415 
$¡r
 = 
	`´eg_»¶aû
("/$temp(\d+);/","&#\\1;",$str);

416 
$¡r
 = 
	`´eg_»¶aû
("/$temp(\w+);/","&\\1;", $str);

418  
$¡r
;

419 
	}
}

434 
funùiÚ
 
lim™_ch¬aù”s
(
$¡r
, 
$n
 = 500, 
$’d_ch¬
 = '&#8230;')

436 ià(
¡¾’
(
$¡r
è< 
$n
)

438  
$¡r
;

441 
	g$¡r
 = 
´eg_»¶aû
("/\s+/", ' ', 
¡r_»¶aû
(
¬¿y
("\r\n", "\r", "\n"), ' ', 
$¡r
));

443 ià(
¡¾’
(
$¡r
è<ğ
$n
)

445  
$¡r
;

448 
	g$out
 = "";

449 
fÜ—ch
 (
ex¶ode
(' ', 
Œim
(
$¡r
)è
as
 
$v®
)

451 
	g$out
 .ğ
$v®
.' ';

452 ià(
¡¾’
(
$out
è>ğ
$n
)

454  
Œim
(
$out
).
$’d_ch¬
;

471 
funùiÚ
 
	$cÚv”t_ascii
(
$¡r
)

473 
$couÁ
 = 1;

474 
$out
 = '';

475 
$‹mp
 = 
	`¬¿y
();

477 
$i
 = 0, 
$s
 = 
	`¡¾’
(
$¡r
); $i < $s; $i++)

479 
$Üdš®
 = 
	`Üd
(
$¡r
[
$i
]);

481 ià(
$Üdš®
 < 128)

483 
$out
 .ğ
$¡r
[
$i
];

487 ià(
	`couÁ
(
$‹mp
) == 0)

489 
$couÁ
 = (
$Üdš®
 < 224) ? 2 : 3;

492 
$‹mp
[] = 
$Üdš®
;

494 ià(
	`couÁ
(
$‹mp
è=ğ
$couÁ
)

496 
$numb”
 = (
$couÁ
 =ğ3è? ((
$‹mp
['0'] % 16) * 4096) + (($temp['1'] % 64) * 64) + ($temp['2'] % 64) : (($temp['0'] % 32) * 64) + ($temp['1'] % 64);

498 
$out
 .ğ'&#'.
$numb”
.';';

499 
$couÁ
 = 1;

500 
$‹mp
 = 
	`¬¿y
();

505  
$out
;

506 
	}
}

517 
funùiÚ
 
	$£t_”rÜ
(
$msg
)

519 
	`log_mes§ge
('”rÜ', 
$msg
);

520 
$this
->
”rÜ_msg
[] = 
$msg
;

521 
	}
}

533 
funùiÚ
 
di¥Ïy_”rÜs
(
$İ’
 = '<p>', 
$şo£
 = '</p>')

535 
$¡r
 = '';

536 
fÜ—ch
 (
$this
->
”rÜ_msg
 
as
 
$v®
)

538 
	g$¡r
 .ğ
$İ’
.
$v®
.
$şo£
;

541  
	g$¡r
;

	@system/libraries/Typography.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_Typog¿phy
 {

30 
v¬
 
	m$block_–em’ts
 = 'address|blockquote|div|dl|fieldset|form|h\d|hr|noscript|object|ol|p|pre|script|table|ul';

33 
v¬
 
	m$sk_–em’ts
 = 'p|pre|ol|ul|dl|object|table|h\d';

36 
v¬
 
	m$šlše_–em’ts
 = 'a|abbr|acronym|b|bdo|big|br|button|cite|code|del|dfn|em|i|img|ins|input|label|map|kbd|q|samp|select|small|span|strong|sub|sup|textarea|tt|var';

39 
v¬
 
	m$šÃr_block_»quœed
 = 
¬¿y
('blockquote');

42 
v¬
 
	m$Ï¡_block_–em’t
 = '';

45 
v¬
 
	m$´Ùeù_b¿ûd_quÙes
 = 
FALSE
;

63 
funùiÚ
 
	$auto_typog¿phy
(
$¡r
, 
$»duû_lšeb»aks
 = 
FALSE
)

65 ià(
$¡r
 == '')

71 ià(
	`¡½os
(
$¡r
, "\r"è!=ğ
FALSE
)

73 
$¡r
 = 
	`¡r_»¶aû
(
	`¬¿y
("\r\n", "\r"), "\n", $str);

78 ià(
$»duû_lšeb»aks
 ==ğ
TRUE
)

80 
$¡r
 = 
	`´eg_»¶aû
("/\n\n+/", "\n\n", $str);

84 
$html_comm’ts
 = 
	`¬¿y
();

85 ià(
	`¡½os
(
$¡r
, '<!--'è!=ğ
FALSE
)

87 ià(
	`´eg_m©ch_®l
("#(<!\-\-.*?\-\->)#s", 
$¡r
, 
$m©ches
))

89 
$i
 = 0, 
$tÙ®
 = 
	`couÁ
(
$m©ches
[0]); $i < $total; $i++)

91 
$html_comm’ts
[] = 
$m©ches
[0][
$i
];

92 
$¡r
 = 
	`¡r_»¶aû
(
$m©ches
[0][
$i
], '{@HC'.$i.'}', $str);

99 ià(
	`¡½os
(
$¡r
, '<´e'è!=ğ
FALSE
)

101 
$¡r
 = 
	`´eg_»¶aû_ÿÎback
("#<´e.*?>.*?</´e>#si", 
	`¬¿y
(
$this
, '_protect_characters'), $str);

105 
$¡r
 = 
	`´eg_»¶aû_ÿÎback
("#<.+?>#si", 
	`¬¿y
(
$this
, '_protect_characters'), $str);

108 ià(
$this
->
´Ùeù_b¿ûd_quÙes
 ==ğ
TRUE
)

110 
$¡r
 = 
	`´eg_»¶aû_ÿÎback
("#\{.+?\}#si", 
	`¬¿y
(
$this
, '_protect_characters'), $str);

116 
$¡r
 = 
	`´eg_»¶aû
("#<(/*)(".
$this
->
šlše_–em’ts
.")([ >])#i", "{@TAG}\\1\\2\\3", $str);

127 
$chunks
 = 
	`´eg_¥l™
('/(<(?:[^<>]+(?:"[^"]*"|\'[^\']*\')?)+>)/', 
$¡r
, -1, 
PREG_SPLIT_DELIM_CAPTURE
|
PREG_SPLIT_NO_EMPTY
);

130 
$¡r
 = '';

131 
$´oûss
 = 
TRUE
;

132 
$·¿g¿ph
 = 
FALSE
;

133 
$cu¼’t_chunk
 = 0;

134 
$tÙ®_chunks
 = 
	`couÁ
(
$chunks
);

136 
	`fÜ—ch
 (
$chunks
 
as
 
$chunk
)

138 
$cu¼’t_chunk
++;

142 ià(
	`´eg_m©ch
("#<(/*)(".
$this
->
block_–em’ts
.").*?>#", 
$chunk
, 
$m©ch
))

144 ià(
	`´eg_m©ch
("#".
$this
->
sk_–em’ts
."#", 
$m©ch
[2]))

146 
$´oûss
 = (
$m©ch
[1] =ğ'/'è? 
TRUE
 : 
FALSE
;

149 ià(
$m©ch
[1] == '')

151 
$this
->
Ï¡_block_–em’t
 = 
$m©ch
[2];

154 
$¡r
 .ğ
$chunk
;

158 ià(
$´oûss
 =ğ
FALSE
)

160 
$¡r
 .ğ
$chunk
;

165 ià(
$cu¼’t_chunk
 =ğ
$tÙ®_chunks
)

167 
$chunk
 .= "\n";

171 
$¡r
 .ğ
$this
->
	`_fÜm©_Ãwlšes
(
$chunk
);

175 iàĞ! 
	`´eg_m©ch
("/^\s*<(?:".
$this
->
block_–em’ts
.")/i", 
$¡r
))

177 
$¡r
 = 
	`´eg_»¶aû
("/^(.*?)<(".
$this
->
block_–em’ts
.")/i", '<p>$1</p><$2', $str);

181 
$¡r
 = 
$this
->
	`fÜm©_ch¬aù”s
($str);

184 
$i
 = 0, 
$tÙ®
 = 
	`couÁ
(
$html_comm’ts
); $i < $total; $i++)

189 
$¡r
 = 
	`´eg_»¶aû
('#(?(?=<p>\{@HC'.
$i
.'\})<p>\{@HC'.$i.'\}(\s*</p>)|\{@HC'.$i.'\})#s', 
$html_comm’ts
[$i], $str);

193 
$bË
 = 
	`¬¿y
(

204 '#<p></p><('.
$this
->
block_–em’ts
.')#' => '<$1',

207 '#(&nb¥;\s*)+<('.
$this
->
block_–em’ts
.')#' => ' <$2',

228 ià(
$»duû_lšeb»aks
 ==ğ
TRUE
)

230 
$bË
['#<p>\n*</p>#'] = '';

236 
$bË
['#<p></p>#'] = '<p>&nbsp;</p>';

239  
	`´eg_»¶aû
(
	`¬¿y_keys
(
$bË
), $bË, 
$¡r
);

256 
funùiÚ
 
	$fÜm©_ch¬aù”s
(
$¡r
)

258 
$bË
;

260 iàĞ! 
	`is£t
(
$bË
))

262 
$bË
 = 
	`¬¿y
(

306  
	`´eg_»¶aû
(
	`¬¿y_keys
(
$bË
), $bË, 
$¡r
);

307 
	}
}

320 
funùiÚ
 
	$_fÜm©_Ãwlšes
(
$¡r
)

322 ià(
$¡r
 == '')

324  
$¡r
;

327 ià(
	`¡½os
(
$¡r
, "\n"è==ğ
FALSE
 && ! 
	`š_¬¿y
(
$this
->
Ï¡_block_–em’t
, $this->
šÃr_block_»quœed
))

329  
$¡r
;

333 
$¡r
 = 
	`¡r_»¶aû
("\n\n", "</p>\n\n<p>", $str);

336 
$¡r
 = 
	`´eg_»¶aû
("/([^\n])(\n)([^\n])/", "\\1<br />\\2\\3", $str);

339 ià(
$¡r
 != "\n")

344 
$¡r
 = '<p>'.
	`¹rim
($str).'</p>';

349 
$¡r
 = 
	`´eg_»¶aû
("/<p><\/p>(.*)/", "\\1", $str, 1);

351  
$¡r
;

352 
	}
}

368 
funùiÚ
 
	$_´Ùeù_ch¬aù”s
(
$m©ch
)

370  
	`¡r_»¶aû
(
	`¬¿y
("'",'"','--',' '),‡¼ay('{@SQ}', '{@DQ}', '{@DD}', '{@NBS}'), 
$m©ch
[0]);

371 
	}
}

382 
funùiÚ
 
	$Æ2br_exû±_´e
(
$¡r
)

384 
$ex
 = 
	`ex¶ode
("´e>",
$¡r
);

385 
$ù
 = 
	`couÁ
(
$ex
);

387 
$Ãw¡r
 = "";

388 
$i
 = 0; $˜< 
$ù
; $i++)

390 ià((
$i
 % 2) == 0)

392 
$Ãw¡r
 .ğ
	`Æ2br
(
$ex
[
$i
]);

396 
$Ãw¡r
 .ğ
$ex
[
$i
];

399 ià(
$ù
 - 1 !ğ
$i
)

400 
$Ãw¡r
 .= "pre>";

403  
$Ãw¡r
;

404 
	}
}

	@system/libraries/Unit_test.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_Un™_‹¡
 {

31 
v¬
 
	m$aùive
 = 
TRUE
;

32 
v¬
 
	m$»suÉs
 = 
¬¿y
();

33 
v¬
 
	m$¡riù
 = 
FALSE
;

34 
v¬
 
	m$_‹m¶©e
 = 
NULL
;

35 
v¬
 
	m$_‹m¶©e_rows
 = 
NULL
;

36 
v¬
 
	m$_‹¡_™ems_visibË
 = 
¬¿y
();

38 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

41 
$this
->
_‹¡_™ems_visibË
 = 
	`¬¿y
 (

51 
	`log_mes§ge
('debug', "Unit Testing Class Initialized");

65 
funùiÚ
 
	`£t_‹¡_™ems
(
$™ems
 = 
	$¬¿y
())

67 iàĞ! 
	`em±y
(
$™ems
è
AND
 
	`is_¬¿y
($items))

69 
$this
->
_‹¡_™ems_visibË
 = 
$™ems
;

71 
	}
}

86 
funùiÚ
 
run
(
$‹¡
, 
$ex³ùed
 = 
TRUE
, 
$‹¡_Çme
 = 'undefšed', 
$nÙes
 = '')

88 ià(
$this
->
aùive
 =ğ
FALSE
)

90  
FALSE
;

93 ià(
š_¬¿y
(
$ex³ùed
, 
¬¿y
('is_objeù', 'is_¡ršg', 'is_boŞ', 'is_Œue', 'is_çl£', 'is_št', 'is_num”ic', 'is_æßt', 'is_doubË', 'is_¬¿y', 'is_nuÎ'), 
TRUE
))

95 
	g$ex³ùed
 = 
¡r_»¶aû
('is_æßt', 'is_doubË', 
$ex³ùed
);

96 
	g$»suÉ
 = (
$ex³ùed
(
$‹¡
)è? 
TRUE
 : 
FALSE
;

97 
	g$exty³
 = 
¡r_»¶aû
(
¬¿y
('Œue', 'çl£'), 'boŞ', sŒ_»¶aû('is_', '', 
$ex³ùed
));

101 ià(
	g$this
->
	g¡riù
 =ğ
TRUE
)

102 
$»suÉ
 = (
$‹¡
 ==ğ
$ex³ùed
è? 
TRUE
 : 
FALSE
;

104 
	g$»suÉ
 = (
$‹¡
 =ğ
$ex³ùed
è? 
TRUE
 : 
FALSE
;

106 
	g$exty³
 = 
g‘ty³
(
$ex³ùed
);

109 
	g$back
 = 
$this
->
_backŒaû
();

111 
	g$»pÜt
[] = 
¬¿y
 (

112 '‹¡_Çme' => 
$‹¡_Çme
,

113 '‹¡_d©©y³' => 
g‘ty³
(
$‹¡
),

114 '»s_d©©y³' => 
$exty³
,

115 '»suÉ' => (
$»suÉ
 ==ğ
TRUE
) ? 'passed' : 'failed',

116 'fe' => 
$back
['file'],

117 'lše' => 
$back
['line'],

118 'nÙes' => 
$nÙes


121 
	g$this
->
	g»suÉs
[] = 
$»pÜt
;

123 (
	g$this
->
»pÜt
(
$this
->
»suÉ
(
$»pÜt
)));

136 
funùiÚ
 
»pÜt
(
$»suÉ
 = 
	$¬¿y
())

138 ià(
	`couÁ
(
$»suÉ
) == 0)

140 
$»suÉ
 = 
$this
->
	`»suÉ
();

143 
$CI
 =& 
	`g‘_š¡ªû
();

144 
$CI
->
lßd
->
	`Ïnguage
('unit_test');

146 
$this
->
	`_·r£_‹m¶©e
();

148 
$r
 = '';

149 
	`fÜ—ch
 (
$»suÉ
 
as
 
$»s
)

151 
$bË
 = '';

153 
	`fÜ—ch
 (
$»s
 
as
 
$key
 => 
$v®
)

155 ià(
$key
 =ğ
$CI
->
Ïng
->
	`lše
('ut_result'))

157 ià(
$v®
 =ğ
$CI
->
Ïng
->
	`lše
('ut_passed'))

159 
$v®
 = '<span style="color: #0C0;">'.$val.'</span>';

161 
	`–£if
 (
$v®
 =ğ
$CI
->
Ïng
->
	`lše
('ut_failed'))

163 
$v®
 = '<span style="color: #C00;">'.$val.'</span>';

167 
$‹mp
 = 
$this
->
_‹m¶©e_rows
;

168 
$‹mp
 = 
	`¡r_»¶aû
('{™em}', 
$key
, $temp);

169 
$‹mp
 = 
	`¡r_»¶aû
('{»suÉ}', 
$v®
, $temp);

170 
$bË
 .ğ
$‹mp
;

173 
$r
 .ğ
	`¡r_»¶aû
('{rows}', 
$bË
, 
$this
->
_‹m¶©e
);

176  
$r
;

177 
	}
}

190 
funùiÚ
 
	$u£_¡riù
(
$¡©e
 = 
TRUE
)

192 
$this
->
¡riù
 = (
$¡©e
 =ğ
FALSE
è? FALSE : 
TRUE
;

193 
	}
}

206 
funùiÚ
 
	$aùive
(
$¡©e
 = 
TRUE
)

208 
$this
->
aùive
 = (
$¡©e
 =ğ
FALSE
è? FALSE : 
TRUE
;

209 
	}
}

221 
funùiÚ
 
»suÉ
(
$»suÉs
 = 
	$¬¿y
())

223 
$CI
 =& 
	`g‘_š¡ªû
();

224 
$CI
->
lßd
->
	`Ïnguage
('unit_test');

226 ià(
	`couÁ
(
$»suÉs
) == 0)

228 
$»suÉs
 = 
$this
->
»suÉs
;

231 
$»tv®
 = 
	`¬¿y
();

232 
	`fÜ—ch
 (
$»suÉs
 
as
 
$»suÉ
)

234 
$‹mp
 = 
	`¬¿y
();

235 
	`fÜ—ch
 (
$»suÉ
 
as
 
$key
 => 
$v®
)

237 iàĞ! 
	`š_¬¿y
(
$key
, 
$this
->
_‹¡_™ems_visibË
))

242 ià(
	`is_¬¿y
(
$v®
))

244 
	`fÜ—ch
 (
$v®
 
as
 
$k
 => 
$v
)

246 ià(
FALSE
 !=ğ(
$lše
 = 
$CI
->
Ïng
->
	`lše
(
	`¡¹Şow”
('ut_'.
$v
))))

248 
$v
 = 
$lše
;

250 
$‹mp
[
$CI
->
Ïng
->
	`lše
('ut_'.
$k
)] = 
$v
;

255 ià(
FALSE
 !=ğ(
$lše
 = 
$CI
->
Ïng
->
	`lše
(
	`¡¹Şow”
('ut_'.
$v®
))))

257 
$v®
 = 
$lše
;

259 
$‹mp
[
$CI
->
Ïng
->
	`lše
('ut_'.
$key
)] = 
$v®
;

263 
$»tv®
[] = 
$‹mp
;

266  
$»tv®
;

267 
	}
}

280 
funùiÚ
 
	$£t_‹m¶©e
(
$‹m¶©e
)

282 
$this
->
_‹m¶©e
 = 
$‹m¶©e
;

283 
	}
}

295 
funùiÚ
 
	$_backŒaû
()

297 ià(
	`funùiÚ_exi¡s
('debug_backtrace'))

299 
$back
 = 
	`debug_backŒaû
();

301 
$fe
 = ( ! 
	`is£t
(
$back
['1']['file'])) ? '' : $back['1']['file'];

302 
$lše
 = ( ! 
	`is£t
(
$back
['1']['line'])) ? '' : $back['1']['line'];

304  
	`¬¿y
('fe' => 
$fe
, 'lše' => 
$lše
);

306  
	`¬¿y
('file' => 'Unknown', 'line' => 'Unknown');

307 
	}
}

317 
funùiÚ
 
	$_deçuÉ_‹m¶©e
()

319 
$this
->
_‹m¶©e
 = "\n".'<table style="width:100%; font-size:small; margin:10px 0; border-collapse:collapse; border:1px solid #CCC;">';

320 
$this
->
_‹m¶©e
 .= '{rows}';

321 
$this
->
_‹m¶©e
 .= "\n".'</table>';

323 
$this
->
_‹m¶©e_rows
 = "\n\t".'<tr>';

324 
$this
->
_‹m¶©e_rows
 .= "\n\t\t".'<th style="text-align:†eft; border-bottom:1px solid #CCC;">{item}</th>';

325 
$this
->
_‹m¶©e_rows
 .= "\n\t\t".'<td style="border-bottom:1px solid #CCC;">{result}</td>';

326 
$this
->
_‹m¶©e_rows
 .= "\n\t".'</tr>';

327 
	}
}

339 
funùiÚ
 
	$_·r£_‹m¶©e
()

341 iàĞ! 
	`is_nuÎ
(
$this
->
_‹m¶©e_rows
))

346 ià(
	`is_nuÎ
(
$this
->
_‹m¶©e
))

348 
$this
->
	`_deçuÉ_‹m¶©e
();

352 iàĞ! 
	`´eg_m©ch
("/\{rows\}(.*?)\{\/rows\}/si", 
$this
->
_‹m¶©e
, 
$m©ch
))

354 
$this
->
	`_deçuÉ_‹m¶©e
();

358 
$this
->
_‹m¶©e_rows
 = 
$m©ch
['1'];

359 
$this
->
_‹m¶©e
 = 
	`¡r_»¶aû
(
$m©ch
['0'], '{rows}', $this->_template);

360 
	}
}

372 
funùiÚ
 
	$is_Œue
(
$‹¡
)

374  (
	`is_boŞ
(
$‹¡
è
AND
 $‹¡ ==ğ
TRUE
è? TRUE : 
FALSE
;

375 
	}
}

376 
funùiÚ
 
	$is_çl£
(
$‹¡
)

378  (
	`is_boŞ
(
$‹¡
è
AND
 $‹¡ ==ğ
FALSE
è? 
TRUE
 : FALSE;

379 
	}
}

	@system/libraries/Upload.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_U¶ßd
 {

29 
public
 
	m$max_size
 = 0;

30 
public
 
	m$max_width
 = 0;

31 
public
 
	m$max_height
 = 0;

32 
public
 
	m$max_f’ame
 = 0;

33 
public
 
	m$®lowed_ty³s
 = "";

34 
public
 
	m$fe_‹mp
 = "";

35 
public
 
	m$fe_Çme
 = "";

36 
public
 
	m$Üig_Çme
 = "";

37 
public
 
	m$fe_ty³
 = "";

38 
public
 
	m$fe_size
 = "";

39 
public
 
	m$fe_ext
 = "";

40 
public
 
	m$u¶ßd_·th
 = "";

41 
public
 
	m$ov”wr™e
 = 
FALSE
;

42 
public
 
	m$’üy±_Çme
 = 
FALSE
;

43 
public
 
	m$is_image
 = 
FALSE
;

44 
public
 
	m$image_width
 = '';

45 
public
 
	m$image_height
 = '';

46 
public
 
	m$image_ty³
 = '';

47 
public
 
	m$image_size_¡r
 = '';

48 
public
 
	m$”rÜ_msg
 = 
¬¿y
();

49 
public
 
	m$mimes
 = 
¬¿y
();

50 
public
 
	m$»move_¥aûs
 = 
TRUE
;

51 
public
 
	m$xss_ş—n
 = 
FALSE
;

52 
public
 
	m$‹mp_´efix
 = "temp_file_";

53 
public
 
	m$ş›Á_Çme
 = '';

55 
´Ùeùed
 
	m$_fe_Çme_ov”ride
 = '';

62 
public
 
funùiÚ
 
__cÚ¡ruù
(
$´İs
 = 
	$¬¿y
())

64 ià(
	`couÁ
(
$´İs
) > 0)

66 
$this
->
	`š™Ÿlize
(
$´İs
);

69 
	`log_mes§ge
('debug', "Upload Class Initialized");

80 
public
 
funùiÚ
 
	`š™Ÿlize
(
$cÚfig
 = 
	$¬¿y
())

82 
$deçuÉs
 = 
	`¬¿y
(

95 'ov”wr™e' => 
FALSE
,

96 '’üy±_Çme' => 
FALSE
,

97 'is_image' => 
FALSE
,

102 '”rÜ_msg' => 
	`¬¿y
(),

103 'mimes' => 
	`¬¿y
(),

104 '»move_¥aûs' => 
TRUE
,

105 'xss_ş—n' => 
FALSE
,

111 
	`fÜ—ch
 (
$deçuÉs
 
as
 
$key
 => 
$v®
)

113 ià(
	`is£t
(
$cÚfig
[
$key
]))

115 
$m‘hod
 = '£t_'.
$key
;

116 ià(
	`m‘hod_exi¡s
(
$this
, 
$m‘hod
))

118 
$this
->
	`$m‘hod
(
$cÚfig
[
$key
]);

122 
$this
->
$key
 = 
$cÚfig
[$key];

127 
$this
->
$key
 = 
$v®
;

133 
$this
->
_fe_Çme_ov”ride
 = $this->
fe_Çme
;

134 
	}
}

143 
public
 
funùiÚ
 
do_u¶ßd
(
$f›ld
 = 'userfile')

147 iàĞ! 
is£t
(
$_FILES
[
$f›ld
]))

149 
$this
->
£t_”rÜ
('upload_no_file_selected');

150  
	gFALSE
;

154 iàĞ! 
	g$this
->
v®id©e_u¶ßd_·th
())

157  
	gFALSE
;

161 iàĞ! 
is_u¶ßded_fe
(
$_FILES
[
$f›ld
]['tmp_name']))

163 
	g$”rÜ
 = ( ! 
is£t
(
$_FILES
[
$f›ld
]['error'])) ? 4 : $_FILES[$field]['error'];

165 
	g$”rÜ
)

168 
$this
->
£t_”rÜ
('upload_file_exceeds_limit');

171 
$this
->
£t_”rÜ
('upload_file_exceeds_form_limit');

174 
$this
->
£t_”rÜ
('upload_file_partial');

177 
$this
->
£t_”rÜ
('upload_no_file_selected');

180 
$this
->
£t_”rÜ
('upload_no_temp_directory');

183 
$this
->
£t_”rÜ
('upload_unable_to_write_file');

186 
$this
->
£t_”rÜ
('upload_stopped_by_extension');

188  : 
$this
->
£t_”rÜ
('upload_no_file_selected');

192  
	gFALSE
;

197 
	g$this
->
	gfe_‹mp
 = 
$_FILES
[
$f›ld
]['tmp_name'];

198 
	g$this
->
	gfe_size
 = 
$_FILES
[
$f›ld
]['size'];

199 
	g$this
->
_fe_mime_ty³
(
$_FILES
[
$f›ld
]);

200 
	g$this
->
	gfe_ty³
 = 
´eg_»¶aû
("/^(.+?);.*$/", "\\1", 
$this
->
fe_ty³
);

201 
	g$this
->
	gfe_ty³
 = 
¡¹Şow”
(
Œim
(
¡r¦ashes
(
$this
->
fe_ty³
), '"'));

202 
	g$this
->
	gfe_Çme
 = 
$this
->
_´•_f’ame
(
$_FILES
[
$f›ld
]['name']);

203 
	g$this
->
	gfe_ext
 = 
$this
->
g‘_ex‹nsiÚ
($this->
fe_Çme
);

204 
	g$this
->
	gş›Á_Çme
 = 
$this
->
fe_Çme
;

207 iàĞ! 
	g$this
->
is_®lowed_f‘y³
())

209 
	g$this
->
£t_”rÜ
('upload_invalid_filetype');

210  
	gFALSE
;

214 ià(
	g$this
->
	g_fe_Çme_ov”ride
 != '')

216 
$this
->
fe_Çme
 = $this->
_´•_f’ame
($this->
_fe_Çme_ov”ride
);

219 ià(
¡½os
(
$this
->
_fe_Çme_ov”ride
, '.'è==ğ
FALSE
)

221 
$this
->
fe_Çme
 .ğ$this->
fe_ext
;

227 
	g$this
->
	gfe_ext
 = 
$this
->
g‘_ex‹nsiÚ
($this->
_fe_Çme_ov”ride
);

230 iàĞ! 
	g$this
->
is_®lowed_f‘y³
(
TRUE
))

232 
	g$this
->
£t_”rÜ
('upload_invalid_filetype');

233  
	gFALSE
;

238 ià(
	g$this
->
	gfe_size
 > 0)

240 
	g$this
->
	gfe_size
 = 
round
(
$this
->
fe_size
/1024, 2);

244 iàĞ! 
	g$this
->
is_®lowed_fesize
())

246 
	g$this
->
£t_”rÜ
('upload_invalid_filesize');

247  
	gFALSE
;

252 iàĞ! 
	g$this
->
is_®lowed_dim’siÚs
())

254 
	g$this
->
£t_”rÜ
('upload_invalid_dimensions');

255  
	gFALSE
;

259 
	g$this
->
	gfe_Çme
 = 
$this
->
ş—n_fe_Çme
($this->
fe_Çme
);

262 ià(
	g$this
->
	gmax_f’ame
 > 0)

264 
	g$this
->
	gfe_Çme
 = 
$this
->
lim™_f’ame_Ëngth
($this->
fe_Çme
, $this->
max_f’ame
);

268 ià(
	g$this
->
	g»move_¥aûs
 =ğ
TRUE
)

270 
$this
->
fe_Çme
 = 
´eg_»¶aû
("/\s+/", "_", $this->file_name);

279 
	g$this
->
	gÜig_Çme
 = 
$this
->
fe_Çme
;

281 ià(
	g$this
->
	gov”wr™e
 =ğ
FALSE
)

283 
$this
->
fe_Çme
 = $this->
£t_f’ame
($this->
u¶ßd_·th
, $this->file_name);

285 ià(
	g$this
->
	gfe_Çme
 ==ğ
FALSE
)

287  
FALSE
;

297 ià(
	g$this
->
	gxss_ş—n
)

299 ià(
	g$this
->
do_xss_ş—n
(è==ğ
FALSE
)

301 
$this
->
£t_”rÜ
('upload_unable_to_write_file');

302  
	gFALSE
;

313 iàĞ! @
cİy
(
$this
->
fe_‹mp
, $this->
u¶ßd_·th
.$this->
fe_Çme
))

315 iàĞ! @
move_u¶ßded_fe
(
$this
->
fe_‹mp
, $this->
u¶ßd_·th
.$this->
fe_Çme
))

317 
	g$this
->
£t_”rÜ
('upload_destination_error');

318  
	gFALSE
;

328 
	g$this
->
£t_image_´İ”t›s
(
$this
->
u¶ßd_·th
.$this->
fe_Çme
);

330  
	gTRUE
;

343 
public
 
funùiÚ
 
	$d©a
()

345  
	`¬¿y
 (

346 'fe_Çme' => 
$this
->
fe_Çme
,

347 'fe_ty³' => 
$this
->
fe_ty³
,

348 'fe_·th' => 
$this
->
u¶ßd_·th
,

349 'fuÎ_·th' => 
$this
->
u¶ßd_·th
.$this->
fe_Çme
,

350 '¿w_Çme' => 
	`¡r_»¶aû
(
$this
->
fe_ext
, '', $this->
fe_Çme
),

351 'Üig_Çme' => 
$this
->
Üig_Çme
,

352 'ş›Á_Çme' => 
$this
->
ş›Á_Çme
,

353 'fe_ext' => 
$this
->
fe_ext
,

354 'fe_size' => 
$this
->
fe_size
,

355 'is_image' => 
$this
->
	`is_image
(),

356 'image_width' => 
$this
->
image_width
,

357 'image_height' => 
$this
->
image_height
,

358 'image_ty³' => 
$this
->
image_ty³
,

359 'image_size_¡r' => 
$this
->
image_size_¡r
,

361 
	}
}

371 
public
 
funùiÚ
 
	$£t_u¶ßd_·th
(
$·th
)

374 
$this
->
u¶ßd_·th
 = 
	`¹rim
(
$·th
, '/').'/';

375 
	}
}

390 
public
 
funùiÚ
 
	$£t_f’ame
(
$·th
, 
$f’ame
)

392 ià(
$this
->
’üy±_Çme
 =ğ
TRUE
)

394 
	`mt_¤ªd
();

395 
$f’ame
 = 
	`md5
(
	`uniqid
(
	`mt_¿nd
())).
$this
->
fe_ext
;

398 iàĞ! 
	`fe_exi¡s
(
$·th
.
$f’ame
))

400  
$f’ame
;

403 
$f’ame
 = 
	`¡r_»¶aû
(
$this
->
fe_ext
, '', $filename);

405 
$Ãw_f’ame
 = '';

406 
$i
 = 1; $i < 100; $i++)

408 iàĞ! 
	`fe_exi¡s
(
$·th
.
$f’ame
.
$i
.
$this
->
fe_ext
))

410 
$Ãw_f’ame
 = 
$f’ame
.
$i
.
$this
->
fe_ext
;

415 ià(
$Ãw_f’ame
 == '')

417 
$this
->
	`£t_”rÜ
('upload_bad_filename');

418  
FALSE
;

422  
$Ãw_f’ame
;

424 
	}
}

434 
public
 
funùiÚ
 
	$£t_max_fesize
(
$n
)

436 
$this
->
max_size
 = ((è
$n
 < 0) ? 0: () $n;

437 
	}
}

447 
public
 
funùiÚ
 
	$£t_max_f’ame
(
$n
)

449 
$this
->
max_f’ame
 = ((è
$n
 < 0) ? 0: () $n;

450 
	}
}

460 
public
 
funùiÚ
 
	$£t_max_width
(
$n
)

462 
$this
->
max_width
 = ((è
$n
 < 0) ? 0: () $n;

463 
	}
}

473 
public
 
funùiÚ
 
	$£t_max_height
(
$n
)

475 
$this
->
max_height
 = ((è
$n
 < 0) ? 0: () $n;

476 
	}
}

486 
public
 
funùiÚ
 
	$£t_®lowed_ty³s
(
$ty³s
)

488 iàĞ! 
	`is_¬¿y
(
$ty³s
) && $types == '*')

490 
$this
->
®lowed_ty³s
 = '*';

493 
$this
->
®lowed_ty³s
 = 
	`ex¶ode
('|', 
$ty³s
);

494 
	}
}

506 
public
 
funùiÚ
 
£t_image_´İ”t›s
(
$·th
 = '')

508 iàĞ! 
$this
->
is_image
())

513 ià(
funùiÚ_exi¡s
('getimagesize'))

515 ià(
	gFALSE
 !=ğ(
$D
 = @
g‘imagesize
(
$·th
)))

517 
$ty³s
 = 
¬¿y
(1 => 'gif', 2 => 'jpeg', 3 => 'png');

519 
	g$this
->
	gimage_width
 = 
$D
['0'];

520 
	g$this
->
	gimage_height
 = 
$D
['1'];

521 
	g$this
->
	gimage_ty³
 = ( ! 
is£t
(
$ty³s
[
$D
['2']])) ? 'unknown' : $types[$D['2']];

522 
	g$this
->
	gimage_size_¡r
 = 
$D
['3'];

538 
public
 
funùiÚ
 
	$£t_xss_ş—n
(
$æag
 = 
FALSE
)

540 
$this
->
xss_ş—n
 = (
$æag
 =ğ
TRUE
è? TRUE : 
FALSE
;

541 
	}
}

550 
public
 
funùiÚ
 
	$is_image
()

555 
$²g_mimes
 = 
	`¬¿y
('image/x-png');

556 
$j³g_mimes
 = 
	`¬¿y
('image/jpg', 'image/jpe', 'image/jpeg', 'image/pjpeg');

558 ià(
	`š_¬¿y
(
$this
->
fe_ty³
, 
$²g_mimes
))

560 
$this
->
fe_ty³
 = 'image/png';

563 ià(
	`š_¬¿y
(
$this
->
fe_ty³
, 
$j³g_mimes
))

565 
$this
->
fe_ty³
 = 'image/jpeg';

568 
$img_mimes
 = 
	`¬¿y
(

574  (
	`š_¬¿y
(
$this
->
fe_ty³
, 
$img_mimes
, 
TRUE
)è? TRUE : 
FALSE
;

575 
	}
}

584 
public
 
funùiÚ
 
	$is_®lowed_f‘y³
(
$ignÜe_mime
 = 
FALSE
)

586 ià(
$this
->
®lowed_ty³s
 == '*')

588  
TRUE
;

591 ià(
	`couÁ
(
$this
->
®lowed_ty³s
è=ğ0 
OR
 ! 
	`is_¬¿y
($this->allowed_types))

593 
$this
->
	`£t_”rÜ
('upload_no_file_types');

594  
FALSE
;

597 
$ext
 = 
	`¡¹Şow”
(
	`Érim
(
$this
->
fe_ext
, '.'));

599 iàĞ! 
	`š_¬¿y
(
$ext
, 
$this
->
®lowed_ty³s
))

601  
FALSE
;

605 
$image_ty³s
 = 
	`¬¿y
('gif', 'jpg', 'jpeg', 'png', 'jpe');

607 ià(
	`š_¬¿y
(
$ext
, 
$image_ty³s
))

609 ià(
	`g‘imagesize
(
$this
->
fe_‹mp
è==ğ
FALSE
)

611  
FALSE
;

615 ià(
$ignÜe_mime
 ==ğ
TRUE
)

617  
TRUE
;

620 
$mime
 = 
$this
->
	`mimes_ty³s
(
$ext
);

622 ià(
	`is_¬¿y
(
$mime
))

624 ià(
	`š_¬¿y
(
$this
->
fe_ty³
, 
$mime
, 
TRUE
))

626  
TRUE
;

629 
	`–£if
 (
$mime
 =ğ
$this
->
fe_ty³
)

631  
TRUE
;

634  
FALSE
;

635 
	}
}

644 
public
 
funùiÚ
 
	$is_®lowed_fesize
()

646 ià(
$this
->
max_size
 !ğ0 
AND
 $this->
fe_size
 > $this->max_size)

648  
FALSE
;

652  
TRUE
;

654 
	}
}

663 
public
 
funùiÚ
 
	$is_®lowed_dim’siÚs
()

665 iàĞ! 
$this
->
	`is_image
())

667  
TRUE
;

670 ià(
	`funùiÚ_exi¡s
('getimagesize'))

672 
$D
 = @
	`g‘imagesize
(
$this
->
fe_‹mp
);

674 ià(
$this
->
max_width
 > 0 
AND
 
$D
['0'] > $this->max_width)

676  
FALSE
;

679 ià(
$this
->
max_height
 > 0 
AND
 
$D
['1'] > $this->max_height)

681  
FALSE
;

684  
TRUE
;

687  
TRUE
;

688 
	}
}

700 
public
 
funùiÚ
 
	$v®id©e_u¶ßd_·th
()

702 ià(
$this
->
u¶ßd_·th
 == '')

704 
$this
->
	`£t_”rÜ
('upload_no_filepath');

705  
FALSE
;

708 ià(
	`funùiÚ_exi¡s
('»®·th'è
AND
 @
	`»®·th
(
$this
->
u¶ßd_·th
è!=ğ
FALSE
)

710 
$this
->
u¶ßd_·th
 = 
	`¡r_»¶aû
("\\", "/", 
	`»®·th
($this->upload_path));

713 iàĞ! @
	`is_dœ
(
$this
->
u¶ßd_·th
))

715 
$this
->
	`£t_”rÜ
('upload_no_filepath');

716  
FALSE
;

719 iàĞ! 
	`is_»®ly_wr™abË
(
$this
->
u¶ßd_·th
))

721 
$this
->
	`£t_”rÜ
('upload_not_writable');

722  
FALSE
;

725 
$this
->
u¶ßd_·th
 = 
	`´eg_»¶aû
("/(.+?)\/*$/", "\\1/", $this->upload_path);

726  
TRUE
;

727 
	}
}

737 
public
 
funùiÚ
 
	$g‘_ex‹nsiÚ
(
$f’ame
)

739 
$x
 = 
	`ex¶ode
('.', 
$f’ame
);

740  '.'.
	`’d
(
$x
);

741 
	}
}

751 
public
 
funùiÚ
 
	$ş—n_fe_Çme
(
$f’ame
)

753 
$bad
 = 
	`¬¿y
(

782 
$f’ame
 = 
	`¡r_»¶aû
(
$bad
, '', $filename);

784  
	`¡r¦ashes
(
$f’ame
);

785 
	}
}

795 
public
 
funùiÚ
 
	$lim™_f’ame_Ëngth
(
$f’ame
, 
$Ëngth
)

797 ià(
	`¡¾’
(
$f’ame
è< 
$Ëngth
)

799  
$f’ame
;

802 
$ext
 = '';

803 ià(
	`¡½os
(
$f’ame
, '.'è!=ğ
FALSE
)

805 
$·¹s
 = 
	`ex¶ode
('.', 
$f’ame
);

806 
$ext
 = '.'.
	`¬¿y_pİ
(
$·¹s
);

807 
$f’ame
 = 
	`im¶ode
('.', 
$·¹s
);

810  
	`sub¡r
(
$f’ame
, 0, (
$Ëngth
 - 
	`¡¾’
(
$ext
))).$ext;

811 
	}
}

824 
public
 
funùiÚ
 
	$do_xss_ş—n
()

826 
$fe
 = 
$this
->
fe_‹mp
;

828 ià(
	`fesize
(
$fe
) == 0)

830  
FALSE
;

833 ià(
	`funùiÚ_exi¡s
('memÜy_g‘_u§ge'è&& 
	`memÜy_g‘_u§ge
(è&& 
	`ši_g‘
('memory_limit') != '')

835 
$cu¼’t
 = 
	`ši_g‘
('memory_limit') * 1024 * 1024;

841 
$Ãw_memÜy
 = 
	`numb”_fÜm©
(
	`û
(
	`fesize
(
$fe
è+ 
$cu¼’t
), 0, '.', '');

843 
	`ši_£t
('memÜy_lim™', 
$Ãw_memÜy
);

853 ià(
	`funùiÚ_exi¡s
('g‘imagesize'è&& @
	`g‘imagesize
(
$fe
è!=ğ
FALSE
)

855 ià((
$fe
 = @
	`fİ’
($fe, 'rb')è==ğ
FALSE
)

857  
FALSE
;

860 
$İ’šg_by‹s
 = 
	`ä—d
(
$fe
, 256);

861 
	`fşo£
(
$fe
);

867 iàĞ! 
	`´eg_m©ch
('/<×|body|h—d|html|img|¶aš‹xt|´e|süt|bË|t™Ë)[\s>]/i', 
$İ’šg_by‹s
))

869  
TRUE
;

873 ià((
$d©a
 = @
	`fe_g‘_cÚ‹Ás
(
$fe
)è==ğ
FALSE
)

875  
FALSE
;

878 
$CI
 =& 
	`g‘_š¡ªû
();

879  
$CI
->
£cur™y
->
	`xss_ş—n
(
$d©a
, 
TRUE
);

880 
	}
}

890 
public
 
funùiÚ
 
	$£t_”rÜ
(
$msg
)

892 
$CI
 =& 
	`g‘_š¡ªû
();

893 
$CI
->
Ïng
->
	`lßd
('upload');

895 ià(
	`is_¬¿y
(
$msg
))

897 
	`fÜ—ch
 (
$msg
 
as
 
$v®
)

899 
$msg
 = (
$CI
->
Ïng
->
	`lše
(
$v®
è=ğ
FALSE
) ? $val : $CI->lang->line($val);

900 
$this
->
”rÜ_msg
[] = 
$msg
;

901 
	`log_mes§ge
('”rÜ', 
$msg
);

906 
$msg
 = (
$CI
->
Ïng
->
	`lše
($msgè=ğ
FALSE
) ? $msg : $CI->lang->line($msg);

907 
$this
->
”rÜ_msg
[] = 
$msg
;

908 
	`log_mes§ge
('”rÜ', 
$msg
);

910 
	}
}

921 
public
 
funùiÚ
 
di¥Ïy_”rÜs
(
$İ’
 = '<p>', 
$şo£
 = '</p>')

923 
$¡r
 = '';

924 
fÜ—ch
 (
$this
->
”rÜ_msg
 
as
 
$v®
)

926 
	g$¡r
 .ğ
$İ’
.
$v®
.
$şo£
;

929  
	g$¡r
;

943 
public
 
funùiÚ
 
	$mimes_ty³s
(
$mime
)

945 
glob®
 
$mimes
;

947 ià(
	`couÁ
(
$this
->
mimes
) == 0)

949 ià(
	`defšed
('ENVIRONMENT'è
AND
 
	`is_fe
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/mimes.php'))

951 
	`šşude
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/mimes.php');

953 
	`–£if
 (
	`is_fe
(
APPPATH
.'config/mimes.php'))

955 
	`šşude
(
APPPATH
.'config//mimes.php');

959  
FALSE
;

962 
$this
->
mimes
 = 
$mimes
;

963 
	`un£t
(
$mimes
);

966  ( ! 
	`is£t
(
$this
->
mimes
[
$mime
])è? 
FALSE
 : $this->mimes[$mime];

967 
	}
}

980 
´Ùeùed
 
funùiÚ
 
	$_´•_f’ame
(
$f’ame
)

982 ià(
	`¡½os
(
$f’ame
, '.'è==ğ
FALSE
 
OR
 
$this
->
®lowed_ty³s
 == '*')

984  
$f’ame
;

987 
$·¹s
 = 
	`ex¶ode
('.', 
$f’ame
);

988 
$ext
 = 
	`¬¿y_pİ
(
$·¹s
);

989 
$f’ame
 = 
	`¬¿y_shiá
(
$·¹s
);

991 
	`fÜ—ch
 (
$·¹s
 
as
 
$·¹
)

993 iàĞ! 
	`š_¬¿y
(
	`¡¹Şow”
(
$·¹
), 
$this
->
®lowed_ty³s
è
OR
 $this->
	`mimes_ty³s
(¡¹Şow”($·¹)è==ğ
FALSE
)

995 
$f’ame
 .ğ'.'.
$·¹
.'_';

999 
$f’ame
 .ğ'.'.
$·¹
;

1003 
$f’ame
 .ğ'.'.
$ext
;

1005  
$f’ame
;

1006 
	}
}

1019 
´Ùeùed
 
funùiÚ
 
	$_fe_mime_ty³
(
$fe
)

1022 iàĞ(è
	`sub¡r
(
	`phpv”siÚ
(), 0, 3è>ğ5.3 && 
	`funùiÚ_exi¡s
('finfo_file'))

1024 
$fšfo
 = 
Ãw
 
	`fšfo
(
FILEINFO_MIME_TYPE
);

1025 ià(
$fšfo
 !=ğ
FALSE
)

1027 
$fe_ty³
 = 
$fšfo
->
	`fe
(
$fe
['tmp_name']);

1033 ià(
	`¡¾’
(
$fe_ty³
) > 1)

1035 
$this
->
fe_ty³
 = 
$fe_ty³
;

1042 ià(
	`funùiÚ_exi¡s
('mime_content_type'))

1044 
$this
->
fe_ty³
 = @
	`mime_cÚ‹Á_ty³
(
$fe
['tmp_name']);

1055 ià(
DIRECTORY_SEPARATOR
 !=ğ'\\' && 
	`funùiÚ_exi¡s
('exec'))

1057 
$ouut
 = 
	`¬¿y
();

1058 @
	`exec
('f--br›à--mime-ty³ ' . 
	`esÿ³sh–Ïrg
(
$fe
['tmp_·th']), 
$ouut
, 
$»tuº_code
);

1059 ià(
$»tuº_code
 ==ğ0 && 
	`¡¾’
(
$ouut
[0]) > 0)

1061 
$this
->
fe_ty³
 = 
	`¹rim
(
$ouut
[0]);

1066 
$this
->
fe_ty³
 = 
$fe
['type'];

1067 
	}
}

	@system/libraries/User_agent.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

29 şas 
	cCI_U£r_ag’t
 {

31 
v¬
 
	m$ag’t
 = 
NULL
;

33 
v¬
 
	m$is_brow£r
 = 
FALSE
;

34 
v¬
 
	m$is_robÙ
 = 
FALSE
;

35 
v¬
 
	m$is_mobe
 = 
FALSE
;

37 
v¬
 
	m$Ïnguages
 = 
¬¿y
();

38 
v¬
 
	m$ch¬£ts
 = 
¬¿y
();

40 
v¬
 
	m$¶©fÜms
 = 
¬¿y
();

41 
v¬
 
	m$brow£rs
 = 
¬¿y
();

42 
v¬
 
	m$mobes
 = 
¬¿y
();

43 
v¬
 
	m$robÙs
 = 
¬¿y
();

45 
v¬
 
	m$¶©fÜm
 = '';

46 
v¬
 
	m$brow£r
 = '';

47 
v¬
 
	m$v”siÚ
 = '';

48 
v¬
 
	m$mobe
 = '';

49 
v¬
 
	m$robÙ
 = '';

59 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

61 ià(
	`is£t
(
$_SERVER
['HTTP_USER_AGENT']))

63 
$this
->
ag’t
 = 
	`Œim
(
$_SERVER
['HTTP_USER_AGENT']);

66 iàĞ! 
	`is_nuÎ
(
$this
->
ag’t
))

68 ià(
$this
->
	`_lßd_ag’t_fe
())

70 
$this
->
	`_compe_d©a
();

74 
	`log_mes§ge
('debug', "User Agent Class Initialized");

85 
´iv©e
 
funùiÚ
 
	$_lßd_ag’t_fe
()

87 ià(
	`defšed
('ENVIRONMENT'è
AND
 
	`is_fe
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/user_agents.php'))

89 
	`šşude
(
APPPATH
.'cÚfig/'.
ENVIRONMENT
.'/user_agents.php');

91 
	`–£if
 (
	`is_fe
(
APPPATH
.'config/user_agents.php'))

93 
	`šşude
(
APPPATH
.'config/user_agents.php');

97  
FALSE
;

100 
$»tuº
 = 
FALSE
;

102 ià(
	`is£t
(
$¶©fÜms
))

104 
$this
->
¶©fÜms
 = 
$¶©fÜms
;

105 
	`un£t
(
$¶©fÜms
);

106 
$»tuº
 = 
TRUE
;

109 ià(
	`is£t
(
$brow£rs
))

111 
$this
->
brow£rs
 = 
$brow£rs
;

112 
	`un£t
(
$brow£rs
);

113 
$»tuº
 = 
TRUE
;

116 ià(
	`is£t
(
$mobes
))

118 
$this
->
mobes
 = 
$mobes
;

119 
	`un£t
(
$mobes
);

120 
$»tuº
 = 
TRUE
;

123 ià(
	`is£t
(
$robÙs
))

125 
$this
->
robÙs
 = 
$robÙs
;

126 
	`un£t
(
$robÙs
);

127 
$»tuº
 = 
TRUE
;

130  
$»tuº
;

131 
	}
}

141 
´iv©e
 
funùiÚ
 
	$_compe_d©a
()

143 
$this
->
	`_£t_¶©fÜm
();

145 
	`fÜ—ch
 (
	`¬¿y
('_£t_robÙ', '_£t_brow£r', '_£t_mobe'è
as
 
$funùiÚ
)

147 ià(
$this
->
	`$funùiÚ
(è==ğ
TRUE
)

152 
	}
}

162 
´iv©e
 
funùiÚ
 
	$_£t_¶©fÜm
()

164 ià(
	`is_¬¿y
(
$this
->
¶©fÜms
è
AND
 
	`couÁ
($this->platforms) > 0)

166 
	`fÜ—ch
 (
$this
->
¶©fÜms
 
as
 
$key
 => 
$v®
)

168 ià(
	`´eg_m©ch
("|".
	`´eg_quÙe
(
$key
)."|i", 
$this
->
ag’t
))

170 
$this
->
¶©fÜm
 = 
$v®
;

171  
TRUE
;

175 
$this
->
¶©fÜm
 = 'Unknown Platform';

176 
	}
}

186 
´iv©e
 
funùiÚ
 
	$_£t_brow£r
()

188 ià(
	`is_¬¿y
(
$this
->
brow£rs
è
AND
 
	`couÁ
($this->browsers) > 0)

190 
	`fÜ—ch
 (
$this
->
brow£rs
 
as
 
$key
 => 
$v®
)

192 ià(
	`´eg_m©ch
("|".
	`´eg_quÙe
(
$key
).".*?([0-9\.]+)|i", 
$this
->
ag’t
, 
$m©ch
))

194 
$this
->
is_brow£r
 = 
TRUE
;

195 
$this
->
v”siÚ
 = 
$m©ch
[1];

196 
$this
->
brow£r
 = 
$v®
;

197 
$this
->
	`_£t_mobe
();

198  
TRUE
;

202  
FALSE
;

203 
	}
}

213 
´iv©e
 
funùiÚ
 
	$_£t_robÙ
()

215 ià(
	`is_¬¿y
(
$this
->
robÙs
è
AND
 
	`couÁ
($this->robots) > 0)

217 
	`fÜ—ch
 (
$this
->
robÙs
 
as
 
$key
 => 
$v®
)

219 ià(
	`´eg_m©ch
("|".
	`´eg_quÙe
(
$key
)."|i", 
$this
->
ag’t
))

221 
$this
->
is_robÙ
 = 
TRUE
;

222 
$this
->
robÙ
 = 
$v®
;

223  
TRUE
;

227  
FALSE
;

228 
	}
}

238 
´iv©e
 
funùiÚ
 
	$_£t_mobe
()

240 ià(
	`is_¬¿y
(
$this
->
mobes
è
AND
 
	`couÁ
($this->mobiles) > 0)

242 
	`fÜ—ch
 (
$this
->
mobes
 
as
 
$key
 => 
$v®
)

244 ià(
FALSE
 !=ğ(
	`¡½os
(
	`¡¹Şow”
(
$this
->
ag’t
), 
$key
)))

246 
$this
->
is_mobe
 = 
TRUE
;

247 
$this
->
mobe
 = 
$v®
;

248  
TRUE
;

252  
FALSE
;

253 
	}
}

263 
´iv©e
 
funùiÚ
 
	$_£t_Ïnguages
()

265 ià((
	`couÁ
(
$this
->
Ïnguages
è=ğ0è
AND
 
	`is£t
(
$_SERVER
['HTTP_ACCEPT_LANGUAGE']) AND $_SERVER['HTTP_ACCEPT_LANGUAGE'] != '')

267 
$Ïnguages
 = 
	`´eg_»¶aû
('/(;q=[0-9\.]+)/i', '', 
	`¡¹Şow”
(
	`Œim
(
$_SERVER
['HTTP_ACCEPT_LANGUAGE'])));

269 
$this
->
Ïnguages
 = 
	`ex¶ode
(',', 
$Ïnguages
);

272 ià(
	`couÁ
(
$this
->
Ïnguages
) == 0)

274 
$this
->
Ïnguages
 = 
	`¬¿y
('Undefined');

276 
	}
}

286 
´iv©e
 
funùiÚ
 
	$_£t_ch¬£ts
()

288 ià((
	`couÁ
(
$this
->
ch¬£ts
è=ğ0è
AND
 
	`is£t
(
$_SERVER
['HTTP_ACCEPT_CHARSET']) AND $_SERVER['HTTP_ACCEPT_CHARSET'] != '')

290 
$ch¬£ts
 = 
	`´eg_»¶aû
('/(;q=.+)/i', '', 
	`¡¹Şow”
(
	`Œim
(
$_SERVER
['HTTP_ACCEPT_CHARSET'])));

292 
$this
->
ch¬£ts
 = 
	`ex¶ode
(',', 
$ch¬£ts
);

295 ià(
	`couÁ
(
$this
->
ch¬£ts
) == 0)

297 
$this
->
ch¬£ts
 = 
	`¬¿y
('Undefined');

299 
	}
}

309 
public
 
funùiÚ
 
	$is_brow£r
(
$key
 = 
NULL
)

311 iàĞ! 
$this
->
is_brow£r
)

313  
FALSE
;

317 ià(
$key
 ==ğ
NULL
)

319  
TRUE
;

323  
	`¬¿y_key_exi¡s
(
$key
, 
$this
->
brow£rs
è
AND
 $this->
brow£r
 === $this->browsers[$key];

324 
	}
}

334 
public
 
funùiÚ
 
	$is_robÙ
(
$key
 = 
NULL
)

336 iàĞ! 
$this
->
is_robÙ
)

338  
FALSE
;

342 ià(
$key
 ==ğ
NULL
)

344  
TRUE
;

348  
	`¬¿y_key_exi¡s
(
$key
, 
$this
->
robÙs
è
AND
 $this->
robÙ
 === $this->robots[$key];

349 
	}
}

359 
public
 
funùiÚ
 
	$is_mobe
(
$key
 = 
NULL
)

361 iàĞ! 
$this
->
is_mobe
)

363  
FALSE
;

367 ià(
$key
 ==ğ
NULL
)

369  
TRUE
;

373  
	`¬¿y_key_exi¡s
(
$key
, 
$this
->
mobes
è
AND
 $this->
mobe
 === $this->mobiles[$key];

374 
	}
}

384 
public
 
funùiÚ
 
	$is_»ã¼®
()

386 iàĞ! 
	`is£t
(
$_SERVER
['HTTP_REFERER']è
OR
 $_SERVER['HTTP_REFERER'] == '')

388  
FALSE
;

390  
TRUE
;

391 
	}
}

401 
public
 
funùiÚ
 
	$ag’t_¡ršg
()

403  
$this
->
ag’t
;

404 
	}
}

414 
public
 
funùiÚ
 
	$¶©fÜm
()

416  
$this
->
¶©fÜm
;

417 
	}
}

427 
public
 
funùiÚ
 
	$brow£r
()

429  
$this
->
brow£r
;

430 
	}
}

440 
public
 
funùiÚ
 
	$v”siÚ
()

442  
$this
->
v”siÚ
;

443 
	}
}

453 
public
 
funùiÚ
 
	$robÙ
()

455  
$this
->
robÙ
;

456 
	}
}

465 
public
 
funùiÚ
 
	$mobe
()

467  
$this
->
mobe
;

468 
	}
}

478 
public
 
funùiÚ
 
	$»ã¼”
()

480  ( ! 
	`is£t
(
$_SERVER
['HTTP_REFERER']è
OR
 $_SERVER['HTTP_REFERER'] =ğ''è? '' : 
	`Œim
($_SERVER['HTTP_REFERER']);

481 
	}
}

491 
public
 
funùiÚ
 
	$Ïnguages
()

493 ià(
	`couÁ
(
$this
->
Ïnguages
) == 0)

495 
$this
->
	`_£t_Ïnguages
();

498  
$this
->
Ïnguages
;

499 
	}
}

509 
public
 
funùiÚ
 
	$ch¬£ts
()

511 ià(
	`couÁ
(
$this
->
ch¬£ts
) == 0)

513 
$this
->
	`_£t_ch¬£ts
();

516  
$this
->
ch¬£ts
;

517 
	}
}

527 
public
 
funùiÚ
 
acû±_Ïng
(
$Ïng
 = 'en')

529  (
š_¬¿y
(
¡¹Şow”
(
$Ïng
), 
$this
->
Ïnguages
(), 
TRUE
));

540 
public
 
funùiÚ
 
acû±_ch¬£t
(
$ch¬£t
 = 'utf-8')

542  (
š_¬¿y
(
¡¹Şow”
(
$ch¬£t
), 
$this
->
ch¬£ts
(), 
TRUE
));

	@system/libraries/Xmlrpc.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

16 iàĞ! 
funùiÚ_exi¡s
('xml_parser_create'))

18 
show_”rÜ
('Your PHP installation does‚ot support XML');

33 şas 
	cCI_XmÌpc
 {

35 
v¬
 
	m$debug
 = 
FALSE
;

36 
v¬
 
	m$xmÌpcI4
 = 'i4';

37 
v¬
 
	m$xmÌpcIÁ
 = 'int';

38 
v¬
 
	m$xmÌpcBoŞ—n
 = 'boolean';

39 
v¬
 
	m$xmÌpcDoubË
 = 'double';

40 
v¬
 
	m$xmÌpcSŒšg
 = 'string';

41 
v¬
 
	m$xmÌpcD©eTime
 = 'dateTime.iso8601';

42 
v¬
 
	m$xmÌpcBa£64
 = 'base64';

43 
v¬
 
	m$xmÌpcA¼ay
 = 'array';

44 
v¬
 
	m$xmÌpcSŒuù
 = 'struct';

46 
v¬
 
	m$xmÌpcTy³s
 = 
¬¿y
();

47 
v¬
 
	m$v®id_·»Ás
 = 
¬¿y
();

48 
v¬
 
	m$xmÌpû¼
 = 
¬¿y
();

49 
v¬
 
	m$xmÌpc¡r
 = 
¬¿y
();

51 
v¬
 
	m$xmÌpc_deãncodšg
 = 'UTF-8';

52 
v¬
 
	m$xmÌpcName
 = 'XML-RPC for CodeIgniter';

53 
v¬
 
	m$xmÌpcV”siÚ
 = '1.1';

54 
v¬
 
	m$xmÌpû¼u£r
 = 800;

55 
v¬
 
	m$xmÌpû¼xml
 = 100;

56 
v¬
 
	m$xmÌpc_back¦ash
 = '';

58 
v¬
 
	m$ş›Á
;

59 
v¬
 
	m$m‘hod
;

60 
v¬
 
	m$d©a
;

61 
v¬
 
	m$mes§ge
 = '';

62 
v¬
 
	m$”rÜ
 = '';

63 
v¬
 
	m$»suÉ
;

64 
v¬
 
	m$»¥Ú£
 = 
¬¿y
();

66 
v¬
 
	m$xss_ş—n
 = 
TRUE
;

72 
public
 
funùiÚ
 
__cÚ¡ruù
(
$cÚfig
 = 
	$¬¿y
())

74 
$this
->
xmÌpcName
 = $this->xmlrpcName;

75 
$this
->
xmÌpc_back¦ash
 = 
	`chr
(92).chr(92);

78 
$this
->
xmÌpcTy³s
 = 
	`¬¿y
(

79 
$this
->
xmÌpcI4
 => '1',

80 
$this
->
xmÌpcIÁ
 => '1',

81 
$this
->
xmÌpcBoŞ—n
 => '1',

82 
$this
->
xmÌpcSŒšg
 => '1',

83 
$this
->
xmÌpcDoubË
 => '1',

84 
$this
->
xmÌpcD©eTime
 => '1',

85 
$this
->
xmÌpcBa£64
 => '1',

86 
$this
->
xmÌpcA¼ay
 => '2',

87 
$this
->
xmÌpcSŒuù
 => '3'

91 
$this
->
v®id_·»Ás
 = 
	`¬¿y
('BOOLEAN' =>‡rray('VALUE'),

92 'I4' => 
	`¬¿y
('VALUE'),

93 'INT' => 
	`¬¿y
('VALUE'),

94 'STRING' => 
	`¬¿y
('VALUE'),

95 'DOUBLE' => 
	`¬¿y
('VALUE'),

96 'DATETIME.ISO8601' => 
	`¬¿y
('VALUE'),

97 'BASE64' => 
	`¬¿y
('VALUE'),

98 'ARRAY' => 
	`¬¿y
('VALUE'),

99 'STRUCT' => 
	`¬¿y
('VALUE'),

100 'PARAM' => 
	`¬¿y
('PARAMS'),

101 'METHODNAME' => 
	`¬¿y
('METHODCALL'),

102 'PARAMS' => 
	`¬¿y
('METHODCALL', 'METHODRESPONSE'),

103 'MEMBER' => 
	`¬¿y
('STRUCT'),

104 'NAME' => 
	`¬¿y
('MEMBER'),

105 'DATA' => 
	`¬¿y
('ARRAY'),

106 'FAULT' => 
	`¬¿y
('METHODRESPONSE'),

107 'VALUE' => 
	`¬¿y
('MEMBER', 'DATA', 'PARAM', 'FAULT')

112 
$this
->
xmÌpû¼
['unknown_method'] = '1';

113 
$this
->
xmÌpc¡r
['unknown_method'] = 'This is‚ot‡ known method forhis XML-RPC Server';

114 
$this
->
xmÌpû¼
['invalid_return'] = '2';

115 
$this
->
xmÌpc¡r
['invalid_return'] = 'The XML data„eceived wasƒither invalid or‚ot inhe correct form for XML-RPC. Turn on debuggingoƒxaminehe XML data further.';

116 
$this
->
xmÌpû¼
['incorrect_params'] = '3';

117 
$this
->
xmÌpc¡r
['incorrect_params'] = 'Incorrect…arameters were…assedo method';

118 
$this
->
xmÌpû¼
['introspect_unknown'] = '4';

119 
$this
->
xmÌpc¡r
['introspect_unknown'] = "Cannot inspect signature for„equest: method unknown";

120 
$this
->
xmÌpû¼
['http_error'] = '5';

121 
$this
->
xmÌpc¡r
['http_error'] = "Did‚ot„eceive‡ '200 OK'„esponse from„emote server.";

122 
$this
->
xmÌpû¼
['no_data'] = '6';

123 
$this
->
xmÌpc¡r
['no_data'] ='No data„eceived from server.';

125 
$this
->
	`š™Ÿlize
(
$cÚfig
);

127 
	`log_mes§ge
('debug', "XML-RPC Class Initialized");

135 
funùiÚ
 
	`š™Ÿlize
(
$cÚfig
 = 
	$¬¿y
())

137 ià(
	`couÁ
(
$cÚfig
) > 0)

139 
	`fÜ—ch
 (
$cÚfig
 
as
 
$key
 => 
$v®
)

141 ià(
	`is£t
(
$this
->
$key
))

143 
$this
->
$key
 = 
$v®
;

147 
	}
}

154 
funùiÚ
 
	$£rv”
(
$u¾
, 
$pÜt
=80)

156 ià(
	`sub¡r
(
$u¾
, 0, 4) != "http")

158 
$u¾
 = "http://".$url;

161 
$·¹s
 = 
	`·r£_u¾
(
$u¾
);

163 
$·th
 = ( ! 
	`is£t
(
$·¹s
['path'])) ? '/' : $parts['path'];

165 ià(
	`is£t
(
$·¹s
['query']) && $parts['query'] != '')

167 
$·th
 .ğ'?'.
$·¹s
['query'];

170 
$this
->
ş›Á
 = 
Ãw
 
	`XML_RPC_Cl›Á
(
$·th
, 
$·¹s
['ho¡'], 
$pÜt
);

171 
	}
}

178 
funùiÚ
 
	$timeout
(
$£cÚds
=5)

180 iàĞ! 
	`is_nuÎ
(
$this
->
ş›Á
è&& 
	`is_št
(
$£cÚds
))

182 
$this
->
ş›Á
->
timeout
 = 
$£cÚds
;

184 
	}
}

191 
funùiÚ
 
	$m‘hod
(
$funùiÚ
)

193 
$this
->
m‘hod
 = 
$funùiÚ
;

194 
	}
}

201 
funùiÚ
 
	$»que¡
(
$šcomšg
)

203 iàĞ! 
	`is_¬¿y
(
$šcomšg
))

208 
$this
->
d©a
 = 
	`¬¿y
();

210 
	`fÜ—ch
 (
$šcomšg
 
as
 
$key
 => 
$v®ue
)

212 
$this
->
d©a
[
$key
] = $this->
	`v®ues_·rsšg
(
$v®ue
);

214 
	}
}

222 
funùiÚ
 
	$£t_debug
(
$æag
 = 
TRUE
)

224 
$this
->
debug
 = (
$æag
 =ğ
TRUE
è? TRUE : 
FALSE
;

225 
	}
}

231 
funùiÚ
 
	$v®ues_·rsšg
(
$v®ue
, 
$»tuº
 = 
FALSE
)

233 ià(
	`is_¬¿y
(
$v®ue
è&& 
	`¬¿y_key_exi¡s
(0, $value))

235 iàĞ! 
	`is£t
(
$v®ue
['1']è
	`OR
 ( ! is£t(
$this
->
xmÌpcTy³s
[$value['1']])))

237 ià(
	`is_¬¿y
(
$v®ue
[0]))

239 
$‹mp
 = 
Ãw
 
	`XML_RPC_V®ues
(
$v®ue
['0'], 'array');

243 
$‹mp
 = 
Ãw
 
	`XML_RPC_V®ues
(
$v®ue
['0'], 'string');

246 
	`–£if
 (
	`is_¬¿y
(
$v®ue
['0']è&& ($v®ue['1'] =ğ'¡ruù' 
OR
 $value['1'] == 'array'))

248 
	`li¡
(
$k
èğ
	`—ch
(
$v®ue
['0']))

250 
$v®ue
['0'][
$k
] = 
$this
->
	`v®ues_·rsšg
($v®ue['0'][$k], 
TRUE
);

253 
$‹mp
 = 
Ãw
 
	`XML_RPC_V®ues
(
$v®ue
['0'], $value['1']);

257 
$‹mp
 = 
Ãw
 
	`XML_RPC_V®ues
(
$v®ue
['0'], $value['1']);

262 
$‹mp
 = 
Ãw
 
	`XML_RPC_V®ues
(
$v®ue
, 'string');

265  
$‹mp
;

266 
	}
}

274 
funùiÚ
 
	$£nd_»que¡
()

276 
$this
->
mes§ge
 = 
Ãw
 
	`XML_RPC_Mes§ge
($this->
m‘hod
,$this->
d©a
);

277 
$this
->
mes§ge
->
debug
 = $this->debug;

279 iàĞ! 
$this
->
»suÉ
 = $this->
ş›Á
->
	`£nd
($this->
mes§ge
))

281 
$this
->
”rÜ
 = $this->
»suÉ
->
”r¡r
;

282  
FALSE
;

284 
	`–£if
 ( ! 
	`is_objeù
(
$this
->
»suÉ
->
v®
))

286 
$this
->
”rÜ
 = $this->
»suÉ
->
”r¡r
;

287  
FALSE
;

290 
$this
->
»¥Ú£
 = $this->
»suÉ
->
	`decode
();

292  
TRUE
;

293 
	}
}

300 
funùiÚ
 
	$di¥Ïy_”rÜ
()

302  
$this
->
”rÜ
;

303 
	}
}

310 
funùiÚ
 
	$di¥Ïy_»¥Ú£
()

312  
$this
->
»¥Ú£
;

313 
	}
}

320 
funùiÚ
 
	$£nd_”rÜ_mes§ge
(
$numb”
, 
$mes§ge
)

322  
Ãw
 
	`XML_RPC_Re¥Ú£
('0',
$numb”
, 
$mes§ge
);

323 
	}
}

331 
funùiÚ
 
	$£nd_»¥Ú£
(
$»¥Ú£
)

336 
$»¥Ú£
 = 
$this
->
	`v®ues_·rsšg
($response);

338  
Ãw
 
	`XML_RPC_Re¥Ú£
(
$»¥Ú£
);

339 
	}
}

353 şas 
	cXML_RPC_Cl›Á
 
ex‹nds
 
	mCI_XmÌpc


355 
v¬
 
	m$·th
 = '';

356 
v¬
 
	m$£rv”
 = '';

357 
v¬
 
	m$pÜt
 = 80;

358 
v¬
 
	m$”ºo
 = '';

359 
v¬
 
	m$”r¡ršg
 = '';

360 
v¬
 
	m$timeout
 = 5;

361 
v¬
 
	m$no_muÉiÿÎ
 = 
FALSE
;

363 
public
 
funùiÚ
 
	$__cÚ¡ruù
(
$·th
, 
$£rv”
, 
$pÜt
=80)

365 
·»Á
::
	`__cÚ¡ruù
();

367 
$this
->
pÜt
 = 
$pÜt
;

368 
$this
->
£rv”
 = 
$£rv”
;

369 
$this
->
·th
 = 
$·th
;

372 
funùiÚ
 
	$£nd
(
$msg
)

374 ià(
	`is_¬¿y
(
$msg
))

377 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['muÉiÿÎ_»cursiÚ'],$this->
xmÌpc¡r
['multicall_recursion']);

378  
$r
;

381  
$this
->
	`£ndPaylßd
(
$msg
);

382 
	}
}

384 
funùiÚ
 
	$£ndPaylßd
(
$msg
)

386 
$å
 = @
	`fsockİ’
(
$this
->
£rv”
, $this->
pÜt
,$this->
”ºo
, $this->
”r¡r
, $this->
timeout
);

388 iàĞ! 
	`is_»sourû
(
$å
))

390 
	`”rÜ_log
(
$this
->
xmÌpc¡r
['http_error']);

391 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['h‰p_”rÜ'],$this->
xmÌpc¡r
['http_error']);

392  
$r
;

395 ià(
	`em±y
(
$msg
->
·ylßd
))

398 
$msg
->
	`ü—‹Paylßd
();

401 
$r
 = "\r\n";

402 
$İ
 = "POST {$this->path} HTTP/1.0$r";

403 
$İ
 .= "Host: {$this->server}$r";

404 
$İ
 .= "Content-Type:ext/xml$r";

405 
$İ
 .= "User-Agent: {$this->xmlrpcName}$r";

406 
$İ
 .ğ"CÚ‹Á-L’gth: ".
	`¡¾’
(
$msg
->
·ylßd
). "$r$r";

407 
$İ
 .ğ
$msg
->
·ylßd
;

410 iàĞ! 
	`åuts
(
$å
, 
$İ
, 
	`¡¾’
($op)))

412 
	`”rÜ_log
(
$this
->
xmÌpc¡r
['http_error']);

413 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['h‰p_”rÜ'], $this->
xmÌpc¡r
['http_error']);

414  
$r
;

416 
$»¥
 = 
$msg
->
	`·r£Re¥Ú£
(
$å
);

417 
	`fşo£
(
$å
);

418  
$»¥
;

419 
	}
}

431 şas 
	cXML_RPC_Re¥Ú£


433 
v¬
 
	m$v®
 = 0;

434 
v¬
 
	m$”ºo
 = 0;

435 
v¬
 
	m$”r¡r
 = '';

436 
v¬
 
	m$h—d”s
 = 
¬¿y
();

437 
v¬
 
	m$xss_ş—n
 = 
TRUE
;

439 
public
 
funùiÚ
 
__cÚ¡ruù
(
$v®
, 
$code
 = 0, 
$f¡r
 = '')

441 ià(
$code
 != 0)

444 
$this
->
”ºo
 = 
$code
;

445 
	m$this
->
	m”r¡r
 = 
htmËÁ™›s
(
$f¡r
);

447 iàĞ! 
is_objeù
(
$v®
))

450 
”rÜ_log
("Inv®idy³ '" . 
g‘ty³
(
$v®
) . "' (value: $val)…assedo XML_RPC_Response. Defaultingoƒmpty value.");

451 
	m$this
->
	mv®
 = 
Ãw
 
XML_RPC_V®ues
();

455 
	m$this
->
	mv®
 = 
$v®
;

459 
funùiÚ
 
	$çuÉCode
()

461  
$this
->
”ºo
;

462 
	}
}

464 
funùiÚ
 
	$çuÉSŒšg
()

466  
$this
->
”r¡r
;

467 
	}
}

469 
funùiÚ
 
	$v®ue
()

471  
$this
->
v®
;

472 
	}
}

474 
funùiÚ
 
	$´•¬e_»¥Ú£
()

476 
$»suÉ
 = "<methodResponse>\n";

477 ià(
$this
->
”ºo
)

479 
$»suÉ
 .= '<fault>

480 <
v®ue
>

482 <
memb”
>

483 <
Çme
>
çuÉCode
</name>

484 <
v®ue
><>' . $this->errno . '</></value>

485 </
memb”
>

486 <
memb”
>

487 <
Çme
>
çuÉSŒšg
</name>

488 <
v®ue
><
¡ršg
>' . $this->errstr . '</string></value>

489 </
memb”
>

491 </
v®ue
>

492 </
çuÉ
>';

496 
$»suÉ
 .= "<params>\n<param>\n" .

497 
$this
->
v®
->
	`£rŸlize_şass
() .

500 
$»suÉ
 .= "\n</methodResponse>";

501  
$»suÉ
;

502 
	}
}

504 
funùiÚ
 
	$decode
(
$¬¿y
=
FALSE
)

506 
$CI
 =& 
	`g‘_š¡ªû
();

508 ià(
$¬¿y
 !=ğ
FALSE
 && 
	`is_¬¿y
($array))

510 
	`li¡
(
$key
èğ
	`—ch
(
$¬¿y
))

512 ià(
	`is_¬¿y
(
$¬¿y
[
$key
]))

514 
$¬¿y
[
$key
] = 
$this
->
	`decode
($array[$key]);

518 
$¬¿y
[
$key
] = (
$this
->
xss_ş—n
è? 
$CI
->
£cur™y
->
	`xss_ş—n
($array[$key]) : $array[$key];

522 
$»suÉ
 = 
$¬¿y
;

526 
$»suÉ
 = 
$this
->
	`xmÌpc_decod”
($this->
v®
);

528 ià(
	`is_¬¿y
(
$»suÉ
))

530 
$»suÉ
 = 
$this
->
	`decode
($result);

534 
$»suÉ
 = (
$this
->
xss_ş—n
è? 
$CI
->
£cur™y
->
	`xss_ş—n
($result) : $result;

538  
$»suÉ
;

539 
	}
}

547 
funùiÚ
 
	$xmÌpc_decod”
(
$xmÌpc_v®
)

549 
$kšd
 = 
$xmÌpc_v®
->
	`kšdOf
();

551 ià(
$kšd
 == 'scalar')

553  
$xmÌpc_v®
->
	`sÿÏrv®
();

555 
	`–£if
 (
$kšd
 == 'array')

557 
	`»£t
(
$xmÌpc_v®
->
me
);

558 
	`li¡
(
$a
,
$b
èğ
	`—ch
(
$xmÌpc_v®
->
me
);

559 
$size
 = 
	`couÁ
(
$b
);

561 
$¬r
 = 
	`¬¿y
();

563 
$i
 = 0; $˜< 
$size
; $i++)

565 
$¬r
[] = 
$this
->
	`xmÌpc_decod”
(
$xmÌpc_v®
->
me
['¬¿y'][
$i
]);

567  
$¬r
;

569 
	`–£if
 (
$kšd
 == 'struct')

571 
	`»£t
(
$xmÌpc_v®
->
me
['struct']);

572 
$¬r
 = 
	`¬¿y
();

574 
	`li¡
(
$key
,
$v®ue
èğ
	`—ch
(
$xmÌpc_v®
->
me
['struct']))

576 
$¬r
[
$key
] = 
$this
->
	`xmÌpc_decod”
(
$v®ue
);

578  
$¬r
;

580 
	}
}

587 
funùiÚ
 
	$iso8601_decode
(
$time
, 
$utc
=0)

590 
$t
 = 0;

591 ià(
	`´eg_m©ch
('/([0-9]{4})([0-9]{2})([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})/', 
$time
, 
$»gs
))

593 
$âc
 = (
$utc
 == 1) ? 'gmmktime' : 'mktime';

594 
$t
 = 
	`$âc
(
$»gs
[4], $regs[5], $regs[6], $regs[2], $regs[3], $regs[1]);

596  
$t
;

597 
	}
}

610 şas 
	cXML_RPC_Mes§ge
 
ex‹nds
 
	mCI_XmÌpc


612 
v¬
 
	m$·ylßd
;

613 
v¬
 
	m$m‘hod_Çme
;

614 
v¬
 
	m$·¿ms
 = 
¬¿y
();

615 
v¬
 
	m$xh
 = 
¬¿y
();

617 
public
 
funùiÚ
 
	$__cÚ¡ruù
(
$m‘hod
, 
$·rs
=0)

619 
·»Á
::
	`__cÚ¡ruù
();

621 
$this
->
m‘hod_Çme
 = 
$m‘hod
;

622 ià(
	`is_¬¿y
(
$·rs
è&& 
	`couÁ
($pars) > 0)

624 
$i
=0; $i<
	`couÁ
(
$·rs
); $i++)

627 
$this
->
·¿ms
[] = 
$·rs
[
$i
];

636 
funùiÚ
 
	$ü—‹Paylßd
()

638 
$this
->
·ylßd
 = "<?xml version=\"1.0\"?".">\r\n<methodCall>\r\n";

639 
$this
->
·ylßd
 .ğ'<m‘hodName>' . $this->
m‘hod_Çme
 . "</methodName>\r\n";

640 
$this
->
·ylßd
 .= "<params>\r\n";

642 
$i
=0; $i<
	`couÁ
(
$this
->
·¿ms
); $i++)

645 
$p
 = 
$this
->
·¿ms
[
$i
];

646 
$this
->
·ylßd
 .ğ"<·¿m>\r\n".
$p
->
	`£rŸlize_şass
()."</param>\r\n";

649 
$this
->
·ylßd
 .= "</params>\r\n</methodCall>\r\n";

650 
	}
}

656 
funùiÚ
 
	$·r£Re¥Ú£
(
$å
)

658 
$d©a
 = '';

660 
$d©um
 = 
	`ä—d
(
$å
, 4096))

662 
$d©a
 .ğ
$d©um
;

669 ià(
$this
->
debug
 ==ğ
TRUE
)

671 
echo
 "<pre>";

672 
echo
 "---DATA---\n" . 
	`html¥ecŸlch¬s
(
$d©a
) . "\n---END DATA---\n\n";

673 
echo
 "</pre>";

680 ià(
$d©a
 == "")

682 
	`”rÜ_log
(
$this
->
xmÌpc¡r
['no_data']);

683 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['no_d©a'], $this->
xmÌpc¡r
['no_data']);

684  
$r
;

692 ià(
	`¡ºcmp
(
$d©a
, 'HTTP', 4è=ğ0 && ! 
	`´eg_m©ch
('/^HTTP\/[0-9\.]+ 200 /', $data))

694 
$”r¡r
ğ
	`sub¡r
(
$d©a
, 0, 
	`¡½os
($data, "\n")-1);

695 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['h‰p_”rÜ'], $this->
xmÌpc¡r
['h‰p_”rÜ']. ' (' . 
$”r¡r
 . ')');

696  
$r
;

703 
$·r£r
 = 
	`xml_·r£r_ü—‹
(
$this
->
xmÌpc_deãncodšg
);

705 
$this
->
xh
[
$·r£r
] = 
	`¬¿y
();

706 
$this
->
xh
[
$·r£r
]['isf'] = 0;

707 
$this
->
xh
[
$·r£r
]['ac'] = '';

708 
$this
->
xh
[
$·r£r
]['h—d”s'] = 
	`¬¿y
();

709 
$this
->
xh
[
$·r£r
]['¡ack'] = 
	`¬¿y
();

710 
$this
->
xh
[
$·r£r
]['v®ue¡ack'] = 
	`¬¿y
();

711 
$this
->
xh
[
$·r£r
]['isf_reason'] = 0;

713 
	`xml_£t_objeù
(
$·r£r
, 
$this
);

714 
	`xml_·r£r_£t_İtiÚ
(
$·r£r
, 
XML_OPTION_CASE_FOLDING
, 
Œue
);

715 
	`xml_£t_–em’t_hªdËr
(
$·r£r
, 'open_tag', 'closing_tag');

716 
	`xml_£t_ch¬aù”_d©a_hªdËr
(
$·r£r
, 'character_data');

724 
$lšes
 = 
	`ex¶ode
("\r\n", 
$d©a
);

725 (
$lše
 = 
	`¬¿y_shiá
(
$lšes
)))

727 ià(
	`¡¾’
(
$lše
) < 1)

731 
$this
->
xh
[
$·r£r
]['h—d”s'][] = 
$lše
;

733 
$d©a
 = 
	`im¶ode
("\r\n", 
$lšes
);

740 iàĞ! 
	`xml_·r£
(
$·r£r
, 
$d©a
, 
	`couÁ
($data)))

742 
$”r¡r
 = 
	`¥rštf
('XMLƒrror: %s‡t†ine %d',

743 
	`xml_”rÜ_¡ršg
(
	`xml_g‘_”rÜ_code
(
$·r£r
)),

744 
	`xml_g‘_cu¼’t_lše_numb”
(
$·r£r
));

746 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['šv®id_»tuº'], $this->
xmÌpc¡r
['invalid_return']);

747 
	`xml_·r£r_ä“
(
$·r£r
);

748  
$r
;

750 
	`xml_·r£r_ä“
(
$·r£r
);

756 ià(
$this
->
xh
[
$·r£r
]['isf'] > 1)

758 ià(
$this
->
debug
 ==ğ
TRUE
)

760 
echo
 "---Invalid Return---\n";

761 
echo
 
$this
->
xh
[
$·r£r
]['isf_reason'];

762 
echo
 "---Invalid Return---\n\n";

765 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['šv®id_»tuº'],$this->
xmÌpc¡r
['šv®id_»tuº'].' '.$this->
xh
[
$·r£r
]['isf_reason']);

766  
$r
;

768 
	`–£if
 ( ! 
	`is_objeù
(
$this
->
xh
[
$·r£r
]['value']))

770 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['šv®id_»tuº'],$this->
xmÌpc¡r
['šv®id_»tuº'].' '.$this->
xh
[
$·r£r
]['isf_reason']);

771  
$r
;

778 ià(
$this
->
debug
 ==ğ
TRUE
)

780 
echo
 "<pre>";

782 ià(
	`couÁ
(
$this
->
xh
[
$·r£r
]['headers'] > 0))

784 
echo
 "---HEADERS---\n";

785 
	`fÜ—ch
 (
$this
->
xh
[
$·r£r
]['h—d”s'] 
as
 
$h—d”
)

787 
echo
 "$header\n";

789 
echo
 "---END HEADERS---\n\n";

792 
echo
 "---DATA---\n" . 
	`html¥ecŸlch¬s
(
$d©a
) . "\n---END DATA---\n\n";

794 
echo
 "---PARSED---\n" ;

795 
	`v¬_dump
(
$this
->
xh
[
$·r£r
]['value']);

796 
echo
 "\n---END PARSED---</pre>";

803 
$v
 = 
$this
->
xh
[
$·r£r
]['value'];

805 ià(
$this
->
xh
[
$·r£r
]['isf'])

807 
$”ºo_v
 = 
$v
->
me
['struct']['faultCode'];

808 
$”r¡r_v
 = 
$v
->
me
['struct']['faultString'];

809 
$”ºo
 = 
$”ºo_v
->
	`sÿÏrv®
();

811 ià(
$”ºo
 == 0)

814 
$”ºo
 = -1;

817 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
(
$v
, 
$”ºo
, 
$”r¡r_v
->
	`sÿÏrv®
());

821 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
(
$v
);

824 
$r
->
h—d”s
 = 
$this
->
xh
[
$·r£r
]['headers'];

825  
$r
;

826 
	}
}

846 
funùiÚ
 
	$İ’_g
(
$the_·r£r
, 
$Çme
, 
$©Œs
)

849 ià(
$this
->
xh
[
$the_·r£r
]['isf'] > 1) ;

853 ià(
	`couÁ
(
$this
->
xh
[
$the_·r£r
]['stack']) == 0)

855 ià(
$Çme
 != 'METHODRESPONSE' && $name != 'METHODCALL')

857 
$this
->
xh
[
$the_·r£r
]['isf'] = 2;

858 
$this
->
xh
[
$the_·r£r
]['isf_reason'] = 'Top†evel XML-RPCƒlement is missing';

865 iàĞ! 
	`š_¬¿y
(
$this
->
xh
[
$the_·r£r
]['¡ack'][0], $this->
v®id_·»Ás
[
$Çme
], 
TRUE
))

867 
$this
->
xh
[
$the_·r£r
]['isf'] = 2;

868 
$this
->
xh
[
$the_·r£r
]['isf_reason'] = "XML-RPCƒlement $name cannot be child of ".$this->xh[$the_parser]['stack'][0];

873 
$Çme
)

879 
$cur_v®
 = 
	`¬¿y
('value' =>‡rray(),

880 'ty³' => 
$Çme
);

882 
	`¬¿y_unshiá
(
$this
->
xh
[
$the_·r£r
]['v®ue¡ack'], 
$cur_v®
);

886 
$this
->
xh
[
$the_·r£r
]['ac'] = '';

889 
$this
->
xh
[
$the_·r£r
]['isf'] = 1;

892 
$this
->
xh
[
$the_·r£r
]['v®ue'] = 
NULL
;

895 
$this
->
xh
[
$the_·r£r
]['vt'] = 'value';

896 
$this
->
xh
[
$the_·r£r
]['ac'] = '';

897 
$this
->
xh
[
$the_·r£r
]['lv'] = 1;

906 ià(
$this
->
xh
[
$the_·r£r
]['vt'] != 'value')

909 
$this
->
xh
[
$the_·r£r
]['isf'] = 2;

910 
$this
->
xh
[
$the_·r£r
]['isf_reason'] = "'Twas‡ $nameƒlement following‡ ".$this->xh[$the_parser]['vt']."ƒlement inside‡ single value";

914 
$this
->
xh
[
$the_·r£r
]['ac'] = '';

918 
$this
->
xh
[
$the_·r£r
]['valuestack'][0]['name'] = '';

921 
$this
->
xh
[
$the_·r£r
]['v®ue'] = 
NULL
;

931 
$this
->
xh
[
$the_·r£r
]['isf'] = 2;

932 
$this
->
xh
[
$the_·r£r
]['isf_reason'] = "Invalid XML-RPCƒlement found: $name";

937 
	`¬¿y_unshiá
(
$this
->
xh
[
$the_·r£r
]['¡ack'], 
$Çme
);

939 ià(
$Çme
 !ğ'VALUE'è
$this
->
xh
[
$the_·r£r
]['lv'] = 0;

940 
	}
}

948 
funùiÚ
 
	$şosšg_g
(
$the_·r£r
, 
$Çme
)

950 ià(
$this
->
xh
[
$the_·r£r
]['isf'] > 1) ;

957 
$cu¼_–em
 = 
	`¬¿y_shiá
(
$this
->
xh
[
$the_·r£r
]['stack']);

959 
$Çme
)

963 
$cur_v®
 = 
	`¬¿y_shiá
(
$this
->
xh
[
$the_·r£r
]['valuestack']);

964 
$this
->
xh
[
$the_·r£r
]['v®ue'] = ( ! 
	`is£t
(
$cur_v®
['v®ues'])è? 
	`¬¿y
() : $cur_val['values'];

965 
$this
->
xh
[
$the_·r£r
]['vt'] = 
	`¡¹Şow”
(
$Çme
);

968 
$this
->
xh
[
$the_·r£r
]['valuestack'][0]['name'] = $this->xh[$the_parser]['ac'];

977 
$this
->
xh
[
$the_·r£r
]['vt'] = 
	`¡¹Şow”
(
$Çme
);

979 ià(
$Çme
 == 'STRING')

981 
$this
->
xh
[
$the_·r£r
]['value'] = $this->xh[$the_parser]['ac'];

983 
	`–£if
 (
$Çme
=='DATETIME.ISO8601')

985 
$this
->
xh
[
$the_·r£r
]['vt'] = $this->
xmÌpcD©eTime
;

986 
$this
->
xh
[
$the_·r£r
]['value'] = $this->xh[$the_parser]['ac'];

988 
	`–£if
 (
$Çme
=='BASE64')

990 
$this
->
xh
[
$the_·r£r
]['v®ue'] = 
	`ba£64_decode
($this->xh[$the_parser]['ac']);

992 
	`–£if
 (
$Çme
=='BOOLEAN')

995 ià(
$this
->
xh
[
$the_·r£r
]['ac'] == '1')

997 
$this
->
xh
[
$the_·r£r
]['v®ue'] = 
TRUE
;

1001 
$this
->
xh
[
$the_·r£r
]['v®ue'] = 
FALSE
;

1004 
	`–£if
 (
$Çme
=='DOUBLE')

1008 iàĞ! 
	`´eg_m©ch
('/^[+-]?[eE0-9\ˆ\.]+$/', 
$this
->
xh
[
$the_·r£r
]['ac']))

1010 
$this
->
xh
[
$the_·r£r
]['value'] = 'ERROR_NON_NUMERIC_FOUND';

1014 
$this
->
xh
[
$the_·r£r
]['value'] = ()$this->xh[$the_parser]['ac'];

1021 iàĞ! 
	`´eg_m©ch
('/^[+-]?[0-9\ˆ]+$/', 
$this
->
xh
[
$the_·r£r
]['ac']))

1023 
$this
->
xh
[
$the_·r£r
]['value'] = 'ERROR_NON_NUMERIC_FOUND';

1027 
$this
->
xh
[
$the_·r£r
]['value'] = ()$this->xh[$the_parser]['ac'];

1030 
$this
->
xh
[
$the_·r£r
]['ac'] = '';

1031 
$this
->
xh
[
$the_·r£r
]['lv'] = 3;

1035 ià(
$this
->
xh
[
$the_·r£r
]['vt']=='value')

1037 
$this
->
xh
[
$the_·r£r
]['value'] = $this->xh[$the_parser]['ac'];

1038 
$this
->
xh
[
$the_·r£r
]['vt'] = $this->
xmÌpcSŒšg
;

1042 
$‹mp
 = 
Ãw
 
	`XML_RPC_V®ues
(
$this
->
xh
[
$the_·r£r
]['value'], $this->xh[$the_parser]['vt']);

1044 ià(
	`couÁ
(
$this
->
xh
[
$the_·r£r
]['valuestack']) && $this->xh[$the_parser]['valuestack'][0]['type'] == 'ARRAY')

1047 
$this
->
xh
[
$the_·r£r
]['v®ue¡ack'][0]['v®ues'][] = 
$‹mp
;

1052 
$this
->
xh
[
$the_·r£r
]['v®ue'] = 
$‹mp
;

1056 
$this
->
xh
[
$the_·r£r
]['ac']='';

1059 ià(
$this
->
xh
[
$the_·r£r
]['value'])

1061 
$this
->
xh
[
$the_·r£r
]['valuestack'][0]['values'][$this->xh[$the_parser]['valuestack'][0]['name']] = $this->xh[$the_parser]['value'];

1065 
$this
->
xh
[
$the_·r£r
]['ac']='';

1068 ià(
$this
->
xh
[
$the_·r£r
]['value'])

1070 
$this
->
xh
[
$the_·r£r
]['params'][] = $this->xh[$the_parser]['value'];

1074 
$this
->
xh
[
$the_·r£r
]['m‘hod'] = 
	`Érim
($this->xh[$the_parser]['ac']);

1086 
	}
}

1092 
funùiÚ
 
	$ch¬aù”_d©a
(
$the_·r£r
, 
$d©a
)

1094 ià(
$this
->
xh
[
$the_·r£r
]['isf'] > 1) ;

1097 ià(
$this
->
xh
[
$the_·r£r
]['lv'] != 3)

1099 ià(
$this
->
xh
[
$the_·r£r
]['lv'] == 1)

1101 
$this
->
xh
[
$the_·r£r
]['lv'] = 2;

1104 iàĞ! @
	`is£t
(
$this
->
xh
[
$the_·r£r
]['ac']))

1106 
$this
->
xh
[
$the_·r£r
]['ac'] = '';

1109 
$this
->
xh
[
$the_·r£r
]['ac'] .ğ
$d©a
;

1111 
	}
}

1114 
funùiÚ
 
	$addP¬am
(
$·r
è{ 
$this
->
·¿ms
[]=$·r; 
	}
}

1116 
funùiÚ
 
	$ouut_·¿m‘”s
(
$¬¿y
=
FALSE
)

1118 
$CI
 =& 
	`g‘_š¡ªû
();

1120 ià(
$¬¿y
 !=ğ
FALSE
 && 
	`is_¬¿y
($array))

1122 
	`li¡
(
$key
èğ
	`—ch
(
$¬¿y
))

1124 ià(
	`is_¬¿y
(
$¬¿y
[
$key
]))

1126 
$¬¿y
[
$key
] = 
$this
->
	`ouut_·¿m‘”s
($array[$key]);

1132 
$¬¿y
[
$key
] = ($key =ğ'b™s' 
OR
 
$this
->
xss_ş—n
 =ğ
FALSE
è? $¬¿y[$key] : 
$CI
->
£cur™y
->
	`xss_ş—n
($array[$key]);

1136 
$·¿m‘”s
 = 
$¬¿y
;

1140 
$·¿m‘”s
 = 
	`¬¿y
();

1142 
$i
 = 0; $˜< 
	`couÁ
(
$this
->
·¿ms
); $i++)

1144 
$a_·¿m
 = 
$this
->
	`decode_mes§ge
($this->
·¿ms
[
$i
]);

1146 ià(
	`is_¬¿y
(
$a_·¿m
))

1148 
$·¿m‘”s
[] = 
$this
->
	`ouut_·¿m‘”s
(
$a_·¿m
);

1152 
$·¿m‘”s
[] = (
$this
->
xss_ş—n
è? 
$CI
->
£cur™y
->
	`xss_ş—n
(
$a_·¿m
) : $a_param;

1157  
$·¿m‘”s
;

1158 
	}
}

1161 
funùiÚ
 
	$decode_mes§ge
(
$·¿m
)

1163 
$kšd
 = 
$·¿m
->
	`kšdOf
();

1165 ià(
$kšd
 == 'scalar')

1167  
$·¿m
->
	`sÿÏrv®
();

1169 
	`–£if
 (
$kšd
 == 'array')

1171 
	`»£t
(
$·¿m
->
me
);

1172 
	`li¡
(
$a
,
$b
èğ
	`—ch
(
$·¿m
->
me
);

1174 
$¬r
 = 
	`¬¿y
();

1176 
$i
 = 0; $˜< 
	`couÁ
(
$b
); $i++)

1178 
$¬r
[] = 
$this
->
	`decode_mes§ge
(
$·¿m
->
me
['¬¿y'][
$i
]);

1181  
$¬r
;

1183 
	`–£if
 (
$kšd
 == 'struct')

1185 
	`»£t
(
$·¿m
->
me
['struct']);

1187 
$¬r
 = 
	`¬¿y
();

1189 
	`li¡
(
$key
,
$v®ue
èğ
	`—ch
(
$·¿m
->
me
['struct']))

1191 
$¬r
[
$key
] = 
$this
->
	`decode_mes§ge
(
$v®ue
);

1194  
$¬r
;

1196 
	}
}

1209 şas 
	cXML_RPC_V®ues
 
ex‹nds
 
	mCI_XmÌpc


1211 
v¬
 
	m$me
 = 
¬¿y
();

1212 
v¬
 
	m$myty³
 = 0;

1214 
public
 
funùiÚ
 
__cÚ¡ruù
(
$v®
=-1, 
$ty³
='')

1216 
·»Á
::
__cÚ¡ruù
();

1218 ià(
	m$v®
 !ğ-1 
OR
 
$ty³
 != '')

1220 
$ty³
 = $type == '' ? 'string' : $type;

1222 ià(
	m$this
->
	mxmÌpcTy³s
[
$ty³
] == 1)

1224 
$this
->
addSÿÏr
(
$v®
,
$ty³
);

1226 
–£if
 (
$this
->
xmÌpcTy³s
[
$ty³
] == 2)

1228 
$this
->
addA¼ay
(
$v®
);

1230 
–£if
 (
$this
->
xmÌpcTy³s
[
$ty³
] == 3)

1232 
$this
->
addSŒuù
(
$v®
);

1237 
funùiÚ
 
addSÿÏr
(
$v®
, 
$ty³
='string')

1239 
$ty³of
 = 
$this
->
xmÌpcTy³s
[
$ty³
];

1241 ià(
	g$this
->
	gmyty³
==1)

1243 
echo
 '<strong>XML_RPC_Values</strong>: scalar can have only one value<br />';

1247 ià(
	g$ty³of
 != 1)

1249 
echo
 '<strong>XML_RPC_Values</strong>:‚ot‡ scalarype (${typeof})<br />';

1253 ià(
	g$ty³
 =ğ
$this
->
xmÌpcBoŞ—n
)

1255 ià(
¡rÿ£cmp
(
$v®
,'Œue')==0 
OR
 $v®==1 OR ($v®==
Œue
 && strcasecmp($val,'false')))

1257 
	g$v®
 = 1;

1261 
	g$v®
=0;

1265 ià(
	g$this
->
	gmyty³
 == 2)

1268 
$¬
 = 
$this
->
me
['array'];

1269 
	g$¬
[] = 
Ãw
 
XML_RPC_V®ues
(
$v®
, 
$ty³
);

1270 
	g$this
->
	gme
['¬¿y'] = 
$¬
;

1275 
	g$this
->
	gme
[
$ty³
] = 
$v®
;

1276 
	g$this
->
	gmyty³
 = 
$ty³of
;

1281 
funùiÚ
 
	$addA¼ay
(
$v®s
)

1283 ià(
$this
->
myty³
 != 0)

1285 
echo
 '<¡rÚg>XML_RPC_V®ues</¡rÚg>:‡Ì—dy in™Ÿlized‡ ¨[' . 
$this
->
	`kšdOf
() . ']<br />';

1289 
$this
->
myty³
 = $this->
xmÌpcTy³s
['array'];

1290 
$this
->
me
['¬¿y'] = 
$v®s
;

1292 
	}
}

1294 
funùiÚ
 
	$addSŒuù
(
$v®s
)

1296 ià(
$this
->
myty³
 != 0)

1298 
echo
 '<¡rÚg>XML_RPC_V®ues</¡rÚg>:‡Ì—dy in™Ÿlized‡ ¨[' . 
$this
->
	`kšdOf
() . ']<br />';

1301 
$this
->
myty³
 = $this->
xmÌpcTy³s
['struct'];

1302 
$this
->
me
['¡ruù'] = 
$v®s
;

1304 
	}
}

1306 
funùiÚ
 
	$kšdOf
()

1308 
$this
->
myty³
)

1322 
	}
}

1324 
funùiÚ
 
	$£rŸlized©a
(
$typ
, 
$v®
)

1326 
$rs
 = '';

1328 
$this
->
xmÌpcTy³s
[
$typ
])

1332 
$rs
 .= "<struct>\n";

1333 
	`»£t
(
$v®
);

1334 
	`li¡
(
$key2
, 
$v®2
èğ
	`—ch
(
$v®
))

1336 
$rs
 .= "<member>\n<name>{$key2}</name>\n";

1337 
$rs
 .ğ
$this
->
	`£rŸlizev®
(
$v®2
);

1338 
$rs
 .= "</member>\n";

1340 
$rs
 .= '</struct>';

1344 
$rs
 .= "<array>\n<data>\n";

1345 
$i
=0; $˜< 
	`couÁ
(
$v®
); $i++)

1347 
$rs
 .ğ
$this
->
	`£rŸlizev®
(
$v®
[
$i
]);

1349 
$rs
.="</data>\n</array>\n";

1353 
$typ
)

1355 
$this
->
xmÌpcBa£64
:

1356 
$rs
 .ğ"<{$typ}>" . 
	`ba£64_’code
((
¡ršg
)
$v®
) . "</{$typ}>\n";

1358 
$this
->
xmÌpcBoŞ—n
:

1359 
$rs
 .ğ"<{$typ}>" . ((
boŞ
)
$v®
 ? '1' : '0') . "</{$typ}>\n";

1361 
$this
->
xmÌpcSŒšg
:

1362 
$rs
 .ğ"<{$typ}>" . 
	`html¥ecŸlch¬s
((
¡ršg
)
$v®
). "</{$typ}>\n";

1365 
$rs
 .= "<{$typ}>{$val}</{$typ}>\n";

1371  
$rs
;

1372 
	}
}

1374 
funùiÚ
 
	$£rŸlize_şass
()

1376  
$this
->
	`£rŸlizev®
($this);

1377 
	}
}

1379 
funùiÚ
 
	$£rŸlizev®
(
$o
)

1381 
$¬
 = 
$o
->
me
;

1382 
	`»£t
(
$¬
);

1384 
	`li¡
(
$typ
, 
$v®
èğ
	`—ch
(
$¬
);

1385 
$rs
 = "<v®ue>\n".
$this
->
	`£rŸlized©a
(
$typ
, 
$v®
)."</value>\n";

1386  
$rs
;

1387 
	}
}

1389 
funùiÚ
 
	$sÿÏrv®
()

1391 
	`»£t
(
$this
->
me
);

1392 
	`li¡
(
$a
,
$b
èğ
	`—ch
(
$this
->
me
);

1393  
$b
;

1394 
	}
}

1403 
funùiÚ
 
	$iso8601_’code
(
$time
, 
$utc
=0)

1405 ià(
$utc
 == 1)

1407 
$t
 = 
	`¡ráime
("%Y%m%dT%H:%i:%s", 
$time
);

1411 ià(
	`funùiÚ_exi¡s
('gmstrftime'))

1412 
$t
 = 
	`gm¡ráime
("%Y%m%dT%H:%i:%s", 
$time
);

1414 
$t
 = 
	`¡ráime
("%Y%m%dT%H:%i:%s", 
$time
 - 
	`d©e
('Z'));

1416  
$t
;

1417 
	}
}

	@system/libraries/Xmlrpcs.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

16 iàĞ! 
funùiÚ_exi¡s
('xml_parser_create'))

18 
show_”rÜ
('Your PHP installation does‚ot support XML');

21 iàĞ! 
şass_exi¡s
('CI_Xmlrpc'))

23 
show_”rÜ
('You must†oadhe Xmlrpc class before†oadinghe Xmlrpcs class in ordero create‡ server.');

37 şas 
	cCI_XmÌpcs
 
ex‹nds
 
	mCI_XmÌpc


39 
v¬
 
	m$m‘hods
 = 
¬¿y
();

40 
v¬
 
	m$debug_msg
 = '';

41 
v¬
 
	m$sy¡em_m‘hods
 = 
¬¿y
();

42 
v¬
 
	m$cÚŒŞËr_obj
;

44 
v¬
 
	m$objeù
 = 
FALSE
;

49 
public
 
funùiÚ
 
__cÚ¡ruù
(
$cÚfig
=
	$¬¿y
())

51 
·»Á
::
	`__cÚ¡ruù
();

52 
$this
->
	`£t_sy¡em_m‘hods
();

54 ià(
	`is£t
(
$cÚfig
['funùiÚs']è&& 
	`is_¬¿y
($config['functions']))

56 
$this
->
m‘hods
 = 
	`¬¿y_m”ge
($this->m‘hods, 
$cÚfig
['functions']);

59 
	`log_mes§ge
('debug', "XML-RPC Server Class Initialized");

71 
funùiÚ
 
	`š™Ÿlize
(
$cÚfig
=
	$¬¿y
())

73 ià(
	`is£t
(
$cÚfig
['funùiÚs']è&& 
	`is_¬¿y
($config['functions']))

75 
$this
->
m‘hods
 = 
	`¬¿y_m”ge
($this->m‘hods, 
$cÚfig
['functions']);

78 ià(
	`is£t
(
$cÚfig
['debug']))

80 
$this
->
debug
 = 
$cÚfig
['debug'];

83 ià(
	`is£t
(
$cÚfig
['objeù']è&& 
	`is_objeù
($config['object']))

85 
$this
->
objeù
 = 
$cÚfig
['object'];

88 ià(
	`is£t
(
$cÚfig
['xss_clean']))

90 
$this
->
xss_ş—n
 = 
$cÚfig
['xss_clean'];

92 
	}
}

102 
funùiÚ
 
	$£t_sy¡em_m‘hods
()

104 
$this
->
m‘hods
 = 
	`¬¿y
(

105 'sy¡em.li¡M‘hods' => 
	`¬¿y
(

107 'sigÇtu»' => 
	`¬¿y
×¼ay(
$this
->
xmÌpcA¼ay
, $this->
xmÌpcSŒšg
),‡rray($this->xmlrpcArray)),

109 'sy¡em.m‘hodH–p' => 
	`¬¿y
(

111 'sigÇtu»' => 
	`¬¿y
×¼ay(
$this
->
xmÌpcSŒšg
, $this->xmlrpcString)),

113 'sy¡em.m‘hodSigÇtu»' => 
	`¬¿y
(

115 'sigÇtu»' => 
	`¬¿y
×¼ay(
$this
->
xmÌpcA¼ay
, $this->
xmÌpcSŒšg
)),

117 'sy¡em.muÉiÿÎ' => 
	`¬¿y
(

119 'sigÇtu»' => 
	`¬¿y
×¼ay(
$this
->
xmÌpcA¼ay
, $this->xmlrpcArray)),

122 
	}
}

132 
funùiÚ
 
	$£rve
()

134 
$r
 = 
$this
->
	`·r£Reque¡
();

135 
$·ylßd
 = '<?xmÈv”siÚ="1.0"ƒncodšg="'.
$this
->
xmÌpc_deãncodšg
.'"?'.'>'."\n";

136 
$·ylßd
 .ğ
$this
->
debug_msg
;

137 
$·ylßd
 .ğ
$r
->
	`´•¬e_»¥Ú£
();

139 
	`h—d”
("Content-Type:ext/xml");

140 
	`h—d”
("CÚ‹Á-L’gth: ".
	`¡¾’
(
$·ylßd
));

141 
	`ex™
(
$·ylßd
);

142 
	}
}

156 
funùiÚ
 
	$add_to_m­
(
$m‘hodÇme
, 
$funùiÚ
, 
$sig
, 
$doc
)

158 
$this
->
m‘hods
[
$m‘hodÇme
] = 
	`¬¿y
(

159 'funùiÚ' => 
$funùiÚ
,

160 'sigÇtu»' => 
$sig
,

161 'doc¡ršg' => 
$doc


163 
	}
}

174 
funùiÚ
 
·r£Reque¡
(
$d©a
='')

176 
glob®
 
$HTTP_RAW_POST_DATA
;

182 ià(
	g$d©a
 == '')

184 
$d©a
 = 
$HTTP_RAW_POST_DATA
;

191 
	g$·r£r
 = 
xml_·r£r_ü—‹
(
$this
->
xmÌpc_deãncodšg
);

192 
	g$·r£r_objeù
 = 
Ãw
 
XML_RPC_Mes§ge
("filler");

194 
	g$·r£r_objeù
->
	gxh
[
$·r£r
] = 
¬¿y
();

195 
	g$·r£r_objeù
->
	gxh
[
$·r£r
]['isf'] = 0;

196 
	g$·r£r_objeù
->
	gxh
[
$·r£r
]['isf_reason'] = '';

197 
	g$·r£r_objeù
->
	gxh
[
$·r£r
]['·¿ms'] = 
¬¿y
();

198 
	g$·r£r_objeù
->
	gxh
[
$·r£r
]['¡ack'] = 
¬¿y
();

199 
	g$·r£r_objeù
->
	gxh
[
$·r£r
]['v®ue¡ack'] = 
¬¿y
();

200 
	g$·r£r_objeù
->
	gxh
[
$·r£r
]['method'] = '';

202 
xml_£t_objeù
(
$·r£r
, 
$·r£r_objeù
);

203 
xml_·r£r_£t_İtiÚ
(
$·r£r
, 
XML_OPTION_CASE_FOLDING
, 
Œue
);

204 
xml_£t_–em’t_hªdËr
(
$·r£r
, 'open_tag', 'closing_tag');

205 
xml_£t_ch¬aù”_d©a_hªdËr
(
$·r£r
, 'character_data');

213 iàĞ! 
xml_·r£
(
$·r£r
, 
$d©a
, 1))

216 
	g$r
 = 
Ãw
 
XML_RPC_Re¥Ú£
(0,

217 
$this
->
xmÌpû¼xml
 + 
xml_g‘_”rÜ_code
(
$·r£r
),

218 
¥rštf
('XMLƒrror: %s‡t†ine %d',

219 
xml_”rÜ_¡ršg
(
xml_g‘_”rÜ_code
(
$·r£r
)),

220 
xml_g‘_cu¼’t_lše_numb”
(
$·r£r
)));

221 
xml_·r£r_ä“
(
$·r£r
);

223 
–£if
 (
$·r£r_objeù
->
xh
[
$·r£r
]['isf'])

225  
Ãw
 
XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['šv®id_»tuº'], $this->
xmÌpc¡r
['invalid_return']);

229 
xml_·r£r_ä“
(
$·r£r
);

231 
	g$m
 = 
Ãw
 
XML_RPC_Mes§ge
(
$·r£r_objeù
->
xh
[
$·r£r
]['method']);

232 
	g$¶i¡
='';

234 
	g$i
=0; $˜< 
couÁ
(
$·r£r_objeù
->
xh
[
$·r£r
]['params']); $i++)

236 ià(
	g$this
->
	gdebug
 ==ğ
TRUE
)

238 
$¶i¡
 .ğ"$˜- " . 
´št_r
(
g‘_objeù_v¬s
(
$·r£r_objeù
->
xh
[
$·r£r
]['·¿ms'][
$i
]), 
TRUE
). ";\n";

241 
	g$m
->
addP¬am
(
$·r£r_objeù
->
xh
[
$·r£r
]['·¿ms'][
$i
]);

244 ià(
	g$this
->
	gdebug
 ==ğ
TRUE
)

246 
echo
 "<pre>";

247 
	gecho
 "---PLIST---\n" . 
	g$¶i¡
 . "\n---PLIST END---\n\n";

248 
	gecho
 "</pre>";

251 
	g$r
 = 
$this
->
_execu‹
(
$m
);

258 ià(
	g$this
->
	gdebug
 ==ğ
TRUE
)

260 
$this
->
debug_msg
 = "<!-- DEBUG INFO:\n\n".
$¶i¡
."\n END DEBUG-->\n";

263  
	g$r
;

275 
funùiÚ
 
	$_execu‹
(
$m
)

277 
$m‘hName
 = 
$m
->
m‘hod_Çme
;

280 
$sy¡em_ÿÎ
 = (
	`¡ºcmp
(
$m‘hName
, 'sy¡em', 5è=ğ0è? 
TRUE
 : 
FALSE
;

282 ià(
$this
->
xss_ş—n
 =ğ
FALSE
)

284 
$m
->
xss_ş—n
 = 
FALSE
;

291 iàĞ! 
	`is£t
(
$this
->
m‘hods
[
$m‘hName
]['function']))

293  
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['unknown_m‘hod'], $this->
xmÌpc¡r
['unknown_method']);

300 
$m‘hod_·¹s
 = 
	`ex¶ode
(".", 
$this
->
m‘hods
[
$m‘hName
]['function']);

301 
$objeùC®l
 = (
	`is£t
(
$m‘hod_·¹s
['1']è&& $m‘hod_·¹s['1'] !ğ""è? 
TRUE
 : 
FALSE
;

303 ià(
$sy¡em_ÿÎ
 ==ğ
TRUE
)

305 iàĞ! 
	`is_ÿÎabË
(
	`¬¿y
(
$this
,
$m‘hod_·¹s
['1'])))

307  
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['unknown_m‘hod'], $this->
xmÌpc¡r
['unknown_method']);

312 ià(
$objeùC®l
 && ! 
	`is_ÿÎabË
(
	`¬¿y
(
$m‘hod_·¹s
['0'],$method_parts['1'])))

314  
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['unknown_m‘hod'], $this->
xmÌpc¡r
['unknown_method']);

316 
	`–£if
 ( ! 
$objeùC®l
 && ! 
	`is_ÿÎabË
(
$this
->
m‘hods
[
$m‘hName
]['function']))

318  
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['unknown_m‘hod'], $this->
xmÌpc¡r
['unknown_method']);

326 ià(
	`is£t
(
$this
->
m‘hods
[
$m‘hName
]['signature']))

328 
$sig
 = 
$this
->
m‘hods
[
$m‘hName
]['signature'];

329 
$i
=0; $i<
	`couÁ
(
$sig
); $i++)

331 
$cu¼’t_sig
 = 
$sig
[
$i
];

333 ià(
	`couÁ
(
$cu¼’t_sig
è=ğcouÁ(
$m
->
·¿ms
)+1)

335 
$n
=0; $À< 
	`couÁ
(
$m
->
·¿ms
); $n++)

337 
$p
 = 
$m
->
·¿ms
[
$n
];

338 
$±
 = (
$p
->
	`kšdOf
(è=ğ'sÿÏr'è? $p->
	`sÿÏrv®
() : $p->kindOf();

340 ià(
$±
 !ğ
$cu¼’t_sig
[
$n
+1])

342 
$²o
 = 
$n
+1;

343 
$wª‹d
 = 
$cu¼’t_sig
[
$n
+1];

345  
Ãw
 
	`XML_RPC_Re¥Ú£
(0,

346 
$this
->
xmÌpû¼
['incorrect_params'],

347 
$this
->
xmÌpc¡r
['incorrect_params'] .

359 ià(
$objeùC®l
 ==ğ
TRUE
)

361 ià(
$m‘hod_·¹s
[0] =ğ"this" && 
$sy¡em_ÿÎ
 =ğ
TRUE
)

363  
	`ÿÎ_u£r_func
(
	`¬¿y
(
$this
, 
$m‘hod_·¹s
[1]), 
$m
);

367 ià(
$this
->
objeù
 ==ğ
FALSE
)

369 
$CI
 =& 
	`g‘_š¡ªû
();

370  
$CI
->
$m‘hod_·¹s
['1'](
$m
);

374  
$this
->
objeù
->
$m‘hod_·¹s
['1'](
$m
);

381  
	`ÿÎ_u£r_func
(
$this
->
m‘hods
[
$m‘hName
]['funùiÚ'], 
$m
);

383 
	}
}

394 
funùiÚ
 
	$li¡M‘hods
(
$m
)

396 
$v
 = 
Ãw
 
	`XML_RPC_V®ues
();

397 
$ouut
 = 
	`¬¿y
();

399 
	`fÜ—ch
 (
$this
->
m‘hods
 
as
 
$key
 => 
$v®ue
)

401 
$ouut
[] = 
Ãw
 
	`XML_RPC_V®ues
(
$key
, 'string');

404 
	`fÜ—ch
 (
$this
->
sy¡em_m‘hods
 
as
 
$key
 => 
$v®ue
)

406 
$ouut
[]ğ
Ãw
 
	`XML_RPC_V®ues
(
$key
, 'string');

409 
$v
->
	`addA¼ay
(
$ouut
);

410  
Ãw
 
	`XML_RPC_Re¥Ú£
(
$v
);

411 
	}
}

422 
funùiÚ
 
	$m‘hodSigÇtu»
(
$m
)

424 
$·¿m‘”s
 = 
$m
->
	`ouut_·¿m‘”s
();

425 
$m‘hod_Çme
 = 
$·¿m‘”s
[0];

427 ià(
	`is£t
(
$this
->
m‘hods
[
$m‘hod_Çme
]))

429 ià(
$this
->
m‘hods
[
$m‘hod_Çme
]['signature'])

431 
$sigs
 = 
	`¬¿y
();

432 
$sigÇtu»
 = 
$this
->
m‘hods
[
$m‘hod_Çme
]['signature'];

434 
$i
=0; $˜< 
	`couÁ
(
$sigÇtu»
); $i++)

436 
$cursig
 = 
	`¬¿y
();

437 
$šSig
 = 
$sigÇtu»
[
$i
];

438 
$j
=0; $j<
	`couÁ
(
$šSig
); $j++)

440 
$cursig
[]ğ
Ãw
 
	`XML_RPC_V®ues
(
$šSig
[
$j
], 'string');

442 
$sigs
[]ğ
Ãw
 
	`XML_RPC_V®ues
(
$cursig
, 'array');

444 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
Òew 
	`XML_RPC_V®ues
(
$sigs
, 'array'));

448 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
Òew 
	`XML_RPC_V®ues
('undef', 'string'));

453 
$r
 = 
Ãw
 
	`XML_RPC_Re¥Ú£
(0,
$this
->
xmÌpû¼
['šŒo¥eù_unknown'], $this->
xmÌpc¡r
['introspect_unknown']);

455  
$r
;

456 
	}
}

467 
funùiÚ
 
	$m‘hodH–p
(
$m
)

469 
$·¿m‘”s
 = 
$m
->
	`ouut_·¿m‘”s
();

470 
$m‘hod_Çme
 = 
$·¿m‘”s
[0];

472 ià(
	`is£t
(
$this
->
m‘hods
[
$m‘hod_Çme
]))

474 
$doc¡ršg
 = 
	`is£t
(
$this
->
m‘hods
[
$m‘hod_Çme
]['docstring']) ? $this->methods[$method_name]['docstring'] : '';

476  
Ãw
 
	`XML_RPC_Re¥Ú£
Òew 
	`XML_RPC_V®ues
(
$doc¡ršg
, 'string'));

480  
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['šŒo¥eù_unknown'], $this->
xmÌpc¡r
['introspect_unknown']);

482 
	}
}

493 
funùiÚ
 
	$muÉiÿÎ
(
$m
)

496  
Ãw
 
	`XML_RPC_Re¥Ú£
(0, 
$this
->
xmÌpû¼
['unknown_m‘hod'], $this->
xmÌpc¡r
['unknown_method']);

498 
$·¿m‘”s
 = 
$m
->
	`ouut_·¿m‘”s
();

499 
$ÿÎs
 = 
$·¿m‘”s
[0];

501 
$»suÉ
 = 
	`¬¿y
();

503 
	`fÜ—ch
 (
$ÿÎs
 
as
 
$v®ue
)

507 
$m
 = 
Ãw
 
	`XML_RPC_Mes§ge
(
$v®ue
[0]);

508 
$¶i¡
='';

510 
$i
=0; $˜< 
	`couÁ
(
$v®ue
[1]); $i++)

512 
$m
->
	`addP¬am
(
Ãw
 
	`XML_RPC_V®ues
(
$v®ue
[1][
$i
], 'string'));

515 
$©‹m±
 = 
$this
->
	`_execu‹
(
$m
);

517 ià(
$©‹m±
->
	`çuÉCode
() != 0)

519  
$©‹m±
;

522 
$»suÉ
[] = 
Ãw
 
	`XML_RPC_V®ues
(
	`¬¿y
(
$©‹m±
->
	`v®ue
()), 'array');

525  
Ãw
 
	`XML_RPC_Re¥Ú£
Òew 
	`XML_RPC_V®ues
(
$»suÉ
, 'array'));

526 
	}
}

537 
funùiÚ
 
	$muÉiÿÎ_”rÜ
(
$”r
)

539 
$¡r
 = 
	`is_¡ršg
(
$”r
è? 
$this
->
xmÌpc¡r
["muÉiÿÎ_${”r}"] : $”r->
	`çuÉSŒšg
();

540 
$code
 = 
	`is_¡ršg
(
$”r
è? 
$this
->
xmÌpû¼
["muÉiÿÎ_${”r}"] : $”r->
	`çuÉCode
();

542 
$¡ruù
['çuÉCode'] = 
Ãw
 
	`XML_RPC_V®ues
(
$code
, 'int');

543 
$¡ruù
['çuÉSŒšg'] = 
Ãw
 
	`XML_RPC_V®ues
(
$¡r
, 'string');

545  
Ãw
 
	`XML_RPC_V®ues
(
$¡ruù
, 'struct');

546 
	}
}

557 
funùiÚ
 
	$do_muÉiÿÎ
(
$ÿÎ
)

559 ià(
$ÿÎ
->
	`kšdOf
() != 'struct')

561  
$this
->
	`muÉiÿÎ_”rÜ
('notstruct');

563 
	`–£if
 ( ! 
$m‘hName
 = 
$ÿÎ
->
me
['struct']['methodName'])

565  
$this
->
	`muÉiÿÎ_”rÜ
('nomethod');

568 
	`li¡
(
$sÿÏr_ty³
,
$sÿÏr_v®ue
)=
	`—ch
(
$m‘hName
->
me
);

569 
$sÿÏr_ty³
 = $sÿÏr_ty³ =ğ
$this
->
xmÌpcI4
 ? $this->
xmÌpcIÁ
 : $scalar_type;

571 ià(
$m‘hName
->
	`kšdOf
(è!ğ'sÿÏr' 
OR
 
$sÿÏr_ty³
 != 'string')

573  
$this
->
	`muÉiÿÎ_”rÜ
('notstring');

575 
	`–£if
 (
$sÿÏr_v®ue
 == 'system.multicall')

577  
$this
->
	`muÉiÿÎ_”rÜ
('recursion');

579 
	`–£if
 ( ! 
$·¿ms
 = 
$ÿÎ
->
me
['struct']['params'])

581  
$this
->
	`muÉiÿÎ_”rÜ
('noparams');

583 
	`–£if
 (
$·¿ms
->
	`kšdOf
() != 'array')

585  
$this
->
	`muÉiÿÎ_”rÜ
('notarray');

588 
	`li¡
(
$a
,
$b
)=
	`—ch
(
$·¿ms
->
me
);

589 
$numP¬ams
 = 
	`couÁ
(
$b
);

591 
$msg
 = 
Ãw
 
	`XML_RPC_Mes§ge
(
$sÿÏr_v®ue
);

592 
$i
 = 0; $˜< 
$numP¬ams
; $i++)

594 
$msg
->
·¿ms
[] = 
$·¿ms
->
me
['¬¿y'][
$i
];

597 
$»suÉ
 = 
$this
->
	`_execu‹
(
$msg
);

599 ià(
$»suÉ
->
	`çuÉCode
() != 0)

601  
$this
->
	`muÉiÿÎ_”rÜ
(
$»suÉ
);

604  
Ãw
 
	`XML_RPC_V®ues
(
	`¬¿y
(
$»suÉ
->
	`v®ue
()), 'array');

605 
	}
}

	@system/libraries/Zip.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

33 şas 
	cCI_Z
 {

35 
v¬
 
	m$zd©a
 = '';

36 
v¬
 
	m$dœeùÜy
 = '';

37 
v¬
 
	m$’Œ›s
 = 0;

38 
v¬
 
	m$fe_num
 = 0;

39 
v¬
 
	m$off£t
 = 0;

40 
v¬
 
	m$now
;

45 
public
 
funùiÚ
 
	$__cÚ¡ruù
()

47 
	`log_mes§ge
('debug', "Zip Compression Class Initialized");

49 
$this
->
now
 = 
	`time
();

63 
funùiÚ
 
	$add_dœ
(
$dœeùÜy
)

65 
	`fÜ—ch
 ((
¬¿y
)
$dœeùÜy
 
as
 
$dœ
)

67 iàĞ! 
	`´eg_m©ch
("|.+/$|", 
$dœ
))

69 
$dœ
 .= '/';

72 
$dœ_time
 = 
$this
->
	`_g‘_mod_time
(
$dœ
);

74 
$this
->
	`_add_dœ
(
$dœ
, 
$dœ_time
['file_mtime'], $dir_time['file_mdate']);

76 
	}
}

88 
funùiÚ
 
	$_g‘_mod_time
(
$dœ
)

91 
$d©e
 = (@
	`femtime
(
$dœ
)è? femtime($dœè: 
	`g‘d©e
(
$this
->
now
);

93 
$time
['fe_mtime'] = (
$d©e
['hours'] << 11) + ($date['minutes'] << 5) + $date['seconds'] / 2;

94 
$time
['fe_md©e'] = ((
$d©e
['year'] - 1980) << 9) + ($date['mon'] << 5) + $date['mday'];

96  
$time
;

97 
	}
}

108 
funùiÚ
 
	$_add_dœ
(
$dœ
, 
$fe_mtime
, 
$fe_md©e
)

110 
$dœ
 = 
	`¡r_»¶aû
("\\", "/", $dir);

112 
$this
->
zd©a
 .=

114 .
	`·ck
('v', 
$fe_mtime
)

115 .
	`·ck
('v', 
$fe_md©e
)

116 .
	`·ck
('V', 0)

117 .
	`·ck
('V', 0)

118 .
	`·ck
('V', 0)

119 .
	`·ck
('v', 
	`¡¾’
(
$dœ
))

120 .
	`·ck
('v', 0)

121 .
$dœ


123 .
	`·ck
('V', 0)

124 .
	`·ck
('V', 0)

125 .
	`·ck
('V', 0);

127 
$this
->
dœeùÜy
 .=

129 .
	`·ck
('v', 
$fe_mtime
)

130 .
	`·ck
('v', 
$fe_md©e
)

131 .
	`·ck
('V',0)

132 .
	`·ck
('V',0)

133 .
	`·ck
('V',0)

134 .
	`·ck
('v', 
	`¡¾’
(
$dœ
))

135 .
	`·ck
('v', 0)

136 .
	`·ck
('v', 0)

137 .
	`·ck
('v', 0)

138 .
	`·ck
('v', 0)

139 .
	`·ck
('V', 16)

140 .
	`·ck
('V', 
$this
->
off£t
)

141 .
$dœ
;

143 
$this
->
off£t
 = 
	`¡¾’
($this->
zd©a
);

144 
$this
->
’Œ›s
++;

145 
	}
}

161 
funùiÚ
 
	$add_d©a
(
$f•©h
, 
$d©a
 = 
NULL
)

163 ià(
	`is_¬¿y
(
$f•©h
))

165 
	`fÜ—ch
 (
$f•©h
 
as
 
$·th
 => 
$d©a
)

167 
$fe_d©a
 = 
$this
->
	`_g‘_mod_time
(
$·th
);

169 
$this
->
	`_add_d©a
(
$·th
, 
$d©a
, 
$fe_d©a
['file_mtime'], $file_data['file_mdate']);

174 
$fe_d©a
 = 
$this
->
	`_g‘_mod_time
(
$f•©h
);

176 
$this
->
	`_add_d©a
(
$f•©h
, 
$d©a
, 
$fe_d©a
['file_mtime'], $file_data['file_mdate']);

178 
	}
}

190 
funùiÚ
 
	$_add_d©a
(
$f•©h
, 
$d©a
, 
$fe_mtime
, 
$fe_md©e
)

192 
$f•©h
 = 
	`¡r_»¶aû
("\\", "/", $filepath);

194 
$uncom´es£d_size
 = 
	`¡¾’
(
$d©a
);

195 
$üc32
 = 
	`üc32
(
$d©a
);

197 
$gzd©a
 = 
	`gzcom´ess
(
$d©a
);

198 
$gzd©a
 = 
	`sub¡r
($gzdata, 2, -4);

199 
$com´es£d_size
 = 
	`¡¾’
(
$gzd©a
);

201 
$this
->
zd©a
 .=

203 .
	`·ck
('v', 
$fe_mtime
)

204 .
	`·ck
('v', 
$fe_md©e
)

205 .
	`·ck
('V', 
$üc32
)

206 .
	`·ck
('V', 
$com´es£d_size
)

207 .
	`·ck
('V', 
$uncom´es£d_size
)

208 .
	`·ck
('v', 
	`¡¾’
(
$f•©h
))

209 .
	`·ck
('v', 0)

210 .
$f•©h


211 .
$gzd©a
;

213 
$this
->
dœeùÜy
 .=

215 .
	`·ck
('v', 
$fe_mtime
)

216 .
	`·ck
('v', 
$fe_md©e
)

217 .
	`·ck
('V', 
$üc32
)

218 .
	`·ck
('V', 
$com´es£d_size
)

219 .
	`·ck
('V', 
$uncom´es£d_size
)

220 .
	`·ck
('v', 
	`¡¾’
(
$f•©h
))

221 .
	`·ck
('v', 0)

222 .
	`·ck
('v', 0)

223 .
	`·ck
('v', 0)

224 .
	`·ck
('v', 0)

225 .
	`·ck
('V', 32)

226 .
	`·ck
('V', 
$this
->
off£t
)

227 .
$f•©h
;

229 
$this
->
off£t
 = 
	`¡¾’
($this->
zd©a
);

230 
$this
->
’Œ›s
++;

231 
$this
->
fe_num
++;

232 
	}
}

242 
funùiÚ
 
	$»ad_fe
(
$·th
, 
$´e£rve_f•©h
 = 
FALSE
)

244 iàĞ! 
	`fe_exi¡s
(
$·th
))

246  
FALSE
;

249 ià(
FALSE
 !=ğ(
$d©a
 = 
	`fe_g‘_cÚ‹Ás
(
$·th
)))

251 
$Çme
 = 
	`¡r_»¶aû
("\\", "/", 
$·th
);

253 ià(
$´e£rve_f•©h
 ==ğ
FALSE
)

255 
$Çme
 = 
	`´eg_»¶aû
("|.*/(.+)|", "\\1", $name);

258 
$this
->
	`add_d©a
(
$Çme
, 
$d©a
);

259  
TRUE
;

261  
FALSE
;

262 
	}
}

277 
funùiÚ
 
	$»ad_dœ
(
$·th
, 
$´e£rve_f•©h
 = 
TRUE
, 
$roÙ_·th
 = 
NULL
)

279 iàĞ! 
$å
 = @
	`İ’dœ
(
$·th
))

281  
FALSE
;

285 ià(
$roÙ_·th
 ==ğ
NULL
)

287 
$roÙ_·th
 = 
	`dœÇme
(
$·th
).'/';

290 
FALSE
 !=ğ(
$fe
 = 
	`»addœ
(
$å
)))

292 ià(
	`sub¡r
(
$fe
, 0, 1) == '.')

297 ià(@
	`is_dœ
(
$·th
.
$fe
))

299 
$this
->
	`»ad_dœ
(
$·th
.
$fe
."/", 
$´e£rve_f•©h
, 
$roÙ_·th
);

303 ià(
FALSE
 !=ğ(
$d©a
 = 
	`fe_g‘_cÚ‹Ás
(
$·th
.
$fe
)))

305 
$Çme
 = 
	`¡r_»¶aû
("\\", "/", 
$·th
);

307 ià(
$´e£rve_f•©h
 ==ğ
FALSE
)

309 
$Çme
 = 
	`¡r_»¶aû
(
$roÙ_·th
, '', $name);

312 
$this
->
	`add_d©a
(
$Çme
.
$fe
, 
$d©a
);

317  
TRUE
;

318 
	}
}

328 
funùiÚ
 
	$g‘_z
()

331 ià(
$this
->
’Œ›s
 == 0)

333  
FALSE
;

336 
$z_d©a
 = 
$this
->
zd©a
;

337 
$z_d©a
 .ğ
$this
->
dœeùÜy
."\x50\x4b\x05\x06\x00\x00\x00\x00";

338 
$z_d©a
 .ğ
	`·ck
('v', 
$this
->
’Œ›s
);

339 
$z_d©a
 .ğ
	`·ck
('v', 
$this
->
’Œ›s
);

340 
$z_d©a
 .ğ
	`·ck
('V', 
	`¡¾’
(
$this
->
dœeùÜy
));

341 
$z_d©a
 .ğ
	`·ck
('V', 
	`¡¾’
(
$this
->
zd©a
));

342 
$z_d©a
 .= "\x00\x00";

344  
$z_d©a
;

345 
	}
}

358 
funùiÚ
 
	$¬chive
(
$f•©h
)

360 iàĞ! (
$å
 = @
	`fİ’
(
$f•©h
, 
FOPEN_WRITE_CREATE_DESTRUCTIVE
)))

362  
FALSE
;

365 
	`æock
(
$å
, 
LOCK_EX
);

366 
	`fwr™e
(
$å
, 
$this
->
	`g‘_z
());

367 
	`æock
(
$å
, 
LOCK_UN
);

368 
	`fşo£
(
$å
);

370  
TRUE
;

371 
	}
}

383 
funùiÚ
 
dowÆßd
(
$f’ame
 = 'backup.zip')

385 iàĞ! 
´eg_m©ch
("|.+?\.z$|", 
$f’ame
))

387 
$f’ame
 .= '.zip';

390 
	g$CI
 =& 
g‘_š¡ªû
();

391 
	g$CI
->
	glßd
->
h–³r
('download');

393 
	g$g‘_z
 = 
$this
->
g‘_z
();

395 
	g$z_cÚ‹Á
 =& 
$g‘_z
;

397 
fÜû_dowÆßd
(
$f’ame
, 
$z_cÚ‹Á
);

411 
funùiÚ
 
	$ş—r_d©a
()

413 
$this
->
zd©a
 = '';

414 
$this
->
dœeùÜy
 = '';

415 
$this
->
’Œ›s
 = 0;

416 
$this
->
fe_num
 = 0;

417 
$this
->
off£t
 = 0;

418 
	}
}

	@system/libraries/javascript/Jquery.php

1 <?
php
 iàĞ! 
defšed
('BASEPATH')è
ex™
('No direct script‡ccess‡llowed');

27 şas 
	cCI_Jqu”y
 
ex‹nds
 
	mCI_Javasüt
 {

29 
v¬
 
	m$_javasüt_fŞd”
 = 'js';

30 
v¬
 
	m$jqu”y_code_fÜ_lßd
 = 
¬¿y
();

31 
v¬
 
	m$jqu”y_code_fÜ_compe
 = 
¬¿y
();

32 
v¬
 
	m$jqu”y_cÜÃr_aùive
 = 
FALSE
;

33 
v¬
 
	m$jqu”y_bË_sÜ‹r_aùive
 = 
FALSE
;

34 
v¬
 
	m$jqu”y_bË_sÜ‹r_·g”_aùive
 = 
FALSE
;

35 
v¬
 
	m$jqu”y_ajax_img
 = '';

37 
public
 
funùiÚ
 
	$__cÚ¡ruù
(
$·¿ms
)

39 
$this
->
CI
 =& 
	`g‘_š¡ªû
();

40 
	`exŒaù
(
$·¿ms
);

42 ià(
$autŞßd
 ==ğ
TRUE
)

44 
$this
->
	`süt
();

47 
	`log_mes§ge
('debug', "Jquery Class Initialized");

64 
funùiÚ
 
	`_blur
(
$–em’t
 = 'this', 
$js
 = '')

66  
$this
->
	`_add_ev’t
(
$–em’t
, 
$js
, 'blur');

67 
	}
}

81 
funùiÚ
 
_chªge
(
$–em’t
 = 'this', 
$js
 = '')

83  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'change');

99 
funùiÚ
 
_şick
(
$–em’t
 = 'this', 
$js
 = '', 
$»t_çl£
 = 
TRUE
)

101 iàĞ! 
is_¬¿y
(
$js
))

103 
$js
 = 
¬¿y
($js);

106 ià(
	g$»t_çl£
)

108 
	g$js
[] = "return false;";

111  
	g$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'click');

126 
funùiÚ
 
_dblşick
(
$–em’t
 = 'this', 
$js
 = '')

128  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'dblclick');

143 
funùiÚ
 
_”rÜ
(
$–em’t
 = 'this', 
$js
 = '')

145  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'error');

160 
funùiÚ
 
_focus
(
$–em’t
 = 'this', 
$js
 = '')

162  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'focus');

178 
funùiÚ
 
_hov”
(
$–em’t
 = 'this', 
$ov”
, 
$out
)

180 
	g$ev’t
 = "\n\t$(" . 
$this
->
_´•_–em’t
(
$–em’t
) . ").hover(\n\t\tfunction()\n\t\t{\n\t\t\t{$over}\n\t\t}, \n\t\tfunction()\n\t\t{\n\t\t\t{$out}\n\t\t});\n";

182 
	g$this
->
	gjqu”y_code_fÜ_compe
[] = 
$ev’t
;

184  
	g$ev’t
;

199 
funùiÚ
 
_keydown
(
$–em’t
 = 'this', 
$js
 = '')

201  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'keydown');

216 
funùiÚ
 
_keyup
(
$–em’t
 = 'this', 
$js
 = '')

218  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'keyup');

233 
funùiÚ
 
_lßd
(
$–em’t
 = 'this', 
$js
 = '')

235  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'load');

250 
funùiÚ
 
_mou£down
(
$–em’t
 = 'this', 
$js
 = '')

252  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'mousedown');

267 
funùiÚ
 
_mou£out
(
$–em’t
 = 'this', 
$js
 = '')

269  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'mouseout');

284 
funùiÚ
 
_mou£ov”
(
$–em’t
 = 'this', 
$js
 = '')

286  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'mouseover');

301 
funùiÚ
 
_mou£up
(
$–em’t
 = 'this', 
$js
 = '')

303  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'mouseup');

318 
funùiÚ
 
_ouut
(
$¬¿y_js
 = '')

320 iàĞ! 
is_¬¿y
(
$¬¿y_js
))

322 
$¬¿y_js
 = 
¬¿y
($array_js);

325 
fÜ—ch
 (
$¬¿y_js
 
as
 
$js
)

327 
	g$this
->
	gjqu”y_code_fÜ_compe
[] = "\t$js\n";

343 
funùiÚ
 
_»size
(
$–em’t
 = 'this', 
$js
 = '')

345  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'resize');

360 
funùiÚ
 
_süŞl
(
$–em’t
 = 'this', 
$js
 = '')

362  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'scroll');

377 
funùiÚ
 
_uÆßd
(
$–em’t
 = 'this', 
$js
 = '')

379  
$this
->
_add_ev’t
(
$–em’t
, 
$js
, 'unload');

395 
funùiÚ
 
_addCÏss
(
$–em’t
 = 'this', 
$şass
='')

397 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

398 
	g$¡r
 = "$({$element}).addClass(\"$class\");";

399  
	g$¡r
;

415 
funùiÚ
 
_ªim©e
(
$–em’t
 = 'this', 
$·¿ms
 = 
¬¿y
(), 
$¥“d
 = '', 
$exŒa
 = '')

417 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

418 
	g$¥“d
 = 
$this
->
_v®id©e_¥“d
(
$¥“d
);

420 
	g$ªim©iÚs
 = "\t\t\t";

422 
fÜ—ch
 (
$·¿ms
 
as
 
$·¿m
=>
$v®ue
)

424 
$ªim©iÚs
 .ğ
$·¿m
.': \''.
$v®ue
.'\', ';

427 
	g$ªim©iÚs
 = 
sub¡r
(
$ªim©iÚs
, 0, -2);

429 ià(
	g$¥“d
 != '')

431 
$¥“d
 = ', '.$speed;

434 ià(
	g$exŒa
 != '')

436 
$exŒa
 = ', '.$extra;

439 
	g$¡r
 = "$({$–em’t}).ªim©e({\n$ªim©iÚs\n\t\t}".
$¥“d
.
$exŒa
.");";

441  
	g$¡r
;

457 
funùiÚ
 
_çdeIn
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

459 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

460 
	g$¥“d
 = 
$this
->
_v®id©e_¥“d
(
$¥“d
);

462 ià(
	g$ÿÎback
 != '')

464 
$ÿÎback
 = ", function(){\n{$callback}\n}";

467 
	g$¡r
 = "$({$element}).fadeIn({$speed}{$callback});";

469  
	g$¡r
;

485 
funùiÚ
 
_çdeOut
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

487 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

488 
	g$¥“d
 = 
$this
->
_v®id©e_¥“d
(
$¥“d
);

490 ià(
	g$ÿÎback
 != '')

492 
$ÿÎback
 = ", function(){\n{$callback}\n}";

495 
	g$¡r
 = "$({$element}).fadeOut({$speed}{$callback});";

497  
	g$¡r
;

513 
funùiÚ
 
_hide
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

515 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

516 
	g$¥“d
 = 
$this
->
_v®id©e_¥“d
(
$¥“d
);

518 ià(
	g$ÿÎback
 != '')

520 
$ÿÎback
 = ", function(){\n{$callback}\n}";

523 
	g$¡r
 = "$({$element}).hide({$speed}{$callback});";

525  
	g$¡r
;

539 
funùiÚ
 
_»moveCÏss
(
$–em’t
 = 'this', 
$şass
='')

541 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

542 
	g$¡r
 = "$({$element}).removeClass(\"$class\");";

543  
	g$¡r
;

559 
funùiÚ
 
_¦ideUp
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

561 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

562 
	g$¥“d
 = 
$this
->
_v®id©e_¥“d
(
$¥“d
);

564 ià(
	g$ÿÎback
 != '')

566 
$ÿÎback
 = ", function(){\n{$callback}\n}";

569 
	g$¡r
 = "$({$element}).slideUp({$speed}{$callback});";

571  
	g$¡r
;

587 
funùiÚ
 
_¦ideDown
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

589 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

590 
	g$¥“d
 = 
$this
->
_v®id©e_¥“d
(
$¥“d
);

592 ià(
	g$ÿÎback
 != '')

594 
$ÿÎback
 = ", function(){\n{$callback}\n}";

597 
	g$¡r
 = "$({$element}).slideDown({$speed}{$callback});";

599  
	g$¡r
;

615 
funùiÚ
 
_¦ideToggË
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

617 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

618 
	g$¥“d
 = 
$this
->
_v®id©e_¥“d
(
$¥“d
);

620 ià(
	g$ÿÎback
 != '')

622 
$ÿÎback
 = ", function(){\n{$callback}\n}";

625 
	g$¡r
 = "$({$element}).slideToggle({$speed}{$callback});";

627  
	g$¡r
;

641 
funùiÚ
 
_toggË
(
$–em’t
 = 'this')

643 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

644 
	g$¡r
 = "$({$element}).toggle();";

645  
	g$¡r
;

659 
funùiÚ
 
_toggËCÏss
(
$–em’t
 = 'this', 
$şass
='')

661 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

662 
	g$¡r
 = "$({$element}).toggleClass(\"$class\");";

663  
	g$¡r
;

679 
funùiÚ
 
_show
(
$–em’t
 = 'this', 
$¥“d
 = '', 
$ÿÎback
 = '')

681 
$–em’t
 = 
$this
->
_´•_–em’t
($element);

682 
	g$¥“d
 = 
$this
->
_v®id©e_¥“d
(
$¥“d
);

684 ià(
	g$ÿÎback
 != '')

686 
$ÿÎback
 = ", function(){\n{$callback}\n}";

689 
	g$¡r
 = "$({$element}).show({$speed}{$callback});";

691  
	g$¡r
;

709 
funùiÚ
 
_upd©”
(
$cÚš”
 = 'this', 
$cÚŒŞËr
, 
$İtiÚs
 = '')

711 
$cÚš”
 = 
$this
->
_´•_–em’t
($container);

713 
	g$cÚŒŞËr
 = (
¡½os
('://', 
$cÚŒŞËr
è==ğ
FALSE
è? $cÚŒŞË¸: 
$this
->
CI
->
cÚfig
->
s™e_u¾
($controller);

716 ià(
	g$this
->
	gCI
->
	gcÚfig
->
™em
('javascript_ajax_img') == '')

718 
$lßdšg_nÙif›r
 = "Loading...";

722 
	g$lßdšg_nÙif›r
 = '<img src=\'' . 
$this
->
CI
->
cÚfig
->
¦ash_™em
('ba£_u¾'è. $this->CI->cÚfig->
™em
('javascript_ajax_img') . '\'‡lt=\'Loading\' />';

725 
	g$upd©”
 = "$($container).empty();\n";

726 
	g$upd©”
 .= "\t\t$($container).prepend(\"$loading_notifier\");\n";

728 
	g$»que¡_İtiÚs
 = '';

729 ià(
	g$İtiÚs
 != '')

731 
$»que¡_İtiÚs
 .= ", {";

732 
	g$»que¡_İtiÚs
 .ğ(
is_¬¿y
(
$İtiÚs
)è? "'".
im¶ode
("', '", $İtiÚs)."'" : "'".
¡r_»¶aû
(":", "':'", $options)."'";

733 
	g$»que¡_İtiÚs
 .= "}";

736 
	g$upd©”
 .= "\t\t$($container).load('$controller'$request_options);";

737  
	g$upd©”
;

753 
funùiÚ
 
_zeb¿TabËs
(
$şass
 = '', 
$odd
 = 'odd', 
$hov”
 = '')

755 
$şass
 = ($class != '') ? '.'.$class : '';

757 
	g$zeb¿
 = "\t\$(\"table{$class}bodyr:nth-child(even)\").addClass(\"{$odd}\");";

759 
	g$this
->
	gjqu”y_code_fÜ_compe
[] = 
$zeb¿
;

761 ià(
	g$hov”
 != '')

763 
$hov”
 = 
$this
->
hov”
("table{$class}bodyr", "$(this).addClass('hover');", "$(this).removeClass('hover');");

766  
	g$zeb¿
;

784 
funùiÚ
 
cÜÃr
(
$–em’t
 = '', 
$cÜÃr_¡yË
 = '')

787 
$cÜÃr_loÿtiÚ
 = '/plugins/jquery.corner.js';

789 ià(
	g$cÜÃr_¡yË
 != '')

791 
$cÜÃr_¡yË
 = '"'.$corner_style.'"';

794  "$(" . 
	g$this
->
_´•_–em’t
(
$–em’t
è. ").cÜÃr(".
	g$cÜÃr_¡yË
.");";

807 
funùiÚ
 
	$mod®
(
$¤c
, 
$»Ïtive
 = 
FALSE
)

809 
$this
->
jqu”y_code_fÜ_lßd
[] = $this->
	`ex‹º®
(
$¤c
, 
$»Ïtive
);

810 
	}
}

822 
funùiÚ
 
	$efãù
(
$¤c
, 
$»Ïtive
 = 
FALSE
)

824 
$this
->
jqu”y_code_fÜ_lßd
[] = $this->
	`ex‹º®
(
$¤c
, 
$»Ïtive
);

825 
	}
}

837 
funùiÚ
 
	$¶ugš
(
$¤c
, 
$»Ïtive
 = 
FALSE
)

839 
$this
->
jqu”y_code_fÜ_lßd
[] = $this->
	`ex‹º®
(
$¤c
, 
$»Ïtive
);

840 
	}
}

852 
funùiÚ
 
	$ui
(
$¤c
, 
$»Ïtive
 = 
FALSE
)

854 
$this
->
jqu”y_code_fÜ_lßd
[] = $this->
	`ex‹º®
(
$¤c
, 
$»Ïtive
);

855 
	}
}

866 
funùiÚ
 
sÜbË
(
$–em’t
, 
$İtiÚs
 = 
	$¬¿y
())

869 ià(
	`couÁ
(
$İtiÚs
) > 0)

871 
$sÜt_İtiÚs
 = 
	`¬¿y
();

872 
	`fÜ—ch
 (
$İtiÚs
 
as
 
$k
=>
$v
)

874 
$sÜt_İtiÚs
[] = "\n\t\t".
$k
.': '.
$v
."";

876 
$sÜt_İtiÚs
 = 
	`im¶ode
(",", $sort_options);

880 
$sÜt_İtiÚs
 = '';

883  "$(" . 
$this
->
	`_´•_–em’t
(
$–em’t
è. ").sÜbË({".
$sÜt_İtiÚs
."\n\t});";

884 
	}
}

896 
funùiÚ
 
bËsÜ‹r
(
$bË
 = '', 
$İtiÚs
 = '')

898 
$this
->
jqu”y_code_fÜ_compe
[] = "\t$(" . $this->
_´•_–em’t
(
$bË
) . ").tablesorter($options);\n";

916 
funùiÚ
 
	$_add_ev’t
(
$–em’t
, 
$js
, 
$ev’t
)

918 ià(
	`is_¬¿y
(
$js
))

920 
$js
 = 
	`im¶ode
("\n\t\t", $js);

924 
$ev’t
 = "\n\t$(" . 
$this
->
	`_´•_–em’t
(
$–em’t
) . ").{$event}(function(){\n\t\t{$js}\n\t});\n";

925 
$this
->
jqu”y_code_fÜ_compe
[] = 
$ev’t
;

926  
$ev’t
;

927 
	}
}

940 
funùiÚ
 
_compe
(
$v›w_v¬
 = 'süt_foÙ', 
$süt_gs
 = 
TRUE
)

943 
$ex‹º®_süts
 = 
im¶ode
('', 
$this
->
jqu”y_code_fÜ_lßd
);

944 
	g$this
->
	gCI
->
	glßd
->
v¬s
(
¬¿y
('lib¿ry_¤c' => 
$ex‹º®_süts
));

946 ià(
couÁ
(
$this
->
jqu”y_code_fÜ_compe
) == 0 )

953 
	g$süt
 = '$(document).ready(function() {' . "\n";

954 
	g$süt
 .ğ
im¶ode
('', 
$this
->
jqu”y_code_fÜ_compe
);

955 
	g$süt
 .= '});';

957 
	g$ouut
 = (
$süt_gs
 ==ğ
FALSE
è? 
$süt
 : 
$this
->
šlše
($script);

959 
	g$this
->
	gCI
->
	glßd
->
v¬s
(
¬¿y
(
$v›w_v¬
 => 
$ouut
));

973 
funùiÚ
 
	$_ş—r_compe
()

975 
$this
->
jqu”y_code_fÜ_compe
 = 
	`¬¿y
();

976 
	}
}

988 
funùiÚ
 
	$_docum’t_»ady
(
$js
)

990 iàĞ! 
	`is_¬¿y
(
$js
))

992 
$js
 = 
	`¬¿y
 ($js);

996 
	`fÜ—ch
 (
$js
 
as
 
$süt
)

998 
$this
->
jqu”y_code_fÜ_compe
[] = 
$süt
;

1000 
	}
}

1013 
funùiÚ
 
süt
(
$lib¿ry_¤c
 = '', 
$»Ïtive
 = 
FALSE
)

1015 
$lib¿ry_¤c
 = 
$this
->
ex‹º®
($lib¿ry_¤c, 
$»Ïtive
);

1016 
	g$this
->
	gjqu”y_code_fÜ_lßd
[] = 
$lib¿ry_¤c
;

1017  
	g$lib¿ry_¤c
;

1033 
funùiÚ
 
	$_´•_–em’t
(
$–em’t
)

1035 ià(
$–em’t
 != 'this')

1037 
$–em’t
 = '"'.$element.'"';

1040  
$–em’t
;

1041 
	}
}

1054 
funùiÚ
 
	$_v®id©e_¥“d
(
$¥“d
)

1056 ià(
	`š_¬¿y
(
$¥“d
, 
	`¬¿y
('slow', 'normal', 'fast')))

1058 
$¥“d
 = '"'.$speed.'"';

1060 
	`–£if
 (
	`´eg_m©ch
("/[^0-9]/", 
$¥“d
))

1062 
$¥“d
 = '';

1065  
$¥“d
;

1066 
	}
}

	@tests/controllers/welcomeTest.php

1 <?
php


5 şas 
	cW–comeTe¡
 
ex‹nds
 
	mCIUn™_Te¡Ca£


7 
public
 
funùiÚ
 
	$£tUp
()

10 
$this
->
CI
 = 
	`£t_cÚŒŞËr
('welcome');

13 
public
 
funùiÚ
 
	$‹¡Index
()

16 
$this
->
CI
->
	`šdex
();

19 
$out
 = 
	`ouut
();

22 
$this
->
	`as£¹Same
(0, 
	`´eg_m©ch
('/Ó¼Ü|nÙiû)/i', 
$out
));

23 
	}
}

	@tests/fixtures/Controller_fixt.php

1 <?
php


14 şas 
	cCÚŒŞËr_fixt
 
ex‹nds
 
	mCÚŒŞËr
 {

16 
funùiÚ
 
	$‹¡
(
$š
){

17 
$out
 = 
$š
;

18  
$out
;

21 
funùiÚ
 
	$show1
(
$d©a
){

22 
$this
->
lßd
->
	`v›wfe
(
TESTSPATH
 . 'fixtu»s/v›w_fixt.php', 
	`¬¿y
('d©a' => 
$d©a
));

23 
	}
}

25 
funùiÚ
 
	$show2
(){

26 
$some_v¬
=
	`¬¿y
(1,2,3);

27 
$d©a
=
	`¬¿y
(

28 'd©a' => 
$some_v¬


30 
$this
->
lßd
->
	`v›wfe
(
TESTSPATH
 . 'fixtu»s/v›w_fixt.php', 
$d©a
);

31 
	}
}

33 
funùiÚ
 
	$show3
(){

34 
$some_v¬
=
	`¬¿y
(1,2,3);

35 
$d©a
=
	`¬¿y
(

36 'd©a' => 
$some_v¬


38 
$this
->
lßd
->
	`v›wfe
(
TESTSPATH
 . 'fixtu»s/v›w_fixt2.php', 
$d©a
);

39 
	}
}

	@tests/fixtures/Controller_fixt2.php

1 <?
php


14 şas 
	cCÚŒŞËr_fixt2
 
ex‹nds
 
	mCÚŒŞËr
 {

16 
funùiÚ
 
	$‹¡
(
$š
){

17 
$out
 = 
$š
;

18  
$out
;

21 
funùiÚ
 
	$show1
(
$d©a
){

22 
$this
->
lßd
->
	`v›wfe
(
TESTSPATH
 . 'fixtu»s/v›w_fixt.php', 
	`¬¿y
('d©a' => 
$d©a
));

23 
	}
}

25 
funùiÚ
 
	$show2
(){

26 
$some_v¬
=
	`¬¿y
(1,2,3);

27 
$d©a
=
	`¬¿y
(

28 'd©a' => 
$some_v¬


30 
$this
->
lßd
->
	`v›wfe
(
TESTSPATH
 . 'fixtu»s/v›w_fixt.php', 
$d©a
);

31 
	}
}

33 
funùiÚ
 
	$show3
(){

34 
$some_v¬
=
	`¬¿y
(1,2,3);

35 
$d©a
=
	`¬¿y
(

36 'd©a' => 
$some_v¬


38 
$this
->
lßd
->
	`v›wfe
(
TESTSPATH
 . 'fixtu»s/v›w_fixt2.php', 
$d©a
);

39 
	}
}

	@tests/fixtures/view_fixt.php

1 <?
php


2 
´št_r
(
$d©a
);

	@tests/fixtures/view_fixt2.php

1 <?
php


2 
	gšşude
 'view_fixt.php';

3 
	g$this
->
	glßd
->
v›wfe
(
TESTSPATH
 . 'fixtu»s/v›w_fixt.php', 
$d©a
);

	@tests/generate.php

1 <?
php


5 
»quœe_Úû
 
dœÇme
(
__FILE__
) . '/../application/third_party/CIUnit/bootstrap_phpunit.php';

6 
šşude_Úû
 
dœÇme
(
__FILE__
) . '/getops.php';

8 şas 
	cG’”©e


10 
funùiÚ
 
	$__cÚ¡ruù
()

12 
$this
->
CI
 = &
	`£t_cÚŒŞËr
('CI_Controller');

13 
$this
->
CI
->
lßd
->
	`d©aba£
();

16 
funùiÚ
 
	$g‘_bË_f›lds
(
$bË
)

18 
$»suÉ
 = 
$this
->
	`£Ëù_äom_bË
(
$bË
);

20 
$i
 = 0;

21 
$f›lds
 = 
	`¬¿y
();

22 
$i
 < 
	`mysql_num_f›lds
(
$»suÉ
))

24 
$f›lds
[
$i
] = 
	`mysql_ãtch_f›ld
(
$»suÉ
, $i);

41 
$i
++;

43  
$f›lds
;

44 
	}
}

46 
funùiÚ
 
	$£Ëù_äom_bË
(
$bË
, 
$lim™
 = 1)

48 
$qu”y
 = "SELECT * FROM `$table`";

49 ià(
$lim™
 > 0)

51 
$qu”y
 .ğ" LIMIT " . (è
$lim™
;

53 
$»s
 = 
	`mysql_qu”y
(
$qu”y
è
Ü
 
	`d›
(
	`mysql_”rÜ
());

54  
$»s
;

56 
	}
}

58 
funùiÚ
 
	$g‘_bË_d©a
(
$bË
, 
$lim™
 = 5)

60 
$bË_f›lds
 = 
$this
->
	`g‘_bË_f›lds
(
$bË
);

61 
$»s
 = 
$this
->
	`£Ëù_äom_bË
(
$bË
, 
$lim™
);

62 
$d©a
 = 
	`A¼ay
();

63 (
$row
 = 
	`mysql_ãtch_assoc
(
$»s
)è!=ğ
çl£
)

65 
$i
 = 0;

66 
	`fÜ—ch
(
$row
 
as
 
$f›ld
 => 
$v®
)

68 if(!
$bË_f›lds
[
$i
]->
num”ic
)

70 
$row
[
$f›ld
] = '"' . 
	`addSÏshes
(
$v®
) . '"';

72 
$i
++;

74 
$d©a
['row' . (
	`couÁ
($d©aè+ 1)] = 
$row
;

76 
	`mysql_ä“_»suÉ
(
$»s
);

77  
$d©a
;

78 
	}
}

80 
funùiÚ
 
fixtu»s
(
$¬gs
 = 
	$A¼ay
())

82 ià(
	`sub¡r
(
$this
->
CI
->
db
->
d©aba£
, -5, 5) != '_test')

84 
	`d›
("\nSorry,he‚ame of yourest database mustƒnd on '_test'.\n".

89 ià(!
$this
->
CI
->
db
->
	`db_£Ëù
())

91 
	`d›
("\nCould‚ot select development database.\n");

94 
$İts
 = 
	`g‘İts
(
	`¬¿y
(

95 'rows' => 
	`¬¿y
('sw™ch' => 'n', 'ty³' => 
GETOPT_VAL
, 'default' => 5),

96 'fixtu»s' => 
	`¬¿y
('sw™ch' => 'f', 'ty³' => 
GETOPT_MULTIVAL
),

97 'ouut' => 
	`¬¿y
('sw™ch' => 'o', 'ty³' => 
GETOPT_VAL
, 'default' => '/fixtures')

98 ), 
$¬gs
);

101 
$rows
 = 
$İts
['rows'];

102 
$fixtu»s
 = 
$İts
['fixtures'];

103 
$ouut
 = 
	`¹rim
(
	`¡r_»¶aû
('\\','/',
$İts
['output']), '/') . '/';

104 ià(!@
	`chdœ
(
	`dœÇme
(
__FILE__
è. '/' . 
$ouut
))

106 
	`d›
("\nOutput directory '$output' does‚otƒxist.\n");

110 
$bËs
 = 
$this
->
CI
->
db
->
	`li¡_bËs
();

111 ià(
	`couÁ
(
$fixtu»s
) == 0)

113 
$fixtu»s
 = 
$bËs
;

118 
	`fÜ—ch
 (
$fixtu»s
 
as
 
$fixtu»
)

120 ià(!
	`š_¬¿y
(
$fixtu»
, 
$bËs
))

122 
	`d›
("\nTable `$fixture` does‚otƒxist.\n");

128 
	`fÜ—ch
 (
$fixtu»s
 
as
 
$fixtu»
)

130 
$f’ame
 = 
$fixtu»
 . '_fixt.yml';

131 
$d©a
 = 
$this
->
	`g‘_bË_d©a
(
$fixtu»
, 
$rows
);

132 
$yaml_d©a
 = 
CIUn™
::
$¥yc
->
	`dump
(
$d©a
);

134 
$yaml_d©a
 = 
	`´eg_»¶aû
('#^\-\-\-#', '', $yaml_data);

137 
	`fe_put_cÚ‹Ás
(
$f’ame
, 
$yaml_d©a
);

139 
	}
}

142 
	g$¬gs
 = 
$_SERVER
['argv'];

143 
	g$£lf
 = 
¬¿y_shiá
(
$¬gs
);

145 
	g$g’”©e
 = 
Ãw
 
G’”©e
;

146 
	g$g’”©e_wh©
 = 
¬¿y_shiá
(
$¬gs
);

148 ià(!
	$m‘hod_exi¡s
(
$g’”©e
, 
$g’”©e_wh©
))

150 
	`d›
("\nMethod '$generate_what' is invalid.

151 
U§ge
:

152 
php
 
g’”©e
.ph°
fixtu»s
 <
İtiÚs
>

153 
O±iÚs
:

154 -
f
 
bËs
 
of
 
which
 
fixtu»s
 
should
 
be
 
	`ü—‹d
 (-à
bË1
 -à
bË2
 
‘c
)

155 
om™tšg
 
the
 -
f
 
İtiÚ
, 
£Ëùs
 
®l
 
bËs
 
š
h
d©aba£
.

156 -
n
 
numb”
 
of
 
rows
 
š
 
fixtu»s
 <: 5>

157 -
o
 
ouut
 
dœeùÜy
\
n
");

158 
	}
}

161 
$g’”©e
->
$g’”©e_wh©
(
$_SERVER
['argv']);

	@tests/getops.php

1 <?
php


119 
defše
('GETOPT_NOTSWITCH',0);

120 
defše
('GETOPT_SWITCH',1);

121 
defše
('GETOPT_ACCUMULATE',2);

122 
defše
('GETOPT_VAL',3);

123 
defše
('GETOPT_MULTIVAL',4);

124 
defše
('GETOPT_KEYVAL',5);

131 
funùiÚ
 
	$g‘İts
(
$İtiÚs
,
$äom¬r
 = 
nuÎ
) {

132 ià(
$äom¬r
 ==ğ
nuÎ
)

133 
$äom¬r
 = 
$_SERVER
['argv'];

134 
	`–£if
 (!
	`is_¬¿y
(
$äom¬r
))

135 
$äom¬r
 = 
	`ex¶ode
(' ',$fromarr);

136 
$İts
 = 
	`¬¿y
('cmdline' =>‡rray());

137 
$İtiÚ¦ookup
 = 
	`¬¿y
();

138 
	`fÜ—ch
 (
$İtiÚs
 
as
 
$İt™em
 => 
$´İs
) {

139 ià(!
	`is£t
(
$´İs
['type'])) {

140 
$İtiÚs
[
$İt™em
]['ty³'] = 
GETOPT_SWITCH
;

141 
$´İs
['ty³'] = 
GETOPT_SWITCH
;

143 
$´İs
['type']) {

144 
GETOPT_VAL
:

145 ià(
	`is£t
(
$´İs
['default'])) {

146 
$İts
[
$İt™em
] = 
$´İs
['default'];

149 
GETOPT_ACCUMULATE
:

150 
GETOPT_SWITCH
:

151 
$İts
[
$İt™em
] = 0;

153 
GETOPT_MULTIVAL
:

154 
GETOPT_KEYVAL
:

155 
$İts
[
$İt™em
] = 
	`¬¿y
();

157 ià(
	`is_¬¿y
(
$´İs
['switch'])) {

158 
	`fÜ—ch
 (
$´İs
['sw™ch'] 
as
 
$sw™ch®Ÿs
)

159 
$İtiÚ¦ookup
[
$sw™ch®Ÿs
] = 
$İt™em
;

161 
$İtiÚ¦ookup
[
$´İs
['sw™ch']] = 
$İt™em
;

165 
$šsw™ch
 = 
GETOPT_NOTSWITCH
;

166 
$i
 = 1; $˜< 
	`couÁ
(
$äom¬r
); $i++) {

167 
$šsw™ch
) {

168 
GETOPT_MULTIVAL
:

169 
GETOPT_VAL
:

170 ià(
	`sub¡r
(
$äom¬r
[
$i
],0,1) == '-')

171 
	`d›
("The option '{$fromarr[$i]}'‚eeds‡ value.\n");

172 
	`GETOPT_£tv®
(
$İts
,
$İtiÚs
,
$šsw™ch_key
,
$äom¬r
[
$i
]);

173 
$šsw™ch
 = 
GETOPT_NOTSWITCH
;

175 
GETOPT_KEYVAL
:

176 ià(
	`sub¡r
(
$äom¬r
[
$i
],0,1) == '-')

177 
	`d›
("The option '{$fromarr[$i]}'‚eeds‡ value.\n");

178 
$äom¬r
[
$i
] = 
	`¡¹r
($fromarr[$i],':','=');

179 ià(
	`¡½os
(
$äom¬r
[
$i
],'='è==ğ
çl£
)

180 
	`d›
("The option '$inswitch_userkey'‚eeds‡ key-value…air. E.g. '-$inswitch_userkey option=value'");

181 
	`GETOPT_£tv®
(
$İts
,
$İtiÚs
,
$šsw™ch_key
,
	`ex¶ode
('=',
$äom¬r
[
$i
]));

182 
$šsw™ch
 = 
GETOPT_NOTSWITCH
;

184 
GETOPT_NOTSWITCH
:

185 ià(
	`sub¡r
(
$äom¬r
[
$i
],0,1) == '-') {

187 ià((
	`¡¾’
(
$äom¬r
[
$i
]è=ğ2è|| (
	`sub¡r
($fromarr[$i],0,2) == '--')) {

188 
$u£rkey
 = 
	`Érim
(
$äom¬r
[
$i
],'-');

189 ià(!
	`is£t
(
$İtiÚ¦ookup
[
$u£rkey
]))

190 
	`d›
("Unknown option '-$userkey'\n");

191 
$hashkey
 = 
$İtiÚ¦ookup
[
$u£rkey
];

192 ià((
$İtiÚs
[
$hashkey
]['ty³'] =ğ
GETOPT_SWITCH
è|| ($İtiÚs[$hashkey]['ty³'] =ğ
GETOPT_ACCUMULATE
)) {

193 
	`GETOPT_£tv®
(
$İts
,
$İtiÚs
,
$hashkey
,1);

195 
$šsw™ch
 = 
$İtiÚs
[
$hashkey
]['type'];

196 
$šsw™ch_key
 = 
$hashkey
;

197 
$šsw™ch_u£rkey
 = 
$u£rkey
;

201 
$o
 = 1; $Ø< 
	`¡¾’
(
$äom¬r
[
$i
]); $o++) {

202 
$hashkey
 = 
	`sub¡r
(
$äom¬r
[
$i
],
$o
,1);

203 ià(!
	`is£t
(
$İtiÚ¦ookup
[
$hashkey
]))

204 
	`d›
("Unknown option '-$hashkey'\n");

205 ià((
$İtiÚs
[
$İtiÚ¦ookup
[
$hashkey
]]['ty³'] !ğ
GETOPT_SWITCH
è&& ($İtiÚs[$İtiÚ¦ookup[$hashkey]]['ty³'] !ğ
GETOPT_ACCUMULATE
))

206 
	`d›
("Option '-$hashkey'„equires‡ value.\n");

207 
	`GETOPT_£tv®
(
$İts
,
$İtiÚs
,
$İtiÚ¦ookup
[
$hashkey
],1);

211 
$İts
['cmdlše'][] = 
$äom¬r
[
$i
];

216  
$İts
;

217 
	}
}

219 
funùiÚ
 
	$GETOPT_£tv®
(&
$İts
,&
$İtiÚs
,
$key
,
$v®ue
) {

220 
$İtiÚs
[
$key
]['type']) {

221 
GETOPT_VAL
:

222 
GETOPT_SWITCH
:

223 
$İts
[
$key
] = 
$v®ue
;

225 
GETOPT_ACCUMULATE
:

226 
$İts
[
$key
]++;

228 
GETOPT_MULTIVAL
:

229 
$İts
[
$key
][] = 
$v®ue
;

231 
GETOPT_KEYVAL
:

232 
$İts
[
$key
][
$v®ue
[0]] = $value[1];

234 
	}
}

	@tests/models/m_userTest.php

1 <?
php


2 şas 
	cm_u£rTe¡
 
ex‹nds
 
	mCIUn™_Te¡Ca£
{

3 
funùiÚ
 
	$__cÚ¡ruù
(){

4 
·»Á
::
	`__cÚ¡ruù
();

6 
funùiÚ
 
	$£tUp
(){

7 
$this
->
CI
->
lßd
->
	`mod–
('m_user');

8 
·»Á
::
	`£tUp
();

9 
	}
}

10 
funùiÚ
 
	$‹¬Down
(){

11 
·»Á
::
	`‹¬Down
();

12 
	}
}

13 
funùiÚ
 
	$‹¡
(){

14 
$‰
=
$this
->
CI
->
m_u£r
->
	`g‘_u£r_»®_Çme_by_di¥Ïy_Çme
("hello");

15 
$this
->
	`as£¹Equ®s
("h–lo(0)",
$‰
);

17 
	}
}

	@
1
.
1
/usr/include
243
9238
application/config/autoload.php
application/config/config.php
application/config/constants.php
application/config/database.php
application/config/doctypes.php
application/config/foreign_chars.php
application/config/hooks.php
application/config/migration.php
application/config/mimes.php
application/config/profiler.php
application/config/routes.php
application/config/smileys.php
application/config/testing/database.php
application/config/user_agents.php
application/controllers/c_ajax.php
application/controllers/c_login.php
application/controllers/c_page_group.php
application/controllers/c_page_weibo.php
application/controllers/c_register.php
application/controllers/c_single_group_page.php
application/controllers/c_test.php
application/controllers/mobile/c_ajax.php
application/controllers/mobile/c_login.php
application/controllers/mobile/c_page.php
application/controllers/mobile/c_register.php
application/controllers/mobile/c_wlinke.php
application/controllers/welcome.php
application/controllers/xmlrpc.php
application/core/WE_Controller.php
application/errors/error_404.php
application/errors/error_db.php
application/errors/error_general.php
application/errors/error_php.php
application/helpers/album_helper.php
application/helpers/check_helper.php
application/helpers/ixr_xmlrpc_helper.php
application/helpers/saetv2.ex.class_helper.php
application/helpers/we_error_helper.php
application/language/english/error_lang.php
application/logs/log-2012-05-01.php
application/logs/log-2012-05-04.php
application/logs/log-2012-05-05.php
application/logs/log-2012-05-11.php
application/logs/log-2012-05-12.php
application/logs/log-2012-05-13.php
application/logs/log-2012-05-14.php
application/models/m_album.php
application/models/m_blog.php
application/models/m_comment.php
application/models/m_create_table.php
application/models/m_event.php
application/models/m_feed.php
application/models/m_friend.php
application/models/m_group.php
application/models/m_message.php
application/models/m_notify.php
application/models/m_online.php
application/models/m_place.php
application/models/m_user.php
application/models/m_wlinke.php
application/models/phone_carrier_model.php
application/third_party/CIUnit/bootstrap_phpunit.php
application/third_party/CIUnit/config/config.php
application/third_party/CIUnit/core/CIU_Controller.php
application/third_party/CIUnit/core/CIU_Exceptions.php
application/third_party/CIUnit/core/CIU_Loader.php
application/third_party/CIUnit/core/CIU_Output.php
application/third_party/CIUnit/core/CodeIgniter.php
application/third_party/CIUnit/core/Common.php
application/third_party/CIUnit/helpers/CIU_url_helper.php
application/third_party/CIUnit/libraries/CIU_Session.php
application/third_party/CIUnit/libraries/CIUnit.php
application/third_party/CIUnit/libraries/CIUnitTestCase.php
application/third_party/CIUnit/libraries/Fixture.php
application/third_party/CIUnit/libraries/Unit_test.php
application/third_party/CIUnit/libraries/spyc/examples/yaml-dump.php
application/third_party/CIUnit/libraries/spyc/examples/yaml-load.php
application/third_party/CIUnit/libraries/spyc/php4/5to4.php
application/third_party/CIUnit/libraries/spyc/spyc.php
application/third_party/CIUnit/libraries/spyc/tests/DumpTest.php
application/third_party/CIUnit/libraries/spyc/tests/IndentTest.php
application/third_party/CIUnit/libraries/spyc/tests/ParseTest.php
application/views/mobile/v_add_group.php
application/views/mobile/v_add_place.php
application/views/mobile/v_error_dialog.php
application/views/mobile/v_footer.php
application/views/mobile/v_header.php
application/views/mobile/v_input_dialog.php
application/views/mobile/v_login.php
application/views/mobile/v_page_bak.php
application/views/mobile/v_page_friend.php
application/views/mobile/v_page_group.php
application/views/mobile/v_page_near.php
application/views/mobile/v_page_place.php
application/views/mobile/v_page_ppt.php
application/views/mobile/v_page_private.php
application/views/mobile/v_page_weibo.php
application/views/mobile/v_register.php
application/views/mobile/v_single_group.php
application/views/mobile/v_single_place.php
application/views/mobile/v_single_user.php
application/views/mobile/v_single_weibo.php
application/views/v_footer.php
application/views/v_header.php
application/views/v_login.php
application/views/v_page_group.php
application/views/v_page_weibo.php
application/views/v_register.php
application/views/v_single_group_page.php
application/views/welcome_message.php
index.php
system/core/Benchmark.php
system/core/CodeIgniter.php
system/core/Common.php
system/core/Config.php
system/core/Controller.php
system/core/Exceptions.php
system/core/Hooks.php
system/core/Input.php
system/core/Lang.php
system/core/Loader.php
system/core/Model.php
system/core/Output.php
system/core/Router.php
system/core/Security.php
system/core/URI.php
system/core/Utf8.php
system/database/DB.php
system/database/DB_active_rec.php
system/database/DB_cache.php
system/database/DB_driver.php
system/database/DB_forge.php
system/database/DB_result.php
system/database/DB_utility.php
system/database/drivers/cubrid/cubrid_driver.php
system/database/drivers/cubrid/cubrid_forge.php
system/database/drivers/cubrid/cubrid_result.php
system/database/drivers/cubrid/cubrid_utility.php
system/database/drivers/mssql/mssql_driver.php
system/database/drivers/mssql/mssql_forge.php
system/database/drivers/mssql/mssql_result.php
system/database/drivers/mssql/mssql_utility.php
system/database/drivers/mysql/mysql_driver.php
system/database/drivers/mysql/mysql_forge.php
system/database/drivers/mysql/mysql_result.php
system/database/drivers/mysql/mysql_utility.php
system/database/drivers/mysqli/mysqli_driver.php
system/database/drivers/mysqli/mysqli_forge.php
system/database/drivers/mysqli/mysqli_result.php
system/database/drivers/mysqli/mysqli_utility.php
system/database/drivers/oci8/oci8_driver.php
system/database/drivers/oci8/oci8_forge.php
system/database/drivers/oci8/oci8_result.php
system/database/drivers/oci8/oci8_utility.php
system/database/drivers/odbc/odbc_driver.php
system/database/drivers/odbc/odbc_forge.php
system/database/drivers/odbc/odbc_result.php
system/database/drivers/odbc/odbc_utility.php
system/database/drivers/pdo/pdo_driver.php
system/database/drivers/postgre/postgre_driver.php
system/database/drivers/postgre/postgre_forge.php
system/database/drivers/postgre/postgre_result.php
system/database/drivers/postgre/postgre_utility.php
system/database/drivers/sqlite/sqlite_driver.php
system/database/drivers/sqlite/sqlite_forge.php
system/database/drivers/sqlite/sqlite_result.php
system/database/drivers/sqlite/sqlite_utility.php
system/database/drivers/sqlsrv/sqlsrv_driver.php
system/database/drivers/sqlsrv/sqlsrv_forge.php
system/database/drivers/sqlsrv/sqlsrv_result.php
system/database/drivers/sqlsrv/sqlsrv_utility.php
system/helpers/array_helper.php
system/helpers/captcha_helper.php
system/helpers/cookie_helper.php
system/helpers/date_helper.php
system/helpers/directory_helper.php
system/helpers/download_helper.php
system/helpers/email_helper.php
system/helpers/file_helper.php
system/helpers/form_helper.php
system/helpers/html_helper.php
system/helpers/inflector_helper.php
system/helpers/language_helper.php
system/helpers/number_helper.php
system/helpers/path_helper.php
system/helpers/security_helper.php
system/helpers/smiley_helper.php
system/helpers/string_helper.php
system/helpers/text_helper.php
system/helpers/typography_helper.php
system/helpers/url_helper.php
system/helpers/xml_helper.php
system/language/english/calendar_lang.php
system/language/english/date_lang.php
system/language/english/db_lang.php
system/language/english/email_lang.php
system/language/english/form_validation_lang.php
system/language/english/ftp_lang.php
system/language/english/imglib_lang.php
system/language/english/migration_lang.php
system/language/english/number_lang.php
system/language/english/profiler_lang.php
system/language/english/unit_test_lang.php
system/language/english/upload_lang.php
system/libraries/Cache/Cache.php
system/libraries/Cache/drivers/Cache_apc.php
system/libraries/Cache/drivers/Cache_dummy.php
system/libraries/Cache/drivers/Cache_file.php
system/libraries/Cache/drivers/Cache_memcached.php
system/libraries/Calendar.php
system/libraries/Cart.php
system/libraries/Driver.php
system/libraries/Email.php
system/libraries/Encrypt.php
system/libraries/Form_validation.php
system/libraries/Ftp.php
system/libraries/Image_lib.php
system/libraries/Javascript.php
system/libraries/Log.php
system/libraries/Migration.php
system/libraries/Pagination.php
system/libraries/Parser.php
system/libraries/Profiler.php
system/libraries/Session.php
system/libraries/Sha1.php
system/libraries/Table.php
system/libraries/Trackback.php
system/libraries/Typography.php
system/libraries/Unit_test.php
system/libraries/Upload.php
system/libraries/User_agent.php
system/libraries/Xmlrpc.php
system/libraries/Xmlrpcs.php
system/libraries/Zip.php
system/libraries/javascript/Jquery.php
tests/controllers/welcomeTest.php
tests/fixtures/Controller_fixt.php
tests/fixtures/Controller_fixt2.php
tests/fixtures/view_fixt.php
tests/fixtures/view_fixt2.php
tests/generate.php
tests/getops.php
tests/models/m_userTest.php
